(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{710:function(module,exports,__webpack_require__){eval("/* WEBPACK VAR INJECTION */(function($, jQuery) {/**\r\n * Jspreadsheet v4.6.0\r\n *\r\n * Website: https://bossanova.uk/jspreadsheet/\r\n * Description: Create amazing web based spreadsheets.\r\n *\r\n * This software is distribute under MIT License\r\n */\r\n\r\nconsole.log('Jexcel has been renamed to Jspreadsheet. Please use: npm install jspreadsheet-ce')\r\nif (! jSuites && \"function\" === 'function') {\r\n    var jSuites = __webpack_require__(856);\r\n    __webpack_require__(857);\r\n}\r\n\r\n;(function (global, factory) {\r\n     true ? module.exports = factory() :\r\n    undefined;\r\n}(this, (function () {\r\n\r\n    'use strict';\r\n\r\n    // Jspreadsheet core object\r\n\r\n    var jexcel = (function(el, options) {\r\n        // Create jexcel object\r\n        var obj = {};\r\n        obj.options = {};\r\n\r\n        if (! (el instanceof Element || el instanceof HTMLDocument)) {\r\n            console.error('Jspreadsheet: el is not a valid DOM element');\r\n            return false;\r\n        } else if (el.tagName == 'TABLE') {\r\n            if (options = jexcel.createFromTable(el, options)) {\r\n                var div = document.createElement('div');\r\n                el.parentNode.insertBefore(div, el);\r\n                el.remove();\r\n                el = div;\r\n            } else {\r\n                console.error('Jspreadsheet: el is not a valid DOM element');\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // Loading default configuration\r\n        var defaults = {\r\n            // External data\r\n            url:null,\r\n            // Ajax options\r\n            method: 'GET',\r\n            requestVariables: null,\r\n            // Data\r\n            data:null,\r\n            // Custom sorting handler\r\n            sorting:null,\r\n            // Copy behavior\r\n            copyCompatibility:false,\r\n            root:null,\r\n            // Rows and columns definitions\r\n            rows:[],\r\n            columns:[],\r\n            // Deprected legacy options\r\n            colHeaders:[],\r\n            colWidths:[],\r\n            colAlignments:[],\r\n            nestedHeaders:null,\r\n            // Column width that is used by default\r\n            defaultColWidth:50,\r\n            defaultColAlign:'center',\r\n            // Spare rows and columns\r\n            minSpareRows:0,\r\n            minSpareCols:0,\r\n            // Minimal table dimensions\r\n            minDimensions:[0,0],\r\n            // Allow Export\r\n            allowExport:true,\r\n            // @type {boolean} - Include the header titles on download\r\n            includeHeadersOnDownload:false,\r\n            // @type {boolean} - Include the header titles on copy\r\n            includeHeadersOnCopy:false,\r\n            // Allow column sorting\r\n            columnSorting:true,\r\n            // Allow column dragging\r\n            columnDrag:false,\r\n            // Allow column resizing\r\n            columnResize:true,\r\n            // Allow row resizing\r\n            rowResize:false,\r\n            // Allow row dragging\r\n            rowDrag:true,\r\n            // Allow table edition\r\n            editable:true,\r\n            // Allow new rows\r\n            allowInsertRow:true,\r\n            // Allow new rows\r\n            allowManualInsertRow:true,\r\n            // Allow new columns\r\n            allowInsertColumn:true,\r\n            // Allow new rows\r\n            allowManualInsertColumn:true,\r\n            // Allow row delete\r\n            allowDeleteRow:true,\r\n            // Allow deleting of all rows\r\n            allowDeletingAllRows:false,\r\n            // Allow column delete\r\n            allowDeleteColumn:true,\r\n            // Allow rename column\r\n            allowRenameColumn:true,\r\n            // Allow comments\r\n            allowComments:false,\r\n            // Global wrap\r\n            wordWrap:false,\r\n            // Image options\r\n            imageOptions: null,\r\n            // CSV source\r\n            csv:null,\r\n            // Filename\r\n            csvFileName:'jexcel',\r\n            // Consider first line as header\r\n            csvHeaders:true,\r\n            // Delimiters\r\n            csvDelimiter:',',\r\n            // First row as header\r\n            parseTableFirstRowAsHeader:false,\r\n            parseTableAutoCellType:false,\r\n            // Disable corner selection\r\n            selectionCopy:true,\r\n            // Merged cells\r\n            mergeCells:{},\r\n            // Create toolbar\r\n            toolbar:null,\r\n            // Allow search\r\n            search:false,\r\n            // Create pagination\r\n            pagination:false,\r\n            paginationOptions:null,\r\n            // Full screen\r\n            fullscreen:false,\r\n            // Lazy loading\r\n            lazyLoading:false,\r\n            loadingSpin:false,\r\n            // Table overflow\r\n            tableOverflow:false,\r\n            tableHeight:'300px',\r\n            tableWidth:null,\r\n            textOverflow:false,\r\n            // Meta\r\n            meta: null,\r\n            // Style\r\n            style:null,\r\n            classes:null,\r\n            // Execute formulas\r\n            parseFormulas:true,\r\n            autoIncrement:true,\r\n            autoCasting:true,\r\n            // Security\r\n            secureFormulas:true,\r\n            stripHTML:true,\r\n            stripHTMLOnCopy:false,\r\n            // Filters\r\n            filters:false,\r\n            footers:null,\r\n            // Event handles\r\n            onundo:null,\r\n            onredo:null,\r\n            onload:null,\r\n            onchange:null,\r\n            oncomments:null,\r\n            onbeforechange:null,\r\n            onafterchanges:null,\r\n            onbeforeinsertrow: null,\r\n            oninsertrow:null,\r\n            onbeforeinsertcolumn: null,\r\n            oninsertcolumn:null,\r\n            onbeforedeleterow:null,\r\n            ondeleterow:null,\r\n            onbeforedeletecolumn:null,\r\n            ondeletecolumn:null,\r\n            onmoverow:null,\r\n            onmovecolumn:null,\r\n            onresizerow:null,\r\n            onresizecolumn:null,\r\n            onsort:null,\r\n            onselection:null,\r\n            oncopy:null,\r\n            onpaste:null,\r\n            onbeforepaste:null,\r\n            onmerge:null,\r\n            onfocus:null,\r\n            onblur:null,\r\n            onchangeheader:null,\r\n            oncreateeditor:null,\r\n            oneditionstart:null,\r\n            oneditionend:null,\r\n            onchangestyle:null,\r\n            onchangemeta:null,\r\n            onchangepage:null,\r\n            onbeforesave:null,\r\n            onsave:null,\r\n            // Global event dispatcher\r\n            onevent:null,\r\n            // Persistance\r\n            persistance:false,\r\n            // Customize any cell behavior\r\n            updateTable:null,\r\n            // Detach the HTML table when calling updateTable\r\n            detachForUpdates: false,\r\n            freezeColumns:null,\r\n            // Texts\r\n            text:{\r\n                noRecordsFound: 'No records found',\r\n                showingPage: 'Showing page {0} of {1} entries',\r\n                show: 'Show ',\r\n                search: 'Search',\r\n                entries: ' entries',\r\n                columnName: 'Column name',\r\n                insertANewColumnBefore: 'Insert a new column before',\r\n                insertANewColumnAfter: 'Insert a new column after',\r\n                deleteSelectedColumns: 'Delete selected columns',\r\n                renameThisColumn: 'Rename this column',\r\n                orderAscending: 'Order ascending',\r\n                orderDescending: 'Order descending',\r\n                insertANewRowBefore: 'Insert a new row before',\r\n                insertANewRowAfter: 'Insert a new row after',\r\n                deleteSelectedRows: 'Delete selected rows',\r\n                editComments: 'Edit comments',\r\n                addComments: 'Add comments',\r\n                comments: 'Comments',\r\n                clearComments: 'Clear comments',\r\n                copy: 'Copy...',\r\n                paste: 'Paste...',\r\n                saveAs: 'Save as...',\r\n                about: 'About',\r\n                areYouSureToDeleteTheSelectedRows: 'Are you sure to delete the selected rows?',\r\n                areYouSureToDeleteTheSelectedColumns: 'Are you sure to delete the selected columns?',\r\n                thisActionWillDestroyAnyExistingMergedCellsAreYouSure: 'This action will destroy any existing merged cells. Are you sure?',\r\n                thisActionWillClearYourSearchResultsAreYouSure: 'This action will clear your search results. Are you sure?',\r\n                thereIsAConflictWithAnotherMergedCell: 'There is a conflict with another merged cell',\r\n                invalidMergeProperties: 'Invalid merged properties',\r\n                cellAlreadyMerged: 'Cell already merged',\r\n                noCellsSelected: 'No cells selected',\r\n            },\r\n            // About message\r\n            about:\"jExcel CE Spreadsheet\\nVersion 4.5.0\\nWebsite: https://bossanova.uk/jexcel/v3\",\r\n        };\r\n    \r\n        // Loading initial configuration from user\r\n        for (var property in defaults) {\r\n            if (options && options.hasOwnProperty(property)) {\r\n                if (property === 'text') {\r\n                    obj.options[property] = defaults[property];\r\n                    for (var textKey in options[property]) {\r\n                        if (options[property].hasOwnProperty(textKey)){\r\n                            obj.options[property][textKey] = options[property][textKey];\r\n                        }\r\n                    }\r\n                } else {\r\n                    obj.options[property] = options[property];\r\n                }\r\n            } else {\r\n                obj.options[property] = defaults[property];\r\n            }\r\n        }\r\n\r\n        // Global elements\r\n        obj.el = el;\r\n        obj.corner = null;\r\n        obj.contextMenu = null;\r\n        obj.textarea = null;\r\n        obj.ads = null;\r\n        obj.content = null;\r\n        obj.table = null;\r\n        obj.thead = null;\r\n        obj.tbody = null;\r\n        obj.rows = [];\r\n        obj.results = null;\r\n        obj.searchInput = null;\r\n        obj.toolbar = null;\r\n        obj.pagination = null;\r\n        obj.pageNumber = null;\r\n        obj.headerContainer = null;\r\n        obj.colgroupContainer = null;\r\n    \r\n        // Containers\r\n        obj.headers = [];\r\n        obj.records = [];\r\n        obj.history = [];\r\n        obj.formula = [];\r\n        obj.colgroup = [];\r\n        obj.selection = [];\r\n        obj.highlighted  = [];\r\n        obj.selectedCell = null;\r\n        obj.selectedContainer = null;\r\n        obj.style = [];\r\n        obj.data = null;\r\n        obj.filter = null;\r\n        obj.filters = [];\r\n\r\n        // Internal controllers\r\n        obj.cursor = null;\r\n        obj.historyIndex = -1;\r\n        obj.ignoreEvents = false;\r\n        obj.ignoreHistory = false;\r\n        obj.edition = null;\r\n        obj.hashString = null;\r\n        obj.resizing = null;\r\n        obj.dragging = null;\r\n    \r\n        // Lazy loading\r\n        if (obj.options.lazyLoading == true && (obj.options.tableOverflow == false && obj.options.fullscreen == false)) {\r\n            console.error('Jspreadsheet: The lazyloading only works when tableOverflow = yes or fullscreen = yes');\r\n            obj.options.lazyLoading = false;\r\n        }\r\n        \r\n        /**\r\n         * Activate/Disable fullscreen \r\n         * use programmatically : table.fullscreen(); or table.fullscreen(true); or table.fullscreen(false);\r\n         * @Param {boolean} activate\r\n         */\r\n        obj.fullscreen = function(activate) {\r\n            // If activate not defined, get reverse options.fullscreen\r\n            if (activate == null) {\r\n                activate = ! obj.options.fullscreen;\r\n            }\r\n    \r\n            // If change\r\n            if (obj.options.fullscreen != activate) {\r\n                obj.options.fullscreen = activate;\r\n    \r\n                // Test LazyLoading conflict\r\n                if (activate == true) {\r\n                    el.classList.add('fullscreen');\r\n                } else {\r\n                    el.classList.remove('fullscreen');\r\n                }\r\n            } \r\n        }\r\n\r\n        /**\r\n         * Trigger events\r\n         */\r\n        obj.dispatch = function(event) {\r\n            // Dispatch events\r\n            if (! obj.ignoreEvents) {\r\n                // Call global event\r\n                if (typeof(obj.options.onevent) == 'function') {\r\n                    var ret = obj.options.onevent.apply(this, arguments);\r\n                }\r\n                // Call specific events\r\n                if (typeof(obj.options[event]) == 'function') {\r\n                    var ret = obj.options[event].apply(this, Array.prototype.slice.call(arguments, 1));\r\n                }\r\n            }\r\n\r\n            // Persistance\r\n            if (event == 'onafterchanges' && obj.options.persistance) {\r\n                var url = obj.options.persistance == true ? obj.options.url : obj.options.persistance;\r\n                var data = obj.prepareJson(arguments[2]);\r\n                obj.save(url, data);\r\n            }\r\n\r\n            return ret;\r\n        }\r\n\r\n        /**\r\n         * Prepare the jexcel table\r\n         * \r\n         * @Param config\r\n         */\r\n        obj.prepareTable = function() {\r\n            // Loading initial data from remote sources\r\n            var results = [];\r\n    \r\n            // Number of columns\r\n            var size = obj.options.columns.length;\r\n    \r\n            if (obj.options.data && typeof(obj.options.data[0]) !== 'undefined') {\r\n                // Data keys\r\n                var keys = Object.keys(obj.options.data[0]);\r\n    \r\n                if (keys.length > size) {\r\n                    size = keys.length;\r\n                }\r\n            }\r\n    \r\n            // Minimal dimensions\r\n            if (obj.options.minDimensions[0] > size) {\r\n                size = obj.options.minDimensions[0];\r\n            }\r\n    \r\n            // Requests\r\n            var multiple = [];\r\n    \r\n            // Preparations\r\n            for (var i = 0; i < size; i++) {\r\n                // Deprected options. You should use only columns\r\n                if (! obj.options.colHeaders[i]) {\r\n                    obj.options.colHeaders[i] = '';\r\n                }\r\n                if (! obj.options.colWidths[i]) {\r\n                    obj.options.colWidths[i] = obj.options.defaultColWidth;\r\n                }\r\n                if (! obj.options.colAlignments[i]) {\r\n                    obj.options.colAlignments[i] = obj.options.defaultColAlign;\r\n                }\r\n    \r\n                // Default column description\r\n                if (! obj.options.columns[i]) {\r\n                    obj.options.columns[i] = { type:'text' };\r\n                } else if (! obj.options.columns[i].type) {\r\n                    obj.options.columns[i].type = 'text';\r\n                }\r\n                if (! obj.options.columns[i].name) {\r\n                    obj.options.columns[i].name = keys && keys[i] ? keys[i] : i;\r\n                }\r\n                if (! obj.options.columns[i].source) {\r\n                    obj.options.columns[i].source = [];\r\n                }\r\n                if (! obj.options.columns[i].options) {\r\n                    obj.options.columns[i].options = [];\r\n                }\r\n                if (! obj.options.columns[i].editor) {\r\n                    obj.options.columns[i].editor = null;\r\n                }\r\n                if (! obj.options.columns[i].allowEmpty) {\r\n                    obj.options.columns[i].allowEmpty = false;\r\n                }\r\n                if (! obj.options.columns[i].title) {\r\n                    obj.options.columns[i].title = obj.options.colHeaders[i] ? obj.options.colHeaders[i] : '';\r\n                }\r\n                if (! obj.options.columns[i].width) {\r\n                    obj.options.columns[i].width = obj.options.colWidths[i] ? obj.options.colWidths[i] : obj.options.defaultColWidth;\r\n                }\r\n                if (! obj.options.columns[i].align) {\r\n                    obj.options.columns[i].align = obj.options.colAlignments[i] ? obj.options.colAlignments[i] : 'center';\r\n                }\r\n    \r\n                // Pre-load initial source for json autocomplete\r\n                if (obj.options.columns[i].type == 'autocomplete' || obj.options.columns[i].type == 'dropdown') {\r\n                    // if remote content\r\n                    if (obj.options.columns[i].url) {\r\n                        multiple.push({\r\n                            url: obj.options.columns[i].url,\r\n                            index: i,\r\n                            method: 'GET',\r\n                            dataType: 'json',\r\n                            success: function(data) {\r\n                                var source = [];\r\n                                for (var i = 0; i < data.length; i++) {\r\n                                    obj.options.columns[this.index].source.push(data[i]);\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                } else if (obj.options.columns[i].type == 'calendar') {\r\n                    // Default format for date columns\r\n                    if (! obj.options.columns[i].options.format) {\r\n                        obj.options.columns[i].options.format = 'DD/MM/YYYY';\r\n                    }\r\n                }\r\n            }\r\n            // Create the table when is ready\r\n            if (! multiple.length) {\r\n                obj.createTable();\r\n            } else {\r\n                jSuites.ajax(multiple, function() {\r\n                    obj.createTable();\r\n                });\r\n            }\r\n        }\r\n    \r\n        obj.createTable = function() {\r\n            // Elements\r\n            obj.table = document.createElement('table');\r\n            obj.thead = document.createElement('thead');\r\n            obj.tbody = document.createElement('tbody');\r\n\r\n            // Create headers controllers\r\n            obj.headers = [];\r\n            obj.colgroup = [];\r\n    \r\n            // Create table container\r\n            obj.content = document.createElement('div');\r\n            obj.content.classList.add('jexcel_content');\r\n            obj.content.onscroll = function(e) {\r\n                obj.scrollControls(e);\r\n            }\r\n            obj.content.onwheel = function(e) {\r\n                obj.wheelControls(e);\r\n            }\r\n\r\n            // Create toolbar object\r\n            obj.toolbar = document.createElement('div');\r\n            obj.toolbar.classList.add('jexcel_toolbar');\r\n    \r\n            // Search\r\n            var searchContainer = document.createElement('div');\r\n            var searchText = document.createTextNode((obj.options.text.search) + ': ');\r\n            obj.searchInput = document.createElement('input');\r\n            obj.searchInput.classList.add('jexcel_search');\r\n            searchContainer.appendChild(searchText);\r\n            searchContainer.appendChild(obj.searchInput);\r\n            obj.searchInput.onfocus = function() {\r\n                obj.resetSelection();\r\n            }\r\n    \r\n            // Pagination select option\r\n            var paginationUpdateContainer = document.createElement('div');\r\n    \r\n            if (obj.options.pagination > 0 && obj.options.paginationOptions && obj.options.paginationOptions.length > 0) {\r\n                obj.paginationDropdown = document.createElement('select');\r\n                obj.paginationDropdown.classList.add('jexcel_pagination_dropdown');\r\n                obj.paginationDropdown.onchange = function() {\r\n                    obj.options.pagination = parseInt(this.value);\r\n                    obj.page(0);\r\n                }\r\n    \r\n                for (var i = 0; i < obj.options.paginationOptions.length; i++) {\r\n                    var temp = document.createElement('option');\r\n                    temp.value = obj.options.paginationOptions[i];\r\n                    temp.innerHTML = obj.options.paginationOptions[i];\r\n                    obj.paginationDropdown.appendChild(temp);\r\n                }\r\n    \r\n                // Set initial pagination value\r\n                obj.paginationDropdown.value = obj.options.pagination;\r\n\r\n                paginationUpdateContainer.appendChild(document.createTextNode(obj.options.text.show));\r\n                paginationUpdateContainer.appendChild(obj.paginationDropdown);\r\n                paginationUpdateContainer.appendChild(document.createTextNode(obj.options.text.entries));\r\n            }\r\n    \r\n            // Filter and pagination container\r\n            var filter = document.createElement('div');\r\n            filter.classList.add('jexcel_filter');\r\n            filter.appendChild(paginationUpdateContainer);\r\n            filter.appendChild(searchContainer);\r\n    \r\n            // Colsgroup\r\n            obj.colgroupContainer = document.createElement('colgroup');\r\n            var tempCol = document.createElement('col');\r\n            tempCol.setAttribute('width', '50');\r\n            obj.colgroupContainer.appendChild(tempCol);\r\n    \r\n            // Nested\r\n            if (obj.options.nestedHeaders && obj.options.nestedHeaders.length > 0) {\r\n                // Flexible way to handle nestedheaders\r\n                if (obj.options.nestedHeaders[0] && obj.options.nestedHeaders[0][0]) {\r\n                    for (var j = 0; j < obj.options.nestedHeaders.length; j++) {\r\n                        obj.thead.appendChild(obj.createNestedHeader(obj.options.nestedHeaders[j]));\r\n                    }\r\n                } else {\r\n                    obj.thead.appendChild(obj.createNestedHeader(obj.options.nestedHeaders));\r\n                }\r\n            }\r\n    \r\n            // Row\r\n            obj.headerContainer = document.createElement('tr');\r\n            var tempCol = document.createElement('td');\r\n            tempCol.classList.add('jexcel_selectall');\r\n            obj.headerContainer.appendChild(tempCol);\r\n    \r\n            for (var i = 0; i < obj.options.columns.length; i++) {\r\n                // Create header\r\n                obj.createCellHeader(i);\r\n                // Append cell to the container\r\n                obj.headerContainer.appendChild(obj.headers[i]);\r\n                obj.colgroupContainer.appendChild(obj.colgroup[i]);\r\n            }\r\n\r\n            obj.thead.appendChild(obj.headerContainer);\r\n\r\n            // Filters\r\n            if (obj.options.filters == true) {\r\n                obj.filter = document.createElement('tr');\r\n                var td = document.createElement('td');\r\n                obj.filter.appendChild(td);\r\n\r\n                for (var i = 0; i < obj.options.columns.length; i++) {\r\n                    var td = document.createElement('td');\r\n                    td.innerHTML = '&nbsp;';\r\n                    td.setAttribute('data-x', i);\r\n                    td.className = 'jexcel_column_filter';\r\n                    if (obj.options.columns[i].type == 'hidden') {\r\n                        td.style.display = 'none';\r\n                    }\r\n                    obj.filter.appendChild(td);\r\n                }\r\n\r\n                obj.thead.appendChild(obj.filter);\r\n            }\r\n\r\n            // Content table\r\n            obj.table = document.createElement('table');\r\n            obj.table.classList.add('jexcel');\r\n            obj.table.setAttribute('cellpadding', '0');\r\n            obj.table.setAttribute('cellspacing', '0');\r\n            obj.table.setAttribute('unselectable', 'yes');\r\n            //obj.table.setAttribute('onselectstart', 'return false');\r\n            obj.table.appendChild(obj.colgroupContainer);\r\n            obj.table.appendChild(obj.thead);\r\n            obj.table.appendChild(obj.tbody);\r\n\r\n            if (! obj.options.textOverflow) {\r\n                obj.table.classList.add('jexcel_overflow');\r\n            }\r\n\r\n            // Spreadsheet corner\r\n            obj.corner = document.createElement('div');\r\n            obj.corner.className = 'jexcel_corner';\r\n            obj.corner.setAttribute('unselectable', 'on');\r\n            obj.corner.setAttribute('onselectstart', 'return false');\r\n    \r\n            if (obj.options.selectionCopy == false) {\r\n                obj.corner.style.display = 'none';\r\n            }\r\n    \r\n            // Textarea helper\r\n            obj.textarea = document.createElement('textarea');\r\n            obj.textarea.className = 'jexcel_textarea';\r\n            obj.textarea.id = 'jexcel_textarea';\r\n            obj.textarea.tabIndex = '-1';\r\n\r\n            // Contextmenu container\r\n            obj.contextMenu = document.createElement('div');\r\n            obj.contextMenu.className = 'jexcel_contextmenu';\r\n    \r\n            // Create element\r\n            jSuites.contextmenu(obj.contextMenu, {\r\n                onclick:function() {\r\n                    obj.contextMenu.contextmenu.close(false);\r\n                }\r\n            });\r\n    \r\n            // Powered by jExcel\r\n            var ads = document.createElement('a');\r\n            ads.setAttribute('href', 'https://bossanova.uk/jexcel/');\r\n            obj.ads = document.createElement('div');\r\n            obj.ads.className = 'jexcel_about';\r\n            try {\r\n                if (typeof(sessionStorage) !== \"undefined\" && ! sessionStorage.getItem('jexcel')) {\r\n                    sessionStorage.setItem('jexcel', true);\r\n                    var img = document.createElement('img');\r\n                    img.src = '//bossanova.uk/jexcel/logo.png';\r\n                    ads.appendChild(img);\r\n                }\r\n            } catch (exception) {\r\n            }\r\n            var span = document.createElement('span');\r\n            span.innerHTML = 'Jexcel spreadsheet';\r\n            ads.appendChild(span);\r\n            obj.ads.appendChild(ads);\r\n\r\n            // Create table container TODO: frozen columns\r\n            var container = document.createElement('div');\r\n            container.classList.add('jexcel_table');\r\n    \r\n            // Pagination\r\n            obj.pagination = document.createElement('div');\r\n            obj.pagination.classList.add('jexcel_pagination');\r\n            var paginationInfo = document.createElement('div');\r\n            var paginationPages = document.createElement('div');\r\n            obj.pagination.appendChild(paginationInfo);\r\n            obj.pagination.appendChild(paginationPages);\r\n\r\n            // Hide pagination if not in use\r\n            if (! obj.options.pagination) {\r\n                obj.pagination.style.display = 'none';\r\n            }\r\n\r\n            // Append containers to the table\r\n            if (obj.options.search == true) {\r\n                el.appendChild(filter);\r\n            }\r\n    \r\n            // Elements\r\n            obj.content.appendChild(obj.table);\r\n            obj.content.appendChild(obj.corner);\r\n            obj.content.appendChild(obj.textarea);\r\n    \r\n            el.appendChild(obj.toolbar);\r\n            el.appendChild(obj.content);\r\n            el.appendChild(obj.pagination);\r\n            el.appendChild(obj.contextMenu);\r\n            el.appendChild(obj.ads);\r\n            el.classList.add('jexcel_container');\r\n    \r\n            // Create toolbar\r\n            if (obj.options.toolbar && obj.options.toolbar.length) {\r\n                obj.createToolbar();\r\n            }\r\n    \r\n            // Fullscreen\r\n            if (obj.options.fullscreen == true) {\r\n                el.classList.add('fullscreen');\r\n            } else {\r\n                // Overflow\r\n                if (obj.options.tableOverflow == true) {\r\n                    if (obj.options.tableHeight) {\r\n                        obj.content.style['overflow-y'] = 'auto';\r\n                        obj.content.style['box-shadow'] = 'rgb(221 221 221) 2px 2px 5px 0.1px';\r\n                        obj.content.style.maxHeight = obj.options.tableHeight;\r\n                    }\r\n                    if (obj.options.tableWidth) {\r\n                        obj.content.style['overflow-x'] = 'auto';\r\n                        obj.content.style.width = obj.options.tableWidth;\r\n                    }\r\n                }\r\n            }\r\n    \r\n            // With toolbars\r\n            if (obj.options.tableOverflow != true && obj.options.toolbar) {\r\n                el.classList.add('with-toolbar');\r\n            }\r\n    \r\n            // Actions\r\n            if (obj.options.columnDrag == true) {\r\n                obj.thead.classList.add('draggable');\r\n            }\r\n            if (obj.options.columnResize == true) {\r\n                obj.thead.classList.add('resizable');\r\n            }\r\n            if (obj.options.rowDrag == true) {\r\n                obj.tbody.classList.add('draggable');\r\n            }\r\n            if (obj.options.rowResize == true) {\r\n                obj.tbody.classList.add('resizable');\r\n            }\r\n    \r\n            // Load data\r\n            obj.setData();\r\n    \r\n            // Style\r\n            if (obj.options.style) {\r\n                obj.setStyle(obj.options.style, null, null, 1, 1);\r\n            }\r\n\r\n            // Classes\r\n            if (obj.options.classes) {\r\n                var k = Object.keys(obj.options.classes);\r\n                for (var i = 0; i < k.length; i++) {\r\n                    var cell = jexcel.getIdFromColumnName(k[i], true);\r\n                    obj.records[cell[1]][cell[0]].classList.add(obj.options.classes[k[i]]);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Refresh the data\r\n         * \r\n         * @return void\r\n         */\r\n        obj.refresh = function() {\r\n            if (obj.options.url) {\r\n                // Loading\r\n                if (obj.options.loadingSpin == true) {\r\n                    jSuites.loading.show();\r\n                }\r\n    \r\n                jSuites.ajax({\r\n                    url: obj.options.url,\r\n                    method: obj.options.method,\r\n                    data: obj.options.requestVariables,\r\n                    dataType: 'json',\r\n                    success: function(result) {\r\n                        // Data\r\n                        obj.options.data = (result.data) ? result.data : result;\r\n                        // Prepare table\r\n                        obj.setData();\r\n                        // Hide spin\r\n                        if (obj.options.loadingSpin == true) {\r\n                            jSuites.loading.hide();\r\n                        }\r\n                    }\r\n                });\r\n            } else {\r\n                obj.setData();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Set data\r\n         * \r\n         * @param array data In case no data is sent, default is reloaded\r\n         * @return void\r\n         */\r\n        obj.setData = function(data) {\r\n            // Update data\r\n            if (data) {\r\n                if (typeof(data) == 'string') {\r\n                    data = JSON.parse(data);\r\n                }\r\n    \r\n                obj.options.data = data;\r\n            }\r\n    \r\n            // Data\r\n            if (! obj.options.data) {\r\n                obj.options.data = [];\r\n            }\r\n    \r\n            // Prepare data\r\n            if (obj.options.data && obj.options.data[0]) {\r\n                if (! Array.isArray(obj.options.data[0])) {\r\n                    var data = [];\r\n                    for (var j = 0; j < obj.options.data.length; j++) {\r\n                        var row = [];\r\n                        for (var i = 0; i < obj.options.columns.length; i++) {\r\n                            row[i] = obj.options.data[j][obj.options.columns[i].name];\r\n                        }\r\n                        data.push(row);\r\n                    }\r\n\r\n                    obj.options.data = data;\r\n                }\r\n            }\r\n\r\n            // Adjust minimal dimensions\r\n            var j = 0;\r\n            var i = 0;\r\n            var size_i = obj.options.columns.length;\r\n            var size_j = obj.options.data.length;\r\n            var min_i = obj.options.minDimensions[0];\r\n            var min_j = obj.options.minDimensions[1];\r\n            var max_i = min_i > size_i ? min_i : size_i;\r\n            var max_j = min_j > size_j ? min_j : size_j;\r\n    \r\n            for (j = 0; j < max_j; j++) {\r\n                for (i = 0; i < max_i; i++) {\r\n                    if (obj.options.data[j] == undefined) {\r\n                        obj.options.data[j] = [];\r\n                    }\r\n    \r\n                    if (obj.options.data[j][i] == undefined) {\r\n                        obj.options.data[j][i] = '';\r\n                    }\r\n                }\r\n            }\r\n    \r\n            // Reset containers\r\n            obj.rows = [];\r\n            obj.results = null;\r\n            obj.records = [];\r\n            obj.history = [];\r\n    \r\n            // Reset internal controllers\r\n            obj.historyIndex = -1;\r\n    \r\n            // Reset data\r\n            obj.tbody.innerHTML = '';\r\n    \r\n            // Lazy loading\r\n            if (obj.options.lazyLoading == true) {\r\n                // Load only 100 records\r\n                var startNumber = 0\r\n                var finalNumber = obj.options.data.length < 100 ? obj.options.data.length : 100;\r\n    \r\n                if (obj.options.pagination) {\r\n                    obj.options.pagination = false;\r\n                    console.error('Jspreadsheet: Pagination will be disable due the lazyLoading');\r\n                }\r\n            } else if (obj.options.pagination) {\r\n                // Pagination\r\n                if (! obj.pageNumber) {\r\n                    obj.pageNumber = 0;\r\n                }\r\n                var quantityPerPage = obj.options.pagination;\r\n                startNumber = (obj.options.pagination * obj.pageNumber);\r\n                finalNumber = (obj.options.pagination * obj.pageNumber) + obj.options.pagination;\r\n    \r\n                if (obj.options.data.length < finalNumber) {\r\n                    finalNumber = obj.options.data.length;\r\n                }\r\n            } else {\r\n                var startNumber = 0;\r\n                var finalNumber = obj.options.data.length;\r\n            }\r\n    \r\n            // Append nodes to the HTML\r\n            for (j = 0; j < obj.options.data.length; j++) {\r\n                // Create row\r\n                var tr = obj.createRow(j, obj.options.data[j]);\r\n                // Append line to the table\r\n                if (j >= startNumber && j < finalNumber) {\r\n                    obj.tbody.appendChild(tr);\r\n                }\r\n            }\r\n    \r\n            if (obj.options.lazyLoading == true) {\r\n                // Do not create pagination with lazyloading activated\r\n            } else if (obj.options.pagination) {\r\n                obj.updatePagination();\r\n            }\r\n    \r\n            // Merge cells\r\n            if (obj.options.mergeCells) {\r\n                var keys = Object.keys(obj.options.mergeCells);\r\n                for (var i = 0; i < keys.length; i++) {\r\n                    var num = obj.options.mergeCells[keys[i]];\r\n                    obj.setMerge(keys[i], num[0], num[1], 1);\r\n                }\r\n            }\r\n\r\n            // Updata table with custom configurations if applicable\r\n            obj.updateTable();\r\n\r\n            // Onload\r\n            obj.dispatch('onload', el, obj);\r\n        }\r\n\r\n        /**\r\n         * Get the whole table data\r\n         * \r\n         * @param bool get highlighted cells only\r\n         * @return array data\r\n         */\r\n        obj.getData = function(highlighted, dataOnly) {\r\n            // Control vars\r\n            var dataset = [];\r\n            var px = 0;\r\n            var py = 0;\r\n\r\n            // Data type\r\n            var dataType = dataOnly == true || obj.options.copyCompatibility == false ? true : false;\r\n\r\n            // Column and row length\r\n            var x = obj.options.columns.length\r\n            var y = obj.options.data.length\r\n    \r\n            // Go through the columns to get the data\r\n            for (var j = 0; j < y; j++) {\r\n                px = 0;\r\n                for (var i = 0; i < x; i++) {\r\n                    // Cell selected or fullset\r\n                    if (! highlighted || obj.records[j][i].classList.contains('highlight')) {\r\n                        // Get value\r\n                        if (! dataset[py]) {\r\n                            dataset[py] = [];\r\n                        }\r\n                        if (! dataType) {\r\n                            dataset[py][px] = obj.records[j][i].innerHTML;\r\n                        } else {\r\n                            dataset[py][px] = obj.options.data[j][i];\r\n                        }\r\n                        px++;\r\n                    }\r\n                }\r\n                if (px > 0) {\r\n                    py++;\r\n                }\r\n           }\r\n    \r\n           return dataset;\r\n        }\r\n\r\n        /**\r\n        * Get json data by row number\r\n        *\r\n        * @param integer row number\r\n        * @return object\r\n        */\r\n        obj.getJsonRow = function(rowNumber) {\r\n            var rowData = obj.options.data[rowNumber];\r\n            var x = obj.options.columns.length\r\n\r\n            var row = {};\r\n            for (var i = 0; i < x; i++) {\r\n                if (! obj.options.columns[i].name) {\r\n                    obj.options.columns[i].name = i;\r\n                }\r\n                row[obj.options.columns[i].name] = rowData[i];\r\n            }\r\n\r\n            return row;\r\n        }\r\n\r\n        /**\r\n         * Get the whole table data\r\n         * \r\n         * @param bool highlighted cells only\r\n         * @return string value\r\n         */\r\n        obj.getJson = function(highlighted) {\r\n            // Control vars\r\n            var data = [];\r\n    \r\n            // Column and row length\r\n            var x = obj.options.columns.length\r\n            var y = obj.options.data.length\r\n    \r\n            // Go through the columns to get the data\r\n            for (var j = 0; j < y; j++) {\r\n                var row = null;\r\n                for (var i = 0; i < x; i++) {\r\n                    if (! highlighted || obj.records[j][i].classList.contains('highlight')) {\r\n                        if (row == null) {\r\n                            row = {};\r\n                        }\r\n                        if (! obj.options.columns[i].name) {\r\n                            obj.options.columns[i].name = i;\r\n                        }\r\n                        row[obj.options.columns[i].name] = obj.options.data[j][i];\r\n                    }\r\n                }\r\n    \r\n                if (row != null) {\r\n                    data.push(row);\r\n                }\r\n           }\r\n    \r\n           return data;\r\n        }\r\n\r\n        /**\r\n         * Prepare JSON in the correct format\r\n         */\r\n        obj.prepareJson = function(data) {\r\n            var rows = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var x = data[i].x;\r\n                var y = data[i].y;\r\n                var k = obj.options.columns[x].name ? obj.options.columns[x].name : x;\r\n\r\n                // Create row\r\n                if (! rows[y]) {\r\n                    rows[y] = {\r\n                        row: y,\r\n                        data: {},\r\n                    };\r\n                }\r\n                rows[y].data[k] = data[i].newValue;\r\n            }\r\n\r\n            // Filter rows\r\n            return rows.filter(function (el) {\r\n                return el != null;\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Post json to a remote server\r\n         */\r\n        obj.save = function(url, data) {\r\n            // Parse anything in the data before sending to the server\r\n            var ret = obj.dispatch('onbeforesave', el, obj, data);\r\n            if (ret) {\r\n                var data = ret;\r\n            } else {\r\n                if (ret === false) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            // Remove update\r\n            jSuites.ajax({\r\n                url: url,\r\n                method: 'POST',\r\n                dataType: 'json',\r\n                data: { data: JSON.stringify(data) },\r\n                success: function(result) {\r\n                    // Event\r\n                    obj.dispatch('onsave', el, obj, data);\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Get a row data by rowNumber\r\n         */\r\n        obj.getRowData = function(rowNumber) {\r\n            return obj.options.data[rowNumber];\r\n        }\r\n    \r\n        /**\r\n         * Set a row data by rowNumber\r\n         */\r\n        obj.setRowData = function(rowNumber, data) {\r\n            for (var i = 0; i < obj.headers.length; i++) {\r\n                // Update cell\r\n                var columnName = jexcel.getColumnNameFromId([ i, rowNumber ]);\r\n                // Set value\r\n                if (data[i] != null) {\r\n                    obj.setValue(columnName, data[i]);\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Get a column data by columnNumber\r\n         */\r\n        obj.getColumnData = function(columnNumber) {\r\n            var dataset = [];\r\n            // Go through the rows to get the data\r\n            for (var j = 0; j < obj.options.data.length; j++) {\r\n                dataset.push(obj.options.data[j][columnNumber]);\r\n            }\r\n            return dataset;\r\n        }\r\n    \r\n        /**\r\n         * Set a column data by colNumber\r\n         */\r\n        obj.setColumnData = function(colNumber, data) {\r\n            for (var j = 0; j < obj.rows.length; j++) {\r\n                // Update cell\r\n                var columnName = jexcel.getColumnNameFromId([ colNumber, j ]);\r\n                // Set value\r\n                if (data[j] != null) {\r\n                    obj.setValue(columnName, data[j]);\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Create row\r\n         */\r\n        obj.createRow = function(j, data) {\r\n            // Create container\r\n            if (! obj.records[j]) {\r\n                obj.records[j] = [];\r\n            }\r\n            // Default data\r\n            if (! data) {\r\n                var data = obj.options.data[j];\r\n            }\r\n            // New line of data to be append in the table\r\n            obj.rows[j] = document.createElement('tr');\r\n            obj.rows[j].setAttribute('data-y', j);\r\n            // Index\r\n            var index = null;\r\n            // Definitions\r\n            if (obj.options.rows[j]) {\r\n                if (obj.options.rows[j].height) {\r\n                    obj.rows[j].style.height = obj.options.rows[j].height;\r\n                }\r\n                if (obj.options.rows[j].title) {\r\n                    index = obj.options.rows[j].title;\r\n                }\r\n            }\r\n            if (! index) {\r\n                index = parseInt(j + 1);\r\n            }\r\n            // Row number label\r\n            var td = document.createElement('td');\r\n            td.innerHTML = index;\r\n            td.setAttribute('data-y', j);\r\n            td.className = 'jexcel_row';\r\n            obj.rows[j].appendChild(td);\r\n    \r\n            // Data columns\r\n            for (var i = 0; i < obj.options.columns.length; i++) {\r\n                // New column of data to be append in the line\r\n                obj.records[j][i] = obj.createCell(i, j, data[i]);\r\n                // Add column to the row\r\n                obj.rows[j].appendChild(obj.records[j][i]);\r\n            }\r\n    \r\n            // Add row to the table body\r\n            return obj.rows[j];\r\n        }\r\n    \r\n        obj.parseValue = function(i, j, value) {\r\n            if ((''+value).substr(0,1) == '=' && obj.options.parseFormulas == true) {\r\n                value = obj.executeFormula(value, i, j)\r\n            }\r\n            if (obj.options.columns[i].mask) {\r\n                var decimal = obj.options.columns[i].decimal || '.';\r\n                value = '' + jSuites.mask.run(value, obj.options.columns[i].mask, decimal);\r\n            }\r\n\r\n            return value;\r\n        }\r\n\r\n        /**\r\n         * Create cell\r\n         */\r\n        obj.createCell = function(i, j, value) {\r\n            // Create cell and properties\r\n            var td = document.createElement('td');\r\n            td.setAttribute('data-x', i);\r\n            td.setAttribute('data-y', j);\r\n\r\n            // Security\r\n            if ((''+value).substr(0,1) == '=' && obj.options.secureFormulas == true) {\r\n                var val = secureFormula(value);\r\n                if (val != value) {\r\n                    // Update the data container\r\n                    value = val;\r\n                }\r\n            }\r\n\r\n            // Custom column\r\n            if (obj.options.columns[i].editor) {\r\n                if (obj.options.stripHTML === false || obj.options.columns[i].stripHTML === false) {\r\n                    td.innerHTML = value;\r\n                } else {\r\n                    td.innerText = value;\r\n                }\r\n                if (typeof(obj.options.columns[i].editor.createCell) == 'function') {\r\n                    td = obj.options.columns[i].editor.createCell(td);\r\n                }\r\n            } else {\r\n                // Hidden column\r\n                if (obj.options.columns[i].type == 'hidden') {\r\n                    td.style.display = 'none';\r\n                    td.innerText = value;\r\n                } else if (obj.options.columns[i].type == 'checkbox' || obj.options.columns[i].type == 'radio') {\r\n                    // Create input\r\n                    var element = document.createElement('input');\r\n                    element.type = obj.options.columns[i].type;\r\n                    element.name = 'c' + i;\r\n                    element.checked = (value == 1 || value == true || value == 'true') ? true : false;\r\n                    element.onclick = function() {\r\n                        obj.setValue(td, this.checked);\r\n                    }\r\n\r\n                    if (obj.options.columns[i].readOnly == true || obj.options.editable == false) {\r\n                        element.setAttribute('disabled', 'disabled');\r\n                    }\r\n\r\n                    // Append to the table\r\n                    td.appendChild(element);\r\n                    // Make sure the values are correct\r\n                    obj.options.data[j][i] = element.checked;\r\n                } else if (obj.options.columns[i].type == 'calendar') {\r\n                    // Try formatted date\r\n                    var formatted = jSuites.calendar.extractDateFromString(value, obj.options.columns[i].options.format);\r\n                    // Create calendar cell\r\n                    td.innerText = jSuites.calendar.getDateString(formatted ? formatted : value, obj.options.columns[i].options.format);\r\n                } else if (obj.options.columns[i].type == 'dropdown' || obj.options.columns[i].type == 'autocomplete') {\r\n                    // Create dropdown cell\r\n                    td.classList.add('jexcel_dropdown');\r\n                    td.innerText = obj.getDropDownValue(i, value);\r\n                } else if (obj.options.columns[i].type == 'color') {\r\n                    if (obj.options.columns[i].render == 'square') {\r\n                        var color = document.createElement('div');\r\n                        color.className = 'color';\r\n                        color.style.backgroundColor = value;\r\n                        td.appendChild(color);\r\n                    } else {\r\n                        td.style.color = value;\r\n                        td.innerText = value;\r\n                    }\r\n                } else if (obj.options.columns[i].type == 'image') {\r\n                    if (value && value.substr(0, 10) == 'data:image') {\r\n                        var img = document.createElement('img');\r\n                        img.src = value;\r\n                        td.appendChild(img);\r\n                    }\r\n                } else {\r\n                    if (obj.options.columns[i].type == 'html') {\r\n                        td.innerHTML = stripScript(obj.parseValue(i, j, value));\r\n                    } else {\r\n                        if (obj.options.stripHTML === false || obj.options.columns[i].stripHTML === false) {\r\n                            td.innerHTML = stripScript(obj.parseValue(i, j, value));\r\n                        } else {\r\n                            td.innerText = obj.parseValue(i, j, value);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            // Readonly\r\n            if (obj.options.columns[i].readOnly == true) {\r\n                td.className = 'readonly';\r\n            }\r\n    \r\n            // Text align\r\n            var colAlign = obj.options.columns[i].align ? obj.options.columns[i].align : 'center';\r\n            td.style.textAlign = colAlign;\r\n    \r\n            // Wrap option\r\n            if (obj.options.columns[i].wordWrap != false && (obj.options.wordWrap == true || obj.options.columns[i].wordWrap == true || td.innerHTML.length > 200)) {\r\n                td.style.whiteSpace = 'pre-wrap';\r\n            }\r\n    \r\n            // Overflow\r\n            if (i > 0) {\r\n                if (this.options.textOverflow == true) {\r\n                    if (value || td.innerHTML) {\r\n                        obj.records[j][i-1].style.overflow = 'hidden';\r\n                    } else {\r\n                        if (i == obj.options.columns.length - 1) {\r\n                            td.style.overflow = 'hidden';\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return td;\r\n        }\r\n    \r\n        obj.createCellHeader = function(colNumber) {\r\n            // Create col global control\r\n            var colWidth = obj.options.columns[colNumber].width ? obj.options.columns[colNumber].width : obj.options.defaultColWidth;\r\n            var colAlign = obj.options.columns[colNumber].align ? obj.options.columns[colNumber].align : obj.options.defaultColAlign;\r\n    \r\n            // Create header cell\r\n            obj.headers[colNumber] = document.createElement('td');\r\n            if (obj.options.stripHTML) {\r\n                obj.headers[colNumber].innerText = obj.options.columns[colNumber].title ? obj.options.columns[colNumber].title : jexcel.getColumnName(colNumber);\r\n            } else {\r\n                obj.headers[colNumber].innerHTML = obj.options.columns[colNumber].title ? obj.options.columns[colNumber].title : jexcel.getColumnName(colNumber);\r\n            }\r\n            obj.headers[colNumber].setAttribute('data-x', colNumber);\r\n            obj.headers[colNumber].style.textAlign = colAlign;\r\n            if (obj.options.columns[colNumber].title) {\r\n                obj.headers[colNumber].setAttribute('title', obj.options.columns[colNumber].textContent);\r\n            }\r\n    \r\n            // Width control\r\n            obj.colgroup[colNumber] = document.createElement('col');\r\n            obj.colgroup[colNumber].setAttribute('width', colWidth);\r\n    \r\n            // Hidden column\r\n            if (obj.options.columns[colNumber].type == 'hidden') {\r\n                obj.headers[colNumber].style.display = 'none';\r\n                obj.colgroup[colNumber].style.display = 'none';\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Update a nested header title\r\n         */\r\n        obj.updateNestedHeader = function(x, y, title) {\r\n            if (obj.options.nestedHeaders[y][x].title) {\r\n                obj.options.nestedHeaders[y][x].title = title;\r\n                obj.options.nestedHeaders[y].element.children[x+1].innerText = title;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Create a nested header object\r\n         */\r\n        obj.createNestedHeader = function(nestedInformation) {\r\n            var tr = document.createElement('tr');\r\n            tr.classList.add('jexcel_nested');\r\n            var td = document.createElement('td');\r\n            tr.appendChild(td);\r\n            // Element\r\n            nestedInformation.element = tr;\r\n    \r\n            var headerIndex = 0;\r\n            for (var i = 0; i < nestedInformation.length; i++) {\r\n                // Default values\r\n                if (! nestedInformation[i].colspan) {\r\n                    nestedInformation[i].colspan = 1;\r\n                }\r\n                if (! nestedInformation[i].align) {\r\n                    nestedInformation[i].align = 'center';\r\n                }\r\n                if (! nestedInformation[i].title) {\r\n                    nestedInformation[i].title = '';\r\n                }\r\n    \r\n                // Number of columns\r\n                var numberOfColumns = nestedInformation[i].colspan;\r\n    \r\n                // Classes container\r\n                var column = [];\r\n                // Header classes for this cell\r\n                for (var x = 0; x < numberOfColumns; x++) {\r\n                    if (obj.options.columns[headerIndex] && obj.options.columns[headerIndex].type == 'hidden') {\r\n                        numberOfColumns++;\r\n                    }\r\n                    column.push(headerIndex);\r\n                    headerIndex++;\r\n                }\r\n    \r\n                // Created the nested cell\r\n                var td = document.createElement('td');\r\n                td.setAttribute('data-column', column.join(','));\r\n                td.setAttribute('colspan', nestedInformation[i].colspan);\r\n                td.setAttribute('align', nestedInformation[i].align);\r\n                td.innerText = nestedInformation[i].title;\r\n                tr.appendChild(td);\r\n            }\r\n    \r\n            return tr;\r\n        }\r\n    \r\n        /**\r\n         * Create toolbar\r\n         */\r\n        obj.createToolbar = function(toolbar) {\r\n            if (toolbar) {\r\n                obj.options.toolbar = toolbar;\r\n            } else {\r\n                var toolbar = obj.options.toolbar;\r\n            }\r\n            for (var i = 0; i < toolbar.length; i++) {\r\n                if (toolbar[i].type == 'i') {\r\n                    var toolbarItem = document.createElement('i');\r\n                    toolbarItem.classList.add('jexcel_toolbar_item');\r\n                    toolbarItem.classList.add('material-icons');\r\n                    toolbarItem.setAttribute('data-k', toolbar[i].k);\r\n                    toolbarItem.setAttribute('data-v', toolbar[i].v);\r\n                    toolbarItem.setAttribute('id', toolbar[i].id);\r\n\r\n                    // Tooltip\r\n                    if (toolbar[i].tooltip) {\r\n                        toolbarItem.setAttribute('title', toolbar[i].tooltip);\r\n                    }\r\n                    // Handle click\r\n                    if (toolbar[i].onclick && typeof(toolbar[i].onclick)) {\r\n                        toolbarItem.onclick = (function (a) {\r\n                            var b = a;\r\n                            return function () {\r\n                                toolbar[b].onclick(el, obj, this);\r\n                            };\r\n                        })(i);\r\n                    } else {\r\n                        toolbarItem.onclick = function() {\r\n                            var k = this.getAttribute('data-k');\r\n                            var v = this.getAttribute('data-v');\r\n                            obj.setStyle(obj.highlighted, k, v);\r\n                        }\r\n                    }\r\n                    // Append element\r\n                    toolbarItem.innerText = toolbar[i].content;\r\n                    obj.toolbar.appendChild(toolbarItem);\r\n                } else if (toolbar[i].type == 'select') {\r\n                   var toolbarItem = document.createElement('select');\r\n                   toolbarItem.classList.add('jexcel_toolbar_item');\r\n                   toolbarItem.setAttribute('data-k', toolbar[i].k);\r\n                   // Tooltip\r\n                   if (toolbar[i].tooltip) {\r\n                       toolbarItem.setAttribute('title', toolbar[i].tooltip);\r\n                   }\r\n                   // Handle onchange\r\n                   if (toolbar[i].onchange && typeof(toolbar[i].onchange)) {\r\n                       toolbarItem.onchange = toolbar[i].onchange;\r\n                   } else {\r\n                       toolbarItem.onchange = function() {\r\n                           var k = this.getAttribute('data-k');\r\n                           obj.setStyle(obj.highlighted, k, this.value);\r\n                       }\r\n                   }\r\n                   // Add options to the dropdown\r\n                   for(var j = 0; j < toolbar[i].v.length; j++) {\r\n                        var toolbarDropdownOption = document.createElement('option');\r\n                        toolbarDropdownOption.value = toolbar[i].v[j];\r\n                        toolbarDropdownOption.innerText = toolbar[i].v[j];\r\n                        toolbarItem.appendChild(toolbarDropdownOption);\r\n                   }\r\n                   obj.toolbar.appendChild(toolbarItem);\r\n                } else if (toolbar[i].type == 'color') {\r\n                     var toolbarItem = document.createElement('i');\r\n                     toolbarItem.classList.add('jexcel_toolbar_item');\r\n                     toolbarItem.classList.add('material-icons');\r\n                     toolbarItem.setAttribute('data-k', toolbar[i].k);\r\n                     toolbarItem.setAttribute('data-v', '');\r\n                     // Tooltip\r\n                     if (toolbar[i].tooltip) {\r\n                         toolbarItem.setAttribute('title', toolbar[i].tooltip);\r\n                     }\r\n                     obj.toolbar.appendChild(toolbarItem);\r\n                     toolbarItem.innerText = toolbar[i].content;\r\n                     jSuites.color(toolbarItem, {\r\n                         onchange:function(o, v) {\r\n                             var k = o.getAttribute('data-k');\r\n                             obj.setStyle(obj.highlighted, k, v);\r\n                         }\r\n                     });\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Merge cells\r\n         * @param cellName\r\n         * @param colspan\r\n         * @param rowspan\r\n         * @param ignoreHistoryAndEvents\r\n         */\r\n        obj.setMerge = function(cellName, colspan, rowspan, ignoreHistoryAndEvents) {\r\n            var test = false;\r\n    \r\n            if (! cellName) {\r\n                if (! obj.highlighted.length) {\r\n                    alert(obj.options.text.noCellsSelected);\r\n                    return null;\r\n                } else {\r\n                    var x1 = parseInt(obj.highlighted[0].getAttribute('data-x'));\r\n                    var y1 = parseInt(obj.highlighted[0].getAttribute('data-y'));\r\n                    var x2 = parseInt(obj.highlighted[obj.highlighted.length-1].getAttribute('data-x'));\r\n                    var y2 = parseInt(obj.highlighted[obj.highlighted.length-1].getAttribute('data-y'));\r\n                    var cellName = jexcel.getColumnNameFromId([ x1, y1 ]);\r\n                    var colspan = (x2 - x1) + 1;\r\n                    var rowspan = (y2 - y1) + 1;\r\n                }\r\n            }\r\n    \r\n            var cell = jexcel.getIdFromColumnName(cellName, true);\r\n    \r\n            if (obj.options.mergeCells[cellName]) {\r\n                if (obj.records[cell[1]][cell[0]].getAttribute('data-merged')) {\r\n                    test = obj.options.text.cellAlreadyMerged;\r\n                }\r\n            } else if ((! colspan || colspan < 2) && (! rowspan || rowspan < 2)) {\r\n                test = obj.options.text.invalidMergeProperties;\r\n            } else {\r\n                var cells = [];\r\n                for (var j = cell[1]; j < cell[1] + rowspan; j++) {\r\n                    for (var i = cell[0]; i < cell[0] + colspan; i++) {\r\n                        var columnName = jexcel.getColumnNameFromId([i, j]);\r\n                        if (obj.records[j][i].getAttribute('data-merged')) {\r\n                            test = obj.options.text.thereIsAConflictWithAnotherMergedCell;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            if (test) {\r\n                alert(test);\r\n            } else {\r\n                // Add property\r\n                if (colspan > 1) {\r\n                    obj.records[cell[1]][cell[0]].setAttribute('colspan', colspan);\r\n                } else {\r\n                    colspan = 1;\r\n                }\r\n                if (rowspan > 1) {\r\n                    obj.records[cell[1]][cell[0]].setAttribute('rowspan', rowspan);\r\n                } else {\r\n                    rowspan = 1;\r\n                }\r\n                // Keep links to the existing nodes\r\n                obj.options.mergeCells[cellName] = [ colspan, rowspan, [] ];\r\n                // Mark cell as merged\r\n                obj.records[cell[1]][cell[0]].setAttribute('data-merged', 'true');\r\n                // Overflow\r\n                obj.records[cell[1]][cell[0]].style.overflow = 'hidden';\r\n                // History data\r\n                var data = [];\r\n                // Adjust the nodes\r\n                for (var y = cell[1]; y < cell[1] + rowspan; y++) {\r\n                    for (var x = cell[0]; x < cell[0] + colspan; x++) {\r\n                        if (! (cell[0] == x && cell[1] == y)) {\r\n                            data.push(obj.options.data[y][x]);\r\n                            obj.updateCell(x, y, '', true);\r\n                            obj.options.mergeCells[cellName][2].push(obj.records[y][x]);\r\n                            obj.records[y][x].style.display = 'none';\r\n                            obj.records[y][x] = obj.records[cell[1]][cell[0]];\r\n                        }\r\n                    }\r\n                }\r\n                // In the initialization is not necessary keep the history\r\n                obj.updateSelection(obj.records[cell[1]][cell[0]]);\r\n    \r\n                if (! ignoreHistoryAndEvents) {\r\n                    obj.setHistory({\r\n                        action:'setMerge',\r\n                        column:cellName,\r\n                        colspan:colspan,\r\n                        rowspan:rowspan,\r\n                        data:data,\r\n                    });\r\n    \r\n                    obj.dispatch('onmerge', el, cellName, colspan, rowspan);\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Merge cells\r\n         * @param cellName\r\n         * @param colspan\r\n         * @param rowspan\r\n         * @param ignoreHistoryAndEvents\r\n         */\r\n        obj.getMerge = function(cellName) {\r\n            var data = {};\r\n            if (cellName) {\r\n                if (obj.options.mergeCells[cellName]) {\r\n                    data = [ obj.options.mergeCells[cellName][0], obj.options.mergeCells[cellName][1] ];\r\n                } else {\r\n                    data = null;\r\n                }\r\n            } else {\r\n                if (obj.options.mergeCells) {\r\n                    var mergedCells = obj.options.mergeCells;\r\n                    var keys = Object.keys(obj.options.mergeCells);\r\n                    for (var i = 0; i < keys.length; i++) {\r\n                        data[keys[i]] = [ obj.options.mergeCells[keys[i]][0], obj.options.mergeCells[keys[i]][1] ];\r\n                    }\r\n                }\r\n            }\r\n    \r\n            return data;\r\n        }\r\n    \r\n        /**\r\n         * Remove merge by cellname\r\n         * @param cellName\r\n         */\r\n        obj.removeMerge = function(cellName, data, keepOptions) {\r\n            if (obj.options.mergeCells[cellName]) {\r\n                var cell = jexcel.getIdFromColumnName(cellName, true);\r\n                obj.records[cell[1]][cell[0]].removeAttribute('colspan');\r\n                obj.records[cell[1]][cell[0]].removeAttribute('rowspan');\r\n                obj.records[cell[1]][cell[0]].removeAttribute('data-merged');\r\n                var info = obj.options.mergeCells[cellName];\r\n    \r\n                var index = 0;\r\n                for (var j = 0; j < info[1]; j++) {\r\n                    for (var i = 0; i < info[0]; i++) {\r\n                        if (j > 0 || i > 0) {\r\n                            obj.records[cell[1]+j][cell[0]+i] = info[2][index];\r\n                            obj.records[cell[1]+j][cell[0]+i].style.display = '';\r\n                            // Recover data\r\n                            if (data && data[index]) {\r\n                                obj.updateCell(cell[0]+i, cell[1]+j, data[index]);\r\n                            }\r\n                            index++;\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                // Update selection\r\n                obj.updateSelection(obj.records[cell[1]][cell[0]], obj.records[cell[1]+j-1][cell[0]+i-1]);\r\n    \r\n                if (! keepOptions) {\r\n                    delete(obj.options.mergeCells[cellName]);\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Remove all merged cells\r\n         */\r\n        obj.destroyMerged = function(keepOptions) {\r\n            // Remove any merged cells\r\n            if (obj.options.mergeCells) {\r\n                var mergedCells = obj.options.mergeCells;\r\n                var keys = Object.keys(obj.options.mergeCells);\r\n                for (var i = 0; i < keys.length; i++) {\r\n                    obj.removeMerge(keys[i], null, keepOptions);\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Is column merged\r\n         */\r\n        obj.isColMerged = function(x, insertBefore) {\r\n            var cols = [];\r\n            // Remove any merged cells\r\n            if (obj.options.mergeCells) {\r\n                var keys = Object.keys(obj.options.mergeCells);\r\n                for (var i = 0; i < keys.length; i++) {\r\n                    var info = jexcel.getIdFromColumnName(keys[i], true);\r\n                    var colspan = obj.options.mergeCells[keys[i]][0];\r\n                    var x1 = info[0];\r\n                    var x2 = info[0] + (colspan > 1 ? colspan - 1 : 0);\r\n    \r\n                    if (insertBefore == null) {\r\n                        if ((x1 <= x && x2 >= x)) {\r\n                            cols.push(keys[i]);\r\n                        }\r\n                    } else {\r\n                        if (insertBefore) {\r\n                            if ((x1 < x && x2 >= x)) {\r\n                                cols.push(keys[i]);\r\n                            }\r\n                        } else {\r\n                            if ((x1 <= x && x2 > x)) {\r\n                                cols.push(keys[i]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            return cols;\r\n        }\r\n    \r\n        /**\r\n         * Is rows merged\r\n         */\r\n        obj.isRowMerged = function(y, insertBefore) {\r\n            var rows = [];\r\n            // Remove any merged cells\r\n            if (obj.options.mergeCells) {\r\n                var keys = Object.keys(obj.options.mergeCells);\r\n                for (var i = 0; i < keys.length; i++) {\r\n                    var info = jexcel.getIdFromColumnName(keys[i], true);\r\n                    var rowspan = obj.options.mergeCells[keys[i]][1];\r\n                    var y1 = info[1];\r\n                    var y2 = info[1] + (rowspan > 1 ? rowspan - 1 : 0);\r\n    \r\n                    if (insertBefore == null) {\r\n                        if ((y1 <= y && y2 >= y)) {\r\n                            rows.push(keys[i]);\r\n                        }\r\n                    } else {\r\n                        if (insertBefore) {\r\n                            if ((y1 < y && y2 >= y)) {\r\n                                rows.push(keys[i]);\r\n                            }\r\n                        } else {\r\n                            if ((y1 <= y && y2 > y)) {\r\n                                rows.push(keys[i]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            return rows;\r\n        }\r\n\r\n        /**\r\n         * Open the column filter\r\n         */\r\n        obj.openFilter = function(columnId) {\r\n            if (! obj.options.filters) {\r\n                console.log('Jspreadsheet: filters not enabled.');\r\n            } else {\r\n                // Make sure is integer\r\n                columnId = parseInt(columnId);\r\n                // Reset selection\r\n                obj.resetSelection();\r\n                // Load options\r\n                var optionsFiltered = [];\r\n                if (obj.options.columns[columnId].type == 'checkbox') {\r\n                    optionsFiltered.push({ id: 'true', name: 'True' });\r\n                    optionsFiltered.push({ id: 'false', name: 'False' });\r\n                } else {\r\n                    var options = [];\r\n                    var hasBlanks = false;\r\n                    for (var j = 0; j < obj.options.data.length; j++) {\r\n                        var k = obj.options.data[j][columnId];\r\n                        var v = obj.records[j][columnId].innerHTML;\r\n                        if (k && v) {\r\n                            options[k] = v;\r\n                        } else {\r\n                            var hasBlanks = true;\r\n                        }\r\n                    }\r\n                    var keys = Object.keys(options);\r\n                    var optionsFiltered = [];\r\n                    for (var j = 0; j < keys.length; j++) {\r\n                        optionsFiltered.push({ id: keys[j], name: options[keys[j]] });\r\n                    }\r\n                    // Has blank options\r\n                    if (hasBlanks) {\r\n                        optionsFiltered.push({ value: '', id: '', name: '(Blanks)' });\r\n                    }\r\n                }\r\n\r\n                // Create dropdown\r\n                var div = document.createElement('div');\r\n                obj.filter.children[columnId + 1].innerHTML = '';\r\n                obj.filter.children[columnId + 1].appendChild(div);\r\n                obj.filter.children[columnId + 1].style.paddingLeft = '0px';\r\n                obj.filter.children[columnId + 1].style.paddingRight = '0px';\r\n                obj.filter.children[columnId + 1].style.overflow = 'initial';\r\n\r\n                var opt = {\r\n                    data: optionsFiltered,\r\n                    multiple: true,\r\n                    autocomplete: true,\r\n                    opened: true,\r\n                    value: obj.filters[columnId] !== undefined ? obj.filters[columnId] : null,\r\n                    width:'100%',\r\n                    position: (obj.options.tableOverflow == true || obj.options.fullscreen == true) ? true : false,\r\n                    onclose: function(o) {\r\n                        obj.resetFilters();\r\n                        obj.filters[columnId] = o.dropdown.getValue(true);\r\n                        obj.filter.children[columnId + 1].innerHTML = o.dropdown.getText();\r\n                        obj.filter.children[columnId + 1].style.paddingLeft = '';\r\n                        obj.filter.children[columnId + 1].style.paddingRight = '';\r\n                        obj.filter.children[columnId + 1].style.overflow = '';\r\n                        obj.closeFilter(columnId);\r\n                        obj.refreshSelection();\r\n                    }\r\n                };\r\n\r\n                // Dynamic dropdown\r\n                jSuites.dropdown(div, opt);\r\n            }\r\n        }\r\n\r\n        obj.resetFilters = function() {\r\n            if (obj.options.filters) {\r\n                for (var i = 0; i < obj.filter.children.length; i++) {\r\n                    obj.filter.children[i].innerHTML = '&nbsp;';\r\n                    obj.filters[i] = null;\r\n                }\r\n            }\r\n        }\r\n\r\n        obj.closeFilter = function(columnId) {\r\n            if (! columnId) {\r\n                for (var i = 0; i < obj.filter.children.length; i++) {\r\n                    if (obj.filters[i]) {\r\n                        columnId = i;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Search filter\r\n            var search = function(query, x, y) {\r\n                for (var i = 0; i < query.length; i++) {\r\n                    if ((query[i] == '' && // Blank matching\r\n                        ((obj.options.data[y][x] === false) || // Unchecked checkbox\r\n                        (''+obj.options.data[y][x]) == '')) || // Blank non-checkbox value\r\n                        ((query[i] != '' && // Normal non-blank filtering\r\n                        ((''+obj.options.data[y][x]).search(query[i]) >= 0 ||\r\n                        (''+obj.records[y][x].innerHTML).search(query[i]) >= 0)))) {\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n\r\n            var query = obj.filters[columnId];\r\n            obj.results = [];\r\n            for (var j = 0; j < obj.options.data.length; j++) {\r\n                if (search(query, columnId, j)) {\r\n                    obj.results.push(j);\r\n                }\r\n            }\r\n            if (! obj.results.length) {\r\n                obj.results = null;\r\n            }\r\n\r\n            obj.updateResult();\r\n        }\r\n\r\n        /**\r\n         * Open the editor\r\n         * \r\n         * @param object cell\r\n         * @return void\r\n         */\r\n        obj.openEditor = function(cell, empty, e) {\r\n            // Get cell position\r\n            var y = cell.getAttribute('data-y');\r\n            var x = cell.getAttribute('data-x');\r\n    \r\n            // On edition start\r\n            obj.dispatch('oneditionstart', el, cell, x, y);\r\n    \r\n            // Overflow\r\n            if (x > 0) {\r\n                obj.records[y][x-1].style.overflow = 'hidden';\r\n            }\r\n    \r\n            // Create editor\r\n            var createEditor = function(type) {\r\n                // Cell information\r\n                var info = cell.getBoundingClientRect();\r\n    \r\n                // Create dropdown\r\n                var editor = document.createElement(type);\r\n                editor.style.width = (info.width) + 'px';\r\n                editor.style.height = (info.height - 2) + 'px';\r\n                editor.style.minHeight = (info.height - 2) + 'px';\r\n    \r\n                // Edit cell\r\n                cell.classList.add('editor');\r\n                cell.innerHTML = '';\r\n                cell.appendChild(editor);\r\n    \r\n                // On edition start\r\n                obj.dispatch('oncreateeditor', el, cell, x, y, editor);\r\n\r\n                return editor;\r\n            }\r\n    \r\n            // Readonly\r\n            if (cell.classList.contains('readonly') == true) {\r\n                // Do nothing\r\n            } else {\r\n                // Holder\r\n                obj.edition = [ obj.records[y][x], obj.records[y][x].innerHTML, x, y ];\r\n    \r\n                // If there is a custom editor for it\r\n                if (obj.options.columns[x].editor) {\r\n                    // Custom editors\r\n                    obj.options.columns[x].editor.openEditor(cell, el, empty, e);\r\n                } else {\r\n                    // Native functions\r\n                    if (obj.options.columns[x].type == 'hidden') {\r\n                        // Do nothing\r\n                    } else if (obj.options.columns[x].type == 'checkbox' || obj.options.columns[x].type == 'radio') {\r\n                        // Get value\r\n                        var value = cell.children[0].checked ? false : true;\r\n                        // Toogle value\r\n                        obj.setValue(cell, value);\r\n                        // Do not keep edition open\r\n                        obj.edition = null;\r\n                    } else if (obj.options.columns[x].type == 'dropdown' || obj.options.columns[x].type == 'autocomplete') {\r\n                        // Get current value\r\n                        var value = obj.options.data[y][x];\r\n                        if (obj.options.columns[x].multiple && !Array.isArray(value)) {\r\n                            value = value.split(';');\r\n                        }\r\n    \r\n                        // Create dropdown\r\n                        if (typeof(obj.options.columns[x].filter) == 'function') {\r\n                            var source = obj.options.columns[x].filter(el, cell, x, y, obj.options.columns[x].source);\r\n                        } else {\r\n                            var source = obj.options.columns[x].source;\r\n                        }\r\n    \r\n                        // Do not change the original source\r\n                        var data = [];\r\n                        for (var j = 0; j < source.length; j++) {\r\n                            data.push(source[j]);\r\n                        }\r\n\r\n                        // Create editor\r\n                        var editor = createEditor('div');\r\n                        var options = {\r\n                            data: data,\r\n                            multiple: obj.options.columns[x].multiple ? true : false,\r\n                            autocomplete: obj.options.columns[x].autocomplete || obj.options.columns[x].type == 'autocomplete' ? true : false,\r\n                            opened:true,\r\n                            value: value,\r\n                            width:'100%',\r\n                            height:editor.style.minHeight,\r\n                            position: (obj.options.tableOverflow == true || obj.options.fullscreen == true) ? true : false,\r\n                            onclose:function() {\r\n                                obj.closeEditor(cell, true);\r\n                            }\r\n                        };\r\n                        if (obj.options.columns[x].options && obj.options.columns[x].options.type) {\r\n                            options.type = obj.options.columns[x].options.type;\r\n                        }\r\n                        jSuites.dropdown(editor, options);\r\n                    } else if (obj.options.columns[x].type == 'calendar' || obj.options.columns[x].type == 'color') {\r\n                        // Value\r\n                        var value = obj.options.data[y][x];\r\n                        // Create editor\r\n                        var editor = createEditor('input');\r\n                        editor.value = value;\r\n    \r\n                        if (obj.options.tableOverflow == true || obj.options.fullscreen == true) {\r\n                            obj.options.columns[x].options.position = true;\r\n                        }\r\n                        obj.options.columns[x].options.value = obj.options.data[y][x];\r\n                        obj.options.columns[x].options.opened = true;\r\n                        obj.options.columns[x].options.onclose = function(el, value) {\r\n                            obj.closeEditor(cell, true);\r\n                        }\r\n                        // Current value\r\n                        if (obj.options.columns[x].type == 'color') {\r\n                            jSuites.color(editor, obj.options.columns[x].options);\r\n                        } else {\r\n                            jSuites.calendar(editor, obj.options.columns[x].options);\r\n                        }\r\n                        // Focus on editor\r\n                        editor.focus();\r\n                    } else if (obj.options.columns[x].type == 'html') {\r\n                        var value = obj.options.data[y][x];\r\n                        // Create editor\r\n                        var editor = createEditor('div');\r\n                        editor.style.position = 'relative';\r\n                        var div = document.createElement('div');\r\n                        div.classList.add('jexcel_richtext');\r\n                        editor.appendChild(div);\r\n                        jSuites.editor(div, {\r\n                            focus: true,\r\n                            value: value,\r\n                        });\r\n                        var rect = cell.getBoundingClientRect();\r\n                        var rectContent = div.getBoundingClientRect();\r\n                        if (window.innerHeight < rect.bottom + rectContent.height) {\r\n                            div.style.top = (rect.top - (rectContent.height + 2)) + 'px';\r\n                        } else {\r\n                            div.style.top = (rect.top) + 'px';\r\n                        }\r\n                    } else if (obj.options.columns[x].type == 'image') {\r\n                        // Value\r\n                        var img = cell.children[0];\r\n                        // Create editor\r\n                        var editor = createEditor('div');\r\n                        editor.style.position = 'relative';\r\n                        var div = document.createElement('div');\r\n                        div.classList.add('jclose');\r\n                        if (img && img.src) {\r\n                            div.appendChild(img);\r\n                        }\r\n                        editor.appendChild(div);\r\n                        jSuites.image(div, obj.options.imageOptions);\r\n                        var rect = cell.getBoundingClientRect();\r\n                        var rectContent = div.getBoundingClientRect();\r\n                        if (window.innerHeight < rect.bottom + rectContent.height) {\r\n                            div.style.top = (rect.top - (rectContent.height + 2)) + 'px';\r\n                        } else {\r\n                            div.style.top = (rect.top) + 'px';\r\n                        }\r\n                    } else {\r\n                        // Value\r\n                        var value = empty == true ? '' : obj.options.data[y][x];\r\n    \r\n                        // Basic editor\r\n                        if (obj.options.columns[x].wordWrap != false && (obj.options.wordWrap == true || obj.options.columns[x].wordWrap == true)) {\r\n                            var editor = createEditor('textarea');\r\n                        } else {\r\n                            var editor = createEditor('input');\r\n                            // Mask\r\n                            if (obj.options.columns[x].mask) {\r\n                                editor.setAttribute('data-mask', obj.options.columns[x].mask);\r\n                            }\r\n                        }\r\n    \r\n                        editor.onblur = function() {\r\n                            obj.closeEditor(cell, true);\r\n                        };\r\n                        editor.focus();\r\n                        editor.value = value;\r\n                        editor.scrollLeft = editor.scrollWidth;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Close the editor and save the information\r\n         * \r\n         * @param object cell\r\n         * @param boolean save\r\n         * @return void\r\n         */\r\n        obj.closeEditor = function(cell, save) {\r\n            var x = parseInt(cell.getAttribute('data-x'));\r\n            var y = parseInt(cell.getAttribute('data-y'));\r\n\r\n            // Get cell properties\r\n            if (save == true) {\r\n                // If custom editor\r\n                if (obj.options.columns[x].editor) {\r\n                    // Custom editor\r\n                    var value = obj.options.columns[x].editor.closeEditor(cell, save);\r\n                } else {\r\n                    // Native functions\r\n                    if (obj.options.columns[x].type == 'checkbox' || obj.options.columns[x].type == 'radio' || obj.options.columns[x].type == 'hidden') {\r\n                        // Do nothing\r\n                    } else if (obj.options.columns[x].type == 'dropdown' || obj.options.columns[x].type == 'autocomplete') {\r\n                        var value = cell.children[0].dropdown.close(true);\r\n                    } else if (obj.options.columns[x].type == 'calendar') {\r\n                        var value = cell.children[0].calendar.close(true);\r\n                    } else if (obj.options.columns[x].type == 'color') {\r\n                        var value = cell.children[0].color.close(true);\r\n                    } else if (obj.options.columns[x].type == 'html') {\r\n                        var value = cell.children[0].children[0].editor.getData();\r\n                    } else if (obj.options.columns[x].type == 'image') {\r\n                        var img = cell.children[0].children[0].children[0];\r\n                        var value = img && img.tagName == 'IMG' ? img.src : '';\r\n                    } else if (obj.options.columns[x].type == 'numeric') {\r\n                        var value = cell.children[0].value;\r\n                        if (value.substr(0,1) != '=') {\r\n                            if (value == '') {\r\n                                value = obj.options.columns[x].allowEmpty ? '' : 0;\r\n                            }\r\n                        }\r\n                        cell.children[0].onblur = null;\r\n                    } else {\r\n                        var value = cell.children[0].value;\r\n                        cell.children[0].onblur = null;\r\n                    }\r\n                }\r\n\r\n                // Ignore changes if the value is the same\r\n                if (obj.options.data[y][x] == value) {\r\n                    cell.innerHTML = obj.edition[1];\r\n                } else {\r\n                    obj.setValue(cell, value);\r\n                }\r\n            } else {\r\n                if (obj.options.columns[x].editor) {\r\n                    // Custom editor\r\n                    obj.options.columns[x].editor.closeEditor(cell, save);\r\n                } else {\r\n                    if (obj.options.columns[x].type == 'dropdown' || obj.options.columns[x].type == 'autocomplete') {\r\n                        cell.children[0].dropdown.close(true);\r\n                    } else if (obj.options.columns[x].type == 'calendar') {\r\n                        cell.children[0].calendar.close(true);\r\n                    } else if (obj.options.columns[x].type == 'color') {\r\n                        cell.children[0].color.close(true);\r\n                    } else {\r\n                        cell.children[0].onblur = null;\r\n                    }\r\n                }\r\n    \r\n                // Restore value\r\n                cell.innerHTML = obj.edition && obj.edition[1] ? obj.edition[1] : '';\r\n            }\r\n    \r\n            // On edition end\r\n            obj.dispatch('oneditionend', el, cell, x, y, value, save);\r\n\r\n            // Remove editor class\r\n            cell.classList.remove('editor');\r\n    \r\n            // Finish edition\r\n            obj.edition = null;\r\n        }\r\n    \r\n        /**\r\n         * Get the cell object\r\n         * \r\n         * @param object cell\r\n         * @return string value\r\n         */\r\n        obj.getCell = function(cell) {\r\n            // Convert in case name is excel liked ex. A10, BB92\r\n            cell = jexcel.getIdFromColumnName(cell, true);\r\n            var x = cell[0];\r\n            var y = cell[1];\r\n    \r\n            return obj.records[y][x];\r\n        }\r\n    \r\n        /**\r\n         * Get the cell object from coords\r\n         * \r\n         * @param object cell\r\n         * @return string value\r\n         */\r\n        obj.getCellFromCoords = function(x, y) {\r\n            return obj.records[y][x];\r\n        }\r\n    \r\n        /**\r\n         * Get label\r\n         * \r\n         * @param object cell\r\n         * @return string value\r\n         */\r\n        obj.getLabel = function(cell) {\r\n            // Convert in case name is excel liked ex. A10, BB92\r\n            cell = jexcel.getIdFromColumnName(cell, true);\r\n            var x = cell[0];\r\n            var y = cell[1];\r\n    \r\n            return obj.records[y][x].innerHTML;\r\n        }\r\n    \r\n        /**\r\n         * Get labelfrom coords\r\n         * \r\n         * @param object cell\r\n         * @return string value\r\n         */\r\n        obj.getLabelFromCoords = function(x, y) {\r\n            return obj.records[y][x].innerHTML;\r\n        }\r\n    \r\n        /**\r\n         * Get the value from a cell\r\n         * \r\n         * @param object cell\r\n         * @return string value\r\n         */\r\n        obj.getValue = function(cell, processedValue) {\r\n            if (typeof(cell) == 'object') {\r\n                var x = cell.getAttribute('data-x');\r\n                var y = cell.getAttribute('data-y');\r\n            } else {\r\n                cell = jexcel.getIdFromColumnName(cell, true);\r\n                var x = cell[0];\r\n                var y = cell[1];\r\n            }\r\n    \r\n            var value = null;\r\n    \r\n            if (x != null && y != null) {\r\n                if (obj.records[y] && obj.records[y][x] && (processedValue || obj.options.copyCompatibility == true)) {\r\n                    value = obj.records[y][x].innerHTML;\r\n                } else {\r\n                    if (obj.options.data[y] && obj.options.data[y][x] != 'undefined') {\r\n                        value = obj.options.data[y][x];\r\n                    }\r\n                }\r\n            }\r\n    \r\n            return value;\r\n        }\r\n    \r\n        /**\r\n         * Get the value from a coords\r\n         * \r\n         * @param int x\r\n         * @param int y\r\n         * @return string value\r\n         */\r\n        obj.getValueFromCoords = function(x, y, processedValue) {\r\n            var value = null;\r\n    \r\n            if (x != null && y != null) {\r\n                if ((obj.records[y] && obj.records[y][x]) && processedValue || obj.options.copyCompatibility == true) {\r\n                    value = obj.records[y][x].innerHTML;\r\n                } else {\r\n                    if (obj.options.data[y] && obj.options.data[y][x] != 'undefined') {\r\n                        value = obj.options.data[y][x];\r\n                    }\r\n                }\r\n            }\r\n    \r\n            return value;\r\n        }\r\n    \r\n        /**\r\n         * Set a cell value\r\n         * \r\n         * @param mixed cell destination cell\r\n         * @param string value value\r\n         * @return void\r\n         */\r\n        obj.setValue = function(cell, value, force) {\r\n            var records = [];\r\n    \r\n            if (typeof(cell) == 'string') {\r\n                var columnId = jexcel.getIdFromColumnName(cell, true);\r\n                var x = columnId[0];\r\n                var y = columnId[1];\r\n    \r\n                // Update cell\r\n                records.push(obj.updateCell(x, y, value, force));\r\n    \r\n                // Update all formulas in the chain\r\n                obj.updateFormulaChain(x, y, records);\r\n            } else {\r\n                var x = null;\r\n                var y = null;\r\n                if (cell && cell.getAttribute) {\r\n                    var x = cell.getAttribute('data-x');\r\n                    var y = cell.getAttribute('data-y');\r\n                }\r\n    \r\n                // Update cell\r\n                if (x != null && y != null) {\r\n                    records.push(obj.updateCell(x, y, value, force));\r\n    \r\n                    // Update all formulas in the chain\r\n                    obj.updateFormulaChain(x, y, records);\r\n                } else {\r\n                    var keys = Object.keys(cell);\r\n                    if (keys.length > 0) {\r\n                        for (var i = 0; i < keys.length; i++) {\r\n                            if (typeof(cell[i]) == 'string') {\r\n                                var columnId = jexcel.getIdFromColumnName(cell[i], true);\r\n                                var x = columnId[0];\r\n                                var y = columnId[1];\r\n                            } else {\r\n                                if (cell[i].x != null && cell[i].y != null) {\r\n                                    var x = cell[i].x;\r\n                                    var y = cell[i].y;\r\n                                    // Flexible setup\r\n                                    if (cell[i].newValue != null) {\r\n                                        value = cell[i].newValue;\r\n                                    } else if (cell[i].value != null) {\r\n                                        value = cell[i].value;\r\n                                    }\r\n                                } else {\r\n                                    var x = cell[i].getAttribute('data-x');\r\n                                    var y = cell[i].getAttribute('data-y');\r\n                                }\r\n                            }\r\n    \r\n                             // Update cell\r\n                            if (x != null && y != null) {\r\n                                records.push(obj.updateCell(x, y, value, force));\r\n    \r\n                                // Update all formulas in the chain\r\n                                obj.updateFormulaChain(x, y, records);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            // Update history\r\n            obj.setHistory({\r\n                action:'setValue',\r\n                records:records,\r\n                selection:obj.selectedCell,\r\n            });\r\n    \r\n            // Update table with custom configurations if applicable\r\n            obj.updateTable();\r\n    \r\n            // On after changes\r\n            obj.onafterchanges(el, records);\r\n        }\r\n    \r\n        /**\r\n         * Set a cell value based on coordinates\r\n         * \r\n         * @param int x destination cell\r\n         * @param int y destination cell\r\n         * @param string value\r\n         * @return void\r\n         */\r\n        obj.setValueFromCoords = function(x, y, value, force) {\r\n            var records = [];\r\n            records.push(obj.updateCell(x, y, value, force));\r\n    \r\n            // Update all formulas in the chain\r\n            obj.updateFormulaChain(x, y, records);\r\n    \r\n            // Update history\r\n            obj.setHistory({\r\n                action:'setValue',\r\n                records:records,\r\n                selection:obj.selectedCell,\r\n            });\r\n    \r\n            // Update table with custom configurations if applicable\r\n            obj.updateTable();\r\n    \r\n            // On after changes\r\n            obj.onafterchanges(el, records);\r\n        }\r\n    \r\n        /**\r\n         * Toogle\r\n         */\r\n        obj.setCheckRadioValue = function() {\r\n            var records = [];\r\n            var keys = Object.keys(obj.highlighted);\r\n            for (var i = 0; i < keys.length; i++) {\r\n                var x = obj.highlighted[i].getAttribute('data-x');\r\n                var y = obj.highlighted[i].getAttribute('data-y');\r\n    \r\n                if (obj.options.columns[x].type == 'checkbox' || obj.options.columns[x].type == 'radio') {\r\n                    // Update cell\r\n                    records.push(obj.updateCell(x, y, ! obj.options.data[y][x]));\r\n                }\r\n            }\r\n    \r\n            if (records.length) {\r\n                // Update history\r\n                obj.setHistory({\r\n                    action:'setValue',\r\n                    records:records,\r\n                    selection:obj.selectedCell,\r\n                });\r\n    \r\n                // On after changes\r\n                obj.onafterchanges(el, records);\r\n            }\r\n        }\r\n        /**\r\n         * Strip tags\r\n         */\r\n        var stripScript = function(a) {\r\n            var b = new Option;\r\n            b.innerHTML = a;\r\n            var c = null;\r\n            for (a = b.getElementsByTagName('script'); c=a[0];) c.parentNode.removeChild(c);\r\n            return b.innerHTML;\r\n        }\r\n\r\n        /**\r\n         * Update cell content\r\n         * \r\n         * @param object cell\r\n         * @return void\r\n         */\r\n        obj.updateCell = function(x, y, value, force) {\r\n            // Changing value depending on the column type\r\n            if (obj.records[y][x].classList.contains('readonly') == true && ! force) {\r\n                // Do nothing\r\n                var record = {\r\n                    x: x,\r\n                    y: y,\r\n                    col: x,\r\n                    row: y\r\n                }\r\n            } else {\r\n                // Security\r\n                if ((''+value).substr(0,1) == '=' && obj.options.secureFormulas == true) {\r\n                    var val = secureFormula(value);\r\n                    if (val != value) {\r\n                        // Update the data container\r\n                        value = val;\r\n                    }\r\n                }\r\n\r\n                // On change\r\n                var val = obj.dispatch('onbeforechange', el, obj.records[y][x], x, y, value);\r\n\r\n                // If you return something this will overwrite the value\r\n                if (val != undefined) {\r\n                    value = val;\r\n                }\r\n\r\n                if (obj.options.columns[x].editor && typeof(obj.options.columns[x].editor.updateCell) == 'function') {\r\n                    value = obj.options.columns[x].editor.updateCell(obj.records[y][x], value, force);\r\n                }\r\n\r\n                // History format\r\n                var record = {\r\n                    x: x,\r\n                    y: y,\r\n                    col: x,\r\n                    row: y,\r\n                    newValue: value,\r\n                    oldValue: obj.options.data[y][x],\r\n                }\r\n\r\n                if (obj.options.columns[x].editor) {\r\n                    // Update data and cell\r\n                    obj.options.data[y][x] = value;\r\n                } else {\r\n                    // Native functions\r\n                    if (obj.options.columns[x].type == 'checkbox' || obj.options.columns[x].type == 'radio') {\r\n                        // Unchecked all options\r\n                        if (obj.options.columns[x].type == 'radio') {\r\n                            for (var j = 0; j < obj.options.data.length; j++) {\r\n                                obj.options.data[j][x] = false;\r\n                            }\r\n                        }\r\n\r\n                        // Update data and cell\r\n                        obj.records[y][x].children[0].checked = (value == 1 || value == true || value == 'true' || value == 'TRUE') ? true : false;\r\n                        obj.options.data[y][x] = obj.records[y][x].children[0].checked;\r\n                    } else if (obj.options.columns[x].type == 'dropdown' || obj.options.columns[x].type == 'autocomplete') {\r\n                        // Update data and cell\r\n                        obj.options.data[y][x] = value;\r\n                        obj.records[y][x].innerText = obj.getDropDownValue(x, value);\r\n                    } else if (obj.options.columns[x].type == 'calendar') {\r\n                        // Update calendar\r\n                        var formatted = jSuites.calendar.extractDateFromString(value, obj.options.columns[x].options.format);\r\n                        // Update data and cell\r\n                        obj.options.data[y][x] = value;\r\n                        obj.records[y][x].innerText = jSuites.calendar.getDateString(formatted ? formatted : value, obj.options.columns[x].options.format);\r\n                    } else if (obj.options.columns[x].type == 'color') {\r\n                        // Update color\r\n                        obj.options.data[y][x] = value;\r\n                        // Render\r\n                        if (obj.options.columns[x].render == 'square') {\r\n                            var color = document.createElement('div');\r\n                            color.className = 'color';\r\n                            color.style.backgroundColor = value;\r\n                            obj.records[y][x].innerText = '';\r\n                            obj.records[y][x].appendChild(color);\r\n                        } else {\r\n                            obj.records[y][x].style.color = value;\r\n                            obj.records[y][x].innerText = value;\r\n                        }\r\n                    } else if (obj.options.columns[x].type == 'image') {\r\n                        value = ''+value;\r\n                        obj.options.data[y][x] = value;\r\n                        obj.records[y][x].innerHTML = '';\r\n                        if (value && value.substr(0, 10) == 'data:image') {\r\n                            var img = document.createElement('img');\r\n                            img.src = value;\r\n                            obj.records[y][x].appendChild(img);\r\n                        }\r\n                    } else {\r\n                        // Update data and cell\r\n                        obj.options.data[y][x] = value;\r\n                        // Label\r\n                        if (obj.options.columns[x].type == 'html') {\r\n                            obj.records[y][x].innerHTML = stripScript(obj.parseValue(x, y, value));\r\n                        } else {\r\n                            if (obj.options.stripHTML === false || obj.options.columns[x].stripHTML === false) {\r\n                                obj.records[y][x].innerHTML = stripScript(obj.parseValue(x, y, value));\r\n                            } else {\r\n                                obj.records[y][x].innerText = obj.parseValue(x, y, value);\r\n                            }\r\n                        }\r\n                        // Handle big text inside a cell\r\n                        if (obj.options.columns[x].wordWrap != false && (obj.options.wordWrap == true || obj.options.columns[x].wordWrap == true || obj.records[y][x].innerHTML.length > 200)) {\r\n                            obj.records[y][x].style.whiteSpace = 'pre-wrap';\r\n                        } else {\r\n                            obj.records[y][x].style.whiteSpace = '';\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Overflow\r\n                if (x > 0) {\r\n                    if (value) {\r\n                        obj.records[y][x-1].style.overflow = 'hidden';\r\n                    } else {\r\n                        obj.records[y][x-1].style.overflow = '';\r\n                    }\r\n                }\r\n\r\n                // On change\r\n                obj.dispatch('onchange', el, (obj.records[y] && obj.records[y][x] ? obj.records[y][x] : null), x, y, value, record.oldValue);\r\n            }\r\n\r\n            return record;\r\n        }\r\n\r\n        /**\r\n         * Helper function to copy data using the corner icon\r\n         */\r\n        obj.copyData = function(o, d) {\r\n            // Get data from all selected cells\r\n            var data = obj.getData(true, true);\r\n\r\n            // Selected cells\r\n            var h = obj.selectedContainer;\r\n\r\n            // Cells\r\n            var x1 = parseInt(o.getAttribute('data-x'));\r\n            var y1 = parseInt(o.getAttribute('data-y'));\r\n            var x2 = parseInt(d.getAttribute('data-x'));\r\n            var y2 = parseInt(d.getAttribute('data-y'));\r\n\r\n            // Records\r\n            var records = [];\r\n            var breakControl = false;\r\n\r\n            if (h[0] == x1) {\r\n                // Vertical copy\r\n                if (y1 < h[1]) {\r\n                    var rowNumber = y1 - h[1];\r\n                } else {\r\n                    var rowNumber = 1;\r\n                }\r\n                var colNumber = 0;\r\n            } else {\r\n                if (x1 < h[0]) {\r\n                    var colNumber = x1 - h[0];\r\n                } else {\r\n                    var colNumber = 1;\r\n                }\r\n                var rowNumber = 0;\r\n            }\r\n\r\n            // Copy data procedure\r\n            var posx = 0;\r\n            var posy = 0;\r\n\r\n            for (var j = y1; j <= y2; j++) {\r\n                // Skip hidden rows\r\n                if (obj.rows[j] && obj.rows[j].style.display == 'none') {\r\n                    continue;\r\n                }\r\n\r\n                // Controls\r\n                if (data[posy] == undefined) {\r\n                    posy = 0;\r\n                }\r\n                posx = 0;\r\n\r\n                // Data columns\r\n                if (h[0] != x1) {\r\n                    if (x1 < h[0]) {\r\n                        var colNumber = x1 - h[0];\r\n                    } else {\r\n                        var colNumber = 1;\r\n                    }\r\n                }\r\n                // Data columns\r\n                for (var i = x1; i <= x2; i++) {\r\n                    // Update non-readonly\r\n                    if (obj.records[j][i] && ! obj.records[j][i].classList.contains('readonly') && obj.records[j][i].style.display != 'none' && breakControl == false) {\r\n                        // Stop if contains value\r\n                        if (! obj.selection.length) {\r\n                            if (obj.options.data[j][i] != '') {\r\n                                breakControl = true;\r\n                                continue;\r\n                            }\r\n                        }\r\n    \r\n                        // Column\r\n                        if (data[posy] == undefined) {\r\n                            posx = 0;\r\n                        } else if (data[posy][posx] == undefined) {\r\n                            posx = 0;\r\n                        }\r\n\r\n                        // Value\r\n                        var value = data[posy][posx];\r\n    \r\n                        if (value && ! data[1] && obj.options.autoIncrement == true) {\r\n                            if (obj.options.columns[i].type == 'text' || obj.options.columns[i].type == 'number') {\r\n                                if ((''+value).substr(0,1) == '=') {\r\n                                    var tokens = value.match(/([A-Z]+[0-9]+)/g);\r\n    \r\n                                    if (tokens) {\r\n                                        var affectedTokens = [];\r\n                                        for (var index = 0; index < tokens.length; index++) {\r\n                                            var position = jexcel.getIdFromColumnName(tokens[index], 1);\r\n                                            position[0] += colNumber;\r\n                                            position[1] += rowNumber;\r\n                                            if (position[1] < 0) {\r\n                                                position[1] = 0;\r\n                                            }\r\n                                            var token = jexcel.getColumnNameFromId([position[0], position[1]]);\r\n    \r\n                                            if (token != tokens[index]) {\r\n                                                affectedTokens[tokens[index]] = token;\r\n                                            }\r\n                                        }\r\n                                        // Update formula\r\n                                        if (affectedTokens) {\r\n                                            value = obj.updateFormula(value, affectedTokens)\r\n                                        }\r\n                                    }\r\n                                } else {\r\n                                    if (value == Number(value)) {\r\n                                        value = Number(value) + rowNumber;\r\n                                    }\r\n                                }\r\n                            } else if (obj.options.columns[i].type == 'calendar') {\r\n                                var date = new Date(value);\r\n                                date.setDate(date.getDate() + rowNumber);\r\n                                value = date.getFullYear() + '-' + jexcel.doubleDigitFormat(parseInt(date.getMonth() + 1)) + '-' + jexcel.doubleDigitFormat(date.getDate()) + ' ' + '00:00:00';\r\n                            }\r\n                        }\r\n    \r\n                        records.push(obj.updateCell(i, j, value));\r\n    \r\n                        // Update all formulas in the chain\r\n                        obj.updateFormulaChain(i, j, records);\r\n                    }\r\n                    posx++;\r\n                    if (h[0] != x1) {\r\n                        colNumber++;\r\n                    }\r\n                }\r\n                posy++;\r\n                rowNumber++;\r\n            }\r\n    \r\n            // Update history\r\n            obj.setHistory({\r\n                action:'setValue',\r\n                records:records,\r\n                selection:obj.selectedCell,\r\n            });\r\n    \r\n            // Update table with custom configuration if applicable\r\n            obj.updateTable();\r\n    \r\n            // On after changes\r\n            obj.onafterchanges(el, records);\r\n        }\r\n    \r\n        /**\r\n         * Refresh current selection\r\n         */\r\n        obj.refreshSelection = function() {\r\n            if (obj.selectedCell) {\r\n                obj.updateSelectionFromCoords(obj.selectedCell[0], obj.selectedCell[1], obj.selectedCell[2], obj.selectedCell[3]);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Move coords to A1 in case ovelaps with an excluded cell\r\n         */\r\n        obj.conditionalSelectionUpdate = function(type, o, d) {\r\n            if (type == 1) {\r\n                if (obj.selectedCell && ((o >= obj.selectedCell[1] && o <= obj.selectedCell[3]) || (d >= obj.selectedCell[1] && d <= obj.selectedCell[3]))) {\r\n                    obj.resetSelection();\r\n                    return;\r\n                }\r\n            } else {\r\n                if (obj.selectedCell && ((o >= obj.selectedCell[0] && o <= obj.selectedCell[2]) || (d >= obj.selectedCell[0] && d <= obj.selectedCell[2]))) {\r\n                    obj.resetSelection();\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Clear table selection\r\n         */\r\n        obj.resetSelection = function(blur) {\r\n            // Remove style\r\n            if (! obj.highlighted.length) {\r\n                var previousStatus = 0;\r\n            } else {\r\n                var previousStatus = 1;\r\n    \r\n                for (var i = 0; i < obj.highlighted.length; i++) {\r\n                    obj.highlighted[i].classList.remove('highlight');\r\n                    obj.highlighted[i].classList.remove('highlight-left');\r\n                    obj.highlighted[i].classList.remove('highlight-right');\r\n                    obj.highlighted[i].classList.remove('highlight-top');\r\n                    obj.highlighted[i].classList.remove('highlight-bottom');\r\n                    obj.highlighted[i].classList.remove('highlight-selected');\r\n    \r\n                    var px = parseInt(obj.highlighted[i].getAttribute('data-x'));\r\n                    var py = parseInt(obj.highlighted[i].getAttribute('data-y'));\r\n    \r\n                    // Check for merged cells\r\n                    if (obj.highlighted[i].getAttribute('data-merged')) {\r\n                        var colspan = parseInt(obj.highlighted[i].getAttribute('colspan'));\r\n                        var rowspan = parseInt(obj.highlighted[i].getAttribute('rowspan'));\r\n                        var ux = colspan > 0 ? px + (colspan - 1) : px;\r\n                        var uy = rowspan > 0 ? py + (rowspan - 1): py;\r\n                    } else {\r\n                        var ux = px;\r\n                        var uy = py;\r\n                    }\r\n    \r\n                    // Remove selected from headers\r\n                    for (var j = px; j <= ux; j++) {\r\n                        if (obj.headers[j]) {\r\n                            obj.headers[j].classList.remove('selected');\r\n                        }\r\n                    }\r\n    \r\n                    // Remove selected from rows\r\n                    for (var j = py; j <= uy; j++) {\r\n                        if (obj.rows[j]) {\r\n                            obj.rows[j].classList.remove('selected');\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            // Reset highlighed cells\r\n            obj.highlighted = [];\r\n    \r\n            // Reset\r\n            obj.selectedCell = null;\r\n    \r\n            // Hide corner\r\n            obj.corner.style.top = '-2000px';\r\n            obj.corner.style.left = '-2000px';\r\n    \r\n            if (blur == true && previousStatus == 1) {\r\n                obj.dispatch('onblur', el);\r\n            }\r\n    \r\n            return previousStatus;\r\n        }\r\n    \r\n        /**\r\n         * Update selection based on two cells\r\n         */\r\n        obj.updateSelection = function(el1, el2, origin) {\r\n            var x1 = el1.getAttribute('data-x');\r\n            var y1 = el1.getAttribute('data-y');\r\n            if (el2) {\r\n                var x2 = el2.getAttribute('data-x');\r\n                var y2 = el2.getAttribute('data-y');\r\n            } else {\r\n                var x2 = x1;\r\n                var y2 = y1;\r\n            }\r\n    \r\n            obj.updateSelectionFromCoords(x1, y1, x2, y2, origin);\r\n        }\r\n    \r\n        /**\r\n         * Update selection from coords\r\n         */\r\n        obj.updateSelectionFromCoords = function(x1, y1, x2, y2, origin) {\r\n            // Reset Selection\r\n            var updated = null;\r\n            var previousState = obj.resetSelection();\r\n    \r\n            // Same element\r\n            if (x2 == null) {\r\n                x2 = x1;\r\n            }\r\n            if (y2 == null) {\r\n                y2 = y1;\r\n            }\r\n    \r\n            // Selection must be within the existing data\r\n            if (x1 >= obj.headers.length) {\r\n                x1 = obj.headers.length - 1;\r\n            }\r\n            if (y1 >= obj.rows.length) {\r\n                y1 = obj.rows.length - 1;\r\n            }\r\n            if (x2 >= obj.headers.length) {\r\n                x2 = obj.headers.length - 1;\r\n            }\r\n            if (y2 >= obj.rows.length) {\r\n                y2 = obj.rows.length - 1;\r\n            }\r\n    \r\n            // Keep selected cell\r\n            obj.selectedCell = [x1, y1, x2, y2];\r\n    \r\n            // Select cells\r\n            if (x1 != null) {\r\n                // Add selected cell\r\n                if (obj.records[y1][x1]) {\r\n                    obj.records[y1][x1].classList.add('highlight-selected');\r\n                }\r\n    \r\n                // Origin & Destination\r\n                if (parseInt(x1) < parseInt(x2)) {\r\n                    var px = parseInt(x1);\r\n                    var ux = parseInt(x2);\r\n                } else {\r\n                    var px = parseInt(x2);\r\n                    var ux = parseInt(x1);\r\n                }\r\n    \r\n                if (parseInt(y1) < parseInt(y2)) {\r\n                    var py = parseInt(y1);\r\n                    var uy = parseInt(y2);\r\n                } else {\r\n                    var py = parseInt(y2);\r\n                    var uy = parseInt(y1);\r\n                }\r\n    \r\n                // Verify merged columns\r\n                for (var i = px; i <= ux; i++) {\r\n                    for (var j = py; j <= uy; j++) {\r\n                        if (obj.records[j][i] && obj.records[j][i].getAttribute('data-merged')) {\r\n                            var x = parseInt(obj.records[j][i].getAttribute('data-x'));\r\n                            var y = parseInt(obj.records[j][i].getAttribute('data-y'));\r\n                            var colspan = parseInt(obj.records[j][i].getAttribute('colspan'));\r\n                            var rowspan = parseInt(obj.records[j][i].getAttribute('rowspan'));\r\n    \r\n                            if (colspan > 1) {\r\n                                if (x < px) {\r\n                                    px = x;\r\n                                }\r\n                                if (x + colspan > ux) {\r\n                                    ux = x + colspan - 1;\r\n                                }\r\n                            }\r\n    \r\n                            if (rowspan) {\r\n                                if (y < py) {\r\n                                    py = y;\r\n    \r\n                                }\r\n                                if (y + rowspan > uy) {\r\n                                    uy = y + rowspan - 1;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                // Limits\r\n                var borderLeft = null;\r\n                var borderRight = null;\r\n                var borderTop = null;\r\n                var borderBottom = null;\r\n    \r\n                // Vertical limits\r\n                for (var j = py; j <= uy; j++) {\r\n                    if (obj.rows[j].style.display != 'none') {\r\n                        if (borderTop == null) {\r\n                            borderTop = j;\r\n                        }\r\n                        borderBottom = j;\r\n                    }\r\n                }\r\n    \r\n                // Redefining styles\r\n                for (var i = px; i <= ux; i++) {\r\n                    for (var j = py; j <= uy; j++) {\r\n                        if (obj.rows[j].style.display != 'none' && obj.records[j][i].style.display != 'none') {\r\n                            obj.records[j][i].classList.add('highlight');\r\n                            obj.highlighted.push(obj.records[j][i]);\r\n                        }\r\n                    }\r\n    \r\n                    // Horizontal limits\r\n                    if (obj.options.columns[i].type != 'hidden') {\r\n                        if (borderLeft == null) {\r\n                            borderLeft = i;\r\n                        }\r\n                        borderRight = i;\r\n                    }\r\n                }\r\n    \r\n                // Create borders\r\n                if (! borderLeft) {\r\n                    borderLeft = 0;\r\n                }\r\n                if (! borderRight) {\r\n                    borderRight = 0;\r\n                }\r\n                for (var i = borderLeft; i <= borderRight; i++) {\r\n                    if (obj.options.columns[i].type != 'hidden') {\r\n                        // Top border\r\n                        if (obj.records[borderTop] && obj.records[borderTop][i]) {\r\n                            obj.records[borderTop][i].classList.add('highlight-top');\r\n                        }\r\n                        // Bottom border\r\n                        if (obj.records[borderBottom] && obj.records[borderBottom][i]) {\r\n                            obj.records[borderBottom][i].classList.add('highlight-bottom');\r\n                        }\r\n                        // Add selected from headers\r\n                        obj.headers[i].classList.add('selected');\r\n                    }\r\n                }\r\n    \r\n                for (var j = borderTop; j <= borderBottom; j++) {\r\n                    if (obj.rows[j] && obj.rows[j].style.display != 'none') {\r\n                        // Left border\r\n                        obj.records[j][borderLeft].classList.add('highlight-left');\r\n                        // Right border\r\n                        obj.records[j][borderRight].classList.add('highlight-right');\r\n                        // Add selected from rows\r\n                        obj.rows[j].classList.add('selected');\r\n                    }\r\n                }\r\n    \r\n                obj.selectedContainer = [ borderLeft, borderTop, borderRight, borderBottom ];\r\n            }\r\n    \r\n            // Handle events\r\n            if (previousState == 0) {\r\n                obj.dispatch('onfocus', el);\r\n\r\n                obj.removeCopyingSelection();\r\n            }\r\n\r\n            obj.dispatch('onselection', el, borderLeft, borderTop, borderRight, borderBottom, origin);\r\n\r\n            // Find corner cell\r\n            obj.updateCornerPosition();\r\n        }\r\n    \r\n        /**\r\n         * Remove copy selection\r\n         * \r\n         * @return void\r\n         */\r\n        obj.removeCopySelection = function() {\r\n            // Remove current selection\r\n            for (var i = 0; i < obj.selection.length; i++) {\r\n                obj.selection[i].classList.remove('selection');\r\n                obj.selection[i].classList.remove('selection-left');\r\n                obj.selection[i].classList.remove('selection-right');\r\n                obj.selection[i].classList.remove('selection-top');\r\n                obj.selection[i].classList.remove('selection-bottom');\r\n            }\r\n    \r\n            obj.selection = [];\r\n        }\r\n    \r\n        /**\r\n         * Update copy selection\r\n         * \r\n         * @param int x, y\r\n         * @return void\r\n         */\r\n        obj.updateCopySelection = function(x3, y3) {\r\n            // Remove selection\r\n            obj.removeCopySelection();\r\n    \r\n            // Get elements first and last\r\n            var x1 = obj.selectedContainer[0];\r\n            var y1 = obj.selectedContainer[1];\r\n            var x2 = obj.selectedContainer[2];\r\n            var y2 = obj.selectedContainer[3];\r\n    \r\n            if (x3 != null && y3 != null) {\r\n                if (x3 - x2 > 0) {\r\n                    var px = parseInt(x2) + 1;\r\n                    var ux = parseInt(x3);\r\n                } else {\r\n                    var px = parseInt(x3);\r\n                    var ux = parseInt(x1) - 1;\r\n                }\r\n    \r\n                if (y3 - y2 > 0) {\r\n                    var py = parseInt(y2) + 1;\r\n                    var uy = parseInt(y3);\r\n                } else {\r\n                    var py = parseInt(y3);\r\n                    var uy = parseInt(y1) - 1;\r\n                }\r\n    \r\n                if (ux - px <= uy - py) {\r\n                    var px = parseInt(x1);\r\n                    var ux = parseInt(x2);\r\n                } else {\r\n                    var py = parseInt(y1);\r\n                    var uy = parseInt(y2);\r\n                }\r\n    \r\n                for (var j = py; j <= uy; j++) {\r\n                    for (var i = px; i <= ux; i++) {\r\n                        if (obj.records[j][i] && obj.rows[j].style.display != 'none' && obj.records[j][i].style.display != 'none') {\r\n                            obj.records[j][i].classList.add('selection');\r\n                            obj.records[py][i].classList.add('selection-top');\r\n                            obj.records[uy][i].classList.add('selection-bottom');\r\n                            obj.records[j][px].classList.add('selection-left');\r\n                            obj.records[j][ux].classList.add('selection-right');\r\n    \r\n                            // Persist selected elements\r\n                            obj.selection.push(obj.records[j][i]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Update corner position\r\n         * \r\n         * @return void\r\n         */\r\n        obj.updateCornerPosition = function() {\r\n            // If any selected cells\r\n            if (! obj.highlighted.length) {\r\n                obj.corner.style.top = '-2000px';\r\n                obj.corner.style.left = '-2000px';\r\n            } else {\r\n                // Get last cell\r\n                var last = obj.highlighted[obj.highlighted.length-1];\r\n\r\n                var contentRect = obj.content.getBoundingClientRect();\r\n                var x1 = contentRect.left;\r\n                var y1 = contentRect.top;\r\n\r\n                var lastRect = last.getBoundingClientRect();\r\n                var x2 = lastRect.left;\r\n                var y2 = lastRect.top;\r\n                var w2 = lastRect.width;\r\n                var h2 = lastRect.height;\r\n\r\n                var x = (x2 - x1) + obj.content.scrollLeft + w2 - 4;\r\n                var y = (y2 - y1) + obj.content.scrollTop + h2 - 4;\r\n\r\n                // Place the corner in the correct place\r\n                obj.corner.style.top = y + 'px';\r\n                obj.corner.style.left = x + 'px';\r\n\r\n                if (obj.options.freezeColumns) {\r\n                    var width = obj.getFreezeWidth();\r\n                    if (x2 - x1 + w2 < width) {\r\n                        obj.corner.style.display = 'none';\r\n                    } else {\r\n                        if (obj.options.selectionCopy == true) {\r\n                            obj.corner.style.display = '';\r\n                        }\r\n                    }\r\n                } else {\r\n                    if (obj.options.selectionCopy == true) {\r\n                        obj.corner.style.display = '';\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Update scroll position based on the selection\r\n         */\r\n        obj.updateScroll = function(direction) {\r\n            // jExcel Container information\r\n            var contentRect = obj.content.getBoundingClientRect();\r\n            var x1 = contentRect.left;\r\n            var y1 = contentRect.top;\r\n            var w1 = contentRect.width;\r\n            var h1 = contentRect.height;\r\n\r\n            // Direction Left or Up\r\n            var reference = obj.records[obj.selectedCell[3]][obj.selectedCell[2]];\r\n    \r\n            // Reference\r\n            var referenceRect = reference.getBoundingClientRect();\r\n            var x2 = referenceRect.left;\r\n            var y2 = referenceRect.top;\r\n            var w2 = referenceRect.width;\r\n            var h2 = referenceRect.height;\r\n    \r\n            // Direction\r\n            if (direction == 0 || direction == 1) {\r\n                var x = (x2 - x1) + obj.content.scrollLeft;\r\n                var y = (y2 - y1) + obj.content.scrollTop - 2;\r\n            } else {\r\n                var x = (x2 - x1) + obj.content.scrollLeft + w2;\r\n                var y = (y2 - y1) + obj.content.scrollTop + h2;\r\n            }\r\n    \r\n            // Top position check\r\n            if (y > (obj.content.scrollTop + 30) && y < (obj.content.scrollTop + h1)) {\r\n                // In the viewport\r\n            } else {\r\n                // Out of viewport\r\n                if (y < obj.content.scrollTop + 30) {\r\n                    obj.content.scrollTop = y - h2;\r\n                } else {\r\n                    obj.content.scrollTop = y - (h1 - 2);\r\n                }\r\n            }\r\n    \r\n            // Freeze columns? \r\n            var freezed = obj.getFreezeWidth();\r\n\r\n            // Left position check - TODO: change that to the bottom border of the element\r\n            if (x > (obj.content.scrollLeft + freezed) && x < (obj.content.scrollLeft + w1)) {\r\n                // In the viewport\r\n            } else {\r\n                // Out of viewport\r\n                if (x < obj.content.scrollLeft + 30) {\r\n                    obj.content.scrollLeft = x;\r\n                    if (obj.content.scrollLeft < 50) {\r\n                        obj.content.scrollLeft = 0;\r\n                    }\r\n                } else if (x < obj.content.scrollLeft + freezed) {\r\n                    obj.content.scrollLeft = x - freezed - 1;\r\n                } else {\r\n                    obj.content.scrollLeft = x - (w1 - 20);\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Get the column width\r\n         * \r\n         * @param int column column number (first column is: 0)\r\n         * @return int current width\r\n         */\r\n        obj.getWidth = function(column) {\r\n            if (! column) {\r\n                // Get all headers\r\n                var data = [];\r\n                for (var i = 0; i < obj.headers.length; i++) {\r\n                    data.push(obj.options.columns[i].width);\r\n                }\r\n            } else {\r\n                // In case the column is an object\r\n                if (typeof(column) == 'object') {\r\n                    column = $(column).getAttribute('data-x');\r\n                }\r\n    \r\n                data = obj.colgroup[column].getAttribute('width')\r\n            }\r\n    \r\n            return data;\r\n        }\r\n\r\n\r\n        /**\r\n         * Set the column width\r\n         * \r\n         * @param int column number (first column is: 0)\r\n         * @param int new column width\r\n         * @param int old column width\r\n         */\r\n        obj.setWidth = function (column, width, oldWidth) {\r\n            if (width) {\r\n                if (Array.isArray(column)) {\r\n                    // Oldwidth\r\n                    if (! oldWidth) {\r\n                        var oldWidth = [];\r\n                    }\r\n                    // Set width\r\n                    for (var i = 0; i < column.length; i++) {\r\n                        if (! oldWidth[i]) {\r\n                            oldWidth[i] = obj.colgroup[column[i]].getAttribute('width');\r\n                        }\r\n                        var w = Array.isArray(width) && width[i] ? width[i] : width;\r\n                        obj.colgroup[column[i]].setAttribute('width', w);\r\n                        obj.options.columns[column[i]].width = w;\r\n                    }\r\n                } else {\r\n                    // Oldwidth\r\n                    if (! oldWidth) {\r\n                        oldWidth = obj.colgroup[column].getAttribute('width');\r\n                    }\r\n                    // Set width\r\n                    obj.colgroup[column].setAttribute('width', width);\r\n                    obj.options.columns[column].width = width;\r\n                }\r\n\r\n                // Keeping history of changes\r\n                obj.setHistory({\r\n                    action:'setWidth',\r\n                    column:column,\r\n                    oldValue:oldWidth,\r\n                    newValue:width,\r\n                });\r\n\r\n                // On resize column\r\n                obj.dispatch('onresizecolumn', el, column, width, oldWidth);\r\n\r\n                // Update corner position\r\n                obj.updateCornerPosition();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Set the row height\r\n         * \r\n         * @param row - row number (first row is: 0)\r\n         * @param height - new row height\r\n         * @param oldHeight - old row height\r\n         */\r\n        obj.setHeight = function (row, height, oldHeight) {\r\n            if (height > 0) {\r\n                // In case the column is an object\r\n                if (typeof(row) == 'object') {\r\n                    row = row.getAttribute('data-y');\r\n                }\r\n    \r\n                // Oldwidth\r\n                if (! oldHeight) {\r\n                    oldHeight = obj.rows[row].getAttribute('height');\r\n\r\n                    if (! oldHeight) {\r\n                        var rect = obj.rows[row].getBoundingClientRect();\r\n                        oldHeight = rect.height;\r\n                    }\r\n                }\r\n\r\n                // Integer\r\n                height = parseInt(height);\r\n\r\n                // Set width\r\n                obj.rows[row].style.height = height + 'px';\r\n    \r\n                // Keep options updated\r\n                if (! obj.options.rows[row]) {\r\n                    obj.options.rows[row] = {};\r\n                }\r\n                obj.options.rows[row].height = height;\r\n    \r\n                // Keeping history of changes\r\n                obj.setHistory({\r\n                    action:'setHeight',\r\n                    row:row,\r\n                    oldValue:oldHeight,\r\n                    newValue:height,\r\n                });\r\n\r\n                // On resize column\r\n                obj.dispatch('onresizerow', el, row, height, oldHeight);\r\n\r\n                // Update corner position\r\n                obj.updateCornerPosition();\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Get the row height\r\n         * \r\n         * @param row - row number (first row is: 0)\r\n         * @return height - current row height\r\n         */\r\n        obj.getHeight = function(row) {\r\n            if (! row) {\r\n                // Get height of all rows\r\n                var data = [];\r\n                for (var j = 0; j < obj.rows.length; j++) {\r\n                    var h = obj.rows[j].style.height;\r\n                    if (h) {\r\n                        data[j] = h;\r\n                    }\r\n                }\r\n            } else {\r\n                // In case the row is an object\r\n                if (typeof(row) == 'object') {\r\n                    row = $(row).getAttribute('data-y');\r\n                }\r\n    \r\n                var data = obj.rows[row].style.height;\r\n            }\r\n    \r\n            return data;\r\n        }\r\n    \r\n        obj.setFooter = function(data) {\r\n            if (data) {\r\n                obj.options.footers = data;\r\n            }\r\n\r\n            if (obj.options.footers) {\r\n                if (! obj.tfoot) {\r\n                    obj.tfoot = document.createElement('tfoot');\r\n                    obj.table.appendChild(obj.tfoot);\r\n                } \r\n\r\n                for (var j = 0; j < obj.options.footers.length; j++) {\r\n                    if (obj.tfoot.children[j]) {\r\n                        var tr = obj.tfoot.children[j];\r\n                    } else {\r\n                        var tr = document.createElement('tr');\r\n                        var td = document.createElement('td');\r\n                        tr.appendChild(td);\r\n                        obj.tfoot.appendChild(tr);\r\n                    }\r\n                    for (var i = 0; i < obj.headers.length; i++) {\r\n                        if (! obj.options.footers[j][i]) {\r\n                            obj.options.footers[j][i] = '';\r\n                        }\r\n                        if (obj.tfoot.children[j].children[i+1]) {\r\n                            var td = obj.tfoot.children[j].children[i+1];\r\n                        } else {\r\n                            var td = document.createElement('td');\r\n                            tr.appendChild(td);\r\n\r\n                            // Text align\r\n                            var colAlign = obj.options.columns[i].align ? obj.options.columns[i].align : 'center';\r\n                            td.style.textAlign = colAlign;\r\n                        }\r\n                        td.innerText = obj.parseValue(i, j, obj.options.footers[j][i]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get the column title\r\n         * \r\n         * @param column - column number (first column is: 0)\r\n         * @param title - new column title\r\n         */\r\n        obj.getHeader = function(column) {\r\n            return obj.headers[column].innerText;\r\n        }\r\n    \r\n        /**\r\n         * Set the column title\r\n         * \r\n         * @param column - column number (first column is: 0)\r\n         * @param title - new column title\r\n         */\r\n        obj.setHeader = function(column, newValue) {\r\n            if (obj.headers[column]) {\r\n                var oldValue = obj.headers[column].innerText;\r\n    \r\n                if (! newValue) {\r\n                    newValue = prompt(obj.options.text.columnName, oldValue)\r\n                }\r\n    \r\n                if (newValue) {\r\n                    obj.headers[column].innerText = newValue;\r\n                    // Keep the title property\r\n                    obj.headers[column].setAttribute('title', newValue);\r\n                    // Update title\r\n                    obj.options.columns[column].title = newValue;\r\n                }\r\n    \r\n                obj.setHistory({\r\n                    action: 'setHeader',\r\n                    column: column,\r\n                    oldValue: oldValue,\r\n                    newValue: newValue\r\n                });\r\n    \r\n                // On onchange header\r\n                obj.dispatch('onchangeheader', el, column, oldValue, newValue);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Get the headers\r\n         * \r\n         * @param asArray\r\n         * @return mixed\r\n         */\r\n        obj.getHeaders = function (asArray) {\r\n            var title = [];\r\n    \r\n            for (var i = 0; i < obj.headers.length; i++) {\r\n                title.push(obj.getHeader(i));\r\n            }\r\n    \r\n            return asArray ? title : title.join(obj.options.csvDelimiter);\r\n        }\r\n    \r\n        /**\r\n         * Get meta information from cell(s)\r\n         * \r\n         * @return integer\r\n         */\r\n        obj.getMeta = function(cell, key) {\r\n            if (! cell) {\r\n                return obj.options.meta;\r\n            } else {\r\n                if (key) {\r\n                    return obj.options.meta[cell] && obj.options.meta[cell][key] ? obj.options.meta[cell][key] : null;\r\n                } else {\r\n                    return obj.options.meta[cell] ? obj.options.meta[cell] : null;\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Set meta information to cell(s)\r\n         * \r\n         * @return integer\r\n         */\r\n        obj.setMeta = function(o, k, v) {\r\n            if (! obj.options.meta) {\r\n                obj.options.meta = {}\r\n            }\r\n    \r\n            if (k && v) {\r\n                // Set data value\r\n                if (! obj.options.meta[o]) {\r\n                    obj.options.meta[o] = {};\r\n                }\r\n                obj.options.meta[o][k] = v;\r\n            } else {\r\n                // Apply that for all cells\r\n                var keys = Object.keys(o);\r\n                for (var i = 0; i < keys.length; i++) {\r\n                    if (! obj.options.meta[keys[i]]) {\r\n                        obj.options.meta[keys[i]] = {};\r\n                    }\r\n    \r\n                    var prop = Object.keys(o[keys[i]]);\r\n                    for (var j = 0; j < prop.length; j++) {\r\n                        obj.options.meta[keys[i]][prop[j]] = o[keys[i]][prop[j]];\r\n                    }\r\n                }\r\n            }\r\n    \r\n            obj.dispatch('onchangemeta', el, o, k, v);\r\n        }\r\n    \r\n        /**\r\n         * Update meta information\r\n         * \r\n         * @return integer\r\n         */\r\n        obj.updateMeta = function(affectedCells) {\r\n            if (obj.options.meta) {\r\n                var newMeta = {};\r\n                var keys = Object.keys(obj.options.meta);\r\n                for (var i = 0; i < keys.length; i++) {\r\n                    if (affectedCells[keys[i]]) {\r\n                        newMeta[affectedCells[keys[i]]] = obj.options.meta[keys[i]];\r\n                    } else {\r\n                        newMeta[keys[i]] = obj.options.meta[keys[i]];\r\n                    }\r\n                }\r\n                // Update meta information\r\n                obj.options.meta = newMeta;\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Get style information from cell(s)\r\n         * \r\n         * @return integer\r\n         */\r\n        obj.getStyle = function(cell, key) {\r\n            // Cell\r\n            if (! cell) {\r\n                // Control vars\r\n                var data = {};\r\n    \r\n                // Column and row length\r\n                var x = obj.options.data[0].length;\r\n                var y = obj.options.data.length;\r\n    \r\n                // Go through the columns to get the data\r\n                for (var j = 0; j < y; j++) {\r\n                    for (var i = 0; i < x; i++) {\r\n                        // Value\r\n                        var v = key ? obj.records[j][i].style[key] : obj.records[j][i].getAttribute('style');\r\n    \r\n                        // Any meta data for this column?\r\n                        if (v) {\r\n                            // Column name\r\n                            var k = jexcel.getColumnNameFromId([i, j]);\r\n                            // Value\r\n                            data[k] = v;\r\n                        }\r\n                    }\r\n                }\r\n    \r\n               return data;\r\n            } else {\r\n                cell = jexcel.getIdFromColumnName(cell, true);\r\n    \r\n                return key ? obj.records[cell[1]][cell[0]].style[key] : obj.records[cell[1]][cell[0]].getAttribute('style');\r\n            }\r\n        },\r\n    \r\n        obj.resetStyle = function(o, ignoreHistoryAndEvents) {\r\n            var keys = Object.keys(o);\r\n            for (var i = 0; i < keys.length; i++) {\r\n                // Position\r\n                var cell = jexcel.getIdFromColumnName(keys[i], true);\r\n                if (obj.records[cell[1]] && obj.records[cell[1]][cell[0]]) {\r\n                    obj.records[cell[1]][cell[0]].setAttribute('style', '');\r\n                }\r\n            }\r\n            obj.setStyle(o, null, null, null, ignoreHistoryAndEvents);\r\n        }\r\n    \r\n        /**\r\n         * Set meta information to cell(s)\r\n         * \r\n         * @return integer\r\n         */\r\n        obj.setStyle = function(o, k, v, force, ignoreHistoryAndEvents) {\r\n            var newValue = {};\r\n            var oldValue = {};\r\n    \r\n            // Apply style\r\n            var applyStyle = function(cellId, key, value) {\r\n                // Position\r\n                var cell = jexcel.getIdFromColumnName(cellId, true);\r\n    \r\n                if (obj.records[cell[1]] && obj.records[cell[1]][cell[0]] && (obj.records[cell[1]][cell[0]].classList.contains('readonly')==false || force)) {\r\n                    // Current value\r\n                    var currentValue = obj.records[cell[1]][cell[0]].style[key];\r\n    \r\n                    // Change layout\r\n                    if (currentValue == value && ! force) {\r\n                        value = '';\r\n                        obj.records[cell[1]][cell[0]].style[key] = '';\r\n                    } else {\r\n                        obj.records[cell[1]][cell[0]].style[key] = value;\r\n                    }\r\n    \r\n                    // History\r\n                    if (! oldValue[cellId]) {\r\n                        oldValue[cellId] = [];\r\n                    }\r\n                    if (! newValue[cellId]) {\r\n                        newValue[cellId] = [];\r\n                    }\r\n    \r\n                    oldValue[cellId].push([key + ':' + currentValue]);\r\n                    newValue[cellId].push([key + ':' + value]);\r\n                }\r\n            }\r\n    \r\n            if (k && v) {\r\n                // Get object from string\r\n                if (typeof(o) == 'string') {\r\n                    applyStyle(o, k, v);\r\n                } else {\r\n                    // Avoid duplications\r\n                    var oneApplication = [];\r\n                    // Apply that for all cells\r\n                    for (var i = 0; i < o.length; i++) {\r\n                        var x = o[i].getAttribute('data-x');\r\n                        var y = o[i].getAttribute('data-y');\r\n                        var cellName = jexcel.getColumnNameFromId([x, y]);\r\n                        // This happens when is a merged cell\r\n                        if (! oneApplication[cellName]) {\r\n                            applyStyle(cellName, k, v);\r\n                            oneApplication[cellName] = true;\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                var keys = Object.keys(o);\r\n                for (var i = 0; i < keys.length; i++) {\r\n                    var style = o[keys[i]];\r\n                    if (typeof(style) == 'string') {\r\n                        style = style.split(';');\r\n                    }\r\n                    for (var j = 0; j < style.length; j++) {\r\n                        if (typeof(style[j]) == 'string') {\r\n                            style[j] = style[j].split(':');\r\n                        }\r\n                        // Apply value\r\n                        if (style[j][0].trim()) {\r\n                            applyStyle(keys[i], style[j][0].trim(), style[j][1]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            var keys = Object.keys(oldValue);\r\n            for (var i = 0; i < keys.length; i++) {\r\n                oldValue[keys[i]] = oldValue[keys[i]].join(';');\r\n            }\r\n            var keys = Object.keys(newValue);\r\n            for (var i = 0; i < keys.length; i++) {\r\n                newValue[keys[i]] = newValue[keys[i]].join(';');\r\n            }\r\n    \r\n            if (! ignoreHistoryAndEvents) {\r\n                // Keeping history of changes\r\n                obj.setHistory({\r\n                    action: 'setStyle',\r\n                    oldValue: oldValue,\r\n                    newValue: newValue,\r\n                });\r\n            }\r\n\r\n            obj.dispatch('onchangestyle', el, o, k, v);\r\n        }\r\n\r\n        /**\r\n         * Get cell comments, null cell for all\r\n         */\r\n        obj.getComments = function(cell, withAuthor) {\r\n            if (cell) {\r\n                if (typeof(cell) == 'string') {\r\n                    var cell = jexcel.getIdFromColumnName(cell, true);\r\n                }\r\n\r\n                if (withAuthor) {\r\n                    return [obj.records[cell[1]][cell[0]].getAttribute('title'), obj.records[cell[1]][cell[0]].getAttribute('author')];\r\n                } else {\r\n                    return obj.records[cell[1]][cell[0]].getAttribute('title') || '';\r\n                }\r\n            } else {\r\n                var data = {};\r\n                for (var j = 0; j < obj.options.data.length; j++) {\r\n                    for (var i = 0; i < obj.options.columns.length; i++) {\r\n                        var comments = obj.records[j][i].getAttribute('title');\r\n                        if (comments) {\r\n                            var cell = jexcel.getColumnNameFromId([i, j]);\r\n                            data[cell] = comments;\r\n                        }\r\n                    }\r\n                }\r\n                return data;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Set cell comments\r\n         */\r\n        obj.setComments = function(cellId, comments, author) {\r\n            if (typeof(cellId) == 'string') {\r\n                var cell = jexcel.getIdFromColumnName(cellId, true);\r\n            } else {\r\n                var cell = cellId;\r\n            }\r\n    \r\n            // Keep old value\r\n            var title = obj.records[cell[1]][cell[0]].getAttribute('title');\r\n            var author = obj.records[cell[1]][cell[0]].getAttribute('data-author');\r\n            var oldValue = [ title, author ];\r\n    \r\n            // Set new values\r\n            obj.records[cell[1]][cell[0]].setAttribute('title', comments ? comments : '');\r\n            obj.records[cell[1]][cell[0]].setAttribute('data-author', author ? author : '');\r\n    \r\n            // Remove class if there is no comment\r\n            if (comments) {\r\n                obj.records[cell[1]][cell[0]].classList.add('jexcel_comments');\r\n            } else {\r\n                obj.records[cell[1]][cell[0]].classList.remove('jexcel_comments');\r\n            }\r\n    \r\n            // Save history\r\n            obj.setHistory({\r\n                action:'setComments',\r\n                column: cellId,\r\n                newValue: [ comments, author ],\r\n                oldValue: oldValue,\r\n            });\r\n            // Set comments\r\n            obj.dispatch('oncomments', el, comments, title);\r\n        }\r\n    \r\n        /**\r\n         * Get table config information\r\n         */\r\n        obj.getConfig = function() {\r\n            var options = obj.options;\r\n            options.style = obj.getStyle();\r\n            options.mergeCells = obj.getMerge();\r\n            options.comments = obj.getComments();\r\n    \r\n            return options;\r\n        }\r\n    \r\n        /**\r\n         * Sort data and reload table\r\n         */\r\n        obj.orderBy = function(column, order) {\r\n            if (column >= 0) {\r\n                // Merged cells\r\n                if (Object.keys(obj.options.mergeCells).length > 0) {\r\n                    if (! confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure)) {\r\n                        return false;\r\n                    } else {\r\n                        // Remove merged cells\r\n                        obj.destroyMerged();\r\n                    }\r\n                }\r\n    \r\n                // Direction\r\n                if (order == null) {\r\n                    order = obj.headers[column].classList.contains('arrow-down') ? 1 : 0;\r\n                } else {\r\n                    order = order ? 1 : 0;\r\n                }\r\n    \r\n                // Test order\r\n                var temp = [];\r\n                if (obj.options.columns[column].type == 'number' || obj.options.columns[column].type == 'percentage' || obj.options.columns[column].type == 'autonumber' || obj.options.columns[column].type == 'color') {\r\n                    for (var j = 0; j < obj.options.data.length; j++) {\r\n                        temp[j] = [ j, Number(obj.options.data[j][column]) ];\r\n                    }\r\n                } else if (obj.options.columns[column].type == 'calendar' || obj.options.columns[column].type == 'checkbox' || obj.options.columns[column].type == 'radio') {\r\n                    for (var j = 0; j < obj.options.data.length; j++) {\r\n                        temp[j] = [ j, obj.options.data[j][column] ];\r\n                    }\r\n                } else {\r\n                    for (var j = 0; j < obj.options.data.length; j++) {\r\n                        temp[j] = [ j, obj.records[j][column].innerText.toLowerCase() ];\r\n                    }\r\n                }\r\n    \r\n                // Default sorting method\r\n                if (typeof(obj.options.sorting) !== 'function') {\r\n                    obj.options.sorting = function(direction) {\r\n                        return function(a, b) {\r\n                            var valueA = a[1];\r\n                            var valueB = b[1];\r\n\r\n                            if (! direction) {\r\n                                return (valueA === '' && valueB !== '') ? 1 : (valueA !== '' && valueB === '') ? -1 : (valueA > valueB) ? 1 : (valueA < valueB) ? -1 :  0;\r\n                            } else {\r\n                                return (valueA === '' && valueB !== '') ? 1 : (valueA !== '' && valueB === '') ? -1 : (valueA > valueB) ? -1 : (valueA < valueB) ? 1 :  0;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                temp = temp.sort(obj.options.sorting(order));\r\n    \r\n                // Save history\r\n                var newValue = [];\r\n                for (var j = 0; j < temp.length; j++) {\r\n                    newValue[j] = temp[j][0];\r\n                }\r\n    \r\n                // Save history\r\n                obj.setHistory({\r\n                    action: 'orderBy',\r\n                    rows: newValue,\r\n                    column: column,\r\n                    order: order,\r\n                });\r\n    \r\n                // Update order\r\n                obj.updateOrderArrow(column, order);\r\n                obj.updateOrder(newValue);\r\n    \r\n                // On sort event\r\n                obj.dispatch('onsort', el, column, order);\r\n    \r\n                return true;\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Update order arrow\r\n         */\r\n        obj.updateOrderArrow = function(column, order) {\r\n            // Remove order\r\n            for (var i = 0; i < obj.headers.length; i++) {\r\n                obj.headers[i].classList.remove('arrow-up');\r\n                obj.headers[i].classList.remove('arrow-down');\r\n            }\r\n    \r\n            // No order specified then toggle order\r\n            if (order) {\r\n                obj.headers[column].classList.add('arrow-up');\r\n            } else {\r\n                obj.headers[column].classList.add('arrow-down');\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Update rows position\r\n         */\r\n        obj.updateOrder = function(rows) {\r\n            // History\r\n            var data = []\r\n            for (var j = 0; j < rows.length; j++) {\r\n                data[j] = obj.options.data[rows[j]];\r\n            }\r\n            obj.options.data = data;\r\n    \r\n            var data = []\r\n            for (var j = 0; j < rows.length; j++) {\r\n                data[j] = obj.records[rows[j]];\r\n            }\r\n            obj.records = data;\r\n    \r\n            var data = []\r\n            for (var j = 0; j < rows.length; j++) {\r\n                data[j] = obj.rows[rows[j]];\r\n            }\r\n            obj.rows = data;\r\n    \r\n            // Update references\r\n            obj.updateTableReferences();\r\n    \r\n            // Redo search\r\n            if (obj.results && obj.results.length) {\r\n                if (obj.searchInput.value) {\r\n                    obj.search(obj.searchInput.value);\r\n                } else {\r\n                    obj.closeFilter();\r\n                }\r\n            } else {\r\n                // Create page\r\n                obj.results = null;\r\n                obj.pageNumber = 0;\r\n    \r\n                if (obj.options.pagination > 0) {\r\n                    obj.page(0);\r\n                } else if (obj.options.lazyLoading == true) {\r\n                    obj.loadPage(0);\r\n                } else {\r\n                    for (var j = 0; j < obj.rows.length; j++) {\r\n                        obj.tbody.appendChild(obj.rows[j]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Move row\r\n         * \r\n         * @return void\r\n         */\r\n        obj.moveRow = function(o, d, ignoreDom) {\r\n            if (Object.keys(obj.options.mergeCells).length > 0) {\r\n                if (o > d) {\r\n                    var insertBefore = 1;\r\n                } else {\r\n                    var insertBefore = 0;\r\n                }\r\n\r\n                if (obj.isRowMerged(o).length || obj.isRowMerged(d, insertBefore).length) {\r\n                    if (! confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure)) {\r\n                        return false;\r\n                    } else {\r\n                        obj.destroyMerged();\r\n                    }\r\n                }\r\n            }\r\n    \r\n            if (obj.options.search == true) {\r\n                if (obj.results && obj.results.length != obj.rows.length) {\r\n                    if (confirm(obj.options.text.thisActionWillClearYourSearchResultsAreYouSure)) {\r\n                        obj.resetSearch();\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                }\r\n    \r\n                obj.results = null;\r\n            }\r\n    \r\n            if (! ignoreDom) {\r\n                if (Array.prototype.indexOf.call(obj.tbody.children, obj.rows[d]) >= 0) {\r\n                    if (o > d) {\r\n                        obj.tbody.insertBefore(obj.rows[o], obj.rows[d]);\r\n                    } else {\r\n                        obj.tbody.insertBefore(obj.rows[o], obj.rows[d].nextSibling);\r\n                    }\r\n                } else {\r\n                    obj.tbody.removeChild(obj.rows[o]);\r\n                }\r\n            }\r\n    \r\n            // Place references in the correct position\r\n            obj.rows.splice(d, 0, obj.rows.splice(o, 1)[0]);\r\n            obj.records.splice(d, 0, obj.records.splice(o, 1)[0]);\r\n            obj.options.data.splice(d, 0, obj.options.data.splice(o, 1)[0]);\r\n    \r\n            // Respect pagination\r\n            if (obj.options.pagination > 0 && obj.tbody.children.length != obj.options.pagination) {\r\n                obj.page(obj.pageNumber);\r\n            }\r\n    \r\n            // Keeping history of changes\r\n            obj.setHistory({\r\n                action:'moveRow',\r\n                oldValue: o,\r\n                newValue: d,\r\n            });\r\n    \r\n            // Update table references\r\n            obj.updateTableReferences();\r\n    \r\n            // Events\r\n            obj.dispatch('onmoverow', el, o, d);\r\n        }\r\n\r\n        /**\r\n         * Insert a new row\r\n         * \r\n         * @param mixed - number of blank lines to be insert or a single array with the data of the new row\r\n         * @param rowNumber\r\n         * @param insertBefore\r\n         * @return void\r\n         */\r\n        obj.insertRow = function(mixed, rowNumber, insertBefore) {\r\n            // Configuration\r\n            if (obj.options.allowInsertRow == true) {\r\n                // Records\r\n                var records = [];\r\n    \r\n                // Data to be insert\r\n                var data = [];\r\n    \r\n                // The insert could be lead by number of rows or the array of data\r\n                if (mixed > 0) {\r\n                    var numOfRows = mixed;\r\n                } else {\r\n                    var numOfRows = 1;\r\n    \r\n                    if (mixed) {\r\n                        data = mixed;\r\n                    }\r\n                }\r\n    \r\n                // Direction\r\n                var insertBefore = insertBefore ? true : false;\r\n    \r\n                // Current column number\r\n                var lastRow = obj.options.data.length - 1;\r\n    \r\n                if (rowNumber == undefined || rowNumber >= parseInt(lastRow) || rowNumber < 0) {\r\n                    rowNumber = lastRow;\r\n                }\r\n    \r\n                // Onbeforeinsertrow\r\n                if (obj.dispatch('onbeforeinsertrow', el, rowNumber, numOfRows, insertBefore) === false) {\r\n                    console.log('onbeforeinsertrow returned false');\r\n\r\n                    return false;\r\n                }\r\n    \r\n                // Merged cells\r\n                if (Object.keys(obj.options.mergeCells).length > 0) {\r\n                    if (obj.isRowMerged(rowNumber, insertBefore).length) {\r\n                        if (! confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure)) {\r\n                            return false;\r\n                        } else {\r\n                            obj.destroyMerged();\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                // Clear any search\r\n                if (obj.options.search == true) {\r\n                    if (obj.results && obj.results.length != obj.rows.length) {\r\n                        if (confirm(obj.options.text.thisActionWillClearYourSearchResultsAreYouSure)) {\r\n                            obj.resetSearch();\r\n                        } else {\r\n                            return false;\r\n                        }\r\n                    }\r\n    \r\n                    obj.results = null;\r\n                }\r\n    \r\n                // Insertbefore\r\n                var rowIndex = (! insertBefore) ? rowNumber + 1 : rowNumber;\r\n\r\n                // Keep the current data\r\n                var currentRecords = obj.records.splice(rowIndex);\r\n                var currentData = obj.options.data.splice(rowIndex);\r\n                var currentRows = obj.rows.splice(rowIndex);\r\n    \r\n                // Adding lines\r\n                var rowRecords = [];\r\n                var rowData = [];\r\n                var rowNode = [];\r\n\r\n                for (var row = rowIndex; row < (numOfRows + rowIndex); row++) {\r\n                    // Push data to the data container\r\n                    obj.options.data[row] = [];\r\n                    for (var col = 0; col < obj.options.columns.length; col++) {\r\n                        obj.options.data[row][col]  = data[col] ? data[col] : '';\r\n                    }\r\n                    // Create row\r\n                    var tr = obj.createRow(row, obj.options.data[row]);\r\n                    // Append node\r\n                    if (currentRows[0]) {\r\n                        if (Array.prototype.indexOf.call(obj.tbody.children, currentRows[0]) >= 0) {\r\n                            obj.tbody.insertBefore(tr, currentRows[0]);\r\n                        }\r\n                    } else {\r\n                        if (Array.prototype.indexOf.call(obj.tbody.children, obj.rows[rowNumber]) >= 0) {\r\n                            obj.tbody.appendChild(tr);\r\n                        }\r\n                    }\r\n                    // Record History\r\n                    rowRecords.push(obj.records[row]);\r\n                    rowData.push(obj.options.data[row]);\r\n                    rowNode.push(tr);\r\n                }\r\n    \r\n                // Copy the data back to the main data\r\n                Array.prototype.push.apply(obj.records, currentRecords);\r\n                Array.prototype.push.apply(obj.options.data, currentData);\r\n                Array.prototype.push.apply(obj.rows, currentRows);\r\n    \r\n                // Respect pagination\r\n                if (obj.options.pagination > 0) {\r\n                    obj.page(obj.pageNumber);\r\n                }\r\n    \r\n                // Keep history\r\n                obj.setHistory({\r\n                    action: 'insertRow',\r\n                    rowNumber: rowNumber,\r\n                    numOfRows: numOfRows,\r\n                    insertBefore: insertBefore,\r\n                    rowRecords: rowRecords,\r\n                    rowData: rowData,\r\n                    rowNode: rowNode,\r\n                });\r\n    \r\n                // Remove table references\r\n                obj.updateTableReferences();\r\n    \r\n                // Events\r\n                obj.dispatch('oninsertrow', el, rowNumber, numOfRows, rowRecords, insertBefore);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Delete a row by number\r\n         * \r\n         * @param integer rowNumber - row number to be excluded\r\n         * @param integer numOfRows - number of lines\r\n         * @return void\r\n         */\r\n        obj.deleteRow = function(rowNumber, numOfRows) {\r\n            // Global Configuration\r\n            if (obj.options.allowDeleteRow == true) {\r\n                if (obj.options.allowDeletingAllRows == true || obj.options.data.length > 1) {\r\n                    // Delete row definitions\r\n                    if (rowNumber == undefined) {\r\n                        var number = obj.getSelectedRows();\r\n    \r\n                        if (! number[0]) {\r\n                            rowNumber = obj.options.data.length - 1;\r\n                            numOfRows = 1;\r\n                        } else {\r\n                            rowNumber = parseInt(number[0].getAttribute('data-y'));\r\n                            numOfRows = number.length;\r\n                        }\r\n                    }\r\n    \r\n                    // Last column\r\n                    var lastRow = obj.options.data.length - 1;\r\n    \r\n                    if (rowNumber == undefined || rowNumber > lastRow || rowNumber < 0) {\r\n                        rowNumber = lastRow;\r\n                    }\r\n    \r\n                    if (! numOfRows) {\r\n                        numOfRows = 1;\r\n                    }\r\n    \r\n                    // Do not delete more than the number of recoreds\r\n                    if (rowNumber + numOfRows >= obj.options.data.length) {\r\n                        numOfRows = obj.options.data.length - rowNumber;\r\n                    }\r\n\r\n                    // Onbeforedeleterow\r\n                    if (obj.dispatch('onbeforedeleterow', el, rowNumber, numOfRows) === false) {\r\n                        console.log('onbeforedeleterow returned false');\r\n                        return false;\r\n                    }\r\n    \r\n                    if (parseInt(rowNumber) > -1) {\r\n                        // Merged cells\r\n                        var mergeExists = false;\r\n                        if (Object.keys(obj.options.mergeCells).length > 0) {\r\n                            for (var row = rowNumber; row < rowNumber + numOfRows; row++) {\r\n                                if (obj.isRowMerged(row, false).length) {\r\n                                    mergeExists = true;\r\n                                }\r\n                            }\r\n                        }\r\n                        if (mergeExists) {\r\n                            if (! confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure)) {\r\n                                return false;\r\n                            } else {\r\n                                obj.destroyMerged();\r\n                            }\r\n                        }\r\n    \r\n                        // Clear any search\r\n                        if (obj.options.search == true) {\r\n                            if (obj.results && obj.results.length != obj.rows.length) {\r\n                                if (confirm(obj.options.text.thisActionWillClearYourSearchResultsAreYouSure)) {\r\n                                    obj.resetSearch();\r\n                                } else {\r\n                                    return false;\r\n                                }\r\n                            }\r\n    \r\n                            obj.results = null;\r\n                        }\r\n    \r\n                        // If delete all rows, and set allowDeletingAllRows false, will stay one row\r\n                        if (obj.options.allowDeletingAllRows == false && lastRow + 1 === numOfRows) {\r\n                            numOfRows--;\r\n                            console.error('JEXCEL. It is not possible to delete the last row');\r\n                        }\r\n    \r\n                        // Remove node\r\n                        for (var row = rowNumber; row < rowNumber + numOfRows; row++) {\r\n                            if (Array.prototype.indexOf.call(obj.tbody.children, obj.rows[row]) >= 0) {\r\n                                obj.rows[row].className = '';\r\n                                obj.rows[row].parentNode.removeChild(obj.rows[row]);\r\n                            }\r\n                        }\r\n    \r\n                        // Remove data\r\n                        var rowRecords = obj.records.splice(rowNumber, numOfRows);\r\n                        var rowData = obj.options.data.splice(rowNumber, numOfRows);\r\n                        var rowNode = obj.rows.splice(rowNumber, numOfRows);\r\n    \r\n                        // Respect pagination\r\n                        if (obj.options.pagination > 0 && obj.tbody.children.length != obj.options.pagination) {\r\n                            obj.page(obj.pageNumber);\r\n                        }\r\n    \r\n                        // Remove selection\r\n                        obj.conditionalSelectionUpdate(1, rowNumber, (rowNumber + numOfRows) - 1);\r\n    \r\n                        // Keep history\r\n                        obj.setHistory({\r\n                            action: 'deleteRow',\r\n                            rowNumber: rowNumber,\r\n                            numOfRows: numOfRows,\r\n                            insertBefore: 1,\r\n                            rowRecords: rowRecords,\r\n                            rowData: rowData,\r\n                            rowNode: rowNode\r\n                        });\r\n    \r\n                        // Remove table references\r\n                        obj.updateTableReferences();\r\n    \r\n                        // Events\r\n                        obj.dispatch('ondeleterow', el, rowNumber, numOfRows, rowRecords);\r\n                    }\r\n                } else {\r\n                    console.error('JEXCEL. It is not possible to delete the last row');\r\n                }\r\n            }\r\n        }\r\n    \r\n    \r\n        /**\r\n         * Move column\r\n         * \r\n         * @return void\r\n         */\r\n        obj.moveColumn = function(o, d) {\r\n            if (Object.keys(obj.options.mergeCells).length > 0) {\r\n                if (o > d) {\r\n                    var insertBefore = 1;\r\n                } else {\r\n                    var insertBefore = 0;\r\n                }\r\n\r\n                if (obj.isColMerged(o).length || obj.isColMerged(d, insertBefore).length) {\r\n                    if (! confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure)) {\r\n                        return false;\r\n                    } else {\r\n                        obj.destroyMerged();\r\n                    }\r\n                }\r\n            }\r\n    \r\n            var o = parseInt(o);\r\n            var d = parseInt(d);\r\n    \r\n            if (o > d) {\r\n                obj.headerContainer.insertBefore(obj.headers[o], obj.headers[d]);\r\n                obj.colgroupContainer.insertBefore(obj.colgroup[o], obj.colgroup[d]);\r\n    \r\n                for (var j = 0; j < obj.rows.length; j++) {\r\n                    obj.rows[j].insertBefore(obj.records[j][o], obj.records[j][d]);\r\n                }\r\n            } else {\r\n                obj.headerContainer.insertBefore(obj.headers[o], obj.headers[d].nextSibling);\r\n                obj.colgroupContainer.insertBefore(obj.colgroup[o], obj.colgroup[d].nextSibling);\r\n    \r\n                for (var j = 0; j < obj.rows.length; j++) {\r\n                    obj.rows[j].insertBefore(obj.records[j][o], obj.records[j][d].nextSibling);\r\n                }\r\n            }\r\n    \r\n            obj.options.columns.splice(d, 0, obj.options.columns.splice(o, 1)[0]);\r\n            obj.headers.splice(d, 0, obj.headers.splice(o, 1)[0]);\r\n            obj.colgroup.splice(d, 0, obj.colgroup.splice(o, 1)[0]);\r\n    \r\n            for (var j = 0; j < obj.rows.length; j++) {\r\n                obj.options.data[j].splice(d, 0, obj.options.data[j].splice(o, 1)[0]);\r\n                obj.records[j].splice(d, 0, obj.records[j].splice(o, 1)[0]);\r\n            }\r\n    \r\n            // Update footers position\r\n            if (obj.options.footers) {\r\n                for (var j = 0; j < obj.options.footers.length; j++) {\r\n                    obj.options.footers[j].splice(d, 0, obj.options.footers[j].splice(o, 1)[0]);\r\n                }\r\n            }\r\n\r\n            // Keeping history of changes\r\n            obj.setHistory({\r\n                action:'moveColumn',\r\n                oldValue: o,\r\n                newValue: d,\r\n            });\r\n    \r\n            // Update table references\r\n            obj.updateTableReferences();\r\n    \r\n            // Events\r\n            obj.dispatch('onmovecolumn', el, o, d);\r\n        }\r\n\r\n        /**\r\n         * Insert a new column\r\n         * \r\n         * @param mixed - num of columns to be added or data to be added in one single column\r\n         * @param int columnNumber - number of columns to be created\r\n         * @param bool insertBefore\r\n         * @param object properties - column properties\r\n         * @return void\r\n         */\r\n        obj.insertColumn = function(mixed, columnNumber, insertBefore, properties) {\r\n            // Configuration\r\n            if (obj.options.allowInsertColumn == true) {\r\n                // Records\r\n                var records = [];\r\n    \r\n                // Data to be insert\r\n                var data = [];\r\n    \r\n                // The insert could be lead by number of rows or the array of data\r\n                if (mixed > 0) {\r\n                    var numOfColumns = mixed;\r\n                } else {\r\n                    var numOfColumns = 1;\r\n    \r\n                    if (mixed) {\r\n                        data = mixed;\r\n                    }\r\n                }\r\n    \r\n                // Direction\r\n                var insertBefore = insertBefore ? true : false;\r\n    \r\n                // Current column number\r\n                var lastColumn = obj.options.columns.length - 1;\r\n    \r\n                // Confirm position\r\n                if (columnNumber == undefined || columnNumber >= parseInt(lastColumn) || columnNumber < 0) {\r\n                    columnNumber = lastColumn;\r\n                }\r\n    \r\n                // Onbeforeinsertcolumn\r\n                if (obj.dispatch('onbeforeinsertcolumn', el, columnNumber, numOfColumns, insertBefore) === false) {\r\n                    console.log('onbeforeinsertcolumn returned false');\r\n\r\n                    return false;\r\n                }\r\n    \r\n                // Merged cells\r\n                if (Object.keys(obj.options.mergeCells).length > 0) {\r\n                    if (obj.isColMerged(columnNumber, insertBefore).length) {\r\n                        if (! confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure)) {\r\n                            return false;\r\n                        } else {\r\n                            obj.destroyMerged();\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                // Create default properties\r\n                if (! properties) {\r\n                    properties = [];\r\n                }\r\n    \r\n                for (var i = 0; i < numOfColumns; i++) {\r\n                    if (! properties[i]) {\r\n                        properties[i] = { type:'text', source:[], options:[], width:obj.options.defaultColWidth, align:obj.options.defaultColAlign };\r\n                    }\r\n                }\r\n    \r\n                // Insert before\r\n                var columnIndex = (! insertBefore) ? columnNumber + 1 : columnNumber;\r\n                obj.options.columns = jexcel.injectArray(obj.options.columns, columnIndex, properties);\r\n    \r\n                // Open space in the containers\r\n                var currentHeaders = obj.headers.splice(columnIndex);\r\n                var currentColgroup = obj.colgroup.splice(columnIndex);\r\n    \r\n                // History\r\n                var historyHeaders = [];\r\n                var historyColgroup = [];\r\n                var historyRecords = [];\r\n                var historyData = [];\r\n                var historyFooters = [];\r\n    \r\n                // Add new headers\r\n                for (var col = columnIndex; col < (numOfColumns + columnIndex); col++) {\r\n                    obj.createCellHeader(col);\r\n                    obj.headerContainer.insertBefore(obj.headers[col], obj.headerContainer.children[col+1]);\r\n                    obj.colgroupContainer.insertBefore(obj.colgroup[col], obj.colgroupContainer.children[col+1]);\r\n    \r\n                    historyHeaders.push(obj.headers[col]);\r\n                    historyColgroup.push(obj.colgroup[col]);\r\n                }\r\n    \r\n                // Add new footer cells\r\n                if (obj.options.footers) {\r\n                    for (var j = 0; j < obj.options.footers.length; j++) {\r\n                        historyFooters[j] = [];\r\n                        for (var i = 0; i < numOfColumns; i++) {\r\n                            historyFooters[j].push('');\r\n                        }\r\n                        obj.options.footers[j].splice(columnIndex, 0, historyFooters[j]);\r\n                    }\r\n                }\r\n\r\n                // Adding visual columns\r\n                for (var row = 0; row < obj.options.data.length; row++) {\r\n                    // Keep the current data\r\n                    var currentData = obj.options.data[row].splice(columnIndex);\r\n                    var currentRecord = obj.records[row].splice(columnIndex);\r\n    \r\n                    // History\r\n                    historyData[row] = [];\r\n                    historyRecords[row] = [];\r\n    \r\n                    for (var col = columnIndex; col < (numOfColumns + columnIndex); col++) {\r\n                        // New value\r\n                        var value = data[row] ? data[row] : '';\r\n                        obj.options.data[row][col] = value;\r\n                        // New cell\r\n                        var td = obj.createCell(col, row, obj.options.data[row][col]);\r\n                        obj.records[row][col] = td;\r\n                        // Add cell to the row\r\n                        if (obj.rows[row]) {\r\n                            obj.rows[row].insertBefore(td, obj.rows[row].children[col+1]);\r\n                        }\r\n    \r\n                        // Record History\r\n                        historyData[row].push(value);\r\n                        historyRecords[row].push(td);\r\n                    }\r\n    \r\n                    // Copy the data back to the main data\r\n                    Array.prototype.push.apply(obj.options.data[row], currentData);\r\n                    Array.prototype.push.apply(obj.records[row], currentRecord);\r\n                }\r\n    \r\n                Array.prototype.push.apply(obj.headers, currentHeaders);\r\n                Array.prototype.push.apply(obj.colgroup, currentColgroup);\r\n    \r\n                // Adjust nested headers\r\n                if (obj.options.nestedHeaders && obj.options.nestedHeaders.length > 0) {\r\n                    // Flexible way to handle nestedheaders\r\n                    if (obj.options.nestedHeaders[0] && obj.options.nestedHeaders[0][0]) {\r\n                        for (var j = 0; j < obj.options.nestedHeaders.length; j++) {\r\n                            var colspan = parseInt(obj.options.nestedHeaders[j][obj.options.nestedHeaders[j].length-1].colspan) + numOfColumns;\r\n                            obj.options.nestedHeaders[j][obj.options.nestedHeaders[j].length-1].colspan = colspan;\r\n                            obj.thead.children[j].children[obj.thead.children[j].children.length-1].setAttribute('colspan', colspan);\r\n                            var o = obj.thead.children[j].children[obj.thead.children[j].children.length-1].getAttribute('data-column');\r\n                            o = o.split(',');\r\n                            for (var col = columnIndex; col < (numOfColumns + columnIndex); col++) {\r\n                                o.push(col);\r\n                            }\r\n                            obj.thead.children[j].children[obj.thead.children[j].children.length-1].setAttribute('data-column', o);\r\n                        }\r\n                    } else {\r\n                        var colspan = parseInt(obj.options.nestedHeaders[0].colspan) + numOfColumns;\r\n                        obj.options.nestedHeaders[0].colspan = colspan;\r\n                        obj.thead.children[0].children[obj.thead.children[0].children.length-1].setAttribute('colspan', colspan);\r\n                    }\r\n                }\r\n    \r\n                // Keep history\r\n                obj.setHistory({\r\n                    action: 'insertColumn',\r\n                    columnNumber:columnNumber,\r\n                    numOfColumns:numOfColumns,\r\n                    insertBefore:insertBefore,\r\n                    columns:properties,\r\n                    headers:historyHeaders,\r\n                    colgroup:historyColgroup,\r\n                    records:historyRecords,\r\n                    footers:historyFooters,\r\n                    data:historyData,\r\n                });\r\n    \r\n                // Remove table references\r\n                obj.updateTableReferences();\r\n    \r\n                // Events\r\n                obj.dispatch('oninsertcolumn', el, columnNumber, numOfColumns, historyRecords, insertBefore);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Delete a column by number\r\n         * \r\n         * @param integer columnNumber - reference column to be excluded\r\n         * @param integer numOfColumns - number of columns to be excluded from the reference column\r\n         * @return void\r\n         */\r\n        obj.deleteColumn = function(columnNumber, numOfColumns) {\r\n            // Global Configuration\r\n            if (obj.options.allowDeleteColumn == true) {\r\n                if (obj.headers.length > 1) {\r\n                    // Delete column definitions\r\n                    if (columnNumber == undefined) {\r\n                        var number = obj.getSelectedColumns(true);\r\n    \r\n                        if (! number.length) {\r\n                            // Remove last column\r\n                            columnNumber = obj.headers.length - 1;\r\n                            numOfColumns = 1;\r\n                        } else {\r\n                            // Remove selected\r\n                            columnNumber = parseInt(number[0]);\r\n                            numOfColumns = parseInt(number.length);\r\n                        }\r\n                    }\r\n    \r\n                    // Lasat column\r\n                    var lastColumn = obj.options.data[0].length - 1;\r\n    \r\n                    if (columnNumber == undefined || columnNumber > lastColumn || columnNumber < 0) {\r\n                        columnNumber = lastColumn;\r\n                    }\r\n    \r\n                    // Minimum of columns to be delete is 1\r\n                    if (! numOfColumns) {\r\n                        numOfColumns = 1;\r\n                    }\r\n    \r\n                    // Can't delete more than the limit of the table\r\n                    if (numOfColumns > obj.options.data[0].length - columnNumber) {\r\n                        numOfColumns = obj.options.data[0].length - columnNumber;\r\n                    }\r\n    \r\n                    // onbeforedeletecolumn\r\n                   if (obj.dispatch('onbeforedeletecolumn', el, columnNumber, numOfColumns) === false) {\r\n                      console.log('onbeforedeletecolumn returned false');\r\n                      return false;\r\n                   }\r\n    \r\n                    // Can't remove the last column\r\n                    if (parseInt(columnNumber) > -1) {\r\n                        // Merged cells\r\n                        var mergeExists = false;\r\n                        if (Object.keys(obj.options.mergeCells).length > 0) {\r\n                            for (var col = columnNumber; col < columnNumber + numOfColumns; col++) {\r\n                                if (obj.isColMerged(col, false).length) {\r\n                                    mergeExists = true;\r\n                                }\r\n                            }\r\n                        }\r\n                        if (mergeExists) {\r\n                            if (! confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure)) {\r\n                                return false;\r\n                            } else {\r\n                                obj.destroyMerged();\r\n                            }\r\n                        }\r\n    \r\n                        // Delete the column properties\r\n                        var columns = obj.options.columns.splice(columnNumber, numOfColumns);\r\n    \r\n                        for (var col = columnNumber; col < columnNumber + numOfColumns; col++) {\r\n                            obj.colgroup[col].className = '';\r\n                            obj.headers[col].className = '';\r\n                            obj.colgroup[col].parentNode.removeChild(obj.colgroup[col]);\r\n                            obj.headers[col].parentNode.removeChild(obj.headers[col]);\r\n                        }\r\n    \r\n                        var historyHeaders = obj.headers.splice(columnNumber, numOfColumns);\r\n                        var historyColgroup = obj.colgroup.splice(columnNumber, numOfColumns);\r\n                        var historyRecords = [];\r\n                        var historyData = [];\r\n                        var historyFooters = [];\r\n\r\n                        for (var row = 0; row < obj.options.data.length; row++) {\r\n                            for (var col = columnNumber; col < columnNumber + numOfColumns; col++) {\r\n                                obj.records[row][col].className = '';\r\n                                obj.records[row][col].parentNode.removeChild(obj.records[row][col]);\r\n                            }\r\n                        }\r\n    \r\n                        // Delete headers\r\n                        for (var row = 0; row < obj.options.data.length; row++) {\r\n                            // History\r\n                            historyData[row] = obj.options.data[row].splice(columnNumber, numOfColumns);\r\n                            historyRecords[row] = obj.records[row].splice(columnNumber, numOfColumns);\r\n                        }\r\n\r\n                        // Delete footers\r\n                        if (obj.options.footers) {\r\n                            for (var row = 0; row < obj.options.footers.length; row++) {\r\n                                historyFooters[row] = obj.options.footers[row].splice(columnNumber, numOfColumns);\r\n                            }\r\n                        }\r\n\r\n                        // Remove selection\r\n                        obj.conditionalSelectionUpdate(0, columnNumber, (columnNumber + numOfColumns) - 1);\r\n    \r\n                        // Adjust nested headers\r\n                        if (obj.options.nestedHeaders && obj.options.nestedHeaders.length > 0) {\r\n                            // Flexible way to handle nestedheaders\r\n                            if (obj.options.nestedHeaders[0] && obj.options.nestedHeaders[0][0]) {\r\n                                for (var j = 0; j < obj.options.nestedHeaders.length; j++) {\r\n                                    var colspan = parseInt(obj.options.nestedHeaders[j][obj.options.nestedHeaders[j].length-1].colspan) - numOfColumns;\r\n                                    obj.options.nestedHeaders[j][obj.options.nestedHeaders[j].length-1].colspan = colspan;\r\n                                    obj.thead.children[j].children[obj.thead.children[j].children.length-1].setAttribute('colspan', colspan);\r\n                                }\r\n                            } else {\r\n                                var colspan = parseInt(obj.options.nestedHeaders[0].colspan) - numOfColumns;\r\n                                obj.options.nestedHeaders[0].colspan = colspan;\r\n                                obj.thead.children[0].children[obj.thead.children[0].children.length-1].setAttribute('colspan', colspan);\r\n                            }\r\n                        }\r\n    \r\n                        // Keeping history of changes\r\n                        obj.setHistory({\r\n                            action:'deleteColumn',\r\n                            columnNumber:columnNumber,\r\n                            numOfColumns:numOfColumns,\r\n                            insertBefore: 1,\r\n                            columns:columns,\r\n                            headers:historyHeaders,\r\n                            colgroup:historyColgroup,\r\n                            records:historyRecords,\r\n                            footers:historyFooters,\r\n                            data:historyData,\r\n                        });\r\n    \r\n                        // Update table references\r\n                        obj.updateTableReferences();\r\n    \r\n                        // Delete\r\n                        obj.dispatch('ondeletecolumn', el, columnNumber, numOfColumns, historyRecords);\r\n                    }\r\n                } else {\r\n                    console.error('JEXCEL. It is not possible to delete the last column');\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Get seleted rows numbers\r\n         * \r\n         * @return array\r\n         */\r\n        obj.getSelectedRows = function(asIds) {\r\n            var rows = [];\r\n            // Get all selected rows\r\n            for (var j = 0; j < obj.rows.length; j++) {\r\n                if (obj.rows[j].classList.contains('selected')) {\r\n                    if (asIds) {\r\n                        rows.push(j);\r\n                    } else {\r\n                        rows.push(obj.rows[j]);\r\n                    }\r\n                }\r\n            }\r\n    \r\n            return rows;\r\n        },\r\n    \r\n        /**\r\n         * Get seleted column numbers\r\n         * \r\n         * @return array\r\n         */\r\n        obj.getSelectedColumns = function() {\r\n            var cols = [];\r\n            // Get all selected cols\r\n            for (var i = 0; i < obj.headers.length; i++) {\r\n                if (obj.headers[i].classList.contains('selected')) {\r\n                    cols.push(i);\r\n                }\r\n            }\r\n    \r\n            return cols;\r\n        }\r\n    \r\n        /**\r\n         * Get highlighted\r\n         * \r\n         * @return array\r\n         */\r\n        obj.getHighlighted = function() {\r\n            return obj.highlighted;\r\n        }\r\n    \r\n        /**\r\n         * Update cell references\r\n         * \r\n         * @return void\r\n         */\r\n        obj.updateTableReferences = function() {\r\n            // Update headers\r\n            for (var i = 0; i < obj.headers.length; i++) {\r\n                var x = obj.headers[i].getAttribute('data-x');\r\n    \r\n                if (x != i) {\r\n                    // Update coords\r\n                    obj.headers[i].setAttribute('data-x', i);\r\n                    // Title\r\n                    if (! obj.headers[i].getAttribute('title')) {\r\n                        obj.headers[i].innerHTML = jexcel.getColumnName(i);\r\n                    }\r\n                }\r\n            }\r\n    \r\n            // Update all rows\r\n            for (var j = 0; j < obj.rows.length; j++) {\r\n                if (obj.rows[j]) {\r\n                    var y = obj.rows[j].getAttribute('data-y');\r\n    \r\n                    if (y != j) {\r\n                        // Update coords\r\n                        obj.rows[j].setAttribute('data-y', j);\r\n                        obj.rows[j].children[0].setAttribute('data-y', j);\r\n                        // Row number\r\n                        obj.rows[j].children[0].innerHTML = j + 1;\r\n                    }\r\n                }\r\n            }\r\n    \r\n            // Regular cells affected by this change\r\n            var affectedTokens = [];\r\n            var mergeCellUpdates = [];\r\n    \r\n            // Update cell\r\n            var updatePosition = function(x,y,i,j) {\r\n                if (x != i) {\r\n                    obj.records[j][i].setAttribute('data-x', i);\r\n                }\r\n                if (y != j) {\r\n                    obj.records[j][i].setAttribute('data-y', j);\r\n                }\r\n    \r\n                // Other updates\r\n                if (x != i || y != j) {\r\n                    var columnIdFrom = jexcel.getColumnNameFromId([x, y]);\r\n                    var columnIdTo = jexcel.getColumnNameFromId([i, j]);\r\n                    affectedTokens[columnIdFrom] = columnIdTo;\r\n                }\r\n            }\r\n    \r\n            for (var j = 0; j < obj.records.length; j++) {\r\n                for (var i = 0; i < obj.records[0].length; i++) {\r\n                    if (obj.records[j][i]) {\r\n                        // Current values\r\n                        var x = obj.records[j][i].getAttribute('data-x');\r\n                        var y = obj.records[j][i].getAttribute('data-y');\r\n    \r\n                        // Update column\r\n                        if (obj.records[j][i].getAttribute('data-merged')) {\r\n                            var columnIdFrom = jexcel.getColumnNameFromId([x, y]);\r\n                            var columnIdTo = jexcel.getColumnNameFromId([i, j]);\r\n                            if (mergeCellUpdates[columnIdFrom] == null) {\r\n                                if (columnIdFrom == columnIdTo) {\r\n                                    mergeCellUpdates[columnIdFrom] = false;\r\n                                } else {\r\n                                    var totalX = parseInt(i - x);\r\n                                    var totalY = parseInt(j - y);\r\n                                    mergeCellUpdates[columnIdFrom] = [ columnIdTo, totalX, totalY ];\r\n                                }\r\n                            }\r\n                        } else {\r\n                            updatePosition(x,y,i,j);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            // Update merged if applicable\r\n            var keys = Object.keys(mergeCellUpdates);\r\n            if (keys.length) {\r\n                for (var i = 0; i < keys.length; i++) {\r\n                    if (mergeCellUpdates[keys[i]]) {\r\n                        var info = jexcel.getIdFromColumnName(keys[i], true)\r\n                        var x = info[0];\r\n                        var y = info[1];\r\n                        updatePosition(x,y,x + mergeCellUpdates[keys[i]][1],y + mergeCellUpdates[keys[i]][2]);\r\n    \r\n                        var columnIdFrom = keys[i];\r\n                        var columnIdTo = mergeCellUpdates[keys[i]][0];\r\n                        for (var j = 0; j < obj.options.mergeCells[columnIdFrom][2].length; j++) {\r\n                            var x = parseInt(obj.options.mergeCells[columnIdFrom][2][j].getAttribute('data-x'));\r\n                            var y = parseInt(obj.options.mergeCells[columnIdFrom][2][j].getAttribute('data-y'));\r\n                            obj.options.mergeCells[columnIdFrom][2][j].setAttribute('data-x', x + mergeCellUpdates[keys[i]][1]);\r\n                            obj.options.mergeCells[columnIdFrom][2][j].setAttribute('data-y', y + mergeCellUpdates[keys[i]][2]);\r\n                        }\r\n    \r\n                        obj.options.mergeCells[columnIdTo] = obj.options.mergeCells[columnIdFrom];\r\n                        delete(obj.options.mergeCells[columnIdFrom]);\r\n                    }\r\n                }\r\n            }\r\n    \r\n            // Update formulas\r\n            obj.updateFormulas(affectedTokens);\r\n    \r\n            // Update meta data\r\n            obj.updateMeta(affectedTokens);\r\n    \r\n            // Refresh selection\r\n            obj.refreshSelection();\r\n    \r\n            // Update table with custom configuration if applicable\r\n            obj.updateTable();\r\n        }\r\n    \r\n        /**\r\n         * Custom settings for the cells\r\n         */\r\n        obj.updateTable = function() {\r\n            // Check for spare\r\n            if (obj.options.minSpareRows > 0) {\r\n                var numBlankRows = 0;\r\n                for (var j = obj.rows.length - 1; j >= 0; j--) {\r\n                    var test = false;\r\n                    for (var i = 0; i < obj.headers.length; i++) {\r\n                        if (obj.options.data[j][i]) {\r\n                            test = true;\r\n                        }\r\n                    }\r\n                    if (test) {\r\n                        break;\r\n                    } else {\r\n                        numBlankRows++;\r\n                    }\r\n                }\r\n    \r\n                if (obj.options.minSpareRows - numBlankRows > 0) {\r\n                    obj.insertRow(obj.options.minSpareRows - numBlankRows)\r\n                }\r\n            }\r\n    \r\n            if (obj.options.minSpareCols > 0) {\r\n                var numBlankCols = 0;\r\n                for (var i = obj.headers.length - 1; i >= 0 ; i--) {\r\n                    var test = false;\r\n                    for (var j = 0; j < obj.rows.length; j++) {\r\n                        if (obj.options.data[j][i]) {\r\n                            test = true;\r\n                        }\r\n                    }\r\n                    if (test) {\r\n                        break;\r\n                    } else {\r\n                        numBlankCols++;\r\n                    }\r\n                }\r\n    \r\n                if (obj.options.minSpareCols - numBlankCols > 0) {\r\n                    obj.insertColumn(obj.options.minSpareCols - numBlankCols)\r\n                }\r\n            }\r\n    \r\n            // Customizations by the developer\r\n            if (typeof(obj.options.updateTable) == 'function') {\r\n                if (obj.options.detachForUpdates) {\r\n                    el.removeChild(obj.content);\r\n                }\r\n\r\n                for (var j = 0; j < obj.rows.length; j++) {\r\n                    for (var i = 0; i < obj.headers.length; i++) {\r\n                        obj.options.updateTable(el, obj.records[j][i], i, j, obj.options.data[j][i], obj.records[j][i].innerText, jexcel.getColumnNameFromId([i, j]));\r\n                    }\r\n                }\r\n\r\n                if (obj.options.detachForUpdates) {\r\n                    el.insertBefore(obj.content, obj.pagination);\r\n                }\r\n            }\r\n    \r\n            // Update footers\r\n            if (obj.options.footers) {\r\n                obj.setFooter();\r\n            }\r\n\r\n            // Update corner position\r\n            setTimeout(function() {\r\n                obj.updateCornerPosition();\r\n            },0);\r\n        }\r\n\r\n        /**\r\n         * Readonly\r\n         */\r\n        obj.isReadOnly = function(cell) {\r\n            if (cell = obj.getCell(cell)) {\r\n                return cell.classList.contains('readonly') ? true : false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Readonly\r\n         */\r\n        obj.setReadOnly = function(cell, state) {\r\n            if (cell = obj.getCell(cell)) {\r\n                if (state) {\r\n                    cell.classList.add('readonly');\r\n                } else {\r\n                    cell.classList.remove('readonly');\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Show row\r\n         */\r\n        obj.showRow = function(rowNumber) {\r\n            obj.rows[rowNumber].style.display = '';\r\n        }\r\n\r\n        /**\r\n         * Hide row\r\n         */\r\n        obj.hideRow = function(rowNumber) {\r\n            obj.rows[rowNumber].style.display = 'none';\r\n        }\r\n\r\n        /**\r\n         * Show column\r\n         */\r\n        obj.showColumn = function(colNumber) {\r\n            obj.headers[colNumber].style.display = '';\r\n            obj.colgroup[colNumber].style.display = '';\r\n            for (var j = 0; j < obj.options.data.length; j++) {\r\n                obj.records[j][colNumber].style.display = '';\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Hide column\r\n         */\r\n        obj.hideColumn = function(colNumber) {\r\n            obj.headers[colNumber].style.display = 'none';\r\n            obj.colgroup[colNumber].style.display = 'none';\r\n            for (var j = 0; j < obj.options.data.length; j++) {\r\n                obj.records[j][colNumber].style.display = 'none';\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Show index column\r\n         */\r\n        obj.showIndex = function() {\r\n            obj.table.classList.remove('jexcel_hidden_index');\r\n        }\r\n    \r\n        /**\r\n         * Hide index column\r\n         */\r\n        obj.hideIndex = function() {\r\n            obj.table.classList.add('jexcel_hidden_index');\r\n        }\r\n    \r\n        /**\r\n         * Update all related cells in the chain\r\n         */\r\n        var chainLoopProtection = [];\r\n    \r\n        obj.updateFormulaChain = function(x, y, records) {\r\n            var cellId = jexcel.getColumnNameFromId([x, y]);\r\n            if (obj.formula[cellId] && obj.formula[cellId].length > 0) {\r\n                if (chainLoopProtection[cellId]) {\r\n                    obj.records[y][x].innerHTML = '#ERROR';\r\n                    obj.formula[cellId] = '';\r\n                } else {\r\n                    // Protection\r\n                    chainLoopProtection[cellId] = true;\r\n    \r\n                    for (var i = 0; i < obj.formula[cellId].length; i++) {\r\n                        var cell = jexcel.getIdFromColumnName(obj.formula[cellId][i], true);\r\n                        // Update cell\r\n                        var value = ''+obj.options.data[cell[1]][cell[0]];\r\n                        if (value.substr(0,1) == '=') {\r\n                            records.push(obj.updateCell(cell[0], cell[1], value, true));\r\n                        } else {\r\n                            // No longer a formula, remove from the chain\r\n                            Object.keys(obj.formula)[i] = null;\r\n                        }\r\n                        obj.updateFormulaChain(cell[0], cell[1], records);\r\n                    }\r\n                }\r\n            }\r\n    \r\n            chainLoopProtection = [];\r\n        }\r\n    \r\n        /**\r\n         * Update formulas\r\n         */\r\n        obj.updateFormulas = function(referencesToUpdate) {\r\n            // Update formulas\r\n            for (var j = 0; j < obj.options.data.length; j++) {\r\n                for (var i = 0; i < obj.options.data[0].length; i++) {\r\n                    var value = '' + obj.options.data[j][i];\r\n                    // Is formula\r\n                    if (value.substr(0,1) == '=') {\r\n                        // Replace tokens\r\n                        var newFormula = obj.updateFormula(value, referencesToUpdate);\r\n                        if (newFormula != value) {\r\n                            obj.options.data[j][i] = newFormula;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            // Update formula chain\r\n            var formula = [];\r\n            var keys = Object.keys(obj.formula);\r\n            for (var j = 0; j < keys.length; j++) {\r\n                // Current key and values\r\n                var key = keys[j];\r\n                var value = obj.formula[key];\r\n                // Update key\r\n                if (referencesToUpdate[key]) {\r\n                    key = referencesToUpdate[key];\r\n                }\r\n                // Update values\r\n                formula[key] = [];\r\n                for (var i = 0; i < value.length; i++) {\r\n                    var letter = value[i];\r\n                    if (referencesToUpdate[letter]) {\r\n                        letter = referencesToUpdate[letter];\r\n                    }\r\n                    formula[key].push(letter);\r\n                }\r\n            }\r\n            obj.formula = formula;\r\n        }\r\n    \r\n        /**\r\n         * Update formula\r\n         */\r\n        obj.updateFormula = function(formula, referencesToUpdate) {\r\n            var testLetter = /[A-Z]/;\r\n            var testNumber = /[0-9]/;\r\n    \r\n            var newFormula = '';\r\n            var letter = null;\r\n            var number = null;\r\n            var token = '';\r\n    \r\n            for (var index = 0; index < formula.length; index++) {\r\n                if (testLetter.exec(formula[index])) {\r\n                    letter = 1;\r\n                    number = 0;\r\n                    token += formula[index];\r\n                } else if (testNumber.exec(formula[index])) {\r\n                    number = letter ? 1 : 0;\r\n                    token += formula[index];\r\n                } else {\r\n                    if (letter && number) {\r\n                        token = referencesToUpdate[token] ? referencesToUpdate[token] : token;\r\n                    }\r\n                    newFormula += token;\r\n                    newFormula += formula[index];\r\n                    letter = 0;\r\n                    number = 0;\r\n                    token = '';\r\n                }\r\n            }\r\n    \r\n            if (token) {\r\n                if (letter && number) {\r\n                    token = referencesToUpdate[token] ? referencesToUpdate[token] : token;\r\n                }\r\n                newFormula += token;\r\n            }\r\n    \r\n            return newFormula;\r\n        }\r\n    \r\n        /**\r\n         * Secure formula\r\n         */\r\n        var secureFormula = function(oldValue) {\r\n            var newValue = '';\r\n            var inside = 0;\r\n\r\n            for (var i = 0; i < oldValue.length; i++) {\r\n                if (oldValue[i] == '\"') {\r\n                    if (inside == 0) {\r\n                        inside = 1;\r\n                    } else {\r\n                        inside = 0;\r\n                    }\r\n                }\r\n\r\n                if (inside == 1) {\r\n                    newValue += oldValue[i];\r\n                } else {\r\n                    newValue += oldValue[i].toUpperCase();\r\n                }\r\n            }\r\n\r\n            return newValue;\r\n        }\r\n\r\n        /**\r\n         * Parse formulas\r\n         */\r\n        obj.executeFormula = function(expression, x, y) {\r\n    \r\n            var formulaResults = [];\r\n            var formulaLoopProtection = [];\r\n    \r\n            // Execute formula with loop protection\r\n            var execute = function(expression, x, y) {\r\n             // Parent column identification\r\n                var parentId = jexcel.getColumnNameFromId([x, y]);\r\n    \r\n                // Code protection\r\n                if (formulaLoopProtection[parentId]) {\r\n                    console.error('Reference loop detected');\r\n                    return '#ERROR';\r\n                }\r\n    \r\n                formulaLoopProtection[parentId] = true;\r\n    \r\n                // Convert range tokens\r\n                var tokensUpdate = function(tokens) {\r\n                    for (var index = 0; index < tokens.length; index++) {\r\n                        var f = [];\r\n                        var token = tokens[index].split(':');\r\n                        var e1 = jexcel.getIdFromColumnName(token[0], true);\r\n                        var e2 = jexcel.getIdFromColumnName(token[1], true);\r\n    \r\n                        if (e1[0] <= e2[0]) {\r\n                            var x1 = e1[0];\r\n                            var x2 = e2[0];\r\n                        } else {\r\n                            var x1 = e2[0];\r\n                            var x2 = e1[0];\r\n                        }\r\n    \r\n                        if (e1[1] <= e2[1]) {\r\n                            var y1 = e1[1];\r\n                            var y2 = e2[1];\r\n                        } else {\r\n                            var y1 = e2[1];\r\n                            var y2 = e1[1];\r\n                        }\r\n    \r\n                        for (var j = y1; j <= y2; j++) {\r\n                            for (var i = x1; i <= x2; i++) {\r\n                                f.push(jexcel.getColumnNameFromId([i, j]));\r\n                            }\r\n                        }\r\n    \r\n                        expression = expression.replace(tokens[index], f.join(','));\r\n                    }\r\n                }\r\n    \r\n                // Range with $ remove $\r\n                expression = expression.replace(/\\$?([A-Z]+)\\$?([0-9]+)/g, \"$1$2\");\r\n\r\n                var tokens = expression.match(/([A-Z]+[0-9]+)\\:([A-Z]+[0-9]+)/g);\r\n                if (tokens && tokens.length) {\r\n                    tokensUpdate(tokens);\r\n                }\r\n    \r\n                // String\r\n                var evalstring = '';\r\n    \r\n                // Get tokens\r\n                var tokens = expression.match(/([A-Z]+[0-9]+)/g);\r\n    \r\n                // Direct self-reference protection\r\n                if (tokens && tokens.indexOf(parentId) > -1) {\r\n                    console.error('Self Reference detected');\r\n                    return '#ERROR';\r\n                } else {\r\n                    if (tokens) {\r\n                        for (var i = 0; i < tokens.length; i++) {\r\n                            // Keep chain\r\n                            if (! obj.formula[tokens[i]]) {\r\n                                obj.formula[tokens[i]] = [];\r\n                            }\r\n                            // Is already in the register\r\n                            if (obj.formula[tokens[i]].indexOf(parentId) < 0) {\r\n                                obj.formula[tokens[i]].push(parentId);\r\n                            }\r\n    \r\n                            // Do not calculate again\r\n                            if (eval('typeof(' + tokens[i] + ') == \"undefined\"')) {\r\n                                // Coords\r\n                                var position = jexcel.getIdFromColumnName(tokens[i], 1);\r\n                                // Get value\r\n                                if (typeof(obj.options.data[position[1]]) != 'undefined' && typeof(obj.options.data[position[1]][position[0]]) != 'undefined') {\r\n                                    var value = obj.options.data[position[1]][position[0]];\r\n                                } else {\r\n                                    var value = '';\r\n                                }\r\n                                // Get column data\r\n                                if ((''+value).substr(0,1) == '=') {\r\n                                    if (formulaResults[tokens[i]]) {\r\n                                        value = formulaResults[tokens[i]];\r\n                                    } else {\r\n                                        value = execute(value, position[0], position[1]);\r\n                                        formulaResults[tokens[i]] = value;\r\n                                    }\r\n                                }\r\n                                // Type!\r\n                                if ((''+value).trim() == '') {\r\n                                    // Null\r\n                                    evalstring += \"var \" + tokens[i] + \" = null;\";\r\n                                } else {\r\n                                    if (value == Number(value) && obj.options.autoCasting == true) {\r\n                                        // Number\r\n                                        evalstring += \"var \" + tokens[i] + \" = \" + Number(value) + \";\";\r\n                                    } else {\r\n                                        // Trying any formatted number\r\n                                        var number = obj.parseNumber(value, position[0])\r\n                                        if (obj.options.autoCasting == true && number) {\r\n                                            // Render as number\r\n                                            evalstring += \"var \" + tokens[i] + \" = \" + number + \";\";\r\n                                        } else {\r\n                                            // Render as string\r\n                                            evalstring += \"var \" + tokens[i] + \" = '\" + value + \"';\";\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n    \r\n                    // Convert formula to javascript\r\n                    try {\r\n                        evalstring += \"function COLUMN() { return parseInt(x) + 1; }; function ROW() { return parseInt(y) + 1; }; function CELL() { return parentId; }; function TABLE() { return obj; }; function VALUE(col, row) { return obj.records[row-1][col-1].innerHTML; }; function THISROWCELL(col) { var id = jexcel.getIdFromColumnName(col+(parseInt(y)+1), true); return obj.records[id[1]][id[0]].innerHTML; }\";\r\n    \r\n                        var res = eval(evalstring + expression.substr(1));\r\n                    } catch (e) {\r\n                        var res = '#ERROR';\r\n                    }\r\n    \r\n                    return res;\r\n                }\r\n            }\r\n    \r\n            return execute(expression, x, y);\r\n        }\r\n    \r\n        /**\r\n         * Trying to extract a number from a string\r\n         */\r\n        obj.parseNumber = function(value, columnNumber) {\r\n            // Decimal point\r\n            var decimal = columnNumber && obj.options.columns[columnNumber].decimal ? obj.options.columns[columnNumber].decimal : '.';\r\n    \r\n            // Parse both parts of the number\r\n            var number = ('' + value);\r\n            number = number.split(decimal);\r\n            number[0] = number[0].match(/[+-]?[0-9]/g);\r\n            if (number[0]) {\r\n                number[0] = number[0].join('');\r\n            }\r\n            if (number[1]) {\r\n                number[1] = number[1].match(/[0-9]*/g).join('');\r\n            }\r\n    \r\n            // Is a valid number\r\n            if (number[0] && Number(number[0]) >= 0) {\r\n                if (! number[1]) {\r\n                    var value = Number(number[0] + '.00');\r\n                } else {\r\n                    var value = Number(number[0] + '.' + number[1]);\r\n                }\r\n            } else {\r\n                var value = null;\r\n            }\r\n    \r\n            return value;\r\n        }\r\n    \r\n        /**\r\n         * Get row number\r\n         */\r\n        obj.row = function(cell) {\r\n        }\r\n    \r\n        /**\r\n         * Get col number\r\n         */\r\n        obj.col = function(cell) {\r\n        }\r\n    \r\n        obj.up = function(shiftKey, ctrlKey) {\r\n            if (shiftKey) {\r\n                if (obj.selectedCell[3] > 0) {\r\n                    obj.up.visible(1, ctrlKey ? 0 : 1)\r\n                }\r\n            } else {\r\n                if (obj.selectedCell[1] > 0) {\r\n                    obj.up.visible(0, ctrlKey ? 0 : 1)\r\n                }\r\n                obj.selectedCell[2] = obj.selectedCell[0];\r\n                obj.selectedCell[3] = obj.selectedCell[1];\r\n            }\r\n    \r\n            // Update selection\r\n            obj.updateSelectionFromCoords(obj.selectedCell[0], obj.selectedCell[1], obj.selectedCell[2], obj.selectedCell[3]);\r\n    \r\n            // Change page\r\n            if (obj.options.lazyLoading == true) {\r\n                if (obj.selectedCell[1] == 0 || obj.selectedCell[3] == 0) {\r\n                    obj.loadPage(0);\r\n                    obj.updateSelectionFromCoords(obj.selectedCell[0], obj.selectedCell[1], obj.selectedCell[2], obj.selectedCell[3]);\r\n                } else {\r\n                    if (obj.loadValidation()) {\r\n                        obj.updateSelectionFromCoords(obj.selectedCell[0], obj.selectedCell[1], obj.selectedCell[2], obj.selectedCell[3]);\r\n                    } else {\r\n                        var item = parseInt(obj.tbody.firstChild.getAttribute('data-y'));\r\n                        if (obj.selectedCell[1] - item < 30) {\r\n                            obj.loadUp();\r\n                            obj.updateSelectionFromCoords(obj.selectedCell[0], obj.selectedCell[1], obj.selectedCell[2], obj.selectedCell[3]);\r\n                        }\r\n                    }\r\n                }\r\n            } else if (obj.options.pagination > 0) {\r\n                var pageNumber = obj.whichPage(obj.selectedCell[3]);\r\n                if (pageNumber != obj.pageNumber) {\r\n                    obj.page(pageNumber);\r\n                }\r\n            }\r\n    \r\n            obj.updateScroll(1);\r\n        }\r\n    \r\n        obj.up.visible = function(group, direction) {\r\n            if (group == 0) {\r\n                var x = parseInt(obj.selectedCell[0]);\r\n                var y = parseInt(obj.selectedCell[1]);\r\n            } else {\r\n                var x = parseInt(obj.selectedCell[2]);\r\n                var y = parseInt(obj.selectedCell[3]);\r\n            }\r\n    \r\n            if (direction == 0) {\r\n                for (var j = 0; j < y; j++) {\r\n                    if (obj.records[j][x].style.display != 'none' && obj.rows[j].style.display != 'none') {\r\n                        y = j;\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                y = obj.up.get(x, y);\r\n            }\r\n    \r\n            if (group == 0) {\r\n                obj.selectedCell[0] = x;\r\n                obj.selectedCell[1] = y;\r\n            } else {\r\n                obj.selectedCell[2] = x;\r\n                obj.selectedCell[3] = y;\r\n            }\r\n        }\r\n    \r\n        obj.up.get = function(x, y) {\r\n            var x = parseInt(x);\r\n            var y = parseInt(y);\r\n            for (var j = (y - 1); j >= 0; j--) {\r\n                if (obj.records[j][x].style.display != 'none' && obj.rows[j].style.display != 'none') {\r\n                    if (obj.records[j][x].getAttribute('data-merged')) {\r\n                        if (obj.records[j][x] == obj.records[y][x]) {\r\n                            continue;\r\n                        }\r\n                    }\r\n                    y = j;\r\n                    break;\r\n                }\r\n            }\r\n    \r\n            return y;\r\n        }\r\n    \r\n        obj.down = function(shiftKey, ctrlKey) {\r\n            if (shiftKey) {\r\n                if (obj.selectedCell[3] < obj.records.length - 1) {\r\n                    obj.down.visible(1, ctrlKey ? 0 : 1)\r\n                }\r\n            } else {\r\n                if (obj.selectedCell[1] < obj.records.length - 1) {\r\n                    obj.down.visible(0, ctrlKey ? 0 : 1)\r\n                }\r\n                obj.selectedCell[2] = obj.selectedCell[0];\r\n                obj.selectedCell[3] = obj.selectedCell[1];\r\n            }\r\n    \r\n            obj.updateSelectionFromCoords(obj.selectedCell[0], obj.selectedCell[1], obj.selectedCell[2], obj.selectedCell[3]);\r\n    \r\n            // Change page\r\n            if (obj.options.lazyLoading == true) {\r\n                if ((obj.selectedCell[1] == obj.records.length - 1 || obj.selectedCell[3] == obj.records.length - 1)) {\r\n                    obj.loadPage(-1);\r\n                    obj.updateSelectionFromCoords(obj.selectedCell[0], obj.selectedCell[1], obj.selectedCell[2], obj.selectedCell[3]);\r\n                } else {\r\n                    if (obj.loadValidation()) {\r\n                        obj.updateSelectionFromCoords(obj.selectedCell[0], obj.selectedCell[1], obj.selectedCell[2], obj.selectedCell[3]);\r\n                    } else {\r\n                        var item = parseInt(obj.tbody.lastChild.getAttribute('data-y'));\r\n                        if (item - obj.selectedCell[3] < 30) {\r\n                            obj.loadDown();\r\n                            obj.updateSelectionFromCoords(obj.selectedCell[0], obj.selectedCell[1], obj.selectedCell[2], obj.selectedCell[3]);\r\n                        }\r\n                    }\r\n                }\r\n            } else if (obj.options.pagination > 0) {\r\n                var pageNumber = obj.whichPage(obj.selectedCell[3]);\r\n                if (pageNumber != obj.pageNumber) {\r\n                    obj.page(pageNumber);\r\n                }\r\n            }\r\n    \r\n            obj.updateScroll(3);\r\n        }\r\n    \r\n        obj.down.visible = function(group, direction) {\r\n            if (group == 0) {\r\n                var x = parseInt(obj.selectedCell[0]);\r\n                var y = parseInt(obj.selectedCell[1]);\r\n            } else {\r\n                var x = parseInt(obj.selectedCell[2]);\r\n                var y = parseInt(obj.selectedCell[3]);\r\n            }\r\n    \r\n            if (direction == 0) {\r\n                for (var j = obj.rows.length - 1; j > y; j--) {\r\n                    if (obj.records[j][x].style.display != 'none' && obj.rows[j].style.display != 'none') {\r\n                        y = j;\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                y = obj.down.get(x, y);\r\n            }\r\n    \r\n            if (group == 0) {\r\n                obj.selectedCell[0] = x;\r\n                obj.selectedCell[1] = y;\r\n            } else {\r\n                obj.selectedCell[2] = x;\r\n                obj.selectedCell[3] = y;\r\n            }\r\n        }\r\n    \r\n        obj.down.get = function(x, y) {\r\n            var x = parseInt(x);\r\n            var y = parseInt(y);\r\n            for (var j = (y + 1); j < obj.rows.length; j++) {\r\n                if (obj.records[j][x].style.display != 'none' && obj.rows[j].style.display != 'none') {\r\n                    if (obj.records[j][x].getAttribute('data-merged')) {\r\n                        if (obj.records[j][x] == obj.records[y][x]) {\r\n                            continue;\r\n                        }\r\n                    }\r\n                    y = j;\r\n                    break;\r\n                }\r\n            }\r\n    \r\n            return y;\r\n        }\r\n    \r\n        obj.right = function(shiftKey, ctrlKey) {\r\n            if (shiftKey) {\r\n                if (obj.selectedCell[2] < obj.headers.length - 1) {\r\n                    obj.right.visible(1, ctrlKey ? 0 : 1)\r\n                }\r\n            } else {\r\n                if (obj.selectedCell[0] < obj.headers.length - 1) {\r\n                    obj.right.visible(0, ctrlKey ? 0 : 1)\r\n                }\r\n                obj.selectedCell[2] = obj.selectedCell[0];\r\n                obj.selectedCell[3] = obj.selectedCell[1];\r\n            }\r\n    \r\n            obj.updateSelectionFromCoords(obj.selectedCell[0], obj.selectedCell[1], obj.selectedCell[2], obj.selectedCell[3]);\r\n            obj.updateScroll(2);\r\n        }\r\n    \r\n        obj.right.visible = function(group, direction) {\r\n            if (group == 0) {\r\n                var x = parseInt(obj.selectedCell[0]);\r\n                var y = parseInt(obj.selectedCell[1]);\r\n            } else {\r\n                var x = parseInt(obj.selectedCell[2]);\r\n                var y = parseInt(obj.selectedCell[3]);\r\n            }\r\n    \r\n            if (direction == 0) {\r\n                for (var i = obj.headers.length - 1; i > x; i--) {\r\n                    if (obj.records[y][i].style.display != 'none') {\r\n                        x = i;\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                x = obj.right.get(x, y);\r\n            }\r\n    \r\n            if (group == 0) {\r\n                obj.selectedCell[0] = x;\r\n                obj.selectedCell[1] = y;\r\n            } else {\r\n                obj.selectedCell[2] = x;\r\n                obj.selectedCell[3] = y;\r\n            }\r\n        }\r\n    \r\n        obj.right.get = function(x, y) {\r\n            var x = parseInt(x);\r\n            var y = parseInt(y);\r\n    \r\n            for (var i = (x + 1); i < obj.headers.length; i++) {\r\n                if (obj.records[y][i].style.display != 'none') {\r\n                    if (obj.records[y][i].getAttribute('data-merged')) {\r\n                        if (obj.records[y][i] == obj.records[y][x]) {\r\n                            continue;\r\n                        }\r\n                    }\r\n                    x = i;\r\n                    break;\r\n                }\r\n            }\r\n    \r\n            return x;\r\n        }\r\n    \r\n        obj.left = function(shiftKey, ctrlKey) {\r\n            if (shiftKey) {\r\n                if (obj.selectedCell[2] > 0) {\r\n                    obj.left.visible(1, ctrlKey ? 0 : 1)\r\n                }\r\n            } else {\r\n                if (obj.selectedCell[0] > 0) {\r\n                    obj.left.visible(0, ctrlKey ? 0 : 1)\r\n                }\r\n                obj.selectedCell[2] = obj.selectedCell[0];\r\n                obj.selectedCell[3] = obj.selectedCell[1];\r\n            }\r\n    \r\n            obj.updateSelectionFromCoords(obj.selectedCell[0], obj.selectedCell[1], obj.selectedCell[2], obj.selectedCell[3]);\r\n            obj.updateScroll(0);\r\n        }\r\n    \r\n        obj.left.visible = function(group, direction) {\r\n            if (group == 0) {\r\n                var x = parseInt(obj.selectedCell[0]);\r\n                var y = parseInt(obj.selectedCell[1]);\r\n            } else {\r\n                var x = parseInt(obj.selectedCell[2]);\r\n                var y = parseInt(obj.selectedCell[3]);\r\n            }\r\n    \r\n            if (direction == 0) {\r\n                for (var i = 0; i < x; i++) {\r\n                    if (obj.records[y][i].style.display != 'none') {\r\n                        x = i;\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                x = obj.left.get(x, y);\r\n            }\r\n    \r\n            if (group == 0) {\r\n                obj.selectedCell[0] = x;\r\n                obj.selectedCell[1] = y;\r\n            } else {\r\n                obj.selectedCell[2] = x;\r\n                obj.selectedCell[3] = y;\r\n            }\r\n        }\r\n    \r\n        obj.left.get = function(x, y) {\r\n            var x = parseInt(x);\r\n            var y = parseInt(y);\r\n            for (var i = (x - 1); i >= 0; i--) {\r\n                if (obj.records[y][i].style.display != 'none') {\r\n                    if (obj.records[y][i].getAttribute('data-merged')) {\r\n                        if (obj.records[y][i] == obj.records[y][x]) {\r\n                            continue;\r\n                        }\r\n                    }\r\n                    x = i;\r\n                    break;\r\n                }\r\n            }\r\n    \r\n            return x;\r\n        }\r\n    \r\n        obj.first = function(shiftKey, ctrlKey) {\r\n            if (shiftKey) {\r\n                if (ctrlKey) {\r\n                    obj.selectedCell[3] = 0;\r\n                } else {\r\n                    obj.left.visible(1, 0);\r\n                }\r\n            } else {\r\n                if (ctrlKey) {\r\n                    obj.selectedCell[1] = 0;\r\n                } else {\r\n                    obj.left.visible(0, 0);\r\n                }\r\n                obj.selectedCell[2] = obj.selectedCell[0];\r\n                obj.selectedCell[3] = obj.selectedCell[1];\r\n            }\r\n    \r\n            // Change page\r\n            if (obj.options.lazyLoading == true && (obj.selectedCell[1] == 0 || obj.selectedCell[3] == 0)) {\r\n                obj.loadPage(0);\r\n            } else if (obj.options.pagination > 0) {\r\n                var pageNumber = obj.whichPage(obj.selectedCell[3]);\r\n                if (pageNumber != obj.pageNumber) {\r\n                    obj.page(pageNumber);\r\n                }\r\n            }\r\n    \r\n            obj.updateSelectionFromCoords(obj.selectedCell[0], obj.selectedCell[1], obj.selectedCell[2], obj.selectedCell[3]);\r\n            obj.updateScroll(1);\r\n        }\r\n    \r\n        obj.last = function(shiftKey, ctrlKey) {\r\n            if (shiftKey) {\r\n                if (ctrlKey) {\r\n                    obj.selectedCell[3] = obj.records.length - 1;\r\n                } else {\r\n                    obj.right.visible(1, 0);\r\n                }\r\n            } else {\r\n                if (ctrlKey) {\r\n                    obj.selectedCell[1] = obj.records.length - 1;\r\n                } else {\r\n                    obj.right.visible(0, 0);\r\n                }\r\n                obj.selectedCell[2] = obj.selectedCell[0];\r\n                obj.selectedCell[3] = obj.selectedCell[1];\r\n            }\r\n    \r\n            // Change page\r\n            if (obj.options.lazyLoading == true && (obj.selectedCell[1] == obj.records.length - 1 || obj.selectedCell[3] == obj.records.length - 1)) {\r\n                obj.loadPage(-1);\r\n            } else if (obj.options.pagination > 0) {\r\n                var pageNumber = obj.whichPage(obj.selectedCell[3]);\r\n                if (pageNumber != obj.pageNumber) {\r\n                    obj.page(pageNumber);\r\n                }\r\n            }\r\n    \r\n            obj.updateSelectionFromCoords(obj.selectedCell[0], obj.selectedCell[1], obj.selectedCell[2], obj.selectedCell[3]);\r\n            obj.updateScroll(3);\r\n        }\r\n    \r\n        obj.selectAll = function() {\r\n            if (! obj.selectedCell) {\r\n                obj.selectedCell = [];\r\n            }\r\n    \r\n            obj.selectedCell[0] = 0;\r\n            obj.selectedCell[1] = 0;\r\n            obj.selectedCell[2] = obj.headers.length - 1;\r\n            obj.selectedCell[3] = obj.records.length - 1;\r\n    \r\n            obj.updateSelectionFromCoords(obj.selectedCell[0], obj.selectedCell[1], obj.selectedCell[2], obj.selectedCell[3]);\r\n        }\r\n    \r\n        /**\r\n         * Go to a page in a lazyLoading\r\n         */\r\n        obj.loadPage = function(pageNumber) {\r\n            // Search\r\n            if (obj.options.search == true && obj.results) {\r\n                var results = obj.results;\r\n            } else {\r\n                var results = obj.rows;\r\n            }\r\n    \r\n            // Per page\r\n            var quantityPerPage = 100;\r\n    \r\n            // pageNumber\r\n            if (pageNumber == null || pageNumber == -1) {\r\n                // Last page\r\n                pageNumber = Math.ceil(results.length / quantityPerPage) - 1; \r\n            }\r\n    \r\n            var startRow = (pageNumber * quantityPerPage);\r\n            var finalRow = (pageNumber * quantityPerPage) + quantityPerPage;\r\n            if (finalRow > results.length) {\r\n                finalRow = results.length;\r\n            }\r\n            startRow = finalRow - 100;\r\n            if (startRow < 0) {\r\n                startRow = 0;\r\n            }\r\n    \r\n            // Appeding items\r\n            for (var j = startRow; j < finalRow; j++) {\r\n                if (obj.options.search == true && obj.results) {\r\n                    obj.tbody.appendChild(obj.rows[results[j]]);\r\n                } else {\r\n                    obj.tbody.appendChild(obj.rows[j]);\r\n                }\r\n    \r\n                if (obj.tbody.children.length > quantityPerPage) {\r\n                    obj.tbody.removeChild(obj.tbody.firstChild);\r\n                }\r\n            }\r\n        }\r\n    \r\n        obj.loadUp = function() {\r\n            // Search\r\n            if (obj.options.search == true && obj.results) {\r\n                var results = obj.results;\r\n            } else {\r\n                var results = obj.rows;\r\n            }\r\n            var test = 0;\r\n            if (results.length > 100) {\r\n                // Get the first element in the page\r\n                var item = parseInt(obj.tbody.firstChild.getAttribute('data-y'));\r\n                if (obj.options.search == true && obj.results) {\r\n                    item = results.indexOf(item);\r\n                }\r\n                if (item > 0) {\r\n                    for (var j = 0; j < 30; j++) {\r\n                        item = item - 1;\r\n                        if (item > -1) {\r\n                            if (obj.options.search == true && obj.results) {\r\n                                obj.tbody.insertBefore(obj.rows[results[item]], obj.tbody.firstChild);\r\n                            } else {\r\n                                obj.tbody.insertBefore(obj.rows[item], obj.tbody.firstChild);\r\n                            }\r\n                            if (obj.tbody.children.length > 100) {\r\n                                obj.tbody.removeChild(obj.tbody.lastChild);\r\n                                test = 1;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return test;\r\n        }\r\n    \r\n        obj.loadDown = function() {\r\n            // Search\r\n            if (obj.options.search == true && obj.results) {\r\n                var results = obj.results;\r\n            } else {\r\n                var results = obj.rows;\r\n            }\r\n            var test = 0;\r\n            if (results.length > 100) {\r\n                // Get the last element in the page\r\n                var item = parseInt(obj.tbody.lastChild.getAttribute('data-y'));\r\n                if (obj.options.search == true && obj.results) {\r\n                    item = results.indexOf(item);\r\n                }\r\n                if (item < obj.rows.length - 1) {\r\n                    for (var j = 0; j <= 30; j++) {\r\n                        if (item < results.length) {\r\n                            if (obj.options.search == true && obj.results) {\r\n                                obj.tbody.appendChild(obj.rows[results[item]]);\r\n                            } else {\r\n                                obj.tbody.appendChild(obj.rows[item]);\r\n                            }\r\n                            if (obj.tbody.children.length > 100) {\r\n                                obj.tbody.removeChild(obj.tbody.firstChild);\r\n                                test = 1;\r\n                            }\r\n                        }\r\n                        item = item + 1;\r\n                    }\r\n                }\r\n            }\r\n    \r\n            return test;\r\n        }\r\n    \r\n        obj.loadValidation = function() {\r\n            if (obj.selectedCell) {\r\n                var currentPage = parseInt(obj.tbody.firstChild.getAttribute('data-y')) / 100;\r\n                var selectedPage = parseInt(obj.selectedCell[3] / 100);\r\n                var totalPages = parseInt(obj.rows.length / 100);\r\n    \r\n                if (currentPage != selectedPage && selectedPage <= totalPages) {\r\n                    if (! Array.prototype.indexOf.call(obj.tbody.children, obj.rows[obj.selectedCell[3]])) {\r\n                        obj.loadPage(selectedPage);\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n    \r\n            return false;\r\n        }\r\n    \r\n        /**\r\n         * Reset search\r\n         */\r\n        obj.resetSearch = function() {\r\n            obj.searchInput.value = '';\r\n            obj.search('');\r\n            obj.results = null;\r\n        }\r\n\r\n        /**\r\n         * Search\r\n         */\r\n        obj.search = function(query) {\r\n            // Query\r\n            if (query) {\r\n                var query = query.toLowerCase();\r\n            }\r\n    \r\n            // Reset any filter\r\n            if (obj.options.filters) {\r\n                obj.resetFilters();\r\n            }\r\n\r\n            // Reset selection\r\n            obj.resetSelection();\r\n    \r\n            // Total of results\r\n            obj.pageNumber = 0;\r\n            obj.results = [];\r\n    \r\n            if (query) {\r\n                // Search filter\r\n                var search = function(item, query, index) {\r\n                    for (var i = 0; i < item.length; i++) {\r\n                        if ((''+item[i]).toLowerCase().search(query) >= 0 ||\r\n                            (''+obj.records[index][i].innerHTML).toLowerCase().search(query) >= 0) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n    \r\n                // Result\r\n                var addToResult = function(k) {\r\n                    if (obj.results.indexOf(k) == -1) {\r\n                        obj.results.push(k);\r\n                    }\r\n                }\r\n    \r\n                // Filter\r\n                var data = obj.options.data.filter(function(v, k) {\r\n                    if (search(v, query, k)) {\r\n                        // Merged rows found\r\n                        var rows = obj.isRowMerged(k);\r\n                        if (rows.length) {\r\n                            for (var i = 0; i < rows.length; i++) {\r\n                                var row = jexcel.getIdFromColumnName(rows[i], true);\r\n                                for (var j = 0; j < obj.options.mergeCells[rows[i]][1]; j++) {\r\n                                    addToResult(row[1]+j);\r\n                                }\r\n                            }\r\n                        } else {\r\n                            // Normal row found\r\n                            addToResult(k);\r\n                        }\r\n                        return true;\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                });\r\n            } else {\r\n                obj.results = null;\r\n            }\r\n\r\n            return obj.updateResult();\r\n        }\r\n    \r\n        obj.updateResult = function() {\r\n            var total = 0;\r\n            var index = 0;\r\n    \r\n            // Page 1\r\n            if (obj.options.lazyLoading == true) {\r\n                total = 100;\r\n            } else if (obj.options.pagination > 0) {\r\n                total = obj.options.pagination;\r\n            } else {\r\n                if (obj.results) {\r\n                    total = obj.results.length;\r\n                } else {\r\n                    total = obj.rows.length;\r\n                }\r\n            }\r\n    \r\n            // Reset current nodes\r\n            while (obj.tbody.firstChild) {\r\n                obj.tbody.removeChild(obj.tbody.firstChild);\r\n            }\r\n    \r\n            // Hide all records from the table\r\n            for (var j = 0; j < obj.rows.length; j++) {\r\n                if (! obj.results || obj.results.indexOf(j) > -1) {\r\n                    if (index < total) {\r\n                        obj.tbody.appendChild(obj.rows[j]);\r\n                        index++;\r\n                    }\r\n                    obj.rows[j].style.display = '';\r\n                } else {\r\n                    obj.rows[j].style.display = 'none';\r\n                }\r\n            }\r\n    \r\n            // Update pagination\r\n            if (obj.options.pagination > 0) {\r\n                obj.updatePagination();\r\n            }\r\n\r\n            obj.updateCornerPosition();\r\n    \r\n            return total;\r\n        }\r\n\r\n        /**\r\n         * Which page the cell is\r\n         */\r\n        obj.whichPage = function(cell) {\r\n            // Search\r\n            if (obj.options.search == true && obj.results) {\r\n                cell = obj.results.indexOf(cell);\r\n            }\r\n    \r\n            return (Math.ceil((parseInt(cell) + 1) / parseInt(obj.options.pagination))) - 1;\r\n        }\r\n    \r\n        /**\r\n         * Go to page\r\n         */\r\n        obj.page = function(pageNumber) {\r\n            var oldPage = obj.pageNumber;\r\n\r\n            // Search\r\n            if (obj.options.search == true && obj.results) {\r\n                var results = obj.results;\r\n            } else {\r\n                var results = obj.rows;\r\n            }\r\n    \r\n            // Per page\r\n            var quantityPerPage = parseInt(obj.options.pagination);\r\n    \r\n            // pageNumber\r\n            if (pageNumber == null || pageNumber == -1) {\r\n                // Last page\r\n                pageNumber = Math.ceil(results.length / quantityPerPage) - 1;\r\n            }\r\n    \r\n            // Page number\r\n            obj.pageNumber = pageNumber;\r\n    \r\n            var startRow = (pageNumber * quantityPerPage);\r\n            var finalRow = (pageNumber * quantityPerPage) + quantityPerPage;\r\n            if (finalRow > results.length) {\r\n                finalRow = results.length;\r\n            }\r\n            if (startRow < 0) {\r\n                startRow = 0;\r\n            }\r\n    \r\n            // Reset container\r\n            while (obj.tbody.firstChild) {\r\n                obj.tbody.removeChild(obj.tbody.firstChild);\r\n            }\r\n    \r\n            // Appeding items\r\n            for (var j = startRow; j < finalRow; j++) {\r\n                if (obj.options.search == true && obj.results) {\r\n                    obj.tbody.appendChild(obj.rows[results[j]]);\r\n                } else {\r\n                    obj.tbody.appendChild(obj.rows[j]);\r\n                }\r\n            }\r\n    \r\n            if (obj.options.pagination > 0) {\r\n                obj.updatePagination();\r\n            }\r\n    \r\n            // Update corner position\r\n            obj.updateCornerPosition();\r\n\r\n            // Events\r\n            obj.dispatch('onchangepage', el, pageNumber, oldPage);\r\n        }\r\n    \r\n        /**\r\n         * Update the pagination\r\n         */\r\n        obj.updatePagination = function() {\r\n            // Reset container\r\n            obj.pagination.children[0].innerHTML = '';\r\n            obj.pagination.children[1].innerHTML = '';\r\n    \r\n            // Start pagination\r\n            if (obj.options.pagination) {\r\n                // Searchable\r\n                if (obj.options.search == true && obj.results) {\r\n                    var results = obj.results.length;\r\n                } else {\r\n                    var results = obj.rows.length;\r\n                }\r\n    \r\n                if (! results) {\r\n                    // No records found\r\n                    obj.pagination.children[0].innerHTML = obj.options.text.noRecordsFound;\r\n                } else {\r\n                    // Pagination container\r\n                    var quantyOfPages = Math.ceil(results / obj.options.pagination);\r\n    \r\n                    if (obj.pageNumber < 6) {\r\n                        var startNumber = 1;\r\n                        var finalNumber = quantyOfPages < 10 ? quantyOfPages : 10;\r\n                    } else if (quantyOfPages - obj.pageNumber < 5) {\r\n                        var startNumber = quantyOfPages - 9;\r\n                        var finalNumber = quantyOfPages;\r\n                        if (startNumber < 1) {\r\n                            startNumber = 1;\r\n                        }\r\n                    } else {\r\n                        var startNumber = obj.pageNumber - 4;\r\n                        var finalNumber = obj.pageNumber + 5;\r\n                    }\r\n    \r\n                    // First\r\n                    if (startNumber > 1) {\r\n                        var paginationItem = document.createElement('div');\r\n                        paginationItem.className = 'jexcel_page';\r\n                        paginationItem.innerHTML = '<';\r\n                        paginationItem.title = 1;\r\n                        obj.pagination.children[1].appendChild(paginationItem);\r\n                    }\r\n    \r\n                    // Get page links\r\n                    for (var i = startNumber; i <= finalNumber; i++) {\r\n                        var paginationItem = document.createElement('div');\r\n                        paginationItem.className = 'jexcel_page';\r\n                        paginationItem.innerHTML = i;\r\n                        obj.pagination.children[1].appendChild(paginationItem);\r\n    \r\n                        if (obj.pageNumber == (i-1)) {\r\n                            paginationItem.classList.add('jexcel_page_selected');\r\n                        }\r\n                    }\r\n    \r\n                    // Last\r\n                    if (finalNumber < quantyOfPages) {\r\n                        var paginationItem = document.createElement('div');\r\n                        paginationItem.className = 'jexcel_page';\r\n                        paginationItem.innerHTML = '>';\r\n                        paginationItem.title = quantyOfPages;\r\n                        obj.pagination.children[1].appendChild(paginationItem);\r\n                    }\r\n    \r\n                    // Text\r\n                    var format = function(format) {\r\n                        var args = Array.prototype.slice.call(arguments, 1);\r\n                        return format.replace(/{(\\d+)}/g, function(match, number) {\r\n                          return typeof args[number] != 'undefined'\r\n                            ? args[number]\r\n                            : match\r\n                          ;\r\n                        });\r\n                    };\r\n    \r\n                    obj.pagination.children[0].innerHTML = format(obj.options.text.showingPage, obj.pageNumber + 1, quantyOfPages)\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Download CSV table\r\n         * \r\n         * @return null\r\n         */\r\n        obj.download = function(includeHeaders) {\r\n            if (obj.options.allowExport == false) {\r\n                console.error('Export not allowed');\r\n            } else {\r\n                // Data\r\n                var data = '';\r\n                if (includeHeaders == true || obj.options.includeHeadersOnDownload == true) {\r\n                    data += obj.getHeaders().replace(/\\s+/gm,' ');\r\n                    data += \"\\r\\n\";\r\n                }\r\n\r\n                // Get data\r\n                data += obj.copy(false, obj.options.csvDelimiter, true);\r\n\r\n                // Download element\r\n                var blob = new Blob([\"\\uFEFF\"+data], {type: 'text/csv;charset=utf-8;'});\r\n\r\n                // IE Compatibility\r\n                if (window.navigator && window.navigator.msSaveOrOpenBlob) {\r\n                    window.navigator.msSaveOrOpenBlob(blob, obj.options.csvFileName + '.csv');\r\n                } else {\r\n                    // Download element\r\n                    var pom = document.createElement('a');\r\n                    var url = URL.createObjectURL(blob);\r\n                    pom.href = url;\r\n                    pom.setAttribute('download', obj.options.csvFileName + '.csv');\r\n                    document.body.appendChild(pom);\r\n                    pom.click();\r\n                    pom.parentNode.removeChild(pom);\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Initializes a new history record for undo/redo\r\n         * \r\n         * @return null\r\n         */\r\n        obj.setHistory = function(changes) {\r\n            if (obj.ignoreHistory != true) {\r\n                // Increment and get the current history index\r\n                var index = ++obj.historyIndex;\r\n    \r\n                // Slice the array to discard undone changes\r\n                obj.history = (obj.history = obj.history.slice(0, index + 1));\r\n    \r\n                // Keep history\r\n                obj.history[index] = changes;\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Copy method\r\n         * \r\n         * @param bool highlighted - Get only highlighted cells\r\n         * @param delimiter - \\t default to keep compatibility with excel\r\n         * @return string value\r\n         */\r\n        obj.copy = function(highlighted, delimiter, returnData) {\r\n            if (! delimiter) {\r\n                delimiter = \"\\t\";\r\n            }\r\n    \r\n            // Controls\r\n            var header = [];\r\n            var col = [];\r\n            var colLabel = [];\r\n            var row = [];\r\n            var rowLabel = [];\r\n            var x = obj.options.data[0].length\r\n            var y = obj.options.data.length\r\n            var tmp = '';\r\n            var copyHeader = obj.options.includeHeadersOnCopy;\r\n\r\n            // Reset container\r\n            obj.style = [];\r\n    \r\n            // Go through the columns to get the data\r\n            for (var j = 0; j < y; j++) {\r\n                col = [];\r\n                colLabel = [];\r\n    \r\n                for (var i = 0; i < x; i++) {\r\n                    // If cell is highlighted\r\n                    if (! highlighted || obj.records[j][i].classList.contains('highlight')) {\r\n                        if (copyHeader == true) {\r\n                            header.push(obj.headers[i].innerText);\r\n                        }\r\n                        // Values\r\n                        var value = obj.options.data[j][i];\r\n                        if (value.match && (value.match(/,/g) || value.match(/\\n/) || value.match(/\\\"/))) {\r\n                            value = value.replace(new RegExp('\"', 'g'), '\"\"');\r\n                            value = '\"' + value + '\"';\r\n                        }\r\n                        col.push(value);\r\n    \r\n                        // Labels\r\n                        if (obj.options.columns[i].type == 'checkbox' || obj.options.columns[i].type == 'radio') {\r\n                            var label = value;\r\n                        } else {\r\n                            if (obj.options.stripHTMLOnCopy == true) {\r\n                                var label = obj.records[j][i].innerText;\r\n                            } else {\r\n                                var label = obj.records[j][i].innerHTML;\r\n                            }\r\n                            if (label.match && (label.match(/,/g) || label.match(/\\n/) || label.match(/\\\"/))) {\r\n                                // Scape double quotes\r\n                                label = label.replace(new RegExp('\"', 'g'), '\"\"');\r\n                                label = '\"' + label + '\"';\r\n                            }\r\n                        }\r\n                        colLabel.push(label);\r\n    \r\n                        // Get style\r\n                        tmp = obj.records[j][i].getAttribute('style');\r\n                        tmp = tmp.replace('display: none;', '');\r\n                        obj.style.push(tmp ? tmp : '');\r\n                    }\r\n                }\r\n    \r\n                if (col.length) {\r\n                    if (copyHeader) {\r\n                        row.push(header.join(delimiter));\r\n                    }\r\n                    row.push(col.join(delimiter));\r\n                }\r\n                if (colLabel.length) {\r\n                    if (copyHeader) {\r\n                        rowLabel.push(header.join(delimiter));\r\n                    }\r\n                    rowLabel.push(colLabel.join(delimiter));\r\n                }\r\n                copyHeader = false;\r\n            }\r\n\r\n            // Final string\r\n            var str = row.join(\"\\r\\n\");\r\n            var strLabel = rowLabel.join(\"\\r\\n\");\r\n\r\n            // Create a hidden textarea to copy the values\r\n            if (! returnData) {\r\n                if (obj.options.copyCompatibility == true) {\r\n                    obj.textarea.value = strLabel;\r\n                } else {\r\n                    obj.textarea.value = str;\r\n                }\r\n                obj.textarea.select();\r\n                document.execCommand(\"copy\");\r\n            }\r\n    \r\n            // Keep data\r\n            if (obj.options.copyCompatibility == true) {\r\n                obj.data = strLabel;\r\n            } else {\r\n                obj.data = str;\r\n            }\r\n            // Keep non visible information\r\n            obj.hashString = obj.hash(obj.data);\r\n    \r\n            // Any exiting border should go\r\n            obj.removeCopyingSelection();\r\n\r\n            // Border\r\n            if (obj.highlighted) {\r\n                for (var i = 0; i < obj.highlighted.length; i++) {\r\n                    obj.highlighted[i].classList.add('copying');\r\n                    if (obj.highlighted[i].classList.contains('highlight-left')) {\r\n                        obj.highlighted[i].classList.add('copying-left');\r\n                    }\r\n                    if (obj.highlighted[i].classList.contains('highlight-right')) {\r\n                        obj.highlighted[i].classList.add('copying-right');\r\n                    }\r\n                    if (obj.highlighted[i].classList.contains('highlight-top')) {\r\n                        obj.highlighted[i].classList.add('copying-top');\r\n                    }\r\n                    if (obj.highlighted[i].classList.contains('highlight-bottom')) {\r\n                        obj.highlighted[i].classList.add('copying-bottom');\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Paste event\r\n            obj.dispatch('oncopy', el, obj.options.copyCompatibility == true ? rowLabel : row, obj.hashString);\r\n\r\n            return obj.data;\r\n        }\r\n    \r\n        /**\r\n         * jExcel paste method\r\n         * \r\n         * @param integer row number\r\n         * @return string value\r\n         */\r\n        obj.paste = function(x, y, data) {\r\n            // Paste filter\r\n            var ret = obj.dispatch('onbeforepaste', el, data, x, y);\r\n\r\n            if (ret === false) {\r\n                return false;\r\n            } else if (ret) {\r\n                var data = ret;\r\n            }\r\n    \r\n            // Controls\r\n            var hash = obj.hash(data);\r\n            var style = (hash == obj.hashString) ? obj.style : null;\r\n    \r\n            // Depending on the behavior\r\n            if (obj.options.copyCompatibility == true && hash == obj.hashString) {\r\n                var data = obj.data;\r\n            }\r\n    \r\n            // Split new line\r\n            var data = obj.parseCSV(data, \"\\t\");\r\n    \r\n            if (x != null && y != null && data) {\r\n                // Records\r\n                var i = 0;\r\n                var j = 0;\r\n                var records = [];\r\n                var newStyle = {};\r\n                var oldStyle = {};\r\n                var styleIndex = 0;\r\n    \r\n                // Index\r\n                var colIndex = parseInt(x);\r\n                var rowIndex = parseInt(y);\r\n                var row = null;\r\n    \r\n                // Go through the columns to get the data\r\n                while (row = data[j]) {\r\n                    i = 0;\r\n                    colIndex = parseInt(x);\r\n    \r\n                    while (row[i] != null) {\r\n                        // Update and keep history\r\n                        var record = obj.updateCell(colIndex, rowIndex, row[i]);\r\n                        // Keep history\r\n                        records.push(record);\r\n                        // Update all formulas in the chain\r\n                        obj.updateFormulaChain(colIndex, rowIndex, records);\r\n                        // Style\r\n                        if (style && style[styleIndex]) {\r\n                            var columnName = jexcel.getColumnNameFromId([colIndex, rowIndex]);\r\n                            newStyle[columnName] = style[styleIndex];\r\n                            oldStyle[columnName] = obj.getStyle(columnName);\r\n                            obj.records[rowIndex][colIndex].setAttribute('style', style[styleIndex]);\r\n                            styleIndex++\r\n                        }\r\n                        i++;\r\n                        if (row[i] != null) {\r\n                            if (colIndex >= obj.headers.length - 1) {\r\n                                obj.insertColumn();\r\n                            }\r\n                            colIndex = obj.right.get(colIndex, rowIndex);\r\n                        }\r\n                    }\r\n    \r\n                    j++;\r\n                    if (data[j]) {\r\n                        if (rowIndex >= obj.rows.length-1) {\r\n                            obj.insertRow();\r\n                        }\r\n                        rowIndex = obj.down.get(x, rowIndex);\r\n                    }\r\n                }\r\n    \r\n                // Select the new cells\r\n                obj.updateSelectionFromCoords(x, y, colIndex, rowIndex);\r\n    \r\n                // Update history\r\n                obj.setHistory({\r\n                    action:'setValue',\r\n                    records:records,\r\n                    selection:obj.selectedCell,\r\n                    newStyle:newStyle,\r\n                    oldStyle:oldStyle,\r\n                });\r\n    \r\n                // Update table\r\n                obj.updateTable();\r\n    \r\n                // Paste event\r\n                obj.dispatch('onpaste', el, data);\r\n    \r\n                // On after changes\r\n                obj.onafterchanges(el, records);\r\n            }\r\n\r\n            obj.removeCopyingSelection();\r\n        }\r\n\r\n        /**\r\n         * Remove copying border\r\n         */\r\n        obj.removeCopyingSelection = function() {\r\n            var copying = document.querySelectorAll('.jexcel .copying');\r\n            for (var i = 0; i < copying.length; i++) {\r\n                copying[i].classList.remove('copying');\r\n                copying[i].classList.remove('copying-left');\r\n                copying[i].classList.remove('copying-right');\r\n                copying[i].classList.remove('copying-top');\r\n                copying[i].classList.remove('copying-bottom');\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Process row\r\n         */\r\n        obj.historyProcessRow = function(type, historyRecord) {\r\n            var rowIndex = (! historyRecord.insertBefore) ? historyRecord.rowNumber + 1 : historyRecord.rowNumber;\r\n    \r\n            if (obj.options.search == true) {\r\n                if (obj.results && obj.results.length != obj.rows.length) {\r\n                    obj.resetSearch();\r\n                }\r\n            }\r\n    \r\n            // Remove row\r\n            if (type == 1) {\r\n                var numOfRows = historyRecord.numOfRows;\r\n                // Remove nodes\r\n                for (var j = rowIndex; j < (numOfRows + rowIndex); j++) {\r\n                    obj.rows[j].parentNode.removeChild(obj.rows[j]);\r\n                }\r\n                // Remove references\r\n                obj.records.splice(rowIndex, numOfRows);\r\n                obj.options.data.splice(rowIndex, numOfRows);\r\n                obj.rows.splice(rowIndex, numOfRows);\r\n    \r\n                obj.conditionalSelectionUpdate(1, rowIndex, (numOfRows + rowIndex) - 1);\r\n            } else {\r\n                // Insert data\r\n                obj.records = jexcel.injectArray(obj.records, rowIndex, historyRecord.rowRecords);\r\n                obj.options.data = jexcel.injectArray(obj.options.data, rowIndex, historyRecord.rowData);\r\n                obj.rows = jexcel.injectArray(obj.rows, rowIndex, historyRecord.rowNode);\r\n                // Insert nodes\r\n                var index = 0\r\n                for (var j = rowIndex; j < (historyRecord.numOfRows + rowIndex); j++) {\r\n                    obj.tbody.insertBefore(historyRecord.rowNode[index], obj.tbody.children[j]);\r\n                    index++;\r\n                }\r\n            }\r\n    \r\n            // Respect pagination\r\n            if (obj.options.pagination > 0) {\r\n                obj.page(obj.pageNumber);\r\n            }\r\n    \r\n            obj.updateTableReferences();\r\n        }\r\n    \r\n        /**\r\n         * Process column\r\n         */\r\n        obj.historyProcessColumn = function(type, historyRecord) {\r\n            var columnIndex = (! historyRecord.insertBefore) ? historyRecord.columnNumber + 1 : historyRecord.columnNumber;\r\n    \r\n            // Remove column\r\n            if (type == 1) {\r\n                var numOfColumns = historyRecord.numOfColumns;\r\n    \r\n                obj.options.columns.splice(columnIndex, numOfColumns);\r\n                for (var i = columnIndex; i < (numOfColumns + columnIndex); i++) {\r\n                    obj.headers[i].parentNode.removeChild(obj.headers[i]);\r\n                    obj.colgroup[i].parentNode.removeChild(obj.colgroup[i]);\r\n                }\r\n                obj.headers.splice(columnIndex, numOfColumns);\r\n                obj.colgroup.splice(columnIndex, numOfColumns);\r\n                for (var j = 0; j < historyRecord.data.length; j++) {\r\n                    for (var i = columnIndex; i < (numOfColumns + columnIndex); i++) {\r\n                        obj.records[j][i].parentNode.removeChild(obj.records[j][i]);\r\n                    }\r\n                    obj.records[j].splice(columnIndex, numOfColumns);\r\n                    obj.options.data[j].splice(columnIndex, numOfColumns);\r\n                }\r\n                // Process footers\r\n                if (obj.options.footers) {\r\n                    for (var j = 0; j < obj.options.footers.length; j++) {\r\n                        obj.options.footers[j].splice(columnIndex, numOfColumns);\r\n                    }\r\n                }\r\n            } else {\r\n                // Insert data\r\n                obj.options.columns = jexcel.injectArray(obj.options.columns, columnIndex, historyRecord.columns);\r\n                obj.headers = jexcel.injectArray(obj.headers, columnIndex, historyRecord.headers);\r\n                obj.colgroup = jexcel.injectArray(obj.colgroup, columnIndex, historyRecord.colgroup);\r\n    \r\n                var index = 0\r\n                for (var i = columnIndex; i < (historyRecord.numOfColumns + columnIndex); i++) {\r\n                    obj.headerContainer.insertBefore(historyRecord.headers[index], obj.headerContainer.children[i+1]);\r\n                    obj.colgroupContainer.insertBefore(historyRecord.colgroup[index], obj.colgroupContainer.children[i+1]);\r\n                    index++;\r\n                }\r\n    \r\n                for (var j = 0; j < historyRecord.data.length; j++) {\r\n                    obj.options.data[j] = jexcel.injectArray(obj.options.data[j], columnIndex, historyRecord.data[j]);\r\n                    obj.records[j] = jexcel.injectArray(obj.records[j], columnIndex, historyRecord.records[j]);\r\n                    var index = 0\r\n                    for (var i = columnIndex; i < (historyRecord.numOfColumns + columnIndex); i++) {\r\n                        obj.rows[j].insertBefore(historyRecord.records[j][index], obj.rows[j].children[i+1]);\r\n                        index++;\r\n                    }\r\n                }\r\n                // Process footers\r\n                if (obj.options.footers) {\r\n                    for (var j = 0; j < obj.options.footers.length; j++) {\r\n                        obj.options.footers[j] = jexcel.injectArray(obj.options.footers[j], columnIndex, historyRecord.footers[j]);\r\n                    }\r\n                }\r\n            }\r\n    \r\n            // Adjust nested headers\r\n            if (obj.options.nestedHeaders && obj.options.nestedHeaders.length > 0) {\r\n                // Flexible way to handle nestedheaders\r\n                if (obj.options.nestedHeaders[0] && obj.options.nestedHeaders[0][0]) {\r\n                    for (var j = 0; j < obj.options.nestedHeaders.length; j++) {\r\n                        if (type == 1) {\r\n                            var colspan = parseInt(obj.options.nestedHeaders[j][obj.options.nestedHeaders[j].length-1].colspan) - historyRecord.numOfColumns;\r\n                        } else {\r\n                            var colspan = parseInt(obj.options.nestedHeaders[j][obj.options.nestedHeaders[j].length-1].colspan) + historyRecord.numOfColumns;\r\n                        }\r\n                        obj.options.nestedHeaders[j][obj.options.nestedHeaders[j].length-1].colspan = colspan;\r\n                        obj.thead.children[j].children[obj.thead.children[j].children.length-1].setAttribute('colspan', colspan);\r\n                    }\r\n                } else {\r\n                    if (type == 1) {\r\n                        var colspan = parseInt(obj.options.nestedHeaders[0].colspan) - historyRecord.numOfColumns;\r\n                    } else {\r\n                        var colspan = parseInt(obj.options.nestedHeaders[0].colspan) + historyRecord.numOfColumns;\r\n                    }\r\n                    obj.options.nestedHeaders[0].colspan = colspan;\r\n                    obj.thead.children[0].children[obj.thead.children[0].children.length-1].setAttribute('colspan', colspan);\r\n                }\r\n            }\r\n    \r\n            obj.updateTableReferences();\r\n        }\r\n    \r\n        /**\r\n         * Undo last action\r\n         */\r\n        obj.undo = function() {\r\n            // Ignore events and history\r\n            var ignoreEvents = obj.ignoreEvents ? true : false;\r\n            var ignoreHistory = obj.ignoreHistory ? true : false;\r\n    \r\n            obj.ignoreEvents = true;\r\n            obj.ignoreHistory = true;\r\n    \r\n            // Records\r\n            var records = [];\r\n    \r\n            // Update cells\r\n            if (obj.historyIndex >= 0) {\r\n                // History\r\n                var historyRecord = obj.history[obj.historyIndex--];\r\n    \r\n                if (historyRecord.action == 'insertRow') {\r\n                    obj.historyProcessRow(1, historyRecord);\r\n                } else if (historyRecord.action == 'deleteRow') {\r\n                    obj.historyProcessRow(0, historyRecord);\r\n                } else if (historyRecord.action == 'insertColumn') {\r\n                    obj.historyProcessColumn(1, historyRecord);\r\n                } else if (historyRecord.action == 'deleteColumn') {\r\n                    obj.historyProcessColumn(0, historyRecord);\r\n                } else if (historyRecord.action == 'moveRow') {\r\n                    obj.moveRow(historyRecord.newValue, historyRecord.oldValue);\r\n                } else if (historyRecord.action == 'moveColumn') {\r\n                    obj.moveColumn(historyRecord.newValue, historyRecord.oldValue);\r\n                } else if (historyRecord.action == 'setMerge') {\r\n                    obj.removeMerge(historyRecord.column, historyRecord.data);\r\n                } else if (historyRecord.action == 'setStyle') {\r\n                    obj.setStyle(historyRecord.oldValue, null, null, 1);\r\n                } else if (historyRecord.action == 'setWidth') {\r\n                    obj.setWidth(historyRecord.column, historyRecord.oldValue);\r\n                } else if (historyRecord.action == 'setHeight') {\r\n                    obj.setHeight(historyRecord.row, historyRecord.oldValue);\r\n                } else if (historyRecord.action == 'setHeader') {\r\n                    obj.setHeader(historyRecord.column, historyRecord.oldValue);\r\n                } else if (historyRecord.action == 'setComments') {\r\n                    obj.setComments(historyRecord.column, historyRecord.oldValue[0], historyRecord.oldValue[1]);\r\n                } else if (historyRecord.action == 'orderBy') {\r\n                    var rows = [];\r\n                    for (var j = 0; j < historyRecord.rows.length; j++) {\r\n                        rows[historyRecord.rows[j]] = j;\r\n                    }\r\n                    obj.updateOrderArrow(historyRecord.column, historyRecord.order ? 0 : 1);\r\n                    obj.updateOrder(rows);\r\n                } else if (historyRecord.action == 'setValue') {\r\n                    // Redo for changes in cells\r\n                    for (var i = 0; i < historyRecord.records.length; i++) {\r\n                        records.push({\r\n                            x: historyRecord.records[i].x,\r\n                            y: historyRecord.records[i].y,\r\n                            newValue: historyRecord.records[i].oldValue,\r\n                        });\r\n\r\n                        if (historyRecord.oldStyle) {\r\n                            obj.resetStyle(historyRecord.oldStyle);\r\n                        }\r\n                    }\r\n                    // Update records\r\n                    obj.setValue(records);\r\n\r\n                    // Update selection\r\n                    if (historyRecord.selection) {\r\n                        obj.updateSelectionFromCoords(historyRecord.selection[0], historyRecord.selection[1], historyRecord.selection[2], historyRecord.selection[3]);\r\n                    }\r\n                }\r\n            }\r\n            obj.ignoreEvents = ignoreEvents;\r\n            obj.ignoreHistory = ignoreHistory;\r\n    \r\n            // Events\r\n            obj.dispatch('onundo', el, historyRecord);\r\n        }\r\n    \r\n        /**\r\n         * Redo previously undone action\r\n         */\r\n        obj.redo = function() {\r\n            // Ignore events and history\r\n            var ignoreEvents = obj.ignoreEvents ? true : false;\r\n            var ignoreHistory = obj.ignoreHistory ? true : false;\r\n    \r\n            obj.ignoreEvents = true;\r\n            obj.ignoreHistory = true;\r\n    \r\n            // Records\r\n            var records = [];\r\n    \r\n            // Update cells\r\n            if (obj.historyIndex < obj.history.length - 1) {\r\n                // History\r\n                var historyRecord = obj.history[++obj.historyIndex];\r\n    \r\n                if (historyRecord.action == 'insertRow') {\r\n                    obj.historyProcessRow(0, historyRecord);\r\n                } else if (historyRecord.action == 'deleteRow') {\r\n                    obj.historyProcessRow(1, historyRecord);\r\n                } else if (historyRecord.action == 'insertColumn') {\r\n                    obj.historyProcessColumn(0, historyRecord);\r\n                } else if (historyRecord.action == 'deleteColumn') {\r\n                    obj.historyProcessColumn(1, historyRecord);\r\n                } else if (historyRecord.action == 'moveRow') {\r\n                    obj.moveRow(historyRecord.oldValue, historyRecord.newValue);\r\n                } else if (historyRecord.action == 'moveColumn') {\r\n                    obj.moveColumn(historyRecord.oldValue, historyRecord.newValue);\r\n                } else if (historyRecord.action == 'setMerge') {\r\n                    obj.setMerge(historyRecord.column, historyRecord.colspan, historyRecord.rowspan, 1);\r\n                } else if (historyRecord.action == 'setStyle') {\r\n                    obj.setStyle(historyRecord.newValue, null, null, 1);\r\n                } else if (historyRecord.action == 'setWidth') {\r\n                    obj.setWidth(historyRecord.column, historyRecord.newValue);\r\n                } else if (historyRecord.action == 'setHeight') {\r\n                    obj.setHeight(historyRecord.row, historyRecord.newValue);\r\n                } else if (historyRecord.action == 'setHeader') {\r\n                    obj.setHeader(historyRecord.column, historyRecord.newValue);\r\n                } else if (historyRecord.action == 'setComments') {\r\n                    obj.setComments(historyRecord.column, historyRecord.newValue[0], historyRecord.newValue[1]);\r\n                } else if (historyRecord.action == 'orderBy') {\r\n                    obj.updateOrderArrow(historyRecord.column, historyRecord.order);\r\n                    obj.updateOrder(historyRecord.rows);\r\n                } else if (historyRecord.action == 'setValue') {\r\n                    obj.setValue(historyRecord.records);\r\n                    // Redo for changes in cells\r\n                    for (var i = 0; i < historyRecord.records.length; i++) {\r\n                        if (historyRecord.oldStyle) {\r\n                            obj.resetStyle(historyRecord.newStyle);\r\n                        }\r\n                    }\r\n                    // Update selection\r\n                    if (historyRecord.selection) {\r\n                        obj.updateSelectionFromCoords(historyRecord.selection[0], historyRecord.selection[1], historyRecord.selection[2], historyRecord.selection[3]);\r\n                    }\r\n                }\r\n            }\r\n            obj.ignoreEvents = ignoreEvents;\r\n            obj.ignoreHistory = ignoreHistory;\r\n    \r\n            // Events\r\n            obj.dispatch('onredo', el, historyRecord);\r\n        }\r\n    \r\n        /**\r\n         * Get dropdown value from key\r\n         */\r\n        obj.getDropDownValue = function(column, key) {\r\n            var value = [];\r\n    \r\n            if (obj.options.columns[column] && obj.options.columns[column].source) {\r\n                // Create array from source\r\n                var combo = [];\r\n                var source = obj.options.columns[column].source;\r\n    \r\n                for (var i = 0; i < source.length; i++) {\r\n                    if (typeof(source[i]) == 'object') {\r\n                        combo[source[i].id] = source[i].name;\r\n                    } else {\r\n                        combo[source[i]] = source[i];\r\n                    }\r\n                }\r\n    \r\n                // Guarantee single multiple compatibility\r\n                var keys = Array.isArray(key) ? key : ('' + key).split(';');\r\n    \r\n                for (var i = 0; i < keys.length; i++) {\r\n                    if (typeof(keys[i]) === 'object') {\r\n                        value.push(combo[keys[i].id]);\r\n                    } else {\r\n                        if (combo[keys[i]]) {\r\n                            value.push(combo[keys[i]]);\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                console.error('Invalid column');\r\n            }\r\n    \r\n            return (value.length > 0) ? value.join('; ') : '';\r\n        }\r\n    \r\n        /**\r\n         * From starckoverflow contributions\r\n         */\r\n        obj.parseCSV = function(str, delimiter) {\r\n            // Remove last line break\r\n            str = str.replace(/\\r?\\n$|\\r$|\\n$/g, \"\");\r\n            // Last caracter is the delimiter\r\n            if (str.charCodeAt(str.length-1) == 9) {\r\n                str += \"\\0\";\r\n            }\r\n            // user-supplied delimeter or default comma\r\n            delimiter = (delimiter || \",\");\r\n    \r\n            var arr = [];\r\n            var quote = false;  // true means we're inside a quoted field\r\n            // iterate over each character, keep track of current row and column (of the returned array)\r\n            for (var row = 0, col = 0, c = 0; c < str.length; c++) {\r\n                var cc = str[c], nc = str[c+1];\r\n                arr[row] = arr[row] || [];\r\n                arr[row][col] = arr[row][col] || '';\r\n    \r\n                // If the current character is a quotation mark, and we're inside a quoted field, and the next character is also a quotation mark, add a quotation mark to the current column and skip the next character\r\n                if (cc == '\"' && quote && nc == '\"') { arr[row][col] += cc; ++c; continue; }  \r\n    \r\n                // If it's just one quotation mark, begin/end quoted field\r\n                if (cc == '\"') { quote = !quote; continue; }\r\n    \r\n                // If it's a comma and we're not in a quoted field, move on to the next column\r\n                if (cc == delimiter && !quote) { ++col; continue; }\r\n    \r\n                // If it's a newline (CRLF) and we're not in a quoted field, skip the next character and move on to the next row and move to column 0 of that new row\r\n                if (cc == '\\r' && nc == '\\n' && !quote) { ++row; col = 0; ++c; continue; }\r\n    \r\n                // If it's a newline (LF or CR) and we're not in a quoted field, move on to the next row and move to column 0 of that new row\r\n                if (cc == '\\n' && !quote) { ++row; col = 0; continue; }\r\n                if (cc == '\\r' && !quote) { ++row; col = 0; continue; }\r\n    \r\n                // Otherwise, append the current character to the current column\r\n                arr[row][col] += cc;\r\n            }\r\n            return arr;\r\n        }\r\n    \r\n        obj.hash = function(str) {\r\n            var hash = 0, i, chr;\r\n    \r\n            if (str.length === 0) {\r\n                return hash;\r\n            } else {\r\n                for (i = 0; i < str.length; i++) {\r\n                  chr = str.charCodeAt(i);\r\n                  hash = ((hash << 5) - hash) + chr;\r\n                  hash |= 0;\r\n                }\r\n            }\r\n            return hash;\r\n        }\r\n    \r\n        obj.onafterchanges = function(el, records) {\r\n            // Events\r\n            obj.dispatch('onafterchanges', el, records);\r\n        }\r\n    \r\n        obj.destroy = function() {\r\n            jexcel.destroy(el);\r\n        }\r\n\r\n        /**\r\n         * Initialization method\r\n         */\r\n        obj.init = function() {\r\n            jexcel.current = obj;\r\n    \r\n            // Build handlers\r\n            if (typeof(jexcel.build) == 'function') {\r\n                if (obj.options.root) {\r\n                    jexcel.build(obj.options.root);\r\n                } else {\r\n                    jexcel.build(document);\r\n                    jexcel.build = null;\r\n                }\r\n            }\r\n    \r\n            // Event\r\n            el.setAttribute('tabindex', 1);\r\n            el.addEventListener('focus', function(e) {\r\n                if (jexcel.current && ! obj.selectedCell) {\r\n                    obj.updateSelectionFromCoords(0,0,0,0);\r\n                    obj.left();\r\n                }\r\n            });\r\n\r\n            // Load the table data based on an CSV file\r\n            if (obj.options.csv) {\r\n                // Loading\r\n                if (obj.options.loadingSpin == true) {\r\n                    jSuites.loading.show();\r\n                }\r\n    \r\n                // Load CSV file\r\n                jSuites.ajax({\r\n                    url: obj.options.csv,\r\n                    method: obj.options.method,\r\n                    data: obj.options.requestVariables,\r\n                    dataType: 'text',\r\n                    success: function(result) {\r\n                        // Convert data\r\n                        var newData = obj.parseCSV(result, obj.options.csvDelimiter)\r\n    \r\n                        // Headers\r\n                        if (obj.options.csvHeaders == true && newData.length > 0) {\r\n                            var headers = newData.shift();\r\n                            for(var i = 0; i < headers.length; i++) {\r\n                                if (! obj.options.columns[i]) {\r\n                                    obj.options.columns[i] = { type:'text', align:obj.options.defaultColAlign, width:obj.options.defaultColWidth };\r\n                                }\r\n                                // Precedence over pre-configurated titles\r\n                                if (typeof obj.options.columns[i].title === 'undefined') {\r\n                                  obj.options.columns[i].title = headers[i];\r\n                                }\r\n                            }\r\n                        }\r\n                        // Data\r\n                        obj.options.data = newData;\r\n                        // Prepare table\r\n                        obj.prepareTable();\r\n                        // Hide spin\r\n                        if (obj.options.loadingSpin == true) {\r\n                            jSuites.loading.hide();\r\n                        }\r\n                    }\r\n                });\r\n            } else if (obj.options.url) {\r\n                // Loading\r\n                if (obj.options.loadingSpin == true) {\r\n                    jSuites.loading.show();\r\n                }\r\n    \r\n                jSuites.ajax({\r\n                    url: obj.options.url,\r\n                    method: obj.options.method,\r\n                    data: obj.options.requestVariables,\r\n                    dataType: 'json',\r\n                    success: function(result) {\r\n                        // Data\r\n                        obj.options.data = (result.data) ? result.data : result;\r\n                        // Prepare table\r\n                        obj.prepareTable();\r\n                        // Hide spin\r\n                        if (obj.options.loadingSpin == true) {\r\n                            jSuites.loading.hide();\r\n                        }\r\n                    }\r\n                });\r\n            } else {\r\n                // Prepare table\r\n                obj.prepareTable();\r\n            }\r\n        }\r\n    \r\n        // Context menu\r\n        if (options && options.contextMenu != null) {\r\n            obj.options.contextMenu = options.contextMenu;\r\n        } else {\r\n            obj.options.contextMenu = function(el, x, y, e) {\r\n                var items = [];\r\n    \r\n                if (y == null) {\r\n                    // Insert a new column\r\n                    if (obj.options.allowInsertColumn == true) {\r\n                        items.push({\r\n                            title:obj.options.text.insertANewColumnBefore,\r\n                            onclick:function() {\r\n                                obj.insertColumn(1, parseInt(x), 1);\r\n                            }\r\n                        });\r\n                    }\r\n    \r\n                    if (obj.options.allowInsertColumn == true) {\r\n                        items.push({\r\n                            title:obj.options.text.insertANewColumnAfter,\r\n                            onclick:function() {\r\n                                obj.insertColumn(1, parseInt(x), 0);\r\n                            }\r\n                        });\r\n                    }\r\n    \r\n                    // Delete a column\r\n                    if (obj.options.allowDeleteColumn == true) {\r\n                        items.push({\r\n                            title:obj.options.text.deleteSelectedColumns,\r\n                            onclick:function() {\r\n                                obj.deleteColumn(obj.getSelectedColumns().length ? undefined : parseInt(x));\r\n                            }\r\n                        });\r\n                    }\r\n    \r\n                    // Rename column\r\n                    if (obj.options.allowRenameColumn == true) {\r\n                        items.push({\r\n                            title:obj.options.text.renameThisColumn,\r\n                            onclick:function() {\r\n                                obj.setHeader(x);\r\n                            }\r\n                        });\r\n                    }\r\n    \r\n                    // Sorting\r\n                    if (obj.options.columnSorting == true) {\r\n                        // Line\r\n                        items.push({ type:'line' });\r\n    \r\n                        items.push({\r\n                            title:obj.options.text.orderAscending,\r\n                            onclick:function() {\r\n                                obj.orderBy(x, 0);\r\n                            }\r\n                        });\r\n                        items.push({\r\n                            title:obj.options.text.orderDescending,\r\n                            onclick:function() {\r\n                                obj.orderBy(x, 1);\r\n                            }\r\n                        });\r\n                    }\r\n                } else {\r\n                    // Insert new row\r\n                    if (obj.options.allowInsertRow == true) {\r\n                        items.push({\r\n                            title:obj.options.text.insertANewRowBefore,\r\n                            onclick:function() {\r\n                                obj.insertRow(1, parseInt(y), 1);\r\n                            }\r\n                        });\r\n    \r\n                        items.push({\r\n                            title:obj.options.text.insertANewRowAfter,\r\n                            onclick:function() {\r\n                                obj.insertRow(1, parseInt(y));\r\n                            }\r\n                        });\r\n                    }\r\n    \r\n                    if (obj.options.allowDeleteRow == true) {\r\n                        items.push({\r\n                            title:obj.options.text.deleteSelectedRows,\r\n                            onclick:function() {\r\n                                obj.deleteRow(obj.getSelectedRows().length ? undefined : parseInt(y));\r\n                            }\r\n                        });\r\n                    }\r\n    \r\n                    if (x) {\r\n                        if (obj.options.allowComments == true) {\r\n                            items.push({ type:'line' });\r\n    \r\n                            var title = obj.records[y][x].getAttribute('title') || '';\r\n\r\n                            items.push({\r\n                                title: title ? obj.options.text.editComments : obj.options.text.addComments,\r\n                                onclick:function() {\r\n                                    var comment = prompt(obj.options.text.comments, title);\r\n                                    if (comment) {\r\n                                        obj.setComments([ x, y ], comment);\r\n                                    }\r\n                                }\r\n                            });\r\n    \r\n                            if (title) {\r\n                                items.push({\r\n                                    title:obj.options.text.clearComments,\r\n                                    onclick:function() {\r\n                                        obj.setComments([ x, y ], '');\r\n                                    }\r\n                                });\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                // Line\r\n                items.push({ type:'line' });\r\n    \r\n                // Copy\r\n                items.push({\r\n                    title:obj.options.text.copy,\r\n                    shortcut:'Ctrl + C',\r\n                    onclick:function() {\r\n                        obj.copy(true);\r\n                    }\r\n                });\r\n    \r\n                // Paste\r\n                if (navigator && navigator.clipboard) {\r\n                    items.push({\r\n                        title:obj.options.text.paste,\r\n                        shortcut:'Ctrl + V',\r\n                        onclick:function() {\r\n                            if (obj.selectedCell) {\r\n                                navigator.clipboard.readText().then(function(text) {\r\n                                    if (text) {\r\n                                        jexcel.current.paste(obj.selectedCell[0], obj.selectedCell[1], text);\r\n                                    }\r\n                                });\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n    \r\n                // Save\r\n                if (obj.options.allowExport) {\r\n                    items.push({\r\n                        title: obj.options.text.saveAs,\r\n                        shortcut: 'Ctrl + S',\r\n                        onclick: function () {\r\n                            obj.download();\r\n                        }\r\n                    });\r\n                }\r\n    \r\n                // About\r\n                if (obj.options.about) {\r\n                    items.push({\r\n                        title:obj.options.text.about,\r\n                        onclick:function() {\r\n                            alert(obj.options.about);\r\n                        }\r\n                    });\r\n                }\r\n    \r\n                return items;\r\n            }\r\n        }\r\n    \r\n        obj.scrollControls = function(e) {\r\n            obj.wheelControls();\r\n\r\n            if (obj.options.freezeColumns > 0 && obj.content.scrollLeft != scrollLeft) {\r\n                obj.updateFreezePosition();\r\n            }\r\n\r\n            // Close editor\r\n            if (obj.options.lazyLoading == true || obj.options.tableOverflow == true) {\r\n                if (obj.edition && e.target.className.substr(0,9) != 'jdropdown') {\r\n                    obj.closeEditor(obj.edition[0], true);\r\n                }\r\n            }\r\n        }\r\n\r\n        obj.wheelControls = function(e) {\r\n            if (obj.options.lazyLoading == true) {\r\n                if (jexcel.timeControlLoading == null) {\r\n                    jexcel.timeControlLoading = setTimeout(function() {\r\n                        if (obj.content.scrollTop + obj.content.clientHeight >= obj.content.scrollHeight) {\r\n                            if (obj.loadDown()) {\r\n                                if (obj.content.scrollTop + obj.content.clientHeight > obj.content.scrollHeight - 10) {\r\n                                    obj.content.scrollTop = obj.content.scrollTop - obj.content.clientHeight;\r\n                                }\r\n                                obj.updateCornerPosition();\r\n                            }\r\n                        } else if (obj.content.scrollTop <= obj.content.clientHeight) {\r\n                            if (obj.loadUp()) {\r\n                                if (obj.content.scrollTop < 10) {\r\n                                    obj.content.scrollTop = obj.content.scrollTop + obj.content.clientHeight;\r\n                                }\r\n                                obj.updateCornerPosition();\r\n                            }\r\n                        }\r\n    \r\n                        jexcel.timeControlLoading = null;\r\n                    }, 100);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Get width of all freezed cells together\r\n        obj.getFreezeWidth = function() {\r\n            var width = 0;\r\n            if (obj.options.freezeColumns > 0) {\r\n                for (var i = 0; i < obj.options.freezeColumns; i++) {\r\n                    width += parseInt(obj.options.columns[i].width);\r\n                }\r\n            }\r\n            return width;\r\n        }\r\n\r\n        var scrollLeft = 0;\r\n\r\n        obj.updateFreezePosition = function() {\r\n            scrollLeft = obj.content.scrollLeft;\r\n            var width = 0;\r\n            if (scrollLeft > 50) {\r\n                for (var i = 0; i < obj.options.freezeColumns; i++) {\r\n                    if (i > 0) {\r\n                        width += parseInt(obj.options.columns[i-1].width);\r\n                    }\r\n                    obj.headers[i].classList.add('jexcel_freezed');\r\n                    obj.headers[i].style.left = width + 'px';\r\n                    for (var j = 0; j < obj.rows.length; j++) {\r\n                        if (obj.rows[j] && obj.records[j][i]) {\r\n                            var shifted = (scrollLeft + (i > 0 ? obj.records[j][i-1].style.width : 0)) - 51 + 'px';\r\n                            obj.records[j][i].classList.add('jexcel_freezed');\r\n                            obj.records[j][i].style.left = shifted;\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                for (var i = 0; i < obj.options.freezeColumns; i++) {\r\n                    obj.headers[i].classList.remove('jexcel_freezed');\r\n                    obj.headers[i].style.left = '';\r\n                    for (var j = 0; j < obj.rows.length; j++) {\r\n                        if (obj.records[j][i]) {\r\n                            obj.records[j][i].classList.remove('jexcel_freezed');\r\n                            obj.records[j][i].style.left = '';\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Place the corner in the correct place\r\n            obj.updateCornerPosition();\r\n        }\r\n\r\n        el.addEventListener(\"DOMMouseScroll\", obj.wheelControls);\r\n        el.addEventListener(\"mousewheel\", obj.wheelControls);\r\n    \r\n        el.jexcel = obj;\r\n    \r\n        obj.init();\r\n    \r\n        return obj;\r\n    });\r\n    \r\n    jexcel.current = null;\r\n    jexcel.timeControl = null;\r\n    jexcel.timeControlLoading = null;\r\n    \r\n    jexcel.destroy = function(element, destroyEventHandlers) {\r\n        if (element.jexcel) {\r\n            var root = element.jexcel.options.root ? element.jexcel.options.root : document;\r\n            element.removeEventListener(\"DOMMouseScroll\", element.jexcel.scrollControls);\r\n            element.removeEventListener(\"mousewheel\", element.jexcel.scrollControls);\r\n            element.jexcel = null;\r\n            element.innerHTML = '';\r\n    \r\n            if (destroyEventHandlers) {\r\n                root.removeEventListener(\"mouseup\", jexcel.mouseUpControls);\r\n                root.removeEventListener(\"mousedown\", jexcel.mouseDownControls);\r\n                root.removeEventListener(\"mousemove\", jexcel.mouseMoveControls);\r\n                root.removeEventListener(\"mouseover\", jexcel.mouseOverControls);\r\n                root.removeEventListener(\"dblclick\", jexcel.doubleClickControls);\r\n                root.removeEventListener(\"paste\", jexcel.pasteControls);\r\n                root.removeEventListener(\"contextmenu\", jexcel.contextMenuControls);\r\n                root.removeEventListener(\"touchstart\", jexcel.touchStartControls);\r\n                root.removeEventListener(\"touchend\", jexcel.touchEndControls);\r\n                root.removeEventListener(\"touchcancel\", jexcel.touchEndControls);\r\n                document.removeEventListener(\"keydown\", jexcel.keyDownControls);\r\n                jexcel = null;\r\n            }\r\n        }\r\n    }\r\n    \r\n    jexcel.build = function(root) {\r\n        root.addEventListener(\"mouseup\", jexcel.mouseUpControls);\r\n        root.addEventListener(\"mousedown\", jexcel.mouseDownControls);\r\n        root.addEventListener(\"mousemove\", jexcel.mouseMoveControls);\r\n        root.addEventListener(\"mouseover\", jexcel.mouseOverControls);\r\n        root.addEventListener(\"dblclick\", jexcel.doubleClickControls);\r\n        root.addEventListener(\"paste\", jexcel.pasteControls);\r\n        root.addEventListener(\"contextmenu\", jexcel.contextMenuControls);\r\n        root.addEventListener(\"touchstart\", jexcel.touchStartControls);\r\n        root.addEventListener(\"touchend\", jexcel.touchEndControls);\r\n        root.addEventListener(\"touchcancel\", jexcel.touchEndControls);\r\n        root.addEventListener(\"touchmove\", jexcel.touchEndControls);\r\n        document.addEventListener(\"keydown\", jexcel.keyDownControls);\r\n    }\r\n    \r\n    /**\r\n     * Events\r\n     */\r\n    jexcel.keyDownControls = function(e) {\r\n        if (jexcel.current) {\r\n            if (jexcel.current.edition) {\r\n                if (e.which == 27) {\r\n                    // Escape\r\n                    if (jexcel.current.edition) {\r\n                        // Exit without saving\r\n                        jexcel.current.closeEditor(jexcel.current.edition[0], false);\r\n                    }\r\n                    e.preventDefault();\r\n                } else if (e.which == 13) {\r\n                    // Enter\r\n                    if (jexcel.current.options.columns[jexcel.current.edition[2]].type == 'calendar') {\r\n                        jexcel.current.closeEditor(jexcel.current.edition[0], true);\r\n                    } else if (jexcel.current.options.columns[jexcel.current.edition[2]].type == 'dropdown' ||\r\n                               jexcel.current.options.columns[jexcel.current.edition[2]].type == 'autocomplete') {\r\n                        // Do nothing\r\n                    } else {\r\n                        // Alt enter -> do not close editor\r\n                        if ((jexcel.current.options.wordWrap == true ||\r\n                             jexcel.current.options.columns[jexcel.current.edition[2]].wordWrap == true ||\r\n                             jexcel.current.options.data[jexcel.current.edition[3]][jexcel.current.edition[2]].length > 200) && e.altKey) {\r\n                            // Add new line to the editor\r\n                            var editorTextarea = jexcel.current.edition[0].children[0];\r\n                            var editorValue = jexcel.current.edition[0].children[0].value;\r\n                            var editorIndexOf = editorTextarea.selectionStart;\r\n                            editorValue = editorValue.slice(0, editorIndexOf) + \"\\n\" + editorValue.slice(editorIndexOf);\r\n                            editorTextarea.value = editorValue;\r\n                            editorTextarea.focus();\r\n                            editorTextarea.selectionStart = editorIndexOf + 1;\r\n                            editorTextarea.selectionEnd = editorIndexOf + 1;\r\n                        } else {\r\n                            jexcel.current.edition[0].children[0].blur();\r\n                        }\r\n                    }\r\n                } else if (e.which == 9) {\r\n                    // Tab\r\n                    if (jexcel.current.options.columns[jexcel.current.edition[2]].type == 'calendar') {\r\n                        jexcel.current.closeEditor(jexcel.current.edition[0], true);\r\n                    } else {\r\n                        jexcel.current.edition[0].children[0].blur();\r\n                    }\r\n                }\r\n            }\r\n    \r\n            if (! jexcel.current.edition && jexcel.current.selectedCell) {\r\n                // Which key\r\n                if (e.which == 37) {\r\n                    jexcel.current.left(e.shiftKey, e.ctrlKey);\r\n                    e.preventDefault();\r\n                } else if (e.which == 39) {\r\n                    jexcel.current.right(e.shiftKey, e.ctrlKey);\r\n                    e.preventDefault();\r\n                } else if (e.which == 38) {\r\n                    jexcel.current.up(e.shiftKey, e.ctrlKey);\r\n                    e.preventDefault();\r\n                } else if (e.which == 40) {\r\n                    jexcel.current.down(e.shiftKey, e.ctrlKey);\r\n                    e.preventDefault();\r\n                } else if (e.which == 36) {\r\n                    jexcel.current.first(e.shiftKey, e.ctrlKey);\r\n                    e.preventDefault();\r\n                } else if (e.which == 35) {\r\n                    jexcel.current.last(e.shiftKey, e.ctrlKey);\r\n                    e.preventDefault();\r\n                } else if (e.which == 32) {\r\n                    if (jexcel.current.options.editable == true) {\r\n                        jexcel.current.setCheckRadioValue();\r\n                    }\r\n                    e.preventDefault();\r\n                } else if (e.which == 46) {\r\n                    // Delete\r\n                    if (jexcel.current.options.editable == true) {\r\n                        if (jexcel.current.selectedRow) {\r\n                            if (jexcel.current.options.allowDeleteRow == true) {\r\n                                if (confirm(jexcel.current.options.text.areYouSureToDeleteTheSelectedRows)) {\r\n                                    jexcel.current.deleteRow();\r\n                                }\r\n                            }\r\n                        } else if (jexcel.current.selectedHeader) {\r\n                            if (jexcel.current.options.allowDeleteColumn == true) {\r\n                                if (confirm(jexcel.current.options.text.areYouSureToDeleteTheSelectedColumns)) {\r\n                                    jexcel.current.deleteColumn();\r\n                                }\r\n                            }\r\n                        } else {\r\n                            // Change value\r\n                            jexcel.current.setValue(jexcel.current.highlighted, '');\r\n                        }\r\n                    }\r\n                } else if (e.which == 13) {\r\n                    // Move cursor\r\n                    if (e.shiftKey) {\r\n                        jexcel.current.up();\r\n                    } else {\r\n                        if (jexcel.current.options.allowInsertRow == true) {\r\n                            if (jexcel.current.options.allowManualInsertRow == true) {\r\n                                if (jexcel.current.selectedCell[1] == jexcel.current.options.data.length - 1) {\r\n                                    // New record in case selectedCell in the last row\r\n                                    jexcel.current.insertRow();\r\n                                }\r\n                            }\r\n                        }\r\n    \r\n                        jexcel.current.down();\r\n                    }\r\n                    e.preventDefault();\r\n                } else if (e.which == 9) {\r\n                    // Tab\r\n                    if (e.shiftKey) {\r\n                        jexcel.current.left();\r\n                    } else {\r\n                        if (jexcel.current.options.allowInsertColumn == true) {\r\n                            if (jexcel.current.options.allowManualInsertColumn == true) {\r\n                                if (jexcel.current.selectedCell[0] == jexcel.current.options.data[0].length - 1) {\r\n                                    // New record in case selectedCell in the last column\r\n                                    jexcel.current.insertColumn();\r\n                                }\r\n                            }\r\n                        }\r\n    \r\n                        jexcel.current.right();\r\n                    }\r\n                    e.preventDefault();\r\n                } else {\r\n                    if ((e.ctrlKey || e.metaKey) && ! e.shiftKey) {\r\n                        if (e.which == 65) {\r\n                            // Ctrl + A\r\n                            jexcel.current.selectAll();\r\n                            e.preventDefault();\r\n                        } else if (e.which == 83) {\r\n                            // Ctrl + S\r\n                            jexcel.current.download();\r\n                            e.preventDefault();\r\n                        } else if (e.which == 89) {\r\n                            // Ctrl + Y\r\n                            jexcel.current.redo();\r\n                            e.preventDefault();\r\n                        } else if (e.which == 90) {\r\n                            // Ctrl + Z\r\n                            jexcel.current.undo();\r\n                            e.preventDefault();\r\n                        } else if (e.which == 67) {\r\n                            // Ctrl + C\r\n                            jexcel.current.copy(true);\r\n                            e.preventDefault();\r\n                        } else if (e.which == 67) {\r\n                            // Ctrl + C\r\n                            jexcel.current.copy(true);\r\n                            e.preventDefault();\r\n                        } else if (e.which == 88) {\r\n                            // Ctrl + X\r\n                            if (jexcel.current.options.editable == true) {\r\n                                jexcel.cutControls();\r\n                            } else {\r\n                                jexcel.copyControls();\r\n                            }\r\n                            e.preventDefault();\r\n                        } else if (e.which == 86) {\r\n                            // Ctrl + V\r\n                            jexcel.pasteControls();\r\n                        }\r\n                    } else {\r\n                        if (jexcel.current.selectedCell) {\r\n                            if (jexcel.current.options.editable == true) {\r\n                                var rowId = jexcel.current.selectedCell[1];\r\n                                var columnId = jexcel.current.selectedCell[0];\r\n    \r\n                                // If is not readonly\r\n                                if (jexcel.current.options.columns[columnId].type != 'readonly') {\r\n                                    // Characters able to start a edition\r\n                                    if (e.keyCode == 32) {\r\n                                        // Space\r\n                                        if (jexcel.current.options.columns[columnId].type == 'checkbox' ||\r\n                                            jexcel.current.options.columns[columnId].type == 'radio') {\r\n                                            e.preventDefault();\r\n                                        } else {\r\n                                            // Start edition\r\n                                            jexcel.current.openEditor(jexcel.current.records[rowId][columnId], true);\r\n                                        }\r\n                                    } else if (e.keyCode == 113) {\r\n                                        // Start edition with current content F2\r\n                                        jexcel.current.openEditor(jexcel.current.records[rowId][columnId], false);\r\n                                    } else if ((e.keyCode == 8) ||\r\n                                               (e.keyCode >= 48 && e.keyCode <= 57) ||\r\n                                               (e.keyCode >= 96 && e.keyCode <= 111) ||\r\n                                               (e.keyCode >= 187 && e.keyCode <= 190) ||\r\n                                               ((String.fromCharCode(e.keyCode) == e.key || String.fromCharCode(e.keyCode).toLowerCase() == e.key.toLowerCase()) && jexcel.validLetter(String.fromCharCode(e.keyCode)))) {\r\n                                        // Start edition\r\n                                        jexcel.current.openEditor(jexcel.current.records[rowId][columnId], true);\r\n                                        // Prevent entries in the calendar\r\n                                        if (jexcel.current.options.columns[columnId].type == 'calendar') {\r\n                                            e.preventDefault();\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                if (e.target.classList.contains('jexcel_search')) {\r\n                    if (jexcel.timeControl) {\r\n                        clearTimeout(jexcel.timeControl);\r\n                    }\r\n    \r\n                    jexcel.timeControl = setTimeout(function() {\r\n                        jexcel.current.search(e.target.value);\r\n                    }, 200);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    jexcel.isMouseAction = false;\r\n    \r\n    jexcel.mouseDownControls = function(e) {\r\n        e = e || window.event;\r\n        if (e.buttons) {\r\n            var mouseButton = e.buttons;\r\n        } else if (e.button) {\r\n            var mouseButton = e.button;\r\n        } else {\r\n            var mouseButton = e.which;\r\n        }\r\n\r\n        // Get elements\r\n        var jexcelTable = jexcel.getElement(e.target);\r\n\r\n        if (jexcelTable[0]) {\r\n            if (jexcel.current != jexcelTable[0].jexcel) {\r\n                if (jexcel.current) {\r\n                    if (jexcel.current.edition) {\r\n                        jexcel.current.closeEditor(jexcel.current.edition[0], true);\r\n                    }\r\n                    jexcel.current.resetSelection();\r\n                }\r\n                jexcel.current = jexcelTable[0].jexcel;\r\n            }\r\n        } else {\r\n            if (jexcel.current) {\r\n                if (jexcel.current.edition) {\r\n                    jexcel.current.closeEditor(jexcel.current.edition[0], true);\r\n                }\r\n                \r\n                jexcel.current.resetSelection(true);\r\n                jexcel.current = null;\r\n            }\r\n        }\r\n    \r\n        if (jexcel.current && mouseButton == 1) {\r\n            if (e.target.classList.contains('jexcel_selectall')) {\r\n                if (jexcel.current) {\r\n                    jexcel.current.selectAll();\r\n                }\r\n            } else if (e.target.classList.contains('jexcel_corner')) {\r\n                if (jexcel.current.options.editable == true) {\r\n                    jexcel.current.selectedCorner = true;\r\n                }\r\n            } else {\r\n                // Header found\r\n                if (jexcelTable[1] == 1) {\r\n                    var columnId = e.target.getAttribute('data-x');\r\n                    if (columnId) {\r\n                        // Update cursor\r\n                        var info = e.target.getBoundingClientRect();\r\n                        if (jexcel.current.options.columnResize == true && info.width - e.offsetX < 6) {\r\n                            // Resize helper\r\n                            jexcel.current.resizing = {\r\n                                mousePosition: e.pageX,\r\n                                column: columnId,\r\n                                width: info.width,\r\n                            };\r\n    \r\n                            // Border indication\r\n                            jexcel.current.headers[columnId].classList.add('resizing');\r\n                            for (var j = 0; j < jexcel.current.records.length; j++) {\r\n                                if (jexcel.current.records[j][columnId]) {\r\n                                    jexcel.current.records[j][columnId].classList.add('resizing');\r\n                                }\r\n                            }\r\n                        } else if (jexcel.current.options.columnDrag == true && info.height - e.offsetY < 6) {\r\n                            if (jexcel.current.isColMerged(columnId).length) {\r\n                                console.error('Jspreadsheet: This column is part of a merged cell.');\r\n                            } else {\r\n                                // Reset selection\r\n                                jexcel.current.resetSelection();\r\n                                // Drag helper\r\n                                jexcel.current.dragging = {\r\n                                    element: e.target,\r\n                                    column:columnId,\r\n                                    destination:columnId,\r\n                                };\r\n                                // Border indication\r\n                                jexcel.current.headers[columnId].classList.add('dragging');\r\n                                for (var j = 0; j < jexcel.current.records.length; j++) {\r\n                                    if (jexcel.current.records[j][columnId]) {\r\n                                        jexcel.current.records[j][columnId].classList.add('dragging');\r\n                                    }\r\n                                }\r\n                            }\r\n                        } else {\r\n                            if (jexcel.current.selectedHeader && (e.shiftKey || e.ctrlKey)) {\r\n                                var o = jexcel.current.selectedHeader;\r\n                                var d = columnId;\r\n                            } else {\r\n                                // Press to rename\r\n                                if (jexcel.current.selectedHeader == columnId && jexcel.current.options.allowRenameColumn == true) {\r\n                                    jexcel.timeControl = setTimeout(function() {\r\n                                        jexcel.current.setHeader(columnId);\r\n                                    }, 800);\r\n                                }\r\n    \r\n                                // Keep track of which header was selected first\r\n                                jexcel.current.selectedHeader = columnId;\r\n    \r\n                                // Update selection single column\r\n                                var o = columnId;\r\n                                var d = columnId;\r\n                            }\r\n    \r\n                            // Update selection\r\n                            jexcel.current.updateSelectionFromCoords(o, 0, d, jexcel.current.options.data.length - 1);\r\n                        }\r\n                    } else {\r\n                        if (e.target.parentNode.classList.contains('jexcel_nested')) {\r\n                            if (e.target.getAttribute('data-column')) {\r\n                                var column = e.target.getAttribute('data-column').split(',');\r\n                                var c1 = parseInt(column[0]);\r\n                                var c2 = parseInt(column[column.length-1]);\r\n                            } else {\r\n                                var c1 = 0;\r\n                                var c2 = jexcel.current.options.columns.length - 1;\r\n                            }\r\n                            jexcel.current.updateSelectionFromCoords(c1, 0, c2, jexcel.current.options.data.length - 1);\r\n                        }\r\n                    }\r\n                } else {\r\n                    jexcel.current.selectedHeader = false;\r\n                }\r\n    \r\n                // Body found\r\n                if (jexcelTable[1] == 2) {\r\n                    var rowId = e.target.getAttribute('data-y');\r\n                    \r\n                    if (e.target.classList.contains('jexcel_row')) {\r\n                        var info = e.target.getBoundingClientRect();\r\n                        if (jexcel.current.options.rowResize == true && info.height - e.offsetY < 6) {\r\n                            // Resize helper\r\n                            jexcel.current.resizing = {\r\n                                element: e.target.parentNode,\r\n                                mousePosition: e.pageY,\r\n                                row: rowId,\r\n                                height: info.height,\r\n                            };\r\n                            // Border indication\r\n                            e.target.parentNode.classList.add('resizing');\r\n                        } else if (jexcel.current.options.rowDrag == true && info.width - e.offsetX < 6) {\r\n                            if (jexcel.current.isRowMerged(rowId).length) {\r\n                                console.error('Jspreadsheet: This row is part of a merged cell');\r\n                            } else if (jexcel.current.options.search == true && jexcel.current.results) {\r\n                                console.error('Jspreadsheet: Please clear your search before perform this action');\r\n                            } else {\r\n                                // Reset selection\r\n                                jexcel.current.resetSelection();\r\n                                // Drag helper\r\n                                jexcel.current.dragging = {\r\n                                    element: e.target.parentNode,\r\n                                    row:rowId,\r\n                                    destination:rowId,\r\n                                };\r\n                                // Border indication\r\n                                e.target.parentNode.classList.add('dragging');\r\n                            }\r\n                        } else {\r\n                            if (jexcel.current.selectedRow && (e.shiftKey || e.ctrlKey)) {\r\n                                var o = jexcel.current.selectedRow;\r\n                                var d = rowId;\r\n                            } else {\r\n                                // Keep track of which header was selected first\r\n                                jexcel.current.selectedRow = rowId;\r\n    \r\n                                // Update selection single column\r\n                                var o = rowId;\r\n                                var d = rowId;\r\n                            }\r\n    \r\n                            // Update selection\r\n                            jexcel.current.updateSelectionFromCoords(0, o, jexcel.current.options.data[0].length - 1, d);\r\n                        }\r\n                    } else {\r\n                        // Jclose\r\n                        if (e.target.classList.contains('jclose') && e.target.clientWidth - e.offsetX < 50 && e.offsetY < 50) {\r\n                            jexcel.current.closeEditor(jexcel.current.edition[0], true);\r\n                        } else {\r\n                            var getCellCoords = function(element) {\r\n                                var x = element.getAttribute('data-x');\r\n                                var y = element.getAttribute('data-y');\r\n                                if (x && y) {\r\n                                    return [x, y];\r\n                                } else {\r\n                                    if (element.parentNode) {\r\n                                        return getCellCoords(element.parentNode);\r\n                                    }\r\n                                }\r\n                            };\r\n\r\n                            var position = getCellCoords(e.target);\r\n                            if (position) {\r\n\r\n                                var columnId = position[0];\r\n                                var rowId = position[1];\r\n                                // Close edition\r\n                                if (jexcel.current.edition) {\r\n                                    if (jexcel.current.edition[2] != columnId || jexcel.current.edition[3] != rowId) {\r\n                                        jexcel.current.closeEditor(jexcel.current.edition[0], true);\r\n                                    }\r\n                                }\r\n\r\n                                if (! jexcel.current.edition) {\r\n                                    // Update cell selection\r\n                                    if (e.shiftKey) {\r\n                                        jexcel.current.updateSelectionFromCoords(jexcel.current.selectedCell[0], jexcel.current.selectedCell[1], columnId, rowId);\r\n                                    } else {\r\n                                        jexcel.current.updateSelectionFromCoords(columnId, rowId);\r\n                                    }\r\n                                }\r\n\r\n                                // No full row selected\r\n                                jexcel.current.selectedHeader = null;\r\n                                jexcel.current.selectedRow = null;\r\n                            }\r\n                        }\r\n                    }\r\n                } else {\r\n                    jexcel.current.selectedRow = false;\r\n                }\r\n    \r\n                // Pagination\r\n                if (e.target.classList.contains('jexcel_page')) {\r\n                    if (e.target.innerText == '<') {\r\n                        jexcel.current.page(0);\r\n                    } else if (e.target.innerText == '>') {\r\n                        jexcel.current.page(e.target.getAttribute('title') - 1);\r\n                    } else {\r\n                        jexcel.current.page(e.target.innerText - 1);\r\n                    }\r\n                }\r\n            }\r\n    \r\n            if (jexcel.current.edition) {\r\n                jexcel.isMouseAction = false;\r\n            } else {\r\n                jexcel.isMouseAction = true;\r\n            }\r\n        } else {\r\n            jexcel.isMouseAction = false;\r\n        }\r\n    }\r\n    \r\n    jexcel.mouseUpControls = function(e) {\r\n        if (jexcel.current) {\r\n            // Update cell size\r\n            if (jexcel.current.resizing) {\r\n                // Columns to be updated\r\n                if (jexcel.current.resizing.column) {\r\n                    // New width\r\n                    var newWidth = jexcel.current.colgroup[jexcel.current.resizing.column].getAttribute('width');\r\n                    // Columns\r\n                    var columns = jexcel.current.getSelectedColumns();\r\n                    if (columns.length > 1) {\r\n                        var currentWidth = [];\r\n                        for (var i = 0; i < columns.length; i++) {\r\n                            currentWidth.push(parseInt(jexcel.current.colgroup[columns[i]].getAttribute('width')));\r\n                        }\r\n                        // Previous width\r\n                        var index = columns.indexOf(parseInt(jexcel.current.resizing.column));\r\n                        currentWidth[index] = jexcel.current.resizing.width;\r\n                        jexcel.current.setWidth(columns, newWidth, currentWidth);\r\n                    } else {\r\n                        jexcel.current.setWidth(jexcel.current.resizing.column, newWidth, jexcel.current.resizing.width);\r\n                    }\r\n                    // Remove border\r\n                    jexcel.current.headers[jexcel.current.resizing.column].classList.remove('resizing');\r\n                    for (var j = 0; j < jexcel.current.records.length; j++) {\r\n                        if (jexcel.current.records[j][jexcel.current.resizing.column]) {\r\n                            jexcel.current.records[j][jexcel.current.resizing.column].classList.remove('resizing');\r\n                        }\r\n                    }\r\n                } else {\r\n                    // Remove Class\r\n                    jexcel.current.rows[jexcel.current.resizing.row].children[0].classList.remove('resizing');\r\n                    var newHeight = jexcel.current.rows[jexcel.current.resizing.row].getAttribute('height');\r\n                    jexcel.current.setHeight(jexcel.current.resizing.row, newHeight, jexcel.current.resizing.height);\r\n                    // Remove border\r\n                    jexcel.current.resizing.element.classList.remove('resizing');\r\n                }\r\n                // Reset resizing helper\r\n                jexcel.current.resizing = null;\r\n            } else if (jexcel.current.dragging) {\r\n                // Reset dragging helper\r\n                if (jexcel.current.dragging) {\r\n                    if (jexcel.current.dragging.column) {\r\n                        // Target\r\n                        var columnId = e.target.getAttribute('data-x');\r\n                        // Remove move style\r\n                        jexcel.current.headers[jexcel.current.dragging.column].classList.remove('dragging');\r\n                        for (var j = 0; j < jexcel.current.rows.length; j++) {\r\n                            if (jexcel.current.records[j][jexcel.current.dragging.column]) {\r\n                                jexcel.current.records[j][jexcel.current.dragging.column].classList.remove('dragging');\r\n                            }\r\n                        }\r\n                        for (var i = 0; i < jexcel.current.headers.length; i++) {\r\n                            jexcel.current.headers[i].classList.remove('dragging-left');\r\n                            jexcel.current.headers[i].classList.remove('dragging-right');\r\n                        }\r\n                        // Update position\r\n                        if (columnId) {\r\n                            if (jexcel.current.dragging.column != jexcel.current.dragging.destination) {\r\n                                jexcel.current.moveColumn(jexcel.current.dragging.column, jexcel.current.dragging.destination);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        if (jexcel.current.dragging.element.nextSibling) {\r\n                            var position = parseInt(jexcel.current.dragging.element.nextSibling.getAttribute('data-y'));\r\n                            if (jexcel.current.dragging.row < position) {\r\n                                position -= 1;\r\n                            }\r\n                        } else {\r\n                            var position = parseInt(jexcel.current.dragging.element.previousSibling.getAttribute('data-y'));\r\n                        }\r\n                        if (jexcel.current.dragging.row != jexcel.current.dragging.destination) {\r\n                            jexcel.current.moveRow(jexcel.current.dragging.row, position, true);\r\n                        }\r\n                        jexcel.current.dragging.element.classList.remove('dragging');\r\n                    }\r\n                    jexcel.current.dragging = null;\r\n                }\r\n            } else {\r\n                // Close any corner selection\r\n                if (jexcel.current.selectedCorner) {\r\n                    jexcel.current.selectedCorner = false;\r\n    \r\n                    // Data to be copied\r\n                    if (jexcel.current.selection.length > 0) {\r\n                        // Copy data\r\n                        jexcel.current.copyData(jexcel.current.selection[0], jexcel.current.selection[jexcel.current.selection.length - 1]);\r\n    \r\n                        // Remove selection\r\n                        jexcel.current.removeCopySelection();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Clear any time control\r\n        if (jexcel.timeControl) {\r\n            clearTimeout(jexcel.timeControl);\r\n            jexcel.timeControl = null;\r\n        }\r\n    \r\n        // Mouse up\r\n        jexcel.isMouseAction = false;\r\n    }\r\n    \r\n    // Mouse move controls\r\n    jexcel.mouseMoveControls = function(e) {\r\n        e = e || window.event;\r\n        if (e.buttons) {\r\n            var mouseButton = e.buttons;\r\n        } else if (e.button) {\r\n            var mouseButton = e.button;\r\n        } else {\r\n            var mouseButton = e.which;\r\n        }\r\n    \r\n        if (! mouseButton) {\r\n            jexcel.isMouseAction = false;\r\n        }\r\n    \r\n        if (jexcel.current) {\r\n            if (jexcel.isMouseAction == true) {\r\n                // Resizing is ongoing\r\n                if (jexcel.current.resizing) {\r\n                    if (jexcel.current.resizing.column) {\r\n                        var width = e.pageX - jexcel.current.resizing.mousePosition;\r\n    \r\n                        if (jexcel.current.resizing.width + width > 0) {\r\n                            var tempWidth = jexcel.current.resizing.width + width;\r\n                            jexcel.current.colgroup[jexcel.current.resizing.column].setAttribute('width', tempWidth);\r\n    \r\n                            jexcel.current.updateCornerPosition();\r\n                        }\r\n                    } else {\r\n                        var height = e.pageY - jexcel.current.resizing.mousePosition;\r\n    \r\n                        if (jexcel.current.resizing.height + height > 0) {\r\n                            var tempHeight = jexcel.current.resizing.height + height;\r\n                            jexcel.current.rows[jexcel.current.resizing.row].setAttribute('height', tempHeight);\r\n    \r\n                            jexcel.current.updateCornerPosition();\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                var x = e.target.getAttribute('data-x');\r\n                var y = e.target.getAttribute('data-y');\r\n                var rect = e.target.getBoundingClientRect();\r\n    \r\n                if (jexcel.current.cursor) {\r\n                    jexcel.current.cursor.style.cursor = '';\r\n                    jexcel.current.cursor = null;\r\n                }\r\n\r\n                if (e.target.parentNode.parentNode && e.target.parentNode.parentNode.className) {\r\n                    if (e.target.parentNode.parentNode.classList.contains('resizable')) {\r\n                        if (e.target && x && ! y && (rect.width - (e.clientX - rect.left) < 6)) {\r\n                            jexcel.current.cursor = e.target;\r\n                            jexcel.current.cursor.style.cursor = 'col-resize';\r\n                        } else if (e.target && ! x && y && (rect.height - (e.clientY - rect.top) < 6)) {\r\n                            jexcel.current.cursor = e.target;\r\n                            jexcel.current.cursor.style.cursor = 'row-resize';\r\n                        }\r\n                    }\r\n    \r\n                    if (e.target.parentNode.parentNode.classList.contains('draggable')) {\r\n                        if (e.target && ! x && y && (rect.width - (e.clientX - rect.left) < 6)) {\r\n                            jexcel.current.cursor = e.target;\r\n                            jexcel.current.cursor.style.cursor = 'move';\r\n                        } else if (e.target && x && ! y && (rect.height - (e.clientY - rect.top) < 6)) {\r\n                            jexcel.current.cursor = e.target;\r\n                            jexcel.current.cursor.style.cursor = 'move';\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    jexcel.mouseOverControls = function(e) {\r\n        e = e || window.event;\r\n        if (e.buttons) {\r\n            var mouseButton = e.buttons;\r\n        } else if (e.button) {\r\n            var mouseButton = e.button;\r\n        } else {\r\n            var mouseButton = e.which;\r\n        }\r\n    \r\n        if (! mouseButton) {\r\n            jexcel.isMouseAction = false;\r\n        }\r\n    \r\n        if (jexcel.current && jexcel.isMouseAction == true) {\r\n            // Get elements\r\n            var jexcelTable = jexcel.getElement(e.target);\r\n    \r\n            if (jexcelTable[0]) {\r\n                // Avoid cross reference\r\n                if (jexcel.current != jexcelTable[0].jexcel) {\r\n                    if (jexcel.current) {\r\n                        return false;\r\n                    }\r\n                }\r\n    \r\n                var columnId = e.target.getAttribute('data-x');\r\n                var rowId = e.target.getAttribute('data-y');\r\n    \r\n                if (jexcel.current.dragging) {\r\n                    if (jexcel.current.dragging.column) {\r\n                        if (columnId) {\r\n                            if (jexcel.current.isColMerged(columnId).length) {\r\n                                console.error('Jspreadsheet: This column is part of a merged cell.');\r\n                            } else {\r\n                                for (var i = 0; i < jexcel.current.headers.length; i++) {\r\n                                    jexcel.current.headers[i].classList.remove('dragging-left');\r\n                                    jexcel.current.headers[i].classList.remove('dragging-right');\r\n                                }\r\n    \r\n                                if (jexcel.current.dragging.column == columnId) {\r\n                                    jexcel.current.dragging.destination = parseInt(columnId);\r\n                                } else {\r\n                                    if (e.target.clientWidth / 2 > e.offsetX) {\r\n                                        if (jexcel.current.dragging.column < columnId) {\r\n                                            jexcel.current.dragging.destination = parseInt(columnId) - 1;\r\n                                        } else {\r\n                                            jexcel.current.dragging.destination = parseInt(columnId);\r\n                                        }\r\n                                        jexcel.current.headers[columnId].classList.add('dragging-left');\r\n                                    } else {\r\n                                        if (jexcel.current.dragging.column < columnId) {\r\n                                            jexcel.current.dragging.destination = parseInt(columnId);\r\n                                        } else {\r\n                                            jexcel.current.dragging.destination = parseInt(columnId) + 1;\r\n                                        }\r\n                                        jexcel.current.headers[columnId].classList.add('dragging-right');\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    } else {\r\n                        if (rowId) {\r\n                            if (jexcel.current.isRowMerged(rowId).length) {\r\n                                console.error('Jspreadsheet: This row is part of a merged cell.');\r\n                            } else {\r\n                                var target = (e.target.clientHeight / 2 > e.offsetY) ? e.target.parentNode.nextSibling : e.target.parentNode;\r\n                                if (jexcel.current.dragging.element != target) {\r\n                                    e.target.parentNode.parentNode.insertBefore(jexcel.current.dragging.element, target);\r\n                                    jexcel.current.dragging.destination = Array.prototype.indexOf.call(jexcel.current.dragging.element.parentNode.children, jexcel.current.dragging.element);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                } else if (jexcel.current.resizing) {\r\n                } else {\r\n                    // Header found\r\n                    if (jexcelTable[1] == 1) {\r\n                        if (jexcel.current.selectedHeader) {\r\n                            var columnId = e.target.getAttribute('data-x');\r\n                            var o = jexcel.current.selectedHeader;\r\n                            var d = columnId;\r\n                            // Update selection\r\n                            jexcel.current.updateSelectionFromCoords(o, 0, d, jexcel.current.options.data.length - 1);\r\n                        }\r\n                    }\r\n    \r\n                    // Body found\r\n                    if (jexcelTable[1] == 2) {\r\n                        if (e.target.classList.contains('jexcel_row')) {\r\n                            if (jexcel.current.selectedRow) {\r\n                                var o = jexcel.current.selectedRow;\r\n                                var d = rowId;\r\n                                // Update selection\r\n                                jexcel.current.updateSelectionFromCoords(0, o, jexcel.current.options.data[0].length - 1, d);\r\n                            }\r\n                        } else {\r\n                            // Do not select edtion is in progress\r\n                            if (! jexcel.current.edition) {\r\n                                if (columnId && rowId) {\r\n                                    if (jexcel.current.selectedCorner) {\r\n                                        jexcel.current.updateCopySelection(columnId, rowId);\r\n                                    } else {\r\n                                        if (jexcel.current.selectedCell) {\r\n                                            jexcel.current.updateSelectionFromCoords(jexcel.current.selectedCell[0], jexcel.current.selectedCell[1], columnId, rowId);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        // Clear any time control\r\n        if (jexcel.timeControl) {\r\n            clearTimeout(jexcel.timeControl);\r\n            jexcel.timeControl = null;\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Double click event handler: controls the double click in the corner, cell edition or column re-ordering.\r\n     */\r\n    jexcel.doubleClickControls = function(e) {\r\n        // Jexcel is selected\r\n        if (jexcel.current) {\r\n            // Corner action\r\n            if (e.target.classList.contains('jexcel_corner')) {\r\n                // Any selected cells\r\n                if (jexcel.current.highlighted.length > 0) {\r\n                    // Copy from this\r\n                    var x1 = jexcel.current.highlighted[0].getAttribute('data-x');\r\n                    var y1 = parseInt(jexcel.current.highlighted[jexcel.current.highlighted.length - 1].getAttribute('data-y')) + 1;\r\n                    // Until this\r\n                    var x2 = jexcel.current.highlighted[jexcel.current.highlighted.length - 1].getAttribute('data-x');\r\n                    var y2 = jexcel.current.records.length - 1\r\n                    // Execute copy\r\n                    jexcel.current.copyData(jexcel.current.records[y1][x1], jexcel.current.records[y2][x2]);\r\n                }\r\n            } else if (e.target.classList.contains('jexcel_column_filter')) {\r\n                // Column\r\n                var columnId = e.target.getAttribute('data-x');\r\n                // Open filter\r\n                jexcel.current.openFilter(columnId);\r\n                \r\n            } else {\r\n                // Get table\r\n                var jexcelTable = jexcel.getElement(e.target);\r\n    \r\n                // Double click over header\r\n                if (jexcelTable[1] == 1 && jexcel.current.options.columnSorting == true) {\r\n                    // Check valid column header coords\r\n                    var columnId = e.target.getAttribute('data-x');\r\n                    if (columnId) {\r\n                        jexcel.current.orderBy(columnId);\r\n                    }\r\n                }\r\n    \r\n                // Double click over body\r\n                if (jexcelTable[1] == 2 && jexcel.current.options.editable == true) {\r\n                    if (! jexcel.current.edition) {\r\n                        var getCellCoords = function(element) {\r\n                            if (element.parentNode) {\r\n                                var x = element.getAttribute('data-x');\r\n                                var y = element.getAttribute('data-y');\r\n                                if (x && y) {\r\n                                    return element;\r\n                                } else {\r\n                                    return getCellCoords(element.parentNode);\r\n                                }\r\n                            }\r\n                        }\r\n                        var cell = getCellCoords(e.target);\r\n                        if (cell && cell.classList.contains('highlight')) {\r\n                            jexcel.current.openEditor(cell);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    jexcel.copyControls = function(e) {\r\n        if (jexcel.current && jexcel.copyControls.enabled) {\r\n            if (! jexcel.current.edition) {\r\n                jexcel.current.copy(true);\r\n            }\r\n        }\r\n    }\r\n    \r\n    jexcel.cutControls = function(e) {\r\n        if (jexcel.current) {\r\n            if (! jexcel.current.edition) {\r\n                jexcel.current.copy(true);\r\n                if (jexcel.current.options.editable == true) {\r\n                    jexcel.current.setValue(jexcel.current.highlighted, '');\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    jexcel.pasteControls = function(e) {\r\n        if (jexcel.current && jexcel.current.selectedCell) {\r\n            if (! jexcel.current.edition) {\r\n                if (jexcel.current.options.editable == true) {\r\n                    if (e && e.clipboardData) {\r\n                        jexcel.current.paste(jexcel.current.selectedCell[0], jexcel.current.selectedCell[1], e.clipboardData.getData('text'));\r\n                        e.preventDefault();\r\n                    } else if (window.clipboardData) {\r\n                        jexcel.current.paste(jexcel.current.selectedCell[0], jexcel.current.selectedCell[1], window.clipboardData.getData('text'));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    jexcel.contextMenuControls = function(e) {\r\n        e = e || window.event;\r\n        if (\"buttons\" in e) {\r\n            var mouseButton = e.buttons;\r\n        } else {\r\n            var mouseButton = e.which || e.button;\r\n        }\r\n    \r\n        if (jexcel.current) {\r\n            if (jexcel.current.edition) {\r\n                e.preventDefault();\r\n            } else if (jexcel.current.options.contextMenu) {\r\n                jexcel.current.contextMenu.contextmenu.close();\r\n    \r\n                if (jexcel.current) {\r\n                    var x = e.target.getAttribute('data-x');\r\n                    var y = e.target.getAttribute('data-y');\r\n    \r\n                    if (x || y) {\r\n                        if ((x < parseInt(jexcel.current.selectedCell[0])) || (x > parseInt(jexcel.current.selectedCell[2])) ||\r\n                            (y < parseInt(jexcel.current.selectedCell[1])) || (y > parseInt(jexcel.current.selectedCell[3])))\r\n                        {\r\n                            jexcel.current.updateSelectionFromCoords(x, y, x, y);\r\n                        }\r\n\r\n                        // Table found\r\n                        var items = jexcel.current.options.contextMenu(jexcel.current, x, y, e);\r\n                        // The id is depending on header and body\r\n                        jexcel.current.contextMenu.contextmenu.open(e, items);\r\n                        // Avoid the real one\r\n                        e.preventDefault();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    jexcel.touchStartControls = function(e) {\r\n        var jexcelTable = jexcel.getElement(e.target);\r\n    \r\n        if (jexcelTable[0]) {\r\n            if (jexcel.current != jexcelTable[0].jexcel) {\r\n                if (jexcel.current) {\r\n                    jexcel.current.resetSelection();\r\n                }\r\n                jexcel.current = jexcelTable[0].jexcel;\r\n            }\r\n        } else {\r\n            if (jexcel.current) {\r\n                jexcel.current.resetSelection();\r\n                jexcel.current = null;\r\n            }\r\n        }\r\n    \r\n        if (jexcel.current) {\r\n            if (! jexcel.current.edition) {\r\n                var columnId = e.target.getAttribute('data-x');\r\n                var rowId = e.target.getAttribute('data-y');\r\n    \r\n                if (columnId && rowId) {\r\n                    jexcel.current.updateSelectionFromCoords(columnId, rowId);\r\n    \r\n                    jexcel.timeControl = setTimeout(function() {\r\n                        // Keep temporary reference to the element\r\n                        if (jexcel.current.options.columns[columnId].type == 'color') {\r\n                            jexcel.tmpElement = null;\r\n                        } else {\r\n                            jexcel.tmpElement = e.target;\r\n                        }\r\n                        jexcel.current.openEditor(e.target, false, e);\r\n                    }, 500);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    jexcel.touchEndControls = function(e) {\r\n        // Clear any time control\r\n        if (jexcel.timeControl) {\r\n            clearTimeout(jexcel.timeControl);\r\n            jexcel.timeControl = null;\r\n            // Element\r\n            if (jexcel.tmpElement && jexcel.tmpElement.children[0].tagName == 'INPUT') {\r\n                jexcel.tmpElement.children[0].focus();\r\n            }\r\n            jexcel.tmpElement = null;\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Jexcel extensions\r\n     */\r\n    \r\n    jexcel.tabs = function(tabs, result) {\r\n        var instances = [];\r\n        // Create tab container\r\n        if (! tabs.classList.contains('jexcel_tabs')) {\r\n            tabs.innerHTML = '';\r\n            tabs.classList.add('jexcel_tabs')\r\n            tabs.jexcel = [];\r\n\r\n            var div = document.createElement('div');\r\n            var headers = tabs.appendChild(div);\r\n            var div = document.createElement('div');\r\n            var content = tabs.appendChild(div);\r\n        } else {\r\n            var headers = tabs.children[0];\r\n            var content = tabs.children[1];\r\n        }\r\n\r\n        var spreadsheet = []\r\n        var link = [];\r\n        for (var i = 0; i < result.length; i++) {\r\n            // Spreadsheet container\r\n            spreadsheet[i] = document.createElement('div');\r\n            spreadsheet[i].classList.add('jexcel_tab');\r\n            var worksheet = jexcel(spreadsheet[i], result[i]);\r\n            content.appendChild(spreadsheet[i]);\r\n            instances[i] = tabs.jexcel.push(worksheet);\r\n\r\n            // Tab link\r\n            link[i] = document.createElement('div');\r\n            link[i].classList.add('jexcel_tab_link');\r\n            link[i].setAttribute('data-spreadsheet', tabs.jexcel.length-1);\r\n            link[i].innerHTML = result[i].sheetName;\r\n            link[i].onclick = function() {\r\n                for (var j = 0; j < headers.children.length; j++) {\r\n                    headers.children[j].classList.remove('selected');\r\n                    content.children[j].style.display = 'none';\r\n                }\r\n                var i = this.getAttribute('data-spreadsheet');\r\n                content.children[i].style.display = 'block';\r\n                headers.children[i].classList.add('selected')\r\n            }\r\n            headers.appendChild(link[i]);\r\n        }\r\n\r\n        // First tab\r\n        for (var j = 0; j < headers.children.length; j++) {\r\n            headers.children[j].classList.remove('selected');\r\n            content.children[j].style.display = 'none';\r\n        }\r\n        headers.children[headers.children.length - 1].classList.add('selected');\r\n        content.children[headers.children.length - 1].style.display = 'block';\r\n\r\n        return instances;\r\n    }\r\n\r\n    // Compability to older versions\r\n    jexcel.createTabs = jexcel.tabs;\r\n\r\n    jexcel.fromSpreadsheet = function(file, __callback) {\r\n        var convert = function(workbook) {\r\n            var spreadsheets = [];\r\n            workbook.SheetNames.forEach(function(sheetName) {\r\n                var spreadsheet = {};\r\n                spreadsheet.rows = [];\r\n                spreadsheet.columns = [];\r\n                spreadsheet.data = [];\r\n                spreadsheet.style = {};\r\n                spreadsheet.sheetName = sheetName;\r\n    \r\n                // Column widths\r\n                var temp = workbook.Sheets[sheetName]['!cols'];\r\n                if (temp && temp.length) {\r\n                    for (var i = 0; i < temp.length; i++) {\r\n                        spreadsheet.columns[i] = {};\r\n                        if (temp[i] && temp[i].wpx) {\r\n                            spreadsheet.columns[i].width = temp[i].wpx + 'px';\r\n                        }\r\n                     }\r\n                }\r\n                // Rows heights\r\n                var temp = workbook.Sheets[sheetName]['!rows'];\r\n                if (temp && temp.length) {\r\n                    for (var i = 0; i < temp.length; i++) {\r\n                        if (temp[i] && temp[i].hpx) {\r\n                            spreadsheet.rows[i] = {};\r\n                            spreadsheet.rows[i].height = temp[i].hpx + 'px';\r\n                        }\r\n                    }\r\n                }\r\n                // Merge cells\r\n                var temp = workbook.Sheets[sheetName]['!merges'];\r\n                if (temp && temp.length > 0) {\r\n                    spreadsheet.mergeCells = [];\r\n                    for (var i = 0; i < temp.length; i++) {\r\n                        var x1 = temp[i].s.c;\r\n                        var y1 = temp[i].s.r;\r\n                        var x2 = temp[i].e.c;\r\n                        var y2 = temp[i].e.r;\r\n                        var key = jexcel.getColumnNameFromId([x1,y1]);\r\n                        spreadsheet.mergeCells[key] = [ x2-x1+1, y2-y1+1 ];\r\n                    }\r\n                }\r\n                // Data container\r\n                var max_x = 0;\r\n                var max_y = 0;\r\n                var temp = Object.keys(workbook.Sheets[sheetName]);\r\n                for (var i = 0; i < temp.length; i++) {\r\n                    if (temp[i].substr(0,1) != '!') {\r\n                        var cell = workbook.Sheets[sheetName][temp[i]];\r\n                        var info = jexcel.getIdFromColumnName(temp[i], true);\r\n                        if (! spreadsheet.data[info[1]]) {\r\n                            spreadsheet.data[info[1]] = [];\r\n                        }\r\n                        spreadsheet.data[info[1]][info[0]] = cell.f ? '=' + cell.f : cell.w;\r\n                        if (max_x < info[0]) {\r\n                            max_x = info[0];\r\n                        }\r\n                        if (max_y < info[1]) {\r\n                            max_y = info[1];\r\n                        }\r\n                        // Style\r\n                        if (cell.style && Object.keys(cell.style).length > 0) {\r\n                            spreadsheet.style[temp[i]] = cell.style;\r\n                        }\r\n                        if (cell.s && cell.s.fgColor) {\r\n                            if (spreadsheet.style[temp[i]]) {\r\n                                spreadsheet.style[temp[i]] += ';';\r\n                            }\r\n                            spreadsheet.style[temp[i]] += 'background-color:#' + cell.s.fgColor.rgb;\r\n                        }\r\n                    }\r\n                }\r\n                var numColumns = spreadsheet.columns;\r\n                for (var j = 0; j <= max_y; j++) {\r\n                    for (var i = 0; i <= max_x; i++) {\r\n                        if (! spreadsheet.data[j]) {\r\n                            spreadsheet.data[j] = [];\r\n                        }\r\n                        if (! spreadsheet.data[j][i]) {\r\n                            if (numColumns < i) {\r\n                                spreadsheet.data[j][i] = '';\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                spreadsheets.push(spreadsheet);\r\n            });\r\n    \r\n            return spreadsheets;\r\n        }\r\n    \r\n        var oReq;\r\n        oReq = new XMLHttpRequest();\r\n        oReq.open(\"GET\", file, true);\r\n    \r\n        if(typeof Uint8Array !== 'undefined') {\r\n            oReq.responseType = \"arraybuffer\";\r\n            oReq.onload = function(e) {\r\n                var arraybuffer = oReq.response;\r\n                var data = new Uint8Array(arraybuffer);\r\n                var wb = XLSX.read(data, {type:\"array\", cellFormula:true, cellStyles:true });\r\n                __callback(convert(wb))\r\n            };\r\n        } else {\r\n            oReq.setRequestHeader(\"Accept-Charset\", \"x-user-defined\");  \r\n            oReq.onreadystatechange = function() { if(oReq.readyState == 4 && oReq.status == 200) {\r\n                var ff = convertResponseBodyToText(oReq.responseBody);\r\n                var wb = XLSX.read(ff, {type:\"binary\", cellFormula:true, cellStyles:true });\r\n                __callback(convert(wb))\r\n            }};\r\n        }\r\n    \r\n        oReq.send();\r\n    }\r\n    \r\n    /**\r\n     * Valid international letter\r\n     */\r\n    \r\n    jexcel.validLetter = function (text) {\r\n        var regex = /([\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC-\\u0400-\\u04FF']+)/g;\r\n        return text.match(regex) ? 1 : 0;\r\n    }\r\n    \r\n    /**\r\n     * Helper injectArray\r\n     */\r\n    jexcel.injectArray = function(o, idx, arr) {\r\n        return o.slice(0, idx).concat(arr).concat(o.slice(idx));\r\n    }\r\n    \r\n    /**\r\n     * Get letter based on a number\r\n     * \r\n     * @param integer i\r\n     * @return string letter\r\n     */\r\n    jexcel.getColumnName = function(i) {\r\n        var letter = '';\r\n        if (i > 701) {\r\n            letter += String.fromCharCode(64 + parseInt(i / 676));\r\n            letter += String.fromCharCode(64 + parseInt((i % 676) / 26));\r\n        } else if (i > 25) {\r\n            letter += String.fromCharCode(64 + parseInt(i / 26));\r\n        }\r\n        letter += String.fromCharCode(65 + (i % 26));\r\n    \r\n        return letter;\r\n    }\r\n    \r\n    /**\r\n     * Convert excel like column to jexcel id\r\n     * \r\n     * @param string id\r\n     * @return string id\r\n     */\r\n    jexcel.getIdFromColumnName = function (id, arr) {\r\n        // Get the letters\r\n        var t = /^[a-zA-Z]+/.exec(id);\r\n    \r\n        if (t) {\r\n            // Base 26 calculation\r\n            var code = 0;\r\n            for (var i = 0; i < t[0].length; i++) {\r\n                code += parseInt(t[0].charCodeAt(i) - 64) * Math.pow(26, (t[0].length - 1 - i));\r\n            }\r\n            code--;\r\n            // Make sure jexcel starts on zero\r\n            if (code < 0) {\r\n                code = 0;\r\n            }\r\n    \r\n            // Number\r\n            var number = parseInt(/[0-9]+$/.exec(id));\r\n            if (number > 0) {\r\n                number--;\r\n            }\r\n    \r\n            if (arr == true) {\r\n                id = [ code, number ];\r\n            } else {\r\n                id = code + '-' + number;\r\n            }\r\n        }\r\n    \r\n        return id;\r\n    }\r\n    \r\n    /**\r\n     * Convert jexcel id to excel like column name\r\n     * \r\n     * @param string id\r\n     * @return string id\r\n     */\r\n    jexcel.getColumnNameFromId = function (cellId) {\r\n        if (! Array.isArray(cellId)) {\r\n            cellId = cellId.split('-');\r\n        }\r\n    \r\n        return jexcel.getColumnName(parseInt(cellId[0])) + (parseInt(cellId[1]) + 1);\r\n    }\r\n    \r\n    /**\r\n     * Verify element inside jexcel table\r\n     * \r\n     * @param string id\r\n     * @return string id\r\n     */\r\n    jexcel.getElement = function(element) {\r\n        var jexcelSection = 0;\r\n        var jexcelElement = 0;\r\n    \r\n        function path (element) {\r\n            if (element.className) {\r\n                if (element.classList.contains('jexcel_container')) {\r\n                    jexcelElement = element;\r\n                }\r\n            }\r\n    \r\n            if (element.tagName == 'THEAD') {\r\n                jexcelSection = 1;\r\n            } else if (element.tagName == 'TBODY') {\r\n                jexcelSection = 2;\r\n            }\r\n    \r\n            if (element.parentNode) {\r\n                if (! jexcelElement) {\r\n                    path(element.parentNode);\r\n                }\r\n            }\r\n        }\r\n    \r\n        path(element);\r\n    \r\n        return [ jexcelElement, jexcelSection ];\r\n    }\r\n\r\n    jexcel.doubleDigitFormat = function(v) {\r\n        v = ''+v;\r\n        if (v.length == 1) {\r\n            v = '0'+v;\r\n        }\r\n        return v;\r\n    }\r\n\r\n    jexcel.createFromTable = function(el, options) {\r\n        if (el.tagName != 'TABLE') {\r\n            console.log('Element is not a table');\r\n        } else {\r\n            // Configuration\r\n            if (! options) {\r\n                options = {};\r\n            }\r\n            options.columns = [];\r\n            options.data = [];\r\n\r\n            // Colgroup\r\n            var colgroup = el.querySelectorAll('colgroup > col');\r\n            if (colgroup.length) {\r\n                // Get column width\r\n                for (var i = 0; i < colgroup.length; i++) {\r\n                    var width = colgroup[i].style.width;\r\n                    if (! width) {\r\n                        var width = colgroup[i].getAttribute('width');\r\n                    }\r\n                    // Set column width\r\n                    if (width) {\r\n                        if (! options.columns[i]) {\r\n                            options.columns[i] = {}\r\n                        }\r\n                        options.columns[i].width = width;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Parse header\r\n            var parseHeader = function(header) {\r\n                // Get width information\r\n                var info = header.getBoundingClientRect();\r\n                var width = info.width > 50 ? info.width : 50;\r\n\r\n                // Create column option\r\n                if (! options.columns[i]) {\r\n                    options.columns[i] = {};\r\n                } \r\n                if (header.getAttribute('data-celltype')) {\r\n                    options.columns[i].type = header.getAttribute('data-celltype');\r\n                } else {\r\n                    options.columns[i].type = 'text';\r\n                }\r\n                options.columns[i].width = width + 'px';\r\n                options.columns[i].title = header.innerHTML;\r\n                options.columns[i].align = header.style.textAlign || 'center';\r\n            }\r\n\r\n            // Headers\r\n            var headers = el.querySelectorAll('thead > tr');\r\n            if (headers.length) {\r\n                // Get the last row in the thead\r\n                headers = headers[headers.length-1].children;\r\n                // Go though the headers\r\n                for (var i = 0; i < headers.length; i++) {\r\n                    parseHeader(headers[i]);\r\n                }\r\n            }\r\n\r\n            // Content\r\n            var rowNumber = 0;\r\n            var mergeCells = {};\r\n            var rows = {};\r\n            var style = {};\r\n            var classes = {};\r\n\r\n            var content = el.querySelectorAll('table > tr, tbody tr');\r\n            for (var j = 0; j < content.length; j++) {\r\n                options.data[rowNumber] = [];\r\n                if (options.parseTableFirstRowAsHeader == true && ! headers.length && j == 0) {\r\n                    for (var i = 0; i < content[j].children.length; i++) {\r\n                        parseHeader(content[j].children[i]);\r\n                    }\r\n                } else {\r\n                    for (var i = 0; i < content[j].children.length; i++) {\r\n                        // WickedGrid formula compatibility\r\n                        var value = content[j].children[i].getAttribute('data-formula');\r\n                        if (value) {\r\n                            if (value.substr(0,1) != '=') {\r\n                                value = '=' + value;\r\n                            }\r\n                        } else {\r\n                            var value = content[j].children[i].innerHTML;\r\n                        }\r\n                        options.data[rowNumber].push(value);\r\n\r\n                        // Key\r\n                        var cellName = jexcel.getColumnNameFromId([ i, j ]);\r\n\r\n                        // Classes\r\n                        var tmp = content[j].children[i].getAttribute('class');\r\n                        if (tmp) {\r\n                            classes[cellName] = tmp;\r\n                        }\r\n\r\n                        // Merged cells\r\n                        var mergedColspan = parseInt(content[j].children[i].getAttribute('colspan')) || 0;\r\n                        var mergedRowspan = parseInt(content[j].children[i].getAttribute('rowspan')) || 0;\r\n                        if (mergedColspan || mergedRowspan) {\r\n                            mergeCells[cellName] = [ mergedColspan || 1, mergedRowspan || 1 ];\r\n                        }\r\n\r\n                        // Avoid problems with hidden cells\r\n                        if (s = content[j].children[i].style && content[j].children[i].style.display == 'none') {\r\n                            content[j].children[i].style.display = '';\r\n                        }\r\n                        // Get style\r\n                        var s = content[j].children[i].getAttribute('style');\r\n                        if (s) {\r\n                            style[cellName] = s;\r\n                        }\r\n                        // Bold\r\n                        if (content[j].children[i].classList.contains('styleBold')) {\r\n                            if (style[cellName]) {\r\n                                style[cellName] += '; font-weight:bold;';\r\n                            } else {\r\n                                style[cellName] = 'font-weight:bold;';\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // Row Height\r\n                    if (content[j].style && content[j].style.height) {\r\n                        rows[j] = { height: content[j].style.height };\r\n                    }\r\n\r\n                    // Index\r\n                    rowNumber++;\r\n                }\r\n            }\r\n\r\n            // Style\r\n            if (Object.keys(style).length > 0) {\r\n                //options.style = style;\r\n            }\r\n            // Merged\r\n            if (Object.keys(mergeCells).length > 0) {\r\n                options.mergeCells = mergeCells;\r\n            }\r\n            // Row height\r\n            if (Object.keys(rows).length > 0) {\r\n                options.rows = rows;\r\n            }\r\n            // Classes\r\n            if (Object.keys(classes).length > 0) {\r\n                options.classes = classes;\r\n            }\r\n\r\n            // TODO: data-hiddencolumns=\"3,4\"\r\n            \r\n            // I guess in terms the better column type\r\n            if (options.parseTableAutoCellType == true) {\r\n                var pattern = [];\r\n                for (var i = 0; i < options.columns.length; i++) {\r\n                    var test = true;\r\n                    var testCalendar = true;\r\n                    pattern[i] = [];\r\n                    for (var j = 0; j < options.data.length; j++) {\r\n                        var value = options.data[j][i];\r\n                        if (! pattern[i][value]) {\r\n                            pattern[i][value] = 0;\r\n                        }\r\n                        pattern[i][value]++;\r\n                        if (value.length > 25) {\r\n                            test = false;\r\n                        }\r\n                        if (value.length == 10) {\r\n                            if (! (value.substr(4,1) == '-' && value.substr(7,1) == '-')) {\r\n                                testCalendar = false;\r\n                            }\r\n                        } else {\r\n                            testCalendar = false;\r\n                        }\r\n                    }\r\n\r\n                    var keys = Object.keys(pattern[i]).length;\r\n                    if (testCalendar) {\r\n                        options.columns[i].type = 'calendar';\r\n                    } else if (test == true && keys > 1 && keys <= parseInt(options.data.length * 0.1)) {\r\n                        options.columns[i].type = 'dropdown';\r\n                        options.columns[i].source = Object.keys(pattern[i]);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return options;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Jquery Support\r\n     */\r\n    if (typeof(jQuery) != 'undefined') {\r\n        (function($){\r\n            $.fn.jexcel = function(method) {\r\n                var spreadsheetContainer = $(this).get(0);\r\n                if (! spreadsheetContainer.jexcel) {\r\n                    return jexcel($(this).get(0), arguments[0]);\r\n                } else {\r\n                    return spreadsheetContainer.jexcel[method].apply(this, Array.prototype.slice.call( arguments, 1 ));\r\n                }\r\n            };\r\n    \r\n        })(jQuery);\r\n    }\r\n    \r\n    \r\n    // Based on sutoiku work (https://github.com/sutoiku)\r\n    \r\n    var error = (function() {\r\n        var exports = {};\r\n    \r\n        exports.nil = new Error('#NULL!');\r\n        exports.div0 = new Error('#DIV/0!');\r\n        exports.value = new Error('#VALUE!');\r\n        exports.ref = new Error('#REF!');\r\n        exports.name = new Error('#NAME?');\r\n        exports.num = new Error('#NUM!');\r\n        exports.na = new Error('#N/A');\r\n        exports.error = new Error('#ERROR!');\r\n        exports.data = new Error('#GETTING_DATA');\r\n    \r\n        return exports;\r\n    })();\r\n    \r\n    var utils = (function() {\r\n        var exports = {};\r\n    \r\n        exports.flattenShallow = function(array) {\r\n            if (!array || !array.reduce) {\r\n                return array;\r\n            }\r\n    \r\n            return array.reduce(function(a, b) {\r\n                var aIsArray = Array.isArray(a);\r\n                var bIsArray = Array.isArray(b);\r\n    \r\n                if (aIsArray && bIsArray) {\r\n                    return a.concat(b);\r\n                }\r\n                if (aIsArray) {\r\n                    a.push(b);\r\n    \r\n                    return a;\r\n                }\r\n                if (bIsArray) {\r\n                    return [ a ].concat(b);\r\n                }\r\n    \r\n                return [ a, b ];\r\n            });\r\n        };\r\n    \r\n        exports.isFlat = function(array) {\r\n            if (!array) {\r\n                return false;\r\n            }\r\n    \r\n            for (var i = 0; i < array.length; ++i) {\r\n                if (Array.isArray(array[i])) {\r\n                    return false;\r\n                }\r\n            }\r\n    \r\n            return true;\r\n        };\r\n    \r\n        exports.flatten = function() {\r\n            var result = exports.argsToArray.apply(null, arguments);\r\n    \r\n            while (!exports.isFlat(result)) {\r\n                result = exports.flattenShallow(result);\r\n            }\r\n    \r\n            return result;\r\n        };\r\n    \r\n        exports.argsToArray = function(args) {\r\n            var result = [];\r\n    \r\n            exports.arrayEach(args, function(value) {\r\n                result.push(value);\r\n            });\r\n    \r\n            return result;\r\n        };\r\n    \r\n        exports.numbers = function() {\r\n            var possibleNumbers = this.flatten.apply(null, arguments);\r\n            return possibleNumbers.filter(function(el) {\r\n                return typeof el === 'number';\r\n            });\r\n        };\r\n    \r\n        exports.cleanFloat = function(number) {\r\n            var power = 1e14;\r\n            return Math.round(number * power) / power;\r\n        };\r\n    \r\n        exports.parseBool = function(bool) {\r\n            if (typeof bool === 'boolean') {\r\n                return bool;\r\n            }\r\n    \r\n            if (bool instanceof Error) {\r\n                return bool;\r\n            }\r\n    \r\n            if (typeof bool === 'number') {\r\n                return bool !== 0;\r\n            }\r\n    \r\n            if (typeof bool === 'string') {\r\n                var up = bool.toUpperCase();\r\n                if (up === 'TRUE') {\r\n                    return true;\r\n                }\r\n    \r\n                if (up === 'FALSE') {\r\n                    return false;\r\n                }\r\n            }\r\n    \r\n            if (bool instanceof Date && !isNaN(bool)) {\r\n                return true;\r\n            }\r\n    \r\n            return error.value;\r\n        };\r\n    \r\n        exports.parseNumber = function(string) {\r\n            if (string === undefined || string === '') {\r\n                return error.value;\r\n            }\r\n            if (!isNaN(string)) {\r\n                return parseFloat(string);\r\n            }\r\n    \r\n            return error.value;\r\n        };\r\n    \r\n        exports.parseNumberArray = function(arr) {\r\n            var len;\r\n    \r\n            if (!arr || (len = arr.length) === 0) {\r\n                return error.value;\r\n            }\r\n    \r\n            var parsed;\r\n    \r\n            while (len--) {\r\n                parsed = exports.parseNumber(arr[len]);\r\n                if (parsed === error.value) {\r\n                    return parsed;\r\n                }\r\n                arr[len] = parsed;\r\n            }\r\n    \r\n            return arr;\r\n        };\r\n    \r\n        exports.parseMatrix = function(matrix) {\r\n            var n;\r\n    \r\n            if (!matrix || (n = matrix.length) === 0) {\r\n                return error.value;\r\n            }\r\n            var pnarr;\r\n    \r\n            for (var i = 0; i < matrix.length; i++) {\r\n                pnarr = exports.parseNumberArray(matrix[i]);\r\n                matrix[i] = pnarr;\r\n    \r\n                if (pnarr instanceof Error) {\r\n                    return pnarr;\r\n                }\r\n            }\r\n    \r\n            return matrix;\r\n        };\r\n    \r\n        var d1900 = new Date(Date.UTC(1900, 0, 1));\r\n        exports.parseDate = function(date) {\r\n            if (!isNaN(date)) {\r\n                if (date instanceof Date) {\r\n                    return new Date(date);\r\n                }\r\n                var d = parseInt(date, 10);\r\n                if (d < 0) {\r\n                    return error.num;\r\n                }\r\n                if (d <= 60) {\r\n                    return new Date(d1900.getTime() + (d - 1) * 86400000);\r\n                }\r\n                return new Date(d1900.getTime() + (d - 2) * 86400000);\r\n            }\r\n            if (typeof date === 'string') {\r\n                date = new Date(date);\r\n                if (!isNaN(date)) {\r\n                    return date;\r\n                }\r\n            }\r\n            return error.value;\r\n        };\r\n    \r\n        exports.parseDateArray = function(arr) {\r\n            var len = arr.length;\r\n            var parsed;\r\n            while (len--) {\r\n                parsed = this.parseDate(arr[len]);\r\n                if (parsed === error.value) {\r\n                    return parsed;\r\n                }\r\n                arr[len] = parsed;\r\n            }\r\n            return arr;\r\n        };\r\n    \r\n        exports.anyIsError = function() {\r\n            var n = arguments.length;\r\n            while (n--) {\r\n                if (arguments[n] instanceof Error) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n    \r\n        exports.arrayValuesToNumbers = function(arr) {\r\n            var n = arr.length;\r\n            var el;\r\n            while (n--) {\r\n                el = arr[n];\r\n                if (typeof el === 'number') {\r\n                    continue;\r\n                }\r\n                if (el === true) {\r\n                    arr[n] = 1;\r\n                    continue;\r\n                }\r\n                if (el === false) {\r\n                    arr[n] = 0;\r\n                    continue;\r\n                }\r\n                if (typeof el === 'string') {\r\n                    var number = this.parseNumber(el);\r\n                    if (number instanceof Error) {\r\n                        arr[n] = 0;\r\n                    } else {\r\n                        arr[n] = number;\r\n                    }\r\n                }\r\n            }\r\n            return arr;\r\n        };\r\n    \r\n        exports.rest = function(array, idx) {\r\n            idx = idx || 1;\r\n            if (!array || typeof array.slice !== 'function') {\r\n                return array;\r\n            }\r\n            return array.slice(idx);\r\n        };\r\n    \r\n        exports.initial = function(array, idx) {\r\n            idx = idx || 1;\r\n            if (!array || typeof array.slice !== 'function') {\r\n                return array;\r\n            }\r\n            return array.slice(0, array.length - idx);\r\n        };\r\n    \r\n        exports.arrayEach = function(array, iteratee) {\r\n            var index = -1, length = array.length;\r\n    \r\n            while (++index < length) {\r\n                if (iteratee(array[index], index, array) === false) {\r\n                    break;\r\n                }\r\n            }\r\n    \r\n            return array;\r\n        };\r\n    \r\n        exports.transpose = function(matrix) {\r\n            if (!matrix) {\r\n                return error.value;\r\n            }\r\n    \r\n            return matrix[0].map(function(col, i) {\r\n                return matrix.map(function(row) {\r\n                    return row[i];\r\n                });\r\n            });\r\n        };\r\n    \r\n        return exports;\r\n    })();\r\n    \r\n    jexcel.methods = {};\r\n    \r\n    jexcel.methods.datetime = (function() {\r\n        var exports = {};\r\n    \r\n        var d1900 = new Date(1900, 0, 1);\r\n        var WEEK_STARTS = [\r\n            undefined,\r\n            0,\r\n            1,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            1,\r\n            2,\r\n            3,\r\n            4,\r\n            5,\r\n            6,\r\n            0\r\n        ];\r\n        var WEEK_TYPES = [\r\n            [],\r\n            [1, 2, 3, 4, 5, 6, 7],\r\n            [7, 1, 2, 3, 4, 5, 6],\r\n            [6, 0, 1, 2, 3, 4, 5],\r\n            [],\r\n            [],\r\n            [],\r\n            [],\r\n            [],\r\n            [],\r\n            [],\r\n            [7, 1, 2, 3, 4, 5, 6],\r\n            [6, 7, 1, 2, 3, 4, 5],\r\n            [5, 6, 7, 1, 2, 3, 4],\r\n            [4, 5, 6, 7, 1, 2, 3],\r\n            [3, 4, 5, 6, 7, 1, 2],\r\n            [2, 3, 4, 5, 6, 7, 1],\r\n            [1, 2, 3, 4, 5, 6, 7]\r\n        ];\r\n        var WEEKEND_TYPES = [\r\n            [],\r\n            [6, 0],\r\n            [0, 1],\r\n            [1, 2],\r\n            [2, 3],\r\n            [3, 4],\r\n            [4, 5],\r\n            [5, 6],\r\n            undefined,\r\n            undefined,\r\n            undefined, [0, 0],\r\n            [1, 1],\r\n            [2, 2],\r\n            [3, 3],\r\n            [4, 4],\r\n            [5, 5],\r\n            [6, 6]\r\n        ];\r\n    \r\n        exports.DATE = function(year, month, day) {\r\n            year = utils.parseNumber(year);\r\n            month = utils.parseNumber(month);\r\n            day = utils.parseNumber(day);\r\n            if (utils.anyIsError(year, month, day)) {\r\n                return error.value;\r\n            }\r\n            if (year < 0 || month < 0 || day < 0) {\r\n                return error.num;\r\n            }\r\n            var date = new Date(year, month - 1, day);\r\n            return date;\r\n        };\r\n    \r\n        exports.DATEVALUE = function(date_text) {\r\n            if (typeof date_text !== 'string') {\r\n                return error.value;\r\n            }\r\n            var date = Date.parse(date_text);\r\n            if (isNaN(date)) {\r\n                return error.value;\r\n            }\r\n            if (date <= -2203891200000) {\r\n                return (date - d1900) / 86400000 + 1;\r\n            }\r\n            return (date - d1900) / 86400000 + 2;\r\n        };\r\n    \r\n        exports.DAY = function(serial_number) {\r\n            var date = utils.parseDate(serial_number);\r\n            if (date instanceof Error) {\r\n                return date;\r\n            }\r\n            return date.getDate();\r\n        };\r\n    \r\n        exports.DAYS = function(end_date, start_date) {\r\n            end_date = utils.parseDate(end_date);\r\n            start_date = utils.parseDate(start_date);\r\n            if (end_date instanceof Error) {\r\n                return end_date;\r\n            }\r\n            if (start_date instanceof Error) {\r\n                return start_date;\r\n            }\r\n            return serial(end_date) - serial(start_date);\r\n        };\r\n    \r\n        exports.DAYS360 = function(start_date, end_date, method) {\r\n        };\r\n    \r\n        exports.EDATE = function(start_date, months) {\r\n            start_date = utils.parseDate(start_date);\r\n            if (start_date instanceof Error) {\r\n                return start_date;\r\n            }\r\n            if (isNaN(months)) {\r\n                return error.value;\r\n            }\r\n            months = parseInt(months, 10);\r\n            start_date.setMonth(start_date.getMonth() + months);\r\n            return serial(start_date);\r\n        };\r\n    \r\n        exports.EOMONTH = function(start_date, months) {\r\n            start_date = utils.parseDate(start_date);\r\n            if (start_date instanceof Error) {\r\n                return start_date;\r\n            }\r\n            if (isNaN(months)) {\r\n                return error.value;\r\n            }\r\n            months = parseInt(months, 10);\r\n            return serial(new Date(start_date.getFullYear(), start_date.getMonth() + months + 1, 0));\r\n        };\r\n    \r\n        exports.HOUR = function(serial_number) {\r\n            serial_number = utils.parseDate(serial_number);\r\n            if (serial_number instanceof Error) {\r\n                return serial_number;\r\n            }\r\n            return serial_number.getHours();\r\n        };\r\n    \r\n        exports.INTERVAL = function(second) {\r\n            if (typeof second !== 'number' && typeof second !== 'string') {\r\n                return error.value;\r\n            } else {\r\n                second = parseInt(second, 10);\r\n            }\r\n    \r\n            var year  = Math.floor(second/946080000);\r\n            second    = second%946080000;\r\n            var month = Math.floor(second/2592000);\r\n            second    = second%2592000;\r\n            var day   = Math.floor(second/86400);\r\n            second    = second%86400;\r\n    \r\n            var hour  = Math.floor(second/3600);\r\n            second    = second%3600;\r\n            var min   = Math.floor(second/60);\r\n            second    = second%60;\r\n            var sec   = second;\r\n    \r\n            year  = (year  > 0) ? year  + 'Y' : '';\r\n            month = (month > 0) ? month + 'M' : '';\r\n            day   = (day   > 0) ? day   + 'D' : '';\r\n            hour  = (hour  > 0) ? hour  + 'H' : '';\r\n            min   = (min   > 0) ? min   + 'M' : '';\r\n            sec   = (sec   > 0) ? sec   + 'S' : '';\r\n    \r\n            return 'P' + year + month + day + 'T' + hour + min + sec;\r\n        };\r\n    \r\n        exports.ISOWEEKNUM = function(date) {\r\n            date = utils.parseDate(date);\r\n            if (date instanceof Error) {\r\n                return date;\r\n            }\r\n    \r\n            date.setHours(0, 0, 0);\r\n            date.setDate(date.getDate() + 4 - (date.getDay() || 7));\r\n            var yearStart = new Date(date.getFullYear(), 0, 1);\r\n            return Math.ceil((((date - yearStart) / 86400000) + 1) / 7);\r\n        };\r\n    \r\n        exports.MINUTE = function(serial_number) {\r\n            serial_number = utils.parseDate(serial_number);\r\n            if (serial_number instanceof Error) {\r\n                return serial_number;\r\n            }\r\n            return serial_number.getMinutes();\r\n        };\r\n    \r\n        exports.MONTH = function(serial_number) {\r\n            serial_number = utils.parseDate(serial_number);\r\n            if (serial_number instanceof Error) {\r\n                return serial_number;\r\n            }\r\n            return serial_number.getMonth() + 1;\r\n        };\r\n    \r\n        exports.NETWORKDAYS = function(start_date, end_date, holidays) {\r\n        };\r\n    \r\n        exports.NETWORKDAYS.INTL = function(start_date, end_date, weekend, holidays) {\r\n        };\r\n    \r\n        exports.NOW = function() {\r\n            return new Date();\r\n        };\r\n    \r\n        exports.SECOND = function(serial_number) {\r\n            serial_number = utils.parseDate(serial_number);\r\n            if (serial_number instanceof Error) {\r\n                return serial_number;\r\n            }\r\n            return serial_number.getSeconds();\r\n        };\r\n    \r\n        exports.TIME = function(hour, minute, second) {\r\n            hour = utils.parseNumber(hour);\r\n            minute = utils.parseNumber(minute);\r\n            second = utils.parseNumber(second);\r\n            if (utils.anyIsError(hour, minute, second)) {\r\n                return error.value;\r\n            }\r\n            if (hour < 0 || minute < 0 || second < 0) {\r\n                return error.num;\r\n            }\r\n            return (3600 * hour + 60 * minute + second) / 86400;\r\n        };\r\n    \r\n        exports.TIMEVALUE = function(time_text) {\r\n            time_text = utils.parseDate(time_text);\r\n            if (time_text instanceof Error) {\r\n                return time_text;\r\n            }\r\n            return (3600 * time_text.getHours() + 60 * time_text.getMinutes() + time_text.getSeconds()) / 86400;\r\n        };\r\n    \r\n        exports.TODAY = function() {\r\n            return new Date();\r\n        };\r\n    \r\n        exports.WEEKDAY = function(serial_number, return_type) {\r\n            serial_number = utils.parseDate(serial_number);\r\n            if (serial_number instanceof Error) {\r\n                return serial_number;\r\n            }\r\n            if (return_type === undefined) {\r\n                return_type = 1;\r\n            }\r\n            var day = serial_number.getDay();\r\n            return WEEK_TYPES[return_type][day];\r\n        };\r\n    \r\n        exports.WEEKNUM = function(serial_number, return_type) {\r\n        };\r\n    \r\n        exports.WORKDAY = function(start_date, days, holidays) {\r\n        };\r\n    \r\n        exports.WORKDAY.INTL = function(start_date, days, weekend, holidays) {\r\n        };\r\n    \r\n        exports.YEAR = function(serial_number) {\r\n            serial_number = utils.parseDate(serial_number);\r\n            if (serial_number instanceof Error) {\r\n                return serial_number;\r\n            }\r\n            return serial_number.getFullYear();\r\n        };\r\n    \r\n        function isLeapYear(year) {\r\n            return new Date(year, 1, 29).getMonth() === 1;\r\n        }\r\n    \r\n        exports.YEARFRAC = function(start_date, end_date, basis) {\r\n        };\r\n    \r\n        function serial(date) {\r\n            var addOn = (date > -2203891200000)?2:1;\r\n            return (date - d1900) / 86400000 + addOn;\r\n        }\r\n    \r\n        return exports;\r\n    })();\r\n    \r\n    jexcel.methods.database = (function() {\r\n        var exports = {};\r\n    \r\n        function compact(array) {\r\n            if (!array) {\r\n                return array;\r\n            }\r\n            var result = [];\r\n            for (var i = 0; i < array.length; ++i) {\r\n                if (!array[i]) {\r\n                    continue;\r\n                }\r\n                result.push(array[i]);\r\n            }\r\n            return result;\r\n        }\r\n    \r\n        exports.FINDFIELD = function(database, title) {\r\n            var index = null;\r\n            for (var i = 0; i < database.length; i++) {\r\n                if (database[i][0] === title) {\r\n                    index = i;\r\n                    break;\r\n                }\r\n            }\r\n    \r\n            // Return error if the input field title is incorrect\r\n            if (index == null) {\r\n                return error.value;\r\n            }\r\n            return index;\r\n        };\r\n    \r\n        function findResultIndex(database, criterias) {\r\n            var matches = {};\r\n            for (var i = 1; i < database[0].length; ++i) {\r\n                matches[i] = true;\r\n            }\r\n            var maxCriteriaLength = criterias[0].length;\r\n            for (i = 1; i < criterias.length; ++i) {\r\n                if (criterias[i].length > maxCriteriaLength) {\r\n                    maxCriteriaLength = criterias[i].length;\r\n                }\r\n            }\r\n    \r\n            for (var k = 1; k < database.length; ++k) {\r\n                for (var l = 1; l < database[k].length; ++l) {\r\n                    var currentCriteriaResult = false;\r\n                    var hasMatchingCriteria = false;\r\n                    for (var j = 0; j < criterias.length; ++j) {\r\n                        var criteria = criterias[j];\r\n                        if (criteria.length < maxCriteriaLength) {\r\n                            continue;\r\n                        }\r\n    \r\n                        var criteriaField = criteria[0];\r\n                        if (database[k][0] !== criteriaField) {\r\n                            continue;\r\n                        }\r\n                        hasMatchingCriteria = true;\r\n                        for (var p = 1; p < criteria.length; ++p) {\r\n                            currentCriteriaResult = currentCriteriaResult\r\n                                    || eval(database[k][l] + criteria[p]); // jshint\r\n                                                                            // ignore:line\r\n                        }\r\n                    }\r\n                    if (hasMatchingCriteria) {\r\n                        matches[l] = matches[l] && currentCriteriaResult;\r\n                    }\r\n                }\r\n            }\r\n    \r\n            var result = [];\r\n            for (var n = 0; n < database[0].length; ++n) {\r\n                if (matches[n]) {\r\n                    result.push(n - 1);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n    \r\n        // Database functions\r\n        exports.DAVERAGE = function(database, field, criteria) {\r\n            // Return error if field is not a number and not a string\r\n            if (isNaN(field) && (typeof field !== \"string\")) {\r\n                return error.value;\r\n            }\r\n            var resultIndexes = findResultIndex(database, criteria);\r\n            var targetFields = [];\r\n            if (typeof field === \"string\") {\r\n                var index = exports.FINDFIELD(database, field);\r\n                targetFields = utils.rest(database[index]);\r\n            } else {\r\n                targetFields = utils.rest(database[field]);\r\n            }\r\n            var sum = 0;\r\n            for (var i = 0; i < resultIndexes.length; i++) {\r\n                sum += targetFields[resultIndexes[i]];\r\n            }\r\n            return resultIndexes.length === 0 ? error.div0 : sum / resultIndexes.length;\r\n        };\r\n    \r\n        exports.DCOUNT = function(database, field, criteria) {\r\n        };\r\n    \r\n        exports.DCOUNTA = function(database, field, criteria) {\r\n        };\r\n    \r\n        exports.DGET = function(database, field, criteria) {\r\n            // Return error if field is not a number and not a string\r\n            if (isNaN(field) && (typeof field !== \"string\")) {\r\n                return error.value;\r\n            }\r\n            var resultIndexes = findResultIndex(database, criteria);\r\n            var targetFields = [];\r\n            if (typeof field === \"string\") {\r\n                var index = exports.FINDFIELD(database, field);\r\n                targetFields = utils.rest(database[index]);\r\n            } else {\r\n                targetFields = utils.rest(database[field]);\r\n            }\r\n            // Return error if no record meets the criteria\r\n            if (resultIndexes.length === 0) {\r\n                return error.value;\r\n            }\r\n            // Returns the #NUM! error value because more than one record meets the\r\n            // criteria\r\n            if (resultIndexes.length > 1) {\r\n                return error.num;\r\n            }\r\n    \r\n            return targetFields[resultIndexes[0]];\r\n        };\r\n    \r\n        exports.DMAX = function(database, field, criteria) {\r\n            // Return error if field is not a number and not a string\r\n            if (isNaN(field) && (typeof field !== \"string\")) {\r\n                return error.value;\r\n            }\r\n            var resultIndexes = findResultIndex(database, criteria);\r\n            var targetFields = [];\r\n            if (typeof field === \"string\") {\r\n                var index = exports.FINDFIELD(database, field);\r\n                targetFields = utils.rest(database[index]);\r\n            } else {\r\n                targetFields = utils.rest(database[field]);\r\n            }\r\n            var maxValue = targetFields[resultIndexes[0]];\r\n            for (var i = 1; i < resultIndexes.length; i++) {\r\n                if (maxValue < targetFields[resultIndexes[i]]) {\r\n                    maxValue = targetFields[resultIndexes[i]];\r\n                }\r\n            }\r\n            return maxValue;\r\n        };\r\n    \r\n        exports.DMIN = function(database, field, criteria) {\r\n            // Return error if field is not a number and not a string\r\n            if (isNaN(field) && (typeof field !== \"string\")) {\r\n                return error.value;\r\n            }\r\n            var resultIndexes = findResultIndex(database, criteria);\r\n            var targetFields = [];\r\n            if (typeof field === \"string\") {\r\n                var index = exports.FINDFIELD(database, field);\r\n                targetFields = utils.rest(database[index]);\r\n            } else {\r\n                targetFields = utils.rest(database[field]);\r\n            }\r\n            var minValue = targetFields[resultIndexes[0]];\r\n            for (var i = 1; i < resultIndexes.length; i++) {\r\n                if (minValue > targetFields[resultIndexes[i]]) {\r\n                    minValue = targetFields[resultIndexes[i]];\r\n                }\r\n            }\r\n            return minValue;\r\n        };\r\n    \r\n        exports.DPRODUCT = function(database, field, criteria) {\r\n            // Return error if field is not a number and not a string\r\n            if (isNaN(field) && (typeof field !== \"string\")) {\r\n                return error.value;\r\n            }\r\n            var resultIndexes = findResultIndex(database, criteria);\r\n            var targetFields = [];\r\n            if (typeof field === \"string\") {\r\n                var index = exports.FINDFIELD(database, field);\r\n                targetFields = utils.rest(database[index]);\r\n            } else {\r\n                targetFields = utils.rest(database[field]);\r\n            }\r\n            var targetValues = [];\r\n            for (var i = 0; i < resultIndexes.length; i++) {\r\n                targetValues[i] = targetFields[resultIndexes[i]];\r\n            }\r\n            targetValues = compact(targetValues);\r\n            var result = 1;\r\n            for (i = 0; i < targetValues.length; i++) {\r\n                result *= targetValues[i];\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.DSTDEV = function(database, field, criteria) {\r\n        };\r\n    \r\n        exports.DSTDEVP = function(database, field, criteria) {\r\n        };\r\n    \r\n        exports.DSUM = function(database, field, criteria) {\r\n        };\r\n    \r\n        exports.DVAR = function(database, field, criteria) {\r\n        };\r\n    \r\n        exports.DVARP = function(database, field, criteria) {\r\n        };\r\n    \r\n        exports.MATCH = function(lookupValue, lookupArray, matchType) {\r\n            if (!lookupValue && !lookupArray) {\r\n                return error.na;\r\n            }\r\n            if (arguments.length === 2) {\r\n                matchType = 1;\r\n            }\r\n            if (!(lookupArray instanceof Array)) {\r\n                return error.na;\r\n            }\r\n            if (matchType !== -1 && matchType !== 0 && matchType !== 1) {\r\n                return error.na;\r\n            }\r\n    \r\n            var index;\r\n            var indexValue;\r\n    \r\n            for (var idx = 0; idx < lookupArray.length; idx++) {\r\n                if (matchType === 1) {\r\n                    if (lookupArray[idx] === lookupValue) {\r\n                        return idx + 1;\r\n                    } else if (lookupArray[idx] < lookupValue) {\r\n                        if (!indexValue) {\r\n                            index = idx + 1;\r\n                            indexValue = lookupArray[idx];\r\n                        } else if (lookupArray[idx] > indexValue) {\r\n                            index = idx + 1;\r\n                            indexValue = lookupArray[idx];\r\n                        }\r\n                    }\r\n                } else if (matchType === 0) {\r\n                    if (typeof lookupValue === 'string') {\r\n                        lookupValue = lookupValue.replace(/\\?/g, '.');\r\n                        if (lookupArray[idx].toLowerCase().match(lookupValue.toLowerCase())) {\r\n                            return idx + 1;\r\n                        }\r\n                    } else {\r\n                        if (lookupArray[idx] === lookupValue) {\r\n                            return idx + 1;\r\n                        }\r\n                    }\r\n                } else if (matchType === -1) {\r\n                    if (lookupArray[idx] === lookupValue) {\r\n                        return idx + 1;\r\n                    } else if (lookupArray[idx] > lookupValue) {\r\n                        if (!indexValue) {\r\n                            index = idx + 1;\r\n                            indexValue = lookupArray[idx];\r\n                        } else if (lookupArray[idx] < indexValue) {\r\n                            index = idx + 1;\r\n                            indexValue = lookupArray[idx];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            return index ? index : error.na;\r\n        };\r\n    \r\n        return exports;\r\n    })();\r\n    \r\n    jexcel.methods.engineering = (function() {\r\n        var exports = {};\r\n    \r\n        function isValidBinaryNumber(number) {\r\n            return (/^[01]{1,10}$/).test(number);\r\n        }\r\n    \r\n        exports.BESSELI = function(x, n) {\r\n        };\r\n    \r\n        exports.BESSELJ = function(x, n) {\r\n        };\r\n    \r\n        exports.BESSELK = function(x, n) {\r\n        };\r\n    \r\n        exports.BESSELY = function(x, n) {\r\n        };\r\n    \r\n        exports.BIN2DEC = function(number) {\r\n            // Return error if number is not binary or contains more than 10\r\n            // characters (10 digits)\r\n            if (!isValidBinaryNumber(number)) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Convert binary number to decimal\r\n            var result = parseInt(number, 2);\r\n    \r\n            // Handle negative numbers\r\n            var stringified = number.toString();\r\n            if (stringified.length === 10 && stringified.substring(0, 1) === '1') {\r\n                return parseInt(stringified.substring(1), 2) - 512;\r\n            } else {\r\n                return result;\r\n            }\r\n        };\r\n    \r\n        exports.BIN2HEX = function(number, places) {\r\n            // Return error if number is not binary or contains more than 10\r\n            // characters (10 digits)\r\n            if (!isValidBinaryNumber(number)) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Ignore places and return a 10-character hexadecimal number if number\r\n            // is negative\r\n            var stringified = number.toString();\r\n            if (stringified.length === 10 && stringified.substring(0, 1) === '1') {\r\n                return (1099511627264 + parseInt(stringified.substring(1), 2)).toString(16);\r\n            }\r\n    \r\n            // Convert binary number to hexadecimal\r\n            var result = parseInt(number, 2).toString(16);\r\n    \r\n            // Return hexadecimal number using the minimum number of characters\r\n            // necessary if places is undefined\r\n            if (places === undefined) {\r\n                return result;\r\n            } else {\r\n                // Return error if places is nonnumeric\r\n                if (isNaN(places)) {\r\n                  return error.value;\r\n                }\r\n    \r\n                // Return error if places is negative\r\n                if (places < 0) {\r\n                  return error.num;\r\n                }\r\n    \r\n                // Truncate places in case it is not an integer\r\n                places = Math.floor(places);\r\n    \r\n                // Pad return value with leading 0s (zeros) if necessary (using\r\n                // Underscore.string)\r\n                return (places >= result.length) ? REPT('0', places - result.length) + result : error.num;\r\n            }\r\n        };\r\n    \r\n        exports.BIN2OCT = function(number, places) {\r\n            // Return error if number is not binary or contains more than 10\r\n            // characters (10 digits)\r\n            if (!isValidBinaryNumber(number)) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Ignore places and return a 10-character octal number if number is\r\n            // negative\r\n            var stringified = number.toString();\r\n            if (stringified.length === 10 && stringified.substring(0, 1) === '1') {\r\n                return (1073741312 + parseInt(stringified.substring(1), 2)).toString(8);\r\n            }\r\n    \r\n            // Convert binary number to octal\r\n            var result = parseInt(number, 2).toString(8);\r\n    \r\n            // Return octal number using the minimum number of characters necessary\r\n            // if places is undefined\r\n            if (places === undefined) {\r\n                return result;\r\n            } else {\r\n                // Return error if places is nonnumeric\r\n                if (isNaN(places)) {\r\n                  return error.value;\r\n                }\r\n    \r\n                // Return error if places is negative\r\n                if (places < 0) {\r\n                  return error.num;\r\n                }\r\n    \r\n                // Truncate places in case it is not an integer\r\n                places = Math.floor(places);\r\n    \r\n                // Pad return value with leading 0s (zeros) if necessary (using\r\n                // Underscore.string)\r\n                return (places >= result.length) ? REPT('0', places - result.length) + result : error.num;\r\n            }\r\n        };\r\n    \r\n        exports.BITAND = function(number1, number2) {\r\n            // Return error if either number is a non-numeric value\r\n            number1 = utils.parseNumber(number1);\r\n            number2 = utils.parseNumber(number2);\r\n            if (utils.anyIsError(number1, number2)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if either number is less than 0\r\n            if (number1 < 0 || number2 < 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if either number is a non-integer\r\n            if (Math.floor(number1) !== number1 || Math.floor(number2) !== number2) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if either number is greater than (2^48)-1\r\n            if (number1 > 281474976710655 || number2 > 281474976710655) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return bitwise AND of two numbers\r\n            return number1 & number2;\r\n        };\r\n    \r\n        exports.BITLSHIFT = function(number, shift) {\r\n            number = utils.parseNumber(number);\r\n            shift = utils.parseNumber(shift);\r\n            if (utils.anyIsError(number, shift)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if number is less than 0\r\n            if (number < 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if number is a non-integer\r\n            if (Math.floor(number) !== number) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if number is greater than (2^48)-1\r\n            if (number > 281474976710655) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if the absolute value of shift is greater than 53\r\n            if (Math.abs(shift) > 53) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return number shifted by shift bits to the left or to the right if\r\n            // shift is negative\r\n            return (shift >= 0) ? number << shift : number >> -shift;\r\n        };\r\n    \r\n        exports.BITOR = function(number1, number2) {\r\n            number1 = utils.parseNumber(number1);\r\n            number2 = utils.parseNumber(number2);\r\n            if (utils.anyIsError(number1, number2)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if either number is less than 0\r\n            if (number1 < 0 || number2 < 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if either number is a non-integer\r\n            if (Math.floor(number1) !== number1 || Math.floor(number2) !== number2) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if either number is greater than (2^48)-1\r\n            if (number1 > 281474976710655 || number2 > 281474976710655) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return bitwise OR of two numbers\r\n            return number1 | number2;\r\n        };\r\n    \r\n        exports.BITRSHIFT = function(number, shift) {\r\n            number = utils.parseNumber(number);\r\n            shift = utils.parseNumber(shift);\r\n            if (utils.anyIsError(number, shift)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if number is less than 0\r\n            if (number < 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if number is a non-integer\r\n            if (Math.floor(number) !== number) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if number is greater than (2^48)-1\r\n            if (number > 281474976710655) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if the absolute value of shift is greater than 53\r\n            if (Math.abs(shift) > 53) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return number shifted by shift bits to the right or to the left if\r\n            // shift is negative\r\n            return (shift >= 0) ? number >> shift : number << -shift;\r\n        };\r\n    \r\n        exports.BITXOR = function(number1, number2) {\r\n            number1 = utils.parseNumber(number1);\r\n            number2 = utils.parseNumber(number2);\r\n            if (utils.anyIsError(number1, number2)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if either number is less than 0\r\n            if (number1 < 0 || number2 < 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if either number is a non-integer\r\n            if (Math.floor(number1) !== number1 || Math.floor(number2) !== number2) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if either number is greater than (2^48)-1\r\n            if (number1 > 281474976710655 || number2 > 281474976710655) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return bitwise XOR of two numbers\r\n            return number1 ^ number2;\r\n        };\r\n    \r\n        exports.COMPLEX = function(real, imaginary, suffix) {\r\n            real = utils.parseNumber(real);\r\n            imaginary = utils.parseNumber(imaginary);\r\n            if (utils.anyIsError(real, imaginary)) {\r\n                return real;\r\n            }\r\n    \r\n            // Set suffix\r\n            suffix = (suffix === undefined) ? 'i' : suffix;\r\n    \r\n            // Return error if suffix is neither \"i\" nor \"j\"\r\n            if (suffix !== 'i' && suffix !== 'j') {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return complex number\r\n            if (real === 0 && imaginary === 0) {\r\n                return 0;\r\n            } else if (real === 0) {\r\n                return (imaginary === 1) ? suffix : imaginary.toString() + suffix;\r\n            } else if (imaginary === 0) {\r\n                return real.toString();\r\n            } else {\r\n                var sign = (imaginary > 0) ? '+' : '';\r\n                return real.toString() + sign + ((imaginary === 1) ? suffix : imaginary.toString() + suffix);\r\n            }\r\n        };\r\n    \r\n        exports.CONVERT = function(number, from_unit, to_unit) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n    \r\n            // List of units supported by CONVERT and units defined by the\r\n            // International System of Units\r\n            // [Name, Symbol, Alternate symbols, Quantity, ISU, CONVERT, Conversion\r\n            // ratio]\r\n            var units = [\r\n                [\"a.u. of action\", \"?\", null, \"action\", false, false, 1.05457168181818e-34],\r\n                [\"a.u. of charge\", \"e\", null, \"electric_charge\", false, false, 1.60217653141414e-19],\r\n                [\"a.u. of energy\", \"Eh\", null, \"energy\", false, false, 4.35974417757576e-18],\r\n                [\"a.u. of length\", \"a?\", null, \"length\", false, false, 5.29177210818182e-11],\r\n                [\"a.u. of mass\", \"m?\", null, \"mass\", false, false, 9.10938261616162e-31],\r\n                [\"a.u. of time\", \"?/Eh\", null, \"time\", false, false, 2.41888432650516e-17],\r\n                [\"admiralty knot\", \"admkn\", null, \"speed\", false, true, 0.514773333],\r\n                [\"ampere\", \"A\", null, \"electric_current\", true, false, 1],\r\n                [\"ampere per meter\", \"A/m\", null, \"magnetic_field_intensity\", true, false, 1],\r\n                [\"ångström\", \"Å\", [\"ang\"], \"length\", false, true, 1e-10],\r\n                [\"are\", \"ar\", null, \"area\", false, true, 100],\r\n                [\"astronomical unit\", \"ua\", null, \"length\", false, false, 1.49597870691667e-11],\r\n                [\"bar\", \"bar\", null, \"pressure\", false, false, 100000],\r\n                [\"barn\", \"b\", null, \"area\", false, false, 1e-28],\r\n                [\"becquerel\", \"Bq\", null, \"radioactivity\", true, false, 1],\r\n                [\"bit\", \"bit\", [\"b\"], \"information\", false, true, 1],\r\n                [\"btu\", \"BTU\", [\"btu\"], \"energy\", false, true, 1055.05585262],\r\n                [\"byte\", \"byte\", null, \"information\", false, true, 8],\r\n                [\"candela\", \"cd\", null, \"luminous_intensity\", true, false, 1],\r\n                [\"candela per square metre\", \"cd/m?\", null, \"luminance\", true, false, 1],\r\n                [\"coulomb\", \"C\", null, \"electric_charge\", true, false, 1],\r\n                [\"cubic ångström\", \"ang3\", [\"ang^3\"], \"volume\", false, true, 1e-30],\r\n                [\"cubic foot\", \"ft3\", [\"ft^3\"], \"volume\", false, true, 0.028316846592],\r\n                [\"cubic inch\", \"in3\", [\"in^3\"], \"volume\", false, true, 0.000016387064],\r\n                [\"cubic light-year\", \"ly3\", [\"ly^3\"], \"volume\", false, true, 8.46786664623715e-47],\r\n                [\"cubic metre\", \"m?\", null, \"volume\", true, true, 1],\r\n                [\"cubic mile\", \"mi3\", [\"mi^3\"], \"volume\", false, true, 4168181825.44058],\r\n                [\"cubic nautical mile\", \"Nmi3\", [\"Nmi^3\"], \"volume\", false, true, 6352182208],\r\n                [\"cubic Pica\", \"Pica3\", [\"Picapt3\", \"Pica^3\", \"Picapt^3\"], \"volume\", false, true, 7.58660370370369e-8],\r\n                [\"cubic yard\", \"yd3\", [\"yd^3\"], \"volume\", false, true, 0.764554857984],\r\n                [\"cup\", \"cup\", null, \"volume\", false, true, 0.0002365882365],\r\n                [\"dalton\", \"Da\", [\"u\"], \"mass\", false, false, 1.66053886282828e-27],\r\n                [\"day\", \"d\", [\"day\"], \"time\", false, true, 86400],\r\n                [\"degree\", \"°\", null, \"angle\", false, false, 0.0174532925199433],\r\n                [\"degrees Rankine\", \"Rank\", null, \"temperature\", false, true, 0.555555555555556],\r\n                [\"dyne\", \"dyn\", [\"dy\"], \"force\", false, true, 0.00001],\r\n                [\"electronvolt\", \"eV\", [\"ev\"], \"energy\", false, true, 1.60217656514141],\r\n                [\"ell\", \"ell\", null, \"length\", false, true, 1.143],\r\n                [\"erg\", \"erg\", [\"e\"], \"energy\", false, true, 1e-7],\r\n                [\"farad\", \"F\", null, \"electric_capacitance\", true, false, 1],\r\n                [\"fluid ounce\", \"oz\", null, \"volume\", false, true, 0.0000295735295625],\r\n                [\"foot\", \"ft\", null, \"length\", false, true, 0.3048],\r\n                [\"foot-pound\", \"flb\", null, \"energy\", false, true, 1.3558179483314],\r\n                [\"gal\", \"Gal\", null, \"acceleration\", false, false, 0.01],\r\n                [\"gallon\", \"gal\", null, \"volume\", false, true, 0.003785411784],\r\n                [\"gauss\", \"G\", [\"ga\"], \"magnetic_flux_density\", false, true, 1],\r\n                [\"grain\", \"grain\", null, \"mass\", false, true, 0.0000647989],\r\n                [\"gram\", \"g\", null, \"mass\", false, true, 0.001],\r\n                [\"gray\", \"Gy\", null, \"absorbed_dose\", true, false, 1],\r\n                [\"gross registered ton\", \"GRT\", [\"regton\"], \"volume\", false, true, 2.8316846592],\r\n                [\"hectare\", \"ha\", null, \"area\", false, true, 10000],\r\n                [\"henry\", \"H\", null, \"inductance\", true, false, 1],\r\n                [\"hertz\", \"Hz\", null, \"frequency\", true, false, 1],\r\n                [\"horsepower\", \"HP\", [\"h\"], \"power\", false, true, 745.69987158227],\r\n                [\"horsepower-hour\", \"HPh\", [\"hh\", \"hph\"], \"energy\", false, true, 2684519.538],\r\n                [\"hour\", \"h\", [\"hr\"], \"time\", false, true, 3600],\r\n                [\"imperial gallon (U.K.)\", \"uk_gal\", null, \"volume\", false, true, 0.00454609],\r\n                [\"imperial hundredweight\", \"lcwt\", [\"uk_cwt\", \"hweight\"], \"mass\", false, true, 50.802345],\r\n                [\"imperial quart (U.K)\", \"uk_qt\", null, \"volume\", false, true, 0.0011365225],\r\n                [\"imperial ton\", \"brton\", [\"uk_ton\", \"LTON\"], \"mass\", false, true, 1016.046909],\r\n                [\"inch\", \"in\", null, \"length\", false, true, 0.0254],\r\n                [\"international acre\", \"uk_acre\", null, \"area\", false, true, 4046.8564224],\r\n                [\"IT calorie\", \"cal\", null, \"energy\", false, true, 4.1868],\r\n                [\"joule\", \"J\", null, \"energy\", true, true, 1],\r\n                [\"katal\", \"kat\", null, \"catalytic_activity\", true, false, 1],\r\n                [\"kelvin\", \"K\", [\"kel\"], \"temperature\", true, true, 1],\r\n                [\"kilogram\", \"kg\", null, \"mass\", true, true, 1],\r\n                [\"knot\", \"kn\", null, \"speed\", false, true, 0.514444444444444],\r\n                [\"light-year\", \"ly\", null, \"length\", false, true, 9460730472580800],\r\n                [\"litre\", \"L\", [\"l\", \"lt\"], \"volume\", false, true, 0.001],\r\n                [\"lumen\", \"lm\", null, \"luminous_flux\", true, false, 1],\r\n                [\"lux\", \"lx\", null, \"illuminance\", true, false, 1],\r\n                [\"maxwell\", \"Mx\", null, \"magnetic_flux\", false, false, 1e-18],\r\n                [\"measurement ton\", \"MTON\", null, \"volume\", false, true, 1.13267386368],\r\n                [\"meter per hour\", \"m/h\", [\"m/hr\"], \"speed\", false, true, 0.00027777777777778],\r\n                [\"meter per second\", \"m/s\", [\"m/sec\"], \"speed\", true, true, 1],\r\n                [\"meter per second squared\", \"m?s??\", null, \"acceleration\", true, false, 1],\r\n                [\"parsec\", \"pc\", [\"parsec\"], \"length\", false, true, 30856775814671900],\r\n                [\"meter squared per second\", \"m?/s\", null, \"kinematic_viscosity\", true, false, 1],\r\n                [\"metre\", \"m\", null, \"length\", true, true, 1],\r\n                [\"miles per hour\", \"mph\", null, \"speed\", false, true, 0.44704],\r\n                [\"millimetre of mercury\", \"mmHg\", null, \"pressure\", false, false, 133.322],\r\n                [\"minute\", \"?\", null, \"angle\", false, false, 0.000290888208665722],\r\n                [\"minute\", \"min\", [\"mn\"], \"time\", false, true, 60],\r\n                [\"modern teaspoon\", \"tspm\", null, \"volume\", false, true, 0.000005],\r\n                [\"mole\", \"mol\", null, \"amount_of_substance\", true, false, 1],\r\n                [\"morgen\", \"Morgen\", null, \"area\", false, true, 2500],\r\n                [\"n.u. of action\", \"?\", null, \"action\", false, false, 1.05457168181818e-34],\r\n                [\"n.u. of mass\", \"m?\", null, \"mass\", false, false, 9.10938261616162e-31],\r\n                [\"n.u. of speed\", \"c?\", null, \"speed\", false, false, 299792458],\r\n                [\"n.u. of time\", \"?/(me?c??)\", null, \"time\", false, false, 1.28808866778687e-21],\r\n                [\"nautical mile\", \"M\", [\"Nmi\"], \"length\", false, true, 1852],\r\n                [\"newton\", \"N\", null, \"force\", true, true, 1],\r\n                [\"œrsted\", \"Oe \", null, \"magnetic_field_intensity\", false, false, 79.5774715459477],\r\n                [\"ohm\", \"Ω\", null, \"electric_resistance\", true, false, 1],\r\n                [\"ounce mass\", \"ozm\", null, \"mass\", false, true, 0.028349523125],\r\n                [\"pascal\", \"Pa\", null, \"pressure\", true, false, 1],\r\n                [\"pascal second\", \"Pa?s\", null, \"dynamic_viscosity\", true, false, 1],\r\n                [\"pferdestärke\", \"PS\", null, \"power\", false, true, 735.49875],\r\n                [\"phot\", \"ph\", null, \"illuminance\", false, false, 0.0001],\r\n                [\"pica (1/6 inch)\", \"pica\", null, \"length\", false, true, 0.00035277777777778],\r\n                [\"pica (1/72 inch)\", \"Pica\", [\"Picapt\"], \"length\", false, true, 0.00423333333333333],\r\n                [\"poise\", \"P\", null, \"dynamic_viscosity\", false, false, 0.1],\r\n                [\"pond\", \"pond\", null, \"force\", false, true, 0.00980665],\r\n                [\"pound force\", \"lbf\", null, \"force\", false, true, 4.4482216152605],\r\n                [\"pound mass\", \"lbm\", null, \"mass\", false, true, 0.45359237],\r\n                [\"quart\", \"qt\", null, \"volume\", false, true, 0.000946352946],\r\n                [\"radian\", \"rad\", null, \"angle\", true, false, 1],\r\n                [\"second\", \"?\", null, \"angle\", false, false, 0.00000484813681109536],\r\n                [\"second\", \"s\", [\"sec\"], \"time\", true, true, 1],\r\n                [\"short hundredweight\", \"cwt\", [\"shweight\"], \"mass\", false, true, 45.359237],\r\n                [\"siemens\", \"S\", null, \"electrical_conductance\", true, false, 1],\r\n                [\"sievert\", \"Sv\", null, \"equivalent_dose\", true, false, 1],\r\n                [\"slug\", \"sg\", null, \"mass\", false, true, 14.59390294],\r\n                [\"square ångström\", \"ang2\", [\"ang^2\"], \"area\", false, true, 1e-20],\r\n                [\"square foot\", \"ft2\", [\"ft^2\"], \"area\", false, true, 0.09290304],\r\n                [\"square inch\", \"in2\", [\"in^2\"], \"area\", false, true, 0.00064516],\r\n                [\"square light-year\", \"ly2\", [\"ly^2\"], \"area\", false, true, 8.95054210748189e+31],\r\n                [\"square meter\", \"m?\", null, \"area\", true, true, 1],\r\n                [\"square mile\", \"mi2\", [\"mi^2\"], \"area\", false, true, 2589988.110336],\r\n                [\"square nautical mile\", \"Nmi2\", [\"Nmi^2\"], \"area\", false, true, 3429904],\r\n                [\"square Pica\", \"Pica2\", [\"Picapt2\", \"Pica^2\", \"Picapt^2\"], \"area\", false, true, 0.00001792111111111],\r\n                [\"square yard\", \"yd2\", [\"yd^2\"], \"area\", false, true, 0.83612736],\r\n                [\"statute mile\", \"mi\", null, \"length\", false, true, 1609.344],\r\n                [\"steradian\", \"sr\", null, \"solid_angle\", true, false, 1],\r\n                [\"stilb\", \"sb\", null, \"luminance\", false, false, 0.0001],\r\n                [\"stokes\", \"St\", null, \"kinematic_viscosity\", false, false, 0.0001],\r\n                [\"stone\", \"stone\", null, \"mass\", false, true, 6.35029318],\r\n                [\"tablespoon\", \"tbs\", null, \"volume\", false, true, 0.0000147868],\r\n                [\"teaspoon\", \"tsp\", null, \"volume\", false, true, 0.00000492892],\r\n                [\"tesla\", \"T\", null, \"magnetic_flux_density\", true, true, 1],\r\n                [\"thermodynamic calorie\", \"c\", null, \"energy\", false, true, 4.184],\r\n                [\"ton\", \"ton\", null, \"mass\", false, true, 907.18474],\r\n                [\"tonne\", \"t\", null, \"mass\", false, false, 1000],\r\n                [\"U.K. pint\", \"uk_pt\", null, \"volume\", false, true, 0.00056826125],\r\n                [\"U.S. bushel\", \"bushel\", null, \"volume\", false, true, 0.03523907],\r\n                [\"U.S. oil barrel\", \"barrel\", null, \"volume\", false, true, 0.158987295],\r\n                [\"U.S. pint\", \"pt\", [\"us_pt\"], \"volume\", false, true, 0.000473176473],\r\n                [\"U.S. survey mile\", \"survey_mi\", null, \"length\", false, true, 1609.347219],\r\n                [\"U.S. survey/statute acre\", \"us_acre\", null, \"area\", false, true, 4046.87261],\r\n                [\"volt\", \"V\", null, \"voltage\", true, false, 1],\r\n                [\"watt\", \"W\", null, \"power\", true, true, 1],\r\n                [\"watt-hour\", \"Wh\", [\"wh\"], \"energy\", false, true, 3600],\r\n                [\"weber\", \"Wb\", null, \"magnetic_flux\", true, false, 1],\r\n                [\"yard\", \"yd\", null, \"length\", false, true, 0.9144],\r\n                [\"year\", \"yr\", null, \"time\", false, true, 31557600]\r\n            ];\r\n    \r\n            // Binary prefixes\r\n            // [Name, Prefix power of 2 value, Previx value, Abbreviation, Derived\r\n            // from]\r\n            var binary_prefixes = {\r\n                Yi: [\"yobi\", 80, 1208925819614629174706176, \"Yi\", \"yotta\"],\r\n                Zi: [\"zebi\", 70, 1180591620717411303424, \"Zi\", \"zetta\"],\r\n                Ei: [\"exbi\", 60, 1152921504606846976, \"Ei\", \"exa\"],\r\n                Pi: [\"pebi\", 50, 1125899906842624, \"Pi\", \"peta\"],\r\n                Ti: [\"tebi\", 40, 1099511627776, \"Ti\", \"tera\"],\r\n                Gi: [\"gibi\", 30, 1073741824, \"Gi\", \"giga\"],\r\n                Mi: [\"mebi\", 20, 1048576, \"Mi\", \"mega\"],\r\n                ki: [\"kibi\", 10, 1024, \"ki\", \"kilo\"]\r\n            };\r\n    \r\n            // Unit prefixes\r\n            // [Name, Multiplier, Abbreviation]\r\n            var unit_prefixes = {\r\n                Y: [\"yotta\", 1e+24, \"Y\"],\r\n                Z: [\"zetta\", 1e+21, \"Z\"],\r\n                E: [\"exa\", 1e+18, \"E\"],\r\n                P: [\"peta\", 1e+15, \"P\"],\r\n                T: [\"tera\", 1e+12, \"T\"],\r\n                G: [\"giga\", 1e+09, \"G\"],\r\n                M: [\"mega\", 1e+06, \"M\"],\r\n                k: [\"kilo\", 1e+03, \"k\"],\r\n                h: [\"hecto\", 1e+02, \"h\"],\r\n                e: [\"dekao\", 1e+01, \"e\"],\r\n                d: [\"deci\", 1e-01, \"d\"],\r\n                c: [\"centi\", 1e-02, \"c\"],\r\n                m: [\"milli\", 1e-03, \"m\"],\r\n                u: [\"micro\", 1e-06, \"u\"],\r\n                n: [\"nano\", 1e-09, \"n\"],\r\n                p: [\"pico\", 1e-12, \"p\"],\r\n                f: [\"femto\", 1e-15, \"f\"],\r\n                a: [\"atto\", 1e-18, \"a\"],\r\n                z: [\"zepto\", 1e-21, \"z\"],\r\n                y: [\"yocto\", 1e-24, \"y\"]\r\n            };\r\n    \r\n            // Initialize units and multipliers\r\n            var from = null;\r\n            var to = null;\r\n            var base_from_unit = from_unit;\r\n            var base_to_unit = to_unit;\r\n            var from_multiplier = 1;\r\n            var to_multiplier = 1;\r\n            var alt;\r\n    \r\n            // Lookup from and to units\r\n            for (var i = 0; i < units.length; i++) {\r\n                alt = (units[i][2] === null) ? [] : units[i][2];\r\n                if (units[i][1] === base_from_unit || alt.indexOf(base_from_unit) >= 0) {\r\n                  from = units[i];\r\n                }\r\n                if (units[i][1] === base_to_unit || alt.indexOf(base_to_unit) >= 0) {\r\n                  to = units[i];\r\n                }\r\n            }\r\n    \r\n            // Lookup from prefix\r\n            if (from === null) {\r\n                var from_binary_prefix = binary_prefixes[from_unit.substring(0, 2)];\r\n                var from_unit_prefix = unit_prefixes[from_unit.substring(0, 1)];\r\n    \r\n                // Handle dekao unit prefix (only unit prefix with two characters)\r\n                if (from_unit.substring(0, 2) === 'da') {\r\n                  from_unit_prefix = [\"dekao\", 1e+01, \"da\"];\r\n                }\r\n    \r\n                // Handle binary prefixes first (so that 'Yi' is processed before\r\n                // 'Y')\r\n                if (from_binary_prefix) {\r\n                  from_multiplier = from_binary_prefix[2];\r\n                  base_from_unit = from_unit.substring(2);\r\n                } else if (from_unit_prefix) {\r\n                  from_multiplier = from_unit_prefix[1];\r\n                  base_from_unit = from_unit.substring(from_unit_prefix[2].length);\r\n                }\r\n    \r\n                // Lookup from unit\r\n                for (var j = 0; j < units.length; j++) {\r\n                  alt = (units[j][2] === null) ? [] : units[j][2];\r\n                  if (units[j][1] === base_from_unit || alt.indexOf(base_from_unit) >= 0) {\r\n                      from = units[j];\r\n                  }\r\n                }\r\n            }\r\n    \r\n            // Lookup to prefix\r\n            if (to === null) {\r\n                var to_binary_prefix = binary_prefixes[to_unit.substring(0, 2)];\r\n                var to_unit_prefix = unit_prefixes[to_unit.substring(0, 1)];\r\n    \r\n                // Handle dekao unit prefix (only unit prefix with two characters)\r\n                if (to_unit.substring(0, 2) === 'da') {\r\n                  to_unit_prefix = [\"dekao\", 1e+01, \"da\"];\r\n                }\r\n    \r\n                // Handle binary prefixes first (so that 'Yi' is processed before\r\n                // 'Y')\r\n                if (to_binary_prefix) {\r\n                  to_multiplier = to_binary_prefix[2];\r\n                  base_to_unit = to_unit.substring(2);\r\n                } else if (to_unit_prefix) {\r\n                  to_multiplier = to_unit_prefix[1];\r\n                  base_to_unit = to_unit.substring(to_unit_prefix[2].length);\r\n                }\r\n    \r\n                // Lookup to unit\r\n                for (var k = 0; k < units.length; k++) {\r\n                  alt = (units[k][2] === null) ? [] : units[k][2];\r\n                  if (units[k][1] === base_to_unit || alt.indexOf(base_to_unit) >= 0) {\r\n                      to = units[k];\r\n                  }\r\n                }\r\n            }\r\n    \r\n            // Return error if a unit does not exist\r\n            if (from === null || to === null) {\r\n                return error.na;\r\n            }\r\n    \r\n            // Return error if units represent different quantities\r\n            if (from[3] !== to[3]) {\r\n                return error.na;\r\n            }\r\n    \r\n            // Return converted number\r\n            return number * from[6] * from_multiplier / (to[6] * to_multiplier);\r\n        };\r\n    \r\n        exports.DEC2BIN = function(number, places) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n    \r\n            // Return error if number is not decimal, is lower than -512, or is\r\n            // greater than 511\r\n            if (!/^-?[0-9]{1,3}$/.test(number) || number < -512 || number > 511) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Ignore places and return a 10-character binary number if number is\r\n            // negative\r\n            if (number < 0) {\r\n                return '1' + REPT('0', 9 - (512 + number).toString(2).length) + (512 + number).toString(2);\r\n            }\r\n    \r\n            // Convert decimal number to binary\r\n            var result = parseInt(number, 10).toString(2);\r\n    \r\n            // Return binary number using the minimum number of characters necessary\r\n            // if places is undefined\r\n            if (typeof places === 'undefined') {\r\n                return result;\r\n            } else {\r\n                // Return error if places is nonnumeric\r\n                if (isNaN(places)) {\r\n                  return error.value;\r\n                }\r\n    \r\n                // Return error if places is negative\r\n                if (places < 0) {\r\n                  return error.num;\r\n                }\r\n    \r\n                // Truncate places in case it is not an integer\r\n                places = Math.floor(places);\r\n    \r\n                // Pad return value with leading 0s (zeros) if necessary (using\r\n                // Underscore.string)\r\n                return (places >= result.length) ? REPT('0', places - result.length) + result : error.num;\r\n            }\r\n        };\r\n    \r\n        exports.DEC2HEX = function(number, places) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n    \r\n            // Return error if number is not decimal, is lower than -549755813888,\r\n            // or is greater than 549755813887\r\n            if (!/^-?[0-9]{1,12}$/.test(number) || number < -549755813888 || number > 549755813887) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Ignore places and return a 10-character hexadecimal number if number\r\n            // is negative\r\n            if (number < 0) {\r\n                return (1099511627776 + number).toString(16);\r\n            }\r\n    \r\n            // Convert decimal number to hexadecimal\r\n            var result = parseInt(number, 10).toString(16);\r\n    \r\n            // Return hexadecimal number using the minimum number of characters\r\n            // necessary if places is undefined\r\n            if (typeof places === 'undefined') {\r\n                return result;\r\n            } else {\r\n                // Return error if places is nonnumeric\r\n                if (isNaN(places)) {\r\n                  return error.value;\r\n                }\r\n    \r\n                // Return error if places is negative\r\n                if (places < 0) {\r\n                  return error.num;\r\n                }\r\n    \r\n                // Truncate places in case it is not an integer\r\n                places = Math.floor(places);\r\n    \r\n                // Pad return value with leading 0s (zeros) if necessary (using\r\n                // Underscore.string)\r\n                return (places >= result.length) ? REPT('0', places - result.length) + result : error.num;\r\n            }\r\n        };\r\n    \r\n        exports.DEC2OCT = function(number, places) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n    \r\n            // Return error if number is not decimal, is lower than -549755813888,\r\n            // or is greater than 549755813887\r\n            if (!/^-?[0-9]{1,9}$/.test(number) || number < -536870912 || number > 536870911) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Ignore places and return a 10-character octal number if number is\r\n            // negative\r\n            if (number < 0) {\r\n                return (1073741824 + number).toString(8);\r\n            }\r\n    \r\n            // Convert decimal number to octal\r\n            var result = parseInt(number, 10).toString(8);\r\n    \r\n            // Return octal number using the minimum number of characters necessary\r\n            // if places is undefined\r\n            if (typeof places === 'undefined') {\r\n                return result;\r\n            } else {\r\n                // Return error if places is nonnumeric\r\n                if (isNaN(places)) {\r\n                  return error.value;\r\n                }\r\n    \r\n                // Return error if places is negative\r\n                if (places < 0) {\r\n                  return error.num;\r\n                }\r\n    \r\n                // Truncate places in case it is not an integer\r\n                places = Math.floor(places);\r\n    \r\n                // Pad return value with leading 0s (zeros) if necessary (using\r\n                // Underscore.string)\r\n                return (places >= result.length) ? REPT('0', places - result.length) + result : error.num;\r\n            }\r\n        };\r\n    \r\n        exports.DELTA = function(number1, number2) {\r\n            // Set number2 to zero if undefined\r\n            number2 = (number2 === undefined) ? 0 : number2;\r\n            number1 = utils.parseNumber(number1);\r\n            number2 = utils.parseNumber(number2);\r\n            if (utils.anyIsError(number1, number2)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return delta\r\n            return (number1 === number2) ? 1 : 0;\r\n        };\r\n    \r\n        exports.ERF = function(lower_bound, upper_bound) {\r\n        };\r\n    \r\n        exports.ERF.PRECISE = function() {\r\n        };\r\n    \r\n        exports.ERFC = function(x) {\r\n        };\r\n    \r\n        exports.ERFC.PRECISE = function() {\r\n        };\r\n    \r\n        exports.GESTEP = function(number, step) {\r\n            step = step || 0;\r\n            number = utils.parseNumber(number);\r\n            if (utils.anyIsError(step, number)) {\r\n                return number;\r\n            }\r\n    \r\n            // Return delta\r\n            return (number >= step) ? 1 : 0;\r\n        };\r\n    \r\n        exports.HEX2BIN = function(number, places) {\r\n            // Return error if number is not hexadecimal or contains more than ten\r\n            // characters (10 digits)\r\n            if (!/^[0-9A-Fa-f]{1,10}$/.test(number)) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Check if number is negative\r\n            var negative = (number.length === 10 && number.substring(0, 1).toLowerCase() === 'f') ? true : false;\r\n    \r\n            // Convert hexadecimal number to decimal\r\n            var decimal = (negative) ? parseInt(number, 16) - 1099511627776 : parseInt(number, 16);\r\n    \r\n            // Return error if number is lower than -512 or greater than 511\r\n            if (decimal < -512 || decimal > 511) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Ignore places and return a 10-character binary number if number is\r\n            // negative\r\n            if (negative) {\r\n                return '1' + REPT('0', 9 - (512 + decimal).toString(2).length) + (512 + decimal).toString(2);\r\n            }\r\n    \r\n            // Convert decimal number to binary\r\n            var result = decimal.toString(2);\r\n    \r\n            // Return binary number using the minimum number of characters necessary\r\n            // if places is undefined\r\n            if (places === undefined) {\r\n                return result;\r\n            } else {\r\n                // Return error if places is nonnumeric\r\n                if (isNaN(places)) {\r\n                  return error.value;\r\n                }\r\n    \r\n                // Return error if places is negative\r\n                if (places < 0) {\r\n                  return error.num;\r\n                }\r\n    \r\n                // Truncate places in case it is not an integer\r\n                places = Math.floor(places);\r\n    \r\n                // Pad return value with leading 0s (zeros) if necessary (using\r\n                // Underscore.string)\r\n                return (places >= result.length) ? REPT('0', places - result.length) + result : error.num;\r\n            }\r\n        };\r\n    \r\n        exports.HEX2DEC = function(number) {\r\n            // Return error if number is not hexadecimal or contains more than ten\r\n            // characters (10 digits)\r\n            if (!/^[0-9A-Fa-f]{1,10}$/.test(number)) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Convert hexadecimal number to decimal\r\n            var decimal = parseInt(number, 16);\r\n    \r\n            // Return decimal number\r\n            return (decimal >= 549755813888) ? decimal - 1099511627776 : decimal;\r\n        };\r\n    \r\n        exports.HEX2OCT = function(number, places) {\r\n            // Return error if number is not hexadecimal or contains more than ten\r\n            // characters (10 digits)\r\n            if (!/^[0-9A-Fa-f]{1,10}$/.test(number)) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Convert hexadecimal number to decimal\r\n            var decimal = parseInt(number, 16);\r\n    \r\n            // Return error if number is positive and greater than 0x1fffffff\r\n            // (536870911)\r\n            if (decimal > 536870911 && decimal < 1098974756864) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Ignore places and return a 10-character octal number if number is\r\n            // negative\r\n            if (decimal >= 1098974756864) {\r\n                return (decimal - 1098437885952).toString(8);\r\n            }\r\n    \r\n            // Convert decimal number to octal\r\n            var result = decimal.toString(8);\r\n    \r\n            // Return octal number using the minimum number of characters necessary\r\n            // if places is undefined\r\n            if (places === undefined) {\r\n                return result;\r\n            } else {\r\n                // Return error if places is nonnumeric\r\n                if (isNaN(places)) {\r\n                  return error.value;\r\n                }\r\n    \r\n                // Return error if places is negative\r\n                if (places < 0) {\r\n                  return error.num;\r\n                }\r\n    \r\n                // Truncate places in case it is not an integer\r\n                places = Math.floor(places);\r\n    \r\n                // Pad return value with leading 0s (zeros) if necessary (using\r\n                // Underscore.string)\r\n                return (places >= result.length) ? REPT('0', places - result.length) + result : error.num;\r\n            }\r\n        };\r\n    \r\n        exports.IMABS = function(inumber) {\r\n            // Lookup real and imaginary coefficients using exports.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            // Return error if either coefficient is not a number\r\n            if (utils.anyIsError(x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return absolute value of complex number\r\n            return Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\r\n        };\r\n    \r\n        exports.IMAGINARY = function(inumber) {\r\n            if (inumber === undefined || inumber === true || inumber === false) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return 0 if inumber is equal to 0\r\n            if (inumber === 0 || inumber === '0') {\r\n                return 0;\r\n            }\r\n    \r\n            // Handle special cases\r\n            if (['i', 'j'].indexOf(inumber) >= 0) {\r\n                return 1;\r\n            }\r\n    \r\n            // Normalize imaginary coefficient\r\n            inumber = inumber.replace('+i', '+1i').replace('-i', '-1i').replace('+j', '+1j').replace('-j', '-1j');\r\n    \r\n            // Lookup sign\r\n            var plus = inumber.indexOf('+');\r\n            var minus = inumber.indexOf('-');\r\n            if (plus === 0) {\r\n                plus = inumber.indexOf('+', 1);\r\n            }\r\n    \r\n            if (minus === 0) {\r\n                minus = inumber.indexOf('-', 1);\r\n            }\r\n    \r\n            // Lookup imaginary unit\r\n            var last = inumber.substring(inumber.length - 1, inumber.length);\r\n            var unit = (last === 'i' || last === 'j');\r\n    \r\n            if (plus >= 0 || minus >= 0) {\r\n                // Return error if imaginary unit is neither i nor j\r\n                if (!unit) {\r\n                  return error.num;\r\n                }\r\n    \r\n                // Return imaginary coefficient of complex number\r\n                if (plus >= 0) {\r\n                  return (isNaN(inumber.substring(0, plus)) || isNaN(inumber.substring(plus + 1, inumber.length - 1))) ?\r\n                      error.num :\r\n                      Number(inumber.substring(plus + 1, inumber.length - 1));\r\n                } else {\r\n                  return (isNaN(inumber.substring(0, minus)) || isNaN(inumber.substring(minus + 1, inumber.length - 1))) ?\r\n                      error.num :\r\n                      -Number(inumber.substring(minus + 1, inumber.length - 1));\r\n                }\r\n            } else {\r\n                if (unit) {\r\n                  return (isNaN(inumber.substring(0, inumber.length - 1))) ? error.num : inumber.substring(0, inumber.length - 1);\r\n                } else {\r\n                  return (isNaN(inumber)) ? error.num : 0;\r\n                }\r\n            }\r\n        };\r\n    \r\n        exports.IMARGUMENT = function(inumber) {\r\n            // Lookup real and imaginary coefficients using exports.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            // Return error if either coefficient is not a number\r\n            if (utils.anyIsError(x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if inumber is equal to zero\r\n            if (x === 0 && y === 0) {\r\n                return error.div0;\r\n            }\r\n    \r\n            // Return PI/2 if x is equal to zero and y is positive\r\n            if (x === 0 && y > 0) {\r\n                return Math.PI / 2;\r\n            }\r\n    \r\n            // Return -PI/2 if x is equal to zero and y is negative\r\n            if (x === 0 && y < 0) {\r\n                return -Math.PI / 2;\r\n            }\r\n    \r\n            // Return zero if x is negative and y is equal to zero\r\n            if (y === 0 && x > 0) {\r\n                return 0;\r\n            }\r\n    \r\n            // Return zero if x is negative and y is equal to zero\r\n            if (y === 0 && x < 0) {\r\n                return -Math.PI;\r\n            }\r\n    \r\n            // Return argument of complex number\r\n            if (x > 0) {\r\n                return Math.atan(y / x);\r\n            } else if (x < 0 && y >= 0) {\r\n                return Math.atan(y / x) + Math.PI;\r\n            } else {\r\n                return Math.atan(y / x) - Math.PI;\r\n            }\r\n        };\r\n    \r\n        exports.IMCONJUGATE = function(inumber) {\r\n            // Lookup real and imaginary coefficients using exports.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            if (utils.anyIsError(x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup imaginary unit\r\n            var unit = inumber.substring(inumber.length - 1);\r\n            unit = (unit === 'i' || unit === 'j') ? unit : 'i';\r\n    \r\n            // Return conjugate of complex number\r\n            return (y !== 0) ? exports.COMPLEX(x, -y, unit) : inumber;\r\n        };\r\n    \r\n        exports.IMCOS = function(inumber) {\r\n            // Lookup real and imaginary coefficients using exports.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            if (utils.anyIsError(x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup imaginary unit\r\n            var unit = inumber.substring(inumber.length - 1);\r\n            unit = (unit === 'i' || unit === 'j') ? unit : 'i';\r\n    \r\n            // Return cosine of complex number\r\n            return exports.COMPLEX(Math.cos(x) * (Math.exp(y) + Math.exp(-y)) / 2, -Math.sin(x) * (Math.exp(y) - Math.exp(-y)) / 2, unit);\r\n        };\r\n    \r\n        exports.IMCOSH = function(inumber) {\r\n            // Lookup real and imaginary coefficients using exports.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            if (utils.anyIsError(x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup imaginary unit\r\n            var unit = inumber.substring(inumber.length - 1);\r\n            unit = (unit === 'i' || unit === 'j') ? unit : 'i';\r\n    \r\n            // Return hyperbolic cosine of complex number\r\n            return exports.COMPLEX(Math.cos(y) * (Math.exp(x) + Math.exp(-x)) / 2, Math.sin(y) * (Math.exp(x) - Math.exp(-x)) / 2, unit);\r\n        };\r\n    \r\n        exports.IMCOT = function(inumber) {\r\n            // Lookup real and imaginary coefficients using Formula.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            if (utils.anyIsError(x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return cotangent of complex number\r\n            return exports.IMDIV(exports.IMCOS(inumber), exports.IMSIN(inumber));\r\n        };\r\n    \r\n        exports.IMDIV = function(inumber1, inumber2) {\r\n            // Lookup real and imaginary coefficients using Formula.js\r\n            // [http://formulajs.org]\r\n            var a = exports.IMREAL(inumber1);\r\n            var b = exports.IMAGINARY(inumber1);\r\n            var c = exports.IMREAL(inumber2);\r\n            var d = exports.IMAGINARY(inumber2);\r\n    \r\n            if (utils.anyIsError(a, b, c, d)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup imaginary unit\r\n            var unit1 = inumber1.substring(inumber1.length - 1);\r\n            var unit2 = inumber2.substring(inumber2.length - 1);\r\n            var unit = 'i';\r\n            if (unit1 === 'j') {\r\n                unit = 'j';\r\n            } else if (unit2 === 'j') {\r\n                unit = 'j';\r\n            }\r\n    \r\n            // Return error if inumber2 is null\r\n            if (c === 0 && d === 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return exponential of complex number\r\n            var den = c * c + d * d;\r\n            return exports.COMPLEX((a * c + b * d) / den, (b * c - a * d) / den, unit);\r\n        };\r\n    \r\n        exports.IMEXP = function(inumber) {\r\n            // Lookup real and imaginary coefficients using Formula.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            if (utils.anyIsError(x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup imaginary unit\r\n            var unit = inumber.substring(inumber.length - 1);\r\n            unit = (unit === 'i' || unit === 'j') ? unit : 'i';\r\n    \r\n            // Return exponential of complex number\r\n            var e = Math.exp(x);\r\n            return exports.COMPLEX(e * Math.cos(y), e * Math.sin(y), unit);\r\n        };\r\n    \r\n        exports.IMLN = function(inumber) {\r\n            // Lookup real and imaginary coefficients using Formula.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            if (utils.anyIsError(x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup imaginary unit\r\n            var unit = inumber.substring(inumber.length - 1);\r\n            unit = (unit === 'i' || unit === 'j') ? unit : 'i';\r\n    \r\n            // Return exponential of complex number\r\n            return exports.COMPLEX(Math.log(Math.sqrt(x * x + y * y)), Math.atan(y / x), unit);\r\n        };\r\n    \r\n        exports.IMLOG10 = function(inumber) {\r\n            // Lookup real and imaginary coefficients using Formula.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            if (utils.anyIsError(x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup imaginary unit\r\n            var unit = inumber.substring(inumber.length - 1);\r\n            unit = (unit === 'i' || unit === 'j') ? unit : 'i';\r\n    \r\n            // Return exponential of complex number\r\n            return exports.COMPLEX(Math.log(Math.sqrt(x * x + y * y)) / Math.log(10), Math.atan(y / x) / Math.log(10), unit);\r\n        };\r\n    \r\n        exports.IMLOG2 = function(inumber) {\r\n            // Lookup real and imaginary coefficients using Formula.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            if (utils.anyIsError(x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup imaginary unit\r\n            var unit = inumber.substring(inumber.length - 1);\r\n            unit = (unit === 'i' || unit === 'j') ? unit : 'i';\r\n    \r\n            // Return exponential of complex number\r\n            return exports.COMPLEX(Math.log(Math.sqrt(x * x + y * y)) / Math.log(2), Math.atan(y / x) / Math.log(2), unit);\r\n        };\r\n    \r\n        exports.IMPOWER = function(inumber, number) {\r\n            number = utils.parseNumber(number);\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n            if (utils.anyIsError(number, x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup imaginary unit\r\n            var unit = inumber.substring(inumber.length - 1);\r\n            unit = (unit === 'i' || unit === 'j') ? unit : 'i';\r\n    \r\n            // Calculate power of modulus\r\n            var p = Math.pow(exports.IMABS(inumber), number);\r\n    \r\n            // Calculate argument\r\n            var t = exports.IMARGUMENT(inumber);\r\n    \r\n            // Return exponential of complex number\r\n            return exports.COMPLEX(p * Math.cos(number * t), p * Math.sin(number * t), unit);\r\n        };\r\n    \r\n        exports.IMPRODUCT = function() {\r\n            // Initialize result\r\n            var result = arguments[0];\r\n    \r\n            // Loop on all numbers\r\n            for (var i = 1; i < arguments.length; i++) {\r\n                // Lookup coefficients of two complex numbers\r\n                var a = exports.IMREAL(result);\r\n                var b = exports.IMAGINARY(result);\r\n                var c = exports.IMREAL(arguments[i]);\r\n                var d = exports.IMAGINARY(arguments[i]);\r\n    \r\n                if (utils.anyIsError(a, b, c, d)) {\r\n                  return error.value;\r\n                }\r\n    \r\n                // Complute product of two complex numbers\r\n                result = exports.COMPLEX(a * c - b * d, a * d + b * c);\r\n            }\r\n    \r\n            // Return product of complex numbers\r\n            return result;\r\n        };\r\n    \r\n        exports.IMREAL = function(inumber) {\r\n            if (inumber === undefined || inumber === true || inumber === false) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return 0 if inumber is equal to 0\r\n            if (inumber === 0 || inumber === '0') {\r\n                return 0;\r\n            }\r\n    \r\n            // Handle special cases\r\n            if (['i', '+i', '1i', '+1i', '-i', '-1i', 'j', '+j', '1j', '+1j', '-j', '-1j'].indexOf(inumber) >= 0) {\r\n                return 0;\r\n            }\r\n    \r\n            // Lookup sign\r\n            var plus = inumber.indexOf('+');\r\n            var minus = inumber.indexOf('-');\r\n            if (plus === 0) {\r\n                plus = inumber.indexOf('+', 1);\r\n            }\r\n            if (minus === 0) {\r\n                minus = inumber.indexOf('-', 1);\r\n            }\r\n    \r\n            // Lookup imaginary unit\r\n            var last = inumber.substring(inumber.length - 1, inumber.length);\r\n            var unit = (last === 'i' || last === 'j');\r\n    \r\n            if (plus >= 0 || minus >= 0) {\r\n                // Return error if imaginary unit is neither i nor j\r\n                if (!unit) {\r\n                  return error.num;\r\n                }\r\n    \r\n                // Return real coefficient of complex number\r\n                if (plus >= 0) {\r\n                  return (isNaN(inumber.substring(0, plus)) || isNaN(inumber.substring(plus + 1, inumber.length - 1))) ?\r\n                      error.num :\r\n                      Number(inumber.substring(0, plus));\r\n                } else {\r\n                  return (isNaN(inumber.substring(0, minus)) || isNaN(inumber.substring(minus + 1, inumber.length - 1))) ?\r\n                      error.num :\r\n                      Number(inumber.substring(0, minus));\r\n                }\r\n            } else {\r\n                if (unit) {\r\n                  return (isNaN(inumber.substring(0, inumber.length - 1))) ? error.num : 0;\r\n                } else {\r\n                  return (isNaN(inumber)) ? error.num : inumber;\r\n                }\r\n            }\r\n        };\r\n    \r\n        exports.IMSEC = function(inumber) {\r\n            // Return error if inumber is a logical value\r\n            if (inumber === true || inumber === false) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup real and imaginary coefficients using Formula.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            if (utils.anyIsError(x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return secant of complex number\r\n            return exports.IMDIV('1', exports.IMCOS(inumber));\r\n        };\r\n    \r\n        exports.IMSECH = function(inumber) {\r\n            // Lookup real and imaginary coefficients using Formula.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            if (utils.anyIsError(x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return hyperbolic secant of complex number\r\n            return exports.IMDIV('1', exports.IMCOSH(inumber));\r\n        };\r\n    \r\n        exports.IMSIN = function(inumber) {\r\n            // Lookup real and imaginary coefficients using Formula.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            if (utils.anyIsError(x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup imaginary unit\r\n            var unit = inumber.substring(inumber.length - 1);\r\n            unit = (unit === 'i' || unit === 'j') ? unit : 'i';\r\n    \r\n            // Return sine of complex number\r\n            return exports.COMPLEX(Math.sin(x) * (Math.exp(y) + Math.exp(-y)) / 2, Math.cos(x) * (Math.exp(y) - Math.exp(-y)) / 2, unit);\r\n        };\r\n    \r\n        exports.IMSINH = function(inumber) {\r\n            // Lookup real and imaginary coefficients using Formula.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            if (utils.anyIsError(x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup imaginary unit\r\n            var unit = inumber.substring(inumber.length - 1);\r\n            unit = (unit === 'i' || unit === 'j') ? unit : 'i';\r\n    \r\n            // Return hyperbolic sine of complex number\r\n            return exports.COMPLEX(Math.cos(y) * (Math.exp(x) - Math.exp(-x)) / 2, Math.sin(y) * (Math.exp(x) + Math.exp(-x)) / 2, unit);\r\n        };\r\n    \r\n        exports.IMSQRT = function(inumber) {\r\n            // Lookup real and imaginary coefficients using Formula.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            if (utils.anyIsError(x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup imaginary unit\r\n            var unit = inumber.substring(inumber.length - 1);\r\n            unit = (unit === 'i' || unit === 'j') ? unit : 'i';\r\n    \r\n            // Calculate power of modulus\r\n            var s = Math.sqrt(exports.IMABS(inumber));\r\n    \r\n            // Calculate argument\r\n            var t = exports.IMARGUMENT(inumber);\r\n    \r\n            // Return exponential of complex number\r\n            return exports.COMPLEX(s * Math.cos(t / 2), s * Math.sin(t / 2), unit);\r\n        };\r\n    \r\n        exports.IMCSC = function (inumber) {\r\n            // Return error if inumber is a logical value\r\n            if (inumber === true || inumber === false) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup real and imaginary coefficients using Formula.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            // Return error if either coefficient is not a number\r\n            if (utils.anyIsError(x, y)) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return cosecant of complex number\r\n            return exports.IMDIV('1', exports.IMSIN(inumber));\r\n        };\r\n    \r\n        exports.IMCSCH = function (inumber) {\r\n            // Return error if inumber is a logical value\r\n            if (inumber === true || inumber === false) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup real and imaginary coefficients using Formula.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            // Return error if either coefficient is not a number\r\n            if (utils.anyIsError(x, y)) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return hyperbolic cosecant of complex number\r\n            return exports.IMDIV('1', exports.IMSINH(inumber));\r\n        };\r\n    \r\n        exports.IMSUB = function(inumber1, inumber2) {\r\n            // Lookup real and imaginary coefficients using Formula.js\r\n            // [http://formulajs.org]\r\n            var a = this.IMREAL(inumber1);\r\n            var b = this.IMAGINARY(inumber1);\r\n            var c = this.IMREAL(inumber2);\r\n            var d = this.IMAGINARY(inumber2);\r\n    \r\n            if (utils.anyIsError(a, b, c, d)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup imaginary unit\r\n            var unit1 = inumber1.substring(inumber1.length - 1);\r\n            var unit2 = inumber2.substring(inumber2.length - 1);\r\n            var unit = 'i';\r\n            if (unit1 === 'j') {\r\n                unit = 'j';\r\n            } else if (unit2 === 'j') {\r\n                unit = 'j';\r\n            }\r\n    \r\n            // Return _ of two complex numbers\r\n            return this.COMPLEX(a - c, b - d, unit);\r\n        };\r\n    \r\n        exports.IMSUM = function() {\r\n            var args = utils.flatten(arguments);\r\n    \r\n            // Initialize result\r\n            var result = args[0];\r\n    \r\n            // Loop on all numbers\r\n            for (var i = 1; i < args.length; i++) {\r\n                // Lookup coefficients of two complex numbers\r\n                var a = this.IMREAL(result);\r\n                var b = this.IMAGINARY(result);\r\n                var c = this.IMREAL(args[i]);\r\n                var d = this.IMAGINARY(args[i]);\r\n    \r\n                if (utils.anyIsError(a, b, c, d)) {\r\n                  return error.value;\r\n                }\r\n    \r\n                // Complute product of two complex numbers\r\n                result = this.COMPLEX(a + c, b + d);\r\n            }\r\n    \r\n            // Return sum of complex numbers\r\n            return result;\r\n        };\r\n    \r\n        exports.IMTAN = function(inumber) {\r\n            // Return error if inumber is a logical value\r\n            if (inumber === true || inumber === false) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Lookup real and imaginary coefficients using Formula.js\r\n            // [http://formulajs.org]\r\n            var x = exports.IMREAL(inumber);\r\n            var y = exports.IMAGINARY(inumber);\r\n    \r\n            if (utils.anyIsError(x, y)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return tangent of complex number\r\n            return this.IMDIV(this.IMSIN(inumber), this.IMCOS(inumber));\r\n        };\r\n    \r\n        exports.OCT2BIN = function(number, places) {\r\n            // Return error if number is not hexadecimal or contains more than ten\r\n            // characters (10 digits)\r\n            if (!/^[0-7]{1,10}$/.test(number)) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Check if number is negative\r\n            var negative = (number.length === 10 && number.substring(0, 1) === '7') ? true : false;\r\n    \r\n            // Convert octal number to decimal\r\n            var decimal = (negative) ? parseInt(number, 8) - 1073741824 : parseInt(number, 8);\r\n    \r\n            // Return error if number is lower than -512 or greater than 511\r\n            if (decimal < -512 || decimal > 511) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Ignore places and return a 10-character binary number if number is\r\n            // negative\r\n            if (negative) {\r\n                return '1' + REPT('0', 9 - (512 + decimal).toString(2).length) + (512 + decimal).toString(2);\r\n            }\r\n    \r\n            // Convert decimal number to binary\r\n            var result = decimal.toString(2);\r\n    \r\n            // Return binary number using the minimum number of characters necessary\r\n            // if places is undefined\r\n            if (typeof places === 'undefined') {\r\n                return result;\r\n            } else {\r\n                // Return error if places is nonnumeric\r\n                if (isNaN(places)) {\r\n                  return error.value;\r\n                }\r\n    \r\n                // Return error if places is negative\r\n                if (places < 0) {\r\n                  return error.num;\r\n                }\r\n    \r\n                // Truncate places in case it is not an integer\r\n                places = Math.floor(places);\r\n    \r\n                // Pad return value with leading 0s (zeros) if necessary (using\r\n                // Underscore.string)\r\n                return (places >= result.length) ? REPT('0', places - result.length) + result : error.num;\r\n            }\r\n        };\r\n    \r\n        exports.OCT2DEC = function(number) {\r\n            // Return error if number is not octal or contains more than ten\r\n            // characters (10 digits)\r\n            if (!/^[0-7]{1,10}$/.test(number)) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Convert octal number to decimal\r\n            var decimal = parseInt(number, 8);\r\n    \r\n            // Return decimal number\r\n            return (decimal >= 536870912) ? decimal - 1073741824 : decimal;\r\n        };\r\n    \r\n        exports.OCT2HEX = function(number, places) {\r\n            // Return error if number is not octal or contains more than ten\r\n            // characters (10 digits)\r\n            if (!/^[0-7]{1,10}$/.test(number)) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Convert octal number to decimal\r\n            var decimal = parseInt(number, 8);\r\n    \r\n            // Ignore places and return a 10-character octal number if number is\r\n            // negative\r\n            if (decimal >= 536870912) {\r\n                return 'ff' + (decimal + 3221225472).toString(16);\r\n            }\r\n    \r\n            // Convert decimal number to hexadecimal\r\n            var result = decimal.toString(16);\r\n    \r\n            // Return hexadecimal number using the minimum number of characters\r\n            // necessary if places is undefined\r\n            if (places === undefined) {\r\n                return result;\r\n            } else {\r\n                // Return error if places is nonnumeric\r\n                if (isNaN(places)) {\r\n                  return error.value;\r\n                }\r\n    \r\n                // Return error if places is negative\r\n                if (places < 0) {\r\n                  return error.num;\r\n                }\r\n    \r\n                // Truncate places in case it is not an integer\r\n                places = Math.floor(places);\r\n    \r\n                // Pad return value with leading 0s (zeros) if necessary (using\r\n                // Underscore.string)\r\n                return (places >= result.length) ? REPT('0', places - result.length) + result : error.num;\r\n            }\r\n        };\r\n    \r\n        return exports;\r\n    })();\r\n    \r\n    jexcel.methods.financial = (function() {\r\n        var exports = {};\r\n    \r\n        function validDate(d) {\r\n            return d && d.getTime && !isNaN(d.getTime());\r\n        }\r\n    \r\n        function ensureDate(d) {\r\n            return (d instanceof Date)?d:new Date(d);\r\n        }\r\n    \r\n        exports.ACCRINT = function(issue, first, settlement, rate, par, frequency, basis) {\r\n            // Return error if either date is invalid\r\n            issue        = ensureDate(issue);\r\n            first        = ensureDate(first);\r\n            settlement = ensureDate(settlement);\r\n            if (!validDate(issue) || !validDate(first) || !validDate(settlement)) {\r\n                return '#VALUE!';\r\n            }\r\n    \r\n            // Return error if either rate or par are lower than or equal to zero\r\n            if (rate <= 0 || par <= 0) {\r\n                return '#NUM!';\r\n            }\r\n    \r\n            // Return error if frequency is neither 1, 2, or 4\r\n            if ([1, 2, 4].indexOf(frequency) === -1) {\r\n                return '#NUM!';\r\n            }\r\n    \r\n            // Return error if basis is neither 0, 1, 2, 3, or 4\r\n            if ([0, 1, 2, 3, 4].indexOf(basis) === -1) {\r\n                return '#NUM!';\r\n            }\r\n    \r\n            // Return error if settlement is before or equal to issue\r\n            if (settlement <= issue) {\r\n                return '#NUM!';\r\n            }\r\n    \r\n            // Set default values\r\n            par   = par   || 0;\r\n            basis = basis || 0;\r\n    \r\n            // Compute accrued interest\r\n            return par * rate * YEARFRAC(issue, settlement, basis);\r\n        };\r\n    \r\n        exports.ACCRINTM = null;\r\n    \r\n        exports.AMORDEGRC = null;\r\n    \r\n        exports.AMORLINC = null;\r\n    \r\n        exports.COUPDAYBS = null;\r\n    \r\n        exports.COUPDAYS = null;\r\n    \r\n        exports.COUPDAYSNC = null;\r\n    \r\n        exports.COUPNCD = null;\r\n    \r\n        exports.COUPNUM = null;\r\n    \r\n        exports.COUPPCD = null;\r\n    \r\n        exports.CUMIPMT = function(rate, periods, value, start, end, type) {\r\n            // Credits: algorithm inspired by Apache OpenOffice\r\n            // Credits: Hannes Stiebitzhofer for the translations of function and\r\n                // variable names\r\n            // Requires exports.FV() and exports.PMT() from exports.js\r\n                // [http://stoic.com/exports/]\r\n    \r\n            rate = utils.parseNumber(rate);\r\n            periods = utils.parseNumber(periods);\r\n            value = utils.parseNumber(value);\r\n            if (utils.anyIsError(rate, periods, value)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if either rate, periods, or value are lower than or\r\n                // equal to zero\r\n            if (rate <= 0 || periods <= 0 || value <= 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if start < 1, end < 1, or start > end\r\n            if (start < 1 || end < 1 || start > end) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if type is neither 0 nor 1\r\n            if (type !== 0 && type !== 1) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Compute cumulative interest\r\n            var payment = exports.PMT(rate, periods, value, 0, type);\r\n            var interest = 0;\r\n    \r\n            if (start === 1) {\r\n                if (type === 0) {\r\n                    interest = -value;\r\n                    start++;\r\n                }\r\n            }\r\n    \r\n            for (var i = start; i <= end; i++) {\r\n                if (type === 1) {\r\n                    interest += exports.FV(rate, i - 2, payment, value, 1) - payment;\r\n                } else {\r\n                    interest += exports.FV(rate, i - 1, payment, value, 0);\r\n                }\r\n            }\r\n            interest *= rate;\r\n    \r\n            // Return cumulative interest\r\n            return interest;\r\n        };\r\n    \r\n        exports.CUMPRINC = function(rate, periods, value, start, end, type) {\r\n            // Credits: algorithm inspired by Apache OpenOffice\r\n            // Credits: Hannes Stiebitzhofer for the translations of function and\r\n                // variable names\r\n    \r\n            rate = utils.parseNumber(rate);\r\n            periods = utils.parseNumber(periods);\r\n            value = utils.parseNumber(value);\r\n            if (utils.anyIsError(rate, periods, value)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if either rate, periods, or value are lower than or\r\n                // equal to zero\r\n            if (rate <= 0 || periods <= 0 || value <= 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if start < 1, end < 1, or start > end\r\n            if (start < 1 || end < 1 || start > end) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if type is neither 0 nor 1\r\n            if (type !== 0 && type !== 1) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Compute cumulative principal\r\n            var payment = exports.PMT(rate, periods, value, 0, type);\r\n            var principal = 0;\r\n            if (start === 1) {\r\n                if (type === 0) {\r\n                    principal = payment + value * rate;\r\n                } else {\r\n                    principal = payment;\r\n                }\r\n                start++;\r\n            }\r\n            for (var i = start; i <= end; i++) {\r\n                if (type > 0) {\r\n                    principal += payment - (exports.FV(rate, i - 2, payment, value, 1) - payment) * rate;\r\n                } else {\r\n                    principal += payment - exports.FV(rate, i - 1, payment, value, 0) * rate;\r\n                }\r\n            }\r\n    \r\n            // Return cumulative principal\r\n            return principal;\r\n        };\r\n    \r\n        exports.DB = function(cost, salvage, life, period, month) {\r\n            // Initialize month\r\n            month = (month === undefined) ? 12 : month;\r\n    \r\n            cost = utils.parseNumber(cost);\r\n            salvage = utils.parseNumber(salvage);\r\n            life = utils.parseNumber(life);\r\n            period = utils.parseNumber(period);\r\n            month = utils.parseNumber(month);\r\n            if (utils.anyIsError(cost, salvage, life, period, month)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if any of the parameters is negative\r\n            if (cost < 0 || salvage < 0 || life < 0 || period < 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if month is not an integer between 1 and 12\r\n            if ([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].indexOf(month) === -1) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if period is greater than life\r\n            if (period > life) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return 0 (zero) if salvage is greater than or equal to cost\r\n            if (salvage >= cost) {\r\n                return 0;\r\n            }\r\n    \r\n            // Rate is rounded to three decimals places\r\n            var rate = (1 - Math.pow(salvage / cost, 1 / life)).toFixed(3);\r\n    \r\n            // Compute initial depreciation\r\n            var initial = cost * rate * month / 12;\r\n    \r\n            // Compute total depreciation\r\n            var total = initial;\r\n            var current = 0;\r\n            var ceiling = (period === life) ? life - 1 : period;\r\n            for (var i = 2; i <= ceiling; i++) {\r\n                current = (cost - total) * rate;\r\n                total += current;\r\n            }\r\n    \r\n            // Depreciation for the first and last periods are special cases\r\n            if (period === 1) {\r\n                // First period\r\n                return initial;\r\n            } else if (period === life) {\r\n                // Last period\r\n                return (cost - total) * rate;\r\n            } else {\r\n                return current;\r\n            }\r\n        };\r\n    \r\n        exports.DDB = function(cost, salvage, life, period, factor) {\r\n            // Initialize factor\r\n            factor = (factor === undefined) ? 2 : factor;\r\n    \r\n            cost = utils.parseNumber(cost);\r\n            salvage = utils.parseNumber(salvage);\r\n            life = utils.parseNumber(life);\r\n            period = utils.parseNumber(period);\r\n            factor = utils.parseNumber(factor);\r\n            if (utils.anyIsError(cost, salvage, life, period, factor)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if any of the parameters is negative or if factor is\r\n                // null\r\n            if (cost < 0 || salvage < 0 || life < 0 || period < 0 || factor <= 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if period is greater than life\r\n            if (period > life) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return 0 (zero) if salvage is greater than or equal to cost\r\n            if (salvage >= cost) {\r\n                return 0;\r\n            }\r\n    \r\n            // Compute depreciation\r\n            var total = 0;\r\n            var current = 0;\r\n            for (var i = 1; i <= period; i++) {\r\n                current = Math.min((cost - total) * (factor / life), (cost - salvage - total));\r\n                total += current;\r\n            }\r\n    \r\n            // Return depreciation\r\n            return current;\r\n        };\r\n    \r\n        exports.DISC = null;\r\n    \r\n        exports.DOLLARDE = function(dollar, fraction) {\r\n            // Credits: algorithm inspired by Apache OpenOffice\r\n    \r\n            dollar = utils.parseNumber(dollar);\r\n            fraction = utils.parseNumber(fraction);\r\n            if (utils.anyIsError(dollar, fraction)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if fraction is negative\r\n            if (fraction < 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if fraction is greater than or equal to 0 and less than\r\n                // 1\r\n            if (fraction >= 0 && fraction < 1) {\r\n                return error.div0;\r\n            }\r\n    \r\n            // Truncate fraction if it is not an integer\r\n            fraction = parseInt(fraction, 10);\r\n    \r\n            // Compute integer part\r\n            var result = parseInt(dollar, 10);\r\n    \r\n            // Add decimal part\r\n            result += (dollar % 1) * Math.pow(10, Math.ceil(Math.log(fraction) / Math.LN10)) / fraction;\r\n    \r\n            // Round result\r\n            var power = Math.pow(10, Math.ceil(Math.log(fraction) / Math.LN2) + 1);\r\n            result = Math.round(result * power) / power;\r\n    \r\n            // Return converted dollar price\r\n            return result;\r\n        };\r\n    \r\n        exports.DOLLARFR = function(dollar, fraction) {\r\n            // Credits: algorithm inspired by Apache OpenOffice\r\n    \r\n            dollar = utils.parseNumber(dollar);\r\n            fraction = utils.parseNumber(fraction);\r\n            if (utils.anyIsError(dollar, fraction)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if fraction is negative\r\n            if (fraction < 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if fraction is greater than or equal to 0 and less than\r\n                // 1\r\n            if (fraction >= 0 && fraction < 1) {\r\n                return error.div0;\r\n            }\r\n    \r\n            // Truncate fraction if it is not an integer\r\n            fraction = parseInt(fraction, 10);\r\n    \r\n            // Compute integer part\r\n            var result = parseInt(dollar, 10);\r\n    \r\n            // Add decimal part\r\n            result += (dollar % 1) * Math.pow(10, -Math.ceil(Math.log(fraction) / Math.LN10)) * fraction;\r\n    \r\n            // Return converted dollar price\r\n            return result;\r\n        };\r\n    \r\n        exports.DURATION = null;\r\n    \r\n        exports.EFFECT = function(rate, periods) {\r\n            rate = utils.parseNumber(rate);\r\n            periods = utils.parseNumber(periods);\r\n            if (utils.anyIsError(rate, periods)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if rate <=0 or periods < 1\r\n            if (rate <= 0 || periods < 1) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Truncate periods if it is not an integer\r\n            periods = parseInt(periods, 10);\r\n    \r\n            // Return effective annual interest rate\r\n            return Math.pow(1 + rate / periods, periods) - 1;\r\n        };\r\n    \r\n        exports.FV = function(rate, periods, payment, value, type) {\r\n            // Credits: algorithm inspired by Apache OpenOffice\r\n    \r\n            value = value || 0;\r\n            type = type || 0;\r\n    \r\n            rate = utils.parseNumber(rate);\r\n            periods = utils.parseNumber(periods);\r\n            payment = utils.parseNumber(payment);\r\n            value = utils.parseNumber(value);\r\n            type = utils.parseNumber(type);\r\n            if (utils.anyIsError(rate, periods, payment, value, type)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return future value\r\n            var result;\r\n            if (rate === 0) {\r\n                result = value + payment * periods;\r\n            } else {\r\n                var term = Math.pow(1 + rate, periods);\r\n                if (type === 1) {\r\n                    result = value * term + payment * (1 + rate) * (term - 1) / rate;\r\n                } else {\r\n                    result = value * term + payment * (term - 1) / rate;\r\n                }\r\n            }\r\n            return -result;\r\n        };\r\n    \r\n        exports.FVSCHEDULE = function(principal, schedule) {\r\n            principal = utils.parseNumber(principal);\r\n            schedule = utils.parseNumberArray(utils.flatten(schedule));\r\n            if (utils.anyIsError(principal, schedule)) {\r\n                return error.value;\r\n            }\r\n    \r\n            var n = schedule.length;\r\n            var future = principal;\r\n    \r\n            // Apply all interests in schedule\r\n            for (var i = 0; i < n; i++) {\r\n                // Apply scheduled interest\r\n                future *= 1 + schedule[i];\r\n            }\r\n    \r\n            // Return future value\r\n            return future;\r\n        };\r\n    \r\n        exports.INTRATE = null;\r\n    \r\n        exports.IPMT = function(rate, period, periods, present, future, type) {\r\n            // Credits: algorithm inspired by Apache OpenOffice\r\n    \r\n            future = future || 0;\r\n            type = type || 0;\r\n    \r\n            rate = utils.parseNumber(rate);\r\n            period = utils.parseNumber(period);\r\n            periods = utils.parseNumber(periods);\r\n            present = utils.parseNumber(present);\r\n            future = utils.parseNumber(future);\r\n            type = utils.parseNumber(type);\r\n            if (utils.anyIsError(rate, period, periods, present, future, type)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Compute payment\r\n            var payment = exports.PMT(rate, periods, present, future, type);\r\n    \r\n            // Compute interest\r\n            var interest;\r\n            if (period === 1) {\r\n                if (type === 1) {\r\n                    interest = 0;\r\n                } else {\r\n                    interest = -present;\r\n                }\r\n            } else {\r\n                if (type === 1) {\r\n                    interest = exports.FV(rate, period - 2, payment, present, 1) - payment;\r\n                } else {\r\n                    interest = exports.FV(rate, period - 1, payment, present, 0);\r\n                }\r\n            }\r\n    \r\n            // Return interest\r\n            return interest * rate;\r\n        };\r\n    \r\n        exports.IRR = function(values, guess) {\r\n            // Credits: algorithm inspired by Apache OpenOffice\r\n    \r\n            guess = guess || 0;\r\n    \r\n            values = utils.parseNumberArray(utils.flatten(values));\r\n            guess = utils.parseNumber(guess);\r\n            if (utils.anyIsError(values, guess)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Calculates the resulting amount\r\n            var irrResult = function(values, dates, rate) {\r\n                var r = rate + 1;\r\n                var result = values[0];\r\n                for (var i = 1; i < values.length; i++) {\r\n                    result += values[i] / Math.pow(r, (dates[i] - dates[0]) / 365);\r\n                }\r\n                return result;\r\n            };\r\n    \r\n            // Calculates the first derivation\r\n            var irrResultDeriv = function(values, dates, rate) {\r\n                var r = rate + 1;\r\n                var result = 0;\r\n                for (var i = 1; i < values.length; i++) {\r\n                    var frac = (dates[i] - dates[0]) / 365;\r\n                    result -= frac * values[i] / Math.pow(r, frac + 1);\r\n                }\r\n                return result;\r\n            };\r\n    \r\n            // Initialize dates and check that values contains at least one positive\r\n                // value and one negative value\r\n            var dates = [];\r\n            var positive = false;\r\n            var negative = false;\r\n            for (var i = 0; i < values.length; i++) {\r\n                dates[i] = (i === 0) ? 0 : dates[i - 1] + 365;\r\n                if (values[i] > 0) {\r\n                    positive = true;\r\n                }\r\n                if (values[i] < 0) {\r\n                    negative = true;\r\n                }\r\n            }\r\n    \r\n            // Return error if values does not contain at least one positive value\r\n                // and one negative value\r\n            if (!positive || !negative) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Initialize guess and resultRate\r\n            guess = (guess === undefined) ? 0.1 : guess;\r\n            var resultRate = guess;\r\n    \r\n            // Set maximum epsilon for end of iteration\r\n            var epsMax = 1e-10;\r\n    \r\n            // Implement Newton's method\r\n            var newRate, epsRate, resultValue;\r\n            var contLoop = true;\r\n            do {\r\n                resultValue = irrResult(values, dates, resultRate);\r\n                newRate = resultRate - resultValue / irrResultDeriv(values, dates, resultRate);\r\n                epsRate = Math.abs(newRate - resultRate);\r\n                resultRate = newRate;\r\n                contLoop = (epsRate > epsMax) && (Math.abs(resultValue) > epsMax);\r\n            } while (contLoop);\r\n    \r\n            // Return internal rate of return\r\n            return resultRate;\r\n        };\r\n    \r\n        exports.ISPMT = function(rate, period, periods, value) {\r\n            rate = utils.parseNumber(rate);\r\n            period = utils.parseNumber(period);\r\n            periods = utils.parseNumber(periods);\r\n            value = utils.parseNumber(value);\r\n            if (utils.anyIsError(rate, period, periods, value)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return interest\r\n            return value * rate * (period / periods - 1);\r\n        };\r\n    \r\n        exports.MDURATION = null;\r\n    \r\n        exports.MIRR = function(values, finance_rate, reinvest_rate) {\r\n            values = utils.parseNumberArray(utils.flatten(values));\r\n            finance_rate = utils.parseNumber(finance_rate);\r\n            reinvest_rate = utils.parseNumber(reinvest_rate);\r\n            if (utils.anyIsError(values, finance_rate, reinvest_rate)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Initialize number of values\r\n            var n = values.length;\r\n    \r\n            // Lookup payments (negative values) and incomes (positive values)\r\n            var payments = [];\r\n            var incomes = [];\r\n            for (var i = 0; i < n; i++) {\r\n                if (values[i] < 0) {\r\n                    payments.push(values[i]);\r\n                } else {\r\n                    incomes.push(values[i]);\r\n                }\r\n            }\r\n    \r\n            // Return modified internal rate of return\r\n            var num = -exports.NPV(reinvest_rate, incomes) * Math.pow(1 + reinvest_rate, n - 1);\r\n            var den = exports.NPV(finance_rate, payments) * (1 + finance_rate);\r\n            return Math.pow(num / den, 1 / (n - 1)) - 1;\r\n        };\r\n    \r\n        exports.NOMINAL = function(rate, periods) {\r\n            rate = utils.parseNumber(rate);\r\n            periods = utils.parseNumber(periods);\r\n            if (utils.anyIsError(rate, periods)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if rate <=0 or periods < 1\r\n            if (rate <= 0 || periods < 1) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Truncate periods if it is not an integer\r\n            periods = parseInt(periods, 10);\r\n    \r\n            // Return nominal annual interest rate\r\n            return (Math.pow(rate + 1, 1 / periods) - 1) * periods;\r\n        };\r\n    \r\n        exports.NPER = function(rate, payment, present, future, type) {\r\n            type = (type === undefined) ? 0 : type;\r\n            future = (future === undefined) ? 0 : future;\r\n    \r\n            rate = utils.parseNumber(rate);\r\n            payment = utils.parseNumber(payment);\r\n            present = utils.parseNumber(present);\r\n            future = utils.parseNumber(future);\r\n            type = utils.parseNumber(type);\r\n            if (utils.anyIsError(rate, payment, present, future, type)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return number of periods\r\n            var num = payment * (1 + rate * type) - future * rate;\r\n            var den = (present * rate + payment * (1 + rate * type));\r\n            return Math.log(num / den) / Math.log(1 + rate);\r\n        };\r\n    \r\n        exports.NPV = function() {\r\n            var args = utils.parseNumberArray(utils.flatten(arguments));\r\n            if (args instanceof Error) {\r\n                return args;\r\n            }\r\n    \r\n            // Lookup rate\r\n            var rate = args[0];\r\n    \r\n            // Initialize net present value\r\n            var value = 0;\r\n    \r\n            // Loop on all values\r\n            for (var j = 1; j < args.length; j++) {\r\n                value += args[j] / Math.pow(1 + rate, j);\r\n            }\r\n    \r\n            // Return net present value\r\n            return value;\r\n        };\r\n    \r\n        exports.ODDFPRICE = null;\r\n    \r\n        exports.ODDFYIELD = null;\r\n    \r\n        exports.ODDLPRICE = null;\r\n    \r\n        exports.ODDLYIELD = null;\r\n    \r\n        exports.PDURATION = function(rate, present, future) {\r\n            rate = utils.parseNumber(rate);\r\n            present = utils.parseNumber(present);\r\n            future = utils.parseNumber(future);\r\n            if (utils.anyIsError(rate, present, future)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if rate <=0\r\n            if (rate <= 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return number of periods\r\n            return (Math.log(future) - Math.log(present)) / Math.log(1 + rate);\r\n        };\r\n    \r\n        exports.PMT = function(rate, periods, present, future, type) {\r\n            // Credits: algorithm inspired by Apache OpenOffice\r\n    \r\n            future = future || 0;\r\n            type = type || 0;\r\n    \r\n            rate = utils.parseNumber(rate);\r\n            periods = utils.parseNumber(periods);\r\n            present = utils.parseNumber(present);\r\n            future = utils.parseNumber(future);\r\n            type = utils.parseNumber(type);\r\n            if (utils.anyIsError(rate, periods, present, future, type)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return payment\r\n            var result;\r\n            if (rate === 0) {\r\n                result = (present + future) / periods;\r\n            } else {\r\n                var term = Math.pow(1 + rate, periods);\r\n                if (type === 1) {\r\n                    result = (future * rate / (term - 1) + present * rate / (1 - 1 / term)) / (1 + rate);\r\n                } else {\r\n                    result = future * rate / (term - 1) + present * rate / (1 - 1 / term);\r\n                }\r\n            }\r\n            return -result;\r\n        };\r\n    \r\n        exports.PPMT = function(rate, period, periods, present, future, type) {\r\n            future = future || 0;\r\n            type = type || 0;\r\n    \r\n            rate = utils.parseNumber(rate);\r\n            periods = utils.parseNumber(periods);\r\n            present = utils.parseNumber(present);\r\n            future = utils.parseNumber(future);\r\n            type = utils.parseNumber(type);\r\n            if (utils.anyIsError(rate, periods, present, future, type)) {\r\n                return error.value;\r\n            }\r\n    \r\n            return exports.PMT(rate, periods, present, future, type) - exports.IPMT(rate, period, periods, present, future, type);\r\n        };\r\n    \r\n        exports.PRICE = null;\r\n    \r\n        exports.PRICEDISC = null;\r\n    \r\n        exports.PRICEMAT = null;\r\n    \r\n        exports.PV = function(rate, periods, payment, future, type) {\r\n            future = future || 0;\r\n            type = type || 0;\r\n    \r\n            rate = utils.parseNumber(rate);\r\n            periods = utils.parseNumber(periods);\r\n            payment = utils.parseNumber(payment);\r\n            future = utils.parseNumber(future);\r\n            type = utils.parseNumber(type);\r\n            if (utils.anyIsError(rate, periods, payment, future, type)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return present value\r\n            if (rate === 0) {\r\n                return -payment * periods - future;\r\n            } else {\r\n                return (((1 - Math.pow(1 + rate, periods)) / rate) * payment * (1 + rate * type) - future) / Math.pow(1 + rate, periods);\r\n            }\r\n        };\r\n    \r\n        exports.RATE = function(periods, payment, present, future, type, guess) {\r\n            // Credits: rabugento\r\n    \r\n            guess = (guess === undefined) ? 0.01 : guess;\r\n            future = (future === undefined) ? 0 : future;\r\n            type = (type === undefined) ? 0 : type;\r\n    \r\n            periods = utils.parseNumber(periods);\r\n            payment = utils.parseNumber(payment);\r\n            present = utils.parseNumber(present);\r\n            future = utils.parseNumber(future);\r\n            type = utils.parseNumber(type);\r\n            guess = utils.parseNumber(guess);\r\n            if (utils.anyIsError(periods, payment, present, future, type, guess)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Set maximum epsilon for end of iteration\r\n            var epsMax = 1e-6;\r\n    \r\n            // Set maximum number of iterations\r\n            var iterMax = 100;\r\n            var iter = 0;\r\n            var close = false;\r\n            var rate = guess;\r\n    \r\n            while (iter < iterMax && !close) {\r\n                var t1 = Math.pow(rate + 1, periods);\r\n                var t2 = Math.pow(rate + 1, periods - 1);\r\n    \r\n                var f1 = future + t1 * present + payment * (t1 - 1) * (rate * type + 1) / rate;\r\n                var f2 = periods * t2 * present - payment * (t1 - 1) *(rate * type + 1) / Math.pow(rate,2);\r\n                var f3 = periods * payment * t2 * (rate * type + 1) / rate + payment * (t1 - 1) * type / rate;\r\n    \r\n                var newRate = rate - f1 / (f2 + f3);\r\n    \r\n                if (Math.abs(newRate - rate) < epsMax) close = true;\r\n                iter++\r\n                rate = newRate;\r\n            }\r\n    \r\n            if (!close) return Number.NaN + rate;\r\n            return rate;\r\n        };\r\n    \r\n        // TODO\r\n        exports.RECEIVED = null;\r\n    \r\n        exports.RRI = function(periods, present, future) {\r\n            periods = utils.parseNumber(periods);\r\n            present = utils.parseNumber(present);\r\n            future = utils.parseNumber(future);\r\n            if (utils.anyIsError(periods, present, future)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if periods or present is equal to 0 (zero)\r\n            if (periods === 0 || present === 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return equivalent interest rate\r\n            return Math.pow(future / present, 1 / periods) - 1;\r\n        };\r\n    \r\n        exports.SLN = function(cost, salvage, life) {\r\n            cost = utils.parseNumber(cost);\r\n            salvage = utils.parseNumber(salvage);\r\n            life = utils.parseNumber(life);\r\n            if (utils.anyIsError(cost, salvage, life)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if life equal to 0 (zero)\r\n            if (life === 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return straight-line depreciation\r\n            return (cost - salvage) / life;\r\n        };\r\n    \r\n        exports.SYD = function(cost, salvage, life, period) {\r\n            // Return error if any of the parameters is not a number\r\n            cost = utils.parseNumber(cost);\r\n            salvage = utils.parseNumber(salvage);\r\n            life = utils.parseNumber(life);\r\n            period = utils.parseNumber(period);\r\n            if (utils.anyIsError(cost, salvage, life, period)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if life equal to 0 (zero)\r\n            if (life === 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if period is lower than 1 or greater than life\r\n            if (period < 1 || period > life) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Truncate period if it is not an integer\r\n            period = parseInt(period, 10);\r\n    \r\n            // Return straight-line depreciation\r\n            return ((cost - salvage) * (life - period + 1) * 2) / (life * (life + 1));\r\n        };\r\n    \r\n        exports.TBILLEQ = function(settlement, maturity, discount) {\r\n            settlement = utils.parseDate(settlement);\r\n            maturity = utils.parseDate(maturity);\r\n            discount = utils.parseNumber(discount);\r\n            if (utils.anyIsError(settlement, maturity, discount)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if discount is lower than or equal to zero\r\n            if (discount <= 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if settlement is greater than maturity\r\n            if (settlement > maturity) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if maturity is more than one year after settlement\r\n            if (maturity - settlement > 365 * 24 * 60 * 60 * 1000) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return bond-equivalent yield\r\n            return (365 * discount) / (360 - discount * DAYS360(settlement, maturity, false));\r\n        };\r\n    \r\n        exports.TBILLPRICE = function(settlement, maturity, discount) {\r\n            settlement = utils.parseDate(settlement);\r\n            maturity = utils.parseDate(maturity);\r\n            discount = utils.parseNumber(discount);\r\n            if (utils.anyIsError(settlement, maturity, discount)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if discount is lower than or equal to zero\r\n            if (discount <= 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if settlement is greater than maturity\r\n            if (settlement > maturity) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if maturity is more than one year after settlement\r\n            if (maturity - settlement > 365 * 24 * 60 * 60 * 1000) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return bond-equivalent yield\r\n            return 100 * (1 - discount * DAYS360(settlement, maturity, false) / 360);\r\n        };\r\n    \r\n        exports.TBILLYIELD = function(settlement, maturity, price) {\r\n            settlement = utils.parseDate(settlement);\r\n            maturity = utils.parseDate(maturity);\r\n            price = utils.parseNumber(price);\r\n            if (utils.anyIsError(settlement, maturity, price)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Return error if price is lower than or equal to zero\r\n            if (price <= 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if settlement is greater than maturity\r\n            if (settlement > maturity) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return error if maturity is more than one year after settlement\r\n            if (maturity - settlement > 365 * 24 * 60 * 60 * 1000) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Return bond-equivalent yield\r\n            return (100 - price) * 360 / (price * DAYS360(settlement, maturity, false));\r\n        };\r\n    \r\n        exports.VDB = null;\r\n    \r\n        exports.XIRR = function(values, dates, guess) {\r\n            // Credits: algorithm inspired by Apache OpenOffice\r\n    \r\n            values = utils.parseNumberArray(utils.flatten(values));\r\n            dates = utils.parseDateArray(utils.flatten(dates));\r\n            guess = utils.parseNumber(guess);\r\n            if (utils.anyIsError(values, dates, guess)) {\r\n                return error.value;\r\n            }\r\n    \r\n            // Calculates the resulting amount\r\n            var irrResult = function(values, dates, rate) {\r\n                var r = rate + 1;\r\n                var result = values[0];\r\n                for (var i = 1; i < values.length; i++) {\r\n                    result += values[i] / Math.pow(r, DAYS(dates[i], dates[0]) / 365);\r\n                }\r\n                return result;\r\n            };\r\n    \r\n            // Calculates the first derivation\r\n            var irrResultDeriv = function(values, dates, rate) {\r\n                var r = rate + 1;\r\n                var result = 0;\r\n                for (var i = 1; i < values.length; i++) {\r\n                    var frac = DAYS(dates[i], dates[0]) / 365;\r\n                    result -= frac * values[i] / Math.pow(r, frac + 1);\r\n                }\r\n                return result;\r\n            };\r\n    \r\n            // Check that values contains at least one positive value and one\r\n                // negative value\r\n            var positive = false;\r\n            var negative = false;\r\n            for (var i = 0; i < values.length; i++) {\r\n                if (values[i] > 0) {\r\n                    positive = true;\r\n                }\r\n                if (values[i] < 0) {\r\n                    negative = true;\r\n                }\r\n            }\r\n    \r\n            // Return error if values does not contain at least one positive value\r\n                // and one negative value\r\n            if (!positive || !negative) {\r\n                return error.num;\r\n            }\r\n    \r\n            // Initialize guess and resultRate\r\n            guess = guess || 0.1;\r\n            var resultRate = guess;\r\n    \r\n            // Set maximum epsilon for end of iteration\r\n            var epsMax = 1e-10;\r\n    \r\n            // Implement Newton's method\r\n            var newRate, epsRate, resultValue;\r\n            var contLoop = true;\r\n            do {\r\n                resultValue = irrResult(values, dates, resultRate);\r\n                newRate = resultRate - resultValue / irrResultDeriv(values, dates, resultRate);\r\n                epsRate = Math.abs(newRate - resultRate);\r\n                resultRate = newRate;\r\n                contLoop = (epsRate > epsMax) && (Math.abs(resultValue) > epsMax);\r\n            } while (contLoop);\r\n    \r\n            // Return internal rate of return\r\n            return resultRate;\r\n        };\r\n    \r\n        exports.XNPV = function(rate, values, dates) {\r\n            rate = utils.parseNumber(rate);\r\n            values = utils.parseNumberArray(utils.flatten(values));\r\n            dates = utils.parseDateArray(utils.flatten(dates));\r\n            if (utils.anyIsError(rate, values, dates)) {\r\n                return error.value;\r\n            }\r\n    \r\n            var result = 0;\r\n            for (var i = 0; i < values.length; i++) {\r\n                result += values[i] / Math.pow(1 + rate, DAYS(dates[i], dates[0]) / 365);\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.YIELD = null;\r\n    \r\n        exports.YIELDDISC = null;\r\n    \r\n        exports.YIELDMAT = null;\r\n    \r\n        return exports;\r\n    })();\r\n    \r\n    jexcel.methods.information = (function() {\r\n        var exports = {};\r\n        exports.CELL = null;\r\n    \r\n        exports.ERROR = {};\r\n        exports.ERROR.TYPE = function(error_val) {\r\n            switch (error_val) {\r\n                case error.nil: return 1;\r\n                case error.div0: return 2;\r\n                case error.value: return 3;\r\n                case error.ref: return 4;\r\n                case error.name: return 5;\r\n                case error.num: return 6;\r\n                case error.na: return 7;\r\n                case error.data: return 8;\r\n            }\r\n            return error.na;\r\n        };\r\n    \r\n        exports.INFO = null;\r\n    \r\n        exports.ISBLANK = function(value) {\r\n            return value === null;\r\n        };\r\n    \r\n        exports.ISBINARY = function (number) {\r\n            return (/^[01]{1,10}$/).test(number);\r\n        };\r\n    \r\n        exports.ISERR = function(value) {\r\n            return ([error.value, error.ref, error.div0, error.num, error.name, error.nil]).indexOf(value) >= 0 ||\r\n                (typeof value === 'number' && (isNaN(value) || !isFinite(value)));\r\n        };\r\n    \r\n        exports.ISERROR = function(value) {\r\n            return exports.ISERR(value) || value === error.na;\r\n        };\r\n    \r\n        exports.ISEVEN = function(number) {\r\n            return (Math.floor(Math.abs(number)) & 1) ? false : true;\r\n        };\r\n    \r\n        // TODO\r\n        exports.ISFORMULA = null;\r\n    \r\n        exports.ISLOGICAL = function(value) {\r\n            return value === true || value === false;\r\n        };\r\n    \r\n        exports.ISNA = function(value) {\r\n            return value === error.na;\r\n        };\r\n    \r\n        exports.ISNONTEXT = function(value) {\r\n            return typeof(value) !== 'string';\r\n        };\r\n    \r\n        exports.ISNUMBER = function(value) {\r\n            return typeof(value) === 'number' && !isNaN(value) && isFinite(value);\r\n        };\r\n    \r\n        exports.ISODD = function(number) {\r\n            return (Math.floor(Math.abs(number)) & 1) ? true : false;\r\n        };\r\n    \r\n        exports.ISREF = null;\r\n    \r\n        exports.ISTEXT = function(value) {\r\n            return typeof(value) === 'string';\r\n        };\r\n    \r\n        exports.N = function(value) {\r\n            if (this.ISNUMBER(value)) {\r\n                return value;\r\n            }\r\n            if (value instanceof Date) {\r\n                return value.getTime();\r\n            }\r\n            if (value === true) {\r\n                return 1;\r\n            }\r\n            if (value === false) {\r\n                return 0;\r\n            }\r\n            if (this.ISERROR(value)) {\r\n                return value;\r\n            }\r\n            return 0;\r\n        };\r\n    \r\n        exports.NA = function() {\r\n            return error.na;\r\n        };\r\n    \r\n        exports.SHEET = null;\r\n    \r\n        exports.SHEETS = null;\r\n    \r\n        exports.TYPE = function(value) {\r\n            if (this.ISNUMBER(value)) {\r\n                return 1;\r\n            }\r\n            if (this.ISTEXT(value)) {\r\n                return 2;\r\n            }\r\n            if (this.ISLOGICAL(value)) {\r\n                return 4;\r\n            }\r\n            if (this.ISERROR(value)) {\r\n                return 16;\r\n            }\r\n            if (Array.isArray(value)) {\r\n                return 64;\r\n            }\r\n        };\r\n    \r\n        return exports;\r\n    })();\r\n    \r\n    jexcel.methods.logical = (function() {\r\n        var exports = {};\r\n    \r\n        exports.AND = function() {\r\n            var args = utils.flatten(arguments);\r\n            var result = true;\r\n            for (var i = 0; i < args.length; i++) {\r\n                if (!args[i]) {\r\n                    result = false;\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.CHOOSE = function() {\r\n            if (arguments.length < 2) {\r\n                return error.na;\r\n            }\r\n    \r\n            var index = arguments[0];\r\n            if (index < 1 || index > 254) {\r\n                return error.value;\r\n            }\r\n    \r\n            if (arguments.length < index + 1) {\r\n                return error.value;\r\n            }\r\n    \r\n            return arguments[index];\r\n        };\r\n    \r\n        exports.FALSE = function() {\r\n            return false;\r\n        };\r\n    \r\n        exports.IF = function(test, then_value, otherwise_value) {\r\n            return test ? then_value : otherwise_value;\r\n        };\r\n    \r\n        exports.IFERROR = function(value, valueIfError) {\r\n            if (ISERROR(value)) {\r\n                return valueIfError;\r\n            }\r\n            return value;\r\n        };\r\n    \r\n        exports.IFNA = function(value, value_if_na) {\r\n            return value === error.na ? value_if_na : value;\r\n        };\r\n    \r\n        exports.NOT = function(logical) {\r\n            return !logical;\r\n        };\r\n    \r\n        exports.OR = function() {\r\n            var args = utils.flatten(arguments);\r\n            var result = false;\r\n            for (var i = 0; i < args.length; i++) {\r\n                if (args[i]) {\r\n                    result = true;\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.TRUE = function() {\r\n            return true;\r\n        };\r\n    \r\n        exports.XOR = function() {\r\n            var args = utils.flatten(arguments);\r\n            var result = 0;\r\n            for (var i = 0; i < args.length; i++) {\r\n                if (args[i]) {\r\n                    result++;\r\n                }\r\n            }\r\n            return (Math.floor(Math.abs(result)) & 1) ? true : false;\r\n        };\r\n    \r\n        exports.SWITCH = function() {\r\n            var result;\r\n            if (arguments.length > 0)  {\r\n                var targetValue = arguments[0];\r\n                var argc = arguments.length - 1;\r\n                var switchCount = Math.floor(argc / 2);\r\n                var switchSatisfied = false;\r\n                var defaultClause = argc % 2 === 0 ? null : arguments[arguments.length - 1];\r\n    \r\n                if (switchCount) {\r\n                    for (var index = 0; index < switchCount; index++) {\r\n                        if (targetValue === arguments[index * 2 + 1]) {\r\n                          result = arguments[index * 2 + 2];\r\n                          switchSatisfied = true;\r\n                          break;\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                if (!switchSatisfied && defaultClause) {\r\n                    result = defaultClause;\r\n                }\r\n            }\r\n    \r\n            return result;\r\n        };\r\n    \r\n        return exports;\r\n    })();\r\n    \r\n    jexcel.methods.math = (function() {\r\n        var exports = {};\r\n    \r\n        exports.ABS = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return Math.abs(utils.parseNumber(number));\r\n        };\r\n    \r\n        exports.ACOS = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return Math.acos(number);\r\n        };\r\n    \r\n        exports.ACOSH = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return Math.log(number + Math.sqrt(number * number - 1));\r\n        };\r\n    \r\n        exports.ACOT = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return Math.atan(1 / number);\r\n        };\r\n    \r\n        exports.ACOTH = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return 0.5 * Math.log((number + 1) / (number - 1));\r\n        };\r\n    \r\n        exports.AGGREGATE = null\r\n    \r\n        exports.ARABIC = function(text) {\r\n            // Credits: Rafa? Kukawski\r\n            if (!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(text)) {\r\n                return error.value;\r\n            }\r\n            var r = 0;\r\n            text.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g, function(i) {\r\n                r += {\r\n                    M: 1000,\r\n                    CM: 900,\r\n                    D: 500,\r\n                    CD: 400,\r\n                    C: 100,\r\n                    XC: 90,\r\n                    L: 50,\r\n                    XL: 40,\r\n                    X: 10,\r\n                    IX: 9,\r\n                    V: 5,\r\n                    IV: 4,\r\n                    I: 1\r\n                }[i];\r\n            });\r\n            return r;\r\n        };\r\n    \r\n        exports.ASIN = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return Math.asin(number);\r\n        };\r\n    \r\n        exports.ASINH = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return Math.log(number + Math.sqrt(number * number + 1));\r\n        };\r\n    \r\n        exports.ATAN = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return Math.atan(number);\r\n        };\r\n    \r\n        exports.ATAN2 = function(number_x, number_y) {\r\n            number_x = utils.parseNumber(number_x);\r\n            number_y = utils.parseNumber(number_y);\r\n            if (utils.anyIsError(number_x, number_y)) {\r\n                return error.value;\r\n            }\r\n            return Math.atan2(number_x, number_y);\r\n        };\r\n    \r\n        exports.ATANH = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return Math.log((1 + number) / (1 - number)) / 2;\r\n        };\r\n    \r\n        exports.BASE = function(number, radix, min_length) {\r\n            min_length = min_length || 0;\r\n    \r\n            number = utils.parseNumber(number);\r\n            radix = utils.parseNumber(radix);\r\n            min_length = utils.parseNumber(min_length);\r\n            if (utils.anyIsError(number, radix, min_length)) {\r\n                return error.value;\r\n            }\r\n            min_length = (min_length === undefined) ? 0 : min_length;\r\n            var result = number.toString(radix);\r\n            return new Array(Math.max(min_length + 1 - result.length, 0)).join('0') + result;\r\n        };\r\n    \r\n        exports.CEILING = function(number, significance, mode) {\r\n            significance = (significance === undefined) ? 1 : significance;\r\n            mode = (mode === undefined) ? 0 : mode;\r\n    \r\n            number = utils.parseNumber(number);\r\n            significance = utils.parseNumber(significance);\r\n            mode = utils.parseNumber(mode);\r\n            if (utils.anyIsError(number, significance, mode)) {\r\n                return error.value;\r\n            }\r\n            if (significance === 0) {\r\n                return 0;\r\n            }\r\n    \r\n            significance = Math.abs(significance);\r\n            if (number >= 0) {\r\n                return Math.ceil(number / significance) * significance;\r\n            } else {\r\n                if (mode === 0) {\r\n                    return -1 * Math.floor(Math.abs(number) / significance) * significance;\r\n                } else {\r\n                    return -1 * Math.ceil(Math.abs(number) / significance) * significance;\r\n                }\r\n            }\r\n        };\r\n    \r\n        exports.CEILING.MATH = exports.CEILING;\r\n    \r\n        exports.CEILING.PRECISE = exports.CEILING;\r\n    \r\n        exports.COMBIN = function(number, number_chosen) {\r\n            number = utils.parseNumber(number);\r\n            number_chosen = utils.parseNumber(number_chosen);\r\n            if (utils.anyIsError(number, number_chosen)) {\r\n                return error.value;\r\n            }\r\n            return exports.FACT(number) / (exports.FACT(number_chosen) * exports.FACT(number - number_chosen));\r\n        };\r\n    \r\n        exports.COMBINA = function(number, number_chosen) {\r\n            number = utils.parseNumber(number);\r\n            number_chosen = utils.parseNumber(number_chosen);\r\n            if (utils.anyIsError(number, number_chosen)) {\r\n                return error.value;\r\n            }\r\n            return (number === 0 && number_chosen === 0) ? 1 : exports.COMBIN(number + number_chosen - 1, number - 1);\r\n        };\r\n    \r\n        exports.COS = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return Math.cos(number);\r\n        };\r\n    \r\n        exports.COSH = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return (Math.exp(number) + Math.exp(-number)) / 2;\r\n        };\r\n    \r\n        exports.COT = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return 1 / Math.tan(number);\r\n        };\r\n    \r\n        exports.COTH = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            var e2 = Math.exp(2 * number);\r\n            return (e2 + 1) / (e2 - 1);\r\n        };\r\n    \r\n        exports.CSC = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return 1 / Math.sin(number);\r\n        };\r\n    \r\n        exports.CSCH = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return 2 / (Math.exp(number) - Math.exp(-number));\r\n        };\r\n    \r\n        exports.DECIMAL = function(number, radix) {\r\n            if (arguments.length < 1) {\r\n                return error.value;\r\n            }\r\n    \r\n    \r\n            return parseInt(number, radix);\r\n        };\r\n    \r\n        exports.DEGREES = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return number * 180 / Math.PI;\r\n        };\r\n    \r\n        exports.EVEN = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return exports.CEILING(number, -2, -1);\r\n        };\r\n    \r\n        exports.EXP = Math.exp;\r\n    \r\n        var MEMOIZED_FACT = [];\r\n        exports.FACT = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            var n = Math.floor(number);\r\n            if (n === 0 || n === 1) {\r\n                return 1;\r\n            } else if (MEMOIZED_FACT[n] > 0) {\r\n                return MEMOIZED_FACT[n];\r\n            } else {\r\n                MEMOIZED_FACT[n] = exports.FACT(n - 1) * n;\r\n                return MEMOIZED_FACT[n];\r\n            }\r\n        };\r\n    \r\n        exports.FACTDOUBLE = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            var n = Math.floor(number);\r\n            if (n <= 0) {\r\n                return 1;\r\n            } else {\r\n                return n * exports.FACTDOUBLE(n - 2);\r\n            }\r\n        };\r\n    \r\n        exports.FLOOR = function(number, significance, mode) {\r\n            significance = (significance === undefined) ? 1 : significance;\r\n            mode = (mode === undefined) ? 0 : mode;\r\n    \r\n            number = utils.parseNumber(number);\r\n            significance = utils.parseNumber(significance);\r\n            mode = utils.parseNumber(mode);\r\n            if (utils.anyIsError(number, significance, mode)) {\r\n                return error.value;\r\n            }\r\n            if (significance === 0) {\r\n                return 0;\r\n            }\r\n    \r\n            significance = Math.abs(significance);\r\n            if (number >= 0) {\r\n                return Math.floor(number / significance) * significance;\r\n            } else {\r\n                if (mode === 0) {\r\n                    return -1 * Math.ceil(Math.abs(number) / significance) * significance;\r\n                } else {\r\n                    return -1 * Math.floor(Math.abs(number) / significance) * significance;\r\n                }\r\n            }\r\n        };\r\n    \r\n        exports.FLOOR.MATH = exports.FLOOR;\r\n    \r\n        exports.GCD = null;\r\n    \r\n        exports.INT = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return Math.floor(number);\r\n        };\r\n    \r\n        exports.LCM = function() {\r\n            // Credits: Jonas Raoni Soares Silva\r\n            var o = utils.parseNumberArray(utils.flatten(arguments));\r\n            if (o instanceof Error) {\r\n                return o;\r\n            }\r\n            for (var i, j, n, d, r = 1;\r\n                (n = o.pop()) !== undefined;) {\r\n                while (n > 1) {\r\n                    if (n % 2) {\r\n                        for (i = 3, j = Math.floor(Math.sqrt(n)); i <= j && n % i; i += 2) {\r\n                          //empty\r\n                        }\r\n                        d = (i <= j) ? i : n;\r\n                    } else {\r\n                        d = 2;\r\n                    }\r\n                    for (n /= d, r *= d, i = o.length; i;\r\n                        (o[--i] % d) === 0 && (o[i] /= d) === 1 && o.splice(i, 1)) {\r\n                        //empty\r\n                    }\r\n                }\r\n            }\r\n            return r;\r\n        };\r\n    \r\n        exports.LN = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return Math.log(number);\r\n        };\r\n    \r\n        exports.LOG = function(number, base) {\r\n            number = utils.parseNumber(number);\r\n            base = (base === undefined) ? 10 : utils.parseNumber(base);\r\n    \r\n            if (utils.anyIsError(number, base)) {\r\n                return error.value;\r\n            }\r\n    \r\n            return Math.log(number) / Math.log(base);\r\n        };\r\n    \r\n        exports.LOG10 = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return Math.log(number) / Math.log(10);\r\n        };\r\n    \r\n        exports.MDETERM = null;\r\n    \r\n        exports.MINVERSE = null;\r\n    \r\n        exports.MMULT = null;\r\n    \r\n        exports.MOD = function(dividend, divisor) {\r\n            dividend = utils.parseNumber(dividend);\r\n            divisor = utils.parseNumber(divisor);\r\n            if (utils.anyIsError(dividend, divisor)) {\r\n                return error.value;\r\n            }\r\n            if (divisor === 0) {\r\n                return error.div0;\r\n            }\r\n            var modulus = Math.abs(dividend % divisor);\r\n            return (divisor > 0) ? modulus : -modulus;\r\n        };\r\n    \r\n        exports.MROUND = function(number, multiple) {\r\n            number = utils.parseNumber(number);\r\n            multiple = utils.parseNumber(multiple);\r\n            if (utils.anyIsError(number, multiple)) {\r\n                return error.value;\r\n            }\r\n            if (number * multiple < 0) {\r\n                return error.num;\r\n            }\r\n    \r\n            return Math.round(number / multiple) * multiple;\r\n        };\r\n    \r\n        exports.MULTINOMIAL = function() {\r\n            var args = utils.parseNumberArray(utils.flatten(arguments));\r\n            if (args instanceof Error) {\r\n                return args;\r\n            }\r\n            var sum = 0;\r\n            var divisor = 1;\r\n            for (var i = 0; i < args.length; i++) {\r\n                sum += args[i];\r\n                divisor *= exports.FACT(args[i]);\r\n            }\r\n            return exports.FACT(sum) / divisor;\r\n        };\r\n    \r\n        exports.MUNIT = null;\r\n    \r\n        exports.ODD = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            var temp = Math.ceil(Math.abs(number));\r\n            temp = (temp & 1) ? temp : temp + 1;\r\n            return (number > 0) ? temp : -temp;\r\n        };\r\n    \r\n        exports.PI = function() {\r\n            return Math.PI;\r\n        };\r\n    \r\n        exports.POWER = function(number, power) {\r\n            number = utils.parseNumber(number);\r\n            power = utils.parseNumber(power);\r\n            if (utils.anyIsError(number, power)) {\r\n                return error.value;\r\n            }\r\n            var result = Math.pow(number, power);\r\n            if (isNaN(result)) {\r\n                return error.num;\r\n            }\r\n    \r\n            return result;\r\n        };\r\n    \r\n        exports.PRODUCT = function() {\r\n            var args = utils.parseNumberArray(utils.flatten(arguments));\r\n            if (args instanceof Error) {\r\n                return args;\r\n            }\r\n            var result = 1;\r\n            for (var i = 0; i < args.length; i++) {\r\n                result *= args[i];\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.QUOTIENT = function(numerator, denominator) {\r\n            numerator = utils.parseNumber(numerator);\r\n            denominator = utils.parseNumber(denominator);\r\n            if (utils.anyIsError(numerator, denominator)) {\r\n                return error.value;\r\n            }\r\n            return parseInt(numerator / denominator, 10);\r\n        };\r\n    \r\n        exports.RADIANS = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return number * Math.PI / 180;\r\n        };\r\n    \r\n        exports.RAND = function() {\r\n            return Math.random();\r\n        };\r\n    \r\n        exports.RANDBETWEEN = function(bottom, top) {\r\n            bottom = utils.parseNumber(bottom);\r\n            top = utils.parseNumber(top);\r\n            if (utils.anyIsError(bottom, top)) {\r\n                return error.value;\r\n            }\r\n            // Creative Commons Attribution 3.0 License\r\n            // Copyright (c) 2012 eqcode\r\n            return bottom + Math.ceil((top - bottom + 1) * Math.random()) - 1;\r\n        };\r\n    \r\n        exports.ROMAN = null;\r\n    \r\n        exports.ROUND = function(number, digits) {\r\n            number = utils.parseNumber(number);\r\n            digits = utils.parseNumber(digits);\r\n            if (utils.anyIsError(number, digits)) {\r\n                return error.value;\r\n            }\r\n            return Math.round(number * Math.pow(10, digits)) / Math.pow(10, digits);\r\n        };\r\n    \r\n        exports.ROUNDDOWN = function(number, digits) {\r\n            number = utils.parseNumber(number);\r\n            digits = utils.parseNumber(digits);\r\n            if (utils.anyIsError(number, digits)) {\r\n                return error.value;\r\n            }\r\n            var sign = (number > 0) ? 1 : -1;\r\n            return sign * (Math.floor(Math.abs(number) * Math.pow(10, digits))) / Math.pow(10, digits);\r\n        };\r\n    \r\n        exports.ROUNDUP = function(number, digits) {\r\n            number = utils.parseNumber(number);\r\n            digits = utils.parseNumber(digits);\r\n            if (utils.anyIsError(number, digits)) {\r\n                return error.value;\r\n            }\r\n            var sign = (number > 0) ? 1 : -1;\r\n            return sign * (Math.ceil(Math.abs(number) * Math.pow(10, digits))) / Math.pow(10, digits);\r\n        };\r\n    \r\n        exports.SEC = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return 1 / Math.cos(number);\r\n        };\r\n    \r\n        exports.SECH = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return 2 / (Math.exp(number) + Math.exp(-number));\r\n        };\r\n    \r\n        exports.SERIESSUM = function(x, n, m, coefficients) {\r\n            x = utils.parseNumber(x);\r\n            n = utils.parseNumber(n);\r\n            m = utils.parseNumber(m);\r\n            coefficients = utils.parseNumberArray(coefficients);\r\n            if (utils.anyIsError(x, n, m, coefficients)) {\r\n                return error.value;\r\n            }\r\n            var result = coefficients[0] * Math.pow(x, n);\r\n            for (var i = 1; i < coefficients.length; i++) {\r\n                result += coefficients[i] * Math.pow(x, n + i * m);\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.SIGN = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            if (number < 0) {\r\n                return -1;\r\n            } else if (number === 0) {\r\n                return 0;\r\n            } else {\r\n                return 1;\r\n            }\r\n        };\r\n    \r\n        exports.SIN = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return Math.sin(number);\r\n        };\r\n    \r\n        exports.SINH = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return (Math.exp(number) - Math.exp(-number)) / 2;\r\n        };\r\n    \r\n        exports.SQRT = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            if (number < 0) {\r\n                return error.num;\r\n            }\r\n            return Math.sqrt(number);\r\n        };\r\n    \r\n        exports.SQRTPI = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return Math.sqrt(number * Math.PI);\r\n        };\r\n    \r\n        exports.SUBTOTAL = null;\r\n    \r\n        exports.ADD = function (num1, num2) {\r\n            if (arguments.length !== 2) {\r\n                return error.na;\r\n            }\r\n    \r\n            num1 = utils.parseNumber(num1);\r\n            num2 = utils.parseNumber(num2);\r\n            if (utils.anyIsError(num1, num2)) {\r\n                return error.value;\r\n            }\r\n    \r\n            return num1 + num2;\r\n        };\r\n    \r\n        exports.MINUS = function (num1, num2) {\r\n            if (arguments.length !== 2) {\r\n                return error.na;\r\n            }\r\n    \r\n            num1 = utils.parseNumber(num1);\r\n            num2 = utils.parseNumber(num2);\r\n            if (utils.anyIsError(num1, num2)) {\r\n                return error.value;\r\n            }\r\n    \r\n            return num1 - num2;\r\n        };\r\n    \r\n        exports.DIVIDE = function (dividend, divisor) {\r\n            if (arguments.length !== 2) {\r\n                return error.na;\r\n            }\r\n    \r\n            dividend = utils.parseNumber(dividend);\r\n            divisor = utils.parseNumber(divisor);\r\n            if (utils.anyIsError(dividend, divisor)) {\r\n                return error.value;\r\n            }\r\n    \r\n            if (divisor === 0) {\r\n                return error.div0;\r\n            }\r\n    \r\n            return dividend / divisor;\r\n        };\r\n    \r\n        exports.MULTIPLY = function (factor1, factor2) {\r\n            if (arguments.length !== 2) {\r\n                return error.na;\r\n            }\r\n    \r\n            factor1 = utils.parseNumber(factor1);\r\n            factor2 = utils.parseNumber(factor2);\r\n            if (utils.anyIsError(factor1, factor2)) {\r\n                return error.value;\r\n            }\r\n    \r\n            return factor1 * factor2;\r\n        };\r\n    \r\n        exports.GTE = function (num1, num2) {\r\n            if (arguments.length !== 2) {\r\n                return error.na;\r\n            }\r\n    \r\n            num1 = utils.parseNumber(num1);\r\n            num2 = utils.parseNumber(num2);\r\n            if (utils.anyIsError(num1, num2)) {\r\n                return error.error;\r\n            }\r\n    \r\n            return num1 >= num2;\r\n        };\r\n    \r\n        exports.LT = function (num1, num2) {\r\n            if (arguments.length !== 2) {\r\n                return error.na;\r\n            }\r\n    \r\n            num1 = utils.parseNumber(num1);\r\n            num2 = utils.parseNumber(num2);\r\n            if (utils.anyIsError(num1, num2)) {\r\n                return error.error;\r\n            }\r\n    \r\n            return num1 < num2;\r\n        };\r\n    \r\n        exports.LTE = function (num1, num2) {\r\n            if (arguments.length !== 2) {\r\n                return error.na;\r\n            }\r\n    \r\n            num1 = utils.parseNumber(num1);\r\n            num2 = utils.parseNumber(num2);\r\n            if (utils.anyIsError(num1, num2)) {\r\n                return error.error;\r\n            }\r\n    \r\n            return num1 <= num2;\r\n        };\r\n    \r\n        exports.EQ = function (value1, value2) {\r\n            if (arguments.length !== 2) {\r\n                return error.na;\r\n            }\r\n    \r\n            return value1 === value2;\r\n        };\r\n    \r\n        exports.NE = function (value1, value2) {\r\n            if (arguments.length !== 2) {\r\n                return error.na;\r\n            }\r\n    \r\n            return value1 !== value2;\r\n        };\r\n    \r\n        exports.POW = function (base, exponent) {\r\n            if (arguments.length !== 2) {\r\n                return error.na;\r\n            }\r\n    \r\n            base = utils.parseNumber(base);\r\n            exponent = utils.parseNumber(exponent);\r\n            if (utils.anyIsError(base, exponent)) {\r\n                return error.error;\r\n            }\r\n    \r\n            return exports.POWER(base, exponent);\r\n        };\r\n    \r\n        exports.SUM = function() {\r\n            var result = 0;\r\n            var argsKeys = Object.keys(arguments);\r\n            for (var i = 0; i < argsKeys.length; ++i) {\r\n                var elt = arguments[argsKeys[i]];\r\n                if (typeof elt === 'number') {\r\n                    result += elt;\r\n                } else if (typeof elt === 'string') {\r\n                    var parsed = parseFloat(elt);\r\n                    !isNaN(parsed) && (result += parsed);\r\n                } else if (Array.isArray(elt)) {\r\n                    result += exports.SUM.apply(null, elt);\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.SUMIF = function(range, criteria) {\r\n            range = utils.parseNumberArray(utils.flatten(range));\r\n            if (range instanceof Error) {\r\n                return range;\r\n            }\r\n            var result = 0;\r\n            for (var i = 0; i < range.length; i++) {\r\n                result += (eval(range[i] + criteria)) ? range[i] : 0; // jshint ignore:line\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.SUMIFS = function() {\r\n            var args = utils.argsToArray(arguments);\r\n            var range = utils.parseNumberArray(utils.flatten(args.shift()));\r\n            if (range instanceof Error) {\r\n                return range;\r\n            }\r\n            var criteria = args;\r\n    \r\n            var n_range_elements = range.length;\r\n            var n_criterias = criteria.length;\r\n    \r\n            var result = 0;\r\n            for (var i = 0; i < n_range_elements; i++) {\r\n                var el = range[i];\r\n                var condition = '';\r\n                for (var c = 0; c < n_criterias; c++) {\r\n                    condition += el + criteria[c];\r\n                    if (c !== n_criterias - 1) {\r\n                        condition += '&&';\r\n                    }\r\n                }\r\n                if (eval(condition)) { // jshint ignore:line\r\n                    result += el;\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.SUMPRODUCT = null;\r\n    \r\n        exports.SUMSQ = function() {\r\n            var numbers = utils.parseNumberArray(utils.flatten(arguments));\r\n            if (numbers instanceof Error) {\r\n                return numbers;\r\n            }\r\n            var result = 0;\r\n            var length = numbers.length;\r\n            for (var i = 0; i < length; i++) {\r\n                result += (ISNUMBER(numbers[i])) ? numbers[i] * numbers[i] : 0;\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.SUMX2MY2 = function(array_x, array_y) {\r\n            array_x = utils.parseNumberArray(utils.flatten(array_x));\r\n            array_y = utils.parseNumberArray(utils.flatten(array_y));\r\n            if (utils.anyIsError(array_x, array_y)) {\r\n                return error.value;\r\n            }\r\n            var result = 0;\r\n            for (var i = 0; i < array_x.length; i++) {\r\n                result += array_x[i] * array_x[i] - array_y[i] * array_y[i];\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.SUMX2PY2 = function(array_x, array_y) {\r\n            array_x = utils.parseNumberArray(utils.flatten(array_x));\r\n            array_y = utils.parseNumberArray(utils.flatten(array_y));\r\n            if (utils.anyIsError(array_x, array_y)) {\r\n                return error.value;\r\n            }\r\n            var result = 0;\r\n            array_x = utils.parseNumberArray(utils.flatten(array_x));\r\n            array_y = utils.parseNumberArray(utils.flatten(array_y));\r\n            for (var i = 0; i < array_x.length; i++) {\r\n                result += array_x[i] * array_x[i] + array_y[i] * array_y[i];\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.SUMXMY2 = function(array_x, array_y) {\r\n            array_x = utils.parseNumberArray(utils.flatten(array_x));\r\n            array_y = utils.parseNumberArray(utils.flatten(array_y));\r\n            if (utils.anyIsError(array_x, array_y)) {\r\n                return error.value;\r\n            }\r\n            var result = 0;\r\n            array_x = utils.flatten(array_x);\r\n            array_y = utils.flatten(array_y);\r\n            for (var i = 0; i < array_x.length; i++) {\r\n                result += Math.pow(array_x[i] - array_y[i], 2);\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.TAN = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return Math.tan(number);\r\n        };\r\n    \r\n        exports.TANH = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            var e2 = Math.exp(2 * number);\r\n            return (e2 - 1) / (e2 + 1);\r\n        };\r\n    \r\n        exports.TRUNC = function(number, digits) {\r\n            digits = (digits === undefined) ? 0 : digits;\r\n            number = utils.parseNumber(number);\r\n            digits = utils.parseNumber(digits);\r\n            if (utils.anyIsError(number, digits)) {\r\n                return error.value;\r\n            }\r\n            var sign = (number > 0) ? 1 : -1;\r\n            return sign * (Math.floor(Math.abs(number) * Math.pow(10, digits))) / Math.pow(10, digits);\r\n        };\r\n    \r\n        return exports;\r\n    })();\r\n    \r\n    jexcel.methods.misc = (function() {\r\n        var exports = {};\r\n    \r\n        exports.UNIQUE = function () {\r\n            var result = [];\r\n            for (var i = 0; i < arguments.length; ++i) {\r\n                var hasElement = false;\r\n                var element = arguments[i];\r\n    \r\n                // Check if we've already seen this element.\r\n                for (var j = 0; j < result.length; ++j) {\r\n                    hasElement = result[j] === element;\r\n                    if (hasElement) { break; }\r\n                }\r\n    \r\n                // If we did not find it, add it to the result.\r\n                if (!hasElement) {\r\n                    result.push(element);\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.FLATTEN = utils.flatten;\r\n    \r\n        exports.ARGS2ARRAY = function () {\r\n            return Array.prototype.slice.call(arguments, 0);\r\n        };\r\n    \r\n        exports.REFERENCE = function (context, reference) {\r\n            try {\r\n                var path = reference.split('.');\r\n                var result = context;\r\n                for (var i = 0; i < path.length; ++i) {\r\n                    var step = path[i];\r\n                    if (step[step.length - 1] === ']') {\r\n                        var opening = step.indexOf('[');\r\n                        var index = step.substring(opening + 1, step.length - 1);\r\n                        result = result[step.substring(0, opening)][index];\r\n                    } else {\r\n                        result = result[step];\r\n                    }\r\n                }\r\n                return result;\r\n            } catch (error) {}\r\n        };\r\n    \r\n        exports.JOIN = function (array, separator) {\r\n            return array.join(separator);\r\n        };\r\n    \r\n        exports.NUMBERS = function () {\r\n            var possibleNumbers = utils.flatten(arguments);\r\n            return possibleNumbers.filter(function (el) {\r\n                return typeof el === 'number';\r\n            });\r\n        };\r\n    \r\n        exports.NUMERAL = null;\r\n    \r\n        return exports;\r\n    })();\r\n    \r\n    jexcel.methods.text = (function() {\r\n        var exports = {};\r\n    \r\n        exports.ASC = null;\r\n    \r\n        exports.BAHTTEXT = null;\r\n    \r\n        exports.CHAR = function(number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return String.fromCharCode(number);\r\n        };\r\n    \r\n        exports.CLEAN = function(text) {\r\n            text = text || '';\r\n            var re = /[\\0-\\x1F]/g;\r\n            return text.replace(re, \"\");\r\n        };\r\n    \r\n        exports.CODE = function(text) {\r\n            text = text || '';\r\n            return text.charCodeAt(0);\r\n        };\r\n    \r\n        exports.CONCATENATE = function() {\r\n            var args = utils.flatten(arguments);\r\n    \r\n            var trueFound = 0;\r\n            while ((trueFound = args.indexOf(true)) > -1) {\r\n                args[trueFound] = 'TRUE';\r\n            }\r\n    \r\n            var falseFound = 0;\r\n            while ((falseFound = args.indexOf(false)) > -1) {\r\n                args[falseFound] = 'FALSE';\r\n            }\r\n    \r\n            return args.join('');\r\n        };\r\n    \r\n        exports.DBCS = null;\r\n    \r\n        exports.DOLLAR = null;\r\n    \r\n        exports.EXACT = function(text1, text2) {\r\n            return text1 === text2;\r\n        };\r\n    \r\n        exports.FIND = function(find_text, within_text, position) {\r\n            position = (position === undefined) ? 0 : position;\r\n            return within_text ? within_text.indexOf(find_text, position - 1) + 1 : null;\r\n        };\r\n    \r\n        exports.FIXED = null;\r\n    \r\n        exports.HTML2TEXT = function (value) {\r\n            var result = '';\r\n    \r\n            if (value) {\r\n                if (value instanceof Array) {\r\n                    value.forEach(function (line) {\r\n                        if (result !== '') {\r\n                          result += '\\n';\r\n                        }\r\n                        result += (line.replace(/<(?:.|\\n)*?>/gm, ''));\r\n                    });\r\n                } else {\r\n                    result = value.replace(/<(?:.|\\n)*?>/gm, '');\r\n                }\r\n            }\r\n    \r\n            return result;\r\n        };\r\n    \r\n        exports.LEFT = function(text, number) {\r\n            number = (number === undefined) ? 1 : number;\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error || typeof text !== 'string') {\r\n                return error.value;\r\n            }\r\n            return text ? text.substring(0, number) : null;\r\n        };\r\n    \r\n        exports.LEN = function(text) {\r\n            if (arguments.length === 0) {\r\n                return error.error;\r\n            }\r\n    \r\n            if (typeof text === 'string') {\r\n                return text ? text.length : 0;\r\n            }\r\n    \r\n            if (text.length) {\r\n                return text.length;\r\n            }\r\n    \r\n            return error.value;\r\n        };\r\n    \r\n        exports.LOWER = function(text) {\r\n            if (typeof text !== 'string') {\r\n                return error.value;\r\n            }\r\n            return text ? text.toLowerCase() : text;\r\n        };\r\n    \r\n        exports.MID = function(text, start, number) {\r\n            start = utils.parseNumber(start);\r\n            number = utils.parseNumber(number);\r\n            if (utils.anyIsError(start, number) || typeof text !== 'string') {\r\n                return number;\r\n            }\r\n    \r\n            var begin = start - 1;\r\n            var end = begin + number;\r\n    \r\n            return text.substring(begin, end);\r\n        };\r\n    \r\n        exports.NUMBERVALUE = null;\r\n    \r\n        exports.PRONETIC = null;\r\n    \r\n        exports.PROPER = function(text) {\r\n            if (text === undefined || text.length === 0) {\r\n                return error.value;\r\n            }\r\n            if (text === true) {\r\n                text = 'TRUE';\r\n            }\r\n            if (text === false) {\r\n                text = 'FALSE';\r\n            }\r\n            if (isNaN(text) && typeof text === 'number') {\r\n                return error.value;\r\n            }\r\n            if (typeof text === 'number') {\r\n                text = '' + text;\r\n            }\r\n    \r\n            return text.replace(/\\w\\S*/g, function(txt) {\r\n                return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\r\n            });\r\n        };\r\n    \r\n        exports.REGEXEXTRACT = function (text, regular_expression) {\r\n            var match = text.match(new RegExp(regular_expression));\r\n            return match ? (match[match.length > 1 ? match.length - 1 : 0]) : null;\r\n        };\r\n    \r\n        exports.REGEXMATCH = function (text, regular_expression, full) {\r\n            var match = text.match(new RegExp(regular_expression));\r\n            return full ? match : !!match;\r\n        };\r\n    \r\n        exports.REGEXREPLACE = function (text, regular_expression, replacement) {\r\n            return text.replace(new RegExp(regular_expression), replacement);\r\n        };\r\n    \r\n        exports.REPLACE = function(text, position, length, new_text) {\r\n            position = utils.parseNumber(position);\r\n            length = utils.parseNumber(length);\r\n            if (utils.anyIsError(position, length) ||\r\n                typeof text !== 'string' ||\r\n                typeof new_text !== 'string') {\r\n                return error.value;\r\n            }\r\n            return text.substr(0, position - 1) + new_text + text.substr(position - 1 + length);\r\n        };\r\n    \r\n        exports.REPT = function(text, number) {\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return new Array(number + 1).join(text);\r\n        };\r\n    \r\n        exports.RIGHT = function(text, number) {\r\n            number = (number === undefined) ? 1 : number;\r\n            number = utils.parseNumber(number);\r\n            if (number instanceof Error) {\r\n                return number;\r\n            }\r\n            return text ? text.substring(text.length - number) : null;\r\n        };\r\n    \r\n        exports.SEARCH = function(find_text, within_text, position) {\r\n            var foundAt;\r\n            if (typeof find_text !== 'string' || typeof within_text !== 'string') {\r\n                return error.value;\r\n            }\r\n            position = (position === undefined) ? 0 : position;\r\n            foundAt = within_text.toLowerCase().indexOf(find_text.toLowerCase(), position - 1)+1;\r\n            return (foundAt === 0)?error.value:foundAt;\r\n        };\r\n    \r\n        exports.SPLIT = function (text, separator) {\r\n            return text.split(separator);\r\n        };\r\n    \r\n        exports.SUBSTITUTE = function(text, old_text, new_text, occurrence) {\r\n            if (!text || !old_text || !new_text) {\r\n                return text;\r\n            } else if (occurrence === undefined) {\r\n                return text.replace(new RegExp(old_text, 'g'), new_text);\r\n            } else {\r\n                var index = 0;\r\n                var i = 0;\r\n                while (text.indexOf(old_text, index) > 0) {\r\n                    index = text.indexOf(old_text, index + 1);\r\n                    i++;\r\n                    if (i === occurrence) {\r\n                        return text.substring(0, index) + new_text + text.substring(index + old_text.length);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    \r\n        exports.T = function(value) {\r\n            return (typeof value === \"string\") ? value : '';\r\n        };\r\n    \r\n        exports.TEXT = null;\r\n    \r\n        exports.TRIM = function(text) {\r\n            if (typeof text !== 'string') {\r\n                return error.value;\r\n            }\r\n            return text.replace(/ +/g, ' ').trim();\r\n        };\r\n    \r\n        exports.UNICHAR = exports.CHAR;\r\n    \r\n        exports.UNICODE = exports.CODE;\r\n    \r\n        exports.UPPER = function(text) {\r\n            if (typeof text !== 'string') {\r\n                return error.value;\r\n            }\r\n            return text.toUpperCase();\r\n        };\r\n    \r\n        exports.VALUE = null;\r\n    \r\n        return exports;\r\n    })();\r\n    \r\n    jexcel.methods.stats = (function() {\r\n        var exports = {};\r\n    \r\n        var SQRT2PI = 2.5066282746310002;\r\n    \r\n        exports.AVEDEV = null;\r\n    \r\n        exports.AVERAGE = function() {\r\n            var range = utils.numbers(utils.flatten(arguments));\r\n            var n = range.length;\r\n            var sum = 0;\r\n            var count = 0;\r\n            for (var i = 0; i < n; i++) {\r\n                sum += range[i];\r\n                count += 1;\r\n            }\r\n            return sum / count;\r\n        };\r\n    \r\n        exports.AVERAGEA = function() {\r\n            var range = utils.flatten(arguments);\r\n            var n = range.length;\r\n            var sum = 0;\r\n            var count = 0;\r\n            for (var i = 0; i < n; i++) {\r\n                var el = range[i];\r\n                if (typeof el === 'number') {\r\n                    sum += el;\r\n                }\r\n                if (el === true) {\r\n                    sum++;\r\n                }\r\n                if (el !== null) {\r\n                    count++;\r\n                }\r\n            }\r\n            return sum / count;\r\n        };\r\n    \r\n        exports.AVERAGEIF = function(range, criteria, average_range) {\r\n            average_range = average_range || range;\r\n            range = utils.flatten(range);\r\n            average_range = utils.parseNumberArray(utils.flatten(average_range));\r\n            if (average_range instanceof Error) {\r\n                return average_range;\r\n            }\r\n            var average_count = 0;\r\n            var result = 0;\r\n            for (var i = 0; i < range.length; i++) {\r\n                if (eval(range[i] + criteria)) { // jshint ignore:line\r\n                    result += average_range[i];\r\n                    average_count++;\r\n                }\r\n            }\r\n            return result / average_count;\r\n        };\r\n    \r\n        exports.AVERAGEIFS = null;\r\n    \r\n        exports.COUNT = function() {\r\n            return utils.numbers(utils.flatten(arguments)).length;\r\n        };\r\n    \r\n        exports.COUNTA = function() {\r\n            var range = utils.flatten(arguments);\r\n            return range.length - exports.COUNTBLANK(range);\r\n        };\r\n    \r\n        exports.COUNTIN = function (range, value) {\r\n            var result = 0;\r\n            for (var i = 0; i < range.length; i++) {\r\n                if (range[i] === value) {\r\n                    result++;\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.COUNTBLANK = function() {\r\n            var range = utils.flatten(arguments);\r\n            var blanks = 0;\r\n            var element;\r\n            for (var i = 0; i < range.length; i++) {\r\n                element = range[i];\r\n                if (element === null || element === '') {\r\n                    blanks++;\r\n                }\r\n            }\r\n            return blanks;\r\n        };\r\n    \r\n        exports.COUNTIF = function(range, criteria) {\r\n            range = utils.flatten(range);\r\n            if (!/[<>=!]/.test(criteria)) {\r\n                criteria = '==\"' + criteria + '\"';\r\n            }\r\n            var matches = 0;\r\n            for (var i = 0; i < range.length; i++) {\r\n                if (typeof range[i] !== 'string') {\r\n                    if (eval(range[i] + criteria)) { // jshint ignore:line\r\n                        matches++;\r\n                    }\r\n                } else {\r\n                    if (eval('\"' + range[i] + '\"' + criteria)) { // jshint ignore:line\r\n                        matches++;\r\n                    }\r\n                }\r\n            }\r\n            return matches;\r\n        };\r\n    \r\n        exports.COUNTIFS = function() {\r\n            var args = utils.argsToArray(arguments);\r\n            var results = new Array(utils.flatten(args[0]).length);\r\n            for (var i = 0; i < results.length; i++) {\r\n                results[i] = true;\r\n            }\r\n            for (i = 0; i < args.length; i += 2) {\r\n                var range = utils.flatten(args[i]);\r\n                var criteria = args[i + 1];\r\n                if (!/[<>=!]/.test(criteria)) {\r\n                    criteria = '==\"' + criteria + '\"';\r\n                }\r\n                for (var j = 0; j < range.length; j++) {\r\n                    if (typeof range[j] !== 'string') {\r\n                        results[j] = results[j] && eval(range[j] + criteria); // jshint ignore:line\r\n                    } else {\r\n                        results[j] = results[j] && eval('\"' + range[j] + '\"' + criteria); // jshint ignore:line\r\n                    }\r\n                }\r\n            }\r\n            var result = 0;\r\n            for (i = 0; i < results.length; i++) {\r\n                if (results[i]) {\r\n                    result++;\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.COUNTUNIQUE = function () {\r\n            return UNIQUE.apply(null, utils.flatten(arguments)).length;\r\n        };\r\n    \r\n        exports.FISHER = function(x) {\r\n            x = utils.parseNumber(x);\r\n            if (x instanceof Error) {\r\n                return x;\r\n            }\r\n            return Math.log((1 + x) / (1 - x)) / 2;\r\n        };\r\n    \r\n        exports.FISHERINV = function(y) {\r\n            y = utils.parseNumber(y);\r\n            if (y instanceof Error) {\r\n                return y;\r\n            }\r\n            var e2y = Math.exp(2 * y);\r\n            return (e2y - 1) / (e2y + 1);\r\n        };\r\n    \r\n        exports.FREQUENCY = function(data, bins) {\r\n            data = utils.parseNumberArray(utils.flatten(data));\r\n            bins = utils.parseNumberArray(utils.flatten(bins));\r\n            if (utils.anyIsError(data, bins)) {\r\n                return error.value;\r\n            }\r\n            var n = data.length;\r\n            var b = bins.length;\r\n            var r = [];\r\n            for (var i = 0; i <= b; i++) {\r\n                r[i] = 0;\r\n                for (var j = 0; j < n; j++) {\r\n                    if (i === 0) {\r\n                        if (data[j] <= bins[0]) {\r\n                            r[0] += 1;\r\n                        }\r\n                    } else if (i < b) {\r\n                        if (data[j] > bins[i - 1] && data[j] <= bins[i]) {\r\n                            r[i] += 1;\r\n                        }\r\n                    } else if (i === b) {\r\n                        if (data[j] > bins[b - 1]) {\r\n                            r[b] += 1;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return r;\r\n        };\r\n    \r\n        exports.LARGE = function(range, k) {\r\n            range = utils.parseNumberArray(utils.flatten(range));\r\n            k = utils.parseNumber(k);\r\n            if (utils.anyIsError(range, k)) {\r\n                return range;\r\n            }\r\n            return range.sort(function(a, b) {\r\n                return b - a;\r\n            })[k - 1];\r\n        };\r\n    \r\n        exports.MAX = function() {\r\n            var range = utils.numbers(utils.flatten(arguments));\r\n            return (range.length === 0) ? 0 : Math.max.apply(Math, range);\r\n        };\r\n    \r\n        exports.MAXA = function() {\r\n            var range = utils.arrayValuesToNumbers(utils.flatten(arguments));\r\n            return (range.length === 0) ? 0 : Math.max.apply(Math, range);\r\n        };\r\n    \r\n        exports.MIN = function() {\r\n            var range = utils.numbers(utils.flatten(arguments));\r\n            return (range.length === 0) ? 0 : Math.min.apply(Math, range);\r\n        };\r\n    \r\n        exports.MINA = function() {\r\n            var range = utils.arrayValuesToNumbers(utils.flatten(arguments));\r\n            return (range.length === 0) ? 0 : Math.min.apply(Math, range);\r\n        };\r\n    \r\n        exports.MODE = {};\r\n    \r\n        exports.MODE.MULT = function() {\r\n            // Credits: Roönaän\r\n            var range = utils.parseNumberArray(utils.flatten(arguments));\r\n            if (range instanceof Error) {\r\n                return range;\r\n            }\r\n            var n = range.length;\r\n            var count = {};\r\n            var maxItems = [];\r\n            var max = 0;\r\n            var currentItem;\r\n    \r\n            for (var i = 0; i < n; i++) {\r\n                currentItem = range[i];\r\n                count[currentItem] = count[currentItem] ? count[currentItem] + 1 : 1;\r\n                if (count[currentItem] > max) {\r\n                    max = count[currentItem];\r\n                    maxItems = [];\r\n                }\r\n                if (count[currentItem] === max) {\r\n                    maxItems[maxItems.length] = currentItem;\r\n                }\r\n            }\r\n            return maxItems;\r\n        };\r\n    \r\n        exports.MODE.SNGL = function() {\r\n            var range = utils.parseNumberArray(utils.flatten(arguments));\r\n            if (range instanceof Error) {\r\n                return range;\r\n            }\r\n            return exports.MODE.MULT(range).sort(function(a, b) {\r\n                return a - b;\r\n            })[0];\r\n        };\r\n    \r\n        exports.PERCENTILE = {};\r\n    \r\n        exports.PERCENTILE.EXC = function(array, k) {\r\n            array = utils.parseNumberArray(utils.flatten(array));\r\n            k = utils.parseNumber(k);\r\n            if (utils.anyIsError(array, k)) {\r\n                return error.value;\r\n            }\r\n            array = array.sort(function(a, b) {\r\n                {\r\n                    return a - b;\r\n                }\r\n            });\r\n            var n = array.length;\r\n            if (k < 1 / (n + 1) || k > 1 - 1 / (n + 1)) {\r\n                return error.num;\r\n            }\r\n            var l = k * (n + 1) - 1;\r\n            var fl = Math.floor(l);\r\n            return utils.cleanFloat((l === fl) ? array[l] : array[fl] + (l - fl) * (array[fl + 1] - array[fl]));\r\n        };\r\n    \r\n        exports.PERCENTILE.INC = function(array, k) {\r\n            array = utils.parseNumberArray(utils.flatten(array));\r\n            k = utils.parseNumber(k);\r\n            if (utils.anyIsError(array, k)) {\r\n                return error.value;\r\n            }\r\n            array = array.sort(function(a, b) {\r\n                return a - b;\r\n            });\r\n            var n = array.length;\r\n            var l = k * (n - 1);\r\n            var fl = Math.floor(l);\r\n            return utils.cleanFloat((l === fl) ? array[l] : array[fl] + (l - fl) * (array[fl + 1] - array[fl]));\r\n        };\r\n    \r\n        exports.PERCENTRANK = {};\r\n    \r\n        exports.PERCENTRANK.EXC = function(array, x, significance) {\r\n            significance = (significance === undefined) ? 3 : significance;\r\n            array = utils.parseNumberArray(utils.flatten(array));\r\n            x = utils.parseNumber(x);\r\n            significance = utils.parseNumber(significance);\r\n            if (utils.anyIsError(array, x, significance)) {\r\n                return error.value;\r\n            }\r\n            array = array.sort(function(a, b) {\r\n                return a - b;\r\n            });\r\n            var uniques = UNIQUE.apply(null, array);\r\n            var n = array.length;\r\n            var m = uniques.length;\r\n            var power = Math.pow(10, significance);\r\n            var result = 0;\r\n            var match = false;\r\n            var i = 0;\r\n            while (!match && i < m) {\r\n                if (x === uniques[i]) {\r\n                    result = (array.indexOf(uniques[i]) + 1) / (n + 1);\r\n                    match = true;\r\n                } else if (x >= uniques[i] && (x < uniques[i + 1] || i === m - 1)) {\r\n                    result = (array.indexOf(uniques[i]) + 1 + (x - uniques[i]) / (uniques[i + 1] - uniques[i])) / (n + 1);\r\n                    match = true;\r\n                }\r\n                i++;\r\n            }\r\n            return Math.floor(result * power) / power;\r\n        };\r\n    \r\n        exports.PERCENTRANK.INC = function(array, x, significance) {\r\n            significance = (significance === undefined) ? 3 : significance;\r\n            array = utils.parseNumberArray(utils.flatten(array));\r\n            x = utils.parseNumber(x);\r\n            significance = utils.parseNumber(significance);\r\n            if (utils.anyIsError(array, x, significance)) {\r\n                return error.value;\r\n            }\r\n            array = array.sort(function(a, b) {\r\n                return a - b;\r\n            });\r\n            var uniques = UNIQUE.apply(null, array);\r\n            var n = array.length;\r\n            var m = uniques.length;\r\n            var power = Math.pow(10, significance);\r\n            var result = 0;\r\n            var match = false;\r\n            var i = 0;\r\n            while (!match && i < m) {\r\n                if (x === uniques[i]) {\r\n                    result = array.indexOf(uniques[i]) / (n - 1);\r\n                    match = true;\r\n                } else if (x >= uniques[i] && (x < uniques[i + 1] || i === m - 1)) {\r\n                    result = (array.indexOf(uniques[i]) + (x - uniques[i]) / (uniques[i + 1] - uniques[i])) / (n - 1);\r\n                    match = true;\r\n                }\r\n                i++;\r\n            }\r\n            return Math.floor(result * power) / power;\r\n        };\r\n    \r\n        exports.PERMUT = function(number, number_chosen) {\r\n            number = utils.parseNumber(number);\r\n            number_chosen = utils.parseNumber(number_chosen);\r\n            if (utils.anyIsError(number, number_chosen)) {\r\n                return error.value;\r\n            }\r\n            return FACT(number) / FACT(number - number_chosen);\r\n        };\r\n    \r\n        exports.PERMUTATIONA = function(number, number_chosen) {\r\n            number = utils.parseNumber(number);\r\n            number_chosen = utils.parseNumber(number_chosen);\r\n            if (utils.anyIsError(number, number_chosen)) {\r\n                return error.value;\r\n            }\r\n            return Math.pow(number, number_chosen);\r\n        };\r\n    \r\n        exports.PHI = function(x) {\r\n            x = utils.parseNumber(x);\r\n            if (x instanceof Error) {\r\n                return error.value;\r\n            }\r\n            return Math.exp(-0.5 * x * x) / SQRT2PI;\r\n        };\r\n    \r\n        exports.PROB = function(range, probability, lower, upper) {\r\n            if (lower === undefined) {\r\n                return 0;\r\n            }\r\n            upper = (upper === undefined) ? lower : upper;\r\n    \r\n            range = utils.parseNumberArray(utils.flatten(range));\r\n            probability = utils.parseNumberArray(utils.flatten(probability));\r\n            lower = utils.parseNumber(lower);\r\n            upper = utils.parseNumber(upper);\r\n            if (utils.anyIsError(range, probability, lower, upper)) {\r\n                return error.value;\r\n            }\r\n    \r\n            if (lower === upper) {\r\n                return (range.indexOf(lower) >= 0) ? probability[range.indexOf(lower)] : 0;\r\n            }\r\n    \r\n            var sorted = range.sort(function(a, b) {\r\n                return a - b;\r\n            });\r\n            var n = sorted.length;\r\n            var result = 0;\r\n            for (var i = 0; i < n; i++) {\r\n                if (sorted[i] >= lower && sorted[i] <= upper) {\r\n                    result += probability[range.indexOf(sorted[i])];\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        exports.QUARTILE = {};\r\n    \r\n        exports.QUARTILE.EXC = function(range, quart) {\r\n            range = utils.parseNumberArray(utils.flatten(range));\r\n            quart = utils.parseNumber(quart);\r\n            if (utils.anyIsError(range, quart)) {\r\n                return error.value;\r\n            }\r\n            switch (quart) {\r\n                case 1:\r\n                    return exports.PERCENTILE.EXC(range, 0.25);\r\n                case 2:\r\n                    return exports.PERCENTILE.EXC(range, 0.5);\r\n                case 3:\r\n                    return exports.PERCENTILE.EXC(range, 0.75);\r\n                default:\r\n                    return error.num;\r\n            }\r\n        };\r\n    \r\n        exports.QUARTILE.INC = function(range, quart) {\r\n            range = utils.parseNumberArray(utils.flatten(range));\r\n            quart = utils.parseNumber(quart);\r\n            if (utils.anyIsError(range, quart)) {\r\n                return error.value;\r\n            }\r\n            switch (quart) {\r\n                case 1:\r\n                    return exports.PERCENTILE.INC(range, 0.25);\r\n                case 2:\r\n                    return exports.PERCENTILE.INC(range, 0.5);\r\n                case 3:\r\n                    return exports.PERCENTILE.INC(range, 0.75);\r\n                default:\r\n                    return error.num;\r\n            }\r\n        };\r\n    \r\n        exports.RANK = {};\r\n    \r\n        exports.RANK.AVG = function(number, range, order) {\r\n            number = utils.parseNumber(number);\r\n            range = utils.parseNumberArray(utils.flatten(range));\r\n            if (utils.anyIsError(number, range)) {\r\n                return error.value;\r\n            }\r\n            range = utils.flatten(range);\r\n            order = order || false;\r\n            var sort = (order) ? function(a, b) {\r\n                return a - b;\r\n            } : function(a, b) {\r\n                return b - a;\r\n            };\r\n            range = range.sort(sort);\r\n    \r\n            var length = range.length;\r\n            var count = 0;\r\n            for (var i = 0; i < length; i++) {\r\n                if (range[i] === number) {\r\n                    count++;\r\n                }\r\n            }\r\n    \r\n            return (count > 1) ? (2 * range.indexOf(number) + count + 1) / 2 : range.indexOf(number) + 1;\r\n        };\r\n    \r\n        exports.RANK.EQ = function(number, range, order) {\r\n            number = utils.parseNumber(number);\r\n            range = utils.parseNumberArray(utils.flatten(range));\r\n            if (utils.anyIsError(number, range)) {\r\n                return error.value;\r\n            }\r\n            order = order || false;\r\n            var sort = (order) ? function(a, b) {\r\n                return a - b;\r\n            } : function(a, b) {\r\n                return b - a;\r\n            };\r\n            range = range.sort(sort);\r\n            return range.indexOf(number) + 1;\r\n        };\r\n    \r\n        exports.RSQ = function(data_x, data_y) { // no need to flatten here, PEARSON will take care of that\r\n            data_x = utils.parseNumberArray(utils.flatten(data_x));\r\n            data_y = utils.parseNumberArray(utils.flatten(data_y));\r\n            if (utils.anyIsError(data_x, data_y)) {\r\n                return error.value;\r\n            }\r\n            return Math.pow(exports.PEARSON(data_x, data_y), 2);\r\n        };\r\n    \r\n        exports.SMALL = function(range, k) {\r\n            range = utils.parseNumberArray(utils.flatten(range));\r\n            k = utils.parseNumber(k);\r\n            if (utils.anyIsError(range, k)) {\r\n                return range;\r\n            }\r\n            return range.sort(function(a, b) {\r\n                return a - b;\r\n            })[k - 1];\r\n        };\r\n    \r\n        exports.STANDARDIZE = function(x, mean, sd) {\r\n            x = utils.parseNumber(x);\r\n            mean = utils.parseNumber(mean);\r\n            sd = utils.parseNumber(sd);\r\n            if (utils.anyIsError(x, mean, sd)) {\r\n                return error.value;\r\n            }\r\n            return (x - mean) / sd;\r\n        };\r\n    \r\n        exports.STDEV = {};\r\n    \r\n        exports.STDEV.P = function() {\r\n            var v = exports.VAR.P.apply(this, arguments);\r\n            return Math.sqrt(v);\r\n        };\r\n    \r\n        exports.STDEV.S = function() {\r\n            var v = exports.VAR.S.apply(this, arguments);\r\n            return Math.sqrt(v);\r\n        };\r\n    \r\n        exports.STDEVA = function() {\r\n            var v = exports.VARA.apply(this, arguments);\r\n            return Math.sqrt(v);\r\n        };\r\n    \r\n        exports.STDEVPA = function() {\r\n            var v = exports.VARPA.apply(this, arguments);\r\n            return Math.sqrt(v);\r\n        };\r\n    \r\n        exports.VAR = {};\r\n    \r\n        exports.VAR.P = function() {\r\n            var range = utils.numbers(utils.flatten(arguments));\r\n            var n = range.length;\r\n            var sigma = 0;\r\n            var mean = exports.AVERAGE(range);\r\n            for (var i = 0; i < n; i++) {\r\n                sigma += Math.pow(range[i] - mean, 2);\r\n            }\r\n            return sigma / n;\r\n        };\r\n    \r\n        exports.VAR.S = function() {\r\n            var range = utils.numbers(utils.flatten(arguments));\r\n            var n = range.length;\r\n            var sigma = 0;\r\n            var mean = exports.AVERAGE(range);\r\n            for (var i = 0; i < n; i++) {\r\n                sigma += Math.pow(range[i] - mean, 2);\r\n            }\r\n            return sigma / (n - 1);\r\n        };\r\n    \r\n        exports.VARA = function() {\r\n            var range = utils.flatten(arguments);\r\n            var n = range.length;\r\n            var sigma = 0;\r\n            var count = 0;\r\n            var mean = exports.AVERAGEA(range);\r\n            for (var i = 0; i < n; i++) {\r\n                var el = range[i];\r\n                if (typeof el === 'number') {\r\n                    sigma += Math.pow(el - mean, 2);\r\n                } else if (el === true) {\r\n                    sigma += Math.pow(1 - mean, 2);\r\n                } else {\r\n                    sigma += Math.pow(0 - mean, 2);\r\n                }\r\n    \r\n                if (el !== null) {\r\n                    count++;\r\n                }\r\n            }\r\n            return sigma / (count - 1);\r\n        };\r\n    \r\n        exports.VARPA = function() {\r\n            var range = utils.flatten(arguments);\r\n            var n = range.length;\r\n            var sigma = 0;\r\n            var count = 0;\r\n            var mean = exports.AVERAGEA(range);\r\n            for (var i = 0; i < n; i++) {\r\n                var el = range[i];\r\n                if (typeof el === 'number') {\r\n                    sigma += Math.pow(el - mean, 2);\r\n                } else if (el === true) {\r\n                    sigma += Math.pow(1 - mean, 2);\r\n                } else {\r\n                    sigma += Math.pow(0 - mean, 2);\r\n                }\r\n    \r\n                if (el !== null) {\r\n                    count++;\r\n                }\r\n            }\r\n            return sigma / count;\r\n        };\r\n    \r\n        exports.WEIBULL = {};\r\n    \r\n        exports.WEIBULL.DIST = function(x, alpha, beta, cumulative) {\r\n            x = utils.parseNumber(x);\r\n            alpha = utils.parseNumber(alpha);\r\n            beta = utils.parseNumber(beta);\r\n            if (utils.anyIsError(x, alpha, beta)) {\r\n                return error.value;\r\n            }\r\n            return (cumulative) ? 1 - Math.exp(-Math.pow(x / beta, alpha)) : Math.pow(x, alpha - 1) * Math.exp(-Math.pow(x / beta, alpha)) * alpha / Math.pow(beta, alpha);\r\n        };\r\n    \r\n        exports.Z = {};\r\n    \r\n        exports.Z.TEST = function(range, x, sd) {\r\n            range = utils.parseNumberArray(utils.flatten(range));\r\n            x = utils.parseNumber(x);\r\n            if (utils.anyIsError(range, x)) {\r\n                return error.value;\r\n            }\r\n    \r\n            sd = sd || exports.STDEV.S(range);\r\n            var n = range.length;\r\n            return 1 - exports.NORM.S.DIST((exports.AVERAGE(range) - x) / (sd / Math.sqrt(n)), true);\r\n        };\r\n    \r\n        return exports;\r\n    })();\r\n\r\n    jexcel.methods.utils = (function() {\r\n        var exports = {};\r\n\r\n        exports.PROGRESS = function(p, c) {\r\n            var color = c ? c : 'red';\r\n            var value = p ? p : '0';\r\n\r\n            return '<div style=\"width:' + value + '%;height:4px;background-color:' + color + ';margin-top:1px;\"></div>';\r\n        };\r\n\r\n        exports.RATING = function(v) {\r\n            var html = '<div class=\"jrating\">';\r\n            for (var i = 0; i < 5; i++) {\r\n                if (i < v) {\r\n                    html += '<div class=\"jrating-selected\"></div>';\r\n                } else {\r\n                    html += '<div></div>';\r\n                }\r\n            }\r\n            html += '</div>';\r\n            return html;\r\n        }\r\n\r\n        return exports;\r\n    })();\r\n\r\n    for (var i = 0; i < Object.keys(jexcel.methods).length; i++) {\r\n        var methods = jexcel.methods[Object.keys(jexcel.methods)[i]];\r\n        for (var j = 0; j < Object.keys(methods).length; j++) {\r\n            if (typeof(methods[Object.keys(methods)[j]]) == 'function') {\r\n                window[Object.keys(methods)[j]] = methods[Object.keys(methods)[j]];\r\n            } else {\r\n                window[Object.keys(methods)[j]] = function() {\r\n                    return Object.keys(methods)[j] + 'Not implemented';\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return jexcel;\r\n})));\r\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(281), __webpack_require__(281)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvamV4Y2VsL2Rpc3QvamV4Y2VsLmpzPzAxNzkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQixVQUFlO0FBQ2hDLGtCQUFrQixtQkFBTyxDQUFDLEdBQVM7QUFDbkMsSUFBSSxtQkFBTyxDQUFDLEdBQTBCO0FBQ3RDOztBQUVBLENBQUM7QUFDRCxJQUFJLEtBQTREO0FBQ2hFLElBQUksU0FDK0M7QUFDbkQsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLFFBQVE7QUFDOUI7QUFDQSxzQkFBc0IsUUFBUTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxFQUFFLEtBQUssRUFBRTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7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cUI7QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFB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QUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtCQUErQixPQUFPO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLFFBQVE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlEQUFpRCxPQUFPO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUNB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QTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDJCQUEyQixtQkFBbUI7QUFDOUM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNB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QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkJBQTJCLGtCQUFrQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0JBQStCLGtCQUFrQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0Isa0JBQWtCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMkJBQTJCLElBQUk7QUFDL0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDJCQUEyQixLQUFLO0FBQ2hDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQkFBMkIsSUFBSTtBQUMvQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixLQUFLO0FBQ3BDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLEtBQUs7QUFDcEM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsS0FBSztBQUNwQztBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJCQUEyQixzQkFBc0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsMkJBQTJCLGlCQUFpQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsS0FBSztBQUM5QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixLQUFLO0FBQzlCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLEtBQUs7QUFDOUI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCLFVBQVU7QUFDekM7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLFVBQVU7QUFDekM7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixjQUFjO0FBQ3pDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixhQUFhO0FBQ3hDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsMkJBQTJCLE9BQU87QUFDbEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsbUJBQW1CO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG1CQUFtQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsbUJBQW1CO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixPQUFPO0FBQ2xDO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSwyQkFBMkIsaUJBQWlCO0FBQzVDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG1CQUFtQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixtQkFBbUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixtQkFBbUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJCQUEyQixtQkFBbUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJCQUEyQixLQUFLO0FBQ2hDOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlCQUFpQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsaUJBQWlCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlCQUFpQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVDQUF1QyxxQkFBcUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsNEJBQTRCLElBQUksY0FBYyxJQUFJLGNBQWMsSUFBSTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBLGlFQUFpRSxpQkFBaUI7QUFDbEY7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixpQkFBaUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlCQUFpQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHlCQUF5QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixxQkFBcUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0JBQWtCO0FBQzdDLHFFQUFxRTtBQUNyRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLDJCQUEyQixzQkFBc0I7QUFDakQ7QUFDQTtBQUNBLCtCQUErQixpQkFBaUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLFlBQVk7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsb0JBQW9CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixvQkFBb0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLG9CQUFvQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQkFBMkIsc0JBQXNCO0FBQ2pEO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0IsbUJBQW1CO0FBQ2xEO0FBQ0EscUNBQXFDLE9BQU87QUFDNUM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGlCQUFpQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsT0FBTztBQUNsQztBQUNBO0FBQ0E7QUFDQTtB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QUVBO0FBQ0EsQ0FBQyIsImZpbGUiOiI3MTAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogSnNwcmVhZHNoZWV0IHY0LjYuMFxyXG4gKlxyXG4gKiBXZWJzaXRlOiBodHRwczovL2Jvc3Nhbm92YS51ay9qc3ByZWFkc2hlZXQvXHJcbiAqIERlc2NyaXB0aW9uOiBDcmVhdGUgYW1hemluZyB3ZWIgYmFzZWQgc3ByZWFkc2hlZXRzLlxyXG4gKlxyXG4gKiBUaGlzIHNvZnR3YXJlIGlzIGRpc3RyaWJ1dGUgdW5kZXIgTUlUIExpY2Vuc2VcclxuICovXHJcblxyXG5jb25zb2xlLmxvZygnSmV4Y2VsIGhhcyBiZWVuIHJlbmFtZWQgdG8gSnNwcmVhZHNoZWV0LiBQbGVhc2UgdXNlOiBucG0gaW5zdGFsbCBqc3ByZWFkc2hlZXQtY2UnKVxyXG5pZiAoISBqU3VpdGVzICYmIHR5cGVvZihyZXF1aXJlKSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgdmFyIGpTdWl0ZXMgPSByZXF1aXJlKCdqc3VpdGVzJyk7XHJcbiAgICByZXF1aXJlKCdqc3VpdGVzL2Rpc3QvanN1aXRlcy5jc3MnKTtcclxufVxyXG5cclxuOyhmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XHJcbiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XHJcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxyXG4gICAgZ2xvYmFsLmpzcHJlYWRzaGVldCA9IGdsb2JhbC5qZXhjZWwgPSBmYWN0b3J5KCk7XHJcbn0odGhpcywgKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLy8gSnNwcmVhZHNoZWV0IGNvcmUgb2JqZWN0XHJcblxyXG4gICAgdmFyIGpleGNlbCA9IChmdW5jdGlvbihlbCwgb3B0aW9ucykge1xyXG4gICAgICAgIC8vIENyZWF0ZSBqZXhjZWwgb2JqZWN0XHJcbiAgICAgICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgICAgIG9iai5vcHRpb25zID0ge307XHJcblxyXG4gICAgICAgIGlmICghIChlbCBpbnN0YW5jZW9mIEVsZW1lbnQgfHwgZWwgaW5zdGFuY2VvZiBIVE1MRG9jdW1lbnQpKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0pzcHJlYWRzaGVldDogZWwgaXMgbm90IGEgdmFsaWQgRE9NIGVsZW1lbnQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZWwudGFnTmFtZSA9PSAnVEFCTEUnKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zID0gamV4Y2VsLmNyZWF0ZUZyb21UYWJsZShlbCwgb3B0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGVsLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRpdiwgZWwpO1xyXG4gICAgICAgICAgICAgICAgZWwucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICBlbCA9IGRpdjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0pzcHJlYWRzaGVldDogZWwgaXMgbm90IGEgdmFsaWQgRE9NIGVsZW1lbnQnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTG9hZGluZyBkZWZhdWx0IGNvbmZpZ3VyYXRpb25cclxuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIC8vIEV4dGVybmFsIGRhdGFcclxuICAgICAgICAgICAgdXJsOm51bGwsXHJcbiAgICAgICAgICAgIC8vIEFqYXggb3B0aW9uc1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICByZXF1ZXN0VmFyaWFibGVzOiBudWxsLFxyXG4gICAgICAgICAgICAvLyBEYXRhXHJcbiAgICAgICAgICAgIGRhdGE6bnVsbCxcclxuICAgICAgICAgICAgLy8gQ3VzdG9tIHNvcnRpbmcgaGFuZGxlclxyXG4gICAgICAgICAgICBzb3J0aW5nOm51bGwsXHJcbiAgICAgICAgICAgIC8vIENvcHkgYmVoYXZpb3JcclxuICAgICAgICAgICAgY29weUNvbXBhdGliaWxpdHk6ZmFsc2UsXHJcbiAgICAgICAgICAgIHJvb3Q6bnVsbCxcclxuICAgICAgICAgICAgLy8gUm93cyBhbmQgY29sdW1ucyBkZWZpbml0aW9uc1xyXG4gICAgICAgICAgICByb3dzOltdLFxyXG4gICAgICAgICAgICBjb2x1bW5zOltdLFxyXG4gICAgICAgICAgICAvLyBEZXByZWN0ZWQgbGVnYWN5IG9wdGlvbnNcclxuICAgICAgICAgICAgY29sSGVhZGVyczpbXSxcclxuICAgICAgICAgICAgY29sV2lkdGhzOltdLFxyXG4gICAgICAgICAgICBjb2xBbGlnbm1lbnRzOltdLFxyXG4gICAgICAgICAgICBuZXN0ZWRIZWFkZXJzOm51bGwsXHJcbiAgICAgICAgICAgIC8vIENvbHVtbiB3aWR0aCB0aGF0IGlzIHVzZWQgYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICBkZWZhdWx0Q29sV2lkdGg6NTAsXHJcbiAgICAgICAgICAgIGRlZmF1bHRDb2xBbGlnbjonY2VudGVyJyxcclxuICAgICAgICAgICAgLy8gU3BhcmUgcm93cyBhbmQgY29sdW1uc1xyXG4gICAgICAgICAgICBtaW5TcGFyZVJvd3M6MCxcclxuICAgICAgICAgICAgbWluU3BhcmVDb2xzOjAsXHJcbiAgICAgICAgICAgIC8vIE1pbmltYWwgdGFibGUgZGltZW5zaW9uc1xyXG4gICAgICAgICAgICBtaW5EaW1lbnNpb25zOlswLDBdLFxyXG4gICAgICAgICAgICAvLyBBbGxvdyBFeHBvcnRcclxuICAgICAgICAgICAgYWxsb3dFeHBvcnQ6dHJ1ZSxcclxuICAgICAgICAgICAgLy8gQHR5cGUge2Jvb2xlYW59IC0gSW5jbHVkZSB0aGUgaGVhZGVyIHRpdGxlcyBvbiBkb3dubG9hZFxyXG4gICAgICAgICAgICBpbmNsdWRlSGVhZGVyc09uRG93bmxvYWQ6ZmFsc2UsXHJcbiAgICAgICAgICAgIC8vIEB0eXBlIHtib29sZWFufSAtIEluY2x1ZGUgdGhlIGhlYWRlciB0aXRsZXMgb24gY29weVxyXG4gICAgICAgICAgICBpbmNsdWRlSGVhZGVyc09uQ29weTpmYWxzZSxcclxuICAgICAgICAgICAgLy8gQWxsb3cgY29sdW1uIHNvcnRpbmdcclxuICAgICAgICAgICAgY29sdW1uU29ydGluZzp0cnVlLFxyXG4gICAgICAgICAgICAvLyBBbGxvdyBjb2x1bW4gZHJhZ2dpbmdcclxuICAgICAgICAgICAgY29sdW1uRHJhZzpmYWxzZSxcclxuICAgICAgICAgICAgLy8gQWxsb3cgY29sdW1uIHJlc2l6aW5nXHJcbiAgICAgICAgICAgIGNvbHVtblJlc2l6ZTp0cnVlLFxyXG4gICAgICAgICAgICAvLyBBbGxvdyByb3cgcmVzaXppbmdcclxuICAgICAgICAgICAgcm93UmVzaXplOmZhbHNlLFxyXG4gICAgICAgICAgICAvLyBBbGxvdyByb3cgZHJhZ2dpbmdcclxuICAgICAgICAgICAgcm93RHJhZzp0cnVlLFxyXG4gICAgICAgICAgICAvLyBBbGxvdyB0YWJsZSBlZGl0aW9uXHJcbiAgICAgICAgICAgIGVkaXRhYmxlOnRydWUsXHJcbiAgICAgICAgICAgIC8vIEFsbG93IG5ldyByb3dzXHJcbiAgICAgICAgICAgIGFsbG93SW5zZXJ0Um93OnRydWUsXHJcbiAgICAgICAgICAgIC8vIEFsbG93IG5ldyByb3dzXHJcbiAgICAgICAgICAgIGFsbG93TWFudWFsSW5zZXJ0Um93OnRydWUsXHJcbiAgICAgICAgICAgIC8vIEFsbG93IG5ldyBjb2x1bW5zXHJcbiAgICAgICAgICAgIGFsbG93SW5zZXJ0Q29sdW1uOnRydWUsXHJcbiAgICAgICAgICAgIC8vIEFsbG93IG5ldyByb3dzXHJcbiAgICAgICAgICAgIGFsbG93TWFudWFsSW5zZXJ0Q29sdW1uOnRydWUsXHJcbiAgICAgICAgICAgIC8vIEFsbG93IHJvdyBkZWxldGVcclxuICAgICAgICAgICAgYWxsb3dEZWxldGVSb3c6dHJ1ZSxcclxuICAgICAgICAgICAgLy8gQWxsb3cgZGVsZXRpbmcgb2YgYWxsIHJvd3NcclxuICAgICAgICAgICAgYWxsb3dEZWxldGluZ0FsbFJvd3M6ZmFsc2UsXHJcbiAgICAgICAgICAgIC8vIEFsbG93IGNvbHVtbiBkZWxldGVcclxuICAgICAgICAgICAgYWxsb3dEZWxldGVDb2x1bW46dHJ1ZSxcclxuICAgICAgICAgICAgLy8gQWxsb3cgcmVuYW1lIGNvbHVtblxyXG4gICAgICAgICAgICBhbGxvd1JlbmFtZUNvbHVtbjp0cnVlLFxyXG4gICAgICAgICAgICAvLyBBbGxvdyBjb21tZW50c1xyXG4gICAgICAgICAgICBhbGxvd0NvbW1lbnRzOmZhbHNlLFxyXG4gICAgICAgICAgICAvLyBHbG9iYWwgd3JhcFxyXG4gICAgICAgICAgICB3b3JkV3JhcDpmYWxzZSxcclxuICAgICAgICAgICAgLy8gSW1hZ2Ugb3B0aW9uc1xyXG4gICAgICAgICAgICBpbWFnZU9wdGlvbnM6IG51bGwsXHJcbiAgICAgICAgICAgIC8vIENTViBzb3VyY2VcclxuICAgICAgICAgICAgY3N2Om51bGwsXHJcbiAgICAgICAgICAgIC8vIEZpbGVuYW1lXHJcbiAgICAgICAgICAgIGNzdkZpbGVOYW1lOidqZXhjZWwnLFxyXG4gICAgICAgICAgICAvLyBDb25zaWRlciBmaXJzdCBsaW5lIGFzIGhlYWRlclxyXG4gICAgICAgICAgICBjc3ZIZWFkZXJzOnRydWUsXHJcbiAgICAgICAgICAgIC8vIERlbGltaXRlcnNcclxuICAgICAgICAgICAgY3N2RGVsaW1pdGVyOicsJyxcclxuICAgICAgICAgICAgLy8gRmlyc3Qgcm93IGFzIGhlYWRlclxyXG4gICAgICAgICAgICBwYXJzZVRhYmxlRmlyc3RSb3dBc0hlYWRlcjpmYWxzZSxcclxuICAgICAgICAgICAgcGFyc2VUYWJsZUF1dG9DZWxsVHlwZTpmYWxzZSxcclxuICAgICAgICAgICAgLy8gRGlzYWJsZSBjb3JuZXIgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgIHNlbGVjdGlvbkNvcHk6dHJ1ZSxcclxuICAgICAgICAgICAgLy8gTWVyZ2VkIGNlbGxzXHJcbiAgICAgICAgICAgIG1lcmdlQ2VsbHM6e30sXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0b29sYmFyXHJcbiAgICAgICAgICAgIHRvb2xiYXI6bnVsbCxcclxuICAgICAgICAgICAgLy8gQWxsb3cgc2VhcmNoXHJcbiAgICAgICAgICAgIHNlYXJjaDpmYWxzZSxcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHBhZ2luYXRpb25cclxuICAgICAgICAgICAgcGFnaW5hdGlvbjpmYWxzZSxcclxuICAgICAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnM6bnVsbCxcclxuICAgICAgICAgICAgLy8gRnVsbCBzY3JlZW5cclxuICAgICAgICAgICAgZnVsbHNjcmVlbjpmYWxzZSxcclxuICAgICAgICAgICAgLy8gTGF6eSBsb2FkaW5nXHJcbiAgICAgICAgICAgIGxhenlMb2FkaW5nOmZhbHNlLFxyXG4gICAgICAgICAgICBsb2FkaW5nU3BpbjpmYWxzZSxcclxuICAgICAgICAgICAgLy8gVGFibGUgb3ZlcmZsb3dcclxuICAgICAgICAgICAgdGFibGVPdmVyZmxvdzpmYWxzZSxcclxuICAgICAgICAgICAgdGFibGVIZWlnaHQ6JzMwMHB4JyxcclxuICAgICAgICAgICAgdGFibGVXaWR0aDpudWxsLFxyXG4gICAgICAgICAgICB0ZXh0T3ZlcmZsb3c6ZmFsc2UsXHJcbiAgICAgICAgICAgIC8vIE1ldGFcclxuICAgICAgICAgICAgbWV0YTogbnVsbCxcclxuICAgICAgICAgICAgLy8gU3R5bGVcclxuICAgICAgICAgICAgc3R5bGU6bnVsbCxcclxuICAgICAgICAgICAgY2xhc3NlczpudWxsLFxyXG4gICAgICAgICAgICAvLyBFeGVjdXRlIGZvcm11bGFzXHJcbiAgICAgICAgICAgIHBhcnNlRm9ybXVsYXM6dHJ1ZSxcclxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDp0cnVlLFxyXG4gICAgICAgICAgICBhdXRvQ2FzdGluZzp0cnVlLFxyXG4gICAgICAgICAgICAvLyBTZWN1cml0eVxyXG4gICAgICAgICAgICBzZWN1cmVGb3JtdWxhczp0cnVlLFxyXG4gICAgICAgICAgICBzdHJpcEhUTUw6dHJ1ZSxcclxuICAgICAgICAgICAgc3RyaXBIVE1MT25Db3B5OmZhbHNlLFxyXG4gICAgICAgICAgICAvLyBGaWx0ZXJzXHJcbiAgICAgICAgICAgIGZpbHRlcnM6ZmFsc2UsXHJcbiAgICAgICAgICAgIGZvb3RlcnM6bnVsbCxcclxuICAgICAgICAgICAgLy8gRXZlbnQgaGFuZGxlc1xyXG4gICAgICAgICAgICBvbnVuZG86bnVsbCxcclxuICAgICAgICAgICAgb25yZWRvOm51bGwsXHJcbiAgICAgICAgICAgIG9ubG9hZDpudWxsLFxyXG4gICAgICAgICAgICBvbmNoYW5nZTpudWxsLFxyXG4gICAgICAgICAgICBvbmNvbW1lbnRzOm51bGwsXHJcbiAgICAgICAgICAgIG9uYmVmb3JlY2hhbmdlOm51bGwsXHJcbiAgICAgICAgICAgIG9uYWZ0ZXJjaGFuZ2VzOm51bGwsXHJcbiAgICAgICAgICAgIG9uYmVmb3JlaW5zZXJ0cm93OiBudWxsLFxyXG4gICAgICAgICAgICBvbmluc2VydHJvdzpudWxsLFxyXG4gICAgICAgICAgICBvbmJlZm9yZWluc2VydGNvbHVtbjogbnVsbCxcclxuICAgICAgICAgICAgb25pbnNlcnRjb2x1bW46bnVsbCxcclxuICAgICAgICAgICAgb25iZWZvcmVkZWxldGVyb3c6bnVsbCxcclxuICAgICAgICAgICAgb25kZWxldGVyb3c6bnVsbCxcclxuICAgICAgICAgICAgb25iZWZvcmVkZWxldGVjb2x1bW46bnVsbCxcclxuICAgICAgICAgICAgb25kZWxldGVjb2x1bW46bnVsbCxcclxuICAgICAgICAgICAgb25tb3Zlcm93Om51bGwsXHJcbiAgICAgICAgICAgIG9ubW92ZWNvbHVtbjpudWxsLFxyXG4gICAgICAgICAgICBvbnJlc2l6ZXJvdzpudWxsLFxyXG4gICAgICAgICAgICBvbnJlc2l6ZWNvbHVtbjpudWxsLFxyXG4gICAgICAgICAgICBvbnNvcnQ6bnVsbCxcclxuICAgICAgICAgICAgb25zZWxlY3Rpb246bnVsbCxcclxuICAgICAgICAgICAgb25jb3B5Om51bGwsXHJcbiAgICAgICAgICAgIG9ucGFzdGU6bnVsbCxcclxuICAgICAgICAgICAgb25iZWZvcmVwYXN0ZTpudWxsLFxyXG4gICAgICAgICAgICBvbm1lcmdlOm51bGwsXHJcbiAgICAgICAgICAgIG9uZm9jdXM6bnVsbCxcclxuICAgICAgICAgICAgb25ibHVyOm51bGwsXHJcbiAgICAgICAgICAgIG9uY2hhbmdlaGVhZGVyOm51bGwsXHJcbiAgICAgICAgICAgIG9uY3JlYXRlZWRpdG9yOm51bGwsXHJcbiAgICAgICAgICAgIG9uZWRpdGlvbnN0YXJ0Om51bGwsXHJcbiAgICAgICAgICAgIG9uZWRpdGlvbmVuZDpudWxsLFxyXG4gICAgICAgICAgICBvbmNoYW5nZXN0eWxlOm51bGwsXHJcbiAgICAgICAgICAgIG9uY2hhbmdlbWV0YTpudWxsLFxyXG4gICAgICAgICAgICBvbmNoYW5nZXBhZ2U6bnVsbCxcclxuICAgICAgICAgICAgb25iZWZvcmVzYXZlOm51bGwsXHJcbiAgICAgICAgICAgIG9uc2F2ZTpudWxsLFxyXG4gICAgICAgICAgICAvLyBHbG9iYWwgZXZlbnQgZGlzcGF0Y2hlclxyXG4gICAgICAgICAgICBvbmV2ZW50Om51bGwsXHJcbiAgICAgICAgICAgIC8vIFBlcnNpc3RhbmNlXHJcbiAgICAgICAgICAgIHBlcnNpc3RhbmNlOmZhbHNlLFxyXG4gICAgICAgICAgICAvLyBDdXN0b21pemUgYW55IGNlbGwgYmVoYXZpb3JcclxuICAgICAgICAgICAgdXBkYXRlVGFibGU6bnVsbCxcclxuICAgICAgICAgICAgLy8gRGV0YWNoIHRoZSBIVE1MIHRhYmxlIHdoZW4gY2FsbGluZyB1cGRhdGVUYWJsZVxyXG4gICAgICAgICAgICBkZXRhY2hGb3JVcGRhdGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgZnJlZXplQ29sdW1uczpudWxsLFxyXG4gICAgICAgICAgICAvLyBUZXh0c1xyXG4gICAgICAgICAgICB0ZXh0OntcclxuICAgICAgICAgICAgICAgIG5vUmVjb3Jkc0ZvdW5kOiAnTm8gcmVjb3JkcyBmb3VuZCcsXHJcbiAgICAgICAgICAgICAgICBzaG93aW5nUGFnZTogJ1Nob3dpbmcgcGFnZSB7MH0gb2YgezF9IGVudHJpZXMnLFxyXG4gICAgICAgICAgICAgICAgc2hvdzogJ1Nob3cgJyxcclxuICAgICAgICAgICAgICAgIHNlYXJjaDogJ1NlYXJjaCcsXHJcbiAgICAgICAgICAgICAgICBlbnRyaWVzOiAnIGVudHJpZXMnLFxyXG4gICAgICAgICAgICAgICAgY29sdW1uTmFtZTogJ0NvbHVtbiBuYW1lJyxcclxuICAgICAgICAgICAgICAgIGluc2VydEFOZXdDb2x1bW5CZWZvcmU6ICdJbnNlcnQgYSBuZXcgY29sdW1uIGJlZm9yZScsXHJcbiAgICAgICAgICAgICAgICBpbnNlcnRBTmV3Q29sdW1uQWZ0ZXI6ICdJbnNlcnQgYSBuZXcgY29sdW1uIGFmdGVyJyxcclxuICAgICAgICAgICAgICAgIGRlbGV0ZVNlbGVjdGVkQ29sdW1uczogJ0RlbGV0ZSBzZWxlY3RlZCBjb2x1bW5zJyxcclxuICAgICAgICAgICAgICAgIHJlbmFtZVRoaXNDb2x1bW46ICdSZW5hbWUgdGhpcyBjb2x1bW4nLFxyXG4gICAgICAgICAgICAgICAgb3JkZXJBc2NlbmRpbmc6ICdPcmRlciBhc2NlbmRpbmcnLFxyXG4gICAgICAgICAgICAgICAgb3JkZXJEZXNjZW5kaW5nOiAnT3JkZXIgZGVzY2VuZGluZycsXHJcbiAgICAgICAgICAgICAgICBpbnNlcnRBTmV3Um93QmVmb3JlOiAnSW5zZXJ0IGEgbmV3IHJvdyBiZWZvcmUnLFxyXG4gICAgICAgICAgICAgICAgaW5zZXJ0QU5ld1Jvd0FmdGVyOiAnSW5zZXJ0IGEgbmV3IHJvdyBhZnRlcicsXHJcbiAgICAgICAgICAgICAgICBkZWxldGVTZWxlY3RlZFJvd3M6ICdEZWxldGUgc2VsZWN0ZWQgcm93cycsXHJcbiAgICAgICAgICAgICAgICBlZGl0Q29tbWVudHM6ICdFZGl0IGNvbW1lbnRzJyxcclxuICAgICAgICAgICAgICAgIGFkZENvbW1lbnRzOiAnQWRkIGNvbW1lbnRzJyxcclxuICAgICAgICAgICAgICAgIGNvbW1lbnRzOiAnQ29tbWVudHMnLFxyXG4gICAgICAgICAgICAgICAgY2xlYXJDb21tZW50czogJ0NsZWFyIGNvbW1lbnRzJyxcclxuICAgICAgICAgICAgICAgIGNvcHk6ICdDb3B5Li4uJyxcclxuICAgICAgICAgICAgICAgIHBhc3RlOiAnUGFzdGUuLi4nLFxyXG4gICAgICAgICAgICAgICAgc2F2ZUFzOiAnU2F2ZSBhcy4uLicsXHJcbiAgICAgICAgICAgICAgICBhYm91dDogJ0Fib3V0JyxcclxuICAgICAgICAgICAgICAgIGFyZVlvdVN1cmVUb0RlbGV0ZVRoZVNlbGVjdGVkUm93czogJ0FyZSB5b3Ugc3VyZSB0byBkZWxldGUgdGhlIHNlbGVjdGVkIHJvd3M/JyxcclxuICAgICAgICAgICAgICAgIGFyZVlvdVN1cmVUb0RlbGV0ZVRoZVNlbGVjdGVkQ29sdW1uczogJ0FyZSB5b3Ugc3VyZSB0byBkZWxldGUgdGhlIHNlbGVjdGVkIGNvbHVtbnM/JyxcclxuICAgICAgICAgICAgICAgIHRoaXNBY3Rpb25XaWxsRGVzdHJveUFueUV4aXN0aW5nTWVyZ2VkQ2VsbHNBcmVZb3VTdXJlOiAnVGhpcyBhY3Rpb24gd2lsbCBkZXN0cm95IGFueSBleGlzdGluZyBtZXJnZWQgY2VsbHMuIEFyZSB5b3Ugc3VyZT8nLFxyXG4gICAgICAgICAgICAgICAgdGhpc0FjdGlvbldpbGxDbGVhcllvdXJTZWFyY2hSZXN1bHRzQXJlWW91U3VyZTogJ1RoaXMgYWN0aW9uIHdpbGwgY2xlYXIgeW91ciBzZWFyY2ggcmVzdWx0cy4gQXJlIHlvdSBzdXJlPycsXHJcbiAgICAgICAgICAgICAgICB0aGVyZUlzQUNvbmZsaWN0V2l0aEFub3RoZXJNZXJnZWRDZWxsOiAnVGhlcmUgaXMgYSBjb25mbGljdCB3aXRoIGFub3RoZXIgbWVyZ2VkIGNlbGwnLFxyXG4gICAgICAgICAgICAgICAgaW52YWxpZE1lcmdlUHJvcGVydGllczogJ0ludmFsaWQgbWVyZ2VkIHByb3BlcnRpZXMnLFxyXG4gICAgICAgICAgICAgICAgY2VsbEFscmVhZHlNZXJnZWQ6ICdDZWxsIGFscmVhZHkgbWVyZ2VkJyxcclxuICAgICAgICAgICAgICAgIG5vQ2VsbHNTZWxlY3RlZDogJ05vIGNlbGxzIHNlbGVjdGVkJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gQWJvdXQgbWVzc2FnZVxyXG4gICAgICAgICAgICBhYm91dDpcImpFeGNlbCBDRSBTcHJlYWRzaGVldFxcblZlcnNpb24gNC41LjBcXG5XZWJzaXRlOiBodHRwczovL2Jvc3Nhbm92YS51ay9qZXhjZWwvdjNcIixcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgLy8gTG9hZGluZyBpbml0aWFsIGNvbmZpZ3VyYXRpb24gZnJvbSB1c2VyXHJcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gZGVmYXVsdHMpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0eSA9PT0gJ3RleHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnNbcHJvcGVydHldID0gZGVmYXVsdHNbcHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHRleHRLZXkgaW4gb3B0aW9uc1twcm9wZXJ0eV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNbcHJvcGVydHldLmhhc093blByb3BlcnR5KHRleHRLZXkpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zW3Byb3BlcnR5XVt0ZXh0S2V5XSA9IG9wdGlvbnNbcHJvcGVydHldW3RleHRLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9uc1twcm9wZXJ0eV0gPSBvcHRpb25zW3Byb3BlcnR5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zW3Byb3BlcnR5XSA9IGRlZmF1bHRzW3Byb3BlcnR5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR2xvYmFsIGVsZW1lbnRzXHJcbiAgICAgICAgb2JqLmVsID0gZWw7XHJcbiAgICAgICAgb2JqLmNvcm5lciA9IG51bGw7XHJcbiAgICAgICAgb2JqLmNvbnRleHRNZW51ID0gbnVsbDtcclxuICAgICAgICBvYmoudGV4dGFyZWEgPSBudWxsO1xyXG4gICAgICAgIG9iai5hZHMgPSBudWxsO1xyXG4gICAgICAgIG9iai5jb250ZW50ID0gbnVsbDtcclxuICAgICAgICBvYmoudGFibGUgPSBudWxsO1xyXG4gICAgICAgIG9iai50aGVhZCA9IG51bGw7XHJcbiAgICAgICAgb2JqLnRib2R5ID0gbnVsbDtcclxuICAgICAgICBvYmoucm93cyA9IFtdO1xyXG4gICAgICAgIG9iai5yZXN1bHRzID0gbnVsbDtcclxuICAgICAgICBvYmouc2VhcmNoSW5wdXQgPSBudWxsO1xyXG4gICAgICAgIG9iai50b29sYmFyID0gbnVsbDtcclxuICAgICAgICBvYmoucGFnaW5hdGlvbiA9IG51bGw7XHJcbiAgICAgICAgb2JqLnBhZ2VOdW1iZXIgPSBudWxsO1xyXG4gICAgICAgIG9iai5oZWFkZXJDb250YWluZXIgPSBudWxsO1xyXG4gICAgICAgIG9iai5jb2xncm91cENvbnRhaW5lciA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICAvLyBDb250YWluZXJzXHJcbiAgICAgICAgb2JqLmhlYWRlcnMgPSBbXTtcclxuICAgICAgICBvYmoucmVjb3JkcyA9IFtdO1xyXG4gICAgICAgIG9iai5oaXN0b3J5ID0gW107XHJcbiAgICAgICAgb2JqLmZvcm11bGEgPSBbXTtcclxuICAgICAgICBvYmouY29sZ3JvdXAgPSBbXTtcclxuICAgICAgICBvYmouc2VsZWN0aW9uID0gW107XHJcbiAgICAgICAgb2JqLmhpZ2hsaWdodGVkICA9IFtdO1xyXG4gICAgICAgIG9iai5zZWxlY3RlZENlbGwgPSBudWxsO1xyXG4gICAgICAgIG9iai5zZWxlY3RlZENvbnRhaW5lciA9IG51bGw7XHJcbiAgICAgICAgb2JqLnN0eWxlID0gW107XHJcbiAgICAgICAgb2JqLmRhdGEgPSBudWxsO1xyXG4gICAgICAgIG9iai5maWx0ZXIgPSBudWxsO1xyXG4gICAgICAgIG9iai5maWx0ZXJzID0gW107XHJcblxyXG4gICAgICAgIC8vIEludGVybmFsIGNvbnRyb2xsZXJzXHJcbiAgICAgICAgb2JqLmN1cnNvciA9IG51bGw7XHJcbiAgICAgICAgb2JqLmhpc3RvcnlJbmRleCA9IC0xO1xyXG4gICAgICAgIG9iai5pZ25vcmVFdmVudHMgPSBmYWxzZTtcclxuICAgICAgICBvYmouaWdub3JlSGlzdG9yeSA9IGZhbHNlO1xyXG4gICAgICAgIG9iai5lZGl0aW9uID0gbnVsbDtcclxuICAgICAgICBvYmouaGFzaFN0cmluZyA9IG51bGw7XHJcbiAgICAgICAgb2JqLnJlc2l6aW5nID0gbnVsbDtcclxuICAgICAgICBvYmouZHJhZ2dpbmcgPSBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgLy8gTGF6eSBsb2FkaW5nXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLmxhenlMb2FkaW5nID09IHRydWUgJiYgKG9iai5vcHRpb25zLnRhYmxlT3ZlcmZsb3cgPT0gZmFsc2UgJiYgb2JqLm9wdGlvbnMuZnVsbHNjcmVlbiA9PSBmYWxzZSkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignSnNwcmVhZHNoZWV0OiBUaGUgbGF6eWxvYWRpbmcgb25seSB3b3JrcyB3aGVuIHRhYmxlT3ZlcmZsb3cgPSB5ZXMgb3IgZnVsbHNjcmVlbiA9IHllcycpO1xyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy5sYXp5TG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBY3RpdmF0ZS9EaXNhYmxlIGZ1bGxzY3JlZW4gXHJcbiAgICAgICAgICogdXNlIHByb2dyYW1tYXRpY2FsbHkgOiB0YWJsZS5mdWxsc2NyZWVuKCk7IG9yIHRhYmxlLmZ1bGxzY3JlZW4odHJ1ZSk7IG9yIHRhYmxlLmZ1bGxzY3JlZW4oZmFsc2UpO1xyXG4gICAgICAgICAqIEBQYXJhbSB7Ym9vbGVhbn0gYWN0aXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouZnVsbHNjcmVlbiA9IGZ1bmN0aW9uKGFjdGl2YXRlKSB7XHJcbiAgICAgICAgICAgIC8vIElmIGFjdGl2YXRlIG5vdCBkZWZpbmVkLCBnZXQgcmV2ZXJzZSBvcHRpb25zLmZ1bGxzY3JlZW5cclxuICAgICAgICAgICAgaWYgKGFjdGl2YXRlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGFjdGl2YXRlID0gISBvYmoub3B0aW9ucy5mdWxsc2NyZWVuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gSWYgY2hhbmdlXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5mdWxsc2NyZWVuICE9IGFjdGl2YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5mdWxsc2NyZWVuID0gYWN0aXZhdGU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFRlc3QgTGF6eUxvYWRpbmcgY29uZmxpY3RcclxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmF0ZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnZnVsbHNjcmVlbicpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdmdWxsc2NyZWVuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUcmlnZ2VyIGV2ZW50c1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5kaXNwYXRjaCA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8vIERpc3BhdGNoIGV2ZW50c1xyXG4gICAgICAgICAgICBpZiAoISBvYmouaWdub3JlRXZlbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDYWxsIGdsb2JhbCBldmVudFxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbmV2ZW50KSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJldCA9IG9iai5vcHRpb25zLm9uZXZlbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIENhbGwgc3BlY2lmaWMgZXZlbnRzXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zW2V2ZW50XSkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXQgPSBvYmoub3B0aW9uc1tldmVudF0uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFBlcnNpc3RhbmNlXHJcbiAgICAgICAgICAgIGlmIChldmVudCA9PSAnb25hZnRlcmNoYW5nZXMnICYmIG9iai5vcHRpb25zLnBlcnNpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gb2JqLm9wdGlvbnMucGVyc2lzdGFuY2UgPT0gdHJ1ZSA/IG9iai5vcHRpb25zLnVybCA6IG9iai5vcHRpb25zLnBlcnNpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBvYmoucHJlcGFyZUpzb24oYXJndW1lbnRzWzJdKTtcclxuICAgICAgICAgICAgICAgIG9iai5zYXZlKHVybCwgZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcmVwYXJlIHRoZSBqZXhjZWwgdGFibGVcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAUGFyYW0gY29uZmlnXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnByZXBhcmVUYWJsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBMb2FkaW5nIGluaXRpYWwgZGF0YSBmcm9tIHJlbW90ZSBzb3VyY2VzXHJcbiAgICAgICAgICAgIHZhciByZXN1bHRzID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gTnVtYmVyIG9mIGNvbHVtbnNcclxuICAgICAgICAgICAgdmFyIHNpemUgPSBvYmoub3B0aW9ucy5jb2x1bW5zLmxlbmd0aDtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuZGF0YSAmJiB0eXBlb2Yob2JqLm9wdGlvbnMuZGF0YVswXSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEYXRhIGtleXNcclxuICAgICAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqLm9wdGlvbnMuZGF0YVswXSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChrZXlzLmxlbmd0aCA+IHNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaXplID0ga2V5cy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBNaW5pbWFsIGRpbWVuc2lvbnNcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLm1pbkRpbWVuc2lvbnNbMF0gPiBzaXplKSB7XHJcbiAgICAgICAgICAgICAgICBzaXplID0gb2JqLm9wdGlvbnMubWluRGltZW5zaW9uc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJlcXVlc3RzXHJcbiAgICAgICAgICAgIHZhciBtdWx0aXBsZSA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFByZXBhcmF0aW9uc1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVwcmVjdGVkIG9wdGlvbnMuIFlvdSBzaG91bGQgdXNlIG9ubHkgY29sdW1uc1xyXG4gICAgICAgICAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMuY29sSGVhZGVyc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmNvbEhlYWRlcnNbaV0gPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghIG9iai5vcHRpb25zLmNvbFdpZHRoc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmNvbFdpZHRoc1tpXSA9IG9iai5vcHRpb25zLmRlZmF1bHRDb2xXaWR0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghIG9iai5vcHRpb25zLmNvbEFsaWdubWVudHNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5jb2xBbGlnbm1lbnRzW2ldID0gb2JqLm9wdGlvbnMuZGVmYXVsdENvbEFsaWduO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBEZWZhdWx0IGNvbHVtbiBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMuY29sdW1uc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmNvbHVtbnNbaV0gPSB7IHR5cGU6J3RleHQnIH07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEgb2JqLm9wdGlvbnMuY29sdW1uc1tpXS50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuY29sdW1uc1tpXS50eXBlID0gJ3RleHQnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMuY29sdW1uc1tpXS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuY29sdW1uc1tpXS5uYW1lID0ga2V5cyAmJiBrZXlzW2ldID8ga2V5c1tpXSA6IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoISBvYmoub3B0aW9ucy5jb2x1bW5zW2ldLnNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmNvbHVtbnNbaV0uc291cmNlID0gW107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoISBvYmoub3B0aW9ucy5jb2x1bW5zW2ldLm9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5jb2x1bW5zW2ldLm9wdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghIG9iai5vcHRpb25zLmNvbHVtbnNbaV0uZWRpdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuY29sdW1uc1tpXS5lZGl0b3IgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMuY29sdW1uc1tpXS5hbGxvd0VtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuY29sdW1uc1tpXS5hbGxvd0VtcHR5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoISBvYmoub3B0aW9ucy5jb2x1bW5zW2ldLnRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuY29sdW1uc1tpXS50aXRsZSA9IG9iai5vcHRpb25zLmNvbEhlYWRlcnNbaV0gPyBvYmoub3B0aW9ucy5jb2xIZWFkZXJzW2ldIDogJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoISBvYmoub3B0aW9ucy5jb2x1bW5zW2ldLndpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuY29sdW1uc1tpXS53aWR0aCA9IG9iai5vcHRpb25zLmNvbFdpZHRoc1tpXSA/IG9iai5vcHRpb25zLmNvbFdpZHRoc1tpXSA6IG9iai5vcHRpb25zLmRlZmF1bHRDb2xXaWR0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghIG9iai5vcHRpb25zLmNvbHVtbnNbaV0uYWxpZ24pIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5jb2x1bW5zW2ldLmFsaWduID0gb2JqLm9wdGlvbnMuY29sQWxpZ25tZW50c1tpXSA/IG9iai5vcHRpb25zLmNvbEFsaWdubWVudHNbaV0gOiAnY2VudGVyJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUHJlLWxvYWQgaW5pdGlhbCBzb3VyY2UgZm9yIGpzb24gYXV0b2NvbXBsZXRlXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1tpXS50eXBlID09ICdhdXRvY29tcGxldGUnIHx8IG9iai5vcHRpb25zLmNvbHVtbnNbaV0udHlwZSA9PSAnZHJvcGRvd24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgcmVtb3RlIGNvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1tpXS51cmwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGUucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IG9iai5vcHRpb25zLmNvbHVtbnNbaV0udXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmNvbHVtbnNbdGhpcy5pbmRleF0uc291cmNlLnB1c2goZGF0YVtpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbaV0udHlwZSA9PSAnY2FsZW5kYXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBmb3JtYXQgZm9yIGRhdGUgY29sdW1uc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIG9iai5vcHRpb25zLmNvbHVtbnNbaV0ub3B0aW9ucy5mb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuY29sdW1uc1tpXS5vcHRpb25zLmZvcm1hdCA9ICdERC9NTS9ZWVlZJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSB0YWJsZSB3aGVuIGlzIHJlYWR5XHJcbiAgICAgICAgICAgIGlmICghIG11bHRpcGxlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgb2JqLmNyZWF0ZVRhYmxlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBqU3VpdGVzLmFqYXgobXVsdGlwbGUsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5jcmVhdGVUYWJsZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBvYmouY3JlYXRlVGFibGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gRWxlbWVudHNcclxuICAgICAgICAgICAgb2JqLnRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcclxuICAgICAgICAgICAgb2JqLnRoZWFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGhlYWQnKTtcclxuICAgICAgICAgICAgb2JqLnRib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBoZWFkZXJzIGNvbnRyb2xsZXJzXHJcbiAgICAgICAgICAgIG9iai5oZWFkZXJzID0gW107XHJcbiAgICAgICAgICAgIG9iai5jb2xncm91cCA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0YWJsZSBjb250YWluZXJcclxuICAgICAgICAgICAgb2JqLmNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgb2JqLmNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnamV4Y2VsX2NvbnRlbnQnKTtcclxuICAgICAgICAgICAgb2JqLmNvbnRlbnQub25zY3JvbGwgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouc2Nyb2xsQ29udHJvbHMoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb2JqLmNvbnRlbnQub253aGVlbCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIG9iai53aGVlbENvbnRyb2xzKGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgdG9vbGJhciBvYmplY3RcclxuICAgICAgICAgICAgb2JqLnRvb2xiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgb2JqLnRvb2xiYXIuY2xhc3NMaXN0LmFkZCgnamV4Y2VsX3Rvb2xiYXInKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBTZWFyY2hcclxuICAgICAgICAgICAgdmFyIHNlYXJjaENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICB2YXIgc2VhcmNoVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKChvYmoub3B0aW9ucy50ZXh0LnNlYXJjaCkgKyAnOiAnKTtcclxuICAgICAgICAgICAgb2JqLnNlYXJjaElucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICAgICAgb2JqLnNlYXJjaElucHV0LmNsYXNzTGlzdC5hZGQoJ2pleGNlbF9zZWFyY2gnKTtcclxuICAgICAgICAgICAgc2VhcmNoQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlYXJjaFRleHQpO1xyXG4gICAgICAgICAgICBzZWFyY2hDb250YWluZXIuYXBwZW5kQ2hpbGQob2JqLnNlYXJjaElucHV0KTtcclxuICAgICAgICAgICAgb2JqLnNlYXJjaElucHV0Lm9uZm9jdXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIG9iai5yZXNldFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUGFnaW5hdGlvbiBzZWxlY3Qgb3B0aW9uXHJcbiAgICAgICAgICAgIHZhciBwYWdpbmF0aW9uVXBkYXRlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnBhZ2luYXRpb24gPiAwICYmIG9iai5vcHRpb25zLnBhZ2luYXRpb25PcHRpb25zICYmIG9iai5vcHRpb25zLnBhZ2luYXRpb25PcHRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIG9iai5wYWdpbmF0aW9uRHJvcGRvd24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTtcclxuICAgICAgICAgICAgICAgIG9iai5wYWdpbmF0aW9uRHJvcGRvd24uY2xhc3NMaXN0LmFkZCgnamV4Y2VsX3BhZ2luYXRpb25fZHJvcGRvd24nKTtcclxuICAgICAgICAgICAgICAgIG9iai5wYWdpbmF0aW9uRHJvcGRvd24ub25jaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5wYWdpbmF0aW9uID0gcGFyc2VJbnQodGhpcy52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnBhZ2UoMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLm9wdGlvbnMucGFnaW5hdGlvbk9wdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXAudmFsdWUgPSBvYmoub3B0aW9ucy5wYWdpbmF0aW9uT3B0aW9uc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wLmlubmVySFRNTCA9IG9iai5vcHRpb25zLnBhZ2luYXRpb25PcHRpb25zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5wYWdpbmF0aW9uRHJvcGRvd24uYXBwZW5kQ2hpbGQodGVtcCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFNldCBpbml0aWFsIHBhZ2luYXRpb24gdmFsdWVcclxuICAgICAgICAgICAgICAgIG9iai5wYWdpbmF0aW9uRHJvcGRvd24udmFsdWUgPSBvYmoub3B0aW9ucy5wYWdpbmF0aW9uO1xyXG5cclxuICAgICAgICAgICAgICAgIHBhZ2luYXRpb25VcGRhdGVDb250YWluZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUob2JqLm9wdGlvbnMudGV4dC5zaG93KSk7XHJcbiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uVXBkYXRlQ29udGFpbmVyLmFwcGVuZENoaWxkKG9iai5wYWdpbmF0aW9uRHJvcGRvd24pO1xyXG4gICAgICAgICAgICAgICAgcGFnaW5hdGlvblVwZGF0ZUNvbnRhaW5lci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShvYmoub3B0aW9ucy50ZXh0LmVudHJpZXMpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEZpbHRlciBhbmQgcGFnaW5hdGlvbiBjb250YWluZXJcclxuICAgICAgICAgICAgdmFyIGZpbHRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBmaWx0ZXIuY2xhc3NMaXN0LmFkZCgnamV4Y2VsX2ZpbHRlcicpO1xyXG4gICAgICAgICAgICBmaWx0ZXIuYXBwZW5kQ2hpbGQocGFnaW5hdGlvblVwZGF0ZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIGZpbHRlci5hcHBlbmRDaGlsZChzZWFyY2hDb250YWluZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIENvbHNncm91cFxyXG4gICAgICAgICAgICBvYmouY29sZ3JvdXBDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjb2xncm91cCcpO1xyXG4gICAgICAgICAgICB2YXIgdGVtcENvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NvbCcpO1xyXG4gICAgICAgICAgICB0ZW1wQ29sLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAnNTAnKTtcclxuICAgICAgICAgICAgb2JqLmNvbGdyb3VwQ29udGFpbmVyLmFwcGVuZENoaWxkKHRlbXBDb2wpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIE5lc3RlZFxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMubmVzdGVkSGVhZGVycyAmJiBvYmoub3B0aW9ucy5uZXN0ZWRIZWFkZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIEZsZXhpYmxlIHdheSB0byBoYW5kbGUgbmVzdGVkaGVhZGVyc1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLm5lc3RlZEhlYWRlcnNbMF0gJiYgb2JqLm9wdGlvbnMubmVzdGVkSGVhZGVyc1swXVswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JqLm9wdGlvbnMubmVzdGVkSGVhZGVycy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoudGhlYWQuYXBwZW5kQ2hpbGQob2JqLmNyZWF0ZU5lc3RlZEhlYWRlcihvYmoub3B0aW9ucy5uZXN0ZWRIZWFkZXJzW2pdKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoudGhlYWQuYXBwZW5kQ2hpbGQob2JqLmNyZWF0ZU5lc3RlZEhlYWRlcihvYmoub3B0aW9ucy5uZXN0ZWRIZWFkZXJzKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSb3dcclxuICAgICAgICAgICAgb2JqLmhlYWRlckNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XHJcbiAgICAgICAgICAgIHZhciB0ZW1wQ29sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuICAgICAgICAgICAgdGVtcENvbC5jbGFzc0xpc3QuYWRkKCdqZXhjZWxfc2VsZWN0YWxsJyk7XHJcbiAgICAgICAgICAgIG9iai5oZWFkZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGVtcENvbCk7XHJcbiAgICBcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmoub3B0aW9ucy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgaGVhZGVyXHJcbiAgICAgICAgICAgICAgICBvYmouY3JlYXRlQ2VsbEhlYWRlcihpKTtcclxuICAgICAgICAgICAgICAgIC8vIEFwcGVuZCBjZWxsIHRvIHRoZSBjb250YWluZXJcclxuICAgICAgICAgICAgICAgIG9iai5oZWFkZXJDb250YWluZXIuYXBwZW5kQ2hpbGQob2JqLmhlYWRlcnNbaV0pO1xyXG4gICAgICAgICAgICAgICAgb2JqLmNvbGdyb3VwQ29udGFpbmVyLmFwcGVuZENoaWxkKG9iai5jb2xncm91cFtpXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG9iai50aGVhZC5hcHBlbmRDaGlsZChvYmouaGVhZGVyQ29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEZpbHRlcnNcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmZpbHRlcnMgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgb2JqLmZpbHRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4gICAgICAgICAgICAgICAgb2JqLmZpbHRlci5hcHBlbmRDaGlsZCh0ZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmoub3B0aW9ucy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZC5pbm5lckhUTUwgPSAnJm5ic3A7JztcclxuICAgICAgICAgICAgICAgICAgICB0ZC5zZXRBdHRyaWJ1dGUoJ2RhdGEteCcsIGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRkLmNsYXNzTmFtZSA9ICdqZXhjZWxfY29sdW1uX2ZpbHRlcic7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbaV0udHlwZSA9PSAnaGlkZGVuJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBvYmouZmlsdGVyLmFwcGVuZENoaWxkKHRkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBvYmoudGhlYWQuYXBwZW5kQ2hpbGQob2JqLmZpbHRlcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIENvbnRlbnQgdGFibGVcclxuICAgICAgICAgICAgb2JqLnRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcclxuICAgICAgICAgICAgb2JqLnRhYmxlLmNsYXNzTGlzdC5hZGQoJ2pleGNlbCcpO1xyXG4gICAgICAgICAgICBvYmoudGFibGUuc2V0QXR0cmlidXRlKCdjZWxscGFkZGluZycsICcwJyk7XHJcbiAgICAgICAgICAgIG9iai50YWJsZS5zZXRBdHRyaWJ1dGUoJ2NlbGxzcGFjaW5nJywgJzAnKTtcclxuICAgICAgICAgICAgb2JqLnRhYmxlLnNldEF0dHJpYnV0ZSgndW5zZWxlY3RhYmxlJywgJ3llcycpO1xyXG4gICAgICAgICAgICAvL29iai50YWJsZS5zZXRBdHRyaWJ1dGUoJ29uc2VsZWN0c3RhcnQnLCAncmV0dXJuIGZhbHNlJyk7XHJcbiAgICAgICAgICAgIG9iai50YWJsZS5hcHBlbmRDaGlsZChvYmouY29sZ3JvdXBDb250YWluZXIpO1xyXG4gICAgICAgICAgICBvYmoudGFibGUuYXBwZW5kQ2hpbGQob2JqLnRoZWFkKTtcclxuICAgICAgICAgICAgb2JqLnRhYmxlLmFwcGVuZENoaWxkKG9iai50Ym9keSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoISBvYmoub3B0aW9ucy50ZXh0T3ZlcmZsb3cpIHtcclxuICAgICAgICAgICAgICAgIG9iai50YWJsZS5jbGFzc0xpc3QuYWRkKCdqZXhjZWxfb3ZlcmZsb3cnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gU3ByZWFkc2hlZXQgY29ybmVyXHJcbiAgICAgICAgICAgIG9iai5jb3JuZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgb2JqLmNvcm5lci5jbGFzc05hbWUgPSAnamV4Y2VsX2Nvcm5lcic7XHJcbiAgICAgICAgICAgIG9iai5jb3JuZXIuc2V0QXR0cmlidXRlKCd1bnNlbGVjdGFibGUnLCAnb24nKTtcclxuICAgICAgICAgICAgb2JqLmNvcm5lci5zZXRBdHRyaWJ1dGUoJ29uc2VsZWN0c3RhcnQnLCAncmV0dXJuIGZhbHNlJyk7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnNlbGVjdGlvbkNvcHkgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIG9iai5jb3JuZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFRleHRhcmVhIGhlbHBlclxyXG4gICAgICAgICAgICBvYmoudGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xyXG4gICAgICAgICAgICBvYmoudGV4dGFyZWEuY2xhc3NOYW1lID0gJ2pleGNlbF90ZXh0YXJlYSc7XHJcbiAgICAgICAgICAgIG9iai50ZXh0YXJlYS5pZCA9ICdqZXhjZWxfdGV4dGFyZWEnO1xyXG4gICAgICAgICAgICBvYmoudGV4dGFyZWEudGFiSW5kZXggPSAnLTEnO1xyXG5cclxuICAgICAgICAgICAgLy8gQ29udGV4dG1lbnUgY29udGFpbmVyXHJcbiAgICAgICAgICAgIG9iai5jb250ZXh0TWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBvYmouY29udGV4dE1lbnUuY2xhc3NOYW1lID0gJ2pleGNlbF9jb250ZXh0bWVudSc7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGVsZW1lbnRcclxuICAgICAgICAgICAgalN1aXRlcy5jb250ZXh0bWVudShvYmouY29udGV4dE1lbnUsIHtcclxuICAgICAgICAgICAgICAgIG9uY2xpY2s6ZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmNvbnRleHRNZW51LmNvbnRleHRtZW51LmNsb3NlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUG93ZXJlZCBieSBqRXhjZWxcclxuICAgICAgICAgICAgdmFyIGFkcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICAgICAgYWRzLnNldEF0dHJpYnV0ZSgnaHJlZicsICdodHRwczovL2Jvc3Nhbm92YS51ay9qZXhjZWwvJyk7XHJcbiAgICAgICAgICAgIG9iai5hZHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgb2JqLmFkcy5jbGFzc05hbWUgPSAnamV4Y2VsX2Fib3V0JztcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yoc2Vzc2lvblN0b3JhZ2UpICE9PSBcInVuZGVmaW5lZFwiICYmICEgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnamV4Y2VsJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdqZXhjZWwnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9ICcvL2Jvc3Nhbm92YS51ay9qZXhjZWwvbG9nby5wbmcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkcy5hcHBlbmRDaGlsZChpbWcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICAgICAgc3Bhbi5pbm5lckhUTUwgPSAnSmV4Y2VsIHNwcmVhZHNoZWV0JztcclxuICAgICAgICAgICAgYWRzLmFwcGVuZENoaWxkKHNwYW4pO1xyXG4gICAgICAgICAgICBvYmouYWRzLmFwcGVuZENoaWxkKGFkcyk7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGFibGUgY29udGFpbmVyIFRPRE86IGZyb3plbiBjb2x1bW5zXHJcbiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2pleGNlbF90YWJsZScpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFBhZ2luYXRpb25cclxuICAgICAgICAgICAgb2JqLnBhZ2luYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgb2JqLnBhZ2luYXRpb24uY2xhc3NMaXN0LmFkZCgnamV4Y2VsX3BhZ2luYXRpb24nKTtcclxuICAgICAgICAgICAgdmFyIHBhZ2luYXRpb25JbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHZhciBwYWdpbmF0aW9uUGFnZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgb2JqLnBhZ2luYXRpb24uYXBwZW5kQ2hpbGQocGFnaW5hdGlvbkluZm8pO1xyXG4gICAgICAgICAgICBvYmoucGFnaW5hdGlvbi5hcHBlbmRDaGlsZChwYWdpbmF0aW9uUGFnZXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gSGlkZSBwYWdpbmF0aW9uIGlmIG5vdCBpbiB1c2VcclxuICAgICAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMucGFnaW5hdGlvbikge1xyXG4gICAgICAgICAgICAgICAgb2JqLnBhZ2luYXRpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQXBwZW5kIGNvbnRhaW5lcnMgdG8gdGhlIHRhYmxlXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5zZWFyY2ggPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoZmlsdGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEVsZW1lbnRzXHJcbiAgICAgICAgICAgIG9iai5jb250ZW50LmFwcGVuZENoaWxkKG9iai50YWJsZSk7XHJcbiAgICAgICAgICAgIG9iai5jb250ZW50LmFwcGVuZENoaWxkKG9iai5jb3JuZXIpO1xyXG4gICAgICAgICAgICBvYmouY29udGVudC5hcHBlbmRDaGlsZChvYmoudGV4dGFyZWEpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGVsLmFwcGVuZENoaWxkKG9iai50b29sYmFyKTtcclxuICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQob2JqLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICBlbC5hcHBlbmRDaGlsZChvYmoucGFnaW5hdGlvbik7XHJcbiAgICAgICAgICAgIGVsLmFwcGVuZENoaWxkKG9iai5jb250ZXh0TWVudSk7XHJcbiAgICAgICAgICAgIGVsLmFwcGVuZENoaWxkKG9iai5hZHMpO1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdqZXhjZWxfY29udGFpbmVyJyk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRvb2xiYXJcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnRvb2xiYXIgJiYgb2JqLm9wdGlvbnMudG9vbGJhci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIG9iai5jcmVhdGVUb29sYmFyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBGdWxsc2NyZWVuXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5mdWxsc2NyZWVuID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2Z1bGxzY3JlZW4nKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIE92ZXJmbG93XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMudGFibGVPdmVyZmxvdyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnRhYmxlSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5jb250ZW50LnN0eWxlWydvdmVyZmxvdy15J10gPSAnYXV0byc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5jb250ZW50LnN0eWxlWydib3gtc2hhZG93J10gPSAncmdiKDIyMSAyMjEgMjIxKSAycHggMnB4IDVweCAwLjFweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5jb250ZW50LnN0eWxlLm1heEhlaWdodCA9IG9iai5vcHRpb25zLnRhYmxlSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMudGFibGVXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmouY29udGVudC5zdHlsZVsnb3ZlcmZsb3cteCddID0gJ2F1dG8nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmouY29udGVudC5zdHlsZS53aWR0aCA9IG9iai5vcHRpb25zLnRhYmxlV2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gV2l0aCB0b29sYmFyc1xyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMudGFibGVPdmVyZmxvdyAhPSB0cnVlICYmIG9iai5vcHRpb25zLnRvb2xiYXIpIHtcclxuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3dpdGgtdG9vbGJhcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQWN0aW9uc1xyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uRHJhZyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoudGhlYWQuY2xhc3NMaXN0LmFkZCgnZHJhZ2dhYmxlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmNvbHVtblJlc2l6ZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoudGhlYWQuY2xhc3NMaXN0LmFkZCgncmVzaXphYmxlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnJvd0RyYWcgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgb2JqLnRib2R5LmNsYXNzTGlzdC5hZGQoJ2RyYWdnYWJsZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5yb3dSZXNpemUgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgb2JqLnRib2R5LmNsYXNzTGlzdC5hZGQoJ3Jlc2l6YWJsZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gTG9hZCBkYXRhXHJcbiAgICAgICAgICAgIG9iai5zZXREYXRhKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gU3R5bGVcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnN0eWxlKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouc2V0U3R5bGUob2JqLm9wdGlvbnMuc3R5bGUsIG51bGwsIG51bGwsIDEsIDEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDbGFzc2VzXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5jbGFzc2VzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgayA9IE9iamVjdC5rZXlzKG9iai5vcHRpb25zLmNsYXNzZXMpO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBqZXhjZWwuZ2V0SWRGcm9tQ29sdW1uTmFtZShrW2ldLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBvYmoucmVjb3Jkc1tjZWxsWzFdXVtjZWxsWzBdXS5jbGFzc0xpc3QuYWRkKG9iai5vcHRpb25zLmNsYXNzZXNba1tpXV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWZyZXNoIHRoZSBkYXRhXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHJldHVybiB2b2lkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnJlZnJlc2ggPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnVybCkge1xyXG4gICAgICAgICAgICAgICAgLy8gTG9hZGluZ1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmxvYWRpbmdTcGluID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBqU3VpdGVzLmxvYWRpbmcuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBqU3VpdGVzLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogb2JqLm9wdGlvbnMudXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogb2JqLm9wdGlvbnMubWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IG9iai5vcHRpb25zLnJlcXVlc3RWYXJpYWJsZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhID0gKHJlc3VsdC5kYXRhKSA/IHJlc3VsdC5kYXRhIDogcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIHRhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zZXREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhpZGUgc3BpblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMubG9hZGluZ1NwaW4gPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalN1aXRlcy5sb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb2JqLnNldERhdGEoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IGRhdGFcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0gYXJyYXkgZGF0YSBJbiBjYXNlIG5vIGRhdGEgaXMgc2VudCwgZGVmYXVsdCBpcyByZWxvYWRlZFxyXG4gICAgICAgICAqIEByZXR1cm4gdm9pZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5zZXREYXRhID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZGF0YVxyXG4gICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihkYXRhKSA9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIERhdGFcclxuICAgICAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuZGF0YSA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUHJlcGFyZSBkYXRhXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5kYXRhICYmIG9iai5vcHRpb25zLmRhdGFbMF0pIHtcclxuICAgICAgICAgICAgICAgIGlmICghIEFycmF5LmlzQXJyYXkob2JqLm9wdGlvbnMuZGF0YVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JqLm9wdGlvbnMuZGF0YS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLm9wdGlvbnMuY29sdW1ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93W2ldID0gb2JqLm9wdGlvbnMuZGF0YVtqXVtvYmoub3B0aW9ucy5jb2x1bW5zW2ldLm5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChyb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFkanVzdCBtaW5pbWFsIGRpbWVuc2lvbnNcclxuICAgICAgICAgICAgdmFyIGogPSAwO1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHZhciBzaXplX2kgPSBvYmoub3B0aW9ucy5jb2x1bW5zLmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIHNpemVfaiA9IG9iai5vcHRpb25zLmRhdGEubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgbWluX2kgPSBvYmoub3B0aW9ucy5taW5EaW1lbnNpb25zWzBdO1xyXG4gICAgICAgICAgICB2YXIgbWluX2ogPSBvYmoub3B0aW9ucy5taW5EaW1lbnNpb25zWzFdO1xyXG4gICAgICAgICAgICB2YXIgbWF4X2kgPSBtaW5faSA+IHNpemVfaSA/IG1pbl9pIDogc2l6ZV9pO1xyXG4gICAgICAgICAgICB2YXIgbWF4X2ogPSBtaW5faiA+IHNpemVfaiA/IG1pbl9qIDogc2l6ZV9qO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBtYXhfajsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbWF4X2k7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5kYXRhW2pdID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhW2pdID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmRhdGFbal1baV0gPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmRhdGFbal1baV0gPSAnJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXNldCBjb250YWluZXJzXHJcbiAgICAgICAgICAgIG9iai5yb3dzID0gW107XHJcbiAgICAgICAgICAgIG9iai5yZXN1bHRzID0gbnVsbDtcclxuICAgICAgICAgICAgb2JqLnJlY29yZHMgPSBbXTtcclxuICAgICAgICAgICAgb2JqLmhpc3RvcnkgPSBbXTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXNldCBpbnRlcm5hbCBjb250cm9sbGVyc1xyXG4gICAgICAgICAgICBvYmouaGlzdG9yeUluZGV4ID0gLTE7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmVzZXQgZGF0YVxyXG4gICAgICAgICAgICBvYmoudGJvZHkuaW5uZXJIVE1MID0gJyc7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gTGF6eSBsb2FkaW5nXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5sYXp5TG9hZGluZyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBMb2FkIG9ubHkgMTAwIHJlY29yZHNcclxuICAgICAgICAgICAgICAgIHZhciBzdGFydE51bWJlciA9IDBcclxuICAgICAgICAgICAgICAgIHZhciBmaW5hbE51bWJlciA9IG9iai5vcHRpb25zLmRhdGEubGVuZ3RoIDwgMTAwID8gb2JqLm9wdGlvbnMuZGF0YS5sZW5ndGggOiAxMDA7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5wYWdpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMucGFnaW5hdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0pzcHJlYWRzaGVldDogUGFnaW5hdGlvbiB3aWxsIGJlIGRpc2FibGUgZHVlIHRoZSBsYXp5TG9hZGluZycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5vcHRpb25zLnBhZ2luYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIC8vIFBhZ2luYXRpb25cclxuICAgICAgICAgICAgICAgIGlmICghIG9iai5wYWdlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnBhZ2VOdW1iZXIgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHF1YW50aXR5UGVyUGFnZSA9IG9iai5vcHRpb25zLnBhZ2luYXRpb247XHJcbiAgICAgICAgICAgICAgICBzdGFydE51bWJlciA9IChvYmoub3B0aW9ucy5wYWdpbmF0aW9uICogb2JqLnBhZ2VOdW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgZmluYWxOdW1iZXIgPSAob2JqLm9wdGlvbnMucGFnaW5hdGlvbiAqIG9iai5wYWdlTnVtYmVyKSArIG9iai5vcHRpb25zLnBhZ2luYXRpb247XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5kYXRhLmxlbmd0aCA8IGZpbmFsTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmluYWxOdW1iZXIgPSBvYmoub3B0aW9ucy5kYXRhLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBzdGFydE51bWJlciA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmluYWxOdW1iZXIgPSBvYmoub3B0aW9ucy5kYXRhLmxlbmd0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEFwcGVuZCBub2RlcyB0byB0aGUgSFRNTFxyXG4gICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgb2JqLm9wdGlvbnMuZGF0YS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHJvd1xyXG4gICAgICAgICAgICAgICAgdmFyIHRyID0gb2JqLmNyZWF0ZVJvdyhqLCBvYmoub3B0aW9ucy5kYXRhW2pdKTtcclxuICAgICAgICAgICAgICAgIC8vIEFwcGVuZCBsaW5lIHRvIHRoZSB0YWJsZVxyXG4gICAgICAgICAgICAgICAgaWYgKGogPj0gc3RhcnROdW1iZXIgJiYgaiA8IGZpbmFsTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnRib2R5LmFwcGVuZENoaWxkKHRyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5sYXp5TG9hZGluZyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEbyBub3QgY3JlYXRlIHBhZ2luYXRpb24gd2l0aCBsYXp5bG9hZGluZyBhY3RpdmF0ZWRcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChvYmoub3B0aW9ucy5wYWdpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoudXBkYXRlUGFnaW5hdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gTWVyZ2UgY2VsbHNcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLm1lcmdlQ2VsbHMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqLm9wdGlvbnMubWVyZ2VDZWxscyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbnVtID0gb2JqLm9wdGlvbnMubWVyZ2VDZWxsc1trZXlzW2ldXTtcclxuICAgICAgICAgICAgICAgICAgICBvYmouc2V0TWVyZ2Uoa2V5c1tpXSwgbnVtWzBdLCBudW1bMV0sIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGEgdGFibGUgd2l0aCBjdXN0b20gY29uZmlndXJhdGlvbnMgaWYgYXBwbGljYWJsZVxyXG4gICAgICAgICAgICBvYmoudXBkYXRlVGFibGUoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIE9ubG9hZFxyXG4gICAgICAgICAgICBvYmouZGlzcGF0Y2goJ29ubG9hZCcsIGVsLCBvYmopO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHRoZSB3aG9sZSB0YWJsZSBkYXRhXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHBhcmFtIGJvb2wgZ2V0IGhpZ2hsaWdodGVkIGNlbGxzIG9ubHlcclxuICAgICAgICAgKiBAcmV0dXJuIGFycmF5IGRhdGFcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouZ2V0RGF0YSA9IGZ1bmN0aW9uKGhpZ2hsaWdodGVkLCBkYXRhT25seSkge1xyXG4gICAgICAgICAgICAvLyBDb250cm9sIHZhcnNcclxuICAgICAgICAgICAgdmFyIGRhdGFzZXQgPSBbXTtcclxuICAgICAgICAgICAgdmFyIHB4ID0gMDtcclxuICAgICAgICAgICAgdmFyIHB5ID0gMDtcclxuXHJcbiAgICAgICAgICAgIC8vIERhdGEgdHlwZVxyXG4gICAgICAgICAgICB2YXIgZGF0YVR5cGUgPSBkYXRhT25seSA9PSB0cnVlIHx8IG9iai5vcHRpb25zLmNvcHlDb21wYXRpYmlsaXR5ID09IGZhbHNlID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy8gQ29sdW1uIGFuZCByb3cgbGVuZ3RoXHJcbiAgICAgICAgICAgIHZhciB4ID0gb2JqLm9wdGlvbnMuY29sdW1ucy5sZW5ndGhcclxuICAgICAgICAgICAgdmFyIHkgPSBvYmoub3B0aW9ucy5kYXRhLmxlbmd0aFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEdvIHRocm91Z2ggdGhlIGNvbHVtbnMgdG8gZ2V0IHRoZSBkYXRhXHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgeTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBweCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIENlbGwgc2VsZWN0ZWQgb3IgZnVsbHNldFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGhpZ2hsaWdodGVkIHx8IG9iai5yZWNvcmRzW2pdW2ldLmNsYXNzTGlzdC5jb250YWlucygnaGlnaGxpZ2h0JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIGRhdGFzZXRbcHldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0W3B5XSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIGRhdGFUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0W3B5XVtweF0gPSBvYmoucmVjb3Jkc1tqXVtpXS5pbm5lckhUTUw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0W3B5XVtweF0gPSBvYmoub3B0aW9ucy5kYXRhW2pdW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHB4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHB4ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHB5Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgcmV0dXJuIGRhdGFzZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEdldCBqc29uIGRhdGEgYnkgcm93IG51bWJlclxyXG4gICAgICAgICpcclxuICAgICAgICAqIEBwYXJhbSBpbnRlZ2VyIHJvdyBudW1iZXJcclxuICAgICAgICAqIEByZXR1cm4gb2JqZWN0XHJcbiAgICAgICAgKi9cclxuICAgICAgICBvYmouZ2V0SnNvblJvdyA9IGZ1bmN0aW9uKHJvd051bWJlcikge1xyXG4gICAgICAgICAgICB2YXIgcm93RGF0YSA9IG9iai5vcHRpb25zLmRhdGFbcm93TnVtYmVyXTtcclxuICAgICAgICAgICAgdmFyIHggPSBvYmoub3B0aW9ucy5jb2x1bW5zLmxlbmd0aFxyXG5cclxuICAgICAgICAgICAgdmFyIHJvdyA9IHt9O1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMuY29sdW1uc1tpXS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuY29sdW1uc1tpXS5uYW1lID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJvd1tvYmoub3B0aW9ucy5jb2x1bW5zW2ldLm5hbWVdID0gcm93RGF0YVtpXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJvdztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCB0aGUgd2hvbGUgdGFibGUgZGF0YVxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSBib29sIGhpZ2hsaWdodGVkIGNlbGxzIG9ubHlcclxuICAgICAgICAgKiBAcmV0dXJuIHN0cmluZyB2YWx1ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5nZXRKc29uID0gZnVuY3Rpb24oaGlnaGxpZ2h0ZWQpIHtcclxuICAgICAgICAgICAgLy8gQ29udHJvbCB2YXJzXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ29sdW1uIGFuZCByb3cgbGVuZ3RoXHJcbiAgICAgICAgICAgIHZhciB4ID0gb2JqLm9wdGlvbnMuY29sdW1ucy5sZW5ndGhcclxuICAgICAgICAgICAgdmFyIHkgPSBvYmoub3B0aW9ucy5kYXRhLmxlbmd0aFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEdvIHRocm91Z2ggdGhlIGNvbHVtbnMgdG8gZ2V0IHRoZSBkYXRhXHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgeTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaGlnaGxpZ2h0ZWQgfHwgb2JqLnJlY29yZHNbal1baV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWdobGlnaHQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIG9iai5vcHRpb25zLmNvbHVtbnNbaV0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuY29sdW1uc1tpXS5uYW1lID0gaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dbb2JqLm9wdGlvbnMuY29sdW1uc1tpXS5uYW1lXSA9IG9iai5vcHRpb25zLmRhdGFbal1baV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAocm93ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLnB1c2gocm93KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByZXBhcmUgSlNPTiBpbiB0aGUgY29ycmVjdCBmb3JtYXRcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmoucHJlcGFyZUpzb24gPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBkYXRhW2ldLng7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IGRhdGFbaV0ueTtcclxuICAgICAgICAgICAgICAgIHZhciBrID0gb2JqLm9wdGlvbnMuY29sdW1uc1t4XS5uYW1lID8gb2JqLm9wdGlvbnMuY29sdW1uc1t4XS5uYW1lIDogeDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgcm93XHJcbiAgICAgICAgICAgICAgICBpZiAoISByb3dzW3ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93c1t5XSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93OiB5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcm93c1t5XS5kYXRhW2tdID0gZGF0YVtpXS5uZXdWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRmlsdGVyIHJvd3NcclxuICAgICAgICAgICAgcmV0dXJuIHJvd3MuZmlsdGVyKGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsICE9IG51bGw7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUG9zdCBqc29uIHRvIGEgcmVtb3RlIHNlcnZlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5zYXZlID0gZnVuY3Rpb24odXJsLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIFBhcnNlIGFueXRoaW5nIGluIHRoZSBkYXRhIGJlZm9yZSBzZW5kaW5nIHRvIHRoZSBzZXJ2ZXJcclxuICAgICAgICAgICAgdmFyIHJldCA9IG9iai5kaXNwYXRjaCgnb25iZWZvcmVzYXZlJywgZWwsIG9iaiwgZGF0YSk7XHJcbiAgICAgICAgICAgIGlmIChyZXQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmV0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSB1cGRhdGVcclxuICAgICAgICAgICAgalN1aXRlcy5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeyBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSB9LFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRXZlbnRcclxuICAgICAgICAgICAgICAgICAgICBvYmouZGlzcGF0Y2goJ29uc2F2ZScsIGVsLCBvYmosIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBhIHJvdyBkYXRhIGJ5IHJvd051bWJlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5nZXRSb3dEYXRhID0gZnVuY3Rpb24ocm93TnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvYmoub3B0aW9ucy5kYXRhW3Jvd051bWJlcl07XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IGEgcm93IGRhdGEgYnkgcm93TnVtYmVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnNldFJvd0RhdGEgPSBmdW5jdGlvbihyb3dOdW1iZXIsIGRhdGEpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmouaGVhZGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGNlbGxcclxuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5OYW1lID0gamV4Y2VsLmdldENvbHVtbk5hbWVGcm9tSWQoWyBpLCByb3dOdW1iZXIgXSk7XHJcbiAgICAgICAgICAgICAgICAvLyBTZXQgdmFsdWVcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhW2ldICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouc2V0VmFsdWUoY29sdW1uTmFtZSwgZGF0YVtpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgYSBjb2x1bW4gZGF0YSBieSBjb2x1bW5OdW1iZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouZ2V0Q29sdW1uRGF0YSA9IGZ1bmN0aW9uKGNvbHVtbk51bWJlcikge1xyXG4gICAgICAgICAgICB2YXIgZGF0YXNldCA9IFtdO1xyXG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIHRoZSByb3dzIHRvIGdldCB0aGUgZGF0YVxyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iai5vcHRpb25zLmRhdGEubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGRhdGFzZXQucHVzaChvYmoub3B0aW9ucy5kYXRhW2pdW2NvbHVtbk51bWJlcl0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhc2V0O1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldCBhIGNvbHVtbiBkYXRhIGJ5IGNvbE51bWJlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5zZXRDb2x1bW5EYXRhID0gZnVuY3Rpb24oY29sTnVtYmVyLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JqLnJvd3MubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjZWxsXHJcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uTmFtZSA9IGpleGNlbC5nZXRDb2x1bW5OYW1lRnJvbUlkKFsgY29sTnVtYmVyLCBqIF0pO1xyXG4gICAgICAgICAgICAgICAgLy8gU2V0IHZhbHVlXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVtqXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnNldFZhbHVlKGNvbHVtbk5hbWUsIGRhdGFbal0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlIHJvd1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5jcmVhdGVSb3cgPSBmdW5jdGlvbihqLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBjb250YWluZXJcclxuICAgICAgICAgICAgaWYgKCEgb2JqLnJlY29yZHNbal0pIHtcclxuICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW2pdID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gRGVmYXVsdCBkYXRhXHJcbiAgICAgICAgICAgIGlmICghIGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gb2JqLm9wdGlvbnMuZGF0YVtqXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBOZXcgbGluZSBvZiBkYXRhIHRvIGJlIGFwcGVuZCBpbiB0aGUgdGFibGVcclxuICAgICAgICAgICAgb2JqLnJvd3Nbal0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4gICAgICAgICAgICBvYmoucm93c1tqXS5zZXRBdHRyaWJ1dGUoJ2RhdGEteScsIGopO1xyXG4gICAgICAgICAgICAvLyBJbmRleFxyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBudWxsO1xyXG4gICAgICAgICAgICAvLyBEZWZpbml0aW9uc1xyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMucm93c1tqXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnJvd3Nbal0uaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJvd3Nbal0uc3R5bGUuaGVpZ2h0ID0gb2JqLm9wdGlvbnMucm93c1tqXS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMucm93c1tqXS50aXRsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gb2JqLm9wdGlvbnMucm93c1tqXS50aXRsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoISBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBwYXJzZUludChqICsgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gUm93IG51bWJlciBsYWJlbFxyXG4gICAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4gICAgICAgICAgICB0ZC5pbm5lckhUTUwgPSBpbmRleDtcclxuICAgICAgICAgICAgdGQuc2V0QXR0cmlidXRlKCdkYXRhLXknLCBqKTtcclxuICAgICAgICAgICAgdGQuY2xhc3NOYW1lID0gJ2pleGNlbF9yb3cnO1xyXG4gICAgICAgICAgICBvYmoucm93c1tqXS5hcHBlbmRDaGlsZCh0ZCk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gRGF0YSBjb2x1bW5zXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLm9wdGlvbnMuY29sdW1ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gTmV3IGNvbHVtbiBvZiBkYXRhIHRvIGJlIGFwcGVuZCBpbiB0aGUgbGluZVxyXG4gICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbal1baV0gPSBvYmouY3JlYXRlQ2VsbChpLCBqLCBkYXRhW2ldKTtcclxuICAgICAgICAgICAgICAgIC8vIEFkZCBjb2x1bW4gdG8gdGhlIHJvd1xyXG4gICAgICAgICAgICAgICAgb2JqLnJvd3Nbal0uYXBwZW5kQ2hpbGQob2JqLnJlY29yZHNbal1baV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQWRkIHJvdyB0byB0aGUgdGFibGUgYm9keVxyXG4gICAgICAgICAgICByZXR1cm4gb2JqLnJvd3Nbal07XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgb2JqLnBhcnNlVmFsdWUgPSBmdW5jdGlvbihpLCBqLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoKCcnK3ZhbHVlKS5zdWJzdHIoMCwxKSA9PSAnPScgJiYgb2JqLm9wdGlvbnMucGFyc2VGb3JtdWxhcyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG9iai5leGVjdXRlRm9ybXVsYSh2YWx1ZSwgaSwgailcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1tpXS5tYXNrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVjaW1hbCA9IG9iai5vcHRpb25zLmNvbHVtbnNbaV0uZGVjaW1hbCB8fCAnLic7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9ICcnICsgalN1aXRlcy5tYXNrLnJ1bih2YWx1ZSwgb2JqLm9wdGlvbnMuY29sdW1uc1tpXS5tYXNrLCBkZWNpbWFsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlIGNlbGxcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouY3JlYXRlQ2VsbCA9IGZ1bmN0aW9uKGksIGosIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBjZWxsIGFuZCBwcm9wZXJ0aWVzXHJcbiAgICAgICAgICAgIHZhciB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgICAgICAgIHRkLnNldEF0dHJpYnV0ZSgnZGF0YS14JywgaSk7XHJcbiAgICAgICAgICAgIHRkLnNldEF0dHJpYnV0ZSgnZGF0YS15Jywgaik7XHJcblxyXG4gICAgICAgICAgICAvLyBTZWN1cml0eVxyXG4gICAgICAgICAgICBpZiAoKCcnK3ZhbHVlKS5zdWJzdHIoMCwxKSA9PSAnPScgJiYgb2JqLm9wdGlvbnMuc2VjdXJlRm9ybXVsYXMgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IHNlY3VyZUZvcm11bGEodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbCAhPSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgZGF0YSBjb250YWluZXJcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ3VzdG9tIGNvbHVtblxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1tpXS5lZGl0b3IpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5zdHJpcEhUTUwgPT09IGZhbHNlIHx8IG9iai5vcHRpb25zLmNvbHVtbnNbaV0uc3RyaXBIVE1MID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRkLmlubmVySFRNTCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZC5pbm5lclRleHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMuY29sdW1uc1tpXS5lZGl0b3IuY3JlYXRlQ2VsbCkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRkID0gb2JqLm9wdGlvbnMuY29sdW1uc1tpXS5lZGl0b3IuY3JlYXRlQ2VsbCh0ZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBIaWRkZW4gY29sdW1uXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1tpXS50eXBlID09ICdoaWRkZW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICB0ZC5pbm5lclRleHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1tpXS50eXBlID09ICdjaGVja2JveCcgfHwgb2JqLm9wdGlvbnMuY29sdW1uc1tpXS50eXBlID09ICdyYWRpbycpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgaW5wdXRcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC50eXBlID0gb2JqLm9wdGlvbnMuY29sdW1uc1tpXS50eXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQubmFtZSA9ICdjJyArIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jaGVja2VkID0gKHZhbHVlID09IDEgfHwgdmFsdWUgPT0gdHJ1ZSB8fCB2YWx1ZSA9PSAndHJ1ZScpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQub25jbGljayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmouc2V0VmFsdWUodGQsIHRoaXMuY2hlY2tlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1tpXS5yZWFkT25seSA9PSB0cnVlIHx8IG9iai5vcHRpb25zLmVkaXRhYmxlID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQXBwZW5kIHRvIHRoZSB0YWJsZVxyXG4gICAgICAgICAgICAgICAgICAgIHRkLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgdmFsdWVzIGFyZSBjb3JyZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuZGF0YVtqXVtpXSA9IGVsZW1lbnQuY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1tpXS50eXBlID09ICdjYWxlbmRhcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUcnkgZm9ybWF0dGVkIGRhdGVcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybWF0dGVkID0galN1aXRlcy5jYWxlbmRhci5leHRyYWN0RGF0ZUZyb21TdHJpbmcodmFsdWUsIG9iai5vcHRpb25zLmNvbHVtbnNbaV0ub3B0aW9ucy5mb3JtYXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBjYWxlbmRhciBjZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgdGQuaW5uZXJUZXh0ID0galN1aXRlcy5jYWxlbmRhci5nZXREYXRlU3RyaW5nKGZvcm1hdHRlZCA/IGZvcm1hdHRlZCA6IHZhbHVlLCBvYmoub3B0aW9ucy5jb2x1bW5zW2ldLm9wdGlvbnMuZm9ybWF0KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1tpXS50eXBlID09ICdkcm9wZG93bicgfHwgb2JqLm9wdGlvbnMuY29sdW1uc1tpXS50eXBlID09ICdhdXRvY29tcGxldGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGRyb3Bkb3duIGNlbGxcclxuICAgICAgICAgICAgICAgICAgICB0ZC5jbGFzc0xpc3QuYWRkKCdqZXhjZWxfZHJvcGRvd24nKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZC5pbm5lclRleHQgPSBvYmouZ2V0RHJvcERvd25WYWx1ZShpLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbaV0udHlwZSA9PSAnY29sb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbaV0ucmVuZGVyID09ICdzcXVhcmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvci5jbGFzc05hbWUgPSAnY29sb3InO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGQuYXBwZW5kQ2hpbGQoY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRkLnN0eWxlLmNvbG9yID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRkLmlubmVyVGV4dCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1tpXS50eXBlID09ICdpbWFnZScpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWUuc3Vic3RyKDAsIDEwKSA9PSAnZGF0YTppbWFnZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRkLmFwcGVuZENoaWxkKGltZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1tpXS50eXBlID09ICdodG1sJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZC5pbm5lckhUTUwgPSBzdHJpcFNjcmlwdChvYmoucGFyc2VWYWx1ZShpLCBqLCB2YWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5zdHJpcEhUTUwgPT09IGZhbHNlIHx8IG9iai5vcHRpb25zLmNvbHVtbnNbaV0uc3RyaXBIVE1MID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGQuaW5uZXJIVE1MID0gc3RyaXBTY3JpcHQob2JqLnBhcnNlVmFsdWUoaSwgaiwgdmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRkLmlubmVyVGV4dCA9IG9iai5wYXJzZVZhbHVlKGksIGosIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJlYWRvbmx5XHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW2ldLnJlYWRPbmx5ID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHRkLmNsYXNzTmFtZSA9ICdyZWFkb25seSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBUZXh0IGFsaWduXHJcbiAgICAgICAgICAgIHZhciBjb2xBbGlnbiA9IG9iai5vcHRpb25zLmNvbHVtbnNbaV0uYWxpZ24gPyBvYmoub3B0aW9ucy5jb2x1bW5zW2ldLmFsaWduIDogJ2NlbnRlcic7XHJcbiAgICAgICAgICAgIHRkLnN0eWxlLnRleHRBbGlnbiA9IGNvbEFsaWduO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFdyYXAgb3B0aW9uXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW2ldLndvcmRXcmFwICE9IGZhbHNlICYmIChvYmoub3B0aW9ucy53b3JkV3JhcCA9PSB0cnVlIHx8IG9iai5vcHRpb25zLmNvbHVtbnNbaV0ud29yZFdyYXAgPT0gdHJ1ZSB8fCB0ZC5pbm5lckhUTUwubGVuZ3RoID4gMjAwKSkge1xyXG4gICAgICAgICAgICAgICAgdGQuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBPdmVyZmxvd1xyXG4gICAgICAgICAgICBpZiAoaSA+IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudGV4dE92ZXJmbG93ID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgfHwgdGQuaW5uZXJIVE1MKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW2pdW2ktMV0uc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSBvYmoub3B0aW9ucy5jb2x1bW5zLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRkLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRkO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIG9iai5jcmVhdGVDZWxsSGVhZGVyID0gZnVuY3Rpb24oY29sTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBjb2wgZ2xvYmFsIGNvbnRyb2xcclxuICAgICAgICAgICAgdmFyIGNvbFdpZHRoID0gb2JqLm9wdGlvbnMuY29sdW1uc1tjb2xOdW1iZXJdLndpZHRoID8gb2JqLm9wdGlvbnMuY29sdW1uc1tjb2xOdW1iZXJdLndpZHRoIDogb2JqLm9wdGlvbnMuZGVmYXVsdENvbFdpZHRoO1xyXG4gICAgICAgICAgICB2YXIgY29sQWxpZ24gPSBvYmoub3B0aW9ucy5jb2x1bW5zW2NvbE51bWJlcl0uYWxpZ24gPyBvYmoub3B0aW9ucy5jb2x1bW5zW2NvbE51bWJlcl0uYWxpZ24gOiBvYmoub3B0aW9ucy5kZWZhdWx0Q29sQWxpZ247XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGhlYWRlciBjZWxsXHJcbiAgICAgICAgICAgIG9iai5oZWFkZXJzW2NvbE51bWJlcl0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuc3RyaXBIVE1MKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouaGVhZGVyc1tjb2xOdW1iZXJdLmlubmVyVGV4dCA9IG9iai5vcHRpb25zLmNvbHVtbnNbY29sTnVtYmVyXS50aXRsZSA/IG9iai5vcHRpb25zLmNvbHVtbnNbY29sTnVtYmVyXS50aXRsZSA6IGpleGNlbC5nZXRDb2x1bW5OYW1lKGNvbE51bWJlcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvYmouaGVhZGVyc1tjb2xOdW1iZXJdLmlubmVySFRNTCA9IG9iai5vcHRpb25zLmNvbHVtbnNbY29sTnVtYmVyXS50aXRsZSA/IG9iai5vcHRpb25zLmNvbHVtbnNbY29sTnVtYmVyXS50aXRsZSA6IGpleGNlbC5nZXRDb2x1bW5OYW1lKGNvbE51bWJlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb2JqLmhlYWRlcnNbY29sTnVtYmVyXS5zZXRBdHRyaWJ1dGUoJ2RhdGEteCcsIGNvbE51bWJlcik7XHJcbiAgICAgICAgICAgIG9iai5oZWFkZXJzW2NvbE51bWJlcl0uc3R5bGUudGV4dEFsaWduID0gY29sQWxpZ247XHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW2NvbE51bWJlcl0udGl0bGUpIHtcclxuICAgICAgICAgICAgICAgIG9iai5oZWFkZXJzW2NvbE51bWJlcl0uc2V0QXR0cmlidXRlKCd0aXRsZScsIG9iai5vcHRpb25zLmNvbHVtbnNbY29sTnVtYmVyXS50ZXh0Q29udGVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBXaWR0aCBjb250cm9sXHJcbiAgICAgICAgICAgIG9iai5jb2xncm91cFtjb2xOdW1iZXJdID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY29sJyk7XHJcbiAgICAgICAgICAgIG9iai5jb2xncm91cFtjb2xOdW1iZXJdLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBjb2xXaWR0aCk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gSGlkZGVuIGNvbHVtblxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1tjb2xOdW1iZXJdLnR5cGUgPT0gJ2hpZGRlbicpIHtcclxuICAgICAgICAgICAgICAgIG9iai5oZWFkZXJzW2NvbE51bWJlcl0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgIG9iai5jb2xncm91cFtjb2xOdW1iZXJdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSBhIG5lc3RlZCBoZWFkZXIgdGl0bGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmoudXBkYXRlTmVzdGVkSGVhZGVyID0gZnVuY3Rpb24oeCwgeSwgdGl0bGUpIHtcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLm5lc3RlZEhlYWRlcnNbeV1beF0udGl0bGUpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm5lc3RlZEhlYWRlcnNbeV1beF0udGl0bGUgPSB0aXRsZTtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm5lc3RlZEhlYWRlcnNbeV0uZWxlbWVudC5jaGlsZHJlblt4KzFdLmlubmVyVGV4dCA9IHRpdGxlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGUgYSBuZXN0ZWQgaGVhZGVyIG9iamVjdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5jcmVhdGVOZXN0ZWRIZWFkZXIgPSBmdW5jdGlvbihuZXN0ZWRJbmZvcm1hdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4gICAgICAgICAgICB0ci5jbGFzc0xpc3QuYWRkKCdqZXhjZWxfbmVzdGVkJyk7XHJcbiAgICAgICAgICAgIHZhciB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcclxuICAgICAgICAgICAgLy8gRWxlbWVudFxyXG4gICAgICAgICAgICBuZXN0ZWRJbmZvcm1hdGlvbi5lbGVtZW50ID0gdHI7XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIGhlYWRlckluZGV4ID0gMDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXN0ZWRJbmZvcm1hdGlvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVmYXVsdCB2YWx1ZXNcclxuICAgICAgICAgICAgICAgIGlmICghIG5lc3RlZEluZm9ybWF0aW9uW2ldLmNvbHNwYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXN0ZWRJbmZvcm1hdGlvbltpXS5jb2xzcGFuID0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghIG5lc3RlZEluZm9ybWF0aW9uW2ldLmFsaWduKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmVzdGVkSW5mb3JtYXRpb25baV0uYWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghIG5lc3RlZEluZm9ybWF0aW9uW2ldLnRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmVzdGVkSW5mb3JtYXRpb25baV0udGl0bGUgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gTnVtYmVyIG9mIGNvbHVtbnNcclxuICAgICAgICAgICAgICAgIHZhciBudW1iZXJPZkNvbHVtbnMgPSBuZXN0ZWRJbmZvcm1hdGlvbltpXS5jb2xzcGFuO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBDbGFzc2VzIGNvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgLy8gSGVhZGVyIGNsYXNzZXMgZm9yIHRoaXMgY2VsbFxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBudW1iZXJPZkNvbHVtbnM7IHgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW2hlYWRlckluZGV4XSAmJiBvYmoub3B0aW9ucy5jb2x1bW5zW2hlYWRlckluZGV4XS50eXBlID09ICdoaWRkZW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlck9mQ29sdW1ucysrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ucHVzaChoZWFkZXJJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVySW5kZXgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlZCB0aGUgbmVzdGVkIGNlbGxcclxuICAgICAgICAgICAgICAgIHZhciB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgICAgICAgICAgICB0ZC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29sdW1uJywgY29sdW1uLmpvaW4oJywnKSk7XHJcbiAgICAgICAgICAgICAgICB0ZC5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBuZXN0ZWRJbmZvcm1hdGlvbltpXS5jb2xzcGFuKTtcclxuICAgICAgICAgICAgICAgIHRkLnNldEF0dHJpYnV0ZSgnYWxpZ24nLCBuZXN0ZWRJbmZvcm1hdGlvbltpXS5hbGlnbik7XHJcbiAgICAgICAgICAgICAgICB0ZC5pbm5lclRleHQgPSBuZXN0ZWRJbmZvcm1hdGlvbltpXS50aXRsZTtcclxuICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0cjtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGUgdG9vbGJhclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5jcmVhdGVUb29sYmFyID0gZnVuY3Rpb24odG9vbGJhcikge1xyXG4gICAgICAgICAgICBpZiAodG9vbGJhcikge1xyXG4gICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMudG9vbGJhciA9IHRvb2xiYXI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG9vbGJhciA9IG9iai5vcHRpb25zLnRvb2xiYXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b29sYmFyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodG9vbGJhcltpXS50eXBlID09ICdpJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b29sYmFySXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcclxuICAgICAgICAgICAgICAgICAgICB0b29sYmFySXRlbS5jbGFzc0xpc3QuYWRkKCdqZXhjZWxfdG9vbGJhcl9pdGVtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0uY2xhc3NMaXN0LmFkZCgnbWF0ZXJpYWwtaWNvbnMnKTtcclxuICAgICAgICAgICAgICAgICAgICB0b29sYmFySXRlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaycsIHRvb2xiYXJbaV0uayk7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLXYnLCB0b29sYmFyW2ldLnYpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJdGVtLnNldEF0dHJpYnV0ZSgnaWQnLCB0b29sYmFyW2ldLmlkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b29sYmFyW2ldLnRvb2x0aXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0uc2V0QXR0cmlidXRlKCd0aXRsZScsIHRvb2xiYXJbaV0udG9vbHRpcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBjbGlja1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b29sYmFyW2ldLm9uY2xpY2sgJiYgdHlwZW9mKHRvb2xiYXJbaV0ub25jbGljaykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0ub25jbGljayA9IChmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFyW2JdLm9uY2xpY2soZWwsIG9iaiwgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KShpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFySXRlbS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgayA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWsnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNldFN0eWxlKG9iai5oaWdobGlnaHRlZCwgaywgdik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQXBwZW5kIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICB0b29sYmFySXRlbS5pbm5lclRleHQgPSB0b29sYmFyW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnRvb2xiYXIuYXBwZW5kQ2hpbGQodG9vbGJhckl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0b29sYmFyW2ldLnR5cGUgPT0gJ3NlbGVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgIHZhciB0b29sYmFySXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0uY2xhc3NMaXN0LmFkZCgnamV4Y2VsX3Rvb2xiYXJfaXRlbScpO1xyXG4gICAgICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLWsnLCB0b29sYmFyW2ldLmspO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gVG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgaWYgKHRvb2xiYXJbaV0udG9vbHRpcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJdGVtLnNldEF0dHJpYnV0ZSgndGl0bGUnLCB0b29sYmFyW2ldLnRvb2x0aXApO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIG9uY2hhbmdlXHJcbiAgICAgICAgICAgICAgICAgICBpZiAodG9vbGJhcltpXS5vbmNoYW5nZSAmJiB0eXBlb2YodG9vbGJhcltpXS5vbmNoYW5nZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFySXRlbS5vbmNoYW5nZSA9IHRvb2xiYXJbaV0ub25jaGFuZ2U7XHJcbiAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJdGVtLm9uY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtaycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouc2V0U3R5bGUob2JqLmhpZ2hsaWdodGVkLCBrLCB0aGlzLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAvLyBBZGQgb3B0aW9ucyB0byB0aGUgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCB0b29sYmFyW2ldLnYubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvb2xiYXJEcm9wZG93bk9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFyRHJvcGRvd25PcHRpb24udmFsdWUgPSB0b29sYmFyW2ldLnZbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJEcm9wZG93bk9wdGlvbi5pbm5lclRleHQgPSB0b29sYmFyW2ldLnZbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJdGVtLmFwcGVuZENoaWxkKHRvb2xiYXJEcm9wZG93bk9wdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICBvYmoudG9vbGJhci5hcHBlbmRDaGlsZCh0b29sYmFySXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRvb2xiYXJbaV0udHlwZSA9PSAnY29sb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIHZhciB0b29sYmFySXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcclxuICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0uY2xhc3NMaXN0LmFkZCgnamV4Y2VsX3Rvb2xiYXJfaXRlbScpO1xyXG4gICAgICAgICAgICAgICAgICAgICB0b29sYmFySXRlbS5jbGFzc0xpc3QuYWRkKCdtYXRlcmlhbC1pY29ucycpO1xyXG4gICAgICAgICAgICAgICAgICAgICB0b29sYmFySXRlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaycsIHRvb2xiYXJbaV0uayk7XHJcbiAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS12JywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAvLyBUb29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgIGlmICh0b29sYmFyW2ldLnRvb2x0aXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJdGVtLnNldEF0dHJpYnV0ZSgndGl0bGUnLCB0b29sYmFyW2ldLnRvb2x0aXApO1xyXG4gICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgIG9iai50b29sYmFyLmFwcGVuZENoaWxkKHRvb2xiYXJJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0uaW5uZXJUZXh0ID0gdG9vbGJhcltpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICBqU3VpdGVzLmNvbG9yKHRvb2xiYXJJdGVtLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBvbmNoYW5nZTpmdW5jdGlvbihvLCB2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGsgPSBvLmdldEF0dHJpYnV0ZSgnZGF0YS1rJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNldFN0eWxlKG9iai5oaWdobGlnaHRlZCwgaywgdik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWVyZ2UgY2VsbHNcclxuICAgICAgICAgKiBAcGFyYW0gY2VsbE5hbWVcclxuICAgICAgICAgKiBAcGFyYW0gY29sc3BhblxyXG4gICAgICAgICAqIEBwYXJhbSByb3dzcGFuXHJcbiAgICAgICAgICogQHBhcmFtIGlnbm9yZUhpc3RvcnlBbmRFdmVudHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouc2V0TWVyZ2UgPSBmdW5jdGlvbihjZWxsTmFtZSwgY29sc3Bhbiwgcm93c3BhbiwgaWdub3JlSGlzdG9yeUFuZEV2ZW50cykge1xyXG4gICAgICAgICAgICB2YXIgdGVzdCA9IGZhbHNlO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICghIGNlbGxOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISBvYmouaGlnaGxpZ2h0ZWQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQob2JqLm9wdGlvbnMudGV4dC5ub0NlbGxzU2VsZWN0ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeDEgPSBwYXJzZUludChvYmouaGlnaGxpZ2h0ZWRbMF0uZ2V0QXR0cmlidXRlKCdkYXRhLXgnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkxID0gcGFyc2VJbnQob2JqLmhpZ2hsaWdodGVkWzBdLmdldEF0dHJpYnV0ZSgnZGF0YS15JykpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4MiA9IHBhcnNlSW50KG9iai5oaWdobGlnaHRlZFtvYmouaGlnaGxpZ2h0ZWQubGVuZ3RoLTFdLmdldEF0dHJpYnV0ZSgnZGF0YS14JykpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB5MiA9IHBhcnNlSW50KG9iai5oaWdobGlnaHRlZFtvYmouaGlnaGxpZ2h0ZWQubGVuZ3RoLTFdLmdldEF0dHJpYnV0ZSgnZGF0YS15JykpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsTmFtZSA9IGpleGNlbC5nZXRDb2x1bW5OYW1lRnJvbUlkKFsgeDEsIHkxIF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xzcGFuID0gKHgyIC0geDEpICsgMTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcm93c3BhbiA9ICh5MiAtIHkxKSArIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgY2VsbCA9IGpleGNlbC5nZXRJZEZyb21Db2x1bW5OYW1lKGNlbGxOYW1lLCB0cnVlKTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMubWVyZ2VDZWxsc1tjZWxsTmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoucmVjb3Jkc1tjZWxsWzFdXVtjZWxsWzBdXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXN0ID0gb2JqLm9wdGlvbnMudGV4dC5jZWxsQWxyZWFkeU1lcmdlZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICgoISBjb2xzcGFuIHx8IGNvbHNwYW4gPCAyKSAmJiAoISByb3dzcGFuIHx8IHJvd3NwYW4gPCAyKSkge1xyXG4gICAgICAgICAgICAgICAgdGVzdCA9IG9iai5vcHRpb25zLnRleHQuaW52YWxpZE1lcmdlUHJvcGVydGllcztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBjZWxscyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IGNlbGxbMV07IGogPCBjZWxsWzFdICsgcm93c3BhbjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGNlbGxbMF07IGkgPCBjZWxsWzBdICsgY29sc3BhbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2x1bW5OYW1lID0gamV4Y2VsLmdldENvbHVtbk5hbWVGcm9tSWQoW2ksIGpdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5yZWNvcmRzW2pdW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdCA9IG9iai5vcHRpb25zLnRleHQudGhlcmVJc0FDb25mbGljdFdpdGhBbm90aGVyTWVyZ2VkQ2VsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh0ZXN0KSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydCh0ZXN0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIEFkZCBwcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbHNwYW4gPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbY2VsbFsxXV1bY2VsbFswXV0uc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgY29sc3Bhbik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbHNwYW4gPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHJvd3NwYW4gPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbY2VsbFsxXV1bY2VsbFswXV0uc2V0QXR0cmlidXRlKCdyb3dzcGFuJywgcm93c3Bhbik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd3NwYW4gPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gS2VlcCBsaW5rcyB0byB0aGUgZXhpc3Rpbmcgbm9kZXNcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm1lcmdlQ2VsbHNbY2VsbE5hbWVdID0gWyBjb2xzcGFuLCByb3dzcGFuLCBbXSBdO1xyXG4gICAgICAgICAgICAgICAgLy8gTWFyayBjZWxsIGFzIG1lcmdlZFxyXG4gICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbY2VsbFsxXV1bY2VsbFswXV0uc2V0QXR0cmlidXRlKCdkYXRhLW1lcmdlZCcsICd0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBPdmVyZmxvd1xyXG4gICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbY2VsbFsxXV1bY2VsbFswXV0uc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgICAgIC8vIEhpc3RvcnkgZGF0YVxyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBbXTtcclxuICAgICAgICAgICAgICAgIC8vIEFkanVzdCB0aGUgbm9kZXNcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHkgPSBjZWxsWzFdOyB5IDwgY2VsbFsxXSArIHJvd3NwYW47IHkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSBjZWxsWzBdOyB4IDwgY2VsbFswXSArIGNvbHNwYW47IHgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISAoY2VsbFswXSA9PSB4ICYmIGNlbGxbMV0gPT0geSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChvYmoub3B0aW9ucy5kYXRhW3ldW3hdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai51cGRhdGVDZWxsKHgsIHksICcnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm1lcmdlQ2VsbHNbY2VsbE5hbWVdWzJdLnB1c2gob2JqLnJlY29yZHNbeV1beF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbeV1beF0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW3ldW3hdID0gb2JqLnJlY29yZHNbY2VsbFsxXV1bY2VsbFswXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBJbiB0aGUgaW5pdGlhbGl6YXRpb24gaXMgbm90IG5lY2Vzc2FyeSBrZWVwIHRoZSBoaXN0b3J5XHJcbiAgICAgICAgICAgICAgICBvYmoudXBkYXRlU2VsZWN0aW9uKG9iai5yZWNvcmRzW2NlbGxbMV1dW2NlbGxbMF1dKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCEgaWdub3JlSGlzdG9yeUFuZEV2ZW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5zZXRIaXN0b3J5KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOidzZXRNZXJnZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjpjZWxsTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sc3Bhbjpjb2xzcGFuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzcGFuOnJvd3NwYW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6ZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG9iai5kaXNwYXRjaCgnb25tZXJnZScsIGVsLCBjZWxsTmFtZSwgY29sc3Bhbiwgcm93c3Bhbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNZXJnZSBjZWxsc1xyXG4gICAgICAgICAqIEBwYXJhbSBjZWxsTmFtZVxyXG4gICAgICAgICAqIEBwYXJhbSBjb2xzcGFuXHJcbiAgICAgICAgICogQHBhcmFtIHJvd3NwYW5cclxuICAgICAgICAgKiBAcGFyYW0gaWdub3JlSGlzdG9yeUFuZEV2ZW50c1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5nZXRNZXJnZSA9IGZ1bmN0aW9uKGNlbGxOYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge307XHJcbiAgICAgICAgICAgIGlmIChjZWxsTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLm1lcmdlQ2VsbHNbY2VsbE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IFsgb2JqLm9wdGlvbnMubWVyZ2VDZWxsc1tjZWxsTmFtZV1bMF0sIG9iai5vcHRpb25zLm1lcmdlQ2VsbHNbY2VsbE5hbWVdWzFdIF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLm1lcmdlQ2VsbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWVyZ2VkQ2VsbHMgPSBvYmoub3B0aW9ucy5tZXJnZUNlbGxzO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqLm9wdGlvbnMubWVyZ2VDZWxscyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFba2V5c1tpXV0gPSBbIG9iai5vcHRpb25zLm1lcmdlQ2VsbHNba2V5c1tpXV1bMF0sIG9iai5vcHRpb25zLm1lcmdlQ2VsbHNba2V5c1tpXV1bMV0gXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZW1vdmUgbWVyZ2UgYnkgY2VsbG5hbWVcclxuICAgICAgICAgKiBAcGFyYW0gY2VsbE5hbWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmoucmVtb3ZlTWVyZ2UgPSBmdW5jdGlvbihjZWxsTmFtZSwgZGF0YSwga2VlcE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLm1lcmdlQ2VsbHNbY2VsbE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGpleGNlbC5nZXRJZEZyb21Db2x1bW5OYW1lKGNlbGxOYW1lLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW2NlbGxbMV1dW2NlbGxbMF1dLnJlbW92ZUF0dHJpYnV0ZSgnY29sc3BhbicpO1xyXG4gICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbY2VsbFsxXV1bY2VsbFswXV0ucmVtb3ZlQXR0cmlidXRlKCdyb3dzcGFuJyk7XHJcbiAgICAgICAgICAgICAgICBvYmoucmVjb3Jkc1tjZWxsWzFdXVtjZWxsWzBdXS5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2VkJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5mbyA9IG9iai5vcHRpb25zLm1lcmdlQ2VsbHNbY2VsbE5hbWVdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpbmZvWzFdOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZm9bMF07IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaiA+IDAgfHwgaSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW2NlbGxbMV0ral1bY2VsbFswXStpXSA9IGluZm9bMl1baW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbY2VsbFsxXStqXVtjZWxsWzBdK2ldLnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlY292ZXIgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YVtpbmRleF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoudXBkYXRlQ2VsbChjZWxsWzBdK2ksIGNlbGxbMV0raiwgZGF0YVtpbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgb2JqLnVwZGF0ZVNlbGVjdGlvbihvYmoucmVjb3Jkc1tjZWxsWzFdXVtjZWxsWzBdXSwgb2JqLnJlY29yZHNbY2VsbFsxXStqLTFdW2NlbGxbMF0raS0xXSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICghIGtlZXBPcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlKG9iai5vcHRpb25zLm1lcmdlQ2VsbHNbY2VsbE5hbWVdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlbW92ZSBhbGwgbWVyZ2VkIGNlbGxzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLmRlc3Ryb3lNZXJnZWQgPSBmdW5jdGlvbihrZWVwT3B0aW9ucykge1xyXG4gICAgICAgICAgICAvLyBSZW1vdmUgYW55IG1lcmdlZCBjZWxsc1xyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMubWVyZ2VDZWxscykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lcmdlZENlbGxzID0gb2JqLm9wdGlvbnMubWVyZ2VDZWxscztcclxuICAgICAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqLm9wdGlvbnMubWVyZ2VDZWxscyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoucmVtb3ZlTWVyZ2Uoa2V5c1tpXSwgbnVsbCwga2VlcE9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSXMgY29sdW1uIG1lcmdlZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5pc0NvbE1lcmdlZCA9IGZ1bmN0aW9uKHgsIGluc2VydEJlZm9yZSkge1xyXG4gICAgICAgICAgICB2YXIgY29scyA9IFtdO1xyXG4gICAgICAgICAgICAvLyBSZW1vdmUgYW55IG1lcmdlZCBjZWxsc1xyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMubWVyZ2VDZWxscykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmoub3B0aW9ucy5tZXJnZUNlbGxzKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmZvID0gamV4Y2VsLmdldElkRnJvbUNvbHVtbk5hbWUoa2V5c1tpXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHNwYW4gPSBvYmoub3B0aW9ucy5tZXJnZUNlbGxzW2tleXNbaV1dWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4MSA9IGluZm9bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHgyID0gaW5mb1swXSArIChjb2xzcGFuID4gMSA/IGNvbHNwYW4gLSAxIDogMCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zZXJ0QmVmb3JlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MSA8PSB4ICYmIHgyID49IHgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xzLnB1c2goa2V5c1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zZXJ0QmVmb3JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHgxIDwgeCAmJiB4MiA+PSB4KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHMucHVzaChrZXlzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoeDEgPD0geCAmJiB4MiA+IHgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29scy5wdXNoKGtleXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGNvbHM7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSXMgcm93cyBtZXJnZWRcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouaXNSb3dNZXJnZWQgPSBmdW5jdGlvbih5LCBpbnNlcnRCZWZvcmUpIHtcclxuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIGFueSBtZXJnZWQgY2VsbHNcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLm1lcmdlQ2VsbHMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqLm9wdGlvbnMubWVyZ2VDZWxscyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5mbyA9IGpleGNlbC5nZXRJZEZyb21Db2x1bW5OYW1lKGtleXNbaV0sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dzcGFuID0gb2JqLm9wdGlvbnMubWVyZ2VDZWxsc1trZXlzW2ldXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeTEgPSBpbmZvWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB5MiA9IGluZm9bMV0gKyAocm93c3BhbiA+IDEgPyByb3dzcGFuIC0gMSA6IDApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc2VydEJlZm9yZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoeTEgPD0geSAmJiB5MiA+PSB5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cy5wdXNoKGtleXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc2VydEJlZm9yZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh5MSA8IHkgJiYgeTIgPj0geSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzLnB1c2goa2V5c1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHkxIDw9IHkgJiYgeTIgPiB5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MucHVzaChrZXlzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiByb3dzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT3BlbiB0aGUgY29sdW1uIGZpbHRlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5vcGVuRmlsdGVyID0gZnVuY3Rpb24oY29sdW1uSWQpIHtcclxuICAgICAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMuZmlsdGVycykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0pzcHJlYWRzaGVldDogZmlsdGVycyBub3QgZW5hYmxlZC4nKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBpcyBpbnRlZ2VyXHJcbiAgICAgICAgICAgICAgICBjb2x1bW5JZCA9IHBhcnNlSW50KGNvbHVtbklkKTtcclxuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgb2JqLnJlc2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBMb2FkIG9wdGlvbnNcclxuICAgICAgICAgICAgICAgIHZhciBvcHRpb25zRmlsdGVyZWQgPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW2NvbHVtbklkXS50eXBlID09ICdjaGVja2JveCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zRmlsdGVyZWQucHVzaCh7IGlkOiAndHJ1ZScsIG5hbWU6ICdUcnVlJyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zRmlsdGVyZWQucHVzaCh7IGlkOiAnZmFsc2UnLCBuYW1lOiAnRmFsc2UnIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBoYXNCbGFua3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iai5vcHRpb25zLmRhdGEubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGsgPSBvYmoub3B0aW9ucy5kYXRhW2pdW2NvbHVtbklkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBvYmoucmVjb3Jkc1tqXVtjb2x1bW5JZF0uaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoayAmJiB2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zW2tdID0gdjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYXNCbGFua3MgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnNGaWx0ZXJlZCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwga2V5cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zRmlsdGVyZWQucHVzaCh7IGlkOiBrZXlzW2pdLCBuYW1lOiBvcHRpb25zW2tleXNbal1dIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBIYXMgYmxhbmsgb3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNCbGFua3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc0ZpbHRlcmVkLnB1c2goeyB2YWx1ZTogJycsIGlkOiAnJywgbmFtZTogJyhCbGFua3MpJyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBvYmouZmlsdGVyLmNoaWxkcmVuW2NvbHVtbklkICsgMV0uaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgICAgICBvYmouZmlsdGVyLmNoaWxkcmVuW2NvbHVtbklkICsgMV0uYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgICAgICAgICAgIG9iai5maWx0ZXIuY2hpbGRyZW5bY29sdW1uSWQgKyAxXS5zdHlsZS5wYWRkaW5nTGVmdCA9ICcwcHgnO1xyXG4gICAgICAgICAgICAgICAgb2JqLmZpbHRlci5jaGlsZHJlbltjb2x1bW5JZCArIDFdLnN0eWxlLnBhZGRpbmdSaWdodCA9ICcwcHgnO1xyXG4gICAgICAgICAgICAgICAgb2JqLmZpbHRlci5jaGlsZHJlbltjb2x1bW5JZCArIDFdLnN0eWxlLm92ZXJmbG93ID0gJ2luaXRpYWwnO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBvcHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogb3B0aW9uc0ZpbHRlcmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIG11bHRpcGxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9jb21wbGV0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBvcGVuZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG9iai5maWx0ZXJzW2NvbHVtbklkXSAhPT0gdW5kZWZpbmVkID8gb2JqLmZpbHRlcnNbY29sdW1uSWRdIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDonMTAwJScsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IChvYmoub3B0aW9ucy50YWJsZU92ZXJmbG93ID09IHRydWUgfHwgb2JqLm9wdGlvbnMuZnVsbHNjcmVlbiA9PSB0cnVlKSA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBvbmNsb3NlOiBmdW5jdGlvbihvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZXNldEZpbHRlcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmZpbHRlcnNbY29sdW1uSWRdID0gby5kcm9wZG93bi5nZXRWYWx1ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmZpbHRlci5jaGlsZHJlbltjb2x1bW5JZCArIDFdLmlubmVySFRNTCA9IG8uZHJvcGRvd24uZ2V0VGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmouZmlsdGVyLmNoaWxkcmVuW2NvbHVtbklkICsgMV0uc3R5bGUucGFkZGluZ0xlZnQgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmZpbHRlci5jaGlsZHJlbltjb2x1bW5JZCArIDFdLnN0eWxlLnBhZGRpbmdSaWdodCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmouZmlsdGVyLmNoaWxkcmVuW2NvbHVtbklkICsgMV0uc3R5bGUub3ZlcmZsb3cgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmNsb3NlRmlsdGVyKGNvbHVtbklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlZnJlc2hTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIER5bmFtaWMgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIGpTdWl0ZXMuZHJvcGRvd24oZGl2LCBvcHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvYmoucmVzZXRGaWx0ZXJzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5maWx0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5maWx0ZXIuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouZmlsdGVyLmNoaWxkcmVuW2ldLmlubmVySFRNTCA9ICcmbmJzcDsnO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5maWx0ZXJzW2ldID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb2JqLmNsb3NlRmlsdGVyID0gZnVuY3Rpb24oY29sdW1uSWQpIHtcclxuICAgICAgICAgICAgaWYgKCEgY29sdW1uSWQpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmZpbHRlci5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmouZmlsdGVyc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5JZCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBTZWFyY2ggZmlsdGVyXHJcbiAgICAgICAgICAgIHZhciBzZWFyY2ggPSBmdW5jdGlvbihxdWVyeSwgeCwgeSkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWVyeS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgocXVlcnlbaV0gPT0gJycgJiYgLy8gQmxhbmsgbWF0Y2hpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgKChvYmoub3B0aW9ucy5kYXRhW3ldW3hdID09PSBmYWxzZSkgfHwgLy8gVW5jaGVja2VkIGNoZWNrYm94XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICgnJytvYmoub3B0aW9ucy5kYXRhW3ldW3hdKSA9PSAnJykpIHx8IC8vIEJsYW5rIG5vbi1jaGVja2JveCB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoKHF1ZXJ5W2ldICE9ICcnICYmIC8vIE5vcm1hbCBub24tYmxhbmsgZmlsdGVyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICgoJycrb2JqLm9wdGlvbnMuZGF0YVt5XVt4XSkuc2VhcmNoKHF1ZXJ5W2ldKSA+PSAwIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICgnJytvYmoucmVjb3Jkc1t5XVt4XS5pbm5lckhUTUwpLnNlYXJjaChxdWVyeVtpXSkgPj0gMCkpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IG9iai5maWx0ZXJzW2NvbHVtbklkXTtcclxuICAgICAgICAgICAgb2JqLnJlc3VsdHMgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvYmoub3B0aW9ucy5kYXRhLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VhcmNoKHF1ZXJ5LCBjb2x1bW5JZCwgaikpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoucmVzdWx0cy5wdXNoKGopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghIG9iai5yZXN1bHRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgb2JqLnJlc3VsdHMgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvYmoudXBkYXRlUmVzdWx0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPcGVuIHRoZSBlZGl0b3JcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0gb2JqZWN0IGNlbGxcclxuICAgICAgICAgKiBAcmV0dXJuIHZvaWRcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmoub3BlbkVkaXRvciA9IGZ1bmN0aW9uKGNlbGwsIGVtcHR5LCBlKSB7XHJcbiAgICAgICAgICAgIC8vIEdldCBjZWxsIHBvc2l0aW9uXHJcbiAgICAgICAgICAgIHZhciB5ID0gY2VsbC5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpO1xyXG4gICAgICAgICAgICB2YXIgeCA9IGNlbGwuZ2V0QXR0cmlidXRlKCdkYXRhLXgnKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBPbiBlZGl0aW9uIHN0YXJ0XHJcbiAgICAgICAgICAgIG9iai5kaXNwYXRjaCgnb25lZGl0aW9uc3RhcnQnLCBlbCwgY2VsbCwgeCwgeSk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gT3ZlcmZsb3dcclxuICAgICAgICAgICAgaWYgKHggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoucmVjb3Jkc1t5XVt4LTFdLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgZWRpdG9yXHJcbiAgICAgICAgICAgIHZhciBjcmVhdGVFZGl0b3IgPSBmdW5jdGlvbih0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDZWxsIGluZm9ybWF0aW9uXHJcbiAgICAgICAgICAgICAgICB2YXIgaW5mbyA9IGNlbGwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgdmFyIGVkaXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XHJcbiAgICAgICAgICAgICAgICBlZGl0b3Iuc3R5bGUud2lkdGggPSAoaW5mby53aWR0aCkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yLnN0eWxlLmhlaWdodCA9IChpbmZvLmhlaWdodCAtIDIpICsgJ3B4JztcclxuICAgICAgICAgICAgICAgIGVkaXRvci5zdHlsZS5taW5IZWlnaHQgPSAoaW5mby5oZWlnaHQgLSAyKSArICdweCc7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIEVkaXQgY2VsbFxyXG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdlZGl0b3InKTtcclxuICAgICAgICAgICAgICAgIGNlbGwuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgICAgICBjZWxsLmFwcGVuZENoaWxkKGVkaXRvcik7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIE9uIGVkaXRpb24gc3RhcnRcclxuICAgICAgICAgICAgICAgIG9iai5kaXNwYXRjaCgnb25jcmVhdGVlZGl0b3InLCBlbCwgY2VsbCwgeCwgeSwgZWRpdG9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWRpdG9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmVhZG9ubHlcclxuICAgICAgICAgICAgaWYgKGNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdyZWFkb25seScpID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmdcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIEhvbGRlclxyXG4gICAgICAgICAgICAgICAgb2JqLmVkaXRpb24gPSBbIG9iai5yZWNvcmRzW3ldW3hdLCBvYmoucmVjb3Jkc1t5XVt4XS5pbm5lckhUTUwsIHgsIHkgXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBjdXN0b20gZWRpdG9yIGZvciBpdFxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbeF0uZWRpdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3VzdG9tIGVkaXRvcnNcclxuICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5jb2x1bW5zW3hdLmVkaXRvci5vcGVuRWRpdG9yKGNlbGwsIGVsLCBlbXB0eSwgZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE5hdGl2ZSBmdW5jdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1t4XS50eXBlID09ICdoaWRkZW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAnY2hlY2tib3gnIHx8IG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAncmFkaW8nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjZWxsLmNoaWxkcmVuWzBdLmNoZWNrZWQgPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRvb2dsZSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmouc2V0VmFsdWUoY2VsbCwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3Qga2VlcCBlZGl0aW9uIG9wZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmVkaXRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1t4XS50eXBlID09ICdkcm9wZG93bicgfHwgb2JqLm9wdGlvbnMuY29sdW1uc1t4XS50eXBlID09ICdhdXRvY29tcGxldGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCBjdXJyZW50IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9iai5vcHRpb25zLmRhdGFbeV1beF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW3hdLm11bHRpcGxlICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zcGxpdCgnOycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMuY29sdW1uc1t4XS5maWx0ZXIpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBvYmoub3B0aW9ucy5jb2x1bW5zW3hdLmZpbHRlcihlbCwgY2VsbCwgeCwgeSwgb2JqLm9wdGlvbnMuY29sdW1uc1t4XS5zb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IG9iai5vcHRpb25zLmNvbHVtbnNbeF0uc291cmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90IGNoYW5nZSB0aGUgb3JpZ2luYWwgc291cmNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc291cmNlLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnB1c2goc291cmNlW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGVkaXRvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWRpdG9yID0gY3JlYXRlRWRpdG9yKCdkaXYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGU6IG9iai5vcHRpb25zLmNvbHVtbnNbeF0ubXVsdGlwbGUgPyB0cnVlIDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvY29tcGxldGU6IG9iai5vcHRpb25zLmNvbHVtbnNbeF0uYXV0b2NvbXBsZXRlIHx8IG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAnYXV0b2NvbXBsZXRlJyA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5lZDp0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6JzEwMCUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OmVkaXRvci5zdHlsZS5taW5IZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogKG9iai5vcHRpb25zLnRhYmxlT3ZlcmZsb3cgPT0gdHJ1ZSB8fCBvYmoub3B0aW9ucy5mdWxsc2NyZWVuID09IHRydWUpID8gdHJ1ZSA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbG9zZTpmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouY2xvc2VFZGl0b3IoY2VsbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW3hdLm9wdGlvbnMgJiYgb2JqLm9wdGlvbnMuY29sdW1uc1t4XS5vcHRpb25zLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudHlwZSA9IG9iai5vcHRpb25zLmNvbHVtbnNbeF0ub3B0aW9ucy50eXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpTdWl0ZXMuZHJvcGRvd24oZWRpdG9yLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAnY2FsZW5kYXInIHx8IG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAnY29sb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9iai5vcHRpb25zLmRhdGFbeV1beF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBlZGl0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVkaXRvciA9IGNyZWF0ZUVkaXRvcignaW5wdXQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnZhbHVlID0gdmFsdWU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnRhYmxlT3ZlcmZsb3cgPT0gdHJ1ZSB8fCBvYmoub3B0aW9ucy5mdWxsc2NyZWVuID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmNvbHVtbnNbeF0ub3B0aW9ucy5wb3NpdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuY29sdW1uc1t4XS5vcHRpb25zLnZhbHVlID0gb2JqLm9wdGlvbnMuZGF0YVt5XVt4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuY29sdW1uc1t4XS5vcHRpb25zLm9wZW5lZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmNvbHVtbnNbeF0ub3B0aW9ucy5vbmNsb3NlID0gZnVuY3Rpb24oZWwsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouY2xvc2VFZGl0b3IoY2VsbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3VycmVudCB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1t4XS50eXBlID09ICdjb2xvcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpTdWl0ZXMuY29sb3IoZWRpdG9yLCBvYmoub3B0aW9ucy5jb2x1bW5zW3hdLm9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalN1aXRlcy5jYWxlbmRhcihlZGl0b3IsIG9iai5vcHRpb25zLmNvbHVtbnNbeF0ub3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9jdXMgb24gZWRpdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1t4XS50eXBlID09ICdodG1sJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBvYmoub3B0aW9ucy5kYXRhW3ldW3hdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgZWRpdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlZGl0b3IgPSBjcmVhdGVFZGl0b3IoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdqZXhjZWxfcmljaHRleHQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpTdWl0ZXMuZWRpdG9yKGRpdiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVjdCA9IGNlbGwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWN0Q29udGVudCA9IGRpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lckhlaWdodCA8IHJlY3QuYm90dG9tICsgcmVjdENvbnRlbnQuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUudG9wID0gKHJlY3QudG9wIC0gKHJlY3RDb250ZW50LmhlaWdodCArIDIpKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUudG9wID0gKHJlY3QudG9wKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAnaW1hZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWcgPSBjZWxsLmNoaWxkcmVuWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgZWRpdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlZGl0b3IgPSBjcmVhdGVFZGl0b3IoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdqY2xvc2UnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZyAmJiBpbWcuc3JjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoaW1nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgalN1aXRlcy5pbWFnZShkaXYsIG9iai5vcHRpb25zLmltYWdlT3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWN0ID0gY2VsbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlY3RDb250ZW50ID0gZGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmlubmVySGVpZ2h0IDwgcmVjdC5ib3R0b20gKyByZWN0Q29udGVudC5oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5zdHlsZS50b3AgPSAocmVjdC50b3AgLSAocmVjdENvbnRlbnQuaGVpZ2h0ICsgMikpICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5zdHlsZS50b3AgPSAocmVjdC50b3ApICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGVtcHR5ID09IHRydWUgPyAnJyA6IG9iai5vcHRpb25zLmRhdGFbeV1beF07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmFzaWMgZWRpdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW3hdLndvcmRXcmFwICE9IGZhbHNlICYmIChvYmoub3B0aW9ucy53b3JkV3JhcCA9PSB0cnVlIHx8IG9iai5vcHRpb25zLmNvbHVtbnNbeF0ud29yZFdyYXAgPT0gdHJ1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlZGl0b3IgPSBjcmVhdGVFZGl0b3IoJ3RleHRhcmVhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWRpdG9yID0gY3JlYXRlRWRpdG9yKCdpbnB1dCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFza1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbeF0ubWFzaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWFzaycsIG9iai5vcHRpb25zLmNvbHVtbnNbeF0ubWFzayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iub25ibHVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouY2xvc2VFZGl0b3IoY2VsbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNjcm9sbExlZnQgPSBlZGl0b3Iuc2Nyb2xsV2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2xvc2UgdGhlIGVkaXRvciBhbmQgc2F2ZSB0aGUgaW5mb3JtYXRpb25cclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0gb2JqZWN0IGNlbGxcclxuICAgICAgICAgKiBAcGFyYW0gYm9vbGVhbiBzYXZlXHJcbiAgICAgICAgICogQHJldHVybiB2b2lkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLmNsb3NlRWRpdG9yID0gZnVuY3Rpb24oY2VsbCwgc2F2ZSkge1xyXG4gICAgICAgICAgICB2YXIgeCA9IHBhcnNlSW50KGNlbGwuZ2V0QXR0cmlidXRlKCdkYXRhLXgnKSk7XHJcbiAgICAgICAgICAgIHZhciB5ID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEdldCBjZWxsIHByb3BlcnRpZXNcclxuICAgICAgICAgICAgaWYgKHNhdmUgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgY3VzdG9tIGVkaXRvclxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbeF0uZWRpdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3VzdG9tIGVkaXRvclxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9iai5vcHRpb25zLmNvbHVtbnNbeF0uZWRpdG9yLmNsb3NlRWRpdG9yKGNlbGwsIHNhdmUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBOYXRpdmUgZnVuY3Rpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAnY2hlY2tib3gnIHx8IG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAncmFkaW8nIHx8IG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAnaGlkZGVuJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW3hdLnR5cGUgPT0gJ2Ryb3Bkb3duJyB8fCBvYmoub3B0aW9ucy5jb2x1bW5zW3hdLnR5cGUgPT0gJ2F1dG9jb21wbGV0ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY2VsbC5jaGlsZHJlblswXS5kcm9wZG93bi5jbG9zZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAnY2FsZW5kYXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNlbGwuY2hpbGRyZW5bMF0uY2FsZW5kYXIuY2xvc2UodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW3hdLnR5cGUgPT0gJ2NvbG9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjZWxsLmNoaWxkcmVuWzBdLmNvbG9yLmNsb3NlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1t4XS50eXBlID09ICdodG1sJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjZWxsLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmVkaXRvci5nZXREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW3hdLnR5cGUgPT0gJ2ltYWdlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1nID0gY2VsbC5jaGlsZHJlblswXS5jaGlsZHJlblswXS5jaGlsZHJlblswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gaW1nICYmIGltZy50YWdOYW1lID09ICdJTUcnID8gaW1nLnNyYyA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1t4XS50eXBlID09ICdudW1lcmljJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjZWxsLmNoaWxkcmVuWzBdLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuc3Vic3RyKDAsMSkgIT0gJz0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG9iai5vcHRpb25zLmNvbHVtbnNbeF0uYWxsb3dFbXB0eSA/ICcnIDogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNoaWxkcmVuWzBdLm9uYmx1ciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY2VsbC5jaGlsZHJlblswXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jaGlsZHJlblswXS5vbmJsdXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmUgY2hhbmdlcyBpZiB0aGUgdmFsdWUgaXMgdGhlIHNhbWVcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5kYXRhW3ldW3hdID09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5pbm5lckhUTUwgPSBvYmouZWRpdGlvblsxXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnNldFZhbHVlKGNlbGwsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW3hdLmVkaXRvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEN1c3RvbSBlZGl0b3JcclxuICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5jb2x1bW5zW3hdLmVkaXRvci5jbG9zZUVkaXRvcihjZWxsLCBzYXZlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAnZHJvcGRvd24nIHx8IG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAnYXV0b2NvbXBsZXRlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNoaWxkcmVuWzBdLmRyb3Bkb3duLmNsb3NlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1t4XS50eXBlID09ICdjYWxlbmRhcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jaGlsZHJlblswXS5jYWxlbmRhci5jbG9zZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAnY29sb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY2hpbGRyZW5bMF0uY29sb3IuY2xvc2UodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jaGlsZHJlblswXS5vbmJsdXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUmVzdG9yZSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgY2VsbC5pbm5lckhUTUwgPSBvYmouZWRpdGlvbiAmJiBvYmouZWRpdGlvblsxXSA/IG9iai5lZGl0aW9uWzFdIDogJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBPbiBlZGl0aW9uIGVuZFxyXG4gICAgICAgICAgICBvYmouZGlzcGF0Y2goJ29uZWRpdGlvbmVuZCcsIGVsLCBjZWxsLCB4LCB5LCB2YWx1ZSwgc2F2ZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgZWRpdG9yIGNsYXNzXHJcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZWRpdG9yJyk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gRmluaXNoIGVkaXRpb25cclxuICAgICAgICAgICAgb2JqLmVkaXRpb24gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCB0aGUgY2VsbCBvYmplY3RcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0gb2JqZWN0IGNlbGxcclxuICAgICAgICAgKiBAcmV0dXJuIHN0cmluZyB2YWx1ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5nZXRDZWxsID0gZnVuY3Rpb24oY2VsbCkge1xyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IGluIGNhc2UgbmFtZSBpcyBleGNlbCBsaWtlZCBleC4gQTEwLCBCQjkyXHJcbiAgICAgICAgICAgIGNlbGwgPSBqZXhjZWwuZ2V0SWRGcm9tQ29sdW1uTmFtZShjZWxsLCB0cnVlKTtcclxuICAgICAgICAgICAgdmFyIHggPSBjZWxsWzBdO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGNlbGxbMV07XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIG9iai5yZWNvcmRzW3ldW3hdO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCB0aGUgY2VsbCBvYmplY3QgZnJvbSBjb29yZHNcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0gb2JqZWN0IGNlbGxcclxuICAgICAgICAgKiBAcmV0dXJuIHN0cmluZyB2YWx1ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5nZXRDZWxsRnJvbUNvb3JkcyA9IGZ1bmN0aW9uKHgsIHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9iai5yZWNvcmRzW3ldW3hdO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBsYWJlbFxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSBvYmplY3QgY2VsbFxyXG4gICAgICAgICAqIEByZXR1cm4gc3RyaW5nIHZhbHVlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLmdldExhYmVsID0gZnVuY3Rpb24oY2VsbCkge1xyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IGluIGNhc2UgbmFtZSBpcyBleGNlbCBsaWtlZCBleC4gQTEwLCBCQjkyXHJcbiAgICAgICAgICAgIGNlbGwgPSBqZXhjZWwuZ2V0SWRGcm9tQ29sdW1uTmFtZShjZWxsLCB0cnVlKTtcclxuICAgICAgICAgICAgdmFyIHggPSBjZWxsWzBdO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGNlbGxbMV07XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIG9iai5yZWNvcmRzW3ldW3hdLmlubmVySFRNTDtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgbGFiZWxmcm9tIGNvb3Jkc1xyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSBvYmplY3QgY2VsbFxyXG4gICAgICAgICAqIEByZXR1cm4gc3RyaW5nIHZhbHVlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLmdldExhYmVsRnJvbUNvb3JkcyA9IGZ1bmN0aW9uKHgsIHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9iai5yZWNvcmRzW3ldW3hdLmlubmVySFRNTDtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgdGhlIHZhbHVlIGZyb20gYSBjZWxsXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHBhcmFtIG9iamVjdCBjZWxsXHJcbiAgICAgICAgICogQHJldHVybiBzdHJpbmcgdmFsdWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouZ2V0VmFsdWUgPSBmdW5jdGlvbihjZWxsLCBwcm9jZXNzZWRWYWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKGNlbGwpID09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IGNlbGwuZ2V0QXR0cmlidXRlKCdkYXRhLXgnKTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gY2VsbC5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2VsbCA9IGpleGNlbC5nZXRJZEZyb21Db2x1bW5OYW1lKGNlbGwsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBjZWxsWzBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSBjZWxsWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoeCAhPSBudWxsICYmIHkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5yZWNvcmRzW3ldICYmIG9iai5yZWNvcmRzW3ldW3hdICYmIChwcm9jZXNzZWRWYWx1ZSB8fCBvYmoub3B0aW9ucy5jb3B5Q29tcGF0aWJpbGl0eSA9PSB0cnVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gb2JqLnJlY29yZHNbeV1beF0uaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuZGF0YVt5XSAmJiBvYmoub3B0aW9ucy5kYXRhW3ldW3hdICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gb2JqLm9wdGlvbnMuZGF0YVt5XVt4XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHRoZSB2YWx1ZSBmcm9tIGEgY29vcmRzXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHBhcmFtIGludCB4XHJcbiAgICAgICAgICogQHBhcmFtIGludCB5XHJcbiAgICAgICAgICogQHJldHVybiBzdHJpbmcgdmFsdWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouZ2V0VmFsdWVGcm9tQ29vcmRzID0gZnVuY3Rpb24oeCwgeSwgcHJvY2Vzc2VkVmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoeCAhPSBudWxsICYmIHkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKChvYmoucmVjb3Jkc1t5XSAmJiBvYmoucmVjb3Jkc1t5XVt4XSkgJiYgcHJvY2Vzc2VkVmFsdWUgfHwgb2JqLm9wdGlvbnMuY29weUNvbXBhdGliaWxpdHkgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gb2JqLnJlY29yZHNbeV1beF0uaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuZGF0YVt5XSAmJiBvYmoub3B0aW9ucy5kYXRhW3ldW3hdICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gb2JqLm9wdGlvbnMuZGF0YVt5XVt4XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IGEgY2VsbCB2YWx1ZVxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSBtaXhlZCBjZWxsIGRlc3RpbmF0aW9uIGNlbGxcclxuICAgICAgICAgKiBAcGFyYW0gc3RyaW5nIHZhbHVlIHZhbHVlXHJcbiAgICAgICAgICogQHJldHVybiB2b2lkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnNldFZhbHVlID0gZnVuY3Rpb24oY2VsbCwgdmFsdWUsIGZvcmNlKSB7XHJcbiAgICAgICAgICAgIHZhciByZWNvcmRzID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHR5cGVvZihjZWxsKSA9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbklkID0gamV4Y2VsLmdldElkRnJvbUNvbHVtbk5hbWUoY2VsbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IGNvbHVtbklkWzBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSBjb2x1bW5JZFsxXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGNlbGxcclxuICAgICAgICAgICAgICAgIHJlY29yZHMucHVzaChvYmoudXBkYXRlQ2VsbCh4LCB5LCB2YWx1ZSwgZm9yY2UpKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGFsbCBmb3JtdWxhcyBpbiB0aGUgY2hhaW5cclxuICAgICAgICAgICAgICAgIG9iai51cGRhdGVGb3JtdWxhQ2hhaW4oeCwgeSwgcmVjb3Jkcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2VsbCAmJiBjZWxsLmdldEF0dHJpYnV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gY2VsbC5nZXRBdHRyaWJ1dGUoJ2RhdGEteCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB5ID0gY2VsbC5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgY2VsbFxyXG4gICAgICAgICAgICAgICAgaWYgKHggIT0gbnVsbCAmJiB5ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWNvcmRzLnB1c2gob2JqLnVwZGF0ZUNlbGwoeCwgeSwgdmFsdWUsIGZvcmNlKSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgYWxsIGZvcm11bGFzIGluIHRoZSBjaGFpblxyXG4gICAgICAgICAgICAgICAgICAgIG9iai51cGRhdGVGb3JtdWxhQ2hhaW4oeCwgeSwgcmVjb3Jkcyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoY2VsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoY2VsbFtpXSkgPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uSWQgPSBqZXhjZWwuZ2V0SWRGcm9tQ29sdW1uTmFtZShjZWxsW2ldLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGNvbHVtbklkWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5ID0gY29sdW1uSWRbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsW2ldLnggIT0gbnVsbCAmJiBjZWxsW2ldLnkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGNlbGxbaV0ueDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBjZWxsW2ldLnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZsZXhpYmxlIHNldHVwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsW2ldLm5ld1ZhbHVlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY2VsbFtpXS5uZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjZWxsW2ldLnZhbHVlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY2VsbFtpXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gY2VsbFtpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEteCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IGNlbGxbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLXknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgY2VsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHggIT0gbnVsbCAmJiB5ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzLnB1c2gob2JqLnVwZGF0ZUNlbGwoeCwgeSwgdmFsdWUsIGZvcmNlKSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgYWxsIGZvcm11bGFzIGluIHRoZSBjaGFpblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai51cGRhdGVGb3JtdWxhQ2hhaW4oeCwgeSwgcmVjb3Jkcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgaGlzdG9yeVxyXG4gICAgICAgICAgICBvYmouc2V0SGlzdG9yeSh7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb246J3NldFZhbHVlJyxcclxuICAgICAgICAgICAgICAgIHJlY29yZHM6cmVjb3JkcyxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbjpvYmouc2VsZWN0ZWRDZWxsLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGFibGUgd2l0aCBjdXN0b20gY29uZmlndXJhdGlvbnMgaWYgYXBwbGljYWJsZVxyXG4gICAgICAgICAgICBvYmoudXBkYXRlVGFibGUoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBPbiBhZnRlciBjaGFuZ2VzXHJcbiAgICAgICAgICAgIG9iai5vbmFmdGVyY2hhbmdlcyhlbCwgcmVjb3Jkcyk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IGEgY2VsbCB2YWx1ZSBiYXNlZCBvbiBjb29yZGluYXRlc1xyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSBpbnQgeCBkZXN0aW5hdGlvbiBjZWxsXHJcbiAgICAgICAgICogQHBhcmFtIGludCB5IGRlc3RpbmF0aW9uIGNlbGxcclxuICAgICAgICAgKiBAcGFyYW0gc3RyaW5nIHZhbHVlXHJcbiAgICAgICAgICogQHJldHVybiB2b2lkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnNldFZhbHVlRnJvbUNvb3JkcyA9IGZ1bmN0aW9uKHgsIHksIHZhbHVlLCBmb3JjZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVjb3JkcyA9IFtdO1xyXG4gICAgICAgICAgICByZWNvcmRzLnB1c2gob2JqLnVwZGF0ZUNlbGwoeCwgeSwgdmFsdWUsIGZvcmNlKSk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gVXBkYXRlIGFsbCBmb3JtdWxhcyBpbiB0aGUgY2hhaW5cclxuICAgICAgICAgICAgb2JqLnVwZGF0ZUZvcm11bGFDaGFpbih4LCB5LCByZWNvcmRzKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgaGlzdG9yeVxyXG4gICAgICAgICAgICBvYmouc2V0SGlzdG9yeSh7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb246J3NldFZhbHVlJyxcclxuICAgICAgICAgICAgICAgIHJlY29yZHM6cmVjb3JkcyxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbjpvYmouc2VsZWN0ZWRDZWxsLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGFibGUgd2l0aCBjdXN0b20gY29uZmlndXJhdGlvbnMgaWYgYXBwbGljYWJsZVxyXG4gICAgICAgICAgICBvYmoudXBkYXRlVGFibGUoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBPbiBhZnRlciBjaGFuZ2VzXHJcbiAgICAgICAgICAgIG9iai5vbmFmdGVyY2hhbmdlcyhlbCwgcmVjb3Jkcyk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVG9vZ2xlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnNldENoZWNrUmFkaW9WYWx1ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVjb3JkcyA9IFtdO1xyXG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iai5oaWdobGlnaHRlZCk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBvYmouaGlnaGxpZ2h0ZWRbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLXgnKTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gb2JqLmhpZ2hsaWdodGVkW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS15Jyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW3hdLnR5cGUgPT0gJ2NoZWNrYm94JyB8fCBvYmoub3B0aW9ucy5jb2x1bW5zW3hdLnR5cGUgPT0gJ3JhZGlvJykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVjb3Jkcy5wdXNoKG9iai51cGRhdGVDZWxsKHgsIHksICEgb2JqLm9wdGlvbnMuZGF0YVt5XVt4XSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHJlY29yZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgaGlzdG9yeVxyXG4gICAgICAgICAgICAgICAgb2JqLnNldEhpc3Rvcnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjonc2V0VmFsdWUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZHM6cmVjb3JkcyxcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb246b2JqLnNlbGVjdGVkQ2VsbCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBPbiBhZnRlciBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICBvYmoub25hZnRlcmNoYW5nZXMoZWwsIHJlY29yZHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFN0cmlwIHRhZ3NcclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgc3RyaXBTY3JpcHQgPSBmdW5jdGlvbihhKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gbmV3IE9wdGlvbjtcclxuICAgICAgICAgICAgYi5pbm5lckhUTUwgPSBhO1xyXG4gICAgICAgICAgICB2YXIgYyA9IG51bGw7XHJcbiAgICAgICAgICAgIGZvciAoYSA9IGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpOyBjPWFbMF07KSBjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyk7XHJcbiAgICAgICAgICAgIHJldHVybiBiLmlubmVySFRNTDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSBjZWxsIGNvbnRlbnRcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0gb2JqZWN0IGNlbGxcclxuICAgICAgICAgKiBAcmV0dXJuIHZvaWRcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmoudXBkYXRlQ2VsbCA9IGZ1bmN0aW9uKHgsIHksIHZhbHVlLCBmb3JjZSkge1xyXG4gICAgICAgICAgICAvLyBDaGFuZ2luZyB2YWx1ZSBkZXBlbmRpbmcgb24gdGhlIGNvbHVtbiB0eXBlXHJcbiAgICAgICAgICAgIGlmIChvYmoucmVjb3Jkc1t5XVt4XS5jbGFzc0xpc3QuY29udGFpbnMoJ3JlYWRvbmx5JykgPT0gdHJ1ZSAmJiAhIGZvcmNlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICB2YXIgcmVjb3JkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IHgsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogeSxcclxuICAgICAgICAgICAgICAgICAgICBjb2w6IHgsXHJcbiAgICAgICAgICAgICAgICAgICAgcm93OiB5XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTZWN1cml0eVxyXG4gICAgICAgICAgICAgICAgaWYgKCgnJyt2YWx1ZSkuc3Vic3RyKDAsMSkgPT0gJz0nICYmIG9iai5vcHRpb25zLnNlY3VyZUZvcm11bGFzID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gc2VjdXJlRm9ybXVsYSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCAhPSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGRhdGEgY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBPbiBjaGFuZ2VcclxuICAgICAgICAgICAgICAgIHZhciB2YWwgPSBvYmouZGlzcGF0Y2goJ29uYmVmb3JlY2hhbmdlJywgZWwsIG9iai5yZWNvcmRzW3ldW3hdLCB4LCB5LCB2YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgeW91IHJldHVybiBzb21ldGhpbmcgdGhpcyB3aWxsIG92ZXJ3cml0ZSB0aGUgdmFsdWVcclxuICAgICAgICAgICAgICAgIGlmICh2YWwgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbeF0uZWRpdG9yICYmIHR5cGVvZihvYmoub3B0aW9ucy5jb2x1bW5zW3hdLmVkaXRvci51cGRhdGVDZWxsKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBvYmoub3B0aW9ucy5jb2x1bW5zW3hdLmVkaXRvci51cGRhdGVDZWxsKG9iai5yZWNvcmRzW3ldW3hdLCB2YWx1ZSwgZm9yY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEhpc3RvcnkgZm9ybWF0XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVjb3JkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IHgsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogeSxcclxuICAgICAgICAgICAgICAgICAgICBjb2w6IHgsXHJcbiAgICAgICAgICAgICAgICAgICAgcm93OiB5LFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlOiB2YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZTogb2JqLm9wdGlvbnMuZGF0YVt5XVt4XSxcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1t4XS5lZGl0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZGF0YSBhbmQgY2VsbFxyXG4gICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmRhdGFbeV1beF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTmF0aXZlIGZ1bmN0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW3hdLnR5cGUgPT0gJ2NoZWNrYm94JyB8fCBvYmoub3B0aW9ucy5jb2x1bW5zW3hdLnR5cGUgPT0gJ3JhZGlvJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmNoZWNrZWQgYWxsIG9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAncmFkaW8nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iai5vcHRpb25zLmRhdGEubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhW2pdW3hdID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBkYXRhIGFuZCBjZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW3ldW3hdLmNoaWxkcmVuWzBdLmNoZWNrZWQgPSAodmFsdWUgPT0gMSB8fCB2YWx1ZSA9PSB0cnVlIHx8IHZhbHVlID09ICd0cnVlJyB8fCB2YWx1ZSA9PSAnVFJVRScpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhW3ldW3hdID0gb2JqLnJlY29yZHNbeV1beF0uY2hpbGRyZW5bMF0uY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAnZHJvcGRvd24nIHx8IG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAnYXV0b2NvbXBsZXRlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZGF0YSBhbmQgY2VsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhW3ldW3hdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW3ldW3hdLmlubmVyVGV4dCA9IG9iai5nZXREcm9wRG93blZhbHVlKHgsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbeF0udHlwZSA9PSAnY2FsZW5kYXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjYWxlbmRhclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybWF0dGVkID0galN1aXRlcy5jYWxlbmRhci5leHRyYWN0RGF0ZUZyb21TdHJpbmcodmFsdWUsIG9iai5vcHRpb25zLmNvbHVtbnNbeF0ub3B0aW9ucy5mb3JtYXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZGF0YSBhbmQgY2VsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhW3ldW3hdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW3ldW3hdLmlubmVyVGV4dCA9IGpTdWl0ZXMuY2FsZW5kYXIuZ2V0RGF0ZVN0cmluZyhmb3JtYXR0ZWQgPyBmb3JtYXR0ZWQgOiB2YWx1ZSwgb2JqLm9wdGlvbnMuY29sdW1uc1t4XS5vcHRpb25zLmZvcm1hdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW3hdLnR5cGUgPT0gJ2NvbG9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgY29sb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuZGF0YVt5XVt4XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW5kZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbeF0ucmVuZGVyID09ICdzcXVhcmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yLmNsYXNzTmFtZSA9ICdjb2xvcic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW3ldW3hdLmlubmVyVGV4dCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbeV1beF0uYXBwZW5kQ2hpbGQoY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbeV1beF0uc3R5bGUuY29sb3IgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW3ldW3hdLmlubmVyVGV4dCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW3hdLnR5cGUgPT0gJ2ltYWdlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9ICcnK3ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhW3ldW3hdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW3ldW3hdLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWUuc3Vic3RyKDAsIDEwKSA9PSAnZGF0YTppbWFnZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW3ldW3hdLmFwcGVuZENoaWxkKGltZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZGF0YSBhbmQgY2VsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhW3ldW3hdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExhYmVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW3hdLnR5cGUgPT0gJ2h0bWwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoucmVjb3Jkc1t5XVt4XS5pbm5lckhUTUwgPSBzdHJpcFNjcmlwdChvYmoucGFyc2VWYWx1ZSh4LCB5LCB2YWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnN0cmlwSFRNTCA9PT0gZmFsc2UgfHwgb2JqLm9wdGlvbnMuY29sdW1uc1t4XS5zdHJpcEhUTUwgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbeV1beF0uaW5uZXJIVE1MID0gc3RyaXBTY3JpcHQob2JqLnBhcnNlVmFsdWUoeCwgeSwgdmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbeV1beF0uaW5uZXJUZXh0ID0gb2JqLnBhcnNlVmFsdWUoeCwgeSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBiaWcgdGV4dCBpbnNpZGUgYSBjZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW3hdLndvcmRXcmFwICE9IGZhbHNlICYmIChvYmoub3B0aW9ucy53b3JkV3JhcCA9PSB0cnVlIHx8IG9iai5vcHRpb25zLmNvbHVtbnNbeF0ud29yZFdyYXAgPT0gdHJ1ZSB8fCBvYmoucmVjb3Jkc1t5XVt4XS5pbm5lckhUTUwubGVuZ3RoID4gMjAwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbeV1beF0uc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoucmVjb3Jkc1t5XVt4XS5zdHlsZS53aGl0ZVNwYWNlID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gT3ZlcmZsb3dcclxuICAgICAgICAgICAgICAgIGlmICh4ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoucmVjb3Jkc1t5XVt4LTFdLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbeV1beC0xXS5zdHlsZS5vdmVyZmxvdyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBPbiBjaGFuZ2VcclxuICAgICAgICAgICAgICAgIG9iai5kaXNwYXRjaCgnb25jaGFuZ2UnLCBlbCwgKG9iai5yZWNvcmRzW3ldICYmIG9iai5yZWNvcmRzW3ldW3hdID8gb2JqLnJlY29yZHNbeV1beF0gOiBudWxsKSwgeCwgeSwgdmFsdWUsIHJlY29yZC5vbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZWNvcmQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29weSBkYXRhIHVzaW5nIHRoZSBjb3JuZXIgaWNvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5jb3B5RGF0YSA9IGZ1bmN0aW9uKG8sIGQpIHtcclxuICAgICAgICAgICAgLy8gR2V0IGRhdGEgZnJvbSBhbGwgc2VsZWN0ZWQgY2VsbHNcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBvYmouZ2V0RGF0YSh0cnVlLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNlbGVjdGVkIGNlbGxzXHJcbiAgICAgICAgICAgIHZhciBoID0gb2JqLnNlbGVjdGVkQ29udGFpbmVyO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2VsbHNcclxuICAgICAgICAgICAgdmFyIHgxID0gcGFyc2VJbnQoby5nZXRBdHRyaWJ1dGUoJ2RhdGEteCcpKTtcclxuICAgICAgICAgICAgdmFyIHkxID0gcGFyc2VJbnQoby5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpKTtcclxuICAgICAgICAgICAgdmFyIHgyID0gcGFyc2VJbnQoZC5nZXRBdHRyaWJ1dGUoJ2RhdGEteCcpKTtcclxuICAgICAgICAgICAgdmFyIHkyID0gcGFyc2VJbnQoZC5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlY29yZHNcclxuICAgICAgICAgICAgdmFyIHJlY29yZHMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIGJyZWFrQ29udHJvbCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKGhbMF0gPT0geDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIFZlcnRpY2FsIGNvcHlcclxuICAgICAgICAgICAgICAgIGlmICh5MSA8IGhbMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcm93TnVtYmVyID0geTEgLSBoWzFdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcm93TnVtYmVyID0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBjb2xOdW1iZXIgPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHgxIDwgaFswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xOdW1iZXIgPSB4MSAtIGhbMF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xOdW1iZXIgPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHJvd051bWJlciA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIENvcHkgZGF0YSBwcm9jZWR1cmVcclxuICAgICAgICAgICAgdmFyIHBvc3ggPSAwO1xyXG4gICAgICAgICAgICB2YXIgcG9zeSA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0geTE7IGogPD0geTI7IGorKykge1xyXG4gICAgICAgICAgICAgICAgLy8gU2tpcCBoaWRkZW4gcm93c1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5yb3dzW2pdICYmIG9iai5yb3dzW2pdLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ29udHJvbHNcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhW3Bvc3ldID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc3kgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcG9zeCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRGF0YSBjb2x1bW5zXHJcbiAgICAgICAgICAgICAgICBpZiAoaFswXSAhPSB4MSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4MSA8IGhbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbE51bWJlciA9IHgxIC0gaFswXTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sTnVtYmVyID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBEYXRhIGNvbHVtbnNcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSB4MTsgaSA8PSB4MjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIG5vbi1yZWFkb25seVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmoucmVjb3Jkc1tqXVtpXSAmJiAhIG9iai5yZWNvcmRzW2pdW2ldLmNsYXNzTGlzdC5jb250YWlucygncmVhZG9ubHknKSAmJiBvYmoucmVjb3Jkc1tqXVtpXS5zdHlsZS5kaXNwbGF5ICE9ICdub25lJyAmJiBicmVha0NvbnRyb2wgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RvcCBpZiBjb250YWlucyB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBvYmouc2VsZWN0aW9uLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmRhdGFbal1baV0gIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha0NvbnRyb2wgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29sdW1uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhW3Bvc3ldID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zeCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YVtwb3N5XVtwb3N4XSA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3ggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBkYXRhW3Bvc3ldW3Bvc3hdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAmJiAhIGRhdGFbMV0gJiYgb2JqLm9wdGlvbnMuYXV0b0luY3JlbWVudCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1tpXS50eXBlID09ICd0ZXh0JyB8fCBvYmoub3B0aW9ucy5jb2x1bW5zW2ldLnR5cGUgPT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKCcnK3ZhbHVlKS5zdWJzdHIoMCwxKSA9PSAnPScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VucyA9IHZhbHVlLm1hdGNoKC8oW0EtWl0rWzAtOV0rKS9nKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW5zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWZmZWN0ZWRUb2tlbnMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0b2tlbnMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gamV4Y2VsLmdldElkRnJvbUNvbHVtbk5hbWUodG9rZW5zW2luZGV4XSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25bMF0gKz0gY29sTnVtYmVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWzFdICs9IHJvd051bWJlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9zaXRpb25bMV0gPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWzFdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuID0gamV4Y2VsLmdldENvbHVtbk5hbWVGcm9tSWQoW3Bvc2l0aW9uWzBdLCBwb3NpdGlvblsxXV0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuICE9IHRva2Vuc1tpbmRleF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWZmZWN0ZWRUb2tlbnNbdG9rZW5zW2luZGV4XV0gPSB0b2tlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZm9ybXVsYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFmZmVjdGVkVG9rZW5zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBvYmoudXBkYXRlRm9ybXVsYSh2YWx1ZSwgYWZmZWN0ZWRUb2tlbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gTnVtYmVyKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBOdW1iZXIodmFsdWUpICsgcm93TnVtYmVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW2ldLnR5cGUgPT0gJ2NhbGVuZGFyJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIHJvd051bWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBkYXRlLmdldEZ1bGxZZWFyKCkgKyAnLScgKyBqZXhjZWwuZG91YmxlRGlnaXRGb3JtYXQocGFyc2VJbnQoZGF0ZS5nZXRNb250aCgpICsgMSkpICsgJy0nICsgamV4Y2VsLmRvdWJsZURpZ2l0Rm9ybWF0KGRhdGUuZ2V0RGF0ZSgpKSArICcgJyArICcwMDowMDowMCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzLnB1c2gob2JqLnVwZGF0ZUNlbGwoaSwgaiwgdmFsdWUpKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgYWxsIGZvcm11bGFzIGluIHRoZSBjaGFpblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoudXBkYXRlRm9ybXVsYUNoYWluKGksIGosIHJlY29yZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwb3N4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhbMF0gIT0geDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sTnVtYmVyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcG9zeSsrO1xyXG4gICAgICAgICAgICAgICAgcm93TnVtYmVyKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgaGlzdG9yeVxyXG4gICAgICAgICAgICBvYmouc2V0SGlzdG9yeSh7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb246J3NldFZhbHVlJyxcclxuICAgICAgICAgICAgICAgIHJlY29yZHM6cmVjb3JkcyxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbjpvYmouc2VsZWN0ZWRDZWxsLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGFibGUgd2l0aCBjdXN0b20gY29uZmlndXJhdGlvbiBpZiBhcHBsaWNhYmxlXHJcbiAgICAgICAgICAgIG9iai51cGRhdGVUYWJsZSgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIE9uIGFmdGVyIGNoYW5nZXNcclxuICAgICAgICAgICAgb2JqLm9uYWZ0ZXJjaGFuZ2VzKGVsLCByZWNvcmRzKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWZyZXNoIGN1cnJlbnQgc2VsZWN0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnJlZnJlc2hTZWxlY3Rpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKG9iai5zZWxlY3RlZENlbGwpIHtcclxuICAgICAgICAgICAgICAgIG9iai51cGRhdGVTZWxlY3Rpb25Gcm9tQ29vcmRzKG9iai5zZWxlY3RlZENlbGxbMF0sIG9iai5zZWxlY3RlZENlbGxbMV0sIG9iai5zZWxlY3RlZENlbGxbMl0sIG9iai5zZWxlY3RlZENlbGxbM10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTW92ZSBjb29yZHMgdG8gQTEgaW4gY2FzZSBvdmVsYXBzIHdpdGggYW4gZXhjbHVkZWQgY2VsbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5jb25kaXRpb25hbFNlbGVjdGlvblVwZGF0ZSA9IGZ1bmN0aW9uKHR5cGUsIG8sIGQpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5zZWxlY3RlZENlbGwgJiYgKChvID49IG9iai5zZWxlY3RlZENlbGxbMV0gJiYgbyA8PSBvYmouc2VsZWN0ZWRDZWxsWzNdKSB8fCAoZCA+PSBvYmouc2VsZWN0ZWRDZWxsWzFdICYmIGQgPD0gb2JqLnNlbGVjdGVkQ2VsbFszXSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJlc2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5zZWxlY3RlZENlbGwgJiYgKChvID49IG9iai5zZWxlY3RlZENlbGxbMF0gJiYgbyA8PSBvYmouc2VsZWN0ZWRDZWxsWzJdKSB8fCAoZCA+PSBvYmouc2VsZWN0ZWRDZWxsWzBdICYmIGQgPD0gb2JqLnNlbGVjdGVkQ2VsbFsyXSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJlc2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2xlYXIgdGFibGUgc2VsZWN0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnJlc2V0U2VsZWN0aW9uID0gZnVuY3Rpb24oYmx1cikge1xyXG4gICAgICAgICAgICAvLyBSZW1vdmUgc3R5bGVcclxuICAgICAgICAgICAgaWYgKCEgb2JqLmhpZ2hsaWdodGVkLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzU3RhdHVzID0gMDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBwcmV2aW91c1N0YXR1cyA9IDE7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmhpZ2hsaWdodGVkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmhpZ2hsaWdodGVkW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5oaWdobGlnaHRlZFtpXS5jbGFzc0xpc3QucmVtb3ZlKCdoaWdobGlnaHQtbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5oaWdobGlnaHRlZFtpXS5jbGFzc0xpc3QucmVtb3ZlKCdoaWdobGlnaHQtcmlnaHQnKTtcclxuICAgICAgICAgICAgICAgICAgICBvYmouaGlnaGxpZ2h0ZWRbaV0uY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0LXRvcCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5oaWdobGlnaHRlZFtpXS5jbGFzc0xpc3QucmVtb3ZlKCdoaWdobGlnaHQtYm90dG9tJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmhpZ2hsaWdodGVkW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodC1zZWxlY3RlZCcpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB4ID0gcGFyc2VJbnQob2JqLmhpZ2hsaWdodGVkW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS14JykpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBweSA9IHBhcnNlSW50KG9iai5oaWdobGlnaHRlZFtpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBtZXJnZWQgY2VsbHNcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmhpZ2hsaWdodGVkW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sc3BhbiA9IHBhcnNlSW50KG9iai5oaWdobGlnaHRlZFtpXS5nZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb3dzcGFuID0gcGFyc2VJbnQob2JqLmhpZ2hsaWdodGVkW2ldLmdldEF0dHJpYnV0ZSgncm93c3BhbicpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHV4ID0gY29sc3BhbiA+IDAgPyBweCArIChjb2xzcGFuIC0gMSkgOiBweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHV5ID0gcm93c3BhbiA+IDAgPyBweSArIChyb3dzcGFuIC0gMSk6IHB5O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1eCA9IHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXkgPSBweTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgc2VsZWN0ZWQgZnJvbSBoZWFkZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IHB4OyBqIDw9IHV4OyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5oZWFkZXJzW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouaGVhZGVyc1tqXS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHNlbGVjdGVkIGZyb20gcm93c1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBweTsgaiA8PSB1eTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoucm93c1tqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJvd3Nbal0uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJlc2V0IGhpZ2hsaWdoZWQgY2VsbHNcclxuICAgICAgICAgICAgb2JqLmhpZ2hsaWdodGVkID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmVzZXRcclxuICAgICAgICAgICAgb2JqLnNlbGVjdGVkQ2VsbCA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gSGlkZSBjb3JuZXJcclxuICAgICAgICAgICAgb2JqLmNvcm5lci5zdHlsZS50b3AgPSAnLTIwMDBweCc7XHJcbiAgICAgICAgICAgIG9iai5jb3JuZXIuc3R5bGUubGVmdCA9ICctMjAwMHB4JztcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoYmx1ciA9PSB0cnVlICYmIHByZXZpb3VzU3RhdHVzID09IDEpIHtcclxuICAgICAgICAgICAgICAgIG9iai5kaXNwYXRjaCgnb25ibHVyJywgZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHByZXZpb3VzU3RhdHVzO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSBzZWxlY3Rpb24gYmFzZWQgb24gdHdvIGNlbGxzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnVwZGF0ZVNlbGVjdGlvbiA9IGZ1bmN0aW9uKGVsMSwgZWwyLCBvcmlnaW4pIHtcclxuICAgICAgICAgICAgdmFyIHgxID0gZWwxLmdldEF0dHJpYnV0ZSgnZGF0YS14Jyk7XHJcbiAgICAgICAgICAgIHZhciB5MSA9IGVsMS5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpO1xyXG4gICAgICAgICAgICBpZiAoZWwyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeDIgPSBlbDIuZ2V0QXR0cmlidXRlKCdkYXRhLXgnKTtcclxuICAgICAgICAgICAgICAgIHZhciB5MiA9IGVsMi5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHgyID0geDE7XHJcbiAgICAgICAgICAgICAgICB2YXIgeTIgPSB5MTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIG9iai51cGRhdGVTZWxlY3Rpb25Gcm9tQ29vcmRzKHgxLCB5MSwgeDIsIHkyLCBvcmlnaW4pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSBzZWxlY3Rpb24gZnJvbSBjb29yZHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmoudXBkYXRlU2VsZWN0aW9uRnJvbUNvb3JkcyA9IGZ1bmN0aW9uKHgxLCB5MSwgeDIsIHkyLCBvcmlnaW4pIHtcclxuICAgICAgICAgICAgLy8gUmVzZXQgU2VsZWN0aW9uXHJcbiAgICAgICAgICAgIHZhciB1cGRhdGVkID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIHByZXZpb3VzU3RhdGUgPSBvYmoucmVzZXRTZWxlY3Rpb24oKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBTYW1lIGVsZW1lbnRcclxuICAgICAgICAgICAgaWYgKHgyID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHgyID0geDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHkyID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHkyID0geTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBTZWxlY3Rpb24gbXVzdCBiZSB3aXRoaW4gdGhlIGV4aXN0aW5nIGRhdGFcclxuICAgICAgICAgICAgaWYgKHgxID49IG9iai5oZWFkZXJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgeDEgPSBvYmouaGVhZGVycy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh5MSA+PSBvYmoucm93cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHkxID0gb2JqLnJvd3MubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoeDIgPj0gb2JqLmhlYWRlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB4MiA9IG9iai5oZWFkZXJzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHkyID49IG9iai5yb3dzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgeTIgPSBvYmoucm93cy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gS2VlcCBzZWxlY3RlZCBjZWxsXHJcbiAgICAgICAgICAgIG9iai5zZWxlY3RlZENlbGwgPSBbeDEsIHkxLCB4MiwgeTJdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFNlbGVjdCBjZWxsc1xyXG4gICAgICAgICAgICBpZiAoeDEgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWRkIHNlbGVjdGVkIGNlbGxcclxuICAgICAgICAgICAgICAgIGlmIChvYmoucmVjb3Jkc1t5MV1beDFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbeTFdW3gxXS5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQtc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gT3JpZ2luICYgRGVzdGluYXRpb25cclxuICAgICAgICAgICAgICAgIGlmIChwYXJzZUludCh4MSkgPCBwYXJzZUludCh4MikpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHggPSBwYXJzZUludCh4MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHV4ID0gcGFyc2VJbnQoeDIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHggPSBwYXJzZUludCh4Mik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHV4ID0gcGFyc2VJbnQoeDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQoeTEpIDwgcGFyc2VJbnQoeTIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB5ID0gcGFyc2VJbnQoeTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1eSA9IHBhcnNlSW50KHkyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB5ID0gcGFyc2VJbnQoeTIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1eSA9IHBhcnNlSW50KHkxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZ5IG1lcmdlZCBjb2x1bW5zXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gcHg7IGkgPD0gdXg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBweTsgaiA8PSB1eTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoucmVjb3Jkc1tqXVtpXSAmJiBvYmoucmVjb3Jkc1tqXVtpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gcGFyc2VJbnQob2JqLnJlY29yZHNbal1baV0uZ2V0QXR0cmlidXRlKCdkYXRhLXgnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHBhcnNlSW50KG9iai5yZWNvcmRzW2pdW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS15JykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHNwYW4gPSBwYXJzZUludChvYmoucmVjb3Jkc1tqXVtpXS5nZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93c3BhbiA9IHBhcnNlSW50KG9iai5yZWNvcmRzW2pdW2ldLmdldEF0dHJpYnV0ZSgncm93c3BhbicpKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHNwYW4gPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHggPCBweCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBweCA9IHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4ICsgY29sc3BhbiA+IHV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV4ID0geCArIGNvbHNwYW4gLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NwYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHB5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB5ID0geTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeSArIHJvd3NwYW4gPiB1eSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1eSA9IHkgKyByb3dzcGFuIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIExpbWl0c1xyXG4gICAgICAgICAgICAgICAgdmFyIGJvcmRlckxlZnQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJvcmRlclJpZ2h0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHZhciBib3JkZXJUb3AgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJvcmRlckJvdHRvbSA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFZlcnRpY2FsIGxpbWl0c1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IHB5OyBqIDw9IHV5OyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnJvd3Nbal0uc3R5bGUuZGlzcGxheSAhPSAnbm9uZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJvcmRlclRvcCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJUb3AgPSBqO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlckJvdHRvbSA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBSZWRlZmluaW5nIHN0eWxlc1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHB4OyBpIDw9IHV4OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gcHk7IGogPD0gdXk7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnJvd3Nbal0uc3R5bGUuZGlzcGxheSAhPSAnbm9uZScgJiYgb2JqLnJlY29yZHNbal1baV0uc3R5bGUuZGlzcGxheSAhPSAnbm9uZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW2pdW2ldLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmhpZ2hsaWdodGVkLnB1c2gob2JqLnJlY29yZHNbal1baV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSG9yaXpvbnRhbCBsaW1pdHNcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1tpXS50eXBlICE9ICdoaWRkZW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChib3JkZXJMZWZ0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlckxlZnQgPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlclJpZ2h0ID0gaTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBib3JkZXJzXHJcbiAgICAgICAgICAgICAgICBpZiAoISBib3JkZXJMZWZ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyTGVmdCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoISBib3JkZXJSaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlclJpZ2h0ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBib3JkZXJMZWZ0OyBpIDw9IGJvcmRlclJpZ2h0OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1tpXS50eXBlICE9ICdoaWRkZW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRvcCBib3JkZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5yZWNvcmRzW2JvcmRlclRvcF0gJiYgb2JqLnJlY29yZHNbYm9yZGVyVG9wXVtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbYm9yZGVyVG9wXVtpXS5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQtdG9wJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQm90dG9tIGJvcmRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnJlY29yZHNbYm9yZGVyQm90dG9tXSAmJiBvYmoucmVjb3Jkc1tib3JkZXJCb3R0b21dW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoucmVjb3Jkc1tib3JkZXJCb3R0b21dW2ldLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodC1ib3R0b20nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgc2VsZWN0ZWQgZnJvbSBoZWFkZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5oZWFkZXJzW2ldLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gYm9yZGVyVG9wOyBqIDw9IGJvcmRlckJvdHRvbTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5yb3dzW2pdICYmIG9iai5yb3dzW2pdLnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExlZnQgYm9yZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW2pdW2JvcmRlckxlZnRdLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodC1sZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJpZ2h0IGJvcmRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoucmVjb3Jkc1tqXVtib3JkZXJSaWdodF0uY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0LXJpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBzZWxlY3RlZCBmcm9tIHJvd3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJvd3Nbal0uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG9iai5zZWxlY3RlZENvbnRhaW5lciA9IFsgYm9yZGVyTGVmdCwgYm9yZGVyVG9wLCBib3JkZXJSaWdodCwgYm9yZGVyQm90dG9tIF07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBIYW5kbGUgZXZlbnRzXHJcbiAgICAgICAgICAgIGlmIChwcmV2aW91c1N0YXRlID09IDApIHtcclxuICAgICAgICAgICAgICAgIG9iai5kaXNwYXRjaCgnb25mb2N1cycsIGVsKTtcclxuXHJcbiAgICAgICAgICAgICAgICBvYmoucmVtb3ZlQ29weWluZ1NlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvYmouZGlzcGF0Y2goJ29uc2VsZWN0aW9uJywgZWwsIGJvcmRlckxlZnQsIGJvcmRlclRvcCwgYm9yZGVyUmlnaHQsIGJvcmRlckJvdHRvbSwgb3JpZ2luKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEZpbmQgY29ybmVyIGNlbGxcclxuICAgICAgICAgICAgb2JqLnVwZGF0ZUNvcm5lclBvc2l0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVtb3ZlIGNvcHkgc2VsZWN0aW9uXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHJldHVybiB2b2lkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnJlbW92ZUNvcHlTZWxlY3Rpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIGN1cnJlbnQgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLnNlbGVjdGlvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgb2JqLnNlbGVjdGlvbltpXS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3Rpb24nKTtcclxuICAgICAgICAgICAgICAgIG9iai5zZWxlY3Rpb25baV0uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0aW9uLWxlZnQnKTtcclxuICAgICAgICAgICAgICAgIG9iai5zZWxlY3Rpb25baV0uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0aW9uLXJpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICBvYmouc2VsZWN0aW9uW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGlvbi10b3AnKTtcclxuICAgICAgICAgICAgICAgIG9iai5zZWxlY3Rpb25baV0uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0aW9uLWJvdHRvbScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgb2JqLnNlbGVjdGlvbiA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSBjb3B5IHNlbGVjdGlvblxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSBpbnQgeCwgeVxyXG4gICAgICAgICAqIEByZXR1cm4gdm9pZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai51cGRhdGVDb3B5U2VsZWN0aW9uID0gZnVuY3Rpb24oeDMsIHkzKSB7XHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBzZWxlY3Rpb25cclxuICAgICAgICAgICAgb2JqLnJlbW92ZUNvcHlTZWxlY3Rpb24oKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBHZXQgZWxlbWVudHMgZmlyc3QgYW5kIGxhc3RcclxuICAgICAgICAgICAgdmFyIHgxID0gb2JqLnNlbGVjdGVkQ29udGFpbmVyWzBdO1xyXG4gICAgICAgICAgICB2YXIgeTEgPSBvYmouc2VsZWN0ZWRDb250YWluZXJbMV07XHJcbiAgICAgICAgICAgIHZhciB4MiA9IG9iai5zZWxlY3RlZENvbnRhaW5lclsyXTtcclxuICAgICAgICAgICAgdmFyIHkyID0gb2JqLnNlbGVjdGVkQ29udGFpbmVyWzNdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh4MyAhPSBudWxsICYmIHkzICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmICh4MyAtIHgyID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBweCA9IHBhcnNlSW50KHgyKSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHV4ID0gcGFyc2VJbnQoeDMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHggPSBwYXJzZUludCh4Myk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHV4ID0gcGFyc2VJbnQoeDEpIC0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHkzIC0geTIgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB5ID0gcGFyc2VJbnQoeTIpICsgMTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXkgPSBwYXJzZUludCh5Myk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBweSA9IHBhcnNlSW50KHkzKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXkgPSBwYXJzZUludCh5MSkgLSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAodXggLSBweCA8PSB1eSAtIHB5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB4ID0gcGFyc2VJbnQoeDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1eCA9IHBhcnNlSW50KHgyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB5ID0gcGFyc2VJbnQoeTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1eSA9IHBhcnNlSW50KHkyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IHB5OyBqIDw9IHV5OyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gcHg7IGkgPD0gdXg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnJlY29yZHNbal1baV0gJiYgb2JqLnJvd3Nbal0uc3R5bGUuZGlzcGxheSAhPSAnbm9uZScgJiYgb2JqLnJlY29yZHNbal1baV0uc3R5bGUuZGlzcGxheSAhPSAnbm9uZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW2pdW2ldLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbcHldW2ldLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGlvbi10b3AnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW3V5XVtpXS5jbGFzc0xpc3QuYWRkKCdzZWxlY3Rpb24tYm90dG9tJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoucmVjb3Jkc1tqXVtweF0uY2xhc3NMaXN0LmFkZCgnc2VsZWN0aW9uLWxlZnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW2pdW3V4XS5jbGFzc0xpc3QuYWRkKCdzZWxlY3Rpb24tcmlnaHQnKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGVyc2lzdCBzZWxlY3RlZCBlbGVtZW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNlbGVjdGlvbi5wdXNoKG9iai5yZWNvcmRzW2pdW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSBjb3JuZXIgcG9zaXRpb25cclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcmV0dXJuIHZvaWRcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmoudXBkYXRlQ29ybmVyUG9zaXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gSWYgYW55IHNlbGVjdGVkIGNlbGxzXHJcbiAgICAgICAgICAgIGlmICghIG9iai5oaWdobGlnaHRlZC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIG9iai5jb3JuZXIuc3R5bGUudG9wID0gJy0yMDAwcHgnO1xyXG4gICAgICAgICAgICAgICAgb2JqLmNvcm5lci5zdHlsZS5sZWZ0ID0gJy0yMDAwcHgnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gR2V0IGxhc3QgY2VsbFxyXG4gICAgICAgICAgICAgICAgdmFyIGxhc3QgPSBvYmouaGlnaGxpZ2h0ZWRbb2JqLmhpZ2hsaWdodGVkLmxlbmd0aC0xXTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudFJlY3QgPSBvYmouY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgIHZhciB4MSA9IGNvbnRlbnRSZWN0LmxlZnQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgeTEgPSBjb250ZW50UmVjdC50b3A7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGxhc3RSZWN0ID0gbGFzdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgIHZhciB4MiA9IGxhc3RSZWN0LmxlZnQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgeTIgPSBsYXN0UmVjdC50b3A7XHJcbiAgICAgICAgICAgICAgICB2YXIgdzIgPSBsYXN0UmVjdC53aWR0aDtcclxuICAgICAgICAgICAgICAgIHZhciBoMiA9IGxhc3RSZWN0LmhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9ICh4MiAtIHgxKSArIG9iai5jb250ZW50LnNjcm9sbExlZnQgKyB3MiAtIDQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9ICh5MiAtIHkxKSArIG9iai5jb250ZW50LnNjcm9sbFRvcCArIGgyIC0gNDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBQbGFjZSB0aGUgY29ybmVyIGluIHRoZSBjb3JyZWN0IHBsYWNlXHJcbiAgICAgICAgICAgICAgICBvYmouY29ybmVyLnN0eWxlLnRvcCA9IHkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgb2JqLmNvcm5lci5zdHlsZS5sZWZ0ID0geCArICdweCc7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmZyZWV6ZUNvbHVtbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBvYmouZ2V0RnJlZXplV2lkdGgoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeDIgLSB4MSArIHcyIDwgd2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmNvcm5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5zZWxlY3Rpb25Db3B5ID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5jb3JuZXIuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuc2VsZWN0aW9uQ29weSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5jb3JuZXIuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSBzY3JvbGwgcG9zaXRpb24gYmFzZWQgb24gdGhlIHNlbGVjdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai51cGRhdGVTY3JvbGwgPSBmdW5jdGlvbihkaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgLy8gakV4Y2VsIENvbnRhaW5lciBpbmZvcm1hdGlvblxyXG4gICAgICAgICAgICB2YXIgY29udGVudFJlY3QgPSBvYmouY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgdmFyIHgxID0gY29udGVudFJlY3QubGVmdDtcclxuICAgICAgICAgICAgdmFyIHkxID0gY29udGVudFJlY3QudG9wO1xyXG4gICAgICAgICAgICB2YXIgdzEgPSBjb250ZW50UmVjdC53aWR0aDtcclxuICAgICAgICAgICAgdmFyIGgxID0gY29udGVudFJlY3QuaGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgLy8gRGlyZWN0aW9uIExlZnQgb3IgVXBcclxuICAgICAgICAgICAgdmFyIHJlZmVyZW5jZSA9IG9iai5yZWNvcmRzW29iai5zZWxlY3RlZENlbGxbM11dW29iai5zZWxlY3RlZENlbGxbMl1dO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJlZmVyZW5jZVxyXG4gICAgICAgICAgICB2YXIgcmVmZXJlbmNlUmVjdCA9IHJlZmVyZW5jZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgdmFyIHgyID0gcmVmZXJlbmNlUmVjdC5sZWZ0O1xyXG4gICAgICAgICAgICB2YXIgeTIgPSByZWZlcmVuY2VSZWN0LnRvcDtcclxuICAgICAgICAgICAgdmFyIHcyID0gcmVmZXJlbmNlUmVjdC53aWR0aDtcclxuICAgICAgICAgICAgdmFyIGgyID0gcmVmZXJlbmNlUmVjdC5oZWlnaHQ7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gRGlyZWN0aW9uXHJcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gMCB8fCBkaXJlY3Rpb24gPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSAoeDIgLSB4MSkgKyBvYmouY29udGVudC5zY3JvbGxMZWZ0O1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAoeTIgLSB5MSkgKyBvYmouY29udGVudC5zY3JvbGxUb3AgLSAyO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSAoeDIgLSB4MSkgKyBvYmouY29udGVudC5zY3JvbGxMZWZ0ICsgdzI7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9ICh5MiAtIHkxKSArIG9iai5jb250ZW50LnNjcm9sbFRvcCArIGgyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gVG9wIHBvc2l0aW9uIGNoZWNrXHJcbiAgICAgICAgICAgIGlmICh5ID4gKG9iai5jb250ZW50LnNjcm9sbFRvcCArIDMwKSAmJiB5IDwgKG9iai5jb250ZW50LnNjcm9sbFRvcCArIGgxKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSW4gdGhlIHZpZXdwb3J0XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBPdXQgb2Ygdmlld3BvcnRcclxuICAgICAgICAgICAgICAgIGlmICh5IDwgb2JqLmNvbnRlbnQuc2Nyb2xsVG9wICsgMzApIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouY29udGVudC5zY3JvbGxUb3AgPSB5IC0gaDI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5jb250ZW50LnNjcm9sbFRvcCA9IHkgLSAoaDEgLSAyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEZyZWV6ZSBjb2x1bW5zPyBcclxuICAgICAgICAgICAgdmFyIGZyZWV6ZWQgPSBvYmouZ2V0RnJlZXplV2lkdGgoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIExlZnQgcG9zaXRpb24gY2hlY2sgLSBUT0RPOiBjaGFuZ2UgdGhhdCB0byB0aGUgYm90dG9tIGJvcmRlciBvZiB0aGUgZWxlbWVudFxyXG4gICAgICAgICAgICBpZiAoeCA+IChvYmouY29udGVudC5zY3JvbGxMZWZ0ICsgZnJlZXplZCkgJiYgeCA8IChvYmouY29udGVudC5zY3JvbGxMZWZ0ICsgdzEpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJbiB0aGUgdmlld3BvcnRcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIE91dCBvZiB2aWV3cG9ydFxyXG4gICAgICAgICAgICAgICAgaWYgKHggPCBvYmouY29udGVudC5zY3JvbGxMZWZ0ICsgMzApIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouY29udGVudC5zY3JvbGxMZWZ0ID0geDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmNvbnRlbnQuc2Nyb2xsTGVmdCA8IDUwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5jb250ZW50LnNjcm9sbExlZnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoeCA8IG9iai5jb250ZW50LnNjcm9sbExlZnQgKyBmcmVlemVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmNvbnRlbnQuc2Nyb2xsTGVmdCA9IHggLSBmcmVlemVkIC0gMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmNvbnRlbnQuc2Nyb2xsTGVmdCA9IHggLSAodzEgLSAyMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgdGhlIGNvbHVtbiB3aWR0aFxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSBpbnQgY29sdW1uIGNvbHVtbiBudW1iZXIgKGZpcnN0IGNvbHVtbiBpczogMClcclxuICAgICAgICAgKiBAcmV0dXJuIGludCBjdXJyZW50IHdpZHRoXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLmdldFdpZHRoID0gZnVuY3Rpb24oY29sdW1uKSB7XHJcbiAgICAgICAgICAgIGlmICghIGNvbHVtbikge1xyXG4gICAgICAgICAgICAgICAgLy8gR2V0IGFsbCBoZWFkZXJzXHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmouaGVhZGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChvYmoub3B0aW9ucy5jb2x1bW5zW2ldLndpZHRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIEluIGNhc2UgdGhlIGNvbHVtbiBpcyBhbiBvYmplY3RcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoY29sdW1uKSA9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9ICQoY29sdW1uKS5nZXRBdHRyaWJ1dGUoJ2RhdGEteCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBkYXRhID0gb2JqLmNvbGdyb3VwW2NvbHVtbl0uZ2V0QXR0cmlidXRlKCd3aWR0aCcpXHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXQgdGhlIGNvbHVtbiB3aWR0aFxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSBpbnQgY29sdW1uIG51bWJlciAoZmlyc3QgY29sdW1uIGlzOiAwKVxyXG4gICAgICAgICAqIEBwYXJhbSBpbnQgbmV3IGNvbHVtbiB3aWR0aFxyXG4gICAgICAgICAqIEBwYXJhbSBpbnQgb2xkIGNvbHVtbiB3aWR0aFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5zZXRXaWR0aCA9IGZ1bmN0aW9uIChjb2x1bW4sIHdpZHRoLCBvbGRXaWR0aCkge1xyXG4gICAgICAgICAgICBpZiAod2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbHVtbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBPbGR3aWR0aFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIG9sZFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbGRXaWR0aCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgd2lkdGhcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHVtbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBvbGRXaWR0aFtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkV2lkdGhbaV0gPSBvYmouY29sZ3JvdXBbY29sdW1uW2ldXS5nZXRBdHRyaWJ1dGUoJ3dpZHRoJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHcgPSBBcnJheS5pc0FycmF5KHdpZHRoKSAmJiB3aWR0aFtpXSA/IHdpZHRoW2ldIDogd2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5jb2xncm91cFtjb2x1bW5baV1dLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuY29sdW1uc1tjb2x1bW5baV1dLndpZHRoID0gdztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE9sZHdpZHRoXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgb2xkV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkV2lkdGggPSBvYmouY29sZ3JvdXBbY29sdW1uXS5nZXRBdHRyaWJ1dGUoJ3dpZHRoJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNldCB3aWR0aFxyXG4gICAgICAgICAgICAgICAgICAgIG9iai5jb2xncm91cFtjb2x1bW5dLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB3aWR0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuY29sdW1uc1tjb2x1bW5dLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gS2VlcGluZyBoaXN0b3J5IG9mIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgIG9iai5zZXRIaXN0b3J5KHtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246J3NldFdpZHRoJyxcclxuICAgICAgICAgICAgICAgICAgICBjb2x1bW46Y29sdW1uLFxyXG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlOm9sZFdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlOndpZHRoLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gT24gcmVzaXplIGNvbHVtblxyXG4gICAgICAgICAgICAgICAgb2JqLmRpc3BhdGNoKCdvbnJlc2l6ZWNvbHVtbicsIGVsLCBjb2x1bW4sIHdpZHRoLCBvbGRXaWR0aCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGNvcm5lciBwb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgb2JqLnVwZGF0ZUNvcm5lclBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldCB0aGUgcm93IGhlaWdodFxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSByb3cgLSByb3cgbnVtYmVyIChmaXJzdCByb3cgaXM6IDApXHJcbiAgICAgICAgICogQHBhcmFtIGhlaWdodCAtIG5ldyByb3cgaGVpZ2h0XHJcbiAgICAgICAgICogQHBhcmFtIG9sZEhlaWdodCAtIG9sZCByb3cgaGVpZ2h0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnNldEhlaWdodCA9IGZ1bmN0aW9uIChyb3csIGhlaWdodCwgb2xkSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIGlmIChoZWlnaHQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJbiBjYXNlIHRoZSBjb2x1bW4gaXMgYW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHJvdykgPT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByb3cgPSByb3cuZ2V0QXR0cmlidXRlKCdkYXRhLXknKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gT2xkd2lkdGhcclxuICAgICAgICAgICAgICAgIGlmICghIG9sZEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9sZEhlaWdodCA9IG9iai5yb3dzW3Jvd10uZ2V0QXR0cmlidXRlKCdoZWlnaHQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgb2xkSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWN0ID0gb2JqLnJvd3Nbcm93XS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkSGVpZ2h0ID0gcmVjdC5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEludGVnZXJcclxuICAgICAgICAgICAgICAgIGhlaWdodCA9IHBhcnNlSW50KGhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU2V0IHdpZHRoXHJcbiAgICAgICAgICAgICAgICBvYmoucm93c1tyb3ddLnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIEtlZXAgb3B0aW9ucyB1cGRhdGVkXHJcbiAgICAgICAgICAgICAgICBpZiAoISBvYmoub3B0aW9ucy5yb3dzW3Jvd10pIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5yb3dzW3Jvd10gPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLnJvd3Nbcm93XS5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIEtlZXBpbmcgaGlzdG9yeSBvZiBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICBvYmouc2V0SGlzdG9yeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOidzZXRIZWlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJvdzpyb3csXHJcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWU6b2xkSGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlOmhlaWdodCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE9uIHJlc2l6ZSBjb2x1bW5cclxuICAgICAgICAgICAgICAgIG9iai5kaXNwYXRjaCgnb25yZXNpemVyb3cnLCBlbCwgcm93LCBoZWlnaHQsIG9sZEhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGNvcm5lciBwb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgb2JqLnVwZGF0ZUNvcm5lclBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgdGhlIHJvdyBoZWlnaHRcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0gcm93IC0gcm93IG51bWJlciAoZmlyc3Qgcm93IGlzOiAwKVxyXG4gICAgICAgICAqIEByZXR1cm4gaGVpZ2h0IC0gY3VycmVudCByb3cgaGVpZ2h0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLmdldEhlaWdodCA9IGZ1bmN0aW9uKHJvdykge1xyXG4gICAgICAgICAgICBpZiAoISByb3cpIHtcclxuICAgICAgICAgICAgICAgIC8vIEdldCBoZWlnaHQgb2YgYWxsIHJvd3NcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iai5yb3dzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGggPSBvYmoucm93c1tqXS5zdHlsZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtqXSA9IGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gSW4gY2FzZSB0aGUgcm93IGlzIGFuIG9iamVjdFxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihyb3cpID09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93ID0gJChyb3cpLmdldEF0dHJpYnV0ZSgnZGF0YS15Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gb2JqLnJvd3Nbcm93XS5zdHlsZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBvYmouc2V0Rm9vdGVyID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuZm9vdGVycyA9IGRhdGE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5mb290ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISBvYmoudGZvb3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoudGZvb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0Zm9vdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai50YWJsZS5hcHBlbmRDaGlsZChvYmoudGZvb3QpO1xyXG4gICAgICAgICAgICAgICAgfSBcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iai5vcHRpb25zLmZvb3RlcnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnRmb290LmNoaWxkcmVuW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ciA9IG9iai50Zm9vdC5jaGlsZHJlbltqXTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai50Zm9vdC5hcHBlbmRDaGlsZCh0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmhlYWRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMuZm9vdGVyc1tqXVtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuZm9vdGVyc1tqXVtpXSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoudGZvb3QuY2hpbGRyZW5bal0uY2hpbGRyZW5baSsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRkID0gb2JqLnRmb290LmNoaWxkcmVuW2pdLmNoaWxkcmVuW2krMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRleHQgYWxpZ25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xBbGlnbiA9IG9iai5vcHRpb25zLmNvbHVtbnNbaV0uYWxpZ24gPyBvYmoub3B0aW9ucy5jb2x1bW5zW2ldLmFsaWduIDogJ2NlbnRlcic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZC5zdHlsZS50ZXh0QWxpZ24gPSBjb2xBbGlnbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZC5pbm5lclRleHQgPSBvYmoucGFyc2VWYWx1ZShpLCBqLCBvYmoub3B0aW9ucy5mb290ZXJzW2pdW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCB0aGUgY29sdW1uIHRpdGxlXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHBhcmFtIGNvbHVtbiAtIGNvbHVtbiBudW1iZXIgKGZpcnN0IGNvbHVtbiBpczogMClcclxuICAgICAgICAgKiBAcGFyYW0gdGl0bGUgLSBuZXcgY29sdW1uIHRpdGxlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLmdldEhlYWRlciA9IGZ1bmN0aW9uKGNvbHVtbikge1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqLmhlYWRlcnNbY29sdW1uXS5pbm5lclRleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IHRoZSBjb2x1bW4gdGl0bGVcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0gY29sdW1uIC0gY29sdW1uIG51bWJlciAoZmlyc3QgY29sdW1uIGlzOiAwKVxyXG4gICAgICAgICAqIEBwYXJhbSB0aXRsZSAtIG5ldyBjb2x1bW4gdGl0bGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouc2V0SGVhZGVyID0gZnVuY3Rpb24oY29sdW1uLCBuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAob2JqLmhlYWRlcnNbY29sdW1uXSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9sZFZhbHVlID0gb2JqLmhlYWRlcnNbY29sdW1uXS5pbm5lclRleHQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICghIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPSBwcm9tcHQob2JqLm9wdGlvbnMudGV4dC5jb2x1bW5OYW1lLCBvbGRWYWx1ZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmhlYWRlcnNbY29sdW1uXS5pbm5lclRleHQgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIHRoZSB0aXRsZSBwcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgICAgIG9iai5oZWFkZXJzW2NvbHVtbl0uc2V0QXR0cmlidXRlKCd0aXRsZScsIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGl0bGVcclxuICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5jb2x1bW5zW2NvbHVtbl0udGl0bGUgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgb2JqLnNldEhpc3Rvcnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3NldEhlYWRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4sXHJcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWU6IG9sZFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlOiBuZXdWYWx1ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIE9uIG9uY2hhbmdlIGhlYWRlclxyXG4gICAgICAgICAgICAgICAgb2JqLmRpc3BhdGNoKCdvbmNoYW5nZWhlYWRlcicsIGVsLCBjb2x1bW4sIG9sZFZhbHVlLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgdGhlIGhlYWRlcnNcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0gYXNBcnJheVxyXG4gICAgICAgICAqIEByZXR1cm4gbWl4ZWRcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouZ2V0SGVhZGVycyA9IGZ1bmN0aW9uIChhc0FycmF5KSB7XHJcbiAgICAgICAgICAgIHZhciB0aXRsZSA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmhlYWRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlLnB1c2gob2JqLmdldEhlYWRlcihpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gYXNBcnJheSA/IHRpdGxlIDogdGl0bGUuam9pbihvYmoub3B0aW9ucy5jc3ZEZWxpbWl0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBtZXRhIGluZm9ybWF0aW9uIGZyb20gY2VsbChzKVxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEByZXR1cm4gaW50ZWdlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5nZXRNZXRhID0gZnVuY3Rpb24oY2VsbCwga2V5KSB7XHJcbiAgICAgICAgICAgIGlmICghIGNlbGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmoub3B0aW9ucy5tZXRhO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmoub3B0aW9ucy5tZXRhW2NlbGxdICYmIG9iai5vcHRpb25zLm1ldGFbY2VsbF1ba2V5XSA/IG9iai5vcHRpb25zLm1ldGFbY2VsbF1ba2V5XSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmoub3B0aW9ucy5tZXRhW2NlbGxdID8gb2JqLm9wdGlvbnMubWV0YVtjZWxsXSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXQgbWV0YSBpbmZvcm1hdGlvbiB0byBjZWxsKHMpXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHJldHVybiBpbnRlZ2VyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnNldE1ldGEgPSBmdW5jdGlvbihvLCBrLCB2KSB7XHJcbiAgICAgICAgICAgIGlmICghIG9iai5vcHRpb25zLm1ldGEpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm1ldGEgPSB7fVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKGsgJiYgdikge1xyXG4gICAgICAgICAgICAgICAgLy8gU2V0IGRhdGEgdmFsdWVcclxuICAgICAgICAgICAgICAgIGlmICghIG9iai5vcHRpb25zLm1ldGFbb10pIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5tZXRhW29dID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5tZXRhW29dW2tdID0gdjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIEFwcGx5IHRoYXQgZm9yIGFsbCBjZWxsc1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIG9iai5vcHRpb25zLm1ldGFba2V5c1tpXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMubWV0YVtrZXlzW2ldXSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0gT2JqZWN0LmtleXMob1trZXlzW2ldXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwcm9wLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm1ldGFba2V5c1tpXV1bcHJvcFtqXV0gPSBvW2tleXNbaV1dW3Byb3Bbal1dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIG9iai5kaXNwYXRjaCgnb25jaGFuZ2VtZXRhJywgZWwsIG8sIGssIHYpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSBtZXRhIGluZm9ybWF0aW9uXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHJldHVybiBpbnRlZ2VyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnVwZGF0ZU1ldGEgPSBmdW5jdGlvbihhZmZlY3RlZENlbGxzKSB7XHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5tZXRhKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3TWV0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmoub3B0aW9ucy5tZXRhKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhZmZlY3RlZENlbGxzW2tleXNbaV1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld01ldGFbYWZmZWN0ZWRDZWxsc1trZXlzW2ldXV0gPSBvYmoub3B0aW9ucy5tZXRhW2tleXNbaV1dO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld01ldGFba2V5c1tpXV0gPSBvYmoub3B0aW9ucy5tZXRhW2tleXNbaV1dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBtZXRhIGluZm9ybWF0aW9uXHJcbiAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5tZXRhID0gbmV3TWV0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBzdHlsZSBpbmZvcm1hdGlvbiBmcm9tIGNlbGwocylcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcmV0dXJuIGludGVnZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouZ2V0U3R5bGUgPSBmdW5jdGlvbihjZWxsLCBrZXkpIHtcclxuICAgICAgICAgICAgLy8gQ2VsbFxyXG4gICAgICAgICAgICBpZiAoISBjZWxsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDb250cm9sIHZhcnNcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIENvbHVtbiBhbmQgcm93IGxlbmd0aFxyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBvYmoub3B0aW9ucy5kYXRhWzBdLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gb2JqLm9wdGlvbnMuZGF0YS5sZW5ndGg7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIEdvIHRocm91Z2ggdGhlIGNvbHVtbnMgdG8gZ2V0IHRoZSBkYXRhXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHk7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ID0ga2V5ID8gb2JqLnJlY29yZHNbal1baV0uc3R5bGVba2V5XSA6IG9iai5yZWNvcmRzW2pdW2ldLmdldEF0dHJpYnV0ZSgnc3R5bGUnKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBbnkgbWV0YSBkYXRhIGZvciB0aGlzIGNvbHVtbj9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbHVtbiBuYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgayA9IGpleGNlbC5nZXRDb2x1bW5OYW1lRnJvbUlkKFtpLCBqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtrXSA9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjZWxsID0gamV4Y2VsLmdldElkRnJvbUNvbHVtbk5hbWUoY2VsbCwgdHJ1ZSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBrZXkgPyBvYmoucmVjb3Jkc1tjZWxsWzFdXVtjZWxsWzBdXS5zdHlsZVtrZXldIDogb2JqLnJlY29yZHNbY2VsbFsxXV1bY2VsbFswXV0uZ2V0QXR0cmlidXRlKCdzdHlsZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIG9iai5yZXNldFN0eWxlID0gZnVuY3Rpb24obywgaWdub3JlSGlzdG9yeUFuZEV2ZW50cykge1xyXG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG8pO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIFBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGpleGNlbC5nZXRJZEZyb21Db2x1bW5OYW1lKGtleXNbaV0sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5yZWNvcmRzW2NlbGxbMV1dICYmIG9iai5yZWNvcmRzW2NlbGxbMV1dW2NlbGxbMF1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbY2VsbFsxXV1bY2VsbFswXV0uc2V0QXR0cmlidXRlKCdzdHlsZScsICcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvYmouc2V0U3R5bGUobywgbnVsbCwgbnVsbCwgbnVsbCwgaWdub3JlSGlzdG9yeUFuZEV2ZW50cyk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IG1ldGEgaW5mb3JtYXRpb24gdG8gY2VsbChzKVxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEByZXR1cm4gaW50ZWdlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5zZXRTdHlsZSA9IGZ1bmN0aW9uKG8sIGssIHYsIGZvcmNlLCBpZ25vcmVIaXN0b3J5QW5kRXZlbnRzKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IHt9O1xyXG4gICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSB7fTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBBcHBseSBzdHlsZVxyXG4gICAgICAgICAgICB2YXIgYXBwbHlTdHlsZSA9IGZ1bmN0aW9uKGNlbGxJZCwga2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gUG9zaXRpb25cclxuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gamV4Y2VsLmdldElkRnJvbUNvbHVtbk5hbWUoY2VsbElkLCB0cnVlKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5yZWNvcmRzW2NlbGxbMV1dICYmIG9iai5yZWNvcmRzW2NlbGxbMV1dW2NlbGxbMF1dICYmIChvYmoucmVjb3Jkc1tjZWxsWzFdXVtjZWxsWzBdXS5jbGFzc0xpc3QuY29udGFpbnMoJ3JlYWRvbmx5Jyk9PWZhbHNlIHx8IGZvcmNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gb2JqLnJlY29yZHNbY2VsbFsxXV1bY2VsbFswXV0uc3R5bGVba2V5XTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIENoYW5nZSBsYXlvdXRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFZhbHVlID09IHZhbHVlICYmICEgZm9yY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbY2VsbFsxXV1bY2VsbFswXV0uc3R5bGVba2V5XSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW2NlbGxbMV1dW2NlbGxbMF1dLnN0eWxlW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBIaXN0b3J5XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgb2xkVmFsdWVbY2VsbElkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZVtjZWxsSWRdID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIG5ld1ZhbHVlW2NlbGxJZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWVbY2VsbElkXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlW2NlbGxJZF0ucHVzaChba2V5ICsgJzonICsgY3VycmVudFZhbHVlXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWVbY2VsbElkXS5wdXNoKFtrZXkgKyAnOicgKyB2YWx1ZV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKGsgJiYgdikge1xyXG4gICAgICAgICAgICAgICAgLy8gR2V0IG9iamVjdCBmcm9tIHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihvKSA9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5U3R5bGUobywgaywgdik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEF2b2lkIGR1cGxpY2F0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvbmVBcHBsaWNhdGlvbiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFwcGx5IHRoYXQgZm9yIGFsbCBjZWxsc1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgby5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IG9baV0uZ2V0QXR0cmlidXRlKCdkYXRhLXgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBvW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS15Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjZWxsTmFtZSA9IGpleGNlbC5nZXRDb2x1bW5OYW1lRnJvbUlkKFt4LCB5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaGFwcGVucyB3aGVuIGlzIGEgbWVyZ2VkIGNlbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEgb25lQXBwbGljYXRpb25bY2VsbE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBseVN0eWxlKGNlbGxOYW1lLCBrLCB2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZUFwcGxpY2F0aW9uW2NlbGxOYW1lXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG8pO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlID0gb1trZXlzW2ldXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHN0eWxlKSA9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IHN0eWxlLnNwbGl0KCc7Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3R5bGUubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZihzdHlsZVtqXSkgPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlW2pdID0gc3R5bGVbal0uc3BsaXQoJzonKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGVbal1bMF0udHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBseVN0eWxlKGtleXNbaV0sIHN0eWxlW2pdWzBdLnRyaW0oKSwgc3R5bGVbal1bMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgb2xkVmFsdWVba2V5c1tpXV0gPSBvbGRWYWx1ZVtrZXlzW2ldXS5qb2luKCc7Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbmV3VmFsdWVba2V5c1tpXV0gPSBuZXdWYWx1ZVtrZXlzW2ldXS5qb2luKCc7Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoISBpZ25vcmVIaXN0b3J5QW5kRXZlbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBLZWVwaW5nIGhpc3Rvcnkgb2YgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgb2JqLnNldEhpc3Rvcnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3NldFN0eWxlJyxcclxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZTogb2xkVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWU6IG5ld1ZhbHVlLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG9iai5kaXNwYXRjaCgnb25jaGFuZ2VzdHlsZScsIGVsLCBvLCBrLCB2KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBjZWxsIGNvbW1lbnRzLCBudWxsIGNlbGwgZm9yIGFsbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5nZXRDb21tZW50cyA9IGZ1bmN0aW9uKGNlbGwsIHdpdGhBdXRob3IpIHtcclxuICAgICAgICAgICAgaWYgKGNlbGwpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoY2VsbCkgPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGpleGNlbC5nZXRJZEZyb21Db2x1bW5OYW1lKGNlbGwsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh3aXRoQXV0aG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtvYmoucmVjb3Jkc1tjZWxsWzFdXVtjZWxsWzBdXS5nZXRBdHRyaWJ1dGUoJ3RpdGxlJyksIG9iai5yZWNvcmRzW2NlbGxbMV1dW2NlbGxbMF1dLmdldEF0dHJpYnV0ZSgnYXV0aG9yJyldO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnJlY29yZHNbY2VsbFsxXV1bY2VsbFswXV0uZ2V0QXR0cmlidXRlKCd0aXRsZScpIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JqLm9wdGlvbnMuZGF0YS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLm9wdGlvbnMuY29sdW1ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tbWVudHMgPSBvYmoucmVjb3Jkc1tqXVtpXS5nZXRBdHRyaWJ1dGUoJ3RpdGxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb21tZW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBqZXhjZWwuZ2V0Q29sdW1uTmFtZUZyb21JZChbaSwgal0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtjZWxsXSA9IGNvbW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldCBjZWxsIGNvbW1lbnRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnNldENvbW1lbnRzID0gZnVuY3Rpb24oY2VsbElkLCBjb21tZW50cywgYXV0aG9yKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YoY2VsbElkKSA9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBqZXhjZWwuZ2V0SWRGcm9tQ29sdW1uTmFtZShjZWxsSWQsIHRydWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBjZWxsSWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBLZWVwIG9sZCB2YWx1ZVxyXG4gICAgICAgICAgICB2YXIgdGl0bGUgPSBvYmoucmVjb3Jkc1tjZWxsWzFdXVtjZWxsWzBdXS5nZXRBdHRyaWJ1dGUoJ3RpdGxlJyk7XHJcbiAgICAgICAgICAgIHZhciBhdXRob3IgPSBvYmoucmVjb3Jkc1tjZWxsWzFdXVtjZWxsWzBdXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXV0aG9yJyk7XHJcbiAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IFsgdGl0bGUsIGF1dGhvciBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFNldCBuZXcgdmFsdWVzXHJcbiAgICAgICAgICAgIG9iai5yZWNvcmRzW2NlbGxbMV1dW2NlbGxbMF1dLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBjb21tZW50cyA/IGNvbW1lbnRzIDogJycpO1xyXG4gICAgICAgICAgICBvYmoucmVjb3Jkc1tjZWxsWzFdXVtjZWxsWzBdXS5zZXRBdHRyaWJ1dGUoJ2RhdGEtYXV0aG9yJywgYXV0aG9yID8gYXV0aG9yIDogJycpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBjbGFzcyBpZiB0aGVyZSBpcyBubyBjb21tZW50XHJcbiAgICAgICAgICAgIGlmIChjb21tZW50cykge1xyXG4gICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbY2VsbFsxXV1bY2VsbFswXV0uY2xhc3NMaXN0LmFkZCgnamV4Y2VsX2NvbW1lbnRzJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvYmoucmVjb3Jkc1tjZWxsWzFdXVtjZWxsWzBdXS5jbGFzc0xpc3QucmVtb3ZlKCdqZXhjZWxfY29tbWVudHMnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFNhdmUgaGlzdG9yeVxyXG4gICAgICAgICAgICBvYmouc2V0SGlzdG9yeSh7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb246J3NldENvbW1lbnRzJyxcclxuICAgICAgICAgICAgICAgIGNvbHVtbjogY2VsbElkLFxyXG4gICAgICAgICAgICAgICAgbmV3VmFsdWU6IFsgY29tbWVudHMsIGF1dGhvciBdLFxyXG4gICAgICAgICAgICAgICAgb2xkVmFsdWU6IG9sZFZhbHVlLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gU2V0IGNvbW1lbnRzXHJcbiAgICAgICAgICAgIG9iai5kaXNwYXRjaCgnb25jb21tZW50cycsIGVsLCBjb21tZW50cywgdGl0bGUpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCB0YWJsZSBjb25maWcgaW5mb3JtYXRpb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouZ2V0Q29uZmlnID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gb2JqLm9wdGlvbnM7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuc3R5bGUgPSBvYmouZ2V0U3R5bGUoKTtcclxuICAgICAgICAgICAgb3B0aW9ucy5tZXJnZUNlbGxzID0gb2JqLmdldE1lcmdlKCk7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuY29tbWVudHMgPSBvYmouZ2V0Q29tbWVudHMoKTtcclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucztcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTb3J0IGRhdGEgYW5kIHJlbG9hZCB0YWJsZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5vcmRlckJ5ID0gZnVuY3Rpb24oY29sdW1uLCBvcmRlcikge1xyXG4gICAgICAgICAgICBpZiAoY29sdW1uID49IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIE1lcmdlZCBjZWxsc1xyXG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG9iai5vcHRpb25zLm1lcmdlQ2VsbHMpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISBjb25maXJtKG9iai5vcHRpb25zLnRleHQudGhpc0FjdGlvbldpbGxEZXN0cm95QW55RXhpc3RpbmdNZXJnZWRDZWxsc0FyZVlvdVN1cmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgbWVyZ2VkIGNlbGxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5kZXN0cm95TWVyZ2VkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBEaXJlY3Rpb25cclxuICAgICAgICAgICAgICAgIGlmIChvcmRlciA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXIgPSBvYmouaGVhZGVyc1tjb2x1bW5dLmNsYXNzTGlzdC5jb250YWlucygnYXJyb3ctZG93bicpID8gMSA6IDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyID0gb3JkZXIgPyAxIDogMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVGVzdCBvcmRlclxyXG4gICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5jb2x1bW5zW2NvbHVtbl0udHlwZSA9PSAnbnVtYmVyJyB8fCBvYmoub3B0aW9ucy5jb2x1bW5zW2NvbHVtbl0udHlwZSA9PSAncGVyY2VudGFnZScgfHwgb2JqLm9wdGlvbnMuY29sdW1uc1tjb2x1bW5dLnR5cGUgPT0gJ2F1dG9udW1iZXInIHx8IG9iai5vcHRpb25zLmNvbHVtbnNbY29sdW1uXS50eXBlID09ICdjb2xvcicpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iai5vcHRpb25zLmRhdGEubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtqXSA9IFsgaiwgTnVtYmVyKG9iai5vcHRpb25zLmRhdGFbal1bY29sdW1uXSkgXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbY29sdW1uXS50eXBlID09ICdjYWxlbmRhcicgfHwgb2JqLm9wdGlvbnMuY29sdW1uc1tjb2x1bW5dLnR5cGUgPT0gJ2NoZWNrYm94JyB8fCBvYmoub3B0aW9ucy5jb2x1bW5zW2NvbHVtbl0udHlwZSA9PSAncmFkaW8nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvYmoub3B0aW9ucy5kYXRhLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbal0gPSBbIGosIG9iai5vcHRpb25zLmRhdGFbal1bY29sdW1uXSBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvYmoub3B0aW9ucy5kYXRhLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbal0gPSBbIGosIG9iai5yZWNvcmRzW2pdW2NvbHVtbl0uaW5uZXJUZXh0LnRvTG93ZXJDYXNlKCkgXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgc29ydGluZyBtZXRob2RcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMuc29ydGluZykgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5zb3J0aW5nID0gZnVuY3Rpb24oZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVBID0gYVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZUIgPSBiWzFdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIGRpcmVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAodmFsdWVBID09PSAnJyAmJiB2YWx1ZUIgIT09ICcnKSA/IDEgOiAodmFsdWVBICE9PSAnJyAmJiB2YWx1ZUIgPT09ICcnKSA/IC0xIDogKHZhbHVlQSA+IHZhbHVlQikgPyAxIDogKHZhbHVlQSA8IHZhbHVlQikgPyAtMSA6ICAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHZhbHVlQSA9PT0gJycgJiYgdmFsdWVCICE9PSAnJykgPyAxIDogKHZhbHVlQSAhPT0gJycgJiYgdmFsdWVCID09PSAnJykgPyAtMSA6ICh2YWx1ZUEgPiB2YWx1ZUIpID8gLTEgOiAodmFsdWVBIDwgdmFsdWVCKSA/IDEgOiAgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0ZW1wID0gdGVtcC5zb3J0KG9iai5vcHRpb25zLnNvcnRpbmcob3JkZXIpKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSBoaXN0b3J5XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGVtcC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlW2pdID0gdGVtcFtqXVswXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSBoaXN0b3J5XHJcbiAgICAgICAgICAgICAgICBvYmouc2V0SGlzdG9yeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnb3JkZXJCeScsXHJcbiAgICAgICAgICAgICAgICAgICAgcm93czogbmV3VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4sXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IG9yZGVyLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBvcmRlclxyXG4gICAgICAgICAgICAgICAgb2JqLnVwZGF0ZU9yZGVyQXJyb3coY29sdW1uLCBvcmRlcik7XHJcbiAgICAgICAgICAgICAgICBvYmoudXBkYXRlT3JkZXIobmV3VmFsdWUpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBPbiBzb3J0IGV2ZW50XHJcbiAgICAgICAgICAgICAgICBvYmouZGlzcGF0Y2goJ29uc29ydCcsIGVsLCBjb2x1bW4sIG9yZGVyKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGUgb3JkZXIgYXJyb3dcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmoudXBkYXRlT3JkZXJBcnJvdyA9IGZ1bmN0aW9uKGNvbHVtbiwgb3JkZXIpIHtcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIG9yZGVyXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmhlYWRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIG9iai5oZWFkZXJzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2Fycm93LXVwJyk7XHJcbiAgICAgICAgICAgICAgICBvYmouaGVhZGVyc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdhcnJvdy1kb3duJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBObyBvcmRlciBzcGVjaWZpZWQgdGhlbiB0b2dnbGUgb3JkZXJcclxuICAgICAgICAgICAgaWYgKG9yZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouaGVhZGVyc1tjb2x1bW5dLmNsYXNzTGlzdC5hZGQoJ2Fycm93LXVwJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvYmouaGVhZGVyc1tjb2x1bW5dLmNsYXNzTGlzdC5hZGQoJ2Fycm93LWRvd24nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSByb3dzIHBvc2l0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnVwZGF0ZU9yZGVyID0gZnVuY3Rpb24ocm93cykge1xyXG4gICAgICAgICAgICAvLyBIaXN0b3J5XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gW11cclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByb3dzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhW2pdID0gb2JqLm9wdGlvbnMuZGF0YVtyb3dzW2pdXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhID0gZGF0YTtcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IFtdXHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcm93cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgZGF0YVtqXSA9IG9iai5yZWNvcmRzW3Jvd3Nbal1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9iai5yZWNvcmRzID0gZGF0YTtcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IFtdXHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcm93cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgZGF0YVtqXSA9IG9iai5yb3dzW3Jvd3Nbal1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9iai5yb3dzID0gZGF0YTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgcmVmZXJlbmNlc1xyXG4gICAgICAgICAgICBvYmoudXBkYXRlVGFibGVSZWZlcmVuY2VzKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmVkbyBzZWFyY2hcclxuICAgICAgICAgICAgaWYgKG9iai5yZXN1bHRzICYmIG9iai5yZXN1bHRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5zZWFyY2hJbnB1dC52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5zZWFyY2gob2JqLnNlYXJjaElucHV0LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmNsb3NlRmlsdGVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgcGFnZVxyXG4gICAgICAgICAgICAgICAgb2JqLnJlc3VsdHMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgb2JqLnBhZ2VOdW1iZXIgPSAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMucGFnaW5hdGlvbiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoucGFnZSgwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLm9wdGlvbnMubGF6eUxvYWRpbmcgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5sb2FkUGFnZSgwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvYmoucm93cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoudGJvZHkuYXBwZW5kQ2hpbGQob2JqLnJvd3Nbal0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1vdmUgcm93XHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHJldHVybiB2b2lkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLm1vdmVSb3cgPSBmdW5jdGlvbihvLCBkLCBpZ25vcmVEb20pIHtcclxuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG9iai5vcHRpb25zLm1lcmdlQ2VsbHMpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChvID4gZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnNlcnRCZWZvcmUgPSAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5zZXJ0QmVmb3JlID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLmlzUm93TWVyZ2VkKG8pLmxlbmd0aCB8fCBvYmouaXNSb3dNZXJnZWQoZCwgaW5zZXJ0QmVmb3JlKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISBjb25maXJtKG9iai5vcHRpb25zLnRleHQudGhpc0FjdGlvbldpbGxEZXN0cm95QW55RXhpc3RpbmdNZXJnZWRDZWxsc0FyZVlvdVN1cmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmouZGVzdHJveU1lcmdlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5zZWFyY2ggPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5yZXN1bHRzICYmIG9iai5yZXN1bHRzLmxlbmd0aCAhPSBvYmoucm93cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlybShvYmoub3B0aW9ucy50ZXh0LnRoaXNBY3Rpb25XaWxsQ2xlYXJZb3VyU2VhcmNoUmVzdWx0c0FyZVlvdVN1cmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZXNldFNlYXJjaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG9iai5yZXN1bHRzID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICghIGlnbm9yZURvbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwob2JqLnRib2R5LmNoaWxkcmVuLCBvYmoucm93c1tkXSkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvID4gZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoudGJvZHkuaW5zZXJ0QmVmb3JlKG9iai5yb3dzW29dLCBvYmoucm93c1tkXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnRib2R5Lmluc2VydEJlZm9yZShvYmoucm93c1tvXSwgb2JqLnJvd3NbZF0ubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnRib2R5LnJlbW92ZUNoaWxkKG9iai5yb3dzW29dKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFBsYWNlIHJlZmVyZW5jZXMgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb25cclxuICAgICAgICAgICAgb2JqLnJvd3Muc3BsaWNlKGQsIDAsIG9iai5yb3dzLnNwbGljZShvLCAxKVswXSk7XHJcbiAgICAgICAgICAgIG9iai5yZWNvcmRzLnNwbGljZShkLCAwLCBvYmoucmVjb3Jkcy5zcGxpY2UobywgMSlbMF0pO1xyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhLnNwbGljZShkLCAwLCBvYmoub3B0aW9ucy5kYXRhLnNwbGljZShvLCAxKVswXSk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmVzcGVjdCBwYWdpbmF0aW9uXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5wYWdpbmF0aW9uID4gMCAmJiBvYmoudGJvZHkuY2hpbGRyZW4ubGVuZ3RoICE9IG9iai5vcHRpb25zLnBhZ2luYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIG9iai5wYWdlKG9iai5wYWdlTnVtYmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEtlZXBpbmcgaGlzdG9yeSBvZiBjaGFuZ2VzXHJcbiAgICAgICAgICAgIG9iai5zZXRIaXN0b3J5KHtcclxuICAgICAgICAgICAgICAgIGFjdGlvbjonbW92ZVJvdycsXHJcbiAgICAgICAgICAgICAgICBvbGRWYWx1ZTogbyxcclxuICAgICAgICAgICAgICAgIG5ld1ZhbHVlOiBkLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGFibGUgcmVmZXJlbmNlc1xyXG4gICAgICAgICAgICBvYmoudXBkYXRlVGFibGVSZWZlcmVuY2VzKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gRXZlbnRzXHJcbiAgICAgICAgICAgIG9iai5kaXNwYXRjaCgnb25tb3Zlcm93JywgZWwsIG8sIGQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW5zZXJ0IGEgbmV3IHJvd1xyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSBtaXhlZCAtIG51bWJlciBvZiBibGFuayBsaW5lcyB0byBiZSBpbnNlcnQgb3IgYSBzaW5nbGUgYXJyYXkgd2l0aCB0aGUgZGF0YSBvZiB0aGUgbmV3IHJvd1xyXG4gICAgICAgICAqIEBwYXJhbSByb3dOdW1iZXJcclxuICAgICAgICAgKiBAcGFyYW0gaW5zZXJ0QmVmb3JlXHJcbiAgICAgICAgICogQHJldHVybiB2b2lkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLmluc2VydFJvdyA9IGZ1bmN0aW9uKG1peGVkLCByb3dOdW1iZXIsIGluc2VydEJlZm9yZSkge1xyXG4gICAgICAgICAgICAvLyBDb25maWd1cmF0aW9uXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5hbGxvd0luc2VydFJvdyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZWNvcmRzXHJcbiAgICAgICAgICAgICAgICB2YXIgcmVjb3JkcyA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBEYXRhIHRvIGJlIGluc2VydFxyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBbXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVGhlIGluc2VydCBjb3VsZCBiZSBsZWFkIGJ5IG51bWJlciBvZiByb3dzIG9yIHRoZSBhcnJheSBvZiBkYXRhXHJcbiAgICAgICAgICAgICAgICBpZiAobWl4ZWQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG51bU9mUm93cyA9IG1peGVkO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbnVtT2ZSb3dzID0gMTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtaXhlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gbWl4ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBEaXJlY3Rpb25cclxuICAgICAgICAgICAgICAgIHZhciBpbnNlcnRCZWZvcmUgPSBpbnNlcnRCZWZvcmUgPyB0cnVlIDogZmFsc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgY29sdW1uIG51bWJlclxyXG4gICAgICAgICAgICAgICAgdmFyIGxhc3RSb3cgPSBvYmoub3B0aW9ucy5kYXRhLmxlbmd0aCAtIDE7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChyb3dOdW1iZXIgPT0gdW5kZWZpbmVkIHx8IHJvd051bWJlciA+PSBwYXJzZUludChsYXN0Um93KSB8fCByb3dOdW1iZXIgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93TnVtYmVyID0gbGFzdFJvdztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gT25iZWZvcmVpbnNlcnRyb3dcclxuICAgICAgICAgICAgICAgIGlmIChvYmouZGlzcGF0Y2goJ29uYmVmb3JlaW5zZXJ0cm93JywgZWwsIHJvd051bWJlciwgbnVtT2ZSb3dzLCBpbnNlcnRCZWZvcmUpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvbmJlZm9yZWluc2VydHJvdyByZXR1cm5lZCBmYWxzZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIE1lcmdlZCBjZWxsc1xyXG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG9iai5vcHRpb25zLm1lcmdlQ2VsbHMpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmlzUm93TWVyZ2VkKHJvd051bWJlciwgaW5zZXJ0QmVmb3JlKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEgY29uZmlybShvYmoub3B0aW9ucy50ZXh0LnRoaXNBY3Rpb25XaWxsRGVzdHJveUFueUV4aXN0aW5nTWVyZ2VkQ2VsbHNBcmVZb3VTdXJlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmRlc3Ryb3lNZXJnZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgYW55IHNlYXJjaFxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnNlYXJjaCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5yZXN1bHRzICYmIG9iai5yZXN1bHRzLmxlbmd0aCAhPSBvYmoucm93cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm0ob2JqLm9wdGlvbnMudGV4dC50aGlzQWN0aW9uV2lsbENsZWFyWW91clNlYXJjaFJlc3VsdHNBcmVZb3VTdXJlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlc2V0U2VhcmNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBvYmoucmVzdWx0cyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIEluc2VydGJlZm9yZVxyXG4gICAgICAgICAgICAgICAgdmFyIHJvd0luZGV4ID0gKCEgaW5zZXJ0QmVmb3JlKSA/IHJvd051bWJlciArIDEgOiByb3dOdW1iZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgY3VycmVudCBkYXRhXHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFJlY29yZHMgPSBvYmoucmVjb3Jkcy5zcGxpY2Uocm93SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRhID0gb2JqLm9wdGlvbnMuZGF0YS5zcGxpY2Uocm93SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRSb3dzID0gb2JqLnJvd3Muc3BsaWNlKHJvd0luZGV4KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQWRkaW5nIGxpbmVzXHJcbiAgICAgICAgICAgICAgICB2YXIgcm93UmVjb3JkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJvd0RhdGEgPSBbXTtcclxuICAgICAgICAgICAgICAgIHZhciByb3dOb2RlID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcm93ID0gcm93SW5kZXg7IHJvdyA8IChudW1PZlJvd3MgKyByb3dJbmRleCk7IHJvdysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUHVzaCBkYXRhIHRvIHRoZSBkYXRhIGNvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmRhdGFbcm93XSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG9iai5vcHRpb25zLmNvbHVtbnMubGVuZ3RoOyBjb2wrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhW3Jvd11bY29sXSAgPSBkYXRhW2NvbF0gPyBkYXRhW2NvbF0gOiAnJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHJvd1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ciA9IG9iai5jcmVhdGVSb3cocm93LCBvYmoub3B0aW9ucy5kYXRhW3Jvd10pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFwcGVuZCBub2RlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRSb3dzWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKG9iai50Ym9keS5jaGlsZHJlbiwgY3VycmVudFJvd3NbMF0pID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai50Ym9keS5pbnNlcnRCZWZvcmUodHIsIGN1cnJlbnRSb3dzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKG9iai50Ym9keS5jaGlsZHJlbiwgb2JqLnJvd3Nbcm93TnVtYmVyXSkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnRib2R5LmFwcGVuZENoaWxkKHRyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBSZWNvcmQgSGlzdG9yeVxyXG4gICAgICAgICAgICAgICAgICAgIHJvd1JlY29yZHMucHVzaChvYmoucmVjb3Jkc1tyb3ddKTtcclxuICAgICAgICAgICAgICAgICAgICByb3dEYXRhLnB1c2gob2JqLm9wdGlvbnMuZGF0YVtyb3ddKTtcclxuICAgICAgICAgICAgICAgICAgICByb3dOb2RlLnB1c2godHIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBDb3B5IHRoZSBkYXRhIGJhY2sgdG8gdGhlIG1haW4gZGF0YVxyXG4gICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkob2JqLnJlY29yZHMsIGN1cnJlbnRSZWNvcmRzKTtcclxuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KG9iai5vcHRpb25zLmRhdGEsIGN1cnJlbnREYXRhKTtcclxuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KG9iai5yb3dzLCBjdXJyZW50Um93cyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFJlc3BlY3QgcGFnaW5hdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnBhZ2luYXRpb24gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnBhZ2Uob2JqLnBhZ2VOdW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBLZWVwIGhpc3RvcnlcclxuICAgICAgICAgICAgICAgIG9iai5zZXRIaXN0b3J5KHtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdpbnNlcnRSb3cnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJvd051bWJlcjogcm93TnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgICAgIG51bU9mUm93czogbnVtT2ZSb3dzLFxyXG4gICAgICAgICAgICAgICAgICAgIGluc2VydEJlZm9yZTogaW5zZXJ0QmVmb3JlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJvd1JlY29yZHM6IHJvd1JlY29yZHMsXHJcbiAgICAgICAgICAgICAgICAgICAgcm93RGF0YTogcm93RGF0YSxcclxuICAgICAgICAgICAgICAgICAgICByb3dOb2RlOiByb3dOb2RlLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0YWJsZSByZWZlcmVuY2VzXHJcbiAgICAgICAgICAgICAgICBvYmoudXBkYXRlVGFibGVSZWZlcmVuY2VzKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIEV2ZW50c1xyXG4gICAgICAgICAgICAgICAgb2JqLmRpc3BhdGNoKCdvbmluc2VydHJvdycsIGVsLCByb3dOdW1iZXIsIG51bU9mUm93cywgcm93UmVjb3JkcywgaW5zZXJ0QmVmb3JlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERlbGV0ZSBhIHJvdyBieSBudW1iZXJcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0gaW50ZWdlciByb3dOdW1iZXIgLSByb3cgbnVtYmVyIHRvIGJlIGV4Y2x1ZGVkXHJcbiAgICAgICAgICogQHBhcmFtIGludGVnZXIgbnVtT2ZSb3dzIC0gbnVtYmVyIG9mIGxpbmVzXHJcbiAgICAgICAgICogQHJldHVybiB2b2lkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLmRlbGV0ZVJvdyA9IGZ1bmN0aW9uKHJvd051bWJlciwgbnVtT2ZSb3dzKSB7XHJcbiAgICAgICAgICAgIC8vIEdsb2JhbCBDb25maWd1cmF0aW9uXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5hbGxvd0RlbGV0ZVJvdyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuYWxsb3dEZWxldGluZ0FsbFJvd3MgPT0gdHJ1ZSB8fCBvYmoub3B0aW9ucy5kYXRhLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgcm93IGRlZmluaXRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd051bWJlciA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG51bWJlciA9IG9iai5nZXRTZWxlY3RlZFJvd3MoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBudW1iZXJbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd051bWJlciA9IG9iai5vcHRpb25zLmRhdGEubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bU9mUm93cyA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dOdW1iZXIgPSBwYXJzZUludChudW1iZXJbMF0uZ2V0QXR0cmlidXRlKCdkYXRhLXknKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1PZlJvd3MgPSBudW1iZXIubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTGFzdCBjb2x1bW5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdFJvdyA9IG9iai5vcHRpb25zLmRhdGEubGVuZ3RoIC0gMTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3dOdW1iZXIgPT0gdW5kZWZpbmVkIHx8IHJvd051bWJlciA+IGxhc3RSb3cgfHwgcm93TnVtYmVyIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dOdW1iZXIgPSBsYXN0Um93O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIG51bU9mUm93cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBudW1PZlJvd3MgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdCBkZWxldGUgbW9yZSB0aGFuIHRoZSBudW1iZXIgb2YgcmVjb3JlZHNcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm93TnVtYmVyICsgbnVtT2ZSb3dzID49IG9iai5vcHRpb25zLmRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bU9mUm93cyA9IG9iai5vcHRpb25zLmRhdGEubGVuZ3RoIC0gcm93TnVtYmVyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT25iZWZvcmVkZWxldGVyb3dcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmRpc3BhdGNoKCdvbmJlZm9yZWRlbGV0ZXJvdycsIGVsLCByb3dOdW1iZXIsIG51bU9mUm93cykgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvbmJlZm9yZWRlbGV0ZXJvdyByZXR1cm5lZCBmYWxzZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHJvd051bWJlcikgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZWQgY2VsbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lcmdlRXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhvYmoub3B0aW9ucy5tZXJnZUNlbGxzKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByb3cgPSByb3dOdW1iZXI7IHJvdyA8IHJvd051bWJlciArIG51bU9mUm93czsgcm93KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmlzUm93TWVyZ2VkKHJvdywgZmFsc2UpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZUV4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXJnZUV4aXN0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEgY29uZmlybShvYmoub3B0aW9ucy50ZXh0LnRoaXNBY3Rpb25XaWxsRGVzdHJveUFueUV4aXN0aW5nTWVyZ2VkQ2VsbHNBcmVZb3VTdXJlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmRlc3Ryb3lNZXJnZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsZWFyIGFueSBzZWFyY2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnNlYXJjaCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnJlc3VsdHMgJiYgb2JqLnJlc3VsdHMubGVuZ3RoICE9IG9iai5yb3dzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtKG9iai5vcHRpb25zLnRleHQudGhpc0FjdGlvbldpbGxDbGVhcllvdXJTZWFyY2hSZXN1bHRzQXJlWW91U3VyZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlc2V0U2VhcmNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlc3VsdHMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgZGVsZXRlIGFsbCByb3dzLCBhbmQgc2V0IGFsbG93RGVsZXRpbmdBbGxSb3dzIGZhbHNlLCB3aWxsIHN0YXkgb25lIHJvd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuYWxsb3dEZWxldGluZ0FsbFJvd3MgPT0gZmFsc2UgJiYgbGFzdFJvdyArIDEgPT09IG51bU9mUm93cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtT2ZSb3dzLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdKRVhDRUwuIEl0IGlzIG5vdCBwb3NzaWJsZSB0byBkZWxldGUgdGhlIGxhc3Qgcm93Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgbm9kZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByb3cgPSByb3dOdW1iZXI7IHJvdyA8IHJvd051bWJlciArIG51bU9mUm93czsgcm93KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKG9iai50Ym9keS5jaGlsZHJlbiwgb2JqLnJvd3Nbcm93XSkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yb3dzW3Jvd10uY2xhc3NOYW1lID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJvd3Nbcm93XS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iai5yb3dzW3Jvd10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGRhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJvd1JlY29yZHMgPSBvYmoucmVjb3Jkcy5zcGxpY2Uocm93TnVtYmVyLCBudW1PZlJvd3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93RGF0YSA9IG9iai5vcHRpb25zLmRhdGEuc3BsaWNlKHJvd051bWJlciwgbnVtT2ZSb3dzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJvd05vZGUgPSBvYmoucm93cy5zcGxpY2Uocm93TnVtYmVyLCBudW1PZlJvd3MpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc3BlY3QgcGFnaW5hdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMucGFnaW5hdGlvbiA+IDAgJiYgb2JqLnRib2R5LmNoaWxkcmVuLmxlbmd0aCAhPSBvYmoub3B0aW9ucy5wYWdpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoucGFnZShvYmoucGFnZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5jb25kaXRpb25hbFNlbGVjdGlvblVwZGF0ZSgxLCByb3dOdW1iZXIsIChyb3dOdW1iZXIgKyBudW1PZlJvd3MpIC0gMSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCBoaXN0b3J5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zZXRIaXN0b3J5KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZVJvdycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dOdW1iZXI6IHJvd051bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bU9mUm93czogbnVtT2ZSb3dzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0QmVmb3JlOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93UmVjb3Jkczogcm93UmVjb3JkcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0RhdGE6IHJvd0RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dOb2RlOiByb3dOb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0YWJsZSByZWZlcmVuY2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai51cGRhdGVUYWJsZVJlZmVyZW5jZXMoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFdmVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmRpc3BhdGNoKCdvbmRlbGV0ZXJvdycsIGVsLCByb3dOdW1iZXIsIG51bU9mUm93cywgcm93UmVjb3Jkcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdKRVhDRUwuIEl0IGlzIG5vdCBwb3NzaWJsZSB0byBkZWxldGUgdGhlIGxhc3Qgcm93Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1vdmUgY29sdW1uXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHJldHVybiB2b2lkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLm1vdmVDb2x1bW4gPSBmdW5jdGlvbihvLCBkKSB7XHJcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhvYmoub3B0aW9ucy5tZXJnZUNlbGxzKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobyA+IGQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5zZXJ0QmVmb3JlID0gMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluc2VydEJlZm9yZSA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5pc0NvbE1lcmdlZChvKS5sZW5ndGggfHwgb2JqLmlzQ29sTWVyZ2VkKGQsIGluc2VydEJlZm9yZSkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgY29uZmlybShvYmoub3B0aW9ucy50ZXh0LnRoaXNBY3Rpb25XaWxsRGVzdHJveUFueUV4aXN0aW5nTWVyZ2VkQ2VsbHNBcmVZb3VTdXJlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmRlc3Ryb3lNZXJnZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgbyA9IHBhcnNlSW50KG8pO1xyXG4gICAgICAgICAgICB2YXIgZCA9IHBhcnNlSW50KGQpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChvID4gZCkge1xyXG4gICAgICAgICAgICAgICAgb2JqLmhlYWRlckNvbnRhaW5lci5pbnNlcnRCZWZvcmUob2JqLmhlYWRlcnNbb10sIG9iai5oZWFkZXJzW2RdKTtcclxuICAgICAgICAgICAgICAgIG9iai5jb2xncm91cENvbnRhaW5lci5pbnNlcnRCZWZvcmUob2JqLmNvbGdyb3VwW29dLCBvYmouY29sZ3JvdXBbZF0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iai5yb3dzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJvd3Nbal0uaW5zZXJ0QmVmb3JlKG9iai5yZWNvcmRzW2pdW29dLCBvYmoucmVjb3Jkc1tqXVtkXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvYmouaGVhZGVyQ29udGFpbmVyLmluc2VydEJlZm9yZShvYmouaGVhZGVyc1tvXSwgb2JqLmhlYWRlcnNbZF0ubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgb2JqLmNvbGdyb3VwQ29udGFpbmVyLmluc2VydEJlZm9yZShvYmouY29sZ3JvdXBbb10sIG9iai5jb2xncm91cFtkXS5uZXh0U2libGluZyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JqLnJvd3MubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoucm93c1tqXS5pbnNlcnRCZWZvcmUob2JqLnJlY29yZHNbal1bb10sIG9iai5yZWNvcmRzW2pdW2RdLm5leHRTaWJsaW5nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zLmNvbHVtbnMuc3BsaWNlKGQsIDAsIG9iai5vcHRpb25zLmNvbHVtbnMuc3BsaWNlKG8sIDEpWzBdKTtcclxuICAgICAgICAgICAgb2JqLmhlYWRlcnMuc3BsaWNlKGQsIDAsIG9iai5oZWFkZXJzLnNwbGljZShvLCAxKVswXSk7XHJcbiAgICAgICAgICAgIG9iai5jb2xncm91cC5zcGxpY2UoZCwgMCwgb2JqLmNvbGdyb3VwLnNwbGljZShvLCAxKVswXSk7XHJcbiAgICBcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvYmoucm93cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuZGF0YVtqXS5zcGxpY2UoZCwgMCwgb2JqLm9wdGlvbnMuZGF0YVtqXS5zcGxpY2UobywgMSlbMF0pO1xyXG4gICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbal0uc3BsaWNlKGQsIDAsIG9iai5yZWNvcmRzW2pdLnNwbGljZShvLCAxKVswXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZm9vdGVycyBwb3NpdGlvblxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuZm9vdGVycykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvYmoub3B0aW9ucy5mb290ZXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuZm9vdGVyc1tqXS5zcGxpY2UoZCwgMCwgb2JqLm9wdGlvbnMuZm9vdGVyc1tqXS5zcGxpY2UobywgMSlbMF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBLZWVwaW5nIGhpc3Rvcnkgb2YgY2hhbmdlc1xyXG4gICAgICAgICAgICBvYmouc2V0SGlzdG9yeSh7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb246J21vdmVDb2x1bW4nLFxyXG4gICAgICAgICAgICAgICAgb2xkVmFsdWU6IG8sXHJcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZTogZCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gVXBkYXRlIHRhYmxlIHJlZmVyZW5jZXNcclxuICAgICAgICAgICAgb2JqLnVwZGF0ZVRhYmxlUmVmZXJlbmNlcygpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEV2ZW50c1xyXG4gICAgICAgICAgICBvYmouZGlzcGF0Y2goJ29ubW92ZWNvbHVtbicsIGVsLCBvLCBkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEluc2VydCBhIG5ldyBjb2x1bW5cclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0gbWl4ZWQgLSBudW0gb2YgY29sdW1ucyB0byBiZSBhZGRlZCBvciBkYXRhIHRvIGJlIGFkZGVkIGluIG9uZSBzaW5nbGUgY29sdW1uXHJcbiAgICAgICAgICogQHBhcmFtIGludCBjb2x1bW5OdW1iZXIgLSBudW1iZXIgb2YgY29sdW1ucyB0byBiZSBjcmVhdGVkXHJcbiAgICAgICAgICogQHBhcmFtIGJvb2wgaW5zZXJ0QmVmb3JlXHJcbiAgICAgICAgICogQHBhcmFtIG9iamVjdCBwcm9wZXJ0aWVzIC0gY29sdW1uIHByb3BlcnRpZXNcclxuICAgICAgICAgKiBAcmV0dXJuIHZvaWRcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouaW5zZXJ0Q29sdW1uID0gZnVuY3Rpb24obWl4ZWQsIGNvbHVtbk51bWJlciwgaW5zZXJ0QmVmb3JlLCBwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgIC8vIENvbmZpZ3VyYXRpb25cclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmFsbG93SW5zZXJ0Q29sdW1uID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlY29yZHNcclxuICAgICAgICAgICAgICAgIHZhciByZWNvcmRzID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIERhdGEgdG8gYmUgaW5zZXJ0XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgaW5zZXJ0IGNvdWxkIGJlIGxlYWQgYnkgbnVtYmVyIG9mIHJvd3Mgb3IgdGhlIGFycmF5IG9mIGRhdGFcclxuICAgICAgICAgICAgICAgIGlmIChtaXhlZCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbnVtT2ZDb2x1bW5zID0gbWl4ZWQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBudW1PZkNvbHVtbnMgPSAxO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1peGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBtaXhlZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIERpcmVjdGlvblxyXG4gICAgICAgICAgICAgICAgdmFyIGluc2VydEJlZm9yZSA9IGluc2VydEJlZm9yZSA/IHRydWUgOiBmYWxzZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQ3VycmVudCBjb2x1bW4gbnVtYmVyXHJcbiAgICAgICAgICAgICAgICB2YXIgbGFzdENvbHVtbiA9IG9iai5vcHRpb25zLmNvbHVtbnMubGVuZ3RoIC0gMTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQ29uZmlybSBwb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbk51bWJlciA9PSB1bmRlZmluZWQgfHwgY29sdW1uTnVtYmVyID49IHBhcnNlSW50KGxhc3RDb2x1bW4pIHx8IGNvbHVtbk51bWJlciA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5OdW1iZXIgPSBsYXN0Q29sdW1uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBPbmJlZm9yZWluc2VydGNvbHVtblxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5kaXNwYXRjaCgnb25iZWZvcmVpbnNlcnRjb2x1bW4nLCBlbCwgY29sdW1uTnVtYmVyLCBudW1PZkNvbHVtbnMsIGluc2VydEJlZm9yZSkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ29uYmVmb3JlaW5zZXJ0Y29sdW1uIHJldHVybmVkIGZhbHNlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gTWVyZ2VkIGNlbGxzXHJcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMob2JqLm9wdGlvbnMubWVyZ2VDZWxscykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmouaXNDb2xNZXJnZWQoY29sdW1uTnVtYmVyLCBpbnNlcnRCZWZvcmUpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBjb25maXJtKG9iai5vcHRpb25zLnRleHQudGhpc0FjdGlvbldpbGxEZXN0cm95QW55RXhpc3RpbmdNZXJnZWRDZWxsc0FyZVlvdVN1cmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouZGVzdHJveU1lcmdlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgZGVmYXVsdCBwcm9wZXJ0aWVzXHJcbiAgICAgICAgICAgICAgICBpZiAoISBwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bU9mQ29sdW1uczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgcHJvcGVydGllc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzW2ldID0geyB0eXBlOid0ZXh0Jywgc291cmNlOltdLCBvcHRpb25zOltdLCB3aWR0aDpvYmoub3B0aW9ucy5kZWZhdWx0Q29sV2lkdGgsIGFsaWduOm9iai5vcHRpb25zLmRlZmF1bHRDb2xBbGlnbiB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gSW5zZXJ0IGJlZm9yZVxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbkluZGV4ID0gKCEgaW5zZXJ0QmVmb3JlKSA/IGNvbHVtbk51bWJlciArIDEgOiBjb2x1bW5OdW1iZXI7XHJcbiAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5jb2x1bW5zID0gamV4Y2VsLmluamVjdEFycmF5KG9iai5vcHRpb25zLmNvbHVtbnMsIGNvbHVtbkluZGV4LCBwcm9wZXJ0aWVzKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gT3BlbiBzcGFjZSBpbiB0aGUgY29udGFpbmVyc1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRIZWFkZXJzID0gb2JqLmhlYWRlcnMuc3BsaWNlKGNvbHVtbkluZGV4KTtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Q29sZ3JvdXAgPSBvYmouY29sZ3JvdXAuc3BsaWNlKGNvbHVtbkluZGV4KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gSGlzdG9yeVxyXG4gICAgICAgICAgICAgICAgdmFyIGhpc3RvcnlIZWFkZXJzID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIgaGlzdG9yeUNvbGdyb3VwID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIgaGlzdG9yeVJlY29yZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIHZhciBoaXN0b3J5RGF0YSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhpc3RvcnlGb290ZXJzID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIEFkZCBuZXcgaGVhZGVyc1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY29sID0gY29sdW1uSW5kZXg7IGNvbCA8IChudW1PZkNvbHVtbnMgKyBjb2x1bW5JbmRleCk7IGNvbCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmNyZWF0ZUNlbGxIZWFkZXIoY29sKTtcclxuICAgICAgICAgICAgICAgICAgICBvYmouaGVhZGVyQ29udGFpbmVyLmluc2VydEJlZm9yZShvYmouaGVhZGVyc1tjb2xdLCBvYmouaGVhZGVyQ29udGFpbmVyLmNoaWxkcmVuW2NvbCsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmNvbGdyb3VwQ29udGFpbmVyLmluc2VydEJlZm9yZShvYmouY29sZ3JvdXBbY29sXSwgb2JqLmNvbGdyb3VwQ29udGFpbmVyLmNoaWxkcmVuW2NvbCsxXSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5SGVhZGVycy5wdXNoKG9iai5oZWFkZXJzW2NvbF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnlDb2xncm91cC5wdXNoKG9iai5jb2xncm91cFtjb2xdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQWRkIG5ldyBmb290ZXIgY2VsbHNcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5mb290ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvYmoub3B0aW9ucy5mb290ZXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnlGb290ZXJzW2pdID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtT2ZDb2x1bW5zOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnlGb290ZXJzW2pdLnB1c2goJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmZvb3RlcnNbal0uc3BsaWNlKGNvbHVtbkluZGV4LCAwLCBoaXN0b3J5Rm9vdGVyc1tqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEFkZGluZyB2aXN1YWwgY29sdW1uc1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcm93ID0gMDsgcm93IDwgb2JqLm9wdGlvbnMuZGF0YS5sZW5ndGg7IHJvdysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgY3VycmVudCBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRhID0gb2JqLm9wdGlvbnMuZGF0YVtyb3ddLnNwbGljZShjb2x1bW5JbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRSZWNvcmQgPSBvYmoucmVjb3Jkc1tyb3ddLnNwbGljZShjb2x1bW5JbmRleCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBIaXN0b3J5XHJcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeURhdGFbcm93XSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnlSZWNvcmRzW3Jvd10gPSBbXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGNvbCA9IGNvbHVtbkluZGV4OyBjb2wgPCAobnVtT2ZDb2x1bW5zICsgY29sdW1uSW5kZXgpOyBjb2wrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOZXcgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZGF0YVtyb3ddID8gZGF0YVtyb3ddIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmRhdGFbcm93XVtjb2xdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5ldyBjZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZCA9IG9iai5jcmVhdGVDZWxsKGNvbCwgcm93LCBvYmoub3B0aW9ucy5kYXRhW3Jvd11bY29sXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW3Jvd11bY29sXSA9IHRkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgY2VsbCB0byB0aGUgcm93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoucm93c1tyb3ddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoucm93c1tyb3ddLmluc2VydEJlZm9yZSh0ZCwgb2JqLnJvd3Nbcm93XS5jaGlsZHJlbltjb2wrMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjb3JkIEhpc3RvcnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeURhdGFbcm93XS5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeVJlY29yZHNbcm93XS5wdXNoKHRkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBDb3B5IHRoZSBkYXRhIGJhY2sgdG8gdGhlIG1haW4gZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KG9iai5vcHRpb25zLmRhdGFbcm93XSwgY3VycmVudERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KG9iai5yZWNvcmRzW3Jvd10sIGN1cnJlbnRSZWNvcmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShvYmouaGVhZGVycywgY3VycmVudEhlYWRlcnMpO1xyXG4gICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkob2JqLmNvbGdyb3VwLCBjdXJyZW50Q29sZ3JvdXApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBBZGp1c3QgbmVzdGVkIGhlYWRlcnNcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5uZXN0ZWRIZWFkZXJzICYmIG9iai5vcHRpb25zLm5lc3RlZEhlYWRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZsZXhpYmxlIHdheSB0byBoYW5kbGUgbmVzdGVkaGVhZGVyc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5uZXN0ZWRIZWFkZXJzWzBdICYmIG9iai5vcHRpb25zLm5lc3RlZEhlYWRlcnNbMF1bMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvYmoub3B0aW9ucy5uZXN0ZWRIZWFkZXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sc3BhbiA9IHBhcnNlSW50KG9iai5vcHRpb25zLm5lc3RlZEhlYWRlcnNbal1bb2JqLm9wdGlvbnMubmVzdGVkSGVhZGVyc1tqXS5sZW5ndGgtMV0uY29sc3BhbikgKyBudW1PZkNvbHVtbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5uZXN0ZWRIZWFkZXJzW2pdW29iai5vcHRpb25zLm5lc3RlZEhlYWRlcnNbal0ubGVuZ3RoLTFdLmNvbHNwYW4gPSBjb2xzcGFuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnRoZWFkLmNoaWxkcmVuW2pdLmNoaWxkcmVuW29iai50aGVhZC5jaGlsZHJlbltqXS5jaGlsZHJlbi5sZW5ndGgtMV0uc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgY29sc3Bhbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IG9iai50aGVhZC5jaGlsZHJlbltqXS5jaGlsZHJlbltvYmoudGhlYWQuY2hpbGRyZW5bal0uY2hpbGRyZW4ubGVuZ3RoLTFdLmdldEF0dHJpYnV0ZSgnZGF0YS1jb2x1bW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBvLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSBjb2x1bW5JbmRleDsgY29sIDwgKG51bU9mQ29sdW1ucyArIGNvbHVtbkluZGV4KTsgY29sKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2goY29sKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai50aGVhZC5jaGlsZHJlbltqXS5jaGlsZHJlbltvYmoudGhlYWQuY2hpbGRyZW5bal0uY2hpbGRyZW4ubGVuZ3RoLTFdLnNldEF0dHJpYnV0ZSgnZGF0YS1jb2x1bW4nLCBvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xzcGFuID0gcGFyc2VJbnQob2JqLm9wdGlvbnMubmVzdGVkSGVhZGVyc1swXS5jb2xzcGFuKSArIG51bU9mQ29sdW1ucztcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMubmVzdGVkSGVhZGVyc1swXS5jb2xzcGFuID0gY29sc3BhbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnRoZWFkLmNoaWxkcmVuWzBdLmNoaWxkcmVuW29iai50aGVhZC5jaGlsZHJlblswXS5jaGlsZHJlbi5sZW5ndGgtMV0uc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgY29sc3Bhbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBLZWVwIGhpc3RvcnlcclxuICAgICAgICAgICAgICAgIG9iai5zZXRIaXN0b3J5KHtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdpbnNlcnRDb2x1bW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbk51bWJlcjpjb2x1bW5OdW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbnVtT2ZDb2x1bW5zOm51bU9mQ29sdW1ucyxcclxuICAgICAgICAgICAgICAgICAgICBpbnNlcnRCZWZvcmU6aW5zZXJ0QmVmb3JlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnM6cHJvcGVydGllcyxcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOmhpc3RvcnlIZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbGdyb3VwOmhpc3RvcnlDb2xncm91cCxcclxuICAgICAgICAgICAgICAgICAgICByZWNvcmRzOmhpc3RvcnlSZWNvcmRzLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvb3RlcnM6aGlzdG9yeUZvb3RlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTpoaXN0b3J5RGF0YSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGFibGUgcmVmZXJlbmNlc1xyXG4gICAgICAgICAgICAgICAgb2JqLnVwZGF0ZVRhYmxlUmVmZXJlbmNlcygpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBFdmVudHNcclxuICAgICAgICAgICAgICAgIG9iai5kaXNwYXRjaCgnb25pbnNlcnRjb2x1bW4nLCBlbCwgY29sdW1uTnVtYmVyLCBudW1PZkNvbHVtbnMsIGhpc3RvcnlSZWNvcmRzLCBpbnNlcnRCZWZvcmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVsZXRlIGEgY29sdW1uIGJ5IG51bWJlclxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSBpbnRlZ2VyIGNvbHVtbk51bWJlciAtIHJlZmVyZW5jZSBjb2x1bW4gdG8gYmUgZXhjbHVkZWRcclxuICAgICAgICAgKiBAcGFyYW0gaW50ZWdlciBudW1PZkNvbHVtbnMgLSBudW1iZXIgb2YgY29sdW1ucyB0byBiZSBleGNsdWRlZCBmcm9tIHRoZSByZWZlcmVuY2UgY29sdW1uXHJcbiAgICAgICAgICogQHJldHVybiB2b2lkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLmRlbGV0ZUNvbHVtbiA9IGZ1bmN0aW9uKGNvbHVtbk51bWJlciwgbnVtT2ZDb2x1bW5zKSB7XHJcbiAgICAgICAgICAgIC8vIEdsb2JhbCBDb25maWd1cmF0aW9uXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5hbGxvd0RlbGV0ZUNvbHVtbiA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLmhlYWRlcnMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBjb2x1bW4gZGVmaW5pdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sdW1uTnVtYmVyID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbnVtYmVyID0gb2JqLmdldFNlbGVjdGVkQ29sdW1ucyh0cnVlKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBudW1iZXIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgbGFzdCBjb2x1bW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbk51bWJlciA9IG9iai5oZWFkZXJzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1PZkNvbHVtbnMgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHNlbGVjdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5OdW1iZXIgPSBwYXJzZUludChudW1iZXJbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtT2ZDb2x1bW5zID0gcGFyc2VJbnQobnVtYmVyLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBMYXNhdCBjb2x1bW5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdENvbHVtbiA9IG9iai5vcHRpb25zLmRhdGFbMF0ubGVuZ3RoIC0gMTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2x1bW5OdW1iZXIgPT0gdW5kZWZpbmVkIHx8IGNvbHVtbk51bWJlciA+IGxhc3RDb2x1bW4gfHwgY29sdW1uTnVtYmVyIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5OdW1iZXIgPSBsYXN0Q29sdW1uO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE1pbmltdW0gb2YgY29sdW1ucyB0byBiZSBkZWxldGUgaXMgMVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIG51bU9mQ29sdW1ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBudW1PZkNvbHVtbnMgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIENhbid0IGRlbGV0ZSBtb3JlIHRoYW4gdGhlIGxpbWl0IG9mIHRoZSB0YWJsZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChudW1PZkNvbHVtbnMgPiBvYmoub3B0aW9ucy5kYXRhWzBdLmxlbmd0aCAtIGNvbHVtbk51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBudW1PZkNvbHVtbnMgPSBvYmoub3B0aW9ucy5kYXRhWzBdLmxlbmd0aCAtIGNvbHVtbk51bWJlcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBvbmJlZm9yZWRlbGV0ZWNvbHVtblxyXG4gICAgICAgICAgICAgICAgICAgaWYgKG9iai5kaXNwYXRjaCgnb25iZWZvcmVkZWxldGVjb2x1bW4nLCBlbCwgY29sdW1uTnVtYmVyLCBudW1PZkNvbHVtbnMpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ29uYmVmb3JlZGVsZXRlY29sdW1uIHJldHVybmVkIGZhbHNlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBDYW4ndCByZW1vdmUgdGhlIGxhc3QgY29sdW1uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KGNvbHVtbk51bWJlcikgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZWQgY2VsbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lcmdlRXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhvYmoub3B0aW9ucy5tZXJnZUNlbGxzKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSBjb2x1bW5OdW1iZXI7IGNvbCA8IGNvbHVtbk51bWJlciArIG51bU9mQ29sdW1uczsgY29sKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmlzQ29sTWVyZ2VkKGNvbCwgZmFsc2UpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZUV4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXJnZUV4aXN0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEgY29uZmlybShvYmoub3B0aW9ucy50ZXh0LnRoaXNBY3Rpb25XaWxsRGVzdHJveUFueUV4aXN0aW5nTWVyZ2VkQ2VsbHNBcmVZb3VTdXJlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmRlc3Ryb3lNZXJnZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgY29sdW1uIHByb3BlcnRpZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBvYmoub3B0aW9ucy5jb2x1bW5zLnNwbGljZShjb2x1bW5OdW1iZXIsIG51bU9mQ29sdW1ucyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgY29sID0gY29sdW1uTnVtYmVyOyBjb2wgPCBjb2x1bW5OdW1iZXIgKyBudW1PZkNvbHVtbnM7IGNvbCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouY29sZ3JvdXBbY29sXS5jbGFzc05hbWUgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5oZWFkZXJzW2NvbF0uY2xhc3NOYW1lID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouY29sZ3JvdXBbY29sXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iai5jb2xncm91cFtjb2xdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5oZWFkZXJzW2NvbF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmouaGVhZGVyc1tjb2xdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoaXN0b3J5SGVhZGVycyA9IG9iai5oZWFkZXJzLnNwbGljZShjb2x1bW5OdW1iZXIsIG51bU9mQ29sdW1ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoaXN0b3J5Q29sZ3JvdXAgPSBvYmouY29sZ3JvdXAuc3BsaWNlKGNvbHVtbk51bWJlciwgbnVtT2ZDb2x1bW5zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhpc3RvcnlSZWNvcmRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoaXN0b3J5RGF0YSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGlzdG9yeUZvb3RlcnMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG9iai5vcHRpb25zLmRhdGEubGVuZ3RoOyByb3crKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgY29sID0gY29sdW1uTnVtYmVyOyBjb2wgPCBjb2x1bW5OdW1iZXIgKyBudW1PZkNvbHVtbnM7IGNvbCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbcm93XVtjb2xdLmNsYXNzTmFtZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW3Jvd11bY29sXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iai5yZWNvcmRzW3Jvd11bY29sXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgaGVhZGVyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBvYmoub3B0aW9ucy5kYXRhLmxlbmd0aDsgcm93KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhpc3RvcnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnlEYXRhW3Jvd10gPSBvYmoub3B0aW9ucy5kYXRhW3Jvd10uc3BsaWNlKGNvbHVtbk51bWJlciwgbnVtT2ZDb2x1bW5zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnlSZWNvcmRzW3Jvd10gPSBvYmoucmVjb3Jkc1tyb3ddLnNwbGljZShjb2x1bW5OdW1iZXIsIG51bU9mQ29sdW1ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBmb290ZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5mb290ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBvYmoub3B0aW9ucy5mb290ZXJzLmxlbmd0aDsgcm93KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaXN0b3J5Rm9vdGVyc1tyb3ddID0gb2JqLm9wdGlvbnMuZm9vdGVyc1tyb3ddLnNwbGljZShjb2x1bW5OdW1iZXIsIG51bU9mQ29sdW1ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmNvbmRpdGlvbmFsU2VsZWN0aW9uVXBkYXRlKDAsIGNvbHVtbk51bWJlciwgKGNvbHVtbk51bWJlciArIG51bU9mQ29sdW1ucykgLSAxKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGp1c3QgbmVzdGVkIGhlYWRlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLm5lc3RlZEhlYWRlcnMgJiYgb2JqLm9wdGlvbnMubmVzdGVkSGVhZGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGbGV4aWJsZSB3YXkgdG8gaGFuZGxlIG5lc3RlZGhlYWRlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5uZXN0ZWRIZWFkZXJzWzBdICYmIG9iai5vcHRpb25zLm5lc3RlZEhlYWRlcnNbMF1bMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iai5vcHRpb25zLm5lc3RlZEhlYWRlcnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHNwYW4gPSBwYXJzZUludChvYmoub3B0aW9ucy5uZXN0ZWRIZWFkZXJzW2pdW29iai5vcHRpb25zLm5lc3RlZEhlYWRlcnNbal0ubGVuZ3RoLTFdLmNvbHNwYW4pIC0gbnVtT2ZDb2x1bW5zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5uZXN0ZWRIZWFkZXJzW2pdW29iai5vcHRpb25zLm5lc3RlZEhlYWRlcnNbal0ubGVuZ3RoLTFdLmNvbHNwYW4gPSBjb2xzcGFuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoudGhlYWQuY2hpbGRyZW5bal0uY2hpbGRyZW5bb2JqLnRoZWFkLmNoaWxkcmVuW2pdLmNoaWxkcmVuLmxlbmd0aC0xXS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBjb2xzcGFuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xzcGFuID0gcGFyc2VJbnQob2JqLm9wdGlvbnMubmVzdGVkSGVhZGVyc1swXS5jb2xzcGFuKSAtIG51bU9mQ29sdW1ucztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5uZXN0ZWRIZWFkZXJzWzBdLmNvbHNwYW4gPSBjb2xzcGFuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai50aGVhZC5jaGlsZHJlblswXS5jaGlsZHJlbltvYmoudGhlYWQuY2hpbGRyZW5bMF0uY2hpbGRyZW4ubGVuZ3RoLTFdLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGNvbHNwYW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2VlcGluZyBoaXN0b3J5IG9mIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNldEhpc3Rvcnkoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOidkZWxldGVDb2x1bW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uTnVtYmVyOmNvbHVtbk51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bU9mQ29sdW1uczpudW1PZkNvbHVtbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRCZWZvcmU6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOmNvbHVtbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOmhpc3RvcnlIZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sZ3JvdXA6aGlzdG9yeUNvbGdyb3VwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkczpoaXN0b3J5UmVjb3JkcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvb3RlcnM6aGlzdG9yeUZvb3RlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOmhpc3RvcnlEYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGFibGUgcmVmZXJlbmNlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoudXBkYXRlVGFibGVSZWZlcmVuY2VzKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5kaXNwYXRjaCgnb25kZWxldGVjb2x1bW4nLCBlbCwgY29sdW1uTnVtYmVyLCBudW1PZkNvbHVtbnMsIGhpc3RvcnlSZWNvcmRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0pFWENFTC4gSXQgaXMgbm90IHBvc3NpYmxlIHRvIGRlbGV0ZSB0aGUgbGFzdCBjb2x1bW4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBzZWxldGVkIHJvd3MgbnVtYmVyc1xyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEByZXR1cm4gYXJyYXlcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouZ2V0U2VsZWN0ZWRSb3dzID0gZnVuY3Rpb24oYXNJZHMpIHtcclxuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcclxuICAgICAgICAgICAgLy8gR2V0IGFsbCBzZWxlY3RlZCByb3dzXHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JqLnJvd3MubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoucm93c1tqXS5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXNJZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93cy5wdXNoKGopO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MucHVzaChvYmoucm93c1tqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBzZWxldGVkIGNvbHVtbiBudW1iZXJzXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHJldHVybiBhcnJheVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5nZXRTZWxlY3RlZENvbHVtbnMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGNvbHMgPSBbXTtcclxuICAgICAgICAgICAgLy8gR2V0IGFsbCBzZWxlY3RlZCBjb2xzXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmhlYWRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmouaGVhZGVyc1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xzLnB1c2goaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gY29scztcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgaGlnaGxpZ2h0ZWRcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcmV0dXJuIGFycmF5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLmdldEhpZ2hsaWdodGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvYmouaGlnaGxpZ2h0ZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBkYXRlIGNlbGwgcmVmZXJlbmNlc1xyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEByZXR1cm4gdm9pZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai51cGRhdGVUYWJsZVJlZmVyZW5jZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gVXBkYXRlIGhlYWRlcnNcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmouaGVhZGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBvYmouaGVhZGVyc1tpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEteCcpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoeCAhPSBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGNvb3Jkc1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5oZWFkZXJzW2ldLnNldEF0dHJpYnV0ZSgnZGF0YS14JywgaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGl0bGVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISBvYmouaGVhZGVyc1tpXS5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmhlYWRlcnNbaV0uaW5uZXJIVE1MID0gamV4Y2VsLmdldENvbHVtbk5hbWUoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gVXBkYXRlIGFsbCByb3dzXHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JqLnJvd3MubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoucm93c1tqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB5ID0gb2JqLnJvd3Nbal0uZ2V0QXR0cmlidXRlKCdkYXRhLXknKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh5ICE9IGopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGNvb3Jkc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoucm93c1tqXS5zZXRBdHRyaWJ1dGUoJ2RhdGEteScsIGopO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoucm93c1tqXS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2RhdGEteScsIGopO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSb3cgbnVtYmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yb3dzW2pdLmNoaWxkcmVuWzBdLmlubmVySFRNTCA9IGogKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJlZ3VsYXIgY2VsbHMgYWZmZWN0ZWQgYnkgdGhpcyBjaGFuZ2VcclxuICAgICAgICAgICAgdmFyIGFmZmVjdGVkVG9rZW5zID0gW107XHJcbiAgICAgICAgICAgIHZhciBtZXJnZUNlbGxVcGRhdGVzID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gVXBkYXRlIGNlbGxcclxuICAgICAgICAgICAgdmFyIHVwZGF0ZVBvc2l0aW9uID0gZnVuY3Rpb24oeCx5LGksaikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHggIT0gaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW2pdW2ldLnNldEF0dHJpYnV0ZSgnZGF0YS14JywgaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoeSAhPSBqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbal1baV0uc2V0QXR0cmlidXRlKCdkYXRhLXknLCBqKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gT3RoZXIgdXBkYXRlc1xyXG4gICAgICAgICAgICAgICAgaWYgKHggIT0gaSB8fCB5ICE9IGopIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uSWRGcm9tID0gamV4Y2VsLmdldENvbHVtbk5hbWVGcm9tSWQoW3gsIHldKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uSWRUbyA9IGpleGNlbC5nZXRDb2x1bW5OYW1lRnJvbUlkKFtpLCBqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWZmZWN0ZWRUb2tlbnNbY29sdW1uSWRGcm9tXSA9IGNvbHVtbklkVG87XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iai5yZWNvcmRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5yZWNvcmRzWzBdLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5yZWNvcmRzW2pdW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgdmFsdWVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gb2JqLnJlY29yZHNbal1baV0uZ2V0QXR0cmlidXRlKCdkYXRhLXgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBvYmoucmVjb3Jkc1tqXVtpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjb2x1bW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5yZWNvcmRzW2pdW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbklkRnJvbSA9IGpleGNlbC5nZXRDb2x1bW5OYW1lRnJvbUlkKFt4LCB5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uSWRUbyA9IGpleGNlbC5nZXRDb2x1bW5OYW1lRnJvbUlkKFtpLCBqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVyZ2VDZWxsVXBkYXRlc1tjb2x1bW5JZEZyb21dID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sdW1uSWRGcm9tID09IGNvbHVtbklkVG8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VDZWxsVXBkYXRlc1tjb2x1bW5JZEZyb21dID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsWCA9IHBhcnNlSW50KGkgLSB4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsWSA9IHBhcnNlSW50KGogLSB5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VDZWxsVXBkYXRlc1tjb2x1bW5JZEZyb21dID0gWyBjb2x1bW5JZFRvLCB0b3RhbFgsIHRvdGFsWSBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBvc2l0aW9uKHgseSxpLGopO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gVXBkYXRlIG1lcmdlZCBpZiBhcHBsaWNhYmxlXHJcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMobWVyZ2VDZWxsVXBkYXRlcyk7XHJcbiAgICAgICAgICAgIGlmIChrZXlzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lcmdlQ2VsbFVwZGF0ZXNba2V5c1tpXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZm8gPSBqZXhjZWwuZ2V0SWRGcm9tQ29sdW1uTmFtZShrZXlzW2ldLCB0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGluZm9bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5ID0gaW5mb1sxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUG9zaXRpb24oeCx5LHggKyBtZXJnZUNlbGxVcGRhdGVzW2tleXNbaV1dWzFdLHkgKyBtZXJnZUNlbGxVcGRhdGVzW2tleXNbaV1dWzJdKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uSWRGcm9tID0ga2V5c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbklkVG8gPSBtZXJnZUNlbGxVcGRhdGVzW2tleXNbaV1dWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iai5vcHRpb25zLm1lcmdlQ2VsbHNbY29sdW1uSWRGcm9tXVsyXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBwYXJzZUludChvYmoub3B0aW9ucy5tZXJnZUNlbGxzW2NvbHVtbklkRnJvbV1bMl1bal0uZ2V0QXR0cmlidXRlKCdkYXRhLXgnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHBhcnNlSW50KG9iai5vcHRpb25zLm1lcmdlQ2VsbHNbY29sdW1uSWRGcm9tXVsyXVtqXS5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm1lcmdlQ2VsbHNbY29sdW1uSWRGcm9tXVsyXVtqXS5zZXRBdHRyaWJ1dGUoJ2RhdGEteCcsIHggKyBtZXJnZUNlbGxVcGRhdGVzW2tleXNbaV1dWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm1lcmdlQ2VsbHNbY29sdW1uSWRGcm9tXVsyXVtqXS5zZXRBdHRyaWJ1dGUoJ2RhdGEteScsIHkgKyBtZXJnZUNlbGxVcGRhdGVzW2tleXNbaV1dWzJdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm1lcmdlQ2VsbHNbY29sdW1uSWRUb10gPSBvYmoub3B0aW9ucy5tZXJnZUNlbGxzW2NvbHVtbklkRnJvbV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZShvYmoub3B0aW9ucy5tZXJnZUNlbGxzW2NvbHVtbklkRnJvbV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBmb3JtdWxhc1xyXG4gICAgICAgICAgICBvYmoudXBkYXRlRm9ybXVsYXMoYWZmZWN0ZWRUb2tlbnMpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBtZXRhIGRhdGFcclxuICAgICAgICAgICAgb2JqLnVwZGF0ZU1ldGEoYWZmZWN0ZWRUb2tlbnMpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJlZnJlc2ggc2VsZWN0aW9uXHJcbiAgICAgICAgICAgIG9iai5yZWZyZXNoU2VsZWN0aW9uKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gVXBkYXRlIHRhYmxlIHdpdGggY3VzdG9tIGNvbmZpZ3VyYXRpb24gaWYgYXBwbGljYWJsZVxyXG4gICAgICAgICAgICBvYmoudXBkYXRlVGFibGUoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDdXN0b20gc2V0dGluZ3MgZm9yIHRoZSBjZWxsc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai51cGRhdGVUYWJsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3Igc3BhcmVcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLm1pblNwYXJlUm93cyA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBudW1CbGFua1Jvd3MgPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IG9iai5yb3dzLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5oZWFkZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5kYXRhW2pdW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGVzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBudW1CbGFua1Jvd3MrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5taW5TcGFyZVJvd3MgLSBudW1CbGFua1Jvd3MgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmluc2VydFJvdyhvYmoub3B0aW9ucy5taW5TcGFyZVJvd3MgLSBudW1CbGFua1Jvd3MpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMubWluU3BhcmVDb2xzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG51bUJsYW5rQ29scyA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gb2JqLmhlYWRlcnMubGVuZ3RoIC0gMTsgaSA+PSAwIDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iai5yb3dzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5kYXRhW2pdW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGVzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBudW1CbGFua0NvbHMrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5taW5TcGFyZUNvbHMgLSBudW1CbGFua0NvbHMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmluc2VydENvbHVtbihvYmoub3B0aW9ucy5taW5TcGFyZUNvbHMgLSBudW1CbGFua0NvbHMpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDdXN0b21pemF0aW9ucyBieSB0aGUgZGV2ZWxvcGVyXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMudXBkYXRlVGFibGUpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5kZXRhY2hGb3JVcGRhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlQ2hpbGQob2JqLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JqLnJvd3MubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5oZWFkZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLnVwZGF0ZVRhYmxlKGVsLCBvYmoucmVjb3Jkc1tqXVtpXSwgaSwgaiwgb2JqLm9wdGlvbnMuZGF0YVtqXVtpXSwgb2JqLnJlY29yZHNbal1baV0uaW5uZXJUZXh0LCBqZXhjZWwuZ2V0Q29sdW1uTmFtZUZyb21JZChbaSwgal0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmRldGFjaEZvclVwZGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbC5pbnNlcnRCZWZvcmUob2JqLmNvbnRlbnQsIG9iai5wYWdpbmF0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBmb290ZXJzXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5mb290ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouc2V0Rm9vdGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjb3JuZXIgcG9zaXRpb25cclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIG9iai51cGRhdGVDb3JuZXJQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICB9LDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVhZG9ubHlcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouaXNSZWFkT25seSA9IGZ1bmN0aW9uKGNlbGwpIHtcclxuICAgICAgICAgICAgaWYgKGNlbGwgPSBvYmouZ2V0Q2VsbChjZWxsKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdyZWFkb25seScpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWFkb25seVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5zZXRSZWFkT25seSA9IGZ1bmN0aW9uKGNlbGwsIHN0YXRlKSB7XHJcbiAgICAgICAgICAgIGlmIChjZWxsID0gb2JqLmdldENlbGwoY2VsbCkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgncmVhZG9ubHknKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdyZWFkb25seScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTaG93IHJvd1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5zaG93Um93ID0gZnVuY3Rpb24ocm93TnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG9iai5yb3dzW3Jvd051bWJlcl0uc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGlkZSByb3dcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouaGlkZVJvdyA9IGZ1bmN0aW9uKHJvd051bWJlcikge1xyXG4gICAgICAgICAgICBvYmoucm93c1tyb3dOdW1iZXJdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTaG93IGNvbHVtblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5zaG93Q29sdW1uID0gZnVuY3Rpb24oY29sTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG9iai5oZWFkZXJzW2NvbE51bWJlcl0uc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgICAgICBvYmouY29sZ3JvdXBbY29sTnVtYmVyXS5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JqLm9wdGlvbnMuZGF0YS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbal1bY29sTnVtYmVyXS5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhpZGUgY29sdW1uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLmhpZGVDb2x1bW4gPSBmdW5jdGlvbihjb2xOdW1iZXIpIHtcclxuICAgICAgICAgICAgb2JqLmhlYWRlcnNbY29sTnVtYmVyXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICBvYmouY29sZ3JvdXBbY29sTnVtYmVyXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iai5vcHRpb25zLmRhdGEubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW2pdW2NvbE51bWJlcl0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2hvdyBpbmRleCBjb2x1bW5cclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouc2hvd0luZGV4ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG9iai50YWJsZS5jbGFzc0xpc3QucmVtb3ZlKCdqZXhjZWxfaGlkZGVuX2luZGV4Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGlkZSBpbmRleCBjb2x1bW5cclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouaGlkZUluZGV4ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG9iai50YWJsZS5jbGFzc0xpc3QuYWRkKCdqZXhjZWxfaGlkZGVuX2luZGV4Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBkYXRlIGFsbCByZWxhdGVkIGNlbGxzIGluIHRoZSBjaGFpblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBjaGFpbkxvb3BQcm90ZWN0aW9uID0gW107XHJcbiAgICBcclxuICAgICAgICBvYmoudXBkYXRlRm9ybXVsYUNoYWluID0gZnVuY3Rpb24oeCwgeSwgcmVjb3Jkcykge1xyXG4gICAgICAgICAgICB2YXIgY2VsbElkID0gamV4Y2VsLmdldENvbHVtbk5hbWVGcm9tSWQoW3gsIHldKTtcclxuICAgICAgICAgICAgaWYgKG9iai5mb3JtdWxhW2NlbGxJZF0gJiYgb2JqLmZvcm11bGFbY2VsbElkXS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhaW5Mb29wUHJvdGVjdGlvbltjZWxsSWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbeV1beF0uaW5uZXJIVE1MID0gJyNFUlJPUic7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmZvcm11bGFbY2VsbElkXSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBQcm90ZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5Mb29wUHJvdGVjdGlvbltjZWxsSWRdID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmZvcm11bGFbY2VsbElkXS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGpleGNlbC5nZXRJZEZyb21Db2x1bW5OYW1lKG9iai5mb3JtdWxhW2NlbGxJZF1baV0sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgY2VsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSAnJytvYmoub3B0aW9ucy5kYXRhW2NlbGxbMV1dW2NlbGxbMF1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuc3Vic3RyKDAsMSkgPT0gJz0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzLnB1c2gob2JqLnVwZGF0ZUNlbGwoY2VsbFswXSwgY2VsbFsxXSwgdmFsdWUsIHRydWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGxvbmdlciBhIGZvcm11bGEsIHJlbW92ZSBmcm9tIHRoZSBjaGFpblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMob2JqLmZvcm11bGEpW2ldID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoudXBkYXRlRm9ybXVsYUNoYWluKGNlbGxbMF0sIGNlbGxbMV0sIHJlY29yZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGNoYWluTG9vcFByb3RlY3Rpb24gPSBbXTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGUgZm9ybXVsYXNcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmoudXBkYXRlRm9ybXVsYXMgPSBmdW5jdGlvbihyZWZlcmVuY2VzVG9VcGRhdGUpIHtcclxuICAgICAgICAgICAgLy8gVXBkYXRlIGZvcm11bGFzXHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JqLm9wdGlvbnMuZGF0YS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmoub3B0aW9ucy5kYXRhWzBdLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gJycgKyBvYmoub3B0aW9ucy5kYXRhW2pdW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElzIGZvcm11bGFcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuc3Vic3RyKDAsMSkgPT0gJz0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgdG9rZW5zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdGb3JtdWxhID0gb2JqLnVwZGF0ZUZvcm11bGEodmFsdWUsIHJlZmVyZW5jZXNUb1VwZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdGb3JtdWxhICE9IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhW2pdW2ldID0gbmV3Rm9ybXVsYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBmb3JtdWxhIGNoYWluXHJcbiAgICAgICAgICAgIHZhciBmb3JtdWxhID0gW107XHJcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqLmZvcm11bGEpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGtleXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQga2V5IGFuZCB2YWx1ZXNcclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2pdO1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gb2JqLmZvcm11bGFba2V5XTtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBrZXlcclxuICAgICAgICAgICAgICAgIGlmIChyZWZlcmVuY2VzVG9VcGRhdGVba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleSA9IHJlZmVyZW5jZXNUb1VwZGF0ZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHZhbHVlc1xyXG4gICAgICAgICAgICAgICAgZm9ybXVsYVtrZXldID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxldHRlciA9IHZhbHVlW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWZlcmVuY2VzVG9VcGRhdGVbbGV0dGVyXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXR0ZXIgPSByZWZlcmVuY2VzVG9VcGRhdGVbbGV0dGVyXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybXVsYVtrZXldLnB1c2gobGV0dGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvYmouZm9ybXVsYSA9IGZvcm11bGE7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBkYXRlIGZvcm11bGFcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmoudXBkYXRlRm9ybXVsYSA9IGZ1bmN0aW9uKGZvcm11bGEsIHJlZmVyZW5jZXNUb1VwZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgdGVzdExldHRlciA9IC9bQS1aXS87XHJcbiAgICAgICAgICAgIHZhciB0ZXN0TnVtYmVyID0gL1swLTldLztcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgbmV3Rm9ybXVsYSA9ICcnO1xyXG4gICAgICAgICAgICB2YXIgbGV0dGVyID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIG51bWJlciA9IG51bGw7XHJcbiAgICAgICAgICAgIHZhciB0b2tlbiA9ICcnO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBmb3JtdWxhLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRlc3RMZXR0ZXIuZXhlYyhmb3JtdWxhW2luZGV4XSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXR0ZXIgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIG51bWJlciA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4gKz0gZm9ybXVsYVtpbmRleF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRlc3ROdW1iZXIuZXhlYyhmb3JtdWxhW2luZGV4XSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBudW1iZXIgPSBsZXR0ZXIgPyAxIDogMDtcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbiArPSBmb3JtdWxhW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxldHRlciAmJiBudW1iZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSByZWZlcmVuY2VzVG9VcGRhdGVbdG9rZW5dID8gcmVmZXJlbmNlc1RvVXBkYXRlW3Rva2VuXSA6IHRva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBuZXdGb3JtdWxhICs9IHRva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0Zvcm11bGEgKz0gZm9ybXVsYVtpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0dGVyID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBudW1iZXIgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGlmIChsZXR0ZXIgJiYgbnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSByZWZlcmVuY2VzVG9VcGRhdGVbdG9rZW5dID8gcmVmZXJlbmNlc1RvVXBkYXRlW3Rva2VuXSA6IHRva2VuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbmV3Rm9ybXVsYSArPSB0b2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBuZXdGb3JtdWxhO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNlY3VyZSBmb3JtdWxhXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIHNlY3VyZUZvcm11bGEgPSBmdW5jdGlvbihvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSAnJztcclxuICAgICAgICAgICAgdmFyIGluc2lkZSA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9sZFZhbHVlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2xkVmFsdWVbaV0gPT0gJ1wiJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnNpZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnNpZGUgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc2lkZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpbnNpZGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlICs9IG9sZFZhbHVlW2ldO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSArPSBvbGRWYWx1ZVtpXS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3VmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQYXJzZSBmb3JtdWxhc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5leGVjdXRlRm9ybXVsYSA9IGZ1bmN0aW9uKGV4cHJlc3Npb24sIHgsIHkpIHtcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgZm9ybXVsYVJlc3VsdHMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIGZvcm11bGFMb29wUHJvdGVjdGlvbiA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEV4ZWN1dGUgZm9ybXVsYSB3aXRoIGxvb3AgcHJvdGVjdGlvblxyXG4gICAgICAgICAgICB2YXIgZXhlY3V0ZSA9IGZ1bmN0aW9uKGV4cHJlc3Npb24sIHgsIHkpIHtcclxuICAgICAgICAgICAgIC8vIFBhcmVudCBjb2x1bW4gaWRlbnRpZmljYXRpb25cclxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRJZCA9IGpleGNlbC5nZXRDb2x1bW5OYW1lRnJvbUlkKFt4LCB5XSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIENvZGUgcHJvdGVjdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKGZvcm11bGFMb29wUHJvdGVjdGlvbltwYXJlbnRJZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdSZWZlcmVuY2UgbG9vcCBkZXRlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnI0VSUk9SJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZm9ybXVsYUxvb3BQcm90ZWN0aW9uW3BhcmVudElkXSA9IHRydWU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgcmFuZ2UgdG9rZW5zXHJcbiAgICAgICAgICAgICAgICB2YXIgdG9rZW5zVXBkYXRlID0gZnVuY3Rpb24odG9rZW5zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHRva2Vucy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuID0gdG9rZW5zW2luZGV4XS5zcGxpdCgnOicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZTEgPSBqZXhjZWwuZ2V0SWRGcm9tQ29sdW1uTmFtZSh0b2tlblswXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlMiA9IGpleGNlbC5nZXRJZEZyb21Db2x1bW5OYW1lKHRva2VuWzFdLCB0cnVlKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZTFbMF0gPD0gZTJbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4MSA9IGUxWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHgyID0gZTJbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeDEgPSBlMlswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4MiA9IGUxWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUxWzFdIDw9IGUyWzFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeTEgPSBlMVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5MiA9IGUyWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkxID0gZTJbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeTIgPSBlMVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSB5MTsgaiA8PSB5MjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0geDE7IGkgPD0geDI7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYucHVzaChqZXhjZWwuZ2V0Q29sdW1uTmFtZUZyb21JZChbaSwgal0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb24gPSBleHByZXNzaW9uLnJlcGxhY2UodG9rZW5zW2luZGV4XSwgZi5qb2luKCcsJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUmFuZ2Ugd2l0aCAkIHJlbW92ZSAkXHJcbiAgICAgICAgICAgICAgICBleHByZXNzaW9uID0gZXhwcmVzc2lvbi5yZXBsYWNlKC9cXCQ/KFtBLVpdKylcXCQ/KFswLTldKykvZywgXCIkMSQyXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB0b2tlbnMgPSBleHByZXNzaW9uLm1hdGNoKC8oW0EtWl0rWzAtOV0rKVxcOihbQS1aXStbMC05XSspL2cpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRva2VucyAmJiB0b2tlbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5zVXBkYXRlKHRva2Vucyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFN0cmluZ1xyXG4gICAgICAgICAgICAgICAgdmFyIGV2YWxzdHJpbmcgPSAnJztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gR2V0IHRva2Vuc1xyXG4gICAgICAgICAgICAgICAgdmFyIHRva2VucyA9IGV4cHJlc3Npb24ubWF0Y2goLyhbQS1aXStbMC05XSspL2cpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBEaXJlY3Qgc2VsZi1yZWZlcmVuY2UgcHJvdGVjdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKHRva2VucyAmJiB0b2tlbnMuaW5kZXhPZihwYXJlbnRJZCkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlbGYgUmVmZXJlbmNlIGRldGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcjRVJST1InO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW5zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIGNoYWluXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBvYmouZm9ybXVsYVt0b2tlbnNbaV1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmZvcm11bGFbdG9rZW5zW2ldXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXMgYWxyZWFkeSBpbiB0aGUgcmVnaXN0ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmouZm9ybXVsYVt0b2tlbnNbaV1dLmluZGV4T2YocGFyZW50SWQpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5mb3JtdWxhW3Rva2Vuc1tpXV0ucHVzaChwYXJlbnRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdCBjYWxjdWxhdGUgYWdhaW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmFsKCd0eXBlb2YoJyArIHRva2Vuc1tpXSArICcpID09IFwidW5kZWZpbmVkXCInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvb3Jkc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IGpleGNlbC5nZXRJZEZyb21Db2x1bW5OYW1lKHRva2Vuc1tpXSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5kYXRhW3Bvc2l0aW9uWzFdXSkgIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mKG9iai5vcHRpb25zLmRhdGFbcG9zaXRpb25bMV1dW3Bvc2l0aW9uWzBdXSkgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gb2JqLm9wdGlvbnMuZGF0YVtwb3NpdGlvblsxXV1bcG9zaXRpb25bMF1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgY29sdW1uIGRhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKCcnK3ZhbHVlKS5zdWJzdHIoMCwxKSA9PSAnPScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm11bGFSZXN1bHRzW3Rva2Vuc1tpXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZm9ybXVsYVJlc3VsdHNbdG9rZW5zW2ldXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZXhlY3V0ZSh2YWx1ZSwgcG9zaXRpb25bMF0sIHBvc2l0aW9uWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm11bGFSZXN1bHRzW3Rva2Vuc1tpXV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUeXBlIVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoJycrdmFsdWUpLnRyaW0oKSA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOdWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2YWxzdHJpbmcgKz0gXCJ2YXIgXCIgKyB0b2tlbnNbaV0gKyBcIiA9IG51bGw7XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IE51bWJlcih2YWx1ZSkgJiYgb2JqLm9wdGlvbnMuYXV0b0Nhc3RpbmcgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTnVtYmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmFsc3RyaW5nICs9IFwidmFyIFwiICsgdG9rZW5zW2ldICsgXCIgPSBcIiArIE51bWJlcih2YWx1ZSkgKyBcIjtcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeWluZyBhbnkgZm9ybWF0dGVkIG51bWJlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG51bWJlciA9IG9iai5wYXJzZU51bWJlcih2YWx1ZSwgcG9zaXRpb25bMF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuYXV0b0Nhc3RpbmcgPT0gdHJ1ZSAmJiBudW1iZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW5kZXIgYXMgbnVtYmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZhbHN0cmluZyArPSBcInZhciBcIiArIHRva2Vuc1tpXSArIFwiID0gXCIgKyBudW1iZXIgKyBcIjtcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVuZGVyIGFzIHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2YWxzdHJpbmcgKz0gXCJ2YXIgXCIgKyB0b2tlbnNbaV0gKyBcIiA9ICdcIiArIHZhbHVlICsgXCInO1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29udmVydCBmb3JtdWxhIHRvIGphdmFzY3JpcHRcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmFsc3RyaW5nICs9IFwiZnVuY3Rpb24gQ09MVU1OKCkgeyByZXR1cm4gcGFyc2VJbnQoeCkgKyAxOyB9OyBmdW5jdGlvbiBST1coKSB7IHJldHVybiBwYXJzZUludCh5KSArIDE7IH07IGZ1bmN0aW9uIENFTEwoKSB7IHJldHVybiBwYXJlbnRJZDsgfTsgZnVuY3Rpb24gVEFCTEUoKSB7IHJldHVybiBvYmo7IH07IGZ1bmN0aW9uIFZBTFVFKGNvbCwgcm93KSB7IHJldHVybiBvYmoucmVjb3Jkc1tyb3ctMV1bY29sLTFdLmlubmVySFRNTDsgfTsgZnVuY3Rpb24gVEhJU1JPV0NFTEwoY29sKSB7IHZhciBpZCA9IGpleGNlbC5nZXRJZEZyb21Db2x1bW5OYW1lKGNvbCsocGFyc2VJbnQoeSkrMSksIHRydWUpOyByZXR1cm4gb2JqLnJlY29yZHNbaWRbMV1dW2lkWzBdXS5pbm5lckhUTUw7IH1cIjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzID0gZXZhbChldmFsc3RyaW5nICsgZXhwcmVzc2lvbi5zdWJzdHIoMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9ICcjRVJST1InO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gZXhlY3V0ZShleHByZXNzaW9uLCB4LCB5KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUcnlpbmcgdG8gZXh0cmFjdCBhIG51bWJlciBmcm9tIGEgc3RyaW5nXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnBhcnNlTnVtYmVyID0gZnVuY3Rpb24odmFsdWUsIGNvbHVtbk51bWJlcikge1xyXG4gICAgICAgICAgICAvLyBEZWNpbWFsIHBvaW50XHJcbiAgICAgICAgICAgIHZhciBkZWNpbWFsID0gY29sdW1uTnVtYmVyICYmIG9iai5vcHRpb25zLmNvbHVtbnNbY29sdW1uTnVtYmVyXS5kZWNpbWFsID8gb2JqLm9wdGlvbnMuY29sdW1uc1tjb2x1bW5OdW1iZXJdLmRlY2ltYWwgOiAnLic7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUGFyc2UgYm90aCBwYXJ0cyBvZiB0aGUgbnVtYmVyXHJcbiAgICAgICAgICAgIHZhciBudW1iZXIgPSAoJycgKyB2YWx1ZSk7XHJcbiAgICAgICAgICAgIG51bWJlciA9IG51bWJlci5zcGxpdChkZWNpbWFsKTtcclxuICAgICAgICAgICAgbnVtYmVyWzBdID0gbnVtYmVyWzBdLm1hdGNoKC9bKy1dP1swLTldL2cpO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBudW1iZXJbMF0gPSBudW1iZXJbMF0uam9pbignJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG51bWJlclsxXSkge1xyXG4gICAgICAgICAgICAgICAgbnVtYmVyWzFdID0gbnVtYmVyWzFdLm1hdGNoKC9bMC05XSovZykuam9pbignJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBJcyBhIHZhbGlkIG51bWJlclxyXG4gICAgICAgICAgICBpZiAobnVtYmVyWzBdICYmIE51bWJlcihudW1iZXJbMF0pID49IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICghIG51bWJlclsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IE51bWJlcihudW1iZXJbMF0gKyAnLjAwJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IE51bWJlcihudW1iZXJbMF0gKyAnLicgKyBudW1iZXJbMV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgcm93IG51bWJlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5yb3cgPSBmdW5jdGlvbihjZWxsKSB7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IGNvbCBudW1iZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouY29sID0gZnVuY3Rpb24oY2VsbCkge1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIG9iai51cCA9IGZ1bmN0aW9uKHNoaWZ0S2V5LCBjdHJsS2V5KSB7XHJcbiAgICAgICAgICAgIGlmIChzaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5zZWxlY3RlZENlbGxbM10gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnVwLnZpc2libGUoMSwgY3RybEtleSA/IDAgOiAxKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5zZWxlY3RlZENlbGxbMV0gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnVwLnZpc2libGUoMCwgY3RybEtleSA/IDAgOiAxKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb2JqLnNlbGVjdGVkQ2VsbFsyXSA9IG9iai5zZWxlY3RlZENlbGxbMF07XHJcbiAgICAgICAgICAgICAgICBvYmouc2VsZWN0ZWRDZWxsWzNdID0gb2JqLnNlbGVjdGVkQ2VsbFsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBzZWxlY3Rpb25cclxuICAgICAgICAgICAgb2JqLnVwZGF0ZVNlbGVjdGlvbkZyb21Db29yZHMob2JqLnNlbGVjdGVkQ2VsbFswXSwgb2JqLnNlbGVjdGVkQ2VsbFsxXSwgb2JqLnNlbGVjdGVkQ2VsbFsyXSwgb2JqLnNlbGVjdGVkQ2VsbFszXSk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ2hhbmdlIHBhZ2VcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmxhenlMb2FkaW5nID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmouc2VsZWN0ZWRDZWxsWzFdID09IDAgfHwgb2JqLnNlbGVjdGVkQ2VsbFszXSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmxvYWRQYWdlKDApO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai51cGRhdGVTZWxlY3Rpb25Gcm9tQ29vcmRzKG9iai5zZWxlY3RlZENlbGxbMF0sIG9iai5zZWxlY3RlZENlbGxbMV0sIG9iai5zZWxlY3RlZENlbGxbMl0sIG9iai5zZWxlY3RlZENlbGxbM10pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmxvYWRWYWxpZGF0aW9uKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnVwZGF0ZVNlbGVjdGlvbkZyb21Db29yZHMob2JqLnNlbGVjdGVkQ2VsbFswXSwgb2JqLnNlbGVjdGVkQ2VsbFsxXSwgb2JqLnNlbGVjdGVkQ2VsbFsyXSwgb2JqLnNlbGVjdGVkQ2VsbFszXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBwYXJzZUludChvYmoudGJvZHkuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5zZWxlY3RlZENlbGxbMV0gLSBpdGVtIDwgMzApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5sb2FkVXAoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai51cGRhdGVTZWxlY3Rpb25Gcm9tQ29vcmRzKG9iai5zZWxlY3RlZENlbGxbMF0sIG9iai5zZWxlY3RlZENlbGxbMV0sIG9iai5zZWxlY3RlZENlbGxbMl0sIG9iai5zZWxlY3RlZENlbGxbM10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5vcHRpb25zLnBhZ2luYXRpb24gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFnZU51bWJlciA9IG9iai53aGljaFBhZ2Uob2JqLnNlbGVjdGVkQ2VsbFszXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFnZU51bWJlciAhPSBvYmoucGFnZU51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5wYWdlKHBhZ2VOdW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgb2JqLnVwZGF0ZVNjcm9sbCgxKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBvYmoudXAudmlzaWJsZSA9IGZ1bmN0aW9uKGdyb3VwLCBkaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgaWYgKGdyb3VwID09IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gcGFyc2VJbnQob2JqLnNlbGVjdGVkQ2VsbFswXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IHBhcnNlSW50KG9iai5zZWxlY3RlZENlbGxbMV0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBwYXJzZUludChvYmouc2VsZWN0ZWRDZWxsWzJdKTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gcGFyc2VJbnQob2JqLnNlbGVjdGVkQ2VsbFszXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgeTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5yZWNvcmRzW2pdW3hdLnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnICYmIG9iai5yb3dzW2pdLnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBqO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB5ID0gb2JqLnVwLmdldCh4LCB5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChncm91cCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouc2VsZWN0ZWRDZWxsWzBdID0geDtcclxuICAgICAgICAgICAgICAgIG9iai5zZWxlY3RlZENlbGxbMV0gPSB5O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb2JqLnNlbGVjdGVkQ2VsbFsyXSA9IHg7XHJcbiAgICAgICAgICAgICAgICBvYmouc2VsZWN0ZWRDZWxsWzNdID0geTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIG9iai51cC5nZXQgPSBmdW5jdGlvbih4LCB5KSB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gcGFyc2VJbnQoeCk7XHJcbiAgICAgICAgICAgIHZhciB5ID0gcGFyc2VJbnQoeSk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAoeSAtIDEpOyBqID49IDA7IGotLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5yZWNvcmRzW2pdW3hdLnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnICYmIG9iai5yb3dzW2pdLnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5yZWNvcmRzW2pdW3hdLmdldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnJlY29yZHNbal1beF0gPT0gb2JqLnJlY29yZHNbeV1beF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHkgPSBqO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgb2JqLmRvd24gPSBmdW5jdGlvbihzaGlmdEtleSwgY3RybEtleSkge1xyXG4gICAgICAgICAgICBpZiAoc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmouc2VsZWN0ZWRDZWxsWzNdIDwgb2JqLnJlY29yZHMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5kb3duLnZpc2libGUoMSwgY3RybEtleSA/IDAgOiAxKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5zZWxlY3RlZENlbGxbMV0gPCBvYmoucmVjb3Jkcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmRvd24udmlzaWJsZSgwLCBjdHJsS2V5ID8gMCA6IDEpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvYmouc2VsZWN0ZWRDZWxsWzJdID0gb2JqLnNlbGVjdGVkQ2VsbFswXTtcclxuICAgICAgICAgICAgICAgIG9iai5zZWxlY3RlZENlbGxbM10gPSBvYmouc2VsZWN0ZWRDZWxsWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgb2JqLnVwZGF0ZVNlbGVjdGlvbkZyb21Db29yZHMob2JqLnNlbGVjdGVkQ2VsbFswXSwgb2JqLnNlbGVjdGVkQ2VsbFsxXSwgb2JqLnNlbGVjdGVkQ2VsbFsyXSwgb2JqLnNlbGVjdGVkQ2VsbFszXSk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ2hhbmdlIHBhZ2VcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmxhenlMb2FkaW5nID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICgob2JqLnNlbGVjdGVkQ2VsbFsxXSA9PSBvYmoucmVjb3Jkcy5sZW5ndGggLSAxIHx8IG9iai5zZWxlY3RlZENlbGxbM10gPT0gb2JqLnJlY29yZHMubGVuZ3RoIC0gMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoubG9hZFBhZ2UoLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai51cGRhdGVTZWxlY3Rpb25Gcm9tQ29vcmRzKG9iai5zZWxlY3RlZENlbGxbMF0sIG9iai5zZWxlY3RlZENlbGxbMV0sIG9iai5zZWxlY3RlZENlbGxbMl0sIG9iai5zZWxlY3RlZENlbGxbM10pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmxvYWRWYWxpZGF0aW9uKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnVwZGF0ZVNlbGVjdGlvbkZyb21Db29yZHMob2JqLnNlbGVjdGVkQ2VsbFswXSwgb2JqLnNlbGVjdGVkQ2VsbFsxXSwgb2JqLnNlbGVjdGVkQ2VsbFsyXSwgb2JqLnNlbGVjdGVkQ2VsbFszXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBwYXJzZUludChvYmoudGJvZHkubGFzdENoaWxkLmdldEF0dHJpYnV0ZSgnZGF0YS15JykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSAtIG9iai5zZWxlY3RlZENlbGxbM10gPCAzMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmxvYWREb3duKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoudXBkYXRlU2VsZWN0aW9uRnJvbUNvb3JkcyhvYmouc2VsZWN0ZWRDZWxsWzBdLCBvYmouc2VsZWN0ZWRDZWxsWzFdLCBvYmouc2VsZWN0ZWRDZWxsWzJdLCBvYmouc2VsZWN0ZWRDZWxsWzNdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChvYmoub3B0aW9ucy5wYWdpbmF0aW9uID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhZ2VOdW1iZXIgPSBvYmoud2hpY2hQYWdlKG9iai5zZWxlY3RlZENlbGxbM10pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT0gb2JqLnBhZ2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoucGFnZShwYWdlTnVtYmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIG9iai51cGRhdGVTY3JvbGwoMyk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgb2JqLmRvd24udmlzaWJsZSA9IGZ1bmN0aW9uKGdyb3VwLCBkaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgaWYgKGdyb3VwID09IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gcGFyc2VJbnQob2JqLnNlbGVjdGVkQ2VsbFswXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IHBhcnNlSW50KG9iai5zZWxlY3RlZENlbGxbMV0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBwYXJzZUludChvYmouc2VsZWN0ZWRDZWxsWzJdKTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gcGFyc2VJbnQob2JqLnNlbGVjdGVkQ2VsbFszXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBvYmoucm93cy5sZW5ndGggLSAxOyBqID4geTsgai0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5yZWNvcmRzW2pdW3hdLnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnICYmIG9iai5yb3dzW2pdLnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBqO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB5ID0gb2JqLmRvd24uZ2V0KHgsIHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKGdyb3VwID09IDApIHtcclxuICAgICAgICAgICAgICAgIG9iai5zZWxlY3RlZENlbGxbMF0gPSB4O1xyXG4gICAgICAgICAgICAgICAgb2JqLnNlbGVjdGVkQ2VsbFsxXSA9IHk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvYmouc2VsZWN0ZWRDZWxsWzJdID0geDtcclxuICAgICAgICAgICAgICAgIG9iai5zZWxlY3RlZENlbGxbM10gPSB5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgb2JqLmRvd24uZ2V0ID0gZnVuY3Rpb24oeCwgeSkge1xyXG4gICAgICAgICAgICB2YXIgeCA9IHBhcnNlSW50KHgpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IHBhcnNlSW50KHkpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gKHkgKyAxKTsgaiA8IG9iai5yb3dzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLnJlY29yZHNbal1beF0uc3R5bGUuZGlzcGxheSAhPSAnbm9uZScgJiYgb2JqLnJvd3Nbal0uc3R5bGUuZGlzcGxheSAhPSAnbm9uZScpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnJlY29yZHNbal1beF0uZ2V0QXR0cmlidXRlKCdkYXRhLW1lcmdlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoucmVjb3Jkc1tqXVt4XSA9PSBvYmoucmVjb3Jkc1t5XVt4XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgeSA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4geTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBvYmoucmlnaHQgPSBmdW5jdGlvbihzaGlmdEtleSwgY3RybEtleSkge1xyXG4gICAgICAgICAgICBpZiAoc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmouc2VsZWN0ZWRDZWxsWzJdIDwgb2JqLmhlYWRlcnMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5yaWdodC52aXNpYmxlKDEsIGN0cmxLZXkgPyAwIDogMSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmouc2VsZWN0ZWRDZWxsWzBdIDwgb2JqLmhlYWRlcnMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5yaWdodC52aXNpYmxlKDAsIGN0cmxLZXkgPyAwIDogMSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9iai5zZWxlY3RlZENlbGxbMl0gPSBvYmouc2VsZWN0ZWRDZWxsWzBdO1xyXG4gICAgICAgICAgICAgICAgb2JqLnNlbGVjdGVkQ2VsbFszXSA9IG9iai5zZWxlY3RlZENlbGxbMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBvYmoudXBkYXRlU2VsZWN0aW9uRnJvbUNvb3JkcyhvYmouc2VsZWN0ZWRDZWxsWzBdLCBvYmouc2VsZWN0ZWRDZWxsWzFdLCBvYmouc2VsZWN0ZWRDZWxsWzJdLCBvYmouc2VsZWN0ZWRDZWxsWzNdKTtcclxuICAgICAgICAgICAgb2JqLnVwZGF0ZVNjcm9sbCgyKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBvYmoucmlnaHQudmlzaWJsZSA9IGZ1bmN0aW9uKGdyb3VwLCBkaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgaWYgKGdyb3VwID09IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gcGFyc2VJbnQob2JqLnNlbGVjdGVkQ2VsbFswXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IHBhcnNlSW50KG9iai5zZWxlY3RlZENlbGxbMV0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBwYXJzZUludChvYmouc2VsZWN0ZWRDZWxsWzJdKTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gcGFyc2VJbnQob2JqLnNlbGVjdGVkQ2VsbFszXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBvYmouaGVhZGVycy5sZW5ndGggLSAxOyBpID4geDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5yZWNvcmRzW3ldW2ldLnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB4ID0gb2JqLnJpZ2h0LmdldCh4LCB5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChncm91cCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouc2VsZWN0ZWRDZWxsWzBdID0geDtcclxuICAgICAgICAgICAgICAgIG9iai5zZWxlY3RlZENlbGxbMV0gPSB5O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb2JqLnNlbGVjdGVkQ2VsbFsyXSA9IHg7XHJcbiAgICAgICAgICAgICAgICBvYmouc2VsZWN0ZWRDZWxsWzNdID0geTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIG9iai5yaWdodC5nZXQgPSBmdW5jdGlvbih4LCB5KSB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gcGFyc2VJbnQoeCk7XHJcbiAgICAgICAgICAgIHZhciB5ID0gcGFyc2VJbnQoeSk7XHJcbiAgICBcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9ICh4ICsgMSk7IGkgPCBvYmouaGVhZGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5yZWNvcmRzW3ldW2ldLnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5yZWNvcmRzW3ldW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS1tZXJnZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnJlY29yZHNbeV1baV0gPT0gb2JqLnJlY29yZHNbeV1beF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHggPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgb2JqLmxlZnQgPSBmdW5jdGlvbihzaGlmdEtleSwgY3RybEtleSkge1xyXG4gICAgICAgICAgICBpZiAoc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmouc2VsZWN0ZWRDZWxsWzJdID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5sZWZ0LnZpc2libGUoMSwgY3RybEtleSA/IDAgOiAxKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5zZWxlY3RlZENlbGxbMF0gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmxlZnQudmlzaWJsZSgwLCBjdHJsS2V5ID8gMCA6IDEpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvYmouc2VsZWN0ZWRDZWxsWzJdID0gb2JqLnNlbGVjdGVkQ2VsbFswXTtcclxuICAgICAgICAgICAgICAgIG9iai5zZWxlY3RlZENlbGxbM10gPSBvYmouc2VsZWN0ZWRDZWxsWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgb2JqLnVwZGF0ZVNlbGVjdGlvbkZyb21Db29yZHMob2JqLnNlbGVjdGVkQ2VsbFswXSwgb2JqLnNlbGVjdGVkQ2VsbFsxXSwgb2JqLnNlbGVjdGVkQ2VsbFsyXSwgb2JqLnNlbGVjdGVkQ2VsbFszXSk7XHJcbiAgICAgICAgICAgIG9iai51cGRhdGVTY3JvbGwoMCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgb2JqLmxlZnQudmlzaWJsZSA9IGZ1bmN0aW9uKGdyb3VwLCBkaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgaWYgKGdyb3VwID09IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gcGFyc2VJbnQob2JqLnNlbGVjdGVkQ2VsbFswXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IHBhcnNlSW50KG9iai5zZWxlY3RlZENlbGxbMV0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBwYXJzZUludChvYmouc2VsZWN0ZWRDZWxsWzJdKTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gcGFyc2VJbnQob2JqLnNlbGVjdGVkQ2VsbFszXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5yZWNvcmRzW3ldW2ldLnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB4ID0gb2JqLmxlZnQuZ2V0KHgsIHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKGdyb3VwID09IDApIHtcclxuICAgICAgICAgICAgICAgIG9iai5zZWxlY3RlZENlbGxbMF0gPSB4O1xyXG4gICAgICAgICAgICAgICAgb2JqLnNlbGVjdGVkQ2VsbFsxXSA9IHk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvYmouc2VsZWN0ZWRDZWxsWzJdID0geDtcclxuICAgICAgICAgICAgICAgIG9iai5zZWxlY3RlZENlbGxbM10gPSB5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgb2JqLmxlZnQuZ2V0ID0gZnVuY3Rpb24oeCwgeSkge1xyXG4gICAgICAgICAgICB2YXIgeCA9IHBhcnNlSW50KHgpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IHBhcnNlSW50KHkpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gKHggLSAxKTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoucmVjb3Jkc1t5XVtpXS5zdHlsZS5kaXNwbGF5ICE9ICdub25lJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmoucmVjb3Jkc1t5XVtpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWVyZ2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5yZWNvcmRzW3ldW2ldID09IG9iai5yZWNvcmRzW3ldW3hdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB4ID0gaTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIG9iai5maXJzdCA9IGZ1bmN0aW9uKHNoaWZ0S2V5LCBjdHJsS2V5KSB7XHJcbiAgICAgICAgICAgIGlmIChzaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN0cmxLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouc2VsZWN0ZWRDZWxsWzNdID0gMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmxlZnQudmlzaWJsZSgxLCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdHJsS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnNlbGVjdGVkQ2VsbFsxXSA9IDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5sZWZ0LnZpc2libGUoMCwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvYmouc2VsZWN0ZWRDZWxsWzJdID0gb2JqLnNlbGVjdGVkQ2VsbFswXTtcclxuICAgICAgICAgICAgICAgIG9iai5zZWxlY3RlZENlbGxbM10gPSBvYmouc2VsZWN0ZWRDZWxsWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ2hhbmdlIHBhZ2VcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmxhenlMb2FkaW5nID09IHRydWUgJiYgKG9iai5zZWxlY3RlZENlbGxbMV0gPT0gMCB8fCBvYmouc2VsZWN0ZWRDZWxsWzNdID09IDApKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoubG9hZFBhZ2UoMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLm9wdGlvbnMucGFnaW5hdGlvbiA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYWdlTnVtYmVyID0gb2JqLndoaWNoUGFnZShvYmouc2VsZWN0ZWRDZWxsWzNdKTtcclxuICAgICAgICAgICAgICAgIGlmIChwYWdlTnVtYmVyICE9IG9iai5wYWdlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnBhZ2UocGFnZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBvYmoudXBkYXRlU2VsZWN0aW9uRnJvbUNvb3JkcyhvYmouc2VsZWN0ZWRDZWxsWzBdLCBvYmouc2VsZWN0ZWRDZWxsWzFdLCBvYmouc2VsZWN0ZWRDZWxsWzJdLCBvYmouc2VsZWN0ZWRDZWxsWzNdKTtcclxuICAgICAgICAgICAgb2JqLnVwZGF0ZVNjcm9sbCgxKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBvYmoubGFzdCA9IGZ1bmN0aW9uKHNoaWZ0S2V5LCBjdHJsS2V5KSB7XHJcbiAgICAgICAgICAgIGlmIChzaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN0cmxLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouc2VsZWN0ZWRDZWxsWzNdID0gb2JqLnJlY29yZHMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJpZ2h0LnZpc2libGUoMSwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3RybEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5zZWxlY3RlZENlbGxbMV0gPSBvYmoucmVjb3Jkcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoucmlnaHQudmlzaWJsZSgwLCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9iai5zZWxlY3RlZENlbGxbMl0gPSBvYmouc2VsZWN0ZWRDZWxsWzBdO1xyXG4gICAgICAgICAgICAgICAgb2JqLnNlbGVjdGVkQ2VsbFszXSA9IG9iai5zZWxlY3RlZENlbGxbMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDaGFuZ2UgcGFnZVxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMubGF6eUxvYWRpbmcgPT0gdHJ1ZSAmJiAob2JqLnNlbGVjdGVkQ2VsbFsxXSA9PSBvYmoucmVjb3Jkcy5sZW5ndGggLSAxIHx8IG9iai5zZWxlY3RlZENlbGxbM10gPT0gb2JqLnJlY29yZHMubGVuZ3RoIC0gMSkpIHtcclxuICAgICAgICAgICAgICAgIG9iai5sb2FkUGFnZSgtMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLm9wdGlvbnMucGFnaW5hdGlvbiA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYWdlTnVtYmVyID0gb2JqLndoaWNoUGFnZShvYmouc2VsZWN0ZWRDZWxsWzNdKTtcclxuICAgICAgICAgICAgICAgIGlmIChwYWdlTnVtYmVyICE9IG9iai5wYWdlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnBhZ2UocGFnZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBvYmoudXBkYXRlU2VsZWN0aW9uRnJvbUNvb3JkcyhvYmouc2VsZWN0ZWRDZWxsWzBdLCBvYmouc2VsZWN0ZWRDZWxsWzFdLCBvYmouc2VsZWN0ZWRDZWxsWzJdLCBvYmouc2VsZWN0ZWRDZWxsWzNdKTtcclxuICAgICAgICAgICAgb2JqLnVwZGF0ZVNjcm9sbCgzKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBvYmouc2VsZWN0QWxsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICghIG9iai5zZWxlY3RlZENlbGwpIHtcclxuICAgICAgICAgICAgICAgIG9iai5zZWxlY3RlZENlbGwgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIG9iai5zZWxlY3RlZENlbGxbMF0gPSAwO1xyXG4gICAgICAgICAgICBvYmouc2VsZWN0ZWRDZWxsWzFdID0gMDtcclxuICAgICAgICAgICAgb2JqLnNlbGVjdGVkQ2VsbFsyXSA9IG9iai5oZWFkZXJzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgIG9iai5zZWxlY3RlZENlbGxbM10gPSBvYmoucmVjb3Jkcy5sZW5ndGggLSAxO1xyXG4gICAgXHJcbiAgICAgICAgICAgIG9iai51cGRhdGVTZWxlY3Rpb25Gcm9tQ29vcmRzKG9iai5zZWxlY3RlZENlbGxbMF0sIG9iai5zZWxlY3RlZENlbGxbMV0sIG9iai5zZWxlY3RlZENlbGxbMl0sIG9iai5zZWxlY3RlZENlbGxbM10pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdvIHRvIGEgcGFnZSBpbiBhIGxhenlMb2FkaW5nXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLmxvYWRQYWdlID0gZnVuY3Rpb24ocGFnZU51bWJlcikge1xyXG4gICAgICAgICAgICAvLyBTZWFyY2hcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnNlYXJjaCA9PSB0cnVlICYmIG9iai5yZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IG9iai5yZXN1bHRzO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBvYmoucm93cztcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFBlciBwYWdlXHJcbiAgICAgICAgICAgIHZhciBxdWFudGl0eVBlclBhZ2UgPSAxMDA7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gcGFnZU51bWJlclxyXG4gICAgICAgICAgICBpZiAocGFnZU51bWJlciA9PSBudWxsIHx8IHBhZ2VOdW1iZXIgPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIC8vIExhc3QgcGFnZVxyXG4gICAgICAgICAgICAgICAgcGFnZU51bWJlciA9IE1hdGguY2VpbChyZXN1bHRzLmxlbmd0aCAvIHF1YW50aXR5UGVyUGFnZSkgLSAxOyBcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHZhciBzdGFydFJvdyA9IChwYWdlTnVtYmVyICogcXVhbnRpdHlQZXJQYWdlKTtcclxuICAgICAgICAgICAgdmFyIGZpbmFsUm93ID0gKHBhZ2VOdW1iZXIgKiBxdWFudGl0eVBlclBhZ2UpICsgcXVhbnRpdHlQZXJQYWdlO1xyXG4gICAgICAgICAgICBpZiAoZmluYWxSb3cgPiByZXN1bHRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgZmluYWxSb3cgPSByZXN1bHRzLmxlbmd0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdGFydFJvdyA9IGZpbmFsUm93IC0gMTAwO1xyXG4gICAgICAgICAgICBpZiAoc3RhcnRSb3cgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydFJvdyA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBBcHBlZGluZyBpdGVtc1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gc3RhcnRSb3c7IGogPCBmaW5hbFJvdzsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuc2VhcmNoID09IHRydWUgJiYgb2JqLnJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoudGJvZHkuYXBwZW5kQ2hpbGQob2JqLnJvd3NbcmVzdWx0c1tqXV0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoudGJvZHkuYXBwZW5kQ2hpbGQob2JqLnJvd3Nbal0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLnRib2R5LmNoaWxkcmVuLmxlbmd0aCA+IHF1YW50aXR5UGVyUGFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai50Ym9keS5yZW1vdmVDaGlsZChvYmoudGJvZHkuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBvYmoubG9hZFVwID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIFNlYXJjaFxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuc2VhcmNoID09IHRydWUgJiYgb2JqLnJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gb2JqLnJlc3VsdHM7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IG9iai5yb3dzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB0ZXN0ID0gMDtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID4gMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIHBhZ2VcclxuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gcGFyc2VJbnQob2JqLnRib2R5LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCdkYXRhLXknKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuc2VhcmNoID09IHRydWUgJiYgb2JqLnJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtID0gcmVzdWx0cy5pbmRleE9mKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAzMDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0gPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnNlYXJjaCA9PSB0cnVlICYmIG9iai5yZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnRib2R5Lmluc2VydEJlZm9yZShvYmoucm93c1tyZXN1bHRzW2l0ZW1dXSwgb2JqLnRib2R5LmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoudGJvZHkuaW5zZXJ0QmVmb3JlKG9iai5yb3dzW2l0ZW1dLCBvYmoudGJvZHkuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnRib2R5LmNoaWxkcmVuLmxlbmd0aCA+IDEwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai50Ym9keS5yZW1vdmVDaGlsZChvYmoudGJvZHkubGFzdENoaWxkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXN0ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGVzdDtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBvYmoubG9hZERvd24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gU2VhcmNoXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5zZWFyY2ggPT0gdHJ1ZSAmJiBvYmoucmVzdWx0cykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBvYmoucmVzdWx0cztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gb2JqLnJvd3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHRlc3QgPSAwO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAxMDApIHtcclxuICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgbGFzdCBlbGVtZW50IGluIHRoZSBwYWdlXHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHBhcnNlSW50KG9iai50Ym9keS5sYXN0Q2hpbGQuZ2V0QXR0cmlidXRlKCdkYXRhLXknKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuc2VhcmNoID09IHRydWUgJiYgb2JqLnJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtID0gcmVzdWx0cy5pbmRleE9mKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0gPCBvYmoucm93cy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPD0gMzA7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSA8IHJlc3VsdHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuc2VhcmNoID09IHRydWUgJiYgb2JqLnJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoudGJvZHkuYXBwZW5kQ2hpbGQob2JqLnJvd3NbcmVzdWx0c1tpdGVtXV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoudGJvZHkuYXBwZW5kQ2hpbGQob2JqLnJvd3NbaXRlbV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai50Ym9keS5jaGlsZHJlbi5sZW5ndGggPiAxMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoudGJvZHkucmVtb3ZlQ2hpbGQob2JqLnRib2R5LmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlc3QgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtICsgMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gdGVzdDtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBvYmoubG9hZFZhbGlkYXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKG9iai5zZWxlY3RlZENlbGwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50UGFnZSA9IHBhcnNlSW50KG9iai50Ym9keS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgnZGF0YS15JykpIC8gMTAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkUGFnZSA9IHBhcnNlSW50KG9iai5zZWxlY3RlZENlbGxbM10gLyAxMDApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvdGFsUGFnZXMgPSBwYXJzZUludChvYmoucm93cy5sZW5ndGggLyAxMDApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBhZ2UgIT0gc2VsZWN0ZWRQYWdlICYmIHNlbGVjdGVkUGFnZSA8PSB0b3RhbFBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChvYmoudGJvZHkuY2hpbGRyZW4sIG9iai5yb3dzW29iai5zZWxlY3RlZENlbGxbM11dKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoubG9hZFBhZ2Uoc2VsZWN0ZWRQYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlc2V0IHNlYXJjaFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5yZXNldFNlYXJjaCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBvYmouc2VhcmNoSW5wdXQudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgb2JqLnNlYXJjaCgnJyk7XHJcbiAgICAgICAgICAgIG9iai5yZXN1bHRzID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNlYXJjaFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5zZWFyY2ggPSBmdW5jdGlvbihxdWVyeSkge1xyXG4gICAgICAgICAgICAvLyBRdWVyeVxyXG4gICAgICAgICAgICBpZiAocXVlcnkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBxdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXNldCBhbnkgZmlsdGVyXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5maWx0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoucmVzZXRGaWx0ZXJzKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFJlc2V0IHNlbGVjdGlvblxyXG4gICAgICAgICAgICBvYmoucmVzZXRTZWxlY3Rpb24oKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBUb3RhbCBvZiByZXN1bHRzXHJcbiAgICAgICAgICAgIG9iai5wYWdlTnVtYmVyID0gMDtcclxuICAgICAgICAgICAgb2JqLnJlc3VsdHMgPSBbXTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAocXVlcnkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNlYXJjaCBmaWx0ZXJcclxuICAgICAgICAgICAgICAgIHZhciBzZWFyY2ggPSBmdW5jdGlvbihpdGVtLCBxdWVyeSwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgnJytpdGVtW2ldKS50b0xvd2VyQ2FzZSgpLnNlYXJjaChxdWVyeSkgPj0gMCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCcnK29iai5yZWNvcmRzW2luZGV4XVtpXS5pbm5lckhUTUwpLnRvTG93ZXJDYXNlKCkuc2VhcmNoKHF1ZXJ5KSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFJlc3VsdFxyXG4gICAgICAgICAgICAgICAgdmFyIGFkZFRvUmVzdWx0ID0gZnVuY3Rpb24oaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmoucmVzdWx0cy5pbmRleE9mKGspID09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZXN1bHRzLnB1c2goayk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBGaWx0ZXJcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gb2JqLm9wdGlvbnMuZGF0YS5maWx0ZXIoZnVuY3Rpb24odiwgaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWFyY2godiwgcXVlcnksIGspKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1lcmdlZCByb3dzIGZvdW5kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb3dzID0gb2JqLmlzUm93TWVyZ2VkKGspO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSBqZXhjZWwuZ2V0SWRGcm9tQ29sdW1uTmFtZShyb3dzW2ldLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iai5vcHRpb25zLm1lcmdlQ2VsbHNbcm93c1tpXV1bMV07IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRUb1Jlc3VsdChyb3dbMV0raik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm9ybWFsIHJvdyBmb3VuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkVG9SZXN1bHQoayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb2JqLnJlc3VsdHMgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gb2JqLnVwZGF0ZVJlc3VsdCgpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIG9iai51cGRhdGVSZXN1bHQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHRvdGFsID0gMDtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBQYWdlIDFcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmxhenlMb2FkaW5nID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHRvdGFsID0gMTAwO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5vcHRpb25zLnBhZ2luYXRpb24gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbCA9IG9iai5vcHRpb25zLnBhZ2luYXRpb247XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLnJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbCA9IG9iai5yZXN1bHRzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWwgPSBvYmoucm93cy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXNldCBjdXJyZW50IG5vZGVzXHJcbiAgICAgICAgICAgIHdoaWxlIChvYmoudGJvZHkuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgICAgICAgb2JqLnRib2R5LnJlbW92ZUNoaWxkKG9iai50Ym9keS5maXJzdENoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEhpZGUgYWxsIHJlY29yZHMgZnJvbSB0aGUgdGFibGVcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvYmoucm93cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEgb2JqLnJlc3VsdHMgfHwgb2JqLnJlc3VsdHMuaW5kZXhPZihqKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgdG90YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnRib2R5LmFwcGVuZENoaWxkKG9iai5yb3dzW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJvd3Nbal0uc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoucm93c1tqXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gVXBkYXRlIHBhZ2luYXRpb25cclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnBhZ2luYXRpb24gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoudXBkYXRlUGFnaW5hdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvYmoudXBkYXRlQ29ybmVyUG9zaXRpb24oKTtcclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gdG90YWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBXaGljaCBwYWdlIHRoZSBjZWxsIGlzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLndoaWNoUGFnZSA9IGZ1bmN0aW9uKGNlbGwpIHtcclxuICAgICAgICAgICAgLy8gU2VhcmNoXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5zZWFyY2ggPT0gdHJ1ZSAmJiBvYmoucmVzdWx0cykge1xyXG4gICAgICAgICAgICAgICAgY2VsbCA9IG9iai5yZXN1bHRzLmluZGV4T2YoY2VsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gKE1hdGguY2VpbCgocGFyc2VJbnQoY2VsbCkgKyAxKSAvIHBhcnNlSW50KG9iai5vcHRpb25zLnBhZ2luYXRpb24pKSkgLSAxO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdvIHRvIHBhZ2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmoucGFnZSA9IGZ1bmN0aW9uKHBhZ2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgdmFyIG9sZFBhZ2UgPSBvYmoucGFnZU51bWJlcjtcclxuXHJcbiAgICAgICAgICAgIC8vIFNlYXJjaFxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuc2VhcmNoID09IHRydWUgJiYgb2JqLnJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gb2JqLnJlc3VsdHM7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IG9iai5yb3dzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUGVyIHBhZ2VcclxuICAgICAgICAgICAgdmFyIHF1YW50aXR5UGVyUGFnZSA9IHBhcnNlSW50KG9iai5vcHRpb25zLnBhZ2luYXRpb24pO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIHBhZ2VOdW1iZXJcclxuICAgICAgICAgICAgaWYgKHBhZ2VOdW1iZXIgPT0gbnVsbCB8fCBwYWdlTnVtYmVyID09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBMYXN0IHBhZ2VcclxuICAgICAgICAgICAgICAgIHBhZ2VOdW1iZXIgPSBNYXRoLmNlaWwocmVzdWx0cy5sZW5ndGggLyBxdWFudGl0eVBlclBhZ2UpIC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFBhZ2UgbnVtYmVyXHJcbiAgICAgICAgICAgIG9iai5wYWdlTnVtYmVyID0gcGFnZU51bWJlcjtcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgc3RhcnRSb3cgPSAocGFnZU51bWJlciAqIHF1YW50aXR5UGVyUGFnZSk7XHJcbiAgICAgICAgICAgIHZhciBmaW5hbFJvdyA9IChwYWdlTnVtYmVyICogcXVhbnRpdHlQZXJQYWdlKSArIHF1YW50aXR5UGVyUGFnZTtcclxuICAgICAgICAgICAgaWYgKGZpbmFsUm93ID4gcmVzdWx0cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGZpbmFsUm93ID0gcmVzdWx0cy5sZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHN0YXJ0Um93IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRSb3cgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmVzZXQgY29udGFpbmVyXHJcbiAgICAgICAgICAgIHdoaWxlIChvYmoudGJvZHkuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgICAgICAgb2JqLnRib2R5LnJlbW92ZUNoaWxkKG9iai50Ym9keS5maXJzdENoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEFwcGVkaW5nIGl0ZW1zXHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBzdGFydFJvdzsgaiA8IGZpbmFsUm93OyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5zZWFyY2ggPT0gdHJ1ZSAmJiBvYmoucmVzdWx0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai50Ym9keS5hcHBlbmRDaGlsZChvYmoucm93c1tyZXN1bHRzW2pdXSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai50Ym9keS5hcHBlbmRDaGlsZChvYmoucm93c1tqXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMucGFnaW5hdGlvbiA+IDApIHtcclxuICAgICAgICAgICAgICAgIG9iai51cGRhdGVQYWdpbmF0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgY29ybmVyIHBvc2l0aW9uXHJcbiAgICAgICAgICAgIG9iai51cGRhdGVDb3JuZXJQb3NpdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgLy8gRXZlbnRzXHJcbiAgICAgICAgICAgIG9iai5kaXNwYXRjaCgnb25jaGFuZ2VwYWdlJywgZWwsIHBhZ2VOdW1iZXIsIG9sZFBhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSB0aGUgcGFnaW5hdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai51cGRhdGVQYWdpbmF0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIFJlc2V0IGNvbnRhaW5lclxyXG4gICAgICAgICAgICBvYmoucGFnaW5hdGlvbi5jaGlsZHJlblswXS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgb2JqLnBhZ2luYXRpb24uY2hpbGRyZW5bMV0uaW5uZXJIVE1MID0gJyc7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gU3RhcnQgcGFnaW5hdGlvblxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMucGFnaW5hdGlvbikge1xyXG4gICAgICAgICAgICAgICAgLy8gU2VhcmNoYWJsZVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnNlYXJjaCA9PSB0cnVlICYmIG9iai5yZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBvYmoucmVzdWx0cy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gb2JqLnJvd3MubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoISByZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTm8gcmVjb3JkcyBmb3VuZFxyXG4gICAgICAgICAgICAgICAgICAgIG9iai5wYWdpbmF0aW9uLmNoaWxkcmVuWzBdLmlubmVySFRNTCA9IG9iai5vcHRpb25zLnRleHQubm9SZWNvcmRzRm91bmQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFBhZ2luYXRpb24gY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHF1YW50eU9mUGFnZXMgPSBNYXRoLmNlaWwocmVzdWx0cyAvIG9iai5vcHRpb25zLnBhZ2luYXRpb24pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5wYWdlTnVtYmVyIDwgNikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnROdW1iZXIgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmluYWxOdW1iZXIgPSBxdWFudHlPZlBhZ2VzIDwgMTAgPyBxdWFudHlPZlBhZ2VzIDogMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChxdWFudHlPZlBhZ2VzIC0gb2JqLnBhZ2VOdW1iZXIgPCA1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGFydE51bWJlciA9IHF1YW50eU9mUGFnZXMgLSA5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmluYWxOdW1iZXIgPSBxdWFudHlPZlBhZ2VzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnROdW1iZXIgPCAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydE51bWJlciA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnROdW1iZXIgPSBvYmoucGFnZU51bWJlciAtIDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaW5hbE51bWJlciA9IG9iai5wYWdlTnVtYmVyICsgNTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBGaXJzdFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydE51bWJlciA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhZ2luYXRpb25JdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb25JdGVtLmNsYXNzTmFtZSA9ICdqZXhjZWxfcGFnZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb25JdGVtLmlubmVySFRNTCA9ICc8JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbkl0ZW0udGl0bGUgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoucGFnaW5hdGlvbi5jaGlsZHJlblsxXS5hcHBlbmRDaGlsZChwYWdpbmF0aW9uSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHBhZ2UgbGlua3NcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnROdW1iZXI7IGkgPD0gZmluYWxOdW1iZXI7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFnaW5hdGlvbkl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbkl0ZW0uY2xhc3NOYW1lID0gJ2pleGNlbF9wYWdlJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbkl0ZW0uaW5uZXJIVE1MID0gaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnBhZ2luYXRpb24uY2hpbGRyZW5bMV0uYXBwZW5kQ2hpbGQocGFnaW5hdGlvbkl0ZW0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoucGFnZU51bWJlciA9PSAoaS0xKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbkl0ZW0uY2xhc3NMaXN0LmFkZCgnamV4Y2VsX3BhZ2Vfc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIExhc3RcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxOdW1iZXIgPCBxdWFudHlPZlBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYWdpbmF0aW9uSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uSXRlbS5jbGFzc05hbWUgPSAnamV4Y2VsX3BhZ2UnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uSXRlbS5pbm5lckhUTUwgPSAnPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb25JdGVtLnRpdGxlID0gcXVhbnR5T2ZQYWdlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnBhZ2luYXRpb24uY2hpbGRyZW5bMV0uYXBwZW5kQ2hpbGQocGFnaW5hdGlvbkl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRleHRcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybWF0ID0gZnVuY3Rpb24oZm9ybWF0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdC5yZXBsYWNlKC97KFxcZCspfS9nLCBmdW5jdGlvbihtYXRjaCwgbnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBhcmdzW251bWJlcl0gIT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYXJnc1tudW1iZXJdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1hdGNoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnBhZ2luYXRpb24uY2hpbGRyZW5bMF0uaW5uZXJIVE1MID0gZm9ybWF0KG9iai5vcHRpb25zLnRleHQuc2hvd2luZ1BhZ2UsIG9iai5wYWdlTnVtYmVyICsgMSwgcXVhbnR5T2ZQYWdlcylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERvd25sb2FkIENTViB0YWJsZVxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEByZXR1cm4gbnVsbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5kb3dubG9hZCA9IGZ1bmN0aW9uKGluY2x1ZGVIZWFkZXJzKSB7XHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5hbGxvd0V4cG9ydCA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXhwb3J0IG5vdCBhbGxvd2VkJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEYXRhXHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluY2x1ZGVIZWFkZXJzID09IHRydWUgfHwgb2JqLm9wdGlvbnMuaW5jbHVkZUhlYWRlcnNPbkRvd25sb2FkID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhICs9IG9iai5nZXRIZWFkZXJzKCkucmVwbGFjZSgvXFxzKy9nbSwnICcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgKz0gXCJcXHJcXG5cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgZGF0YVxyXG4gICAgICAgICAgICAgICAgZGF0YSArPSBvYmouY29weShmYWxzZSwgb2JqLm9wdGlvbnMuY3N2RGVsaW1pdGVyLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBEb3dubG9hZCBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtcIlxcdUZFRkZcIitkYXRhXSwge3R5cGU6ICd0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04Oyd9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJRSBDb21wYXRpYmlsaXR5XHJcbiAgICAgICAgICAgICAgICBpZiAod2luZG93Lm5hdmlnYXRvciAmJiB3aW5kb3cubmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IoYmxvYiwgb2JqLm9wdGlvbnMuY3N2RmlsZU5hbWUgKyAnLmNzdicpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBEb3dubG9hZCBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuICAgICAgICAgICAgICAgICAgICBwb20uaHJlZiA9IHVybDtcclxuICAgICAgICAgICAgICAgICAgICBwb20uc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIG9iai5vcHRpb25zLmNzdkZpbGVOYW1lICsgJy5jc3YnKTtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHBvbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9tLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9tLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocG9tKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEluaXRpYWxpemVzIGEgbmV3IGhpc3RvcnkgcmVjb3JkIGZvciB1bmRvL3JlZG9cclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcmV0dXJuIG51bGxcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouc2V0SGlzdG9yeSA9IGZ1bmN0aW9uKGNoYW5nZXMpIHtcclxuICAgICAgICAgICAgaWYgKG9iai5pZ25vcmVIaXN0b3J5ICE9IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIEluY3JlbWVudCBhbmQgZ2V0IHRoZSBjdXJyZW50IGhpc3RvcnkgaW5kZXhcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9ICsrb2JqLmhpc3RvcnlJbmRleDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gU2xpY2UgdGhlIGFycmF5IHRvIGRpc2NhcmQgdW5kb25lIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgIG9iai5oaXN0b3J5ID0gKG9iai5oaXN0b3J5ID0gb2JqLmhpc3Rvcnkuc2xpY2UoMCwgaW5kZXggKyAxKSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIEtlZXAgaGlzdG9yeVxyXG4gICAgICAgICAgICAgICAgb2JqLmhpc3RvcnlbaW5kZXhdID0gY2hhbmdlcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvcHkgbWV0aG9kXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHBhcmFtIGJvb2wgaGlnaGxpZ2h0ZWQgLSBHZXQgb25seSBoaWdobGlnaHRlZCBjZWxsc1xyXG4gICAgICAgICAqIEBwYXJhbSBkZWxpbWl0ZXIgLSBcXHQgZGVmYXVsdCB0byBrZWVwIGNvbXBhdGliaWxpdHkgd2l0aCBleGNlbFxyXG4gICAgICAgICAqIEByZXR1cm4gc3RyaW5nIHZhbHVlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLmNvcHkgPSBmdW5jdGlvbihoaWdobGlnaHRlZCwgZGVsaW1pdGVyLCByZXR1cm5EYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICghIGRlbGltaXRlcikge1xyXG4gICAgICAgICAgICAgICAgZGVsaW1pdGVyID0gXCJcXHRcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIENvbnRyb2xzXHJcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSBbXTtcclxuICAgICAgICAgICAgdmFyIGNvbCA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgY29sTGFiZWwgPSBbXTtcclxuICAgICAgICAgICAgdmFyIHJvdyA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgcm93TGFiZWwgPSBbXTtcclxuICAgICAgICAgICAgdmFyIHggPSBvYmoub3B0aW9ucy5kYXRhWzBdLmxlbmd0aFxyXG4gICAgICAgICAgICB2YXIgeSA9IG9iai5vcHRpb25zLmRhdGEubGVuZ3RoXHJcbiAgICAgICAgICAgIHZhciB0bXAgPSAnJztcclxuICAgICAgICAgICAgdmFyIGNvcHlIZWFkZXIgPSBvYmoub3B0aW9ucy5pbmNsdWRlSGVhZGVyc09uQ29weTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlc2V0IGNvbnRhaW5lclxyXG4gICAgICAgICAgICBvYmouc3R5bGUgPSBbXTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIHRoZSBjb2x1bW5zIHRvIGdldCB0aGUgZGF0YVxyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHk7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY29sID0gW107XHJcbiAgICAgICAgICAgICAgICBjb2xMYWJlbCA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGNlbGwgaXMgaGlnaGxpZ2h0ZWRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISBoaWdobGlnaHRlZCB8fCBvYmoucmVjb3Jkc1tqXVtpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZ2hsaWdodCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3B5SGVhZGVyID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlci5wdXNoKG9iai5oZWFkZXJzW2ldLmlubmVyVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmFsdWVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9iai5vcHRpb25zLmRhdGFbal1baV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5tYXRjaCAmJiAodmFsdWUubWF0Y2goLywvZykgfHwgdmFsdWUubWF0Y2goL1xcbi8pIHx8IHZhbHVlLm1hdGNoKC9cXFwiLykpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UobmV3IFJlZ0V4cCgnXCInLCAnZycpLCAnXCJcIicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAnXCInICsgdmFsdWUgKyAnXCInO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbC5wdXNoKHZhbHVlKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBMYWJlbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmNvbHVtbnNbaV0udHlwZSA9PSAnY2hlY2tib3gnIHx8IG9iai5vcHRpb25zLmNvbHVtbnNbaV0udHlwZSA9PSAncmFkaW8nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5zdHJpcEhUTUxPbkNvcHkgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IG9iai5yZWNvcmRzW2pdW2ldLmlubmVyVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gb2JqLnJlY29yZHNbal1baV0uaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhYmVsLm1hdGNoICYmIChsYWJlbC5tYXRjaCgvLC9nKSB8fCBsYWJlbC5tYXRjaCgvXFxuLykgfHwgbGFiZWwubWF0Y2goL1xcXCIvKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTY2FwZSBkb3VibGUgcXVvdGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSBsYWJlbC5yZXBsYWNlKG5ldyBSZWdFeHAoJ1wiJywgJ2cnKSwgJ1wiXCInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbCA9ICdcIicgKyBsYWJlbCArICdcIic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sTGFiZWwucHVzaChsYWJlbCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHN0eWxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9IG9iai5yZWNvcmRzW2pdW2ldLmdldEF0dHJpYnV0ZSgnc3R5bGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wID0gdG1wLnJlcGxhY2UoJ2Rpc3BsYXk6IG5vbmU7JywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmouc3R5bGUucHVzaCh0bXAgPyB0bXAgOiAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoY29sLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3B5SGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5wdXNoKGhlYWRlci5qb2luKGRlbGltaXRlcikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByb3cucHVzaChjb2wuam9pbihkZWxpbWl0ZXIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjb2xMYWJlbC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29weUhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dMYWJlbC5wdXNoKGhlYWRlci5qb2luKGRlbGltaXRlcikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByb3dMYWJlbC5wdXNoKGNvbExhYmVsLmpvaW4oZGVsaW1pdGVyKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb3B5SGVhZGVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEZpbmFsIHN0cmluZ1xyXG4gICAgICAgICAgICB2YXIgc3RyID0gcm93LmpvaW4oXCJcXHJcXG5cIik7XHJcbiAgICAgICAgICAgIHZhciBzdHJMYWJlbCA9IHJvd0xhYmVsLmpvaW4oXCJcXHJcXG5cIik7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBoaWRkZW4gdGV4dGFyZWEgdG8gY29weSB0aGUgdmFsdWVzXHJcbiAgICAgICAgICAgIGlmICghIHJldHVybkRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5jb3B5Q29tcGF0aWJpbGl0eSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnRleHRhcmVhLnZhbHVlID0gc3RyTGFiZWw7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai50ZXh0YXJlYS52YWx1ZSA9IHN0cjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9iai50ZXh0YXJlYS5zZWxlY3QoKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKFwiY29weVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEtlZXAgZGF0YVxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29weUNvbXBhdGliaWxpdHkgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgb2JqLmRhdGEgPSBzdHJMYWJlbDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9iai5kYXRhID0gc3RyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEtlZXAgbm9uIHZpc2libGUgaW5mb3JtYXRpb25cclxuICAgICAgICAgICAgb2JqLmhhc2hTdHJpbmcgPSBvYmouaGFzaChvYmouZGF0YSk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQW55IGV4aXRpbmcgYm9yZGVyIHNob3VsZCBnb1xyXG4gICAgICAgICAgICBvYmoucmVtb3ZlQ29weWluZ1NlbGVjdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgLy8gQm9yZGVyXHJcbiAgICAgICAgICAgIGlmIChvYmouaGlnaGxpZ2h0ZWQpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmhpZ2hsaWdodGVkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmhpZ2hsaWdodGVkW2ldLmNsYXNzTGlzdC5hZGQoJ2NvcHlpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmhpZ2hsaWdodGVkW2ldLmNsYXNzTGlzdC5jb250YWlucygnaGlnaGxpZ2h0LWxlZnQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmouaGlnaGxpZ2h0ZWRbaV0uY2xhc3NMaXN0LmFkZCgnY29weWluZy1sZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmouaGlnaGxpZ2h0ZWRbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWdobGlnaHQtcmlnaHQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmouaGlnaGxpZ2h0ZWRbaV0uY2xhc3NMaXN0LmFkZCgnY29weWluZy1yaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmhpZ2hsaWdodGVkW2ldLmNsYXNzTGlzdC5jb250YWlucygnaGlnaGxpZ2h0LXRvcCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5oaWdobGlnaHRlZFtpXS5jbGFzc0xpc3QuYWRkKCdjb3B5aW5nLXRvcCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmhpZ2hsaWdodGVkW2ldLmNsYXNzTGlzdC5jb250YWlucygnaGlnaGxpZ2h0LWJvdHRvbScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5oaWdobGlnaHRlZFtpXS5jbGFzc0xpc3QuYWRkKCdjb3B5aW5nLWJvdHRvbScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUGFzdGUgZXZlbnRcclxuICAgICAgICAgICAgb2JqLmRpc3BhdGNoKCdvbmNvcHknLCBlbCwgb2JqLm9wdGlvbnMuY29weUNvbXBhdGliaWxpdHkgPT0gdHJ1ZSA/IHJvd0xhYmVsIDogcm93LCBvYmouaGFzaFN0cmluZyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gb2JqLmRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogakV4Y2VsIHBhc3RlIG1ldGhvZFxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSBpbnRlZ2VyIHJvdyBudW1iZXJcclxuICAgICAgICAgKiBAcmV0dXJuIHN0cmluZyB2YWx1ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5wYXN0ZSA9IGZ1bmN0aW9uKHgsIHksIGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gUGFzdGUgZmlsdGVyXHJcbiAgICAgICAgICAgIHZhciByZXQgPSBvYmouZGlzcGF0Y2goJ29uYmVmb3JlcGFzdGUnLCBlbCwgZGF0YSwgeCwgeSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmV0ID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJldCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDb250cm9sc1xyXG4gICAgICAgICAgICB2YXIgaGFzaCA9IG9iai5oYXNoKGRhdGEpO1xyXG4gICAgICAgICAgICB2YXIgc3R5bGUgPSAoaGFzaCA9PSBvYmouaGFzaFN0cmluZykgPyBvYmouc3R5bGUgOiBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIERlcGVuZGluZyBvbiB0aGUgYmVoYXZpb3JcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmNvcHlDb21wYXRpYmlsaXR5ID09IHRydWUgJiYgaGFzaCA9PSBvYmouaGFzaFN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBvYmouZGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFNwbGl0IG5ldyBsaW5lXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gb2JqLnBhcnNlQ1NWKGRhdGEsIFwiXFx0XCIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh4ICE9IG51bGwgJiYgeSAhPSBudWxsICYmIGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlY29yZHNcclxuICAgICAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciBqID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciByZWNvcmRzID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3U3R5bGUgPSB7fTtcclxuICAgICAgICAgICAgICAgIHZhciBvbGRTdHlsZSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0eWxlSW5kZXggPSAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBJbmRleFxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbEluZGV4ID0gcGFyc2VJbnQoeCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcm93SW5kZXggPSBwYXJzZUludCh5KTtcclxuICAgICAgICAgICAgICAgIHZhciByb3cgPSBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBHbyB0aHJvdWdoIHRoZSBjb2x1bW5zIHRvIGdldCB0aGUgZGF0YVxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHJvdyA9IGRhdGFbal0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBjb2xJbmRleCA9IHBhcnNlSW50KHgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJvd1tpXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBhbmQga2VlcCBoaXN0b3J5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWNvcmQgPSBvYmoudXBkYXRlQ2VsbChjb2xJbmRleCwgcm93SW5kZXgsIHJvd1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgaGlzdG9yeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzLnB1c2gocmVjb3JkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGFsbCBmb3JtdWxhcyBpbiB0aGUgY2hhaW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnVwZGF0ZUZvcm11bGFDaGFpbihjb2xJbmRleCwgcm93SW5kZXgsIHJlY29yZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTdHlsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGUgJiYgc3R5bGVbc3R5bGVJbmRleF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2x1bW5OYW1lID0gamV4Y2VsLmdldENvbHVtbk5hbWVGcm9tSWQoW2NvbEluZGV4LCByb3dJbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3R5bGVbY29sdW1uTmFtZV0gPSBzdHlsZVtzdHlsZUluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFN0eWxlW2NvbHVtbk5hbWVdID0gb2JqLmdldFN0eWxlKGNvbHVtbk5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbcm93SW5kZXhdW2NvbEluZGV4XS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgc3R5bGVbc3R5bGVJbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVJbmRleCsrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93W2ldICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2xJbmRleCA+PSBvYmouaGVhZGVycy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmluc2VydENvbHVtbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sSW5kZXggPSBvYmoucmlnaHQuZ2V0KGNvbEluZGV4LCByb3dJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBqKys7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbal0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd0luZGV4ID49IG9iai5yb3dzLmxlbmd0aC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouaW5zZXJ0Um93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93SW5kZXggPSBvYmouZG93bi5nZXQoeCwgcm93SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gU2VsZWN0IHRoZSBuZXcgY2VsbHNcclxuICAgICAgICAgICAgICAgIG9iai51cGRhdGVTZWxlY3Rpb25Gcm9tQ29vcmRzKHgsIHksIGNvbEluZGV4LCByb3dJbmRleCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBoaXN0b3J5XHJcbiAgICAgICAgICAgICAgICBvYmouc2V0SGlzdG9yeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOidzZXRWYWx1ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkczpyZWNvcmRzLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbjpvYmouc2VsZWN0ZWRDZWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1N0eWxlOm5ld1N0eWxlLFxyXG4gICAgICAgICAgICAgICAgICAgIG9sZFN0eWxlOm9sZFN0eWxlLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0YWJsZVxyXG4gICAgICAgICAgICAgICAgb2JqLnVwZGF0ZVRhYmxlKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFBhc3RlIGV2ZW50XHJcbiAgICAgICAgICAgICAgICBvYmouZGlzcGF0Y2goJ29ucGFzdGUnLCBlbCwgZGF0YSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIE9uIGFmdGVyIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgIG9iai5vbmFmdGVyY2hhbmdlcyhlbCwgcmVjb3Jkcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG9iai5yZW1vdmVDb3B5aW5nU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZW1vdmUgY29weWluZyBib3JkZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmoucmVtb3ZlQ29weWluZ1NlbGVjdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgY29weWluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qZXhjZWwgLmNvcHlpbmcnKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3B5aW5nLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb3B5aW5nW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2NvcHlpbmcnKTtcclxuICAgICAgICAgICAgICAgIGNvcHlpbmdbaV0uY2xhc3NMaXN0LnJlbW92ZSgnY29weWluZy1sZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICBjb3B5aW5nW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2NvcHlpbmctcmlnaHQnKTtcclxuICAgICAgICAgICAgICAgIGNvcHlpbmdbaV0uY2xhc3NMaXN0LnJlbW92ZSgnY29weWluZy10b3AnKTtcclxuICAgICAgICAgICAgICAgIGNvcHlpbmdbaV0uY2xhc3NMaXN0LnJlbW92ZSgnY29weWluZy1ib3R0b20nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUHJvY2VzcyByb3dcclxuICAgICAgICAgKi9cclxuICAgICAgICBvYmouaGlzdG9yeVByb2Nlc3NSb3cgPSBmdW5jdGlvbih0eXBlLCBoaXN0b3J5UmVjb3JkKSB7XHJcbiAgICAgICAgICAgIHZhciByb3dJbmRleCA9ICghIGhpc3RvcnlSZWNvcmQuaW5zZXJ0QmVmb3JlKSA/IGhpc3RvcnlSZWNvcmQucm93TnVtYmVyICsgMSA6IGhpc3RvcnlSZWNvcmQucm93TnVtYmVyO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5zZWFyY2ggPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5yZXN1bHRzICYmIG9iai5yZXN1bHRzLmxlbmd0aCAhPSBvYmoucm93cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoucmVzZXRTZWFyY2goKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSByb3dcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG51bU9mUm93cyA9IGhpc3RvcnlSZWNvcmQubnVtT2ZSb3dzO1xyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIG5vZGVzXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gcm93SW5kZXg7IGogPCAobnVtT2ZSb3dzICsgcm93SW5kZXgpOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoucm93c1tqXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iai5yb3dzW2pdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSByZWZlcmVuY2VzXHJcbiAgICAgICAgICAgICAgICBvYmoucmVjb3Jkcy5zcGxpY2Uocm93SW5kZXgsIG51bU9mUm93cyk7XHJcbiAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhLnNwbGljZShyb3dJbmRleCwgbnVtT2ZSb3dzKTtcclxuICAgICAgICAgICAgICAgIG9iai5yb3dzLnNwbGljZShyb3dJbmRleCwgbnVtT2ZSb3dzKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgb2JqLmNvbmRpdGlvbmFsU2VsZWN0aW9uVXBkYXRlKDEsIHJvd0luZGV4LCAobnVtT2ZSb3dzICsgcm93SW5kZXgpIC0gMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgZGF0YVxyXG4gICAgICAgICAgICAgICAgb2JqLnJlY29yZHMgPSBqZXhjZWwuaW5qZWN0QXJyYXkob2JqLnJlY29yZHMsIHJvd0luZGV4LCBoaXN0b3J5UmVjb3JkLnJvd1JlY29yZHMpO1xyXG4gICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuZGF0YSA9IGpleGNlbC5pbmplY3RBcnJheShvYmoub3B0aW9ucy5kYXRhLCByb3dJbmRleCwgaGlzdG9yeVJlY29yZC5yb3dEYXRhKTtcclxuICAgICAgICAgICAgICAgIG9iai5yb3dzID0gamV4Y2VsLmluamVjdEFycmF5KG9iai5yb3dzLCByb3dJbmRleCwgaGlzdG9yeVJlY29yZC5yb3dOb2RlKTtcclxuICAgICAgICAgICAgICAgIC8vIEluc2VydCBub2Rlc1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMFxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IHJvd0luZGV4OyBqIDwgKGhpc3RvcnlSZWNvcmQubnVtT2ZSb3dzICsgcm93SW5kZXgpOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoudGJvZHkuaW5zZXJ0QmVmb3JlKGhpc3RvcnlSZWNvcmQucm93Tm9kZVtpbmRleF0sIG9iai50Ym9keS5jaGlsZHJlbltqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJlc3BlY3QgcGFnaW5hdGlvblxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMucGFnaW5hdGlvbiA+IDApIHtcclxuICAgICAgICAgICAgICAgIG9iai5wYWdlKG9iai5wYWdlTnVtYmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIG9iai51cGRhdGVUYWJsZVJlZmVyZW5jZXMoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9jZXNzIGNvbHVtblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5oaXN0b3J5UHJvY2Vzc0NvbHVtbiA9IGZ1bmN0aW9uKHR5cGUsIGhpc3RvcnlSZWNvcmQpIHtcclxuICAgICAgICAgICAgdmFyIGNvbHVtbkluZGV4ID0gKCEgaGlzdG9yeVJlY29yZC5pbnNlcnRCZWZvcmUpID8gaGlzdG9yeVJlY29yZC5jb2x1bW5OdW1iZXIgKyAxIDogaGlzdG9yeVJlY29yZC5jb2x1bW5OdW1iZXI7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIGNvbHVtblxyXG4gICAgICAgICAgICBpZiAodHlwZSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbnVtT2ZDb2x1bW5zID0gaGlzdG9yeVJlY29yZC5udW1PZkNvbHVtbnM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmNvbHVtbnMuc3BsaWNlKGNvbHVtbkluZGV4LCBudW1PZkNvbHVtbnMpO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGNvbHVtbkluZGV4OyBpIDwgKG51bU9mQ29sdW1ucyArIGNvbHVtbkluZGV4KTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmhlYWRlcnNbaV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmouaGVhZGVyc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmNvbGdyb3VwW2ldLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqLmNvbGdyb3VwW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9iai5oZWFkZXJzLnNwbGljZShjb2x1bW5JbmRleCwgbnVtT2ZDb2x1bW5zKTtcclxuICAgICAgICAgICAgICAgIG9iai5jb2xncm91cC5zcGxpY2UoY29sdW1uSW5kZXgsIG51bU9mQ29sdW1ucyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGhpc3RvcnlSZWNvcmQuZGF0YS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBjb2x1bW5JbmRleDsgaSA8IChudW1PZkNvbHVtbnMgKyBjb2x1bW5JbmRleCk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoucmVjb3Jkc1tqXVtpXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iai5yZWNvcmRzW2pdW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbal0uc3BsaWNlKGNvbHVtbkluZGV4LCBudW1PZkNvbHVtbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmRhdGFbal0uc3BsaWNlKGNvbHVtbkluZGV4LCBudW1PZkNvbHVtbnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gUHJvY2VzcyBmb290ZXJzXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuZm9vdGVycykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JqLm9wdGlvbnMuZm9vdGVycy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5mb290ZXJzW2pdLnNwbGljZShjb2x1bW5JbmRleCwgbnVtT2ZDb2x1bW5zKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgZGF0YVxyXG4gICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuY29sdW1ucyA9IGpleGNlbC5pbmplY3RBcnJheShvYmoub3B0aW9ucy5jb2x1bW5zLCBjb2x1bW5JbmRleCwgaGlzdG9yeVJlY29yZC5jb2x1bW5zKTtcclxuICAgICAgICAgICAgICAgIG9iai5oZWFkZXJzID0gamV4Y2VsLmluamVjdEFycmF5KG9iai5oZWFkZXJzLCBjb2x1bW5JbmRleCwgaGlzdG9yeVJlY29yZC5oZWFkZXJzKTtcclxuICAgICAgICAgICAgICAgIG9iai5jb2xncm91cCA9IGpleGNlbC5pbmplY3RBcnJheShvYmouY29sZ3JvdXAsIGNvbHVtbkluZGV4LCBoaXN0b3J5UmVjb3JkLmNvbGdyb3VwKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMFxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGNvbHVtbkluZGV4OyBpIDwgKGhpc3RvcnlSZWNvcmQubnVtT2ZDb2x1bW5zICsgY29sdW1uSW5kZXgpOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouaGVhZGVyQ29udGFpbmVyLmluc2VydEJlZm9yZShoaXN0b3J5UmVjb3JkLmhlYWRlcnNbaW5kZXhdLCBvYmouaGVhZGVyQ29udGFpbmVyLmNoaWxkcmVuW2krMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5jb2xncm91cENvbnRhaW5lci5pbnNlcnRCZWZvcmUoaGlzdG9yeVJlY29yZC5jb2xncm91cFtpbmRleF0sIG9iai5jb2xncm91cENvbnRhaW5lci5jaGlsZHJlbltpKzFdKTtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGhpc3RvcnlSZWNvcmQuZGF0YS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmRhdGFbal0gPSBqZXhjZWwuaW5qZWN0QXJyYXkob2JqLm9wdGlvbnMuZGF0YVtqXSwgY29sdW1uSW5kZXgsIGhpc3RvcnlSZWNvcmQuZGF0YVtqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbal0gPSBqZXhjZWwuaW5qZWN0QXJyYXkob2JqLnJlY29yZHNbal0sIGNvbHVtbkluZGV4LCBoaXN0b3J5UmVjb3JkLnJlY29yZHNbal0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IDBcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gY29sdW1uSW5kZXg7IGkgPCAoaGlzdG9yeVJlY29yZC5udW1PZkNvbHVtbnMgKyBjb2x1bW5JbmRleCk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoucm93c1tqXS5pbnNlcnRCZWZvcmUoaGlzdG9yeVJlY29yZC5yZWNvcmRzW2pdW2luZGV4XSwgb2JqLnJvd3Nbal0uY2hpbGRyZW5baSsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gUHJvY2VzcyBmb290ZXJzXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuZm9vdGVycykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JqLm9wdGlvbnMuZm9vdGVycy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5mb290ZXJzW2pdID0gamV4Y2VsLmluamVjdEFycmF5KG9iai5vcHRpb25zLmZvb3RlcnNbal0sIGNvbHVtbkluZGV4LCBoaXN0b3J5UmVjb3JkLmZvb3RlcnNbal0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEFkanVzdCBuZXN0ZWQgaGVhZGVyc1xyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMubmVzdGVkSGVhZGVycyAmJiBvYmoub3B0aW9ucy5uZXN0ZWRIZWFkZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIEZsZXhpYmxlIHdheSB0byBoYW5kbGUgbmVzdGVkaGVhZGVyc1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLm5lc3RlZEhlYWRlcnNbMF0gJiYgb2JqLm9wdGlvbnMubmVzdGVkSGVhZGVyc1swXVswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JqLm9wdGlvbnMubmVzdGVkSGVhZGVycy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sc3BhbiA9IHBhcnNlSW50KG9iai5vcHRpb25zLm5lc3RlZEhlYWRlcnNbal1bb2JqLm9wdGlvbnMubmVzdGVkSGVhZGVyc1tqXS5sZW5ndGgtMV0uY29sc3BhbikgLSBoaXN0b3J5UmVjb3JkLm51bU9mQ29sdW1ucztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xzcGFuID0gcGFyc2VJbnQob2JqLm9wdGlvbnMubmVzdGVkSGVhZGVyc1tqXVtvYmoub3B0aW9ucy5uZXN0ZWRIZWFkZXJzW2pdLmxlbmd0aC0xXS5jb2xzcGFuKSArIGhpc3RvcnlSZWNvcmQubnVtT2ZDb2x1bW5zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm5lc3RlZEhlYWRlcnNbal1bb2JqLm9wdGlvbnMubmVzdGVkSGVhZGVyc1tqXS5sZW5ndGgtMV0uY29sc3BhbiA9IGNvbHNwYW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai50aGVhZC5jaGlsZHJlbltqXS5jaGlsZHJlbltvYmoudGhlYWQuY2hpbGRyZW5bal0uY2hpbGRyZW4ubGVuZ3RoLTFdLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGNvbHNwYW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sc3BhbiA9IHBhcnNlSW50KG9iai5vcHRpb25zLm5lc3RlZEhlYWRlcnNbMF0uY29sc3BhbikgLSBoaXN0b3J5UmVjb3JkLm51bU9mQ29sdW1ucztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sc3BhbiA9IHBhcnNlSW50KG9iai5vcHRpb25zLm5lc3RlZEhlYWRlcnNbMF0uY29sc3BhbikgKyBoaXN0b3J5UmVjb3JkLm51bU9mQ29sdW1ucztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMubmVzdGVkSGVhZGVyc1swXS5jb2xzcGFuID0gY29sc3BhbjtcclxuICAgICAgICAgICAgICAgICAgICBvYmoudGhlYWQuY2hpbGRyZW5bMF0uY2hpbGRyZW5bb2JqLnRoZWFkLmNoaWxkcmVuWzBdLmNoaWxkcmVuLmxlbmd0aC0xXS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBjb2xzcGFuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIG9iai51cGRhdGVUYWJsZVJlZmVyZW5jZXMoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVbmRvIGxhc3QgYWN0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnVuZG8gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gSWdub3JlIGV2ZW50cyBhbmQgaGlzdG9yeVxyXG4gICAgICAgICAgICB2YXIgaWdub3JlRXZlbnRzID0gb2JqLmlnbm9yZUV2ZW50cyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIGlnbm9yZUhpc3RvcnkgPSBvYmouaWdub3JlSGlzdG9yeSA/IHRydWUgOiBmYWxzZTtcclxuICAgIFxyXG4gICAgICAgICAgICBvYmouaWdub3JlRXZlbnRzID0gdHJ1ZTtcclxuICAgICAgICAgICAgb2JqLmlnbm9yZUhpc3RvcnkgPSB0cnVlO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJlY29yZHNcclxuICAgICAgICAgICAgdmFyIHJlY29yZHMgPSBbXTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgY2VsbHNcclxuICAgICAgICAgICAgaWYgKG9iai5oaXN0b3J5SW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gSGlzdG9yeVxyXG4gICAgICAgICAgICAgICAgdmFyIGhpc3RvcnlSZWNvcmQgPSBvYmouaGlzdG9yeVtvYmouaGlzdG9yeUluZGV4LS1dO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoaGlzdG9yeVJlY29yZC5hY3Rpb24gPT0gJ2luc2VydFJvdycpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouaGlzdG9yeVByb2Nlc3NSb3coMSwgaGlzdG9yeVJlY29yZCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhpc3RvcnlSZWNvcmQuYWN0aW9uID09ICdkZWxldGVSb3cnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmhpc3RvcnlQcm9jZXNzUm93KDAsIGhpc3RvcnlSZWNvcmQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoaXN0b3J5UmVjb3JkLmFjdGlvbiA9PSAnaW5zZXJ0Q29sdW1uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5oaXN0b3J5UHJvY2Vzc0NvbHVtbigxLCBoaXN0b3J5UmVjb3JkKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGlzdG9yeVJlY29yZC5hY3Rpb24gPT0gJ2RlbGV0ZUNvbHVtbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouaGlzdG9yeVByb2Nlc3NDb2x1bW4oMCwgaGlzdG9yeVJlY29yZCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhpc3RvcnlSZWNvcmQuYWN0aW9uID09ICdtb3ZlUm93Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5tb3ZlUm93KGhpc3RvcnlSZWNvcmQubmV3VmFsdWUsIGhpc3RvcnlSZWNvcmQub2xkVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoaXN0b3J5UmVjb3JkLmFjdGlvbiA9PSAnbW92ZUNvbHVtbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoubW92ZUNvbHVtbihoaXN0b3J5UmVjb3JkLm5ld1ZhbHVlLCBoaXN0b3J5UmVjb3JkLm9sZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGlzdG9yeVJlY29yZC5hY3Rpb24gPT0gJ3NldE1lcmdlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5yZW1vdmVNZXJnZShoaXN0b3J5UmVjb3JkLmNvbHVtbiwgaGlzdG9yeVJlY29yZC5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGlzdG9yeVJlY29yZC5hY3Rpb24gPT0gJ3NldFN0eWxlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5zZXRTdHlsZShoaXN0b3J5UmVjb3JkLm9sZFZhbHVlLCBudWxsLCBudWxsLCAxKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGlzdG9yeVJlY29yZC5hY3Rpb24gPT0gJ3NldFdpZHRoJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5zZXRXaWR0aChoaXN0b3J5UmVjb3JkLmNvbHVtbiwgaGlzdG9yeVJlY29yZC5vbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhpc3RvcnlSZWNvcmQuYWN0aW9uID09ICdzZXRIZWlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnNldEhlaWdodChoaXN0b3J5UmVjb3JkLnJvdywgaGlzdG9yeVJlY29yZC5vbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhpc3RvcnlSZWNvcmQuYWN0aW9uID09ICdzZXRIZWFkZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnNldEhlYWRlcihoaXN0b3J5UmVjb3JkLmNvbHVtbiwgaGlzdG9yeVJlY29yZC5vbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhpc3RvcnlSZWNvcmQuYWN0aW9uID09ICdzZXRDb21tZW50cycpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouc2V0Q29tbWVudHMoaGlzdG9yeVJlY29yZC5jb2x1bW4sIGhpc3RvcnlSZWNvcmQub2xkVmFsdWVbMF0sIGhpc3RvcnlSZWNvcmQub2xkVmFsdWVbMV0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoaXN0b3J5UmVjb3JkLmFjdGlvbiA9PSAnb3JkZXJCeScpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaGlzdG9yeVJlY29yZC5yb3dzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NbaGlzdG9yeVJlY29yZC5yb3dzW2pdXSA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG9iai51cGRhdGVPcmRlckFycm93KGhpc3RvcnlSZWNvcmQuY29sdW1uLCBoaXN0b3J5UmVjb3JkLm9yZGVyID8gMCA6IDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai51cGRhdGVPcmRlcihyb3dzKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGlzdG9yeVJlY29yZC5hY3Rpb24gPT0gJ3NldFZhbHVlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlZG8gZm9yIGNoYW5nZXMgaW4gY2VsbHNcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhpc3RvcnlSZWNvcmQucmVjb3Jkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogaGlzdG9yeVJlY29yZC5yZWNvcmRzW2ldLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBoaXN0b3J5UmVjb3JkLnJlY29yZHNbaV0ueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlOiBoaXN0b3J5UmVjb3JkLnJlY29yZHNbaV0ub2xkVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhpc3RvcnlSZWNvcmQub2xkU3R5bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZXNldFN0eWxlKGhpc3RvcnlSZWNvcmQub2xkU3R5bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSByZWNvcmRzXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnNldFZhbHVlKHJlY29yZHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhpc3RvcnlSZWNvcmQuc2VsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai51cGRhdGVTZWxlY3Rpb25Gcm9tQ29vcmRzKGhpc3RvcnlSZWNvcmQuc2VsZWN0aW9uWzBdLCBoaXN0b3J5UmVjb3JkLnNlbGVjdGlvblsxXSwgaGlzdG9yeVJlY29yZC5zZWxlY3Rpb25bMl0sIGhpc3RvcnlSZWNvcmQuc2VsZWN0aW9uWzNdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb2JqLmlnbm9yZUV2ZW50cyA9IGlnbm9yZUV2ZW50cztcclxuICAgICAgICAgICAgb2JqLmlnbm9yZUhpc3RvcnkgPSBpZ25vcmVIaXN0b3J5O1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEV2ZW50c1xyXG4gICAgICAgICAgICBvYmouZGlzcGF0Y2goJ29udW5kbycsIGVsLCBoaXN0b3J5UmVjb3JkKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWRvIHByZXZpb3VzbHkgdW5kb25lIGFjdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9iai5yZWRvID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIElnbm9yZSBldmVudHMgYW5kIGhpc3RvcnlcclxuICAgICAgICAgICAgdmFyIGlnbm9yZUV2ZW50cyA9IG9iai5pZ25vcmVFdmVudHMgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBpZ25vcmVIaXN0b3J5ID0gb2JqLmlnbm9yZUhpc3RvcnkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgb2JqLmlnbm9yZUV2ZW50cyA9IHRydWU7XHJcbiAgICAgICAgICAgIG9iai5pZ25vcmVIaXN0b3J5ID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZWNvcmRzXHJcbiAgICAgICAgICAgIHZhciByZWNvcmRzID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gVXBkYXRlIGNlbGxzXHJcbiAgICAgICAgICAgIGlmIChvYmouaGlzdG9yeUluZGV4IDwgb2JqLmhpc3RvcnkubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSGlzdG9yeVxyXG4gICAgICAgICAgICAgICAgdmFyIGhpc3RvcnlSZWNvcmQgPSBvYmouaGlzdG9yeVsrK29iai5oaXN0b3J5SW5kZXhdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoaGlzdG9yeVJlY29yZC5hY3Rpb24gPT0gJ2luc2VydFJvdycpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouaGlzdG9yeVByb2Nlc3NSb3coMCwgaGlzdG9yeVJlY29yZCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhpc3RvcnlSZWNvcmQuYWN0aW9uID09ICdkZWxldGVSb3cnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmhpc3RvcnlQcm9jZXNzUm93KDEsIGhpc3RvcnlSZWNvcmQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoaXN0b3J5UmVjb3JkLmFjdGlvbiA9PSAnaW5zZXJ0Q29sdW1uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5oaXN0b3J5UHJvY2Vzc0NvbHVtbigwLCBoaXN0b3J5UmVjb3JkKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGlzdG9yeVJlY29yZC5hY3Rpb24gPT0gJ2RlbGV0ZUNvbHVtbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouaGlzdG9yeVByb2Nlc3NDb2x1bW4oMSwgaGlzdG9yeVJlY29yZCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhpc3RvcnlSZWNvcmQuYWN0aW9uID09ICdtb3ZlUm93Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5tb3ZlUm93KGhpc3RvcnlSZWNvcmQub2xkVmFsdWUsIGhpc3RvcnlSZWNvcmQubmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoaXN0b3J5UmVjb3JkLmFjdGlvbiA9PSAnbW92ZUNvbHVtbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoubW92ZUNvbHVtbihoaXN0b3J5UmVjb3JkLm9sZFZhbHVlLCBoaXN0b3J5UmVjb3JkLm5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGlzdG9yeVJlY29yZC5hY3Rpb24gPT0gJ3NldE1lcmdlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5zZXRNZXJnZShoaXN0b3J5UmVjb3JkLmNvbHVtbiwgaGlzdG9yeVJlY29yZC5jb2xzcGFuLCBoaXN0b3J5UmVjb3JkLnJvd3NwYW4sIDEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoaXN0b3J5UmVjb3JkLmFjdGlvbiA9PSAnc2V0U3R5bGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnNldFN0eWxlKGhpc3RvcnlSZWNvcmQubmV3VmFsdWUsIG51bGwsIG51bGwsIDEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoaXN0b3J5UmVjb3JkLmFjdGlvbiA9PSAnc2V0V2lkdGgnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnNldFdpZHRoKGhpc3RvcnlSZWNvcmQuY29sdW1uLCBoaXN0b3J5UmVjb3JkLm5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGlzdG9yeVJlY29yZC5hY3Rpb24gPT0gJ3NldEhlaWdodCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouc2V0SGVpZ2h0KGhpc3RvcnlSZWNvcmQucm93LCBoaXN0b3J5UmVjb3JkLm5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGlzdG9yeVJlY29yZC5hY3Rpb24gPT0gJ3NldEhlYWRlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouc2V0SGVhZGVyKGhpc3RvcnlSZWNvcmQuY29sdW1uLCBoaXN0b3J5UmVjb3JkLm5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGlzdG9yeVJlY29yZC5hY3Rpb24gPT0gJ3NldENvbW1lbnRzJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5zZXRDb21tZW50cyhoaXN0b3J5UmVjb3JkLmNvbHVtbiwgaGlzdG9yeVJlY29yZC5uZXdWYWx1ZVswXSwgaGlzdG9yeVJlY29yZC5uZXdWYWx1ZVsxXSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhpc3RvcnlSZWNvcmQuYWN0aW9uID09ICdvcmRlckJ5Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai51cGRhdGVPcmRlckFycm93KGhpc3RvcnlSZWNvcmQuY29sdW1uLCBoaXN0b3J5UmVjb3JkLm9yZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBvYmoudXBkYXRlT3JkZXIoaGlzdG9yeVJlY29yZC5yb3dzKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGlzdG9yeVJlY29yZC5hY3Rpb24gPT0gJ3NldFZhbHVlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5zZXRWYWx1ZShoaXN0b3J5UmVjb3JkLnJlY29yZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlZG8gZm9yIGNoYW5nZXMgaW4gY2VsbHNcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhpc3RvcnlSZWNvcmQucmVjb3Jkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGlzdG9yeVJlY29yZC5vbGRTdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlc2V0U3R5bGUoaGlzdG9yeVJlY29yZC5uZXdTdHlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoaXN0b3J5UmVjb3JkLnNlbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoudXBkYXRlU2VsZWN0aW9uRnJvbUNvb3JkcyhoaXN0b3J5UmVjb3JkLnNlbGVjdGlvblswXSwgaGlzdG9yeVJlY29yZC5zZWxlY3Rpb25bMV0sIGhpc3RvcnlSZWNvcmQuc2VsZWN0aW9uWzJdLCBoaXN0b3J5UmVjb3JkLnNlbGVjdGlvblszXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9iai5pZ25vcmVFdmVudHMgPSBpZ25vcmVFdmVudHM7XHJcbiAgICAgICAgICAgIG9iai5pZ25vcmVIaXN0b3J5ID0gaWdub3JlSGlzdG9yeTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBFdmVudHNcclxuICAgICAgICAgICAgb2JqLmRpc3BhdGNoKCdvbnJlZG8nLCBlbCwgaGlzdG9yeVJlY29yZCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IGRyb3Bkb3duIHZhbHVlIGZyb20ga2V5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLmdldERyb3BEb3duVmFsdWUgPSBmdW5jdGlvbihjb2x1bW4sIGtleSkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBbXTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uc1tjb2x1bW5dICYmIG9iai5vcHRpb25zLmNvbHVtbnNbY29sdW1uXS5zb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhcnJheSBmcm9tIHNvdXJjZVxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbWJvID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gb2JqLm9wdGlvbnMuY29sdW1uc1tjb2x1bW5dLnNvdXJjZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHNvdXJjZVtpXSkgPT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tYm9bc291cmNlW2ldLmlkXSA9IHNvdXJjZVtpXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbWJvW3NvdXJjZVtpXV0gPSBzb3VyY2VbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBHdWFyYW50ZWUgc2luZ2xlIG11bHRpcGxlIGNvbXBhdGliaWxpdHlcclxuICAgICAgICAgICAgICAgIHZhciBrZXlzID0gQXJyYXkuaXNBcnJheShrZXkpID8ga2V5IDogKCcnICsga2V5KS5zcGxpdCgnOycpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mKGtleXNbaV0pID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKGNvbWJvW2tleXNbaV0uaWRdKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tYm9ba2V5c1tpXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2goY29tYm9ba2V5c1tpXV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBjb2x1bW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiAodmFsdWUubGVuZ3RoID4gMCkgPyB2YWx1ZS5qb2luKCc7ICcpIDogJyc7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRnJvbSBzdGFyY2tvdmVyZmxvdyBjb250cmlidXRpb25zXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLnBhcnNlQ1NWID0gZnVuY3Rpb24oc3RyLCBkZWxpbWl0ZXIpIHtcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIGxhc3QgbGluZSBicmVha1xyXG4gICAgICAgICAgICBzdHIgPSBzdHIucmVwbGFjZSgvXFxyP1xcbiR8XFxyJHxcXG4kL2csIFwiXCIpO1xyXG4gICAgICAgICAgICAvLyBMYXN0IGNhcmFjdGVyIGlzIHRoZSBkZWxpbWl0ZXJcclxuICAgICAgICAgICAgaWYgKHN0ci5jaGFyQ29kZUF0KHN0ci5sZW5ndGgtMSkgPT0gOSkge1xyXG4gICAgICAgICAgICAgICAgc3RyICs9IFwiXFwwXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdXNlci1zdXBwbGllZCBkZWxpbWV0ZXIgb3IgZGVmYXVsdCBjb21tYVxyXG4gICAgICAgICAgICBkZWxpbWl0ZXIgPSAoZGVsaW1pdGVyIHx8IFwiLFwiKTtcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgYXJyID0gW107XHJcbiAgICAgICAgICAgIHZhciBxdW90ZSA9IGZhbHNlOyAgLy8gdHJ1ZSBtZWFucyB3ZSdyZSBpbnNpZGUgYSBxdW90ZWQgZmllbGRcclxuICAgICAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIGVhY2ggY2hhcmFjdGVyLCBrZWVwIHRyYWNrIG9mIGN1cnJlbnQgcm93IGFuZCBjb2x1bW4gKG9mIHRoZSByZXR1cm5lZCBhcnJheSlcclxuICAgICAgICAgICAgZm9yICh2YXIgcm93ID0gMCwgY29sID0gMCwgYyA9IDA7IGMgPCBzdHIubGVuZ3RoOyBjKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYyA9IHN0cltjXSwgbmMgPSBzdHJbYysxXTtcclxuICAgICAgICAgICAgICAgIGFycltyb3ddID0gYXJyW3Jvd10gfHwgW107XHJcbiAgICAgICAgICAgICAgICBhcnJbcm93XVtjb2xdID0gYXJyW3Jvd11bY29sXSB8fCAnJztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgY2hhcmFjdGVyIGlzIGEgcXVvdGF0aW9uIG1hcmssIGFuZCB3ZSdyZSBpbnNpZGUgYSBxdW90ZWQgZmllbGQsIGFuZCB0aGUgbmV4dCBjaGFyYWN0ZXIgaXMgYWxzbyBhIHF1b3RhdGlvbiBtYXJrLCBhZGQgYSBxdW90YXRpb24gbWFyayB0byB0aGUgY3VycmVudCBjb2x1bW4gYW5kIHNraXAgdGhlIG5leHQgY2hhcmFjdGVyXHJcbiAgICAgICAgICAgICAgICBpZiAoY2MgPT0gJ1wiJyAmJiBxdW90ZSAmJiBuYyA9PSAnXCInKSB7IGFycltyb3ddW2NvbF0gKz0gY2M7ICsrYzsgY29udGludWU7IH0gIFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBJZiBpdCdzIGp1c3Qgb25lIHF1b3RhdGlvbiBtYXJrLCBiZWdpbi9lbmQgcXVvdGVkIGZpZWxkXHJcbiAgICAgICAgICAgICAgICBpZiAoY2MgPT0gJ1wiJykgeyBxdW90ZSA9ICFxdW90ZTsgY29udGludWU7IH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhIGNvbW1hIGFuZCB3ZSdyZSBub3QgaW4gYSBxdW90ZWQgZmllbGQsIG1vdmUgb24gdG8gdGhlIG5leHQgY29sdW1uXHJcbiAgICAgICAgICAgICAgICBpZiAoY2MgPT0gZGVsaW1pdGVyICYmICFxdW90ZSkgeyArK2NvbDsgY29udGludWU7IH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhIG5ld2xpbmUgKENSTEYpIGFuZCB3ZSdyZSBub3QgaW4gYSBxdW90ZWQgZmllbGQsIHNraXAgdGhlIG5leHQgY2hhcmFjdGVyIGFuZCBtb3ZlIG9uIHRvIHRoZSBuZXh0IHJvdyBhbmQgbW92ZSB0byBjb2x1bW4gMCBvZiB0aGF0IG5ldyByb3dcclxuICAgICAgICAgICAgICAgIGlmIChjYyA9PSAnXFxyJyAmJiBuYyA9PSAnXFxuJyAmJiAhcXVvdGUpIHsgKytyb3c7IGNvbCA9IDA7ICsrYzsgY29udGludWU7IH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhIG5ld2xpbmUgKExGIG9yIENSKSBhbmQgd2UncmUgbm90IGluIGEgcXVvdGVkIGZpZWxkLCBtb3ZlIG9uIHRvIHRoZSBuZXh0IHJvdyBhbmQgbW92ZSB0byBjb2x1bW4gMCBvZiB0aGF0IG5ldyByb3dcclxuICAgICAgICAgICAgICAgIGlmIChjYyA9PSAnXFxuJyAmJiAhcXVvdGUpIHsgKytyb3c7IGNvbCA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY2MgPT0gJ1xccicgJiYgIXF1b3RlKSB7ICsrcm93OyBjb2wgPSAwOyBjb250aW51ZTsgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIGFwcGVuZCB0aGUgY3VycmVudCBjaGFyYWN0ZXIgdG8gdGhlIGN1cnJlbnQgY29sdW1uXHJcbiAgICAgICAgICAgICAgICBhcnJbcm93XVtjb2xdICs9IGNjO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhcnI7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgb2JqLmhhc2ggPSBmdW5jdGlvbihzdHIpIHtcclxuICAgICAgICAgICAgdmFyIGhhc2ggPSAwLCBpLCBjaHI7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHN0ci5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBoYXNoO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICBjaHIgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAgICAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgY2hyO1xyXG4gICAgICAgICAgICAgICAgICBoYXNoIHw9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGhhc2g7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgb2JqLm9uYWZ0ZXJjaGFuZ2VzID0gZnVuY3Rpb24oZWwsIHJlY29yZHMpIHtcclxuICAgICAgICAgICAgLy8gRXZlbnRzXHJcbiAgICAgICAgICAgIG9iai5kaXNwYXRjaCgnb25hZnRlcmNoYW5nZXMnLCBlbCwgcmVjb3Jkcyk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgb2JqLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgamV4Y2VsLmRlc3Ryb3koZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW5pdGlhbGl6YXRpb24gbWV0aG9kXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb2JqLmluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQgPSBvYmo7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQnVpbGQgaGFuZGxlcnNcclxuICAgICAgICAgICAgaWYgKHR5cGVvZihqZXhjZWwuYnVpbGQpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5yb290KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmJ1aWxkKG9iai5vcHRpb25zLnJvb3QpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBqZXhjZWwuYnVpbGQoZG9jdW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGpleGNlbC5idWlsZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBFdmVudFxyXG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgMSk7XHJcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50ICYmICEgb2JqLnNlbGVjdGVkQ2VsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai51cGRhdGVTZWxlY3Rpb25Gcm9tQ29vcmRzKDAsMCwwLDApO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5sZWZ0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gTG9hZCB0aGUgdGFibGUgZGF0YSBiYXNlZCBvbiBhbiBDU1YgZmlsZVxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY3N2KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBMb2FkaW5nXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMubG9hZGluZ1NwaW4gPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGpTdWl0ZXMubG9hZGluZy5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIExvYWQgQ1NWIGZpbGVcclxuICAgICAgICAgICAgICAgIGpTdWl0ZXMuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBvYmoub3B0aW9ucy5jc3YsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBvYmoub3B0aW9ucy5tZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogb2JqLm9wdGlvbnMucmVxdWVzdFZhcmlhYmxlcyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ3RleHQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGRhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0RhdGEgPSBvYmoucGFyc2VDU1YocmVzdWx0LCBvYmoub3B0aW9ucy5jc3ZEZWxpbWl0ZXIpXHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGVhZGVyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY3N2SGVhZGVycyA9PSB0cnVlICYmIG5ld0RhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBuZXdEYXRhLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgaGVhZGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIG9iai5vcHRpb25zLmNvbHVtbnNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuY29sdW1uc1tpXSA9IHsgdHlwZTondGV4dCcsIGFsaWduOm9iai5vcHRpb25zLmRlZmF1bHRDb2xBbGlnbiwgd2lkdGg6b2JqLm9wdGlvbnMuZGVmYXVsdENvbFdpZHRoIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZWNlZGVuY2Ugb3ZlciBwcmUtY29uZmlndXJhdGVkIHRpdGxlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqLm9wdGlvbnMuY29sdW1uc1tpXS50aXRsZSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmNvbHVtbnNbaV0udGl0bGUgPSBoZWFkZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmRhdGEgPSBuZXdEYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIHRhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5wcmVwYXJlVGFibGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGlkZSBzcGluXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5sb2FkaW5nU3BpbiA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqU3VpdGVzLmxvYWRpbmcuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLm9wdGlvbnMudXJsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBMb2FkaW5nXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMubG9hZGluZ1NwaW4gPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGpTdWl0ZXMubG9hZGluZy5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGpTdWl0ZXMuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBvYmoub3B0aW9ucy51cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBvYmoub3B0aW9ucy5tZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogb2JqLm9wdGlvbnMucmVxdWVzdFZhcmlhYmxlcyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmRhdGEgPSAocmVzdWx0LmRhdGEpID8gcmVzdWx0LmRhdGEgOiByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgdGFibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnByZXBhcmVUYWJsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIaWRlIHNwaW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmxvYWRpbmdTcGluID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpTdWl0ZXMubG9hZGluZy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgdGFibGVcclxuICAgICAgICAgICAgICAgIG9iai5wcmVwYXJlVGFibGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8vIENvbnRleHQgbWVudVxyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuY29udGV4dE1lbnUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy5jb250ZXh0TWVudSA9IG9wdGlvbnMuY29udGV4dE1lbnU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb2JqLm9wdGlvbnMuY29udGV4dE1lbnUgPSBmdW5jdGlvbihlbCwgeCwgeSwgZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICh5ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbnNlcnQgYSBuZXcgY29sdW1uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmFsbG93SW5zZXJ0Q29sdW1uID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTpvYmoub3B0aW9ucy50ZXh0Lmluc2VydEFOZXdDb2x1bW5CZWZvcmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrOmZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5pbnNlcnRDb2x1bW4oMSwgcGFyc2VJbnQoeCksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuYWxsb3dJbnNlcnRDb2x1bW4gPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOm9iai5vcHRpb25zLnRleHQuaW5zZXJ0QU5ld0NvbHVtbkFmdGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljazpmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouaW5zZXJ0Q29sdW1uKDEsIHBhcnNlSW50KHgpLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIGEgY29sdW1uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmFsbG93RGVsZXRlQ29sdW1uID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTpvYmoub3B0aW9ucy50ZXh0LmRlbGV0ZVNlbGVjdGVkQ29sdW1ucyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s6ZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmRlbGV0ZUNvbHVtbihvYmouZ2V0U2VsZWN0ZWRDb2x1bW5zKCkubGVuZ3RoID8gdW5kZWZpbmVkIDogcGFyc2VJbnQoeCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW5hbWUgY29sdW1uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmFsbG93UmVuYW1lQ29sdW1uID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTpvYmoub3B0aW9ucy50ZXh0LnJlbmFtZVRoaXNDb2x1bW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrOmZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zZXRIZWFkZXIoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNvcnRpbmdcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY29sdW1uU29ydGluZyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExpbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7IHR5cGU6J2xpbmUnIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6b2JqLm9wdGlvbnMudGV4dC5vcmRlckFzY2VuZGluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s6ZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm9yZGVyQnkoeCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOm9iai5vcHRpb25zLnRleHQub3JkZXJEZXNjZW5kaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljazpmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoub3JkZXJCeSh4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbnNlcnQgbmV3IHJvd1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5hbGxvd0luc2VydFJvdyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6b2JqLm9wdGlvbnMudGV4dC5pbnNlcnRBTmV3Um93QmVmb3JlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljazpmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouaW5zZXJ0Um93KDEsIHBhcnNlSW50KHkpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTpvYmoub3B0aW9ucy50ZXh0Lmluc2VydEFOZXdSb3dBZnRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s6ZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmluc2VydFJvdygxLCBwYXJzZUludCh5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5hbGxvd0RlbGV0ZVJvdyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6b2JqLm9wdGlvbnMudGV4dC5kZWxldGVTZWxlY3RlZFJvd3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrOmZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5kZWxldGVSb3cob2JqLmdldFNlbGVjdGVkUm93cygpLmxlbmd0aCA/IHVuZGVmaW5lZCA6IHBhcnNlSW50KHkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmFsbG93Q29tbWVudHMgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7IHR5cGU6J2xpbmUnIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSBvYmoucmVjb3Jkc1t5XVt4XS5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykgfHwgJyc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlID8gb2JqLm9wdGlvbnMudGV4dC5lZGl0Q29tbWVudHMgOiBvYmoub3B0aW9ucy50ZXh0LmFkZENvbW1lbnRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s6ZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb21tZW50ID0gcHJvbXB0KG9iai5vcHRpb25zLnRleHQuY29tbWVudHMsIHRpdGxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zZXRDb21tZW50cyhbIHgsIHkgXSwgY29tbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOm9iai5vcHRpb25zLnRleHQuY2xlYXJDb21tZW50cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljazpmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zZXRDb21tZW50cyhbIHgsIHkgXSwgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIExpbmVcclxuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goeyB0eXBlOidsaW5lJyB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQ29weVxyXG4gICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6b2JqLm9wdGlvbnMudGV4dC5jb3B5LFxyXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OidDdHJsICsgQycsXHJcbiAgICAgICAgICAgICAgICAgICAgb25jbGljazpmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmNvcHkodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFBhc3RlXHJcbiAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yICYmIG5hdmlnYXRvci5jbGlwYm9hcmQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6b2JqLm9wdGlvbnMudGV4dC5wYXN0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6J0N0cmwgKyBWJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljazpmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmouc2VsZWN0ZWRDZWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpLnRoZW4oZnVuY3Rpb24odGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQucGFzdGUob2JqLnNlbGVjdGVkQ2VsbFswXSwgb2JqLnNlbGVjdGVkQ2VsbFsxXSwgdGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBTYXZlXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuYWxsb3dFeHBvcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IG9iai5vcHRpb25zLnRleHQuc2F2ZUFzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogJ0N0cmwgKyBTJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmRvd25sb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQWJvdXRcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5hYm91dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTpvYmoub3B0aW9ucy50ZXh0LmFib3V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrOmZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQob2JqLm9wdGlvbnMuYWJvdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIG9iai5zY3JvbGxDb250cm9scyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgb2JqLndoZWVsQ29udHJvbHMoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5mcmVlemVDb2x1bW5zID4gMCAmJiBvYmouY29udGVudC5zY3JvbGxMZWZ0ICE9IHNjcm9sbExlZnQpIHtcclxuICAgICAgICAgICAgICAgIG9iai51cGRhdGVGcmVlemVQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDbG9zZSBlZGl0b3JcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmxhenlMb2FkaW5nID09IHRydWUgfHwgb2JqLm9wdGlvbnMudGFibGVPdmVyZmxvdyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLmVkaXRpb24gJiYgZS50YXJnZXQuY2xhc3NOYW1lLnN1YnN0cigwLDkpICE9ICdqZHJvcGRvd24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmNsb3NlRWRpdG9yKG9iai5lZGl0aW9uWzBdLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb2JqLndoZWVsQ29udHJvbHMgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5sYXp5TG9hZGluZyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLnRpbWVDb250cm9sTG9hZGluZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgamV4Y2VsLnRpbWVDb250cm9sTG9hZGluZyA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmouY29udGVudC5zY3JvbGxUb3AgKyBvYmouY29udGVudC5jbGllbnRIZWlnaHQgPj0gb2JqLmNvbnRlbnQuc2Nyb2xsSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmxvYWREb3duKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmNvbnRlbnQuc2Nyb2xsVG9wICsgb2JqLmNvbnRlbnQuY2xpZW50SGVpZ2h0ID4gb2JqLmNvbnRlbnQuc2Nyb2xsSGVpZ2h0IC0gMTApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmNvbnRlbnQuc2Nyb2xsVG9wID0gb2JqLmNvbnRlbnQuc2Nyb2xsVG9wIC0gb2JqLmNvbnRlbnQuY2xpZW50SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoudXBkYXRlQ29ybmVyUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvYmouY29udGVudC5zY3JvbGxUb3AgPD0gb2JqLmNvbnRlbnQuY2xpZW50SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmxvYWRVcCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5jb250ZW50LnNjcm9sbFRvcCA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5jb250ZW50LnNjcm9sbFRvcCA9IG9iai5jb250ZW50LnNjcm9sbFRvcCArIG9iai5jb250ZW50LmNsaWVudEhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnVwZGF0ZUNvcm5lclBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwudGltZUNvbnRyb2xMb2FkaW5nID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBHZXQgd2lkdGggb2YgYWxsIGZyZWV6ZWQgY2VsbHMgdG9nZXRoZXJcclxuICAgICAgICBvYmouZ2V0RnJlZXplV2lkdGggPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHdpZHRoID0gMDtcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmZyZWV6ZUNvbHVtbnMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5vcHRpb25zLmZyZWV6ZUNvbHVtbnM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoICs9IHBhcnNlSW50KG9iai5vcHRpb25zLmNvbHVtbnNbaV0ud2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB3aWR0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gMDtcclxuXHJcbiAgICAgICAgb2JqLnVwZGF0ZUZyZWV6ZVBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNjcm9sbExlZnQgPSBvYmouY29udGVudC5zY3JvbGxMZWZ0O1xyXG4gICAgICAgICAgICB2YXIgd2lkdGggPSAwO1xyXG4gICAgICAgICAgICBpZiAoc2Nyb2xsTGVmdCA+IDUwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5vcHRpb25zLmZyZWV6ZUNvbHVtbnM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCArPSBwYXJzZUludChvYmoub3B0aW9ucy5jb2x1bW5zW2ktMV0ud2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBvYmouaGVhZGVyc1tpXS5jbGFzc0xpc3QuYWRkKCdqZXhjZWxfZnJlZXplZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5oZWFkZXJzW2ldLnN0eWxlLmxlZnQgPSB3aWR0aCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvYmoucm93cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnJvd3Nbal0gJiYgb2JqLnJlY29yZHNbal1baV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaGlmdGVkID0gKHNjcm9sbExlZnQgKyAoaSA+IDAgPyBvYmoucmVjb3Jkc1tqXVtpLTFdLnN0eWxlLndpZHRoIDogMCkpIC0gNTEgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbal1baV0uY2xhc3NMaXN0LmFkZCgnamV4Y2VsX2ZyZWV6ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW2pdW2ldLnN0eWxlLmxlZnQgPSBzaGlmdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmoub3B0aW9ucy5mcmVlemVDb2x1bW5zOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouaGVhZGVyc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdqZXhjZWxfZnJlZXplZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5oZWFkZXJzW2ldLnN0eWxlLmxlZnQgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iai5yb3dzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoucmVjb3Jkc1tqXVtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlY29yZHNbal1baV0uY2xhc3NMaXN0LnJlbW92ZSgnamV4Y2VsX2ZyZWV6ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZWNvcmRzW2pdW2ldLnN0eWxlLmxlZnQgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUGxhY2UgdGhlIGNvcm5lciBpbiB0aGUgY29ycmVjdCBwbGFjZVxyXG4gICAgICAgICAgICBvYmoudXBkYXRlQ29ybmVyUG9zaXRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJET01Nb3VzZVNjcm9sbFwiLCBvYmoud2hlZWxDb250cm9scyk7XHJcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNld2hlZWxcIiwgb2JqLndoZWVsQ29udHJvbHMpO1xyXG4gICAgXHJcbiAgICAgICAgZWwuamV4Y2VsID0gb2JqO1xyXG4gICAgXHJcbiAgICAgICAgb2JqLmluaXQoKTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgamV4Y2VsLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgamV4Y2VsLnRpbWVDb250cm9sID0gbnVsbDtcclxuICAgIGpleGNlbC50aW1lQ29udHJvbExvYWRpbmcgPSBudWxsO1xyXG4gICAgXHJcbiAgICBqZXhjZWwuZGVzdHJveSA9IGZ1bmN0aW9uKGVsZW1lbnQsIGRlc3Ryb3lFdmVudEhhbmRsZXJzKSB7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQuamV4Y2VsKSB7XHJcbiAgICAgICAgICAgIHZhciByb290ID0gZWxlbWVudC5qZXhjZWwub3B0aW9ucy5yb290ID8gZWxlbWVudC5qZXhjZWwub3B0aW9ucy5yb290IDogZG9jdW1lbnQ7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTU1vdXNlU2Nyb2xsXCIsIGVsZW1lbnQuamV4Y2VsLnNjcm9sbENvbnRyb2xzKTtcclxuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V3aGVlbFwiLCBlbGVtZW50LmpleGNlbC5zY3JvbGxDb250cm9scyk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuamV4Y2VsID0gbnVsbDtcclxuICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSAnJztcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoZGVzdHJveUV2ZW50SGFuZGxlcnMpIHtcclxuICAgICAgICAgICAgICAgIHJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgamV4Y2VsLm1vdXNlVXBDb250cm9scyk7XHJcbiAgICAgICAgICAgICAgICByb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgamV4Y2VsLm1vdXNlRG93bkNvbnRyb2xzKTtcclxuICAgICAgICAgICAgICAgIHJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBqZXhjZWwubW91c2VNb3ZlQ29udHJvbHMpO1xyXG4gICAgICAgICAgICAgICAgcm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGpleGNlbC5tb3VzZU92ZXJDb250cm9scyk7XHJcbiAgICAgICAgICAgICAgICByb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLCBqZXhjZWwuZG91YmxlQ2xpY2tDb250cm9scyk7XHJcbiAgICAgICAgICAgICAgICByb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwYXN0ZVwiLCBqZXhjZWwucGFzdGVDb250cm9scyk7XHJcbiAgICAgICAgICAgICAgICByb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCBqZXhjZWwuY29udGV4dE1lbnVDb250cm9scyk7XHJcbiAgICAgICAgICAgICAgICByb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGpleGNlbC50b3VjaFN0YXJ0Q29udHJvbHMpO1xyXG4gICAgICAgICAgICAgICAgcm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgamV4Y2VsLnRvdWNoRW5kQ29udHJvbHMpO1xyXG4gICAgICAgICAgICAgICAgcm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hjYW5jZWxcIiwgamV4Y2VsLnRvdWNoRW5kQ29udHJvbHMpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgamV4Y2VsLmtleURvd25Db250cm9scyk7XHJcbiAgICAgICAgICAgICAgICBqZXhjZWwgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBqZXhjZWwuYnVpbGQgPSBmdW5jdGlvbihyb290KSB7XHJcbiAgICAgICAgcm9vdC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBqZXhjZWwubW91c2VVcENvbnRyb2xzKTtcclxuICAgICAgICByb290LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgamV4Y2VsLm1vdXNlRG93bkNvbnRyb2xzKTtcclxuICAgICAgICByb290LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgamV4Y2VsLm1vdXNlTW92ZUNvbnRyb2xzKTtcclxuICAgICAgICByb290LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgamV4Y2VsLm1vdXNlT3ZlckNvbnRyb2xzKTtcclxuICAgICAgICByb290LmFkZEV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLCBqZXhjZWwuZG91YmxlQ2xpY2tDb250cm9scyk7XHJcbiAgICAgICAgcm9vdC5hZGRFdmVudExpc3RlbmVyKFwicGFzdGVcIiwgamV4Y2VsLnBhc3RlQ29udHJvbHMpO1xyXG4gICAgICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIGpleGNlbC5jb250ZXh0TWVudUNvbnRyb2xzKTtcclxuICAgICAgICByb290LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGpleGNlbC50b3VjaFN0YXJ0Q29udHJvbHMpO1xyXG4gICAgICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIGpleGNlbC50b3VjaEVuZENvbnRyb2xzKTtcclxuICAgICAgICByb290LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGNhbmNlbFwiLCBqZXhjZWwudG91Y2hFbmRDb250cm9scyk7XHJcbiAgICAgICAgcm9vdC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIGpleGNlbC50b3VjaEVuZENvbnRyb2xzKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBqZXhjZWwua2V5RG93bkNvbnRyb2xzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBFdmVudHNcclxuICAgICAqL1xyXG4gICAgamV4Y2VsLmtleURvd25Db250cm9scyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LmVkaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLndoaWNoID09IDI3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRXNjYXBlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LmVkaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhpdCB3aXRob3V0IHNhdmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5jbG9zZUVkaXRvcihqZXhjZWwuY3VycmVudC5lZGl0aW9uWzBdLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS53aGljaCA9PSAxMykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEVudGVyXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50Lm9wdGlvbnMuY29sdW1uc1tqZXhjZWwuY3VycmVudC5lZGl0aW9uWzJdXS50eXBlID09ICdjYWxlbmRhcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuY2xvc2VFZGl0b3IoamV4Y2VsLmN1cnJlbnQuZWRpdGlvblswXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChqZXhjZWwuY3VycmVudC5vcHRpb25zLmNvbHVtbnNbamV4Y2VsLmN1cnJlbnQuZWRpdGlvblsyXV0udHlwZSA9PSAnZHJvcGRvd24nIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5vcHRpb25zLmNvbHVtbnNbamV4Y2VsLmN1cnJlbnQuZWRpdGlvblsyXV0udHlwZSA9PSAnYXV0b2NvbXBsZXRlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWx0IGVudGVyIC0+IGRvIG5vdCBjbG9zZSBlZGl0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChqZXhjZWwuY3VycmVudC5vcHRpb25zLndvcmRXcmFwID09IHRydWUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5vcHRpb25zLmNvbHVtbnNbamV4Y2VsLmN1cnJlbnQuZWRpdGlvblsyXV0ud29yZFdyYXAgPT0gdHJ1ZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50Lm9wdGlvbnMuZGF0YVtqZXhjZWwuY3VycmVudC5lZGl0aW9uWzNdXVtqZXhjZWwuY3VycmVudC5lZGl0aW9uWzJdXS5sZW5ndGggPiAyMDApICYmIGUuYWx0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgbmV3IGxpbmUgdG8gdGhlIGVkaXRvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVkaXRvclRleHRhcmVhID0gamV4Y2VsLmN1cnJlbnQuZWRpdGlvblswXS5jaGlsZHJlblswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlZGl0b3JWYWx1ZSA9IGpleGNlbC5jdXJyZW50LmVkaXRpb25bMF0uY2hpbGRyZW5bMF0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWRpdG9ySW5kZXhPZiA9IGVkaXRvclRleHRhcmVhLnNlbGVjdGlvblN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yVmFsdWUgPSBlZGl0b3JWYWx1ZS5zbGljZSgwLCBlZGl0b3JJbmRleE9mKSArIFwiXFxuXCIgKyBlZGl0b3JWYWx1ZS5zbGljZShlZGl0b3JJbmRleE9mKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvclRleHRhcmVhLnZhbHVlID0gZWRpdG9yVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3JUZXh0YXJlYS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yVGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQgPSBlZGl0b3JJbmRleE9mICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvclRleHRhcmVhLnNlbGVjdGlvbkVuZCA9IGVkaXRvckluZGV4T2YgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuZWRpdGlvblswXS5jaGlsZHJlblswXS5ibHVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT0gOSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRhYlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5vcHRpb25zLmNvbHVtbnNbamV4Y2VsLmN1cnJlbnQuZWRpdGlvblsyXV0udHlwZSA9PSAnY2FsZW5kYXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LmNsb3NlRWRpdG9yKGpleGNlbC5jdXJyZW50LmVkaXRpb25bMF0sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LmVkaXRpb25bMF0uY2hpbGRyZW5bMF0uYmx1cigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICghIGpleGNlbC5jdXJyZW50LmVkaXRpb24gJiYgamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRDZWxsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXaGljaCBrZXlcclxuICAgICAgICAgICAgICAgIGlmIChlLndoaWNoID09IDM3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQubGVmdChlLnNoaWZ0S2V5LCBlLmN0cmxLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS53aGljaCA9PSAzOSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LnJpZ2h0KGUuc2hpZnRLZXksIGUuY3RybEtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLndoaWNoID09IDM4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQudXAoZS5zaGlmdEtleSwgZS5jdHJsS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT0gNDApIHtcclxuICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5kb3duKGUuc2hpZnRLZXksIGUuY3RybEtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLndoaWNoID09IDM2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuZmlyc3QoZS5zaGlmdEtleSwgZS5jdHJsS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT0gMzUpIHtcclxuICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5sYXN0KGUuc2hpZnRLZXksIGUuY3RybEtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLndoaWNoID09IDMyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50Lm9wdGlvbnMuZWRpdGFibGUgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5zZXRDaGVja1JhZGlvVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLndoaWNoID09IDQ2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50Lm9wdGlvbnMuZWRpdGFibGUgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5vcHRpb25zLmFsbG93RGVsZXRlUm93ID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlybShqZXhjZWwuY3VycmVudC5vcHRpb25zLnRleHQuYXJlWW91U3VyZVRvRGVsZXRlVGhlU2VsZWN0ZWRSb3dzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5kZWxldGVSb3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5vcHRpb25zLmFsbG93RGVsZXRlQ29sdW1uID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlybShqZXhjZWwuY3VycmVudC5vcHRpb25zLnRleHQuYXJlWW91U3VyZVRvRGVsZXRlVGhlU2VsZWN0ZWRDb2x1bW5zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5kZWxldGVDb2x1bW4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGFuZ2UgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LnNldFZhbHVlKGpleGNlbC5jdXJyZW50LmhpZ2hsaWdodGVkLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT0gMTMpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlIGN1cnNvclxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LnVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50Lm9wdGlvbnMuYWxsb3dJbnNlcnRSb3cgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50Lm9wdGlvbnMuYWxsb3dNYW51YWxJbnNlcnRSb3cgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5zZWxlY3RlZENlbGxbMV0gPT0gamV4Y2VsLmN1cnJlbnQub3B0aW9ucy5kYXRhLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmV3IHJlY29yZCBpbiBjYXNlIHNlbGVjdGVkQ2VsbCBpbiB0aGUgbGFzdCByb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuaW5zZXJ0Um93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuZG93bigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT0gOSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRhYlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LmxlZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQub3B0aW9ucy5hbGxvd0luc2VydENvbHVtbiA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQub3B0aW9ucy5hbGxvd01hbnVhbEluc2VydENvbHVtbiA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LnNlbGVjdGVkQ2VsbFswXSA9PSBqZXhjZWwuY3VycmVudC5vcHRpb25zLmRhdGFbMF0ubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOZXcgcmVjb3JkIGluIGNhc2Ugc2VsZWN0ZWRDZWxsIGluIHRoZSBsYXN0IGNvbHVtblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5pbnNlcnRDb2x1bW4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5yaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkgJiYgISBlLnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLndoaWNoID09IDY1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDdHJsICsgQVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuc2VsZWN0QWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS53aGljaCA9PSA4Mykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3RybCArIFNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LmRvd25sb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS53aGljaCA9PSA4OSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3RybCArIFlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LnJlZG8oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLndoaWNoID09IDkwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDdHJsICsgWlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQudW5kbygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT0gNjcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEN0cmwgKyBDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5jb3B5KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT0gNjcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEN0cmwgKyBDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5jb3B5KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT0gODgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEN0cmwgKyBYXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQub3B0aW9ucy5lZGl0YWJsZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1dENvbnRyb2xzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jb3B5Q29udHJvbHMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLndoaWNoID09IDg2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDdHJsICsgVlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLnBhc3RlQ29udHJvbHMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5zZWxlY3RlZENlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5vcHRpb25zLmVkaXRhYmxlID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93SWQgPSBqZXhjZWwuY3VycmVudC5zZWxlY3RlZENlbGxbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbklkID0gamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRDZWxsWzBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgaXMgbm90IHJlYWRvbmx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50Lm9wdGlvbnMuY29sdW1uc1tjb2x1bW5JZF0udHlwZSAhPSAncmVhZG9ubHknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoYXJhY3RlcnMgYWJsZSB0byBzdGFydCBhIGVkaXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAzMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3BhY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5vcHRpb25zLmNvbHVtbnNbY29sdW1uSWRdLnR5cGUgPT0gJ2NoZWNrYm94JyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50Lm9wdGlvbnMuY29sdW1uc1tjb2x1bW5JZF0udHlwZSA9PSAncmFkaW8nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdGFydCBlZGl0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQub3BlbkVkaXRvcihqZXhjZWwuY3VycmVudC5yZWNvcmRzW3Jvd0lkXVtjb2x1bW5JZF0sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSAxMTMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0YXJ0IGVkaXRpb24gd2l0aCBjdXJyZW50IGNvbnRlbnQgRjJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50Lm9wZW5FZGl0b3IoamV4Y2VsLmN1cnJlbnQucmVjb3Jkc1tyb3dJZF1bY29sdW1uSWRdLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKGUua2V5Q29kZSA9PSA4KSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLmtleUNvZGUgPj0gNDggJiYgZS5rZXlDb2RlIDw9IDU3KSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLmtleUNvZGUgPj0gOTYgJiYgZS5rZXlDb2RlIDw9IDExMSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5rZXlDb2RlID49IDE4NyAmJiBlLmtleUNvZGUgPD0gMTkwKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoU3RyaW5nLmZyb21DaGFyQ29kZShlLmtleUNvZGUpID09IGUua2V5IHx8IFN0cmluZy5mcm9tQ2hhckNvZGUoZS5rZXlDb2RlKS50b0xvd2VyQ2FzZSgpID09IGUua2V5LnRvTG93ZXJDYXNlKCkpICYmIGpleGNlbC52YWxpZExldHRlcihTdHJpbmcuZnJvbUNoYXJDb2RlKGUua2V5Q29kZSkpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZWRpdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQub3BlbkVkaXRvcihqZXhjZWwuY3VycmVudC5yZWNvcmRzW3Jvd0lkXVtjb2x1bW5JZF0sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCBlbnRyaWVzIGluIHRoZSBjYWxlbmRhclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50Lm9wdGlvbnMuY29sdW1uc1tjb2x1bW5JZF0udHlwZSA9PSAnY2FsZW5kYXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnamV4Y2VsX3NlYXJjaCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC50aW1lQ29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoamV4Y2VsLnRpbWVDb250cm9sKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBqZXhjZWwudGltZUNvbnRyb2wgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5zZWFyY2goZS50YXJnZXQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDIwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGpleGNlbC5pc01vdXNlQWN0aW9uID0gZmFsc2U7XHJcbiAgICBcclxuICAgIGpleGNlbC5tb3VzZURvd25Db250cm9scyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XHJcbiAgICAgICAgaWYgKGUuYnV0dG9ucykge1xyXG4gICAgICAgICAgICB2YXIgbW91c2VCdXR0b24gPSBlLmJ1dHRvbnM7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLmJ1dHRvbikge1xyXG4gICAgICAgICAgICB2YXIgbW91c2VCdXR0b24gPSBlLmJ1dHRvbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgbW91c2VCdXR0b24gPSBlLndoaWNoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR2V0IGVsZW1lbnRzXHJcbiAgICAgICAgdmFyIGpleGNlbFRhYmxlID0gamV4Y2VsLmdldEVsZW1lbnQoZS50YXJnZXQpO1xyXG5cclxuICAgICAgICBpZiAoamV4Y2VsVGFibGVbMF0pIHtcclxuICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50ICE9IGpleGNlbFRhYmxlWzBdLmpleGNlbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LmVkaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuY2xvc2VFZGl0b3IoamV4Y2VsLmN1cnJlbnQuZWRpdGlvblswXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LnJlc2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudCA9IGpleGNlbFRhYmxlWzBdLmpleGNlbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LmVkaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5jbG9zZUVkaXRvcihqZXhjZWwuY3VycmVudC5lZGl0aW9uWzBdLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQucmVzZXRTZWxlY3Rpb24odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQgJiYgbW91c2VCdXR0b24gPT0gMSkge1xyXG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqZXhjZWxfc2VsZWN0YWxsJykpIHtcclxuICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LnNlbGVjdEFsbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnamV4Y2VsX2Nvcm5lcicpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQub3B0aW9ucy5lZGl0YWJsZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRDb3JuZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gSGVhZGVyIGZvdW5kXHJcbiAgICAgICAgICAgICAgICBpZiAoamV4Y2VsVGFibGVbMV0gPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2x1bW5JZCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS14Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHVtbklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjdXJzb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZm8gPSBlLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50Lm9wdGlvbnMuY29sdW1uUmVzaXplID09IHRydWUgJiYgaW5mby53aWR0aCAtIGUub2Zmc2V0WCA8IDYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc2l6ZSBoZWxwZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LnJlc2l6aW5nID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdXNlUG9zaXRpb246IGUucGFnZVgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW5JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogaW5mby53aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJvcmRlciBpbmRpY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5oZWFkZXJzW2NvbHVtbklkXS5jbGFzc0xpc3QuYWRkKCdyZXNpemluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBqZXhjZWwuY3VycmVudC5yZWNvcmRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LnJlY29yZHNbal1bY29sdW1uSWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LnJlY29yZHNbal1bY29sdW1uSWRdLmNsYXNzTGlzdC5hZGQoJ3Jlc2l6aW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGpleGNlbC5jdXJyZW50Lm9wdGlvbnMuY29sdW1uRHJhZyA9PSB0cnVlICYmIGluZm8uaGVpZ2h0IC0gZS5vZmZzZXRZIDwgNikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LmlzQ29sTWVyZ2VkKGNvbHVtbklkKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdKc3ByZWFkc2hlZXQ6IFRoaXMgY29sdW1uIGlzIHBhcnQgb2YgYSBtZXJnZWQgY2VsbC4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQucmVzZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmFnIGhlbHBlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LmRyYWdnaW5nID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlLnRhcmdldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uOmNvbHVtbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjpjb2x1bW5JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJvcmRlciBpbmRpY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuaGVhZGVyc1tjb2x1bW5JZF0uY2xhc3NMaXN0LmFkZCgnZHJhZ2dpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGpleGNlbC5jdXJyZW50LnJlY29yZHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LnJlY29yZHNbal1bY29sdW1uSWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5yZWNvcmRzW2pdW2NvbHVtbklkXS5jbGFzc0xpc3QuYWRkKCdkcmFnZ2luZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LnNlbGVjdGVkSGVhZGVyICYmIChlLnNoaWZ0S2V5IHx8IGUuY3RybEtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGpleGNlbC5jdXJyZW50LnNlbGVjdGVkSGVhZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gY29sdW1uSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXNzIHRvIHJlbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5zZWxlY3RlZEhlYWRlciA9PSBjb2x1bW5JZCAmJiBqZXhjZWwuY3VycmVudC5vcHRpb25zLmFsbG93UmVuYW1lQ29sdW1uID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLnRpbWVDb250cm9sID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LnNldEhlYWRlcihjb2x1bW5JZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDgwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCB0cmFjayBvZiB3aGljaCBoZWFkZXIgd2FzIHNlbGVjdGVkIGZpcnN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRIZWFkZXIgPSBjb2x1bW5JZDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBzZWxlY3Rpb24gc2luZ2xlIGNvbHVtblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gY29sdW1uSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBjb2x1bW5JZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQudXBkYXRlU2VsZWN0aW9uRnJvbUNvb3JkcyhvLCAwLCBkLCBqZXhjZWwuY3VycmVudC5vcHRpb25zLmRhdGEubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2pleGNlbF9uZXN0ZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1jb2x1bW4nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29sdW1uJykuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYzEgPSBwYXJzZUludChjb2x1bW5bMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjMiA9IHBhcnNlSW50KGNvbHVtbltjb2x1bW4ubGVuZ3RoLTFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMxID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYzIgPSBqZXhjZWwuY3VycmVudC5vcHRpb25zLmNvbHVtbnMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LnVwZGF0ZVNlbGVjdGlvbkZyb21Db29yZHMoYzEsIDAsIGMyLCBqZXhjZWwuY3VycmVudC5vcHRpb25zLmRhdGEubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LnNlbGVjdGVkSGVhZGVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIEJvZHkgZm91bmRcclxuICAgICAgICAgICAgICAgIGlmIChqZXhjZWxUYWJsZVsxXSA9PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd0lkID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXknKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqZXhjZWxfcm93JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZm8gPSBlLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50Lm9wdGlvbnMucm93UmVzaXplID09IHRydWUgJiYgaW5mby5oZWlnaHQgLSBlLm9mZnNldFkgPCA2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNpemUgaGVscGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5yZXNpemluZyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlLnRhcmdldC5wYXJlbnROb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdXNlUG9zaXRpb246IGUucGFnZVksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93OiByb3dJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGluZm8uaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJvcmRlciBpbmRpY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ3Jlc2l6aW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoamV4Y2VsLmN1cnJlbnQub3B0aW9ucy5yb3dEcmFnID09IHRydWUgJiYgaW5mby53aWR0aCAtIGUub2Zmc2V0WCA8IDYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5pc1Jvd01lcmdlZChyb3dJZCkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignSnNwcmVhZHNoZWV0OiBUaGlzIHJvdyBpcyBwYXJ0IG9mIGEgbWVyZ2VkIGNlbGwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoamV4Y2VsLmN1cnJlbnQub3B0aW9ucy5zZWFyY2ggPT0gdHJ1ZSAmJiBqZXhjZWwuY3VycmVudC5yZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignSnNwcmVhZHNoZWV0OiBQbGVhc2UgY2xlYXIgeW91ciBzZWFyY2ggYmVmb3JlIHBlcmZvcm0gdGhpcyBhY3Rpb24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQucmVzZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmFnIGhlbHBlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LmRyYWdnaW5nID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlLnRhcmdldC5wYXJlbnROb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3c6cm93SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOnJvd0lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQm9yZGVyIGluZGljYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRSb3cgJiYgKGUuc2hpZnRLZXkgfHwgZS5jdHJsS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRSb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSByb3dJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCB0cmFjayBvZiB3aGljaCBoZWFkZXIgd2FzIHNlbGVjdGVkIGZpcnN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRSb3cgPSByb3dJZDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBzZWxlY3Rpb24gc2luZ2xlIGNvbHVtblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gcm93SWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSByb3dJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQudXBkYXRlU2VsZWN0aW9uRnJvbUNvb3JkcygwLCBvLCBqZXhjZWwuY3VycmVudC5vcHRpb25zLmRhdGFbMF0ubGVuZ3RoIC0gMSwgZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKY2xvc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnamNsb3NlJykgJiYgZS50YXJnZXQuY2xpZW50V2lkdGggLSBlLm9mZnNldFggPCA1MCAmJiBlLm9mZnNldFkgPCA1MCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuY2xvc2VFZGl0b3IoamV4Y2VsLmN1cnJlbnQuZWRpdGlvblswXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0Q2VsbENvb3JkcyA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeCAmJiB5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbeCwgeV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQucGFyZW50Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldENlbGxDb29yZHMoZWxlbWVudC5wYXJlbnROb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gZ2V0Q2VsbENvb3JkcyhlLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbklkID0gcG9zaXRpb25bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJvd0lkID0gcG9zaXRpb25bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xvc2UgZWRpdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5lZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5lZGl0aW9uWzJdICE9IGNvbHVtbklkIHx8IGpleGNlbC5jdXJyZW50LmVkaXRpb25bM10gIT0gcm93SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LmNsb3NlRWRpdG9yKGpleGNlbC5jdXJyZW50LmVkaXRpb25bMF0sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBqZXhjZWwuY3VycmVudC5lZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjZWxsIHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5zaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQudXBkYXRlU2VsZWN0aW9uRnJvbUNvb3JkcyhqZXhjZWwuY3VycmVudC5zZWxlY3RlZENlbGxbMF0sIGpleGNlbC5jdXJyZW50LnNlbGVjdGVkQ2VsbFsxXSwgY29sdW1uSWQsIHJvd0lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LnVwZGF0ZVNlbGVjdGlvbkZyb21Db29yZHMoY29sdW1uSWQsIHJvd0lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZnVsbCByb3cgc2VsZWN0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5zZWxlY3RlZEhlYWRlciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5zZWxlY3RlZFJvdyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBQYWdpbmF0aW9uXHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqZXhjZWxfcGFnZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmlubmVyVGV4dCA9PSAnPCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQucGFnZSgwKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmlubmVyVGV4dCA9PSAnPicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQucGFnZShlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykgLSAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5wYWdlKGUudGFyZ2V0LmlubmVyVGV4dCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5lZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBqZXhjZWwuaXNNb3VzZUFjdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgamV4Y2VsLmlzTW91c2VBY3Rpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgamV4Y2VsLmlzTW91c2VBY3Rpb24gPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGpleGNlbC5tb3VzZVVwQ29udHJvbHMgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjZWxsIHNpemVcclxuICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LnJlc2l6aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDb2x1bW5zIHRvIGJlIHVwZGF0ZWRcclxuICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5yZXNpemluZy5jb2x1bW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBOZXcgd2lkdGhcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3V2lkdGggPSBqZXhjZWwuY3VycmVudC5jb2xncm91cFtqZXhjZWwuY3VycmVudC5yZXNpemluZy5jb2x1bW5dLmdldEF0dHJpYnV0ZSgnd2lkdGgnKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDb2x1bW5zXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBqZXhjZWwuY3VycmVudC5nZXRTZWxlY3RlZENvbHVtbnMoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sdW1ucy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50V2lkdGggPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2x1bW5zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50V2lkdGgucHVzaChwYXJzZUludChqZXhjZWwuY3VycmVudC5jb2xncm91cFtjb2x1bW5zW2ldXS5nZXRBdHRyaWJ1dGUoJ3dpZHRoJykpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmV2aW91cyB3aWR0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBjb2x1bW5zLmluZGV4T2YocGFyc2VJbnQoamV4Y2VsLmN1cnJlbnQucmVzaXppbmcuY29sdW1uKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaWR0aFtpbmRleF0gPSBqZXhjZWwuY3VycmVudC5yZXNpemluZy53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuc2V0V2lkdGgoY29sdW1ucywgbmV3V2lkdGgsIGN1cnJlbnRXaWR0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuc2V0V2lkdGgoamV4Y2VsLmN1cnJlbnQucmVzaXppbmcuY29sdW1uLCBuZXdXaWR0aCwgamV4Y2VsLmN1cnJlbnQucmVzaXppbmcud2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYm9yZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuaGVhZGVyc1tqZXhjZWwuY3VycmVudC5yZXNpemluZy5jb2x1bW5dLmNsYXNzTGlzdC5yZW1vdmUoJ3Jlc2l6aW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBqZXhjZWwuY3VycmVudC5yZWNvcmRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5yZWNvcmRzW2pdW2pleGNlbC5jdXJyZW50LnJlc2l6aW5nLmNvbHVtbl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LnJlY29yZHNbal1bamV4Y2VsLmN1cnJlbnQucmVzaXppbmcuY29sdW1uXS5jbGFzc0xpc3QucmVtb3ZlKCdyZXNpemluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgQ2xhc3NcclxuICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5yb3dzW2pleGNlbC5jdXJyZW50LnJlc2l6aW5nLnJvd10uY2hpbGRyZW5bMF0uY2xhc3NMaXN0LnJlbW92ZSgncmVzaXppbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3SGVpZ2h0ID0gamV4Y2VsLmN1cnJlbnQucm93c1tqZXhjZWwuY3VycmVudC5yZXNpemluZy5yb3ddLmdldEF0dHJpYnV0ZSgnaGVpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuc2V0SGVpZ2h0KGpleGNlbC5jdXJyZW50LnJlc2l6aW5nLnJvdywgbmV3SGVpZ2h0LCBqZXhjZWwuY3VycmVudC5yZXNpemluZy5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBib3JkZXJcclxuICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5yZXNpemluZy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Jlc2l6aW5nJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBSZXNldCByZXNpemluZyBoZWxwZXJcclxuICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LnJlc2l6aW5nID0gbnVsbDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChqZXhjZWwuY3VycmVudC5kcmFnZ2luZykge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgZHJhZ2dpbmcgaGVscGVyXHJcbiAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQuZHJhZ2dpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQuZHJhZ2dpbmcuY29sdW1uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRhcmdldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uSWQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgbW92ZSBzdHlsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5oZWFkZXJzW2pleGNlbC5jdXJyZW50LmRyYWdnaW5nLmNvbHVtbl0uY2xhc3NMaXN0LnJlbW92ZSgnZHJhZ2dpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBqZXhjZWwuY3VycmVudC5yb3dzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQucmVjb3Jkc1tqXVtqZXhjZWwuY3VycmVudC5kcmFnZ2luZy5jb2x1bW5dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQucmVjb3Jkc1tqXVtqZXhjZWwuY3VycmVudC5kcmFnZ2luZy5jb2x1bW5dLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWdnaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBqZXhjZWwuY3VycmVudC5oZWFkZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5oZWFkZXJzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWdnaW5nLWxlZnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LmhlYWRlcnNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnZHJhZ2dpbmctcmlnaHQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcG9zaXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHVtbklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQuZHJhZ2dpbmcuY29sdW1uICE9IGpleGNlbC5jdXJyZW50LmRyYWdnaW5nLmRlc3RpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQubW92ZUNvbHVtbihqZXhjZWwuY3VycmVudC5kcmFnZ2luZy5jb2x1bW4sIGpleGNlbC5jdXJyZW50LmRyYWdnaW5nLmRlc3RpbmF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5kcmFnZ2luZy5lbGVtZW50Lm5leHRTaWJsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBwYXJzZUludChqZXhjZWwuY3VycmVudC5kcmFnZ2luZy5lbGVtZW50Lm5leHRTaWJsaW5nLmdldEF0dHJpYnV0ZSgnZGF0YS15JykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LmRyYWdnaW5nLnJvdyA8IHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gLT0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHBhcnNlSW50KGpleGNlbC5jdXJyZW50LmRyYWdnaW5nLmVsZW1lbnQucHJldmlvdXNTaWJsaW5nLmdldEF0dHJpYnV0ZSgnZGF0YS15JykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5kcmFnZ2luZy5yb3cgIT0gamV4Y2VsLmN1cnJlbnQuZHJhZ2dpbmcuZGVzdGluYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50Lm1vdmVSb3coamV4Y2VsLmN1cnJlbnQuZHJhZ2dpbmcucm93LCBwb3NpdGlvbiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuZHJhZ2dpbmcuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnZ2luZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5kcmFnZ2luZyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDbG9zZSBhbnkgY29ybmVyIHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LnNlbGVjdGVkQ29ybmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRDb3JuZXIgPSBmYWxzZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIERhdGEgdG8gYmUgY29waWVkXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LnNlbGVjdGlvbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5jb3B5RGF0YShqZXhjZWwuY3VycmVudC5zZWxlY3Rpb25bMF0sIGpleGNlbC5jdXJyZW50LnNlbGVjdGlvbltqZXhjZWwuY3VycmVudC5zZWxlY3Rpb24ubGVuZ3RoIC0gMV0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQucmVtb3ZlQ29weVNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2xlYXIgYW55IHRpbWUgY29udHJvbFxyXG4gICAgICAgIGlmIChqZXhjZWwudGltZUNvbnRyb2wpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGpleGNlbC50aW1lQ29udHJvbCk7XHJcbiAgICAgICAgICAgIGpleGNlbC50aW1lQ29udHJvbCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLy8gTW91c2UgdXBcclxuICAgICAgICBqZXhjZWwuaXNNb3VzZUFjdGlvbiA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBNb3VzZSBtb3ZlIGNvbnRyb2xzXHJcbiAgICBqZXhjZWwubW91c2VNb3ZlQ29udHJvbHMgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xyXG4gICAgICAgIGlmIChlLmJ1dHRvbnMpIHtcclxuICAgICAgICAgICAgdmFyIG1vdXNlQnV0dG9uID0gZS5idXR0b25zO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5idXR0b24pIHtcclxuICAgICAgICAgICAgdmFyIG1vdXNlQnV0dG9uID0gZS5idXR0b247XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIG1vdXNlQnV0dG9uID0gZS53aGljaDtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBpZiAoISBtb3VzZUJ1dHRvbikge1xyXG4gICAgICAgICAgICBqZXhjZWwuaXNNb3VzZUFjdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGlmIChqZXhjZWwuY3VycmVudCkge1xyXG4gICAgICAgICAgICBpZiAoamV4Y2VsLmlzTW91c2VBY3Rpb24gPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVzaXppbmcgaXMgb25nb2luZ1xyXG4gICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LnJlc2l6aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LnJlc2l6aW5nLmNvbHVtbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBlLnBhZ2VYIC0gamV4Y2VsLmN1cnJlbnQucmVzaXppbmcubW91c2VQb3NpdGlvbjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQucmVzaXppbmcud2lkdGggKyB3aWR0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wV2lkdGggPSBqZXhjZWwuY3VycmVudC5yZXNpemluZy53aWR0aCArIHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuY29sZ3JvdXBbamV4Y2VsLmN1cnJlbnQucmVzaXppbmcuY29sdW1uXS5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgdGVtcFdpZHRoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQudXBkYXRlQ29ybmVyUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBlLnBhZ2VZIC0gamV4Y2VsLmN1cnJlbnQucmVzaXppbmcubW91c2VQb3NpdGlvbjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQucmVzaXppbmcuaGVpZ2h0ICsgaGVpZ2h0ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBIZWlnaHQgPSBqZXhjZWwuY3VycmVudC5yZXNpemluZy5oZWlnaHQgKyBoZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5yb3dzW2pleGNlbC5jdXJyZW50LnJlc2l6aW5nLnJvd10uc2V0QXR0cmlidXRlKCdoZWlnaHQnLCB0ZW1wSGVpZ2h0KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQudXBkYXRlQ29ybmVyUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXgnKTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXknKTtcclxuICAgICAgICAgICAgICAgIHZhciByZWN0ID0gZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5jdXJzb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5jdXJzb3Iuc3R5bGUuY3Vyc29yID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuY3Vyc29yID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlICYmIGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc05hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucygncmVzaXphYmxlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0ICYmIHggJiYgISB5ICYmIChyZWN0LndpZHRoIC0gKGUuY2xpZW50WCAtIHJlY3QubGVmdCkgPCA2KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuY3Vyc29yID0gZS50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5jdXJzb3Iuc3R5bGUuY3Vyc29yID0gJ2NvbC1yZXNpemUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0ICYmICEgeCAmJiB5ICYmIChyZWN0LmhlaWdodCAtIChlLmNsaWVudFkgLSByZWN0LnRvcCkgPCA2KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuY3Vyc29yID0gZS50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5jdXJzb3Iuc3R5bGUuY3Vyc29yID0gJ3Jvdy1yZXNpemUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2RyYWdnYWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldCAmJiAhIHggJiYgeSAmJiAocmVjdC53aWR0aCAtIChlLmNsaWVudFggLSByZWN0LmxlZnQpIDwgNikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LmN1cnNvciA9IGUudGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuY3Vyc29yLnN0eWxlLmN1cnNvciA9ICdtb3ZlJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldCAmJiB4ICYmICEgeSAmJiAocmVjdC5oZWlnaHQgLSAoZS5jbGllbnRZIC0gcmVjdC50b3ApIDwgNikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LmN1cnNvciA9IGUudGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuY3Vyc29yLnN0eWxlLmN1cnNvciA9ICdtb3ZlJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgamV4Y2VsLm1vdXNlT3ZlckNvbnRyb2xzID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcclxuICAgICAgICBpZiAoZS5idXR0b25zKSB7XHJcbiAgICAgICAgICAgIHZhciBtb3VzZUJ1dHRvbiA9IGUuYnV0dG9ucztcclxuICAgICAgICB9IGVsc2UgaWYgKGUuYnV0dG9uKSB7XHJcbiAgICAgICAgICAgIHZhciBtb3VzZUJ1dHRvbiA9IGUuYnV0dG9uO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBtb3VzZUJ1dHRvbiA9IGUud2hpY2g7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYgKCEgbW91c2VCdXR0b24pIHtcclxuICAgICAgICAgICAgamV4Y2VsLmlzTW91c2VBY3Rpb24gPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQgJiYgamV4Y2VsLmlzTW91c2VBY3Rpb24gPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAvLyBHZXQgZWxlbWVudHNcclxuICAgICAgICAgICAgdmFyIGpleGNlbFRhYmxlID0gamV4Y2VsLmdldEVsZW1lbnQoZS50YXJnZXQpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChqZXhjZWxUYWJsZVswXSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQXZvaWQgY3Jvc3MgcmVmZXJlbmNlXHJcbiAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQgIT0gamV4Y2VsVGFibGVbMF0uamV4Y2VsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5JZCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS14Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcm93SWQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQuZHJhZ2dpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQuZHJhZ2dpbmcuY29sdW1uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2x1bW5JZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LmlzQ29sTWVyZ2VkKGNvbHVtbklkKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdKc3ByZWFkc2hlZXQ6IFRoaXMgY29sdW1uIGlzIHBhcnQgb2YgYSBtZXJnZWQgY2VsbC4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBqZXhjZWwuY3VycmVudC5oZWFkZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LmhlYWRlcnNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnZHJhZ2dpbmctbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5oZWFkZXJzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWdnaW5nLXJpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LmRyYWdnaW5nLmNvbHVtbiA9PSBjb2x1bW5JZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5kcmFnZ2luZy5kZXN0aW5hdGlvbiA9IHBhcnNlSW50KGNvbHVtbklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xpZW50V2lkdGggLyAyID4gZS5vZmZzZXRYKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQuZHJhZ2dpbmcuY29sdW1uIDwgY29sdW1uSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5kcmFnZ2luZy5kZXN0aW5hdGlvbiA9IHBhcnNlSW50KGNvbHVtbklkKSAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LmRyYWdnaW5nLmRlc3RpbmF0aW9uID0gcGFyc2VJbnQoY29sdW1uSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuaGVhZGVyc1tjb2x1bW5JZF0uY2xhc3NMaXN0LmFkZCgnZHJhZ2dpbmctbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LmRyYWdnaW5nLmNvbHVtbiA8IGNvbHVtbklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuZHJhZ2dpbmcuZGVzdGluYXRpb24gPSBwYXJzZUludChjb2x1bW5JZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LmRyYWdnaW5nLmRlc3RpbmF0aW9uID0gcGFyc2VJbnQoY29sdW1uSWQpICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LmhlYWRlcnNbY29sdW1uSWRdLmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nLXJpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5pc1Jvd01lcmdlZChyb3dJZCkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignSnNwcmVhZHNoZWV0OiBUaGlzIHJvdyBpcyBwYXJ0IG9mIGEgbWVyZ2VkIGNlbGwuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSAoZS50YXJnZXQuY2xpZW50SGVpZ2h0IC8gMiA+IGUub2Zmc2V0WSkgPyBlLnRhcmdldC5wYXJlbnROb2RlLm5leHRTaWJsaW5nIDogZS50YXJnZXQucGFyZW50Tm9kZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQuZHJhZ2dpbmcuZWxlbWVudCAhPSB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShqZXhjZWwuY3VycmVudC5kcmFnZ2luZy5lbGVtZW50LCB0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5kcmFnZ2luZy5kZXN0aW5hdGlvbiA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoamV4Y2VsLmN1cnJlbnQuZHJhZ2dpbmcuZWxlbWVudC5wYXJlbnROb2RlLmNoaWxkcmVuLCBqZXhjZWwuY3VycmVudC5kcmFnZ2luZy5lbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGpleGNlbC5jdXJyZW50LnJlc2l6aW5nKSB7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEhlYWRlciBmb3VuZFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWxUYWJsZVsxXSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5zZWxlY3RlZEhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbklkID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRIZWFkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGNvbHVtbklkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQudXBkYXRlU2VsZWN0aW9uRnJvbUNvb3JkcyhvLCAwLCBkLCBqZXhjZWwuY3VycmVudC5vcHRpb25zLmRhdGEubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBCb2R5IGZvdW5kXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbFRhYmxlWzFdID09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnamV4Y2VsX3JvdycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGpleGNlbC5jdXJyZW50LnNlbGVjdGVkUm93O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gcm93SWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LnVwZGF0ZVNlbGVjdGlvbkZyb21Db29yZHMoMCwgbywgamV4Y2VsLmN1cnJlbnQub3B0aW9ucy5kYXRhWzBdLmxlbmd0aCAtIDEsIGQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90IHNlbGVjdCBlZHRpb24gaXMgaW4gcHJvZ3Jlc3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIGpleGNlbC5jdXJyZW50LmVkaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sdW1uSWQgJiYgcm93SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LnNlbGVjdGVkQ29ybmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC51cGRhdGVDb3B5U2VsZWN0aW9uKGNvbHVtbklkLCByb3dJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRDZWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQudXBkYXRlU2VsZWN0aW9uRnJvbUNvb3JkcyhqZXhjZWwuY3VycmVudC5zZWxlY3RlZENlbGxbMF0sIGpleGNlbC5jdXJyZW50LnNlbGVjdGVkQ2VsbFsxXSwgY29sdW1uSWQsIHJvd0lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8vIENsZWFyIGFueSB0aW1lIGNvbnRyb2xcclxuICAgICAgICBpZiAoamV4Y2VsLnRpbWVDb250cm9sKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChqZXhjZWwudGltZUNvbnRyb2wpO1xyXG4gICAgICAgICAgICBqZXhjZWwudGltZUNvbnRyb2wgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBEb3VibGUgY2xpY2sgZXZlbnQgaGFuZGxlcjogY29udHJvbHMgdGhlIGRvdWJsZSBjbGljayBpbiB0aGUgY29ybmVyLCBjZWxsIGVkaXRpb24gb3IgY29sdW1uIHJlLW9yZGVyaW5nLlxyXG4gICAgICovXHJcbiAgICBqZXhjZWwuZG91YmxlQ2xpY2tDb250cm9scyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAvLyBKZXhjZWwgaXMgc2VsZWN0ZWRcclxuICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgLy8gQ29ybmVyIGFjdGlvblxyXG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqZXhjZWxfY29ybmVyJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFueSBzZWxlY3RlZCBjZWxsc1xyXG4gICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LmhpZ2hsaWdodGVkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDb3B5IGZyb20gdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4MSA9IGpleGNlbC5jdXJyZW50LmhpZ2hsaWdodGVkWzBdLmdldEF0dHJpYnV0ZSgnZGF0YS14Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkxID0gcGFyc2VJbnQoamV4Y2VsLmN1cnJlbnQuaGlnaGxpZ2h0ZWRbamV4Y2VsLmN1cnJlbnQuaGlnaGxpZ2h0ZWQubGVuZ3RoIC0gMV0uZ2V0QXR0cmlidXRlKCdkYXRhLXknKSkgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVudGlsIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeDIgPSBqZXhjZWwuY3VycmVudC5oaWdobGlnaHRlZFtqZXhjZWwuY3VycmVudC5oaWdobGlnaHRlZC5sZW5ndGggLSAxXS5nZXRBdHRyaWJ1dGUoJ2RhdGEteCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB5MiA9IGpleGNlbC5jdXJyZW50LnJlY29yZHMubGVuZ3RoIC0gMVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEV4ZWN1dGUgY29weVxyXG4gICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LmNvcHlEYXRhKGpleGNlbC5jdXJyZW50LnJlY29yZHNbeTFdW3gxXSwgamV4Y2VsLmN1cnJlbnQucmVjb3Jkc1t5Ml1beDJdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2pleGNlbF9jb2x1bW5fZmlsdGVyJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIENvbHVtblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbklkID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXgnKTtcclxuICAgICAgICAgICAgICAgIC8vIE9wZW4gZmlsdGVyXHJcbiAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5vcGVuRmlsdGVyKGNvbHVtbklkKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gR2V0IHRhYmxlXHJcbiAgICAgICAgICAgICAgICB2YXIgamV4Y2VsVGFibGUgPSBqZXhjZWwuZ2V0RWxlbWVudChlLnRhcmdldCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIERvdWJsZSBjbGljayBvdmVyIGhlYWRlclxyXG4gICAgICAgICAgICAgICAgaWYgKGpleGNlbFRhYmxlWzFdID09IDEgJiYgamV4Y2VsLmN1cnJlbnQub3B0aW9ucy5jb2x1bW5Tb3J0aW5nID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB2YWxpZCBjb2x1bW4gaGVhZGVyIGNvb3Jkc1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2x1bW5JZCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS14Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHVtbklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50Lm9yZGVyQnkoY29sdW1uSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gRG91YmxlIGNsaWNrIG92ZXIgYm9keVxyXG4gICAgICAgICAgICAgICAgaWYgKGpleGNlbFRhYmxlWzFdID09IDIgJiYgamV4Y2VsLmN1cnJlbnQub3B0aW9ucy5lZGl0YWJsZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgamV4Y2VsLmN1cnJlbnQuZWRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0Q2VsbENvb3JkcyA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeCAmJiB5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRDZWxsQ29vcmRzKGVsZW1lbnQucGFyZW50Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gZ2V0Q2VsbENvb3JkcyhlLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsICYmIGNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWdobGlnaHQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQub3BlbkVkaXRvcihjZWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgamV4Y2VsLmNvcHlDb250cm9scyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQgJiYgamV4Y2VsLmNvcHlDb250cm9scy5lbmFibGVkKSB7XHJcbiAgICAgICAgICAgIGlmICghIGpleGNlbC5jdXJyZW50LmVkaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LmNvcHkodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGpleGNlbC5jdXRDb250cm9scyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgaWYgKCEgamV4Y2VsLmN1cnJlbnQuZWRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQuY29weSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5vcHRpb25zLmVkaXRhYmxlID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5zZXRWYWx1ZShqZXhjZWwuY3VycmVudC5oaWdobGlnaHRlZCwgJycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBqZXhjZWwucGFzdGVDb250cm9scyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQgJiYgamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRDZWxsKSB7XHJcbiAgICAgICAgICAgIGlmICghIGpleGNlbC5jdXJyZW50LmVkaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqZXhjZWwuY3VycmVudC5vcHRpb25zLmVkaXRhYmxlID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZSAmJiBlLmNsaXBib2FyZERhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQucGFzdGUoamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRDZWxsWzBdLCBqZXhjZWwuY3VycmVudC5zZWxlY3RlZENlbGxbMV0sIGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCd0ZXh0JykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuY2xpcGJvYXJkRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5wYXN0ZShqZXhjZWwuY3VycmVudC5zZWxlY3RlZENlbGxbMF0sIGpleGNlbC5jdXJyZW50LnNlbGVjdGVkQ2VsbFsxXSwgd2luZG93LmNsaXBib2FyZERhdGEuZ2V0RGF0YSgndGV4dCcpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGpleGNlbC5jb250ZXh0TWVudUNvbnRyb2xzID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcclxuICAgICAgICBpZiAoXCJidXR0b25zXCIgaW4gZSkge1xyXG4gICAgICAgICAgICB2YXIgbW91c2VCdXR0b24gPSBlLmJ1dHRvbnM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIG1vdXNlQnV0dG9uID0gZS53aGljaCB8fCBlLmJ1dHRvbjtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50LmVkaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChqZXhjZWwuY3VycmVudC5vcHRpb25zLmNvbnRleHRNZW51KSB7XHJcbiAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5jb250ZXh0TWVudS5jb250ZXh0bWVudS5jbG9zZSgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoamV4Y2VsLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS14Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggfHwgeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHggPCBwYXJzZUludChqZXhjZWwuY3VycmVudC5zZWxlY3RlZENlbGxbMF0pKSB8fCAoeCA+IHBhcnNlSW50KGpleGNlbC5jdXJyZW50LnNlbGVjdGVkQ2VsbFsyXSkpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoeSA8IHBhcnNlSW50KGpleGNlbC5jdXJyZW50LnNlbGVjdGVkQ2VsbFsxXSkpIHx8ICh5ID4gcGFyc2VJbnQoamV4Y2VsLmN1cnJlbnQuc2VsZWN0ZWRDZWxsWzNdKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50LnVwZGF0ZVNlbGVjdGlvbkZyb21Db29yZHMoeCwgeSwgeCwgeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRhYmxlIGZvdW5kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IGpleGNlbC5jdXJyZW50Lm9wdGlvbnMuY29udGV4dE1lbnUoamV4Y2VsLmN1cnJlbnQsIHgsIHksIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgaWQgaXMgZGVwZW5kaW5nIG9uIGhlYWRlciBhbmQgYm9keVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5jb250ZXh0TWVudS5jb250ZXh0bWVudS5vcGVuKGUsIGl0ZW1zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXZvaWQgdGhlIHJlYWwgb25lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgamV4Y2VsLnRvdWNoU3RhcnRDb250cm9scyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICB2YXIgamV4Y2VsVGFibGUgPSBqZXhjZWwuZ2V0RWxlbWVudChlLnRhcmdldCk7XHJcbiAgICBcclxuICAgICAgICBpZiAoamV4Y2VsVGFibGVbMF0pIHtcclxuICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50ICE9IGpleGNlbFRhYmxlWzBdLmpleGNlbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQucmVzZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50ID0gamV4Y2VsVGFibGVbMF0uamV4Y2VsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC5yZXNldFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgamV4Y2VsLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIGlmICghIGpleGNlbC5jdXJyZW50LmVkaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5JZCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS14Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcm93SWQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uSWQgJiYgcm93SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBqZXhjZWwuY3VycmVudC51cGRhdGVTZWxlY3Rpb25Gcm9tQ29vcmRzKGNvbHVtbklkLCByb3dJZCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBqZXhjZWwudGltZUNvbnRyb2wgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIHRlbXBvcmFyeSByZWZlcmVuY2UgdG8gdGhlIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpleGNlbC5jdXJyZW50Lm9wdGlvbnMuY29sdW1uc1tjb2x1bW5JZF0udHlwZSA9PSAnY29sb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwudG1wRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqZXhjZWwudG1wRWxlbWVudCA9IGUudGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpleGNlbC5jdXJyZW50Lm9wZW5FZGl0b3IoZS50YXJnZXQsIGZhbHNlLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBqZXhjZWwudG91Y2hFbmRDb250cm9scyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAvLyBDbGVhciBhbnkgdGltZSBjb250cm9sXHJcbiAgICAgICAgaWYgKGpleGNlbC50aW1lQ29udHJvbCkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoamV4Y2VsLnRpbWVDb250cm9sKTtcclxuICAgICAgICAgICAgamV4Y2VsLnRpbWVDb250cm9sID0gbnVsbDtcclxuICAgICAgICAgICAgLy8gRWxlbWVudFxyXG4gICAgICAgICAgICBpZiAoamV4Y2VsLnRtcEVsZW1lbnQgJiYgamV4Y2VsLnRtcEVsZW1lbnQuY2hpbGRyZW5bMF0udGFnTmFtZSA9PSAnSU5QVVQnKSB7XHJcbiAgICAgICAgICAgICAgICBqZXhjZWwudG1wRWxlbWVudC5jaGlsZHJlblswXS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGpleGNlbC50bXBFbGVtZW50ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogSmV4Y2VsIGV4dGVuc2lvbnNcclxuICAgICAqL1xyXG4gICAgXHJcbiAgICBqZXhjZWwudGFicyA9IGZ1bmN0aW9uKHRhYnMsIHJlc3VsdCkge1xyXG4gICAgICAgIHZhciBpbnN0YW5jZXMgPSBbXTtcclxuICAgICAgICAvLyBDcmVhdGUgdGFiIGNvbnRhaW5lclxyXG4gICAgICAgIGlmICghIHRhYnMuY2xhc3NMaXN0LmNvbnRhaW5zKCdqZXhjZWxfdGFicycpKSB7XHJcbiAgICAgICAgICAgIHRhYnMuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgIHRhYnMuY2xhc3NMaXN0LmFkZCgnamV4Y2VsX3RhYnMnKVxyXG4gICAgICAgICAgICB0YWJzLmpleGNlbCA9IFtdO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICB2YXIgaGVhZGVycyA9IHRhYnMuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHRhYnMuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgaGVhZGVycyA9IHRhYnMuY2hpbGRyZW5bMF07XHJcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGFicy5jaGlsZHJlblsxXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzcHJlYWRzaGVldCA9IFtdXHJcbiAgICAgICAgdmFyIGxpbmsgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAvLyBTcHJlYWRzaGVldCBjb250YWluZXJcclxuICAgICAgICAgICAgc3ByZWFkc2hlZXRbaV0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgc3ByZWFkc2hlZXRbaV0uY2xhc3NMaXN0LmFkZCgnamV4Y2VsX3RhYicpO1xyXG4gICAgICAgICAgICB2YXIgd29ya3NoZWV0ID0gamV4Y2VsKHNwcmVhZHNoZWV0W2ldLCByZXN1bHRbaV0pO1xyXG4gICAgICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKHNwcmVhZHNoZWV0W2ldKTtcclxuICAgICAgICAgICAgaW5zdGFuY2VzW2ldID0gdGFicy5qZXhjZWwucHVzaCh3b3Jrc2hlZXQpO1xyXG5cclxuICAgICAgICAgICAgLy8gVGFiIGxpbmtcclxuICAgICAgICAgICAgbGlua1tpXSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBsaW5rW2ldLmNsYXNzTGlzdC5hZGQoJ2pleGNlbF90YWJfbGluaycpO1xyXG4gICAgICAgICAgICBsaW5rW2ldLnNldEF0dHJpYnV0ZSgnZGF0YS1zcHJlYWRzaGVldCcsIHRhYnMuamV4Y2VsLmxlbmd0aC0xKTtcclxuICAgICAgICAgICAgbGlua1tpXS5pbm5lckhUTUwgPSByZXN1bHRbaV0uc2hlZXROYW1lO1xyXG4gICAgICAgICAgICBsaW5rW2ldLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaGVhZGVycy5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnMuY2hpbGRyZW5bal0uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LmNoaWxkcmVuW2pdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXNwcmVhZHNoZWV0Jyk7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50LmNoaWxkcmVuW2ldLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgICAgICAgICAgaGVhZGVycy5jaGlsZHJlbltpXS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmRDaGlsZChsaW5rW2ldKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZpcnN0IHRhYlxyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaGVhZGVycy5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBoZWFkZXJzLmNoaWxkcmVuW2pdLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuY2hpbGRyZW5bal0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaGVhZGVycy5jaGlsZHJlbltoZWFkZXJzLmNoaWxkcmVuLmxlbmd0aCAtIDFdLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgY29udGVudC5jaGlsZHJlbltoZWFkZXJzLmNoaWxkcmVuLmxlbmd0aCAtIDFdLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG5cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbXBhYmlsaXR5IHRvIG9sZGVyIHZlcnNpb25zXHJcbiAgICBqZXhjZWwuY3JlYXRlVGFicyA9IGpleGNlbC50YWJzO1xyXG5cclxuICAgIGpleGNlbC5mcm9tU3ByZWFkc2hlZXQgPSBmdW5jdGlvbihmaWxlLCBfX2NhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIGNvbnZlcnQgPSBmdW5jdGlvbih3b3JrYm9vaykge1xyXG4gICAgICAgICAgICB2YXIgc3ByZWFkc2hlZXRzID0gW107XHJcbiAgICAgICAgICAgIHdvcmtib29rLlNoZWV0TmFtZXMuZm9yRWFjaChmdW5jdGlvbihzaGVldE5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzcHJlYWRzaGVldCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgc3ByZWFkc2hlZXQucm93cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgc3ByZWFkc2hlZXQuY29sdW1ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgc3ByZWFkc2hlZXQuZGF0YSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgc3ByZWFkc2hlZXQuc3R5bGUgPSB7fTtcclxuICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0LnNoZWV0TmFtZSA9IHNoZWV0TmFtZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQ29sdW1uIHdpZHRoc1xyXG4gICAgICAgICAgICAgICAgdmFyIHRlbXAgPSB3b3JrYm9vay5TaGVldHNbc2hlZXROYW1lXVsnIWNvbHMnXTtcclxuICAgICAgICAgICAgICAgIGlmICh0ZW1wICYmIHRlbXAubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0LmNvbHVtbnNbaV0gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBbaV0gJiYgdGVtcFtpXS53cHgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0LmNvbHVtbnNbaV0ud2lkdGggPSB0ZW1wW2ldLndweCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gUm93cyBoZWlnaHRzXHJcbiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHdvcmtib29rLlNoZWV0c1tzaGVldE5hbWVdWychcm93cyddO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRlbXAgJiYgdGVtcC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBbaV0gJiYgdGVtcFtpXS5ocHgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0LnJvd3NbaV0gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0LnJvd3NbaV0uaGVpZ2h0ID0gdGVtcFtpXS5ocHggKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gTWVyZ2UgY2VsbHNcclxuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gd29ya2Jvb2suU2hlZXRzW3NoZWV0TmFtZV1bJyFtZXJnZXMnXTtcclxuICAgICAgICAgICAgICAgIGlmICh0ZW1wICYmIHRlbXAubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0Lm1lcmdlQ2VsbHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHgxID0gdGVtcFtpXS5zLmM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5MSA9IHRlbXBbaV0ucy5yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeDIgPSB0ZW1wW2ldLmUuYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkyID0gdGVtcFtpXS5lLnI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBqZXhjZWwuZ2V0Q29sdW1uTmFtZUZyb21JZChbeDEseTFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWFkc2hlZXQubWVyZ2VDZWxsc1trZXldID0gWyB4Mi14MSsxLCB5Mi15MSsxIF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gRGF0YSBjb250YWluZXJcclxuICAgICAgICAgICAgICAgIHZhciBtYXhfeCA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF4X3kgPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBPYmplY3Qua2V5cyh3b3JrYm9vay5TaGVldHNbc2hlZXROYW1lXSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGVtcFtpXS5zdWJzdHIoMCwxKSAhPSAnIScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSB3b3JrYm9vay5TaGVldHNbc2hlZXROYW1lXVt0ZW1wW2ldXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZm8gPSBqZXhjZWwuZ2V0SWRGcm9tQ29sdW1uTmFtZSh0ZW1wW2ldLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEgc3ByZWFkc2hlZXQuZGF0YVtpbmZvWzFdXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWFkc2hlZXQuZGF0YVtpbmZvWzFdXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0LmRhdGFbaW5mb1sxXV1baW5mb1swXV0gPSBjZWxsLmYgPyAnPScgKyBjZWxsLmYgOiBjZWxsLnc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXhfeCA8IGluZm9bMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF94ID0gaW5mb1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF4X3kgPCBpbmZvWzFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfeSA9IGluZm9bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3R5bGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuc3R5bGUgJiYgT2JqZWN0LmtleXMoY2VsbC5zdHlsZSkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWFkc2hlZXQuc3R5bGVbdGVtcFtpXV0gPSBjZWxsLnN0eWxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLnMgJiYgY2VsbC5zLmZnQ29sb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcHJlYWRzaGVldC5zdHlsZVt0ZW1wW2ldXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0LnN0eWxlW3RlbXBbaV1dICs9ICc7JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0LnN0eWxlW3RlbXBbaV1dICs9ICdiYWNrZ3JvdW5kLWNvbG9yOiMnICsgY2VsbC5zLmZnQ29sb3IucmdiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIG51bUNvbHVtbnMgPSBzcHJlYWRzaGVldC5jb2x1bW5zO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPD0gbWF4X3k7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IG1heF94OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEgc3ByZWFkc2hlZXQuZGF0YVtqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWFkc2hlZXQuZGF0YVtqXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIHNwcmVhZHNoZWV0LmRhdGFbal1baV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW1Db2x1bW5zIDwgaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0LmRhdGFbal1baV0gPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0cy5wdXNoKHNwcmVhZHNoZWV0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHNwcmVhZHNoZWV0cztcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICB2YXIgb1JlcTtcclxuICAgICAgICBvUmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgb1JlcS5vcGVuKFwiR0VUXCIsIGZpbGUsIHRydWUpO1xyXG4gICAgXHJcbiAgICAgICAgaWYodHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIG9SZXEucmVzcG9uc2VUeXBlID0gXCJhcnJheWJ1ZmZlclwiO1xyXG4gICAgICAgICAgICBvUmVxLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcnJheWJ1ZmZlciA9IG9SZXEucmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKTtcclxuICAgICAgICAgICAgICAgIHZhciB3YiA9IFhMU1gucmVhZChkYXRhLCB7dHlwZTpcImFycmF5XCIsIGNlbGxGb3JtdWxhOnRydWUsIGNlbGxTdHlsZXM6dHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIF9fY2FsbGJhY2soY29udmVydCh3YikpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb1JlcS5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0LUNoYXJzZXRcIiwgXCJ4LXVzZXItZGVmaW5lZFwiKTsgIFxyXG4gICAgICAgICAgICBvUmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgeyBpZihvUmVxLnJlYWR5U3RhdGUgPT0gNCAmJiBvUmVxLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBmZiA9IGNvbnZlcnRSZXNwb25zZUJvZHlUb1RleHQob1JlcS5yZXNwb25zZUJvZHkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHdiID0gWExTWC5yZWFkKGZmLCB7dHlwZTpcImJpbmFyeVwiLCBjZWxsRm9ybXVsYTp0cnVlLCBjZWxsU3R5bGVzOnRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICBfX2NhbGxiYWNrKGNvbnZlcnQod2IpKVxyXG4gICAgICAgICAgICB9fTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBvUmVxLnNlbmQoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBWYWxpZCBpbnRlcm5hdGlvbmFsIGxldHRlclxyXG4gICAgICovXHJcbiAgICBcclxuICAgIGpleGNlbC52YWxpZExldHRlciA9IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgdmFyIHJlZ2V4ID0gLyhbXFx1MDA0MS1cXHUwMDVBXFx1MDA2MS1cXHUwMDdBXFx1MDBBQVxcdTAwQjVcXHUwMEJBXFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkMxXFx1MDJDNi1cXHUwMkQxXFx1MDJFMC1cXHUwMkU0XFx1MDJFQ1xcdTAyRUVcXHUwMzcwLVxcdTAzNzRcXHUwMzc2XFx1MDM3N1xcdTAzN0EtXFx1MDM3RFxcdTAzODZcXHUwMzg4LVxcdTAzOEFcXHUwMzhDXFx1MDM4RS1cXHUwM0ExXFx1MDNBMy1cXHUwM0Y1XFx1MDNGNy1cXHUwNDgxXFx1MDQ4QS1cXHUwNTI3XFx1MDUzMS1cXHUwNTU2XFx1MDU1OVxcdTA1NjEtXFx1MDU4N1xcdTA1RDAtXFx1MDVFQVxcdTA1RjAtXFx1MDVGMlxcdTA2MjAtXFx1MDY0QVxcdTA2NkVcXHUwNjZGXFx1MDY3MS1cXHUwNkQzXFx1MDZENVxcdTA2RTVcXHUwNkU2XFx1MDZFRVxcdTA2RUZcXHUwNkZBLVxcdTA2RkNcXHUwNkZGXFx1MDcxMFxcdTA3MTItXFx1MDcyRlxcdTA3NEQtXFx1MDdBNVxcdTA3QjFcXHUwN0NBLVxcdTA3RUFcXHUwN0Y0XFx1MDdGNVxcdTA3RkFcXHUwODAwLVxcdTA4MTVcXHUwODFBXFx1MDgyNFxcdTA4MjhcXHUwODQwLVxcdTA4NThcXHUwOEEwXFx1MDhBMi1cXHUwOEFDXFx1MDkwNC1cXHUwOTM5XFx1MDkzRFxcdTA5NTBcXHUwOTU4LVxcdTA5NjFcXHUwOTcxLVxcdTA5NzdcXHUwOTc5LVxcdTA5N0ZcXHUwOTg1LVxcdTA5OENcXHUwOThGXFx1MDk5MFxcdTA5OTMtXFx1MDlBOFxcdTA5QUEtXFx1MDlCMFxcdTA5QjJcXHUwOUI2LVxcdTA5QjlcXHUwOUJEXFx1MDlDRVxcdTA5RENcXHUwOUREXFx1MDlERi1cXHUwOUUxXFx1MDlGMFxcdTA5RjFcXHUwQTA1LVxcdTBBMEFcXHUwQTBGXFx1MEExMFxcdTBBMTMtXFx1MEEyOFxcdTBBMkEtXFx1MEEzMFxcdTBBMzJcXHUwQTMzXFx1MEEzNVxcdTBBMzZcXHUwQTM4XFx1MEEzOVxcdTBBNTktXFx1MEE1Q1xcdTBBNUVcXHUwQTcyLVxcdTBBNzRcXHUwQTg1LVxcdTBBOERcXHUwQThGLVxcdTBBOTFcXHUwQTkzLVxcdTBBQThcXHUwQUFBLVxcdTBBQjBcXHUwQUIyXFx1MEFCM1xcdTBBQjUtXFx1MEFCOVxcdTBBQkRcXHUwQUQwXFx1MEFFMFxcdTBBRTFcXHUwQjA1LVxcdTBCMENcXHUwQjBGXFx1MEIxMFxcdTBCMTMtXFx1MEIyOFxcdTBCMkEtXFx1MEIzMFxcdTBCMzJcXHUwQjMzXFx1MEIzNS1cXHUwQjM5XFx1MEIzRFxcdTBCNUNcXHUwQjVEXFx1MEI1Ri1cXHUwQjYxXFx1MEI3MVxcdTBCODNcXHUwQjg1LVxcdTBCOEFcXHUwQjhFLVxcdTBCOTBcXHUwQjkyLVxcdTBCOTVcXHUwQjk5XFx1MEI5QVxcdTBCOUNcXHUwQjlFXFx1MEI5RlxcdTBCQTNcXHUwQkE0XFx1MEJBOC1cXHUwQkFBXFx1MEJBRS1cXHUwQkI5XFx1MEJEMFxcdTBDMDUtXFx1MEMwQ1xcdTBDMEUtXFx1MEMxMFxcdTBDMTItXFx1MEMyOFxcdTBDMkEtXFx1MEMzM1xcdTBDMzUtXFx1MEMzOVxcdTBDM0RcXHUwQzU4XFx1MEM1OVxcdTBDNjBcXHUwQzYxXFx1MEM4NS1cXHUwQzhDXFx1MEM4RS1cXHUwQzkwXFx1MEM5Mi1cXHUwQ0E4XFx1MENBQS1cXHUwQ0IzXFx1MENCNS1cXHUwQ0I5XFx1MENCRFxcdTBDREVcXHUwQ0UwXFx1MENFMVxcdTBDRjFcXHUwQ0YyXFx1MEQwNS1cXHUwRDBDXFx1MEQwRS1cXHUwRDEwXFx1MEQxMi1cXHUwRDNBXFx1MEQzRFxcdTBENEVcXHUwRDYwXFx1MEQ2MVxcdTBEN0EtXFx1MEQ3RlxcdTBEODUtXFx1MEQ5NlxcdTBEOUEtXFx1MERCMVxcdTBEQjMtXFx1MERCQlxcdTBEQkRcXHUwREMwLVxcdTBEQzZcXHUwRTAxLVxcdTBFMzBcXHUwRTMyXFx1MEUzM1xcdTBFNDAtXFx1MEU0NlxcdTBFODFcXHUwRTgyXFx1MEU4NFxcdTBFODdcXHUwRTg4XFx1MEU4QVxcdTBFOERcXHUwRTk0LVxcdTBFOTdcXHUwRTk5LVxcdTBFOUZcXHUwRUExLVxcdTBFQTNcXHUwRUE1XFx1MEVBN1xcdTBFQUFcXHUwRUFCXFx1MEVBRC1cXHUwRUIwXFx1MEVCMlxcdTBFQjNcXHUwRUJEXFx1MEVDMC1cXHUwRUM0XFx1MEVDNlxcdTBFREMtXFx1MEVERlxcdTBGMDBcXHUwRjQwLVxcdTBGNDdcXHUwRjQ5LVxcdTBGNkNcXHUwRjg4LVxcdTBGOENcXHUxMDAwLVxcdTEwMkFcXHUxMDNGXFx1MTA1MC1cXHUxMDU1XFx1MTA1QS1cXHUxMDVEXFx1MTA2MVxcdTEwNjVcXHUxMDY2XFx1MTA2RS1cXHUxMDcwXFx1MTA3NS1cXHUxMDgxXFx1MTA4RVxcdTEwQTAtXFx1MTBDNVxcdTEwQzdcXHUxMENEXFx1MTBEMC1cXHUxMEZBXFx1MTBGQy1cXHUxMjQ4XFx1MTI0QS1cXHUxMjREXFx1MTI1MC1cXHUxMjU2XFx1MTI1OFxcdTEyNUEtXFx1MTI1RFxcdTEyNjAtXFx1MTI4OFxcdTEyOEEtXFx1MTI4RFxcdTEyOTAtXFx1MTJCMFxcdTEyQjItXFx1MTJCNVxcdTEyQjgtXFx1MTJCRVxcdTEyQzBcXHUxMkMyLVxcdTEyQzVcXHUxMkM4LVxcdTEyRDZcXHUxMkQ4LVxcdTEzMTBcXHUxMzEyLVxcdTEzMTVcXHUxMzE4LVxcdTEzNUFcXHUxMzgwLVxcdTEzOEZcXHUxM0EwLVxcdTEzRjRcXHUxNDAxLVxcdTE2NkNcXHUxNjZGLVxcdTE2N0ZcXHUxNjgxLVxcdTE2OUFcXHUxNkEwLVxcdTE2RUFcXHUxNzAwLVxcdTE3MENcXHUxNzBFLVxcdTE3MTFcXHUxNzIwLVxcdTE3MzFcXHUxNzQwLVxcdTE3NTFcXHUxNzYwLVxcdTE3NkNcXHUxNzZFLVxcdTE3NzBcXHUxNzgwLVxcdTE3QjNcXHUxN0Q3XFx1MTdEQ1xcdTE4MjAtXFx1MTg3N1xcdTE4ODAtXFx1MThBOFxcdTE4QUFcXHUxOEIwLVxcdTE4RjVcXHUxOTAwLVxcdTE5MUNcXHUxOTUwLVxcdTE5NkRcXHUxOTcwLVxcdTE5NzRcXHUxOTgwLVxcdTE5QUJcXHUxOUMxLVxcdTE5QzdcXHUxQTAwLVxcdTFBMTZcXHUxQTIwLVxcdTFBNTRcXHUxQUE3XFx1MUIwNS1cXHUxQjMzXFx1MUI0NS1cXHUxQjRCXFx1MUI4My1cXHUxQkEwXFx1MUJBRVxcdTFCQUZcXHUxQkJBLVxcdTFCRTVcXHUxQzAwLVxcdTFDMjNcXHUxQzRELVxcdTFDNEZcXHUxQzVBLVxcdTFDN0RcXHUxQ0U5LVxcdTFDRUNcXHUxQ0VFLVxcdTFDRjFcXHUxQ0Y1XFx1MUNGNlxcdTFEMDAtXFx1MURCRlxcdTFFMDAtXFx1MUYxNVxcdTFGMTgtXFx1MUYxRFxcdTFGMjAtXFx1MUY0NVxcdTFGNDgtXFx1MUY0RFxcdTFGNTAtXFx1MUY1N1xcdTFGNTlcXHUxRjVCXFx1MUY1RFxcdTFGNUYtXFx1MUY3RFxcdTFGODAtXFx1MUZCNFxcdTFGQjYtXFx1MUZCQ1xcdTFGQkVcXHUxRkMyLVxcdTFGQzRcXHUxRkM2LVxcdTFGQ0NcXHUxRkQwLVxcdTFGRDNcXHUxRkQ2LVxcdTFGREJcXHUxRkUwLVxcdTFGRUNcXHUxRkYyLVxcdTFGRjRcXHUxRkY2LVxcdTFGRkNcXHUyMDcxXFx1MjA3RlxcdTIwOTAtXFx1MjA5Q1xcdTIxMDJcXHUyMTA3XFx1MjEwQS1cXHUyMTEzXFx1MjExNVxcdTIxMTktXFx1MjExRFxcdTIxMjRcXHUyMTI2XFx1MjEyOFxcdTIxMkEtXFx1MjEyRFxcdTIxMkYtXFx1MjEzOVxcdTIxM0MtXFx1MjEzRlxcdTIxNDUtXFx1MjE0OVxcdTIxNEVcXHUyMTgzXFx1MjE4NFxcdTJDMDAtXFx1MkMyRVxcdTJDMzAtXFx1MkM1RVxcdTJDNjAtXFx1MkNFNFxcdTJDRUItXFx1MkNFRVxcdTJDRjJcXHUyQ0YzXFx1MkQwMC1cXHUyRDI1XFx1MkQyN1xcdTJEMkRcXHUyRDMwLVxcdTJENjdcXHUyRDZGXFx1MkQ4MC1cXHUyRDk2XFx1MkRBMC1cXHUyREE2XFx1MkRBOC1cXHUyREFFXFx1MkRCMC1cXHUyREI2XFx1MkRCOC1cXHUyREJFXFx1MkRDMC1cXHUyREM2XFx1MkRDOC1cXHUyRENFXFx1MkREMC1cXHUyREQ2XFx1MkREOC1cXHUyRERFXFx1MkUyRlxcdTMwMDVcXHUzMDA2XFx1MzAzMS1cXHUzMDM1XFx1MzAzQlxcdTMwM0NcXHUzMDQxLVxcdTMwOTZcXHUzMDlELVxcdTMwOUZcXHUzMEExLVxcdTMwRkFcXHUzMEZDLVxcdTMwRkZcXHUzMTA1LVxcdTMxMkRcXHUzMTMxLVxcdTMxOEVcXHUzMUEwLVxcdTMxQkFcXHUzMUYwLVxcdTMxRkZcXHUzNDAwLVxcdTREQjVcXHU0RTAwLVxcdTlGQ0NcXHVBMDAwLVxcdUE0OENcXHVBNEQwLVxcdUE0RkRcXHVBNTAwLVxcdUE2MENcXHVBNjEwLVxcdUE2MUZcXHVBNjJBXFx1QTYyQlxcdUE2NDAtXFx1QTY2RVxcdUE2N0YtXFx1QTY5N1xcdUE2QTAtXFx1QTZFNVxcdUE3MTctXFx1QTcxRlxcdUE3MjItXFx1QTc4OFxcdUE3OEItXFx1QTc4RVxcdUE3OTAtXFx1QTc5M1xcdUE3QTAtXFx1QTdBQVxcdUE3RjgtXFx1QTgwMVxcdUE4MDMtXFx1QTgwNVxcdUE4MDctXFx1QTgwQVxcdUE4MEMtXFx1QTgyMlxcdUE4NDAtXFx1QTg3M1xcdUE4ODItXFx1QThCM1xcdUE4RjItXFx1QThGN1xcdUE4RkJcXHVBOTBBLVxcdUE5MjVcXHVBOTMwLVxcdUE5NDZcXHVBOTYwLVxcdUE5N0NcXHVBOTg0LVxcdUE5QjJcXHVBOUNGXFx1QUEwMC1cXHVBQTI4XFx1QUE0MC1cXHVBQTQyXFx1QUE0NC1cXHVBQTRCXFx1QUE2MC1cXHVBQTc2XFx1QUE3QVxcdUFBODAtXFx1QUFBRlxcdUFBQjFcXHVBQUI1XFx1QUFCNlxcdUFBQjktXFx1QUFCRFxcdUFBQzBcXHVBQUMyXFx1QUFEQi1cXHVBQUREXFx1QUFFMC1cXHVBQUVBXFx1QUFGMi1cXHVBQUY0XFx1QUIwMS1cXHVBQjA2XFx1QUIwOS1cXHVBQjBFXFx1QUIxMS1cXHVBQjE2XFx1QUIyMC1cXHVBQjI2XFx1QUIyOC1cXHVBQjJFXFx1QUJDMC1cXHVBQkUyXFx1QUMwMC1cXHVEN0EzXFx1RDdCMC1cXHVEN0M2XFx1RDdDQi1cXHVEN0ZCXFx1RjkwMC1cXHVGQTZEXFx1RkE3MC1cXHVGQUQ5XFx1RkIwMC1cXHVGQjA2XFx1RkIxMy1cXHVGQjE3XFx1RkIxRFxcdUZCMUYtXFx1RkIyOFxcdUZCMkEtXFx1RkIzNlxcdUZCMzgtXFx1RkIzQ1xcdUZCM0VcXHVGQjQwXFx1RkI0MVxcdUZCNDNcXHVGQjQ0XFx1RkI0Ni1cXHVGQkIxXFx1RkJEMy1cXHVGRDNEXFx1RkQ1MC1cXHVGRDhGXFx1RkQ5Mi1cXHVGREM3XFx1RkRGMC1cXHVGREZCXFx1RkU3MC1cXHVGRTc0XFx1RkU3Ni1cXHVGRUZDXFx1RkYyMS1cXHVGRjNBXFx1RkY0MS1cXHVGRjVBXFx1RkY2Ni1cXHVGRkJFXFx1RkZDMi1cXHVGRkM3XFx1RkZDQS1cXHVGRkNGXFx1RkZEMi1cXHVGRkQ3XFx1RkZEQS1cXHVGRkRDLVxcdTA0MDAtXFx1MDRGRiddKykvZztcclxuICAgICAgICByZXR1cm4gdGV4dC5tYXRjaChyZWdleCkgPyAxIDogMDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgaW5qZWN0QXJyYXlcclxuICAgICAqL1xyXG4gICAgamV4Y2VsLmluamVjdEFycmF5ID0gZnVuY3Rpb24obywgaWR4LCBhcnIpIHtcclxuICAgICAgICByZXR1cm4gby5zbGljZSgwLCBpZHgpLmNvbmNhdChhcnIpLmNvbmNhdChvLnNsaWNlKGlkeCkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBsZXR0ZXIgYmFzZWQgb24gYSBudW1iZXJcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIGludGVnZXIgaVxyXG4gICAgICogQHJldHVybiBzdHJpbmcgbGV0dGVyXHJcbiAgICAgKi9cclxuICAgIGpleGNlbC5nZXRDb2x1bW5OYW1lID0gZnVuY3Rpb24oaSkge1xyXG4gICAgICAgIHZhciBsZXR0ZXIgPSAnJztcclxuICAgICAgICBpZiAoaSA+IDcwMSkge1xyXG4gICAgICAgICAgICBsZXR0ZXIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSg2NCArIHBhcnNlSW50KGkgLyA2NzYpKTtcclxuICAgICAgICAgICAgbGV0dGVyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoNjQgKyBwYXJzZUludCgoaSAlIDY3NikgLyAyNikpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaSA+IDI1KSB7XHJcbiAgICAgICAgICAgIGxldHRlciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDY0ICsgcGFyc2VJbnQoaSAvIDI2KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldHRlciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgKGkgJSAyNikpO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIGxldHRlcjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0IGV4Y2VsIGxpa2UgY29sdW1uIHRvIGpleGNlbCBpZFxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gc3RyaW5nIGlkXHJcbiAgICAgKiBAcmV0dXJuIHN0cmluZyBpZFxyXG4gICAgICovXHJcbiAgICBqZXhjZWwuZ2V0SWRGcm9tQ29sdW1uTmFtZSA9IGZ1bmN0aW9uIChpZCwgYXJyKSB7XHJcbiAgICAgICAgLy8gR2V0IHRoZSBsZXR0ZXJzXHJcbiAgICAgICAgdmFyIHQgPSAvXlthLXpBLVpdKy8uZXhlYyhpZCk7XHJcbiAgICBcclxuICAgICAgICBpZiAodCkge1xyXG4gICAgICAgICAgICAvLyBCYXNlIDI2IGNhbGN1bGF0aW9uXHJcbiAgICAgICAgICAgIHZhciBjb2RlID0gMDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0WzBdLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb2RlICs9IHBhcnNlSW50KHRbMF0uY2hhckNvZGVBdChpKSAtIDY0KSAqIE1hdGgucG93KDI2LCAodFswXS5sZW5ndGggLSAxIC0gaSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvZGUtLTtcclxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGpleGNlbCBzdGFydHMgb24gemVyb1xyXG4gICAgICAgICAgICBpZiAoY29kZSA8IDApIHtcclxuICAgICAgICAgICAgICAgIGNvZGUgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gTnVtYmVyXHJcbiAgICAgICAgICAgIHZhciBudW1iZXIgPSBwYXJzZUludCgvWzAtOV0rJC8uZXhlYyhpZCkpO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyID4gMCkge1xyXG4gICAgICAgICAgICAgICAgbnVtYmVyLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoYXJyID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGlkID0gWyBjb2RlLCBudW1iZXIgXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlkID0gY29kZSArICctJyArIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiBpZDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0IGpleGNlbCBpZCB0byBleGNlbCBsaWtlIGNvbHVtbiBuYW1lXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBzdHJpbmcgaWRcclxuICAgICAqIEByZXR1cm4gc3RyaW5nIGlkXHJcbiAgICAgKi9cclxuICAgIGpleGNlbC5nZXRDb2x1bW5OYW1lRnJvbUlkID0gZnVuY3Rpb24gKGNlbGxJZCkge1xyXG4gICAgICAgIGlmICghIEFycmF5LmlzQXJyYXkoY2VsbElkKSkge1xyXG4gICAgICAgICAgICBjZWxsSWQgPSBjZWxsSWQuc3BsaXQoJy0nKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gamV4Y2VsLmdldENvbHVtbk5hbWUocGFyc2VJbnQoY2VsbElkWzBdKSkgKyAocGFyc2VJbnQoY2VsbElkWzFdKSArIDEpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFZlcmlmeSBlbGVtZW50IGluc2lkZSBqZXhjZWwgdGFibGVcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHN0cmluZyBpZFxyXG4gICAgICogQHJldHVybiBzdHJpbmcgaWRcclxuICAgICAqL1xyXG4gICAgamV4Y2VsLmdldEVsZW1lbnQgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIGpleGNlbFNlY3Rpb24gPSAwO1xyXG4gICAgICAgIHZhciBqZXhjZWxFbGVtZW50ID0gMDtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHBhdGggKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2pleGNlbF9jb250YWluZXInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGpleGNlbEVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PSAnVEhFQUQnKSB7XHJcbiAgICAgICAgICAgICAgICBqZXhjZWxTZWN0aW9uID0gMTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LnRhZ05hbWUgPT0gJ1RCT0RZJykge1xyXG4gICAgICAgICAgICAgICAgamV4Y2VsU2VjdGlvbiA9IDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5wYXJlbnROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISBqZXhjZWxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aChlbGVtZW50LnBhcmVudE5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgcGF0aChlbGVtZW50KTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBbIGpleGNlbEVsZW1lbnQsIGpleGNlbFNlY3Rpb24gXTtcclxuICAgIH1cclxuXHJcbiAgICBqZXhjZWwuZG91YmxlRGlnaXRGb3JtYXQgPSBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgdiA9ICcnK3Y7XHJcbiAgICAgICAgaWYgKHYubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgdiA9ICcwJyt2O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdjtcclxuICAgIH1cclxuXHJcbiAgICBqZXhjZWwuY3JlYXRlRnJvbVRhYmxlID0gZnVuY3Rpb24oZWwsIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoZWwudGFnTmFtZSAhPSAnVEFCTEUnKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFbGVtZW50IGlzIG5vdCBhIHRhYmxlJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gQ29uZmlndXJhdGlvblxyXG4gICAgICAgICAgICBpZiAoISBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3B0aW9ucy5jb2x1bW5zID0gW107XHJcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgLy8gQ29sZ3JvdXBcclxuICAgICAgICAgICAgdmFyIGNvbGdyb3VwID0gZWwucXVlcnlTZWxlY3RvckFsbCgnY29sZ3JvdXAgPiBjb2wnKTtcclxuICAgICAgICAgICAgaWYgKGNvbGdyb3VwLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgLy8gR2V0IGNvbHVtbiB3aWR0aFxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xncm91cC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IGNvbGdyb3VwW2ldLnN0eWxlLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIHdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IGNvbGdyb3VwW2ldLmdldEF0dHJpYnV0ZSgnd2lkdGgnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IGNvbHVtbiB3aWR0aFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBvcHRpb25zLmNvbHVtbnNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY29sdW1uc1tpXSA9IHt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jb2x1bW5zW2ldLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBQYXJzZSBoZWFkZXJcclxuICAgICAgICAgICAgdmFyIHBhcnNlSGVhZGVyID0gZnVuY3Rpb24oaGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgd2lkdGggaW5mb3JtYXRpb25cclxuICAgICAgICAgICAgICAgIHZhciBpbmZvID0gaGVhZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gaW5mby53aWR0aCA+IDUwID8gaW5mby53aWR0aCA6IDUwO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBjb2x1bW4gb3B0aW9uXHJcbiAgICAgICAgICAgICAgICBpZiAoISBvcHRpb25zLmNvbHVtbnNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNvbHVtbnNbaV0gPSB7fTtcclxuICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyLmdldEF0dHJpYnV0ZSgnZGF0YS1jZWxsdHlwZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jb2x1bW5zW2ldLnR5cGUgPSBoZWFkZXIuZ2V0QXR0cmlidXRlKCdkYXRhLWNlbGx0eXBlJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY29sdW1uc1tpXS50eXBlID0gJ3RleHQnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jb2x1bW5zW2ldLndpZHRoID0gd2lkdGggKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jb2x1bW5zW2ldLnRpdGxlID0gaGVhZGVyLmlubmVySFRNTDtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuY29sdW1uc1tpXS5hbGlnbiA9IGhlYWRlci5zdHlsZS50ZXh0QWxpZ24gfHwgJ2NlbnRlcic7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEhlYWRlcnNcclxuICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCd0aGVhZCA+IHRyJyk7XHJcbiAgICAgICAgICAgIGlmIChoZWFkZXJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBsYXN0IHJvdyBpbiB0aGUgdGhlYWRcclxuICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzW2hlYWRlcnMubGVuZ3RoLTFdLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICAgICAgLy8gR28gdGhvdWdoIHRoZSBoZWFkZXJzXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhlYWRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJzZUhlYWRlcihoZWFkZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ29udGVudFxyXG4gICAgICAgICAgICB2YXIgcm93TnVtYmVyID0gMDtcclxuICAgICAgICAgICAgdmFyIG1lcmdlQ2VsbHMgPSB7fTtcclxuICAgICAgICAgICAgdmFyIHJvd3MgPSB7fTtcclxuICAgICAgICAgICAgdmFyIHN0eWxlID0ge307XHJcbiAgICAgICAgICAgIHZhciBjbGFzc2VzID0ge307XHJcblxyXG4gICAgICAgICAgICB2YXIgY29udGVudCA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlID4gdHIsIHRib2R5IHRyJyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY29udGVudC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhW3Jvd051bWJlcl0gPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnBhcnNlVGFibGVGaXJzdFJvd0FzSGVhZGVyID09IHRydWUgJiYgISBoZWFkZXJzLmxlbmd0aCAmJiBqID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRlbnRbal0uY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VIZWFkZXIoY29udGVudFtqXS5jaGlsZHJlbltpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRlbnRbal0uY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2lja2VkR3JpZCBmb3JtdWxhIGNvbXBhdGliaWxpdHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY29udGVudFtqXS5jaGlsZHJlbltpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZm9ybXVsYScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5zdWJzdHIoMCwxKSAhPSAnPScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9ICc9JyArIHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY29udGVudFtqXS5jaGlsZHJlbltpXS5pbm5lckhUTUw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhW3Jvd051bWJlcl0ucHVzaCh2YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBLZXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGxOYW1lID0gamV4Y2VsLmdldENvbHVtbk5hbWVGcm9tSWQoWyBpLCBqIF0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xhc3Nlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wID0gY29udGVudFtqXS5jaGlsZHJlbltpXS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0bXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXNbY2VsbE5hbWVdID0gdG1wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZWQgY2VsbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lcmdlZENvbHNwYW4gPSBwYXJzZUludChjb250ZW50W2pdLmNoaWxkcmVuW2ldLmdldEF0dHJpYnV0ZSgnY29sc3BhbicpKSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVyZ2VkUm93c3BhbiA9IHBhcnNlSW50KGNvbnRlbnRbal0uY2hpbGRyZW5baV0uZ2V0QXR0cmlidXRlKCdyb3dzcGFuJykpIHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXJnZWRDb2xzcGFuIHx8IG1lcmdlZFJvd3NwYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlQ2VsbHNbY2VsbE5hbWVdID0gWyBtZXJnZWRDb2xzcGFuIHx8IDEsIG1lcmdlZFJvd3NwYW4gfHwgMSBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBdm9pZCBwcm9ibGVtcyB3aXRoIGhpZGRlbiBjZWxsc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocyA9IGNvbnRlbnRbal0uY2hpbGRyZW5baV0uc3R5bGUgJiYgY29udGVudFtqXS5jaGlsZHJlbltpXS5zdHlsZS5kaXNwbGF5ID09ICdub25lJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFtqXS5jaGlsZHJlbltpXS5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHN0eWxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gY29udGVudFtqXS5jaGlsZHJlbltpXS5nZXRBdHRyaWJ1dGUoJ3N0eWxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZVtjZWxsTmFtZV0gPSBzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJvbGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRbal0uY2hpbGRyZW5baV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzdHlsZUJvbGQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlW2NlbGxOYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlW2NlbGxOYW1lXSArPSAnOyBmb250LXdlaWdodDpib2xkOyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlW2NlbGxOYW1lXSA9ICdmb250LXdlaWdodDpib2xkOyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJvdyBIZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudFtqXS5zdHlsZSAmJiBjb250ZW50W2pdLnN0eWxlLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzW2pdID0geyBoZWlnaHQ6IGNvbnRlbnRbal0uc3R5bGUuaGVpZ2h0IH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBJbmRleFxyXG4gICAgICAgICAgICAgICAgICAgIHJvd051bWJlcisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBTdHlsZVxyXG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc3R5bGUpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIC8vb3B0aW9ucy5zdHlsZSA9IHN0eWxlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIE1lcmdlZFxyXG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobWVyZ2VDZWxscykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5tZXJnZUNlbGxzID0gbWVyZ2VDZWxscztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBSb3cgaGVpZ2h0XHJcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhyb3dzKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLnJvd3MgPSByb3dzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIENsYXNzZXNcclxuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGNsYXNzZXMpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2xhc3NlcyA9IGNsYXNzZXM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE86IGRhdGEtaGlkZGVuY29sdW1ucz1cIjMsNFwiXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBJIGd1ZXNzIGluIHRlcm1zIHRoZSBiZXR0ZXIgY29sdW1uIHR5cGVcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMucGFyc2VUYWJsZUF1dG9DZWxsVHlwZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGF0dGVybiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHRpb25zLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlc3RDYWxlbmRhciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0dGVybltpXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb3B0aW9ucy5kYXRhLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9wdGlvbnMuZGF0YVtqXVtpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEgcGF0dGVybltpXVt2YWx1ZV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm5baV1bdmFsdWVdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuW2ldW3ZhbHVlXSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID4gMjUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISAodmFsdWUuc3Vic3RyKDQsMSkgPT0gJy0nICYmIHZhbHVlLnN1YnN0cig3LDEpID09ICctJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXN0Q2FsZW5kYXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlc3RDYWxlbmRhciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHBhdHRlcm5baV0pLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGVzdENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY29sdW1uc1tpXS50eXBlID0gJ2NhbGVuZGFyJztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRlc3QgPT0gdHJ1ZSAmJiBrZXlzID4gMSAmJiBrZXlzIDw9IHBhcnNlSW50KG9wdGlvbnMuZGF0YS5sZW5ndGggKiAwLjEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY29sdW1uc1tpXS50eXBlID0gJ2Ryb3Bkb3duJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jb2x1bW5zW2ldLnNvdXJjZSA9IE9iamVjdC5rZXlzKHBhdHRlcm5baV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSnF1ZXJ5IFN1cHBvcnRcclxuICAgICAqL1xyXG4gICAgaWYgKHR5cGVvZihqUXVlcnkpICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgKGZ1bmN0aW9uKCQpe1xyXG4gICAgICAgICAgICAkLmZuLmpleGNlbCA9IGZ1bmN0aW9uKG1ldGhvZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNwcmVhZHNoZWV0Q29udGFpbmVyID0gJCh0aGlzKS5nZXQoMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoISBzcHJlYWRzaGVldENvbnRhaW5lci5qZXhjZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gamV4Y2VsKCQodGhpcykuZ2V0KDApLCBhcmd1bWVudHNbMF0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3ByZWFkc2hlZXRDb250YWluZXIuamV4Y2VsW21ldGhvZF0uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIH0pKGpRdWVyeSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgLy8gQmFzZWQgb24gc3V0b2lrdSB3b3JrIChodHRwczovL2dpdGh1Yi5jb20vc3V0b2lrdSlcclxuICAgIFxyXG4gICAgdmFyIGVycm9yID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBleHBvcnRzID0ge307XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLm5pbCA9IG5ldyBFcnJvcignI05VTEwhJyk7XHJcbiAgICAgICAgZXhwb3J0cy5kaXYwID0gbmV3IEVycm9yKCcjRElWLzAhJyk7XHJcbiAgICAgICAgZXhwb3J0cy52YWx1ZSA9IG5ldyBFcnJvcignI1ZBTFVFIScpO1xyXG4gICAgICAgIGV4cG9ydHMucmVmID0gbmV3IEVycm9yKCcjUkVGIScpO1xyXG4gICAgICAgIGV4cG9ydHMubmFtZSA9IG5ldyBFcnJvcignI05BTUU/Jyk7XHJcbiAgICAgICAgZXhwb3J0cy5udW0gPSBuZXcgRXJyb3IoJyNOVU0hJyk7XHJcbiAgICAgICAgZXhwb3J0cy5uYSA9IG5ldyBFcnJvcignI04vQScpO1xyXG4gICAgICAgIGV4cG9ydHMuZXJyb3IgPSBuZXcgRXJyb3IoJyNFUlJPUiEnKTtcclxuICAgICAgICBleHBvcnRzLmRhdGEgPSBuZXcgRXJyb3IoJyNHRVRUSU5HX0RBVEEnKTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBleHBvcnRzO1xyXG4gICAgfSkoKTtcclxuICAgIFxyXG4gICAgdmFyIHV0aWxzID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBleHBvcnRzID0ge307XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLmZsYXR0ZW5TaGFsbG93ID0gZnVuY3Rpb24oYXJyYXkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcnJheSB8fCAhYXJyYXkucmVkdWNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gYXJyYXkucmVkdWNlKGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhSXNBcnJheSA9IEFycmF5LmlzQXJyYXkoYSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYklzQXJyYXkgPSBBcnJheS5pc0FycmF5KGIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoYUlzQXJyYXkgJiYgYklzQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5jb25jYXQoYik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoYUlzQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBhLnB1c2goYik7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChiSXNBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbIGEgXS5jb25jYXQoYik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBbIGEsIGIgXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuaXNGbGF0ID0gZnVuY3Rpb24oYXJyYXkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcnJheSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyYXlbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuZmxhdHRlbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZXhwb3J0cy5hcmdzVG9BcnJheS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHdoaWxlICghZXhwb3J0cy5pc0ZsYXQocmVzdWx0KSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZXhwb3J0cy5mbGF0dGVuU2hhbGxvdyhyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5hcmdzVG9BcnJheSA9IGZ1bmN0aW9uKGFyZ3MpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGV4cG9ydHMuYXJyYXlFYWNoKGFyZ3MsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMubnVtYmVycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgcG9zc2libGVOdW1iZXJzID0gdGhpcy5mbGF0dGVuLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIHJldHVybiBwb3NzaWJsZU51bWJlcnMuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIGVsID09PSAnbnVtYmVyJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuY2xlYW5GbG9hdCA9IGZ1bmN0aW9uKG51bWJlcikge1xyXG4gICAgICAgICAgICB2YXIgcG93ZXIgPSAxZTE0O1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW1iZXIgKiBwb3dlcikgLyBwb3dlcjtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5wYXJzZUJvb2wgPSBmdW5jdGlvbihib29sKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYm9vbCA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYm9vbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChib29sIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBib29sO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBib29sID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvb2wgIT09IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGJvb2wgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXAgPSBib29sLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodXAgPT09ICdUUlVFJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAodXAgPT09ICdGQUxTRScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoYm9vbCBpbnN0YW5jZW9mIERhdGUgJiYgIWlzTmFOKGJvb2wpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5wYXJzZU51bWJlciA9IGZ1bmN0aW9uKHN0cmluZykge1xyXG4gICAgICAgICAgICBpZiAoc3RyaW5nID09PSB1bmRlZmluZWQgfHwgc3RyaW5nID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghaXNOYU4oc3RyaW5nKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoc3RyaW5nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5wYXJzZU51bWJlckFycmF5ID0gZnVuY3Rpb24oYXJyKSB7XHJcbiAgICAgICAgICAgIHZhciBsZW47XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKCFhcnIgfHwgKGxlbiA9IGFyci5sZW5ndGgpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgcGFyc2VkO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHdoaWxlIChsZW4tLSkge1xyXG4gICAgICAgICAgICAgICAgcGFyc2VkID0gZXhwb3J0cy5wYXJzZU51bWJlcihhcnJbbGVuXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkID09PSBlcnJvci52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhcnJbbGVuXSA9IHBhcnNlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBhcnI7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMucGFyc2VNYXRyaXggPSBmdW5jdGlvbihtYXRyaXgpIHtcclxuICAgICAgICAgICAgdmFyIG47XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKCFtYXRyaXggfHwgKG4gPSBtYXRyaXgubGVuZ3RoKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBwbmFycjtcclxuICAgIFxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hdHJpeC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcG5hcnIgPSBleHBvcnRzLnBhcnNlTnVtYmVyQXJyYXkobWF0cml4W2ldKTtcclxuICAgICAgICAgICAgICAgIG1hdHJpeFtpXSA9IHBuYXJyO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAocG5hcnIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwbmFycjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBtYXRyaXg7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIHZhciBkMTkwMCA9IG5ldyBEYXRlKERhdGUuVVRDKDE5MDAsIDAsIDEpKTtcclxuICAgICAgICBleHBvcnRzLnBhcnNlRGF0ZSA9IGZ1bmN0aW9uKGRhdGUpIHtcclxuICAgICAgICAgICAgaWYgKCFpc05hTihkYXRlKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSBwYXJzZUludChkYXRlLCAxMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZCA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGQgPD0gNjApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoZDE5MDAuZ2V0VGltZSgpICsgKGQgLSAxKSAqIDg2NDAwMDAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkMTkwMC5nZXRUaW1lKCkgKyAoZCAtIDIpICogODY0MDAwMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgICAgICAgICAgICAgIGlmICghaXNOYU4oZGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMucGFyc2VEYXRlQXJyYXkgPSBmdW5jdGlvbihhcnIpIHtcclxuICAgICAgICAgICAgdmFyIGxlbiA9IGFyci5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBwYXJzZWQ7XHJcbiAgICAgICAgICAgIHdoaWxlIChsZW4tLSkge1xyXG4gICAgICAgICAgICAgICAgcGFyc2VkID0gdGhpcy5wYXJzZURhdGUoYXJyW2xlbl0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZCA9PT0gZXJyb3IudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXJyW2xlbl0gPSBwYXJzZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFycjtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5hbnlJc0Vycm9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBuID0gYXJndW1lbnRzLmxlbmd0aDtcclxuICAgICAgICAgICAgd2hpbGUgKG4tLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50c1tuXSBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLmFycmF5VmFsdWVzVG9OdW1iZXJzID0gZnVuY3Rpb24oYXJyKSB7XHJcbiAgICAgICAgICAgIHZhciBuID0gYXJyLmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGVsO1xyXG4gICAgICAgICAgICB3aGlsZSAobi0tKSB7XHJcbiAgICAgICAgICAgICAgICBlbCA9IGFycltuXTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZWwgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZWwgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJbbl0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGVsID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFycltuXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBudW1iZXIgPSB0aGlzLnBhcnNlTnVtYmVyKGVsKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobnVtYmVyIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyW25dID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJbbl0gPSBudW1iZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhcnI7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMucmVzdCA9IGZ1bmN0aW9uKGFycmF5LCBpZHgpIHtcclxuICAgICAgICAgICAgaWR4ID0gaWR4IHx8IDE7XHJcbiAgICAgICAgICAgIGlmICghYXJyYXkgfHwgdHlwZW9mIGFycmF5LnNsaWNlICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFycmF5LnNsaWNlKGlkeCk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuaW5pdGlhbCA9IGZ1bmN0aW9uKGFycmF5LCBpZHgpIHtcclxuICAgICAgICAgICAgaWR4ID0gaWR4IHx8IDE7XHJcbiAgICAgICAgICAgIGlmICghYXJyYXkgfHwgdHlwZW9mIGFycmF5LnNsaWNlICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFycmF5LnNsaWNlKDAsIGFycmF5Lmxlbmd0aCAtIGlkeCk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuYXJyYXlFYWNoID0gZnVuY3Rpb24oYXJyYXksIGl0ZXJhdGVlKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xLCBsZW5ndGggPSBhcnJheS5sZW5ndGg7XHJcbiAgICBcclxuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVyYXRlZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMudHJhbnNwb3NlID0gZnVuY3Rpb24obWF0cml4KSB7XHJcbiAgICAgICAgICAgIGlmICghbWF0cml4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gbWF0cml4WzBdLm1hcChmdW5jdGlvbihjb2wsIGkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRyaXgubWFwKGZ1bmN0aW9uKHJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb3dbaV07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBleHBvcnRzO1xyXG4gICAgfSkoKTtcclxuICAgIFxyXG4gICAgamV4Y2VsLm1ldGhvZHMgPSB7fTtcclxuICAgIFxyXG4gICAgamV4Y2VsLm1ldGhvZHMuZGF0ZXRpbWUgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGV4cG9ydHMgPSB7fTtcclxuICAgIFxyXG4gICAgICAgIHZhciBkMTkwMCA9IG5ldyBEYXRlKDE5MDAsIDAsIDEpO1xyXG4gICAgICAgIHZhciBXRUVLX1NUQVJUUyA9IFtcclxuICAgICAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAxLFxyXG4gICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAxLFxyXG4gICAgICAgICAgICAyLFxyXG4gICAgICAgICAgICAzLFxyXG4gICAgICAgICAgICA0LFxyXG4gICAgICAgICAgICA1LFxyXG4gICAgICAgICAgICA2LFxyXG4gICAgICAgICAgICAwXHJcbiAgICAgICAgXTtcclxuICAgICAgICB2YXIgV0VFS19UWVBFUyA9IFtcclxuICAgICAgICAgICAgW10sXHJcbiAgICAgICAgICAgIFsxLCAyLCAzLCA0LCA1LCA2LCA3XSxcclxuICAgICAgICAgICAgWzcsIDEsIDIsIDMsIDQsIDUsIDZdLFxyXG4gICAgICAgICAgICBbNiwgMCwgMSwgMiwgMywgNCwgNV0sXHJcbiAgICAgICAgICAgIFtdLFxyXG4gICAgICAgICAgICBbXSxcclxuICAgICAgICAgICAgW10sXHJcbiAgICAgICAgICAgIFtdLFxyXG4gICAgICAgICAgICBbXSxcclxuICAgICAgICAgICAgW10sXHJcbiAgICAgICAgICAgIFtdLFxyXG4gICAgICAgICAgICBbNywgMSwgMiwgMywgNCwgNSwgNl0sXHJcbiAgICAgICAgICAgIFs2LCA3LCAxLCAyLCAzLCA0LCA1XSxcclxuICAgICAgICAgICAgWzUsIDYsIDcsIDEsIDIsIDMsIDRdLFxyXG4gICAgICAgICAgICBbNCwgNSwgNiwgNywgMSwgMiwgM10sXHJcbiAgICAgICAgICAgIFszLCA0LCA1LCA2LCA3LCAxLCAyXSxcclxuICAgICAgICAgICAgWzIsIDMsIDQsIDUsIDYsIDcsIDFdLFxyXG4gICAgICAgICAgICBbMSwgMiwgMywgNCwgNSwgNiwgN11cclxuICAgICAgICBdO1xyXG4gICAgICAgIHZhciBXRUVLRU5EX1RZUEVTID0gW1xyXG4gICAgICAgICAgICBbXSxcclxuICAgICAgICAgICAgWzYsIDBdLFxyXG4gICAgICAgICAgICBbMCwgMV0sXHJcbiAgICAgICAgICAgIFsxLCAyXSxcclxuICAgICAgICAgICAgWzIsIDNdLFxyXG4gICAgICAgICAgICBbMywgNF0sXHJcbiAgICAgICAgICAgIFs0LCA1XSxcclxuICAgICAgICAgICAgWzUsIDZdLFxyXG4gICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgdW5kZWZpbmVkLCBbMCwgMF0sXHJcbiAgICAgICAgICAgIFsxLCAxXSxcclxuICAgICAgICAgICAgWzIsIDJdLFxyXG4gICAgICAgICAgICBbMywgM10sXHJcbiAgICAgICAgICAgIFs0LCA0XSxcclxuICAgICAgICAgICAgWzUsIDVdLFxyXG4gICAgICAgICAgICBbNiwgNl1cclxuICAgICAgICBdO1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5EQVRFID0gZnVuY3Rpb24oeWVhciwgbW9udGgsIGRheSkge1xyXG4gICAgICAgICAgICB5ZWFyID0gdXRpbHMucGFyc2VOdW1iZXIoeWVhcik7XHJcbiAgICAgICAgICAgIG1vbnRoID0gdXRpbHMucGFyc2VOdW1iZXIobW9udGgpO1xyXG4gICAgICAgICAgICBkYXkgPSB1dGlscy5wYXJzZU51bWJlcihkYXkpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcih5ZWFyLCBtb250aCwgZGF5KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh5ZWFyIDwgMCB8fCBtb250aCA8IDAgfHwgZGF5IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgZGF5KTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGU7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuREFURVZBTFVFID0gZnVuY3Rpb24oZGF0ZV90ZXh0KSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0ZV90ZXh0ICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBkYXRlID0gRGF0ZS5wYXJzZShkYXRlX3RleHQpO1xyXG4gICAgICAgICAgICBpZiAoaXNOYU4oZGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0ZSA8PSAtMjIwMzg5MTIwMDAwMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChkYXRlIC0gZDE5MDApIC8gODY0MDAwMDAgKyAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAoZGF0ZSAtIGQxOTAwKSAvIDg2NDAwMDAwICsgMjtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5EQVkgPSBmdW5jdGlvbihzZXJpYWxfbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRlID0gdXRpbHMucGFyc2VEYXRlKHNlcmlhbF9udW1iZXIpO1xyXG4gICAgICAgICAgICBpZiAoZGF0ZSBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZS5nZXREYXRlKCk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuREFZUyA9IGZ1bmN0aW9uKGVuZF9kYXRlLCBzdGFydF9kYXRlKSB7XHJcbiAgICAgICAgICAgIGVuZF9kYXRlID0gdXRpbHMucGFyc2VEYXRlKGVuZF9kYXRlKTtcclxuICAgICAgICAgICAgc3RhcnRfZGF0ZSA9IHV0aWxzLnBhcnNlRGF0ZShzdGFydF9kYXRlKTtcclxuICAgICAgICAgICAgaWYgKGVuZF9kYXRlIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbmRfZGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc3RhcnRfZGF0ZSBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhcnRfZGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc2VyaWFsKGVuZF9kYXRlKSAtIHNlcmlhbChzdGFydF9kYXRlKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5EQVlTMzYwID0gZnVuY3Rpb24oc3RhcnRfZGF0ZSwgZW5kX2RhdGUsIG1ldGhvZCkge1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkVEQVRFID0gZnVuY3Rpb24oc3RhcnRfZGF0ZSwgbW9udGhzKSB7XHJcbiAgICAgICAgICAgIHN0YXJ0X2RhdGUgPSB1dGlscy5wYXJzZURhdGUoc3RhcnRfZGF0ZSk7XHJcbiAgICAgICAgICAgIGlmIChzdGFydF9kYXRlIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdGFydF9kYXRlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpc05hTihtb250aHMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbW9udGhzID0gcGFyc2VJbnQobW9udGhzLCAxMCk7XHJcbiAgICAgICAgICAgIHN0YXJ0X2RhdGUuc2V0TW9udGgoc3RhcnRfZGF0ZS5nZXRNb250aCgpICsgbW9udGhzKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNlcmlhbChzdGFydF9kYXRlKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5FT01PTlRIID0gZnVuY3Rpb24oc3RhcnRfZGF0ZSwgbW9udGhzKSB7XHJcbiAgICAgICAgICAgIHN0YXJ0X2RhdGUgPSB1dGlscy5wYXJzZURhdGUoc3RhcnRfZGF0ZSk7XHJcbiAgICAgICAgICAgIGlmIChzdGFydF9kYXRlIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdGFydF9kYXRlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpc05hTihtb250aHMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbW9udGhzID0gcGFyc2VJbnQobW9udGhzLCAxMCk7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXJpYWwobmV3IERhdGUoc3RhcnRfZGF0ZS5nZXRGdWxsWWVhcigpLCBzdGFydF9kYXRlLmdldE1vbnRoKCkgKyBtb250aHMgKyAxLCAwKSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSE9VUiA9IGZ1bmN0aW9uKHNlcmlhbF9udW1iZXIpIHtcclxuICAgICAgICAgICAgc2VyaWFsX251bWJlciA9IHV0aWxzLnBhcnNlRGF0ZShzZXJpYWxfbnVtYmVyKTtcclxuICAgICAgICAgICAgaWYgKHNlcmlhbF9udW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlcmlhbF9udW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNlcmlhbF9udW1iZXIuZ2V0SG91cnMoKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JTlRFUlZBTCA9IGZ1bmN0aW9uKHNlY29uZCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNlY29uZCAhPT0gJ251bWJlcicgJiYgdHlwZW9mIHNlY29uZCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlY29uZCA9IHBhcnNlSW50KHNlY29uZCwgMTApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIHllYXIgID0gTWF0aC5mbG9vcihzZWNvbmQvOTQ2MDgwMDAwKTtcclxuICAgICAgICAgICAgc2Vjb25kICAgID0gc2Vjb25kJTk0NjA4MDAwMDtcclxuICAgICAgICAgICAgdmFyIG1vbnRoID0gTWF0aC5mbG9vcihzZWNvbmQvMjU5MjAwMCk7XHJcbiAgICAgICAgICAgIHNlY29uZCAgICA9IHNlY29uZCUyNTkyMDAwO1xyXG4gICAgICAgICAgICB2YXIgZGF5ICAgPSBNYXRoLmZsb29yKHNlY29uZC84NjQwMCk7XHJcbiAgICAgICAgICAgIHNlY29uZCAgICA9IHNlY29uZCU4NjQwMDtcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgaG91ciAgPSBNYXRoLmZsb29yKHNlY29uZC8zNjAwKTtcclxuICAgICAgICAgICAgc2Vjb25kICAgID0gc2Vjb25kJTM2MDA7XHJcbiAgICAgICAgICAgIHZhciBtaW4gICA9IE1hdGguZmxvb3Ioc2Vjb25kLzYwKTtcclxuICAgICAgICAgICAgc2Vjb25kICAgID0gc2Vjb25kJTYwO1xyXG4gICAgICAgICAgICB2YXIgc2VjICAgPSBzZWNvbmQ7XHJcbiAgICBcclxuICAgICAgICAgICAgeWVhciAgPSAoeWVhciAgPiAwKSA/IHllYXIgICsgJ1knIDogJyc7XHJcbiAgICAgICAgICAgIG1vbnRoID0gKG1vbnRoID4gMCkgPyBtb250aCArICdNJyA6ICcnO1xyXG4gICAgICAgICAgICBkYXkgICA9IChkYXkgICA+IDApID8gZGF5ICAgKyAnRCcgOiAnJztcclxuICAgICAgICAgICAgaG91ciAgPSAoaG91ciAgPiAwKSA/IGhvdXIgICsgJ0gnIDogJyc7XHJcbiAgICAgICAgICAgIG1pbiAgID0gKG1pbiAgID4gMCkgPyBtaW4gICArICdNJyA6ICcnO1xyXG4gICAgICAgICAgICBzZWMgICA9IChzZWMgICA+IDApID8gc2VjICAgKyAnUycgOiAnJztcclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gJ1AnICsgeWVhciArIG1vbnRoICsgZGF5ICsgJ1QnICsgaG91ciArIG1pbiArIHNlYztcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JU09XRUVLTlVNID0gZnVuY3Rpb24oZGF0ZSkge1xyXG4gICAgICAgICAgICBkYXRlID0gdXRpbHMucGFyc2VEYXRlKGRhdGUpO1xyXG4gICAgICAgICAgICBpZiAoZGF0ZSBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGRhdGUuc2V0SG91cnMoMCwgMCwgMCk7XHJcbiAgICAgICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIDQgLSAoZGF0ZS5nZXREYXkoKSB8fCA3KSk7XHJcbiAgICAgICAgICAgIHZhciB5ZWFyU3RhcnQgPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIDAsIDEpO1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKCgoKGRhdGUgLSB5ZWFyU3RhcnQpIC8gODY0MDAwMDApICsgMSkgLyA3KTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5NSU5VVEUgPSBmdW5jdGlvbihzZXJpYWxfbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHNlcmlhbF9udW1iZXIgPSB1dGlscy5wYXJzZURhdGUoc2VyaWFsX251bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChzZXJpYWxfbnVtYmVyIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZXJpYWxfbnVtYmVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzZXJpYWxfbnVtYmVyLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5NT05USCA9IGZ1bmN0aW9uKHNlcmlhbF9udW1iZXIpIHtcclxuICAgICAgICAgICAgc2VyaWFsX251bWJlciA9IHV0aWxzLnBhcnNlRGF0ZShzZXJpYWxfbnVtYmVyKTtcclxuICAgICAgICAgICAgaWYgKHNlcmlhbF9udW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlcmlhbF9udW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNlcmlhbF9udW1iZXIuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuTkVUV09SS0RBWVMgPSBmdW5jdGlvbihzdGFydF9kYXRlLCBlbmRfZGF0ZSwgaG9saWRheXMpIHtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5ORVRXT1JLREFZUy5JTlRMID0gZnVuY3Rpb24oc3RhcnRfZGF0ZSwgZW5kX2RhdGUsIHdlZWtlbmQsIGhvbGlkYXlzKSB7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuTk9XID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlNFQ09ORCA9IGZ1bmN0aW9uKHNlcmlhbF9udW1iZXIpIHtcclxuICAgICAgICAgICAgc2VyaWFsX251bWJlciA9IHV0aWxzLnBhcnNlRGF0ZShzZXJpYWxfbnVtYmVyKTtcclxuICAgICAgICAgICAgaWYgKHNlcmlhbF9udW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlcmlhbF9udW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNlcmlhbF9udW1iZXIuZ2V0U2Vjb25kcygpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlRJTUUgPSBmdW5jdGlvbihob3VyLCBtaW51dGUsIHNlY29uZCkge1xyXG4gICAgICAgICAgICBob3VyID0gdXRpbHMucGFyc2VOdW1iZXIoaG91cik7XHJcbiAgICAgICAgICAgIG1pbnV0ZSA9IHV0aWxzLnBhcnNlTnVtYmVyKG1pbnV0ZSk7XHJcbiAgICAgICAgICAgIHNlY29uZCA9IHV0aWxzLnBhcnNlTnVtYmVyKHNlY29uZCk7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKGhvdXIsIG1pbnV0ZSwgc2Vjb25kKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChob3VyIDwgMCB8fCBtaW51dGUgPCAwIHx8IHNlY29uZCA8IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICgzNjAwICogaG91ciArIDYwICogbWludXRlICsgc2Vjb25kKSAvIDg2NDAwO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlRJTUVWQUxVRSA9IGZ1bmN0aW9uKHRpbWVfdGV4dCkge1xyXG4gICAgICAgICAgICB0aW1lX3RleHQgPSB1dGlscy5wYXJzZURhdGUodGltZV90ZXh0KTtcclxuICAgICAgICAgICAgaWYgKHRpbWVfdGV4dCBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGltZV90ZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAoMzYwMCAqIHRpbWVfdGV4dC5nZXRIb3VycygpICsgNjAgKiB0aW1lX3RleHQuZ2V0TWludXRlcygpICsgdGltZV90ZXh0LmdldFNlY29uZHMoKSkgLyA4NjQwMDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5UT0RBWSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5XRUVLREFZID0gZnVuY3Rpb24oc2VyaWFsX251bWJlciwgcmV0dXJuX3R5cGUpIHtcclxuICAgICAgICAgICAgc2VyaWFsX251bWJlciA9IHV0aWxzLnBhcnNlRGF0ZShzZXJpYWxfbnVtYmVyKTtcclxuICAgICAgICAgICAgaWYgKHNlcmlhbF9udW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlcmlhbF9udW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHJldHVybl90eXBlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybl90eXBlID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZGF5ID0gc2VyaWFsX251bWJlci5nZXREYXkoKTtcclxuICAgICAgICAgICAgcmV0dXJuIFdFRUtfVFlQRVNbcmV0dXJuX3R5cGVdW2RheV07XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuV0VFS05VTSA9IGZ1bmN0aW9uKHNlcmlhbF9udW1iZXIsIHJldHVybl90eXBlKSB7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuV09SS0RBWSA9IGZ1bmN0aW9uKHN0YXJ0X2RhdGUsIGRheXMsIGhvbGlkYXlzKSB7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuV09SS0RBWS5JTlRMID0gZnVuY3Rpb24oc3RhcnRfZGF0ZSwgZGF5cywgd2Vla2VuZCwgaG9saWRheXMpIHtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5ZRUFSID0gZnVuY3Rpb24oc2VyaWFsX251bWJlcikge1xyXG4gICAgICAgICAgICBzZXJpYWxfbnVtYmVyID0gdXRpbHMucGFyc2VEYXRlKHNlcmlhbF9udW1iZXIpO1xyXG4gICAgICAgICAgICBpZiAoc2VyaWFsX251bWJlciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VyaWFsX251bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc2VyaWFsX251bWJlci5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBpc0xlYXBZZWFyKHllYXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIDEsIDI5KS5nZXRNb250aCgpID09PSAxO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuWUVBUkZSQUMgPSBmdW5jdGlvbihzdGFydF9kYXRlLCBlbmRfZGF0ZSwgYmFzaXMpIHtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gc2VyaWFsKGRhdGUpIHtcclxuICAgICAgICAgICAgdmFyIGFkZE9uID0gKGRhdGUgPiAtMjIwMzg5MTIwMDAwMCk/MjoxO1xyXG4gICAgICAgICAgICByZXR1cm4gKGRhdGUgLSBkMTkwMCkgLyA4NjQwMDAwMCArIGFkZE9uO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiBleHBvcnRzO1xyXG4gICAgfSkoKTtcclxuICAgIFxyXG4gICAgamV4Y2VsLm1ldGhvZHMuZGF0YWJhc2UgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGV4cG9ydHMgPSB7fTtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbXBhY3QoYXJyYXkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcnJheSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFhcnJheVtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goYXJyYXlbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5GSU5ERklFTEQgPSBmdW5jdGlvbihkYXRhYmFzZSwgdGl0bGUpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gbnVsbDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhYmFzZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFiYXNlW2ldWzBdID09PSB0aXRsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiB0aGUgaW5wdXQgZmllbGQgdGl0bGUgaXMgaW5jb3JyZWN0XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBmaW5kUmVzdWx0SW5kZXgoZGF0YWJhc2UsIGNyaXRlcmlhcykge1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IHt9O1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGRhdGFiYXNlWzBdLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBtYXRjaGVzW2ldID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbWF4Q3JpdGVyaWFMZW5ndGggPSBjcml0ZXJpYXNbMF0ubGVuZ3RoO1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAxOyBpIDwgY3JpdGVyaWFzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3JpdGVyaWFzW2ldLmxlbmd0aCA+IG1heENyaXRlcmlhTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4Q3JpdGVyaWFMZW5ndGggPSBjcml0ZXJpYXNbaV0ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgZm9yICh2YXIgayA9IDE7IGsgPCBkYXRhYmFzZS5sZW5ndGg7ICsraykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IDE7IGwgPCBkYXRhYmFzZVtrXS5sZW5ndGg7ICsrbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Q3JpdGVyaWFSZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaGFzTWF0Y2hpbmdDcml0ZXJpYSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY3JpdGVyaWFzLmxlbmd0aDsgKytqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjcml0ZXJpYSA9IGNyaXRlcmlhc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNyaXRlcmlhLmxlbmd0aCA8IG1heENyaXRlcmlhTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjcml0ZXJpYUZpZWxkID0gY3JpdGVyaWFbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhYmFzZVtrXVswXSAhPT0gY3JpdGVyaWFGaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzTWF0Y2hpbmdDcml0ZXJpYSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHAgPSAxOyBwIDwgY3JpdGVyaWEubGVuZ3RoOyArK3ApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDcml0ZXJpYVJlc3VsdCA9IGN1cnJlbnRDcml0ZXJpYVJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCBldmFsKGRhdGFiYXNlW2tdW2xdICsgY3JpdGVyaWFbcF0pOyAvLyBqc2hpbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZTpsaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc01hdGNoaW5nQ3JpdGVyaWEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlc1tsXSA9IG1hdGNoZXNbbF0gJiYgY3VycmVudENyaXRlcmlhUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBkYXRhYmFzZVswXS5sZW5ndGg7ICsrbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZXNbbl0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuIC0gMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvLyBEYXRhYmFzZSBmdW5jdGlvbnNcclxuICAgICAgICBleHBvcnRzLkRBVkVSQUdFID0gZnVuY3Rpb24oZGF0YWJhc2UsIGZpZWxkLCBjcml0ZXJpYSkge1xyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgZmllbGQgaXMgbm90IGEgbnVtYmVyIGFuZCBub3QgYSBzdHJpbmdcclxuICAgICAgICAgICAgaWYgKGlzTmFOKGZpZWxkKSAmJiAodHlwZW9mIGZpZWxkICE9PSBcInN0cmluZ1wiKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByZXN1bHRJbmRleGVzID0gZmluZFJlc3VsdEluZGV4KGRhdGFiYXNlLCBjcml0ZXJpYSk7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRGaWVsZHMgPSBbXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWVsZCA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZXhwb3J0cy5GSU5ERklFTEQoZGF0YWJhc2UsIGZpZWxkKTtcclxuICAgICAgICAgICAgICAgIHRhcmdldEZpZWxkcyA9IHV0aWxzLnJlc3QoZGF0YWJhc2VbaW5kZXhdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldEZpZWxkcyA9IHV0aWxzLnJlc3QoZGF0YWJhc2VbZmllbGRdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc3VtID0gMDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHRJbmRleGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBzdW0gKz0gdGFyZ2V0RmllbGRzW3Jlc3VsdEluZGV4ZXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRJbmRleGVzLmxlbmd0aCA9PT0gMCA/IGVycm9yLmRpdjAgOiBzdW0gLyByZXN1bHRJbmRleGVzLmxlbmd0aDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5EQ09VTlQgPSBmdW5jdGlvbihkYXRhYmFzZSwgZmllbGQsIGNyaXRlcmlhKSB7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuRENPVU5UQSA9IGZ1bmN0aW9uKGRhdGFiYXNlLCBmaWVsZCwgY3JpdGVyaWEpIHtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5ER0VUID0gZnVuY3Rpb24oZGF0YWJhc2UsIGZpZWxkLCBjcml0ZXJpYSkge1xyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgZmllbGQgaXMgbm90IGEgbnVtYmVyIGFuZCBub3QgYSBzdHJpbmdcclxuICAgICAgICAgICAgaWYgKGlzTmFOKGZpZWxkKSAmJiAodHlwZW9mIGZpZWxkICE9PSBcInN0cmluZ1wiKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByZXN1bHRJbmRleGVzID0gZmluZFJlc3VsdEluZGV4KGRhdGFiYXNlLCBjcml0ZXJpYSk7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRGaWVsZHMgPSBbXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWVsZCA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZXhwb3J0cy5GSU5ERklFTEQoZGF0YWJhc2UsIGZpZWxkKTtcclxuICAgICAgICAgICAgICAgIHRhcmdldEZpZWxkcyA9IHV0aWxzLnJlc3QoZGF0YWJhc2VbaW5kZXhdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldEZpZWxkcyA9IHV0aWxzLnJlc3QoZGF0YWJhc2VbZmllbGRdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgbm8gcmVjb3JkIG1lZXRzIHRoZSBjcml0ZXJpYVxyXG4gICAgICAgICAgICBpZiAocmVzdWx0SW5kZXhlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBSZXR1cm5zIHRoZSAjTlVNISBlcnJvciB2YWx1ZSBiZWNhdXNlIG1vcmUgdGhhbiBvbmUgcmVjb3JkIG1lZXRzIHRoZVxyXG4gICAgICAgICAgICAvLyBjcml0ZXJpYVxyXG4gICAgICAgICAgICBpZiAocmVzdWx0SW5kZXhlcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHRhcmdldEZpZWxkc1tyZXN1bHRJbmRleGVzWzBdXTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5ETUFYID0gZnVuY3Rpb24oZGF0YWJhc2UsIGZpZWxkLCBjcml0ZXJpYSkge1xyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgZmllbGQgaXMgbm90IGEgbnVtYmVyIGFuZCBub3QgYSBzdHJpbmdcclxuICAgICAgICAgICAgaWYgKGlzTmFOKGZpZWxkKSAmJiAodHlwZW9mIGZpZWxkICE9PSBcInN0cmluZ1wiKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByZXN1bHRJbmRleGVzID0gZmluZFJlc3VsdEluZGV4KGRhdGFiYXNlLCBjcml0ZXJpYSk7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRGaWVsZHMgPSBbXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWVsZCA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZXhwb3J0cy5GSU5ERklFTEQoZGF0YWJhc2UsIGZpZWxkKTtcclxuICAgICAgICAgICAgICAgIHRhcmdldEZpZWxkcyA9IHV0aWxzLnJlc3QoZGF0YWJhc2VbaW5kZXhdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldEZpZWxkcyA9IHV0aWxzLnJlc3QoZGF0YWJhc2VbZmllbGRdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbWF4VmFsdWUgPSB0YXJnZXRGaWVsZHNbcmVzdWx0SW5kZXhlc1swXV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgcmVzdWx0SW5kZXhlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1heFZhbHVlIDwgdGFyZ2V0RmllbGRzW3Jlc3VsdEluZGV4ZXNbaV1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4VmFsdWUgPSB0YXJnZXRGaWVsZHNbcmVzdWx0SW5kZXhlc1tpXV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1heFZhbHVlO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkRNSU4gPSBmdW5jdGlvbihkYXRhYmFzZSwgZmllbGQsIGNyaXRlcmlhKSB7XHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBmaWVsZCBpcyBub3QgYSBudW1iZXIgYW5kIG5vdCBhIHN0cmluZ1xyXG4gICAgICAgICAgICBpZiAoaXNOYU4oZmllbGQpICYmICh0eXBlb2YgZmllbGQgIT09IFwic3RyaW5nXCIpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHJlc3VsdEluZGV4ZXMgPSBmaW5kUmVzdWx0SW5kZXgoZGF0YWJhc2UsIGNyaXRlcmlhKTtcclxuICAgICAgICAgICAgdmFyIHRhcmdldEZpZWxkcyA9IFtdO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGZpZWxkID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBleHBvcnRzLkZJTkRGSUVMRChkYXRhYmFzZSwgZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0RmllbGRzID0gdXRpbHMucmVzdChkYXRhYmFzZVtpbmRleF0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0RmllbGRzID0gdXRpbHMucmVzdChkYXRhYmFzZVtmaWVsZF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBtaW5WYWx1ZSA9IHRhcmdldEZpZWxkc1tyZXN1bHRJbmRleGVzWzBdXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCByZXN1bHRJbmRleGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobWluVmFsdWUgPiB0YXJnZXRGaWVsZHNbcmVzdWx0SW5kZXhlc1tpXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW5WYWx1ZSA9IHRhcmdldEZpZWxkc1tyZXN1bHRJbmRleGVzW2ldXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbWluVmFsdWU7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuRFBST0RVQ1QgPSBmdW5jdGlvbihkYXRhYmFzZSwgZmllbGQsIGNyaXRlcmlhKSB7XHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBmaWVsZCBpcyBub3QgYSBudW1iZXIgYW5kIG5vdCBhIHN0cmluZ1xyXG4gICAgICAgICAgICBpZiAoaXNOYU4oZmllbGQpICYmICh0eXBlb2YgZmllbGQgIT09IFwic3RyaW5nXCIpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHJlc3VsdEluZGV4ZXMgPSBmaW5kUmVzdWx0SW5kZXgoZGF0YWJhc2UsIGNyaXRlcmlhKTtcclxuICAgICAgICAgICAgdmFyIHRhcmdldEZpZWxkcyA9IFtdO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGZpZWxkID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBleHBvcnRzLkZJTkRGSUVMRChkYXRhYmFzZSwgZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0RmllbGRzID0gdXRpbHMucmVzdChkYXRhYmFzZVtpbmRleF0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0RmllbGRzID0gdXRpbHMucmVzdChkYXRhYmFzZVtmaWVsZF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRWYWx1ZXMgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHRJbmRleGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRWYWx1ZXNbaV0gPSB0YXJnZXRGaWVsZHNbcmVzdWx0SW5kZXhlc1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGFyZ2V0VmFsdWVzID0gY29tcGFjdCh0YXJnZXRWYWx1ZXMpO1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gMTtcclxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRhcmdldFZhbHVlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICo9IHRhcmdldFZhbHVlc1tpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkRTVERFViA9IGZ1bmN0aW9uKGRhdGFiYXNlLCBmaWVsZCwgY3JpdGVyaWEpIHtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5EU1RERVZQID0gZnVuY3Rpb24oZGF0YWJhc2UsIGZpZWxkLCBjcml0ZXJpYSkge1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkRTVU0gPSBmdW5jdGlvbihkYXRhYmFzZSwgZmllbGQsIGNyaXRlcmlhKSB7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuRFZBUiA9IGZ1bmN0aW9uKGRhdGFiYXNlLCBmaWVsZCwgY3JpdGVyaWEpIHtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5EVkFSUCA9IGZ1bmN0aW9uKGRhdGFiYXNlLCBmaWVsZCwgY3JpdGVyaWEpIHtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5NQVRDSCA9IGZ1bmN0aW9uKGxvb2t1cFZhbHVlLCBsb29rdXBBcnJheSwgbWF0Y2hUeXBlKSB7XHJcbiAgICAgICAgICAgIGlmICghbG9va3VwVmFsdWUgJiYgIWxvb2t1cEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubmE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIG1hdGNoVHlwZSA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCEobG9va3VwQXJyYXkgaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5uYTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobWF0Y2hUeXBlICE9PSAtMSAmJiBtYXRjaFR5cGUgIT09IDAgJiYgbWF0Y2hUeXBlICE9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubmE7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgaW5kZXg7XHJcbiAgICAgICAgICAgIHZhciBpbmRleFZhbHVlO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGxvb2t1cEFycmF5Lmxlbmd0aDsgaWR4KyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChtYXRjaFR5cGUgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobG9va3VwQXJyYXlbaWR4XSA9PT0gbG9va3VwVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkeCArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsb29rdXBBcnJheVtpZHhdIDwgbG9va3VwVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbmRleFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGlkeCArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleFZhbHVlID0gbG9va3VwQXJyYXlbaWR4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsb29rdXBBcnJheVtpZHhdID4gaW5kZXhWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpZHggKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhWYWx1ZSA9IGxvb2t1cEFycmF5W2lkeF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hdGNoVHlwZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbG9va3VwVmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvb2t1cFZhbHVlID0gbG9va3VwVmFsdWUucmVwbGFjZSgvXFw/L2csICcuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb29rdXBBcnJheVtpZHhdLnRvTG93ZXJDYXNlKCkubWF0Y2gobG9va3VwVmFsdWUudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpZHggKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvb2t1cEFycmF5W2lkeF0gPT09IGxvb2t1cFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWR4ICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hUeXBlID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb29rdXBBcnJheVtpZHhdID09PSBsb29rdXBWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWR4ICsgMTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxvb2t1cEFycmF5W2lkeF0gPiBsb29rdXBWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWluZGV4VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaWR4ICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4VmFsdWUgPSBsb29rdXBBcnJheVtpZHhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxvb2t1cEFycmF5W2lkeF0gPCBpbmRleFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGlkeCArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleFZhbHVlID0gbG9va3VwQXJyYXlbaWR4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBpbmRleCA/IGluZGV4IDogZXJyb3IubmE7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBleHBvcnRzO1xyXG4gICAgfSkoKTtcclxuICAgIFxyXG4gICAgamV4Y2VsLm1ldGhvZHMuZW5naW5lZXJpbmcgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGV4cG9ydHMgPSB7fTtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGlzVmFsaWRCaW5hcnlOdW1iZXIobnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoL15bMDFdezEsMTB9JC8pLnRlc3QobnVtYmVyKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkJFU1NFTEkgPSBmdW5jdGlvbih4LCBuKSB7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQkVTU0VMSiA9IGZ1bmN0aW9uKHgsIG4pIHtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5CRVNTRUxLID0gZnVuY3Rpb24oeCwgbikge1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkJFU1NFTFkgPSBmdW5jdGlvbih4LCBuKSB7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQklOMkRFQyA9IGZ1bmN0aW9uKG51bWJlcikge1xyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgbnVtYmVyIGlzIG5vdCBiaW5hcnkgb3IgY29udGFpbnMgbW9yZSB0aGFuIDEwXHJcbiAgICAgICAgICAgIC8vIGNoYXJhY3RlcnMgKDEwIGRpZ2l0cylcclxuICAgICAgICAgICAgaWYgKCFpc1ZhbGlkQmluYXJ5TnVtYmVyKG51bWJlcikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IGJpbmFyeSBudW1iZXIgdG8gZGVjaW1hbFxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gcGFyc2VJbnQobnVtYmVyLCAyKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBIYW5kbGUgbmVnYXRpdmUgbnVtYmVyc1xyXG4gICAgICAgICAgICB2YXIgc3RyaW5naWZpZWQgPSBudW1iZXIudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgaWYgKHN0cmluZ2lmaWVkLmxlbmd0aCA9PT0gMTAgJiYgc3RyaW5naWZpZWQuc3Vic3RyaW5nKDAsIDEpID09PSAnMScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChzdHJpbmdpZmllZC5zdWJzdHJpbmcoMSksIDIpIC0gNTEyO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkJJTjJIRVggPSBmdW5jdGlvbihudW1iZXIsIHBsYWNlcykge1xyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgbnVtYmVyIGlzIG5vdCBiaW5hcnkgb3IgY29udGFpbnMgbW9yZSB0aGFuIDEwXHJcbiAgICAgICAgICAgIC8vIGNoYXJhY3RlcnMgKDEwIGRpZ2l0cylcclxuICAgICAgICAgICAgaWYgKCFpc1ZhbGlkQmluYXJ5TnVtYmVyKG51bWJlcikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBJZ25vcmUgcGxhY2VzIGFuZCByZXR1cm4gYSAxMC1jaGFyYWN0ZXIgaGV4YWRlY2ltYWwgbnVtYmVyIGlmIG51bWJlclxyXG4gICAgICAgICAgICAvLyBpcyBuZWdhdGl2ZVxyXG4gICAgICAgICAgICB2YXIgc3RyaW5naWZpZWQgPSBudW1iZXIudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgaWYgKHN0cmluZ2lmaWVkLmxlbmd0aCA9PT0gMTAgJiYgc3RyaW5naWZpZWQuc3Vic3RyaW5nKDAsIDEpID09PSAnMScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoMTA5OTUxMTYyNzI2NCArIHBhcnNlSW50KHN0cmluZ2lmaWVkLnN1YnN0cmluZygxKSwgMikpLnRvU3RyaW5nKDE2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIENvbnZlcnQgYmluYXJ5IG51bWJlciB0byBoZXhhZGVjaW1hbFxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gcGFyc2VJbnQobnVtYmVyLCAyKS50b1N0cmluZygxNik7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGhleGFkZWNpbWFsIG51bWJlciB1c2luZyB0aGUgbWluaW11bSBudW1iZXIgb2YgY2hhcmFjdGVyc1xyXG4gICAgICAgICAgICAvLyBuZWNlc3NhcnkgaWYgcGxhY2VzIGlzIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICBpZiAocGxhY2VzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgcGxhY2VzIGlzIG5vbm51bWVyaWNcclxuICAgICAgICAgICAgICAgIGlmIChpc05hTihwbGFjZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIHBsYWNlcyBpcyBuZWdhdGl2ZVxyXG4gICAgICAgICAgICAgICAgaWYgKHBsYWNlcyA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVHJ1bmNhdGUgcGxhY2VzIGluIGNhc2UgaXQgaXMgbm90IGFuIGludGVnZXJcclxuICAgICAgICAgICAgICAgIHBsYWNlcyA9IE1hdGguZmxvb3IocGxhY2VzKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUGFkIHJldHVybiB2YWx1ZSB3aXRoIGxlYWRpbmcgMHMgKHplcm9zKSBpZiBuZWNlc3NhcnkgKHVzaW5nXHJcbiAgICAgICAgICAgICAgICAvLyBVbmRlcnNjb3JlLnN0cmluZylcclxuICAgICAgICAgICAgICAgIHJldHVybiAocGxhY2VzID49IHJlc3VsdC5sZW5ndGgpID8gUkVQVCgnMCcsIHBsYWNlcyAtIHJlc3VsdC5sZW5ndGgpICsgcmVzdWx0IDogZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQklOMk9DVCA9IGZ1bmN0aW9uKG51bWJlciwgcGxhY2VzKSB7XHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBudW1iZXIgaXMgbm90IGJpbmFyeSBvciBjb250YWlucyBtb3JlIHRoYW4gMTBcclxuICAgICAgICAgICAgLy8gY2hhcmFjdGVycyAoMTAgZGlnaXRzKVxyXG4gICAgICAgICAgICBpZiAoIWlzVmFsaWRCaW5hcnlOdW1iZXIobnVtYmVyKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIElnbm9yZSBwbGFjZXMgYW5kIHJldHVybiBhIDEwLWNoYXJhY3RlciBvY3RhbCBudW1iZXIgaWYgbnVtYmVyIGlzXHJcbiAgICAgICAgICAgIC8vIG5lZ2F0aXZlXHJcbiAgICAgICAgICAgIHZhciBzdHJpbmdpZmllZCA9IG51bWJlci50b1N0cmluZygpO1xyXG4gICAgICAgICAgICBpZiAoc3RyaW5naWZpZWQubGVuZ3RoID09PSAxMCAmJiBzdHJpbmdpZmllZC5zdWJzdHJpbmcoMCwgMSkgPT09ICcxJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgxMDczNzQxMzEyICsgcGFyc2VJbnQoc3RyaW5naWZpZWQuc3Vic3RyaW5nKDEpLCAyKSkudG9TdHJpbmcoOCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IGJpbmFyeSBudW1iZXIgdG8gb2N0YWxcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHBhcnNlSW50KG51bWJlciwgMikudG9TdHJpbmcoOCk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIG9jdGFsIG51bWJlciB1c2luZyB0aGUgbWluaW11bSBudW1iZXIgb2YgY2hhcmFjdGVycyBuZWNlc3NhcnlcclxuICAgICAgICAgICAgLy8gaWYgcGxhY2VzIGlzIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICBpZiAocGxhY2VzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgcGxhY2VzIGlzIG5vbm51bWVyaWNcclxuICAgICAgICAgICAgICAgIGlmIChpc05hTihwbGFjZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIHBsYWNlcyBpcyBuZWdhdGl2ZVxyXG4gICAgICAgICAgICAgICAgaWYgKHBsYWNlcyA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVHJ1bmNhdGUgcGxhY2VzIGluIGNhc2UgaXQgaXMgbm90IGFuIGludGVnZXJcclxuICAgICAgICAgICAgICAgIHBsYWNlcyA9IE1hdGguZmxvb3IocGxhY2VzKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUGFkIHJldHVybiB2YWx1ZSB3aXRoIGxlYWRpbmcgMHMgKHplcm9zKSBpZiBuZWNlc3NhcnkgKHVzaW5nXHJcbiAgICAgICAgICAgICAgICAvLyBVbmRlcnNjb3JlLnN0cmluZylcclxuICAgICAgICAgICAgICAgIHJldHVybiAocGxhY2VzID49IHJlc3VsdC5sZW5ndGgpID8gUkVQVCgnMCcsIHBsYWNlcyAtIHJlc3VsdC5sZW5ndGgpICsgcmVzdWx0IDogZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQklUQU5EID0gZnVuY3Rpb24obnVtYmVyMSwgbnVtYmVyMikge1xyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgZWl0aGVyIG51bWJlciBpcyBhIG5vbi1udW1lcmljIHZhbHVlXHJcbiAgICAgICAgICAgIG51bWJlcjEgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIxKTtcclxuICAgICAgICAgICAgbnVtYmVyMiA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcjIpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihudW1iZXIxLCBudW1iZXIyKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGVpdGhlciBudW1iZXIgaXMgbGVzcyB0aGFuIDBcclxuICAgICAgICAgICAgaWYgKG51bWJlcjEgPCAwIHx8IG51bWJlcjIgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGVpdGhlciBudW1iZXIgaXMgYSBub24taW50ZWdlclxyXG4gICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihudW1iZXIxKSAhPT0gbnVtYmVyMSB8fCBNYXRoLmZsb29yKG51bWJlcjIpICE9PSBudW1iZXIyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGVpdGhlciBudW1iZXIgaXMgZ3JlYXRlciB0aGFuICgyXjQ4KS0xXHJcbiAgICAgICAgICAgIGlmIChudW1iZXIxID4gMjgxNDc0OTc2NzEwNjU1IHx8IG51bWJlcjIgPiAyODE0NzQ5NzY3MTA2NTUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gYml0d2lzZSBBTkQgb2YgdHdvIG51bWJlcnNcclxuICAgICAgICAgICAgcmV0dXJuIG51bWJlcjEgJiBudW1iZXIyO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkJJVExTSElGVCA9IGZ1bmN0aW9uKG51bWJlciwgc2hpZnQpIHtcclxuICAgICAgICAgICAgbnVtYmVyID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyKTtcclxuICAgICAgICAgICAgc2hpZnQgPSB1dGlscy5wYXJzZU51bWJlcihzaGlmdCk7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKG51bWJlciwgc2hpZnQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgbnVtYmVyIGlzIGxlc3MgdGhhbiAwXHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIG51bWJlciBpcyBhIG5vbi1pbnRlZ2VyXHJcbiAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKG51bWJlcikgIT09IG51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBudW1iZXIgaXMgZ3JlYXRlciB0aGFuICgyXjQ4KS0xXHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgPiAyODE0NzQ5NzY3MTA2NTUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgdGhlIGFic29sdXRlIHZhbHVlIG9mIHNoaWZ0IGlzIGdyZWF0ZXIgdGhhbiA1M1xyXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoc2hpZnQpID4gNTMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gbnVtYmVyIHNoaWZ0ZWQgYnkgc2hpZnQgYml0cyB0byB0aGUgbGVmdCBvciB0byB0aGUgcmlnaHQgaWZcclxuICAgICAgICAgICAgLy8gc2hpZnQgaXMgbmVnYXRpdmVcclxuICAgICAgICAgICAgcmV0dXJuIChzaGlmdCA+PSAwKSA/IG51bWJlciA8PCBzaGlmdCA6IG51bWJlciA+PiAtc2hpZnQ7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQklUT1IgPSBmdW5jdGlvbihudW1iZXIxLCBudW1iZXIyKSB7XHJcbiAgICAgICAgICAgIG51bWJlcjEgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIxKTtcclxuICAgICAgICAgICAgbnVtYmVyMiA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcjIpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihudW1iZXIxLCBudW1iZXIyKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGVpdGhlciBudW1iZXIgaXMgbGVzcyB0aGFuIDBcclxuICAgICAgICAgICAgaWYgKG51bWJlcjEgPCAwIHx8IG51bWJlcjIgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGVpdGhlciBudW1iZXIgaXMgYSBub24taW50ZWdlclxyXG4gICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihudW1iZXIxKSAhPT0gbnVtYmVyMSB8fCBNYXRoLmZsb29yKG51bWJlcjIpICE9PSBudW1iZXIyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGVpdGhlciBudW1iZXIgaXMgZ3JlYXRlciB0aGFuICgyXjQ4KS0xXHJcbiAgICAgICAgICAgIGlmIChudW1iZXIxID4gMjgxNDc0OTc2NzEwNjU1IHx8IG51bWJlcjIgPiAyODE0NzQ5NzY3MTA2NTUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gYml0d2lzZSBPUiBvZiB0d28gbnVtYmVyc1xyXG4gICAgICAgICAgICByZXR1cm4gbnVtYmVyMSB8IG51bWJlcjI7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQklUUlNISUZUID0gZnVuY3Rpb24obnVtYmVyLCBzaGlmdCkge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBzaGlmdCA9IHV0aWxzLnBhcnNlTnVtYmVyKHNoaWZ0KTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IobnVtYmVyLCBzaGlmdCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBudW1iZXIgaXMgbGVzcyB0aGFuIDBcclxuICAgICAgICAgICAgaWYgKG51bWJlciA8IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgbnVtYmVyIGlzIGEgbm9uLWludGVnZXJcclxuICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IobnVtYmVyKSAhPT0gbnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIG51bWJlciBpcyBncmVhdGVyIHRoYW4gKDJeNDgpLTFcclxuICAgICAgICAgICAgaWYgKG51bWJlciA+IDI4MTQ3NDk3NjcxMDY1NSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiB0aGUgYWJzb2x1dGUgdmFsdWUgb2Ygc2hpZnQgaXMgZ3JlYXRlciB0aGFuIDUzXHJcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhzaGlmdCkgPiA1Mykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBudW1iZXIgc2hpZnRlZCBieSBzaGlmdCBiaXRzIHRvIHRoZSByaWdodCBvciB0byB0aGUgbGVmdCBpZlxyXG4gICAgICAgICAgICAvLyBzaGlmdCBpcyBuZWdhdGl2ZVxyXG4gICAgICAgICAgICByZXR1cm4gKHNoaWZ0ID49IDApID8gbnVtYmVyID4+IHNoaWZ0IDogbnVtYmVyIDw8IC1zaGlmdDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5CSVRYT1IgPSBmdW5jdGlvbihudW1iZXIxLCBudW1iZXIyKSB7XHJcbiAgICAgICAgICAgIG51bWJlcjEgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIxKTtcclxuICAgICAgICAgICAgbnVtYmVyMiA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcjIpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihudW1iZXIxLCBudW1iZXIyKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGVpdGhlciBudW1iZXIgaXMgbGVzcyB0aGFuIDBcclxuICAgICAgICAgICAgaWYgKG51bWJlcjEgPCAwIHx8IG51bWJlcjIgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGVpdGhlciBudW1iZXIgaXMgYSBub24taW50ZWdlclxyXG4gICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihudW1iZXIxKSAhPT0gbnVtYmVyMSB8fCBNYXRoLmZsb29yKG51bWJlcjIpICE9PSBudW1iZXIyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGVpdGhlciBudW1iZXIgaXMgZ3JlYXRlciB0aGFuICgyXjQ4KS0xXHJcbiAgICAgICAgICAgIGlmIChudW1iZXIxID4gMjgxNDc0OTc2NzEwNjU1IHx8IG51bWJlcjIgPiAyODE0NzQ5NzY3MTA2NTUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gYml0d2lzZSBYT1Igb2YgdHdvIG51bWJlcnNcclxuICAgICAgICAgICAgcmV0dXJuIG51bWJlcjEgXiBudW1iZXIyO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkNPTVBMRVggPSBmdW5jdGlvbihyZWFsLCBpbWFnaW5hcnksIHN1ZmZpeCkge1xyXG4gICAgICAgICAgICByZWFsID0gdXRpbHMucGFyc2VOdW1iZXIocmVhbCk7XHJcbiAgICAgICAgICAgIGltYWdpbmFyeSA9IHV0aWxzLnBhcnNlTnVtYmVyKGltYWdpbmFyeSk7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHJlYWwsIGltYWdpbmFyeSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gU2V0IHN1ZmZpeFxyXG4gICAgICAgICAgICBzdWZmaXggPSAoc3VmZml4ID09PSB1bmRlZmluZWQpID8gJ2knIDogc3VmZml4O1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBzdWZmaXggaXMgbmVpdGhlciBcImlcIiBub3IgXCJqXCJcclxuICAgICAgICAgICAgaWYgKHN1ZmZpeCAhPT0gJ2knICYmIHN1ZmZpeCAhPT0gJ2onKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gY29tcGxleCBudW1iZXJcclxuICAgICAgICAgICAgaWYgKHJlYWwgPT09IDAgJiYgaW1hZ2luYXJ5ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWFsID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGltYWdpbmFyeSA9PT0gMSkgPyBzdWZmaXggOiBpbWFnaW5hcnkudG9TdHJpbmcoKSArIHN1ZmZpeDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbWFnaW5hcnkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWFsLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2lnbiA9IChpbWFnaW5hcnkgPiAwKSA/ICcrJyA6ICcnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlYWwudG9TdHJpbmcoKSArIHNpZ24gKyAoKGltYWdpbmFyeSA9PT0gMSkgPyBzdWZmaXggOiBpbWFnaW5hcnkudG9TdHJpbmcoKSArIHN1ZmZpeCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5DT05WRVJUID0gZnVuY3Rpb24obnVtYmVyLCBmcm9tX3VuaXQsIHRvX3VuaXQpIHtcclxuICAgICAgICAgICAgbnVtYmVyID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyKTtcclxuICAgICAgICAgICAgaWYgKG51bWJlciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gTGlzdCBvZiB1bml0cyBzdXBwb3J0ZWQgYnkgQ09OVkVSVCBhbmQgdW5pdHMgZGVmaW5lZCBieSB0aGVcclxuICAgICAgICAgICAgLy8gSW50ZXJuYXRpb25hbCBTeXN0ZW0gb2YgVW5pdHNcclxuICAgICAgICAgICAgLy8gW05hbWUsIFN5bWJvbCwgQWx0ZXJuYXRlIHN5bWJvbHMsIFF1YW50aXR5LCBJU1UsIENPTlZFUlQsIENvbnZlcnNpb25cclxuICAgICAgICAgICAgLy8gcmF0aW9dXHJcbiAgICAgICAgICAgIHZhciB1bml0cyA9IFtcclxuICAgICAgICAgICAgICAgIFtcImEudS4gb2YgYWN0aW9uXCIsIFwiP1wiLCBudWxsLCBcImFjdGlvblwiLCBmYWxzZSwgZmFsc2UsIDEuMDU0NTcxNjgxODE4MThlLTM0XSxcclxuICAgICAgICAgICAgICAgIFtcImEudS4gb2YgY2hhcmdlXCIsIFwiZVwiLCBudWxsLCBcImVsZWN0cmljX2NoYXJnZVwiLCBmYWxzZSwgZmFsc2UsIDEuNjAyMTc2NTMxNDE0MTRlLTE5XSxcclxuICAgICAgICAgICAgICAgIFtcImEudS4gb2YgZW5lcmd5XCIsIFwiRWhcIiwgbnVsbCwgXCJlbmVyZ3lcIiwgZmFsc2UsIGZhbHNlLCA0LjM1OTc0NDE3NzU3NTc2ZS0xOF0sXHJcbiAgICAgICAgICAgICAgICBbXCJhLnUuIG9mIGxlbmd0aFwiLCBcImE/XCIsIG51bGwsIFwibGVuZ3RoXCIsIGZhbHNlLCBmYWxzZSwgNS4yOTE3NzIxMDgxODE4MmUtMTFdLFxyXG4gICAgICAgICAgICAgICAgW1wiYS51LiBvZiBtYXNzXCIsIFwibT9cIiwgbnVsbCwgXCJtYXNzXCIsIGZhbHNlLCBmYWxzZSwgOS4xMDkzODI2MTYxNjE2MmUtMzFdLFxyXG4gICAgICAgICAgICAgICAgW1wiYS51LiBvZiB0aW1lXCIsIFwiPy9FaFwiLCBudWxsLCBcInRpbWVcIiwgZmFsc2UsIGZhbHNlLCAyLjQxODg4NDMyNjUwNTE2ZS0xN10sXHJcbiAgICAgICAgICAgICAgICBbXCJhZG1pcmFsdHkga25vdFwiLCBcImFkbWtuXCIsIG51bGwsIFwic3BlZWRcIiwgZmFsc2UsIHRydWUsIDAuNTE0NzczMzMzXSxcclxuICAgICAgICAgICAgICAgIFtcImFtcGVyZVwiLCBcIkFcIiwgbnVsbCwgXCJlbGVjdHJpY19jdXJyZW50XCIsIHRydWUsIGZhbHNlLCAxXSxcclxuICAgICAgICAgICAgICAgIFtcImFtcGVyZSBwZXIgbWV0ZXJcIiwgXCJBL21cIiwgbnVsbCwgXCJtYWduZXRpY19maWVsZF9pbnRlbnNpdHlcIiwgdHJ1ZSwgZmFsc2UsIDFdLFxyXG4gICAgICAgICAgICAgICAgW1wiw6VuZ3N0csO2bVwiLCBcIsOFXCIsIFtcImFuZ1wiXSwgXCJsZW5ndGhcIiwgZmFsc2UsIHRydWUsIDFlLTEwXSxcclxuICAgICAgICAgICAgICAgIFtcImFyZVwiLCBcImFyXCIsIG51bGwsIFwiYXJlYVwiLCBmYWxzZSwgdHJ1ZSwgMTAwXSxcclxuICAgICAgICAgICAgICAgIFtcImFzdHJvbm9taWNhbCB1bml0XCIsIFwidWFcIiwgbnVsbCwgXCJsZW5ndGhcIiwgZmFsc2UsIGZhbHNlLCAxLjQ5NTk3ODcwNjkxNjY3ZS0xMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJiYXJcIiwgXCJiYXJcIiwgbnVsbCwgXCJwcmVzc3VyZVwiLCBmYWxzZSwgZmFsc2UsIDEwMDAwMF0sXHJcbiAgICAgICAgICAgICAgICBbXCJiYXJuXCIsIFwiYlwiLCBudWxsLCBcImFyZWFcIiwgZmFsc2UsIGZhbHNlLCAxZS0yOF0sXHJcbiAgICAgICAgICAgICAgICBbXCJiZWNxdWVyZWxcIiwgXCJCcVwiLCBudWxsLCBcInJhZGlvYWN0aXZpdHlcIiwgdHJ1ZSwgZmFsc2UsIDFdLFxyXG4gICAgICAgICAgICAgICAgW1wiYml0XCIsIFwiYml0XCIsIFtcImJcIl0sIFwiaW5mb3JtYXRpb25cIiwgZmFsc2UsIHRydWUsIDFdLFxyXG4gICAgICAgICAgICAgICAgW1wiYnR1XCIsIFwiQlRVXCIsIFtcImJ0dVwiXSwgXCJlbmVyZ3lcIiwgZmFsc2UsIHRydWUsIDEwNTUuMDU1ODUyNjJdLFxyXG4gICAgICAgICAgICAgICAgW1wiYnl0ZVwiLCBcImJ5dGVcIiwgbnVsbCwgXCJpbmZvcm1hdGlvblwiLCBmYWxzZSwgdHJ1ZSwgOF0sXHJcbiAgICAgICAgICAgICAgICBbXCJjYW5kZWxhXCIsIFwiY2RcIiwgbnVsbCwgXCJsdW1pbm91c19pbnRlbnNpdHlcIiwgdHJ1ZSwgZmFsc2UsIDFdLFxyXG4gICAgICAgICAgICAgICAgW1wiY2FuZGVsYSBwZXIgc3F1YXJlIG1ldHJlXCIsIFwiY2QvbT9cIiwgbnVsbCwgXCJsdW1pbmFuY2VcIiwgdHJ1ZSwgZmFsc2UsIDFdLFxyXG4gICAgICAgICAgICAgICAgW1wiY291bG9tYlwiLCBcIkNcIiwgbnVsbCwgXCJlbGVjdHJpY19jaGFyZ2VcIiwgdHJ1ZSwgZmFsc2UsIDFdLFxyXG4gICAgICAgICAgICAgICAgW1wiY3ViaWMgw6VuZ3N0csO2bVwiLCBcImFuZzNcIiwgW1wiYW5nXjNcIl0sIFwidm9sdW1lXCIsIGZhbHNlLCB0cnVlLCAxZS0zMF0sXHJcbiAgICAgICAgICAgICAgICBbXCJjdWJpYyBmb290XCIsIFwiZnQzXCIsIFtcImZ0XjNcIl0sIFwidm9sdW1lXCIsIGZhbHNlLCB0cnVlLCAwLjAyODMxNjg0NjU5Ml0sXHJcbiAgICAgICAgICAgICAgICBbXCJjdWJpYyBpbmNoXCIsIFwiaW4zXCIsIFtcImluXjNcIl0sIFwidm9sdW1lXCIsIGZhbHNlLCB0cnVlLCAwLjAwMDAxNjM4NzA2NF0sXHJcbiAgICAgICAgICAgICAgICBbXCJjdWJpYyBsaWdodC15ZWFyXCIsIFwibHkzXCIsIFtcImx5XjNcIl0sIFwidm9sdW1lXCIsIGZhbHNlLCB0cnVlLCA4LjQ2Nzg2NjY0NjIzNzE1ZS00N10sXHJcbiAgICAgICAgICAgICAgICBbXCJjdWJpYyBtZXRyZVwiLCBcIm0/XCIsIG51bGwsIFwidm9sdW1lXCIsIHRydWUsIHRydWUsIDFdLFxyXG4gICAgICAgICAgICAgICAgW1wiY3ViaWMgbWlsZVwiLCBcIm1pM1wiLCBbXCJtaV4zXCJdLCBcInZvbHVtZVwiLCBmYWxzZSwgdHJ1ZSwgNDE2ODE4MTgyNS40NDA1OF0sXHJcbiAgICAgICAgICAgICAgICBbXCJjdWJpYyBuYXV0aWNhbCBtaWxlXCIsIFwiTm1pM1wiLCBbXCJObWleM1wiXSwgXCJ2b2x1bWVcIiwgZmFsc2UsIHRydWUsIDYzNTIxODIyMDhdLFxyXG4gICAgICAgICAgICAgICAgW1wiY3ViaWMgUGljYVwiLCBcIlBpY2EzXCIsIFtcIlBpY2FwdDNcIiwgXCJQaWNhXjNcIiwgXCJQaWNhcHReM1wiXSwgXCJ2b2x1bWVcIiwgZmFsc2UsIHRydWUsIDcuNTg2NjAzNzAzNzAzNjllLThdLFxyXG4gICAgICAgICAgICAgICAgW1wiY3ViaWMgeWFyZFwiLCBcInlkM1wiLCBbXCJ5ZF4zXCJdLCBcInZvbHVtZVwiLCBmYWxzZSwgdHJ1ZSwgMC43NjQ1NTQ4NTc5ODRdLFxyXG4gICAgICAgICAgICAgICAgW1wiY3VwXCIsIFwiY3VwXCIsIG51bGwsIFwidm9sdW1lXCIsIGZhbHNlLCB0cnVlLCAwLjAwMDIzNjU4ODIzNjVdLFxyXG4gICAgICAgICAgICAgICAgW1wiZGFsdG9uXCIsIFwiRGFcIiwgW1widVwiXSwgXCJtYXNzXCIsIGZhbHNlLCBmYWxzZSwgMS42NjA1Mzg4NjI4MjgyOGUtMjddLFxyXG4gICAgICAgICAgICAgICAgW1wiZGF5XCIsIFwiZFwiLCBbXCJkYXlcIl0sIFwidGltZVwiLCBmYWxzZSwgdHJ1ZSwgODY0MDBdLFxyXG4gICAgICAgICAgICAgICAgW1wiZGVncmVlXCIsIFwiwrBcIiwgbnVsbCwgXCJhbmdsZVwiLCBmYWxzZSwgZmFsc2UsIDAuMDE3NDUzMjkyNTE5OTQzM10sXHJcbiAgICAgICAgICAgICAgICBbXCJkZWdyZWVzIFJhbmtpbmVcIiwgXCJSYW5rXCIsIG51bGwsIFwidGVtcGVyYXR1cmVcIiwgZmFsc2UsIHRydWUsIDAuNTU1NTU1NTU1NTU1NTU2XSxcclxuICAgICAgICAgICAgICAgIFtcImR5bmVcIiwgXCJkeW5cIiwgW1wiZHlcIl0sIFwiZm9yY2VcIiwgZmFsc2UsIHRydWUsIDAuMDAwMDFdLFxyXG4gICAgICAgICAgICAgICAgW1wiZWxlY3Ryb252b2x0XCIsIFwiZVZcIiwgW1wiZXZcIl0sIFwiZW5lcmd5XCIsIGZhbHNlLCB0cnVlLCAxLjYwMjE3NjU2NTE0MTQxXSxcclxuICAgICAgICAgICAgICAgIFtcImVsbFwiLCBcImVsbFwiLCBudWxsLCBcImxlbmd0aFwiLCBmYWxzZSwgdHJ1ZSwgMS4xNDNdLFxyXG4gICAgICAgICAgICAgICAgW1wiZXJnXCIsIFwiZXJnXCIsIFtcImVcIl0sIFwiZW5lcmd5XCIsIGZhbHNlLCB0cnVlLCAxZS03XSxcclxuICAgICAgICAgICAgICAgIFtcImZhcmFkXCIsIFwiRlwiLCBudWxsLCBcImVsZWN0cmljX2NhcGFjaXRhbmNlXCIsIHRydWUsIGZhbHNlLCAxXSxcclxuICAgICAgICAgICAgICAgIFtcImZsdWlkIG91bmNlXCIsIFwib3pcIiwgbnVsbCwgXCJ2b2x1bWVcIiwgZmFsc2UsIHRydWUsIDAuMDAwMDI5NTczNTI5NTYyNV0sXHJcbiAgICAgICAgICAgICAgICBbXCJmb290XCIsIFwiZnRcIiwgbnVsbCwgXCJsZW5ndGhcIiwgZmFsc2UsIHRydWUsIDAuMzA0OF0sXHJcbiAgICAgICAgICAgICAgICBbXCJmb290LXBvdW5kXCIsIFwiZmxiXCIsIG51bGwsIFwiZW5lcmd5XCIsIGZhbHNlLCB0cnVlLCAxLjM1NTgxNzk0ODMzMTRdLFxyXG4gICAgICAgICAgICAgICAgW1wiZ2FsXCIsIFwiR2FsXCIsIG51bGwsIFwiYWNjZWxlcmF0aW9uXCIsIGZhbHNlLCBmYWxzZSwgMC4wMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJnYWxsb25cIiwgXCJnYWxcIiwgbnVsbCwgXCJ2b2x1bWVcIiwgZmFsc2UsIHRydWUsIDAuMDAzNzg1NDExNzg0XSxcclxuICAgICAgICAgICAgICAgIFtcImdhdXNzXCIsIFwiR1wiLCBbXCJnYVwiXSwgXCJtYWduZXRpY19mbHV4X2RlbnNpdHlcIiwgZmFsc2UsIHRydWUsIDFdLFxyXG4gICAgICAgICAgICAgICAgW1wiZ3JhaW5cIiwgXCJncmFpblwiLCBudWxsLCBcIm1hc3NcIiwgZmFsc2UsIHRydWUsIDAuMDAwMDY0Nzk4OV0sXHJcbiAgICAgICAgICAgICAgICBbXCJncmFtXCIsIFwiZ1wiLCBudWxsLCBcIm1hc3NcIiwgZmFsc2UsIHRydWUsIDAuMDAxXSxcclxuICAgICAgICAgICAgICAgIFtcImdyYXlcIiwgXCJHeVwiLCBudWxsLCBcImFic29yYmVkX2Rvc2VcIiwgdHJ1ZSwgZmFsc2UsIDFdLFxyXG4gICAgICAgICAgICAgICAgW1wiZ3Jvc3MgcmVnaXN0ZXJlZCB0b25cIiwgXCJHUlRcIiwgW1wicmVndG9uXCJdLCBcInZvbHVtZVwiLCBmYWxzZSwgdHJ1ZSwgMi44MzE2ODQ2NTkyXSxcclxuICAgICAgICAgICAgICAgIFtcImhlY3RhcmVcIiwgXCJoYVwiLCBudWxsLCBcImFyZWFcIiwgZmFsc2UsIHRydWUsIDEwMDAwXSxcclxuICAgICAgICAgICAgICAgIFtcImhlbnJ5XCIsIFwiSFwiLCBudWxsLCBcImluZHVjdGFuY2VcIiwgdHJ1ZSwgZmFsc2UsIDFdLFxyXG4gICAgICAgICAgICAgICAgW1wiaGVydHpcIiwgXCJIelwiLCBudWxsLCBcImZyZXF1ZW5jeVwiLCB0cnVlLCBmYWxzZSwgMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJob3JzZXBvd2VyXCIsIFwiSFBcIiwgW1wiaFwiXSwgXCJwb3dlclwiLCBmYWxzZSwgdHJ1ZSwgNzQ1LjY5OTg3MTU4MjI3XSxcclxuICAgICAgICAgICAgICAgIFtcImhvcnNlcG93ZXItaG91clwiLCBcIkhQaFwiLCBbXCJoaFwiLCBcImhwaFwiXSwgXCJlbmVyZ3lcIiwgZmFsc2UsIHRydWUsIDI2ODQ1MTkuNTM4XSxcclxuICAgICAgICAgICAgICAgIFtcImhvdXJcIiwgXCJoXCIsIFtcImhyXCJdLCBcInRpbWVcIiwgZmFsc2UsIHRydWUsIDM2MDBdLFxyXG4gICAgICAgICAgICAgICAgW1wiaW1wZXJpYWwgZ2FsbG9uIChVLksuKVwiLCBcInVrX2dhbFwiLCBudWxsLCBcInZvbHVtZVwiLCBmYWxzZSwgdHJ1ZSwgMC4wMDQ1NDYwOV0sXHJcbiAgICAgICAgICAgICAgICBbXCJpbXBlcmlhbCBodW5kcmVkd2VpZ2h0XCIsIFwibGN3dFwiLCBbXCJ1a19jd3RcIiwgXCJod2VpZ2h0XCJdLCBcIm1hc3NcIiwgZmFsc2UsIHRydWUsIDUwLjgwMjM0NV0sXHJcbiAgICAgICAgICAgICAgICBbXCJpbXBlcmlhbCBxdWFydCAoVS5LKVwiLCBcInVrX3F0XCIsIG51bGwsIFwidm9sdW1lXCIsIGZhbHNlLCB0cnVlLCAwLjAwMTEzNjUyMjVdLFxyXG4gICAgICAgICAgICAgICAgW1wiaW1wZXJpYWwgdG9uXCIsIFwiYnJ0b25cIiwgW1widWtfdG9uXCIsIFwiTFRPTlwiXSwgXCJtYXNzXCIsIGZhbHNlLCB0cnVlLCAxMDE2LjA0NjkwOV0sXHJcbiAgICAgICAgICAgICAgICBbXCJpbmNoXCIsIFwiaW5cIiwgbnVsbCwgXCJsZW5ndGhcIiwgZmFsc2UsIHRydWUsIDAuMDI1NF0sXHJcbiAgICAgICAgICAgICAgICBbXCJpbnRlcm5hdGlvbmFsIGFjcmVcIiwgXCJ1a19hY3JlXCIsIG51bGwsIFwiYXJlYVwiLCBmYWxzZSwgdHJ1ZSwgNDA0Ni44NTY0MjI0XSxcclxuICAgICAgICAgICAgICAgIFtcIklUIGNhbG9yaWVcIiwgXCJjYWxcIiwgbnVsbCwgXCJlbmVyZ3lcIiwgZmFsc2UsIHRydWUsIDQuMTg2OF0sXHJcbiAgICAgICAgICAgICAgICBbXCJqb3VsZVwiLCBcIkpcIiwgbnVsbCwgXCJlbmVyZ3lcIiwgdHJ1ZSwgdHJ1ZSwgMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJrYXRhbFwiLCBcImthdFwiLCBudWxsLCBcImNhdGFseXRpY19hY3Rpdml0eVwiLCB0cnVlLCBmYWxzZSwgMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJrZWx2aW5cIiwgXCJLXCIsIFtcImtlbFwiXSwgXCJ0ZW1wZXJhdHVyZVwiLCB0cnVlLCB0cnVlLCAxXSxcclxuICAgICAgICAgICAgICAgIFtcImtpbG9ncmFtXCIsIFwia2dcIiwgbnVsbCwgXCJtYXNzXCIsIHRydWUsIHRydWUsIDFdLFxyXG4gICAgICAgICAgICAgICAgW1wia25vdFwiLCBcImtuXCIsIG51bGwsIFwic3BlZWRcIiwgZmFsc2UsIHRydWUsIDAuNTE0NDQ0NDQ0NDQ0NDQ0XSxcclxuICAgICAgICAgICAgICAgIFtcImxpZ2h0LXllYXJcIiwgXCJseVwiLCBudWxsLCBcImxlbmd0aFwiLCBmYWxzZSwgdHJ1ZSwgOTQ2MDczMDQ3MjU4MDgwMF0sXHJcbiAgICAgICAgICAgICAgICBbXCJsaXRyZVwiLCBcIkxcIiwgW1wibFwiLCBcImx0XCJdLCBcInZvbHVtZVwiLCBmYWxzZSwgdHJ1ZSwgMC4wMDFdLFxyXG4gICAgICAgICAgICAgICAgW1wibHVtZW5cIiwgXCJsbVwiLCBudWxsLCBcImx1bWlub3VzX2ZsdXhcIiwgdHJ1ZSwgZmFsc2UsIDFdLFxyXG4gICAgICAgICAgICAgICAgW1wibHV4XCIsIFwibHhcIiwgbnVsbCwgXCJpbGx1bWluYW5jZVwiLCB0cnVlLCBmYWxzZSwgMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJtYXh3ZWxsXCIsIFwiTXhcIiwgbnVsbCwgXCJtYWduZXRpY19mbHV4XCIsIGZhbHNlLCBmYWxzZSwgMWUtMThdLFxyXG4gICAgICAgICAgICAgICAgW1wibWVhc3VyZW1lbnQgdG9uXCIsIFwiTVRPTlwiLCBudWxsLCBcInZvbHVtZVwiLCBmYWxzZSwgdHJ1ZSwgMS4xMzI2NzM4NjM2OF0sXHJcbiAgICAgICAgICAgICAgICBbXCJtZXRlciBwZXIgaG91clwiLCBcIm0vaFwiLCBbXCJtL2hyXCJdLCBcInNwZWVkXCIsIGZhbHNlLCB0cnVlLCAwLjAwMDI3Nzc3Nzc3Nzc3Nzc4XSxcclxuICAgICAgICAgICAgICAgIFtcIm1ldGVyIHBlciBzZWNvbmRcIiwgXCJtL3NcIiwgW1wibS9zZWNcIl0sIFwic3BlZWRcIiwgdHJ1ZSwgdHJ1ZSwgMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJtZXRlciBwZXIgc2Vjb25kIHNxdWFyZWRcIiwgXCJtP3M/P1wiLCBudWxsLCBcImFjY2VsZXJhdGlvblwiLCB0cnVlLCBmYWxzZSwgMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJwYXJzZWNcIiwgXCJwY1wiLCBbXCJwYXJzZWNcIl0sIFwibGVuZ3RoXCIsIGZhbHNlLCB0cnVlLCAzMDg1Njc3NTgxNDY3MTkwMF0sXHJcbiAgICAgICAgICAgICAgICBbXCJtZXRlciBzcXVhcmVkIHBlciBzZWNvbmRcIiwgXCJtPy9zXCIsIG51bGwsIFwia2luZW1hdGljX3Zpc2Nvc2l0eVwiLCB0cnVlLCBmYWxzZSwgMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJtZXRyZVwiLCBcIm1cIiwgbnVsbCwgXCJsZW5ndGhcIiwgdHJ1ZSwgdHJ1ZSwgMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJtaWxlcyBwZXIgaG91clwiLCBcIm1waFwiLCBudWxsLCBcInNwZWVkXCIsIGZhbHNlLCB0cnVlLCAwLjQ0NzA0XSxcclxuICAgICAgICAgICAgICAgIFtcIm1pbGxpbWV0cmUgb2YgbWVyY3VyeVwiLCBcIm1tSGdcIiwgbnVsbCwgXCJwcmVzc3VyZVwiLCBmYWxzZSwgZmFsc2UsIDEzMy4zMjJdLFxyXG4gICAgICAgICAgICAgICAgW1wibWludXRlXCIsIFwiP1wiLCBudWxsLCBcImFuZ2xlXCIsIGZhbHNlLCBmYWxzZSwgMC4wMDAyOTA4ODgyMDg2NjU3MjJdLFxyXG4gICAgICAgICAgICAgICAgW1wibWludXRlXCIsIFwibWluXCIsIFtcIm1uXCJdLCBcInRpbWVcIiwgZmFsc2UsIHRydWUsIDYwXSxcclxuICAgICAgICAgICAgICAgIFtcIm1vZGVybiB0ZWFzcG9vblwiLCBcInRzcG1cIiwgbnVsbCwgXCJ2b2x1bWVcIiwgZmFsc2UsIHRydWUsIDAuMDAwMDA1XSxcclxuICAgICAgICAgICAgICAgIFtcIm1vbGVcIiwgXCJtb2xcIiwgbnVsbCwgXCJhbW91bnRfb2Zfc3Vic3RhbmNlXCIsIHRydWUsIGZhbHNlLCAxXSxcclxuICAgICAgICAgICAgICAgIFtcIm1vcmdlblwiLCBcIk1vcmdlblwiLCBudWxsLCBcImFyZWFcIiwgZmFsc2UsIHRydWUsIDI1MDBdLFxyXG4gICAgICAgICAgICAgICAgW1wibi51LiBvZiBhY3Rpb25cIiwgXCI/XCIsIG51bGwsIFwiYWN0aW9uXCIsIGZhbHNlLCBmYWxzZSwgMS4wNTQ1NzE2ODE4MTgxOGUtMzRdLFxyXG4gICAgICAgICAgICAgICAgW1wibi51LiBvZiBtYXNzXCIsIFwibT9cIiwgbnVsbCwgXCJtYXNzXCIsIGZhbHNlLCBmYWxzZSwgOS4xMDkzODI2MTYxNjE2MmUtMzFdLFxyXG4gICAgICAgICAgICAgICAgW1wibi51LiBvZiBzcGVlZFwiLCBcImM/XCIsIG51bGwsIFwic3BlZWRcIiwgZmFsc2UsIGZhbHNlLCAyOTk3OTI0NThdLFxyXG4gICAgICAgICAgICAgICAgW1wibi51LiBvZiB0aW1lXCIsIFwiPy8obWU/Yz8/KVwiLCBudWxsLCBcInRpbWVcIiwgZmFsc2UsIGZhbHNlLCAxLjI4ODA4ODY2Nzc4Njg3ZS0yMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJuYXV0aWNhbCBtaWxlXCIsIFwiTVwiLCBbXCJObWlcIl0sIFwibGVuZ3RoXCIsIGZhbHNlLCB0cnVlLCAxODUyXSxcclxuICAgICAgICAgICAgICAgIFtcIm5ld3RvblwiLCBcIk5cIiwgbnVsbCwgXCJmb3JjZVwiLCB0cnVlLCB0cnVlLCAxXSxcclxuICAgICAgICAgICAgICAgIFtcIsWTcnN0ZWRcIiwgXCJPZSBcIiwgbnVsbCwgXCJtYWduZXRpY19maWVsZF9pbnRlbnNpdHlcIiwgZmFsc2UsIGZhbHNlLCA3OS41Nzc0NzE1NDU5NDc3XSxcclxuICAgICAgICAgICAgICAgIFtcIm9obVwiLCBcIs6pXCIsIG51bGwsIFwiZWxlY3RyaWNfcmVzaXN0YW5jZVwiLCB0cnVlLCBmYWxzZSwgMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJvdW5jZSBtYXNzXCIsIFwib3ptXCIsIG51bGwsIFwibWFzc1wiLCBmYWxzZSwgdHJ1ZSwgMC4wMjgzNDk1MjMxMjVdLFxyXG4gICAgICAgICAgICAgICAgW1wicGFzY2FsXCIsIFwiUGFcIiwgbnVsbCwgXCJwcmVzc3VyZVwiLCB0cnVlLCBmYWxzZSwgMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJwYXNjYWwgc2Vjb25kXCIsIFwiUGE/c1wiLCBudWxsLCBcImR5bmFtaWNfdmlzY29zaXR5XCIsIHRydWUsIGZhbHNlLCAxXSxcclxuICAgICAgICAgICAgICAgIFtcInBmZXJkZXN0w6Rya2VcIiwgXCJQU1wiLCBudWxsLCBcInBvd2VyXCIsIGZhbHNlLCB0cnVlLCA3MzUuNDk4NzVdLFxyXG4gICAgICAgICAgICAgICAgW1wicGhvdFwiLCBcInBoXCIsIG51bGwsIFwiaWxsdW1pbmFuY2VcIiwgZmFsc2UsIGZhbHNlLCAwLjAwMDFdLFxyXG4gICAgICAgICAgICAgICAgW1wicGljYSAoMS82IGluY2gpXCIsIFwicGljYVwiLCBudWxsLCBcImxlbmd0aFwiLCBmYWxzZSwgdHJ1ZSwgMC4wMDAzNTI3Nzc3Nzc3Nzc3OF0sXHJcbiAgICAgICAgICAgICAgICBbXCJwaWNhICgxLzcyIGluY2gpXCIsIFwiUGljYVwiLCBbXCJQaWNhcHRcIl0sIFwibGVuZ3RoXCIsIGZhbHNlLCB0cnVlLCAwLjAwNDIzMzMzMzMzMzMzMzMzXSxcclxuICAgICAgICAgICAgICAgIFtcInBvaXNlXCIsIFwiUFwiLCBudWxsLCBcImR5bmFtaWNfdmlzY29zaXR5XCIsIGZhbHNlLCBmYWxzZSwgMC4xXSxcclxuICAgICAgICAgICAgICAgIFtcInBvbmRcIiwgXCJwb25kXCIsIG51bGwsIFwiZm9yY2VcIiwgZmFsc2UsIHRydWUsIDAuMDA5ODA2NjVdLFxyXG4gICAgICAgICAgICAgICAgW1wicG91bmQgZm9yY2VcIiwgXCJsYmZcIiwgbnVsbCwgXCJmb3JjZVwiLCBmYWxzZSwgdHJ1ZSwgNC40NDgyMjE2MTUyNjA1XSxcclxuICAgICAgICAgICAgICAgIFtcInBvdW5kIG1hc3NcIiwgXCJsYm1cIiwgbnVsbCwgXCJtYXNzXCIsIGZhbHNlLCB0cnVlLCAwLjQ1MzU5MjM3XSxcclxuICAgICAgICAgICAgICAgIFtcInF1YXJ0XCIsIFwicXRcIiwgbnVsbCwgXCJ2b2x1bWVcIiwgZmFsc2UsIHRydWUsIDAuMDAwOTQ2MzUyOTQ2XSxcclxuICAgICAgICAgICAgICAgIFtcInJhZGlhblwiLCBcInJhZFwiLCBudWxsLCBcImFuZ2xlXCIsIHRydWUsIGZhbHNlLCAxXSxcclxuICAgICAgICAgICAgICAgIFtcInNlY29uZFwiLCBcIj9cIiwgbnVsbCwgXCJhbmdsZVwiLCBmYWxzZSwgZmFsc2UsIDAuMDAwMDA0ODQ4MTM2ODExMDk1MzZdLFxyXG4gICAgICAgICAgICAgICAgW1wic2Vjb25kXCIsIFwic1wiLCBbXCJzZWNcIl0sIFwidGltZVwiLCB0cnVlLCB0cnVlLCAxXSxcclxuICAgICAgICAgICAgICAgIFtcInNob3J0IGh1bmRyZWR3ZWlnaHRcIiwgXCJjd3RcIiwgW1wic2h3ZWlnaHRcIl0sIFwibWFzc1wiLCBmYWxzZSwgdHJ1ZSwgNDUuMzU5MjM3XSxcclxuICAgICAgICAgICAgICAgIFtcInNpZW1lbnNcIiwgXCJTXCIsIG51bGwsIFwiZWxlY3RyaWNhbF9jb25kdWN0YW5jZVwiLCB0cnVlLCBmYWxzZSwgMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJzaWV2ZXJ0XCIsIFwiU3ZcIiwgbnVsbCwgXCJlcXVpdmFsZW50X2Rvc2VcIiwgdHJ1ZSwgZmFsc2UsIDFdLFxyXG4gICAgICAgICAgICAgICAgW1wic2x1Z1wiLCBcInNnXCIsIG51bGwsIFwibWFzc1wiLCBmYWxzZSwgdHJ1ZSwgMTQuNTkzOTAyOTRdLFxyXG4gICAgICAgICAgICAgICAgW1wic3F1YXJlIMOlbmdzdHLDtm1cIiwgXCJhbmcyXCIsIFtcImFuZ14yXCJdLCBcImFyZWFcIiwgZmFsc2UsIHRydWUsIDFlLTIwXSxcclxuICAgICAgICAgICAgICAgIFtcInNxdWFyZSBmb290XCIsIFwiZnQyXCIsIFtcImZ0XjJcIl0sIFwiYXJlYVwiLCBmYWxzZSwgdHJ1ZSwgMC4wOTI5MDMwNF0sXHJcbiAgICAgICAgICAgICAgICBbXCJzcXVhcmUgaW5jaFwiLCBcImluMlwiLCBbXCJpbl4yXCJdLCBcImFyZWFcIiwgZmFsc2UsIHRydWUsIDAuMDAwNjQ1MTZdLFxyXG4gICAgICAgICAgICAgICAgW1wic3F1YXJlIGxpZ2h0LXllYXJcIiwgXCJseTJcIiwgW1wibHleMlwiXSwgXCJhcmVhXCIsIGZhbHNlLCB0cnVlLCA4Ljk1MDU0MjEwNzQ4MTg5ZSszMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJzcXVhcmUgbWV0ZXJcIiwgXCJtP1wiLCBudWxsLCBcImFyZWFcIiwgdHJ1ZSwgdHJ1ZSwgMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJzcXVhcmUgbWlsZVwiLCBcIm1pMlwiLCBbXCJtaV4yXCJdLCBcImFyZWFcIiwgZmFsc2UsIHRydWUsIDI1ODk5ODguMTEwMzM2XSxcclxuICAgICAgICAgICAgICAgIFtcInNxdWFyZSBuYXV0aWNhbCBtaWxlXCIsIFwiTm1pMlwiLCBbXCJObWleMlwiXSwgXCJhcmVhXCIsIGZhbHNlLCB0cnVlLCAzNDI5OTA0XSxcclxuICAgICAgICAgICAgICAgIFtcInNxdWFyZSBQaWNhXCIsIFwiUGljYTJcIiwgW1wiUGljYXB0MlwiLCBcIlBpY2FeMlwiLCBcIlBpY2FwdF4yXCJdLCBcImFyZWFcIiwgZmFsc2UsIHRydWUsIDAuMDAwMDE3OTIxMTExMTExMTFdLFxyXG4gICAgICAgICAgICAgICAgW1wic3F1YXJlIHlhcmRcIiwgXCJ5ZDJcIiwgW1wieWReMlwiXSwgXCJhcmVhXCIsIGZhbHNlLCB0cnVlLCAwLjgzNjEyNzM2XSxcclxuICAgICAgICAgICAgICAgIFtcInN0YXR1dGUgbWlsZVwiLCBcIm1pXCIsIG51bGwsIFwibGVuZ3RoXCIsIGZhbHNlLCB0cnVlLCAxNjA5LjM0NF0sXHJcbiAgICAgICAgICAgICAgICBbXCJzdGVyYWRpYW5cIiwgXCJzclwiLCBudWxsLCBcInNvbGlkX2FuZ2xlXCIsIHRydWUsIGZhbHNlLCAxXSxcclxuICAgICAgICAgICAgICAgIFtcInN0aWxiXCIsIFwic2JcIiwgbnVsbCwgXCJsdW1pbmFuY2VcIiwgZmFsc2UsIGZhbHNlLCAwLjAwMDFdLFxyXG4gICAgICAgICAgICAgICAgW1wic3Rva2VzXCIsIFwiU3RcIiwgbnVsbCwgXCJraW5lbWF0aWNfdmlzY29zaXR5XCIsIGZhbHNlLCBmYWxzZSwgMC4wMDAxXSxcclxuICAgICAgICAgICAgICAgIFtcInN0b25lXCIsIFwic3RvbmVcIiwgbnVsbCwgXCJtYXNzXCIsIGZhbHNlLCB0cnVlLCA2LjM1MDI5MzE4XSxcclxuICAgICAgICAgICAgICAgIFtcInRhYmxlc3Bvb25cIiwgXCJ0YnNcIiwgbnVsbCwgXCJ2b2x1bWVcIiwgZmFsc2UsIHRydWUsIDAuMDAwMDE0Nzg2OF0sXHJcbiAgICAgICAgICAgICAgICBbXCJ0ZWFzcG9vblwiLCBcInRzcFwiLCBudWxsLCBcInZvbHVtZVwiLCBmYWxzZSwgdHJ1ZSwgMC4wMDAwMDQ5Mjg5Ml0sXHJcbiAgICAgICAgICAgICAgICBbXCJ0ZXNsYVwiLCBcIlRcIiwgbnVsbCwgXCJtYWduZXRpY19mbHV4X2RlbnNpdHlcIiwgdHJ1ZSwgdHJ1ZSwgMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJ0aGVybW9keW5hbWljIGNhbG9yaWVcIiwgXCJjXCIsIG51bGwsIFwiZW5lcmd5XCIsIGZhbHNlLCB0cnVlLCA0LjE4NF0sXHJcbiAgICAgICAgICAgICAgICBbXCJ0b25cIiwgXCJ0b25cIiwgbnVsbCwgXCJtYXNzXCIsIGZhbHNlLCB0cnVlLCA5MDcuMTg0NzRdLFxyXG4gICAgICAgICAgICAgICAgW1widG9ubmVcIiwgXCJ0XCIsIG51bGwsIFwibWFzc1wiLCBmYWxzZSwgZmFsc2UsIDEwMDBdLFxyXG4gICAgICAgICAgICAgICAgW1wiVS5LLiBwaW50XCIsIFwidWtfcHRcIiwgbnVsbCwgXCJ2b2x1bWVcIiwgZmFsc2UsIHRydWUsIDAuMDAwNTY4MjYxMjVdLFxyXG4gICAgICAgICAgICAgICAgW1wiVS5TLiBidXNoZWxcIiwgXCJidXNoZWxcIiwgbnVsbCwgXCJ2b2x1bWVcIiwgZmFsc2UsIHRydWUsIDAuMDM1MjM5MDddLFxyXG4gICAgICAgICAgICAgICAgW1wiVS5TLiBvaWwgYmFycmVsXCIsIFwiYmFycmVsXCIsIG51bGwsIFwidm9sdW1lXCIsIGZhbHNlLCB0cnVlLCAwLjE1ODk4NzI5NV0sXHJcbiAgICAgICAgICAgICAgICBbXCJVLlMuIHBpbnRcIiwgXCJwdFwiLCBbXCJ1c19wdFwiXSwgXCJ2b2x1bWVcIiwgZmFsc2UsIHRydWUsIDAuMDAwNDczMTc2NDczXSxcclxuICAgICAgICAgICAgICAgIFtcIlUuUy4gc3VydmV5IG1pbGVcIiwgXCJzdXJ2ZXlfbWlcIiwgbnVsbCwgXCJsZW5ndGhcIiwgZmFsc2UsIHRydWUsIDE2MDkuMzQ3MjE5XSxcclxuICAgICAgICAgICAgICAgIFtcIlUuUy4gc3VydmV5L3N0YXR1dGUgYWNyZVwiLCBcInVzX2FjcmVcIiwgbnVsbCwgXCJhcmVhXCIsIGZhbHNlLCB0cnVlLCA0MDQ2Ljg3MjYxXSxcclxuICAgICAgICAgICAgICAgIFtcInZvbHRcIiwgXCJWXCIsIG51bGwsIFwidm9sdGFnZVwiLCB0cnVlLCBmYWxzZSwgMV0sXHJcbiAgICAgICAgICAgICAgICBbXCJ3YXR0XCIsIFwiV1wiLCBudWxsLCBcInBvd2VyXCIsIHRydWUsIHRydWUsIDFdLFxyXG4gICAgICAgICAgICAgICAgW1wid2F0dC1ob3VyXCIsIFwiV2hcIiwgW1wid2hcIl0sIFwiZW5lcmd5XCIsIGZhbHNlLCB0cnVlLCAzNjAwXSxcclxuICAgICAgICAgICAgICAgIFtcIndlYmVyXCIsIFwiV2JcIiwgbnVsbCwgXCJtYWduZXRpY19mbHV4XCIsIHRydWUsIGZhbHNlLCAxXSxcclxuICAgICAgICAgICAgICAgIFtcInlhcmRcIiwgXCJ5ZFwiLCBudWxsLCBcImxlbmd0aFwiLCBmYWxzZSwgdHJ1ZSwgMC45MTQ0XSxcclxuICAgICAgICAgICAgICAgIFtcInllYXJcIiwgXCJ5clwiLCBudWxsLCBcInRpbWVcIiwgZmFsc2UsIHRydWUsIDMxNTU3NjAwXVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEJpbmFyeSBwcmVmaXhlc1xyXG4gICAgICAgICAgICAvLyBbTmFtZSwgUHJlZml4IHBvd2VyIG9mIDIgdmFsdWUsIFByZXZpeCB2YWx1ZSwgQWJicmV2aWF0aW9uLCBEZXJpdmVkXHJcbiAgICAgICAgICAgIC8vIGZyb21dXHJcbiAgICAgICAgICAgIHZhciBiaW5hcnlfcHJlZml4ZXMgPSB7XHJcbiAgICAgICAgICAgICAgICBZaTogW1wieW9iaVwiLCA4MCwgMTIwODkyNTgxOTYxNDYyOTE3NDcwNjE3NiwgXCJZaVwiLCBcInlvdHRhXCJdLFxyXG4gICAgICAgICAgICAgICAgWmk6IFtcInplYmlcIiwgNzAsIDExODA1OTE2MjA3MTc0MTEzMDM0MjQsIFwiWmlcIiwgXCJ6ZXR0YVwiXSxcclxuICAgICAgICAgICAgICAgIEVpOiBbXCJleGJpXCIsIDYwLCAxMTUyOTIxNTA0NjA2ODQ2OTc2LCBcIkVpXCIsIFwiZXhhXCJdLFxyXG4gICAgICAgICAgICAgICAgUGk6IFtcInBlYmlcIiwgNTAsIDExMjU4OTk5MDY4NDI2MjQsIFwiUGlcIiwgXCJwZXRhXCJdLFxyXG4gICAgICAgICAgICAgICAgVGk6IFtcInRlYmlcIiwgNDAsIDEwOTk1MTE2Mjc3NzYsIFwiVGlcIiwgXCJ0ZXJhXCJdLFxyXG4gICAgICAgICAgICAgICAgR2k6IFtcImdpYmlcIiwgMzAsIDEwNzM3NDE4MjQsIFwiR2lcIiwgXCJnaWdhXCJdLFxyXG4gICAgICAgICAgICAgICAgTWk6IFtcIm1lYmlcIiwgMjAsIDEwNDg1NzYsIFwiTWlcIiwgXCJtZWdhXCJdLFxyXG4gICAgICAgICAgICAgICAga2k6IFtcImtpYmlcIiwgMTAsIDEwMjQsIFwia2lcIiwgXCJraWxvXCJdXHJcbiAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gVW5pdCBwcmVmaXhlc1xyXG4gICAgICAgICAgICAvLyBbTmFtZSwgTXVsdGlwbGllciwgQWJicmV2aWF0aW9uXVxyXG4gICAgICAgICAgICB2YXIgdW5pdF9wcmVmaXhlcyA9IHtcclxuICAgICAgICAgICAgICAgIFk6IFtcInlvdHRhXCIsIDFlKzI0LCBcIllcIl0sXHJcbiAgICAgICAgICAgICAgICBaOiBbXCJ6ZXR0YVwiLCAxZSsyMSwgXCJaXCJdLFxyXG4gICAgICAgICAgICAgICAgRTogW1wiZXhhXCIsIDFlKzE4LCBcIkVcIl0sXHJcbiAgICAgICAgICAgICAgICBQOiBbXCJwZXRhXCIsIDFlKzE1LCBcIlBcIl0sXHJcbiAgICAgICAgICAgICAgICBUOiBbXCJ0ZXJhXCIsIDFlKzEyLCBcIlRcIl0sXHJcbiAgICAgICAgICAgICAgICBHOiBbXCJnaWdhXCIsIDFlKzA5LCBcIkdcIl0sXHJcbiAgICAgICAgICAgICAgICBNOiBbXCJtZWdhXCIsIDFlKzA2LCBcIk1cIl0sXHJcbiAgICAgICAgICAgICAgICBrOiBbXCJraWxvXCIsIDFlKzAzLCBcImtcIl0sXHJcbiAgICAgICAgICAgICAgICBoOiBbXCJoZWN0b1wiLCAxZSswMiwgXCJoXCJdLFxyXG4gICAgICAgICAgICAgICAgZTogW1wiZGVrYW9cIiwgMWUrMDEsIFwiZVwiXSxcclxuICAgICAgICAgICAgICAgIGQ6IFtcImRlY2lcIiwgMWUtMDEsIFwiZFwiXSxcclxuICAgICAgICAgICAgICAgIGM6IFtcImNlbnRpXCIsIDFlLTAyLCBcImNcIl0sXHJcbiAgICAgICAgICAgICAgICBtOiBbXCJtaWxsaVwiLCAxZS0wMywgXCJtXCJdLFxyXG4gICAgICAgICAgICAgICAgdTogW1wibWljcm9cIiwgMWUtMDYsIFwidVwiXSxcclxuICAgICAgICAgICAgICAgIG46IFtcIm5hbm9cIiwgMWUtMDksIFwiblwiXSxcclxuICAgICAgICAgICAgICAgIHA6IFtcInBpY29cIiwgMWUtMTIsIFwicFwiXSxcclxuICAgICAgICAgICAgICAgIGY6IFtcImZlbXRvXCIsIDFlLTE1LCBcImZcIl0sXHJcbiAgICAgICAgICAgICAgICBhOiBbXCJhdHRvXCIsIDFlLTE4LCBcImFcIl0sXHJcbiAgICAgICAgICAgICAgICB6OiBbXCJ6ZXB0b1wiLCAxZS0yMSwgXCJ6XCJdLFxyXG4gICAgICAgICAgICAgICAgeTogW1wieW9jdG9cIiwgMWUtMjQsIFwieVwiXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdW5pdHMgYW5kIG11bHRpcGxpZXJzXHJcbiAgICAgICAgICAgIHZhciBmcm9tID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIHRvID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIGJhc2VfZnJvbV91bml0ID0gZnJvbV91bml0O1xyXG4gICAgICAgICAgICB2YXIgYmFzZV90b191bml0ID0gdG9fdW5pdDtcclxuICAgICAgICAgICAgdmFyIGZyb21fbXVsdGlwbGllciA9IDE7XHJcbiAgICAgICAgICAgIHZhciB0b19tdWx0aXBsaWVyID0gMTtcclxuICAgICAgICAgICAgdmFyIGFsdDtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBMb29rdXAgZnJvbSBhbmQgdG8gdW5pdHNcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bml0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgYWx0ID0gKHVuaXRzW2ldWzJdID09PSBudWxsKSA/IFtdIDogdW5pdHNbaV1bMl07XHJcbiAgICAgICAgICAgICAgICBpZiAodW5pdHNbaV1bMV0gPT09IGJhc2VfZnJvbV91bml0IHx8IGFsdC5pbmRleE9mKGJhc2VfZnJvbV91bml0KSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIGZyb20gPSB1bml0c1tpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh1bml0c1tpXVsxXSA9PT0gYmFzZV90b191bml0IHx8IGFsdC5pbmRleE9mKGJhc2VfdG9fdW5pdCkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICB0byA9IHVuaXRzW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gTG9va3VwIGZyb20gcHJlZml4XHJcbiAgICAgICAgICAgIGlmIChmcm9tID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZnJvbV9iaW5hcnlfcHJlZml4ID0gYmluYXJ5X3ByZWZpeGVzW2Zyb21fdW5pdC5zdWJzdHJpbmcoMCwgMildO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZyb21fdW5pdF9wcmVmaXggPSB1bml0X3ByZWZpeGVzW2Zyb21fdW5pdC5zdWJzdHJpbmcoMCwgMSldO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgZGVrYW8gdW5pdCBwcmVmaXggKG9ubHkgdW5pdCBwcmVmaXggd2l0aCB0d28gY2hhcmFjdGVycylcclxuICAgICAgICAgICAgICAgIGlmIChmcm9tX3VuaXQuc3Vic3RyaW5nKDAsIDIpID09PSAnZGEnKSB7XHJcbiAgICAgICAgICAgICAgICAgIGZyb21fdW5pdF9wcmVmaXggPSBbXCJkZWthb1wiLCAxZSswMSwgXCJkYVwiXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIGJpbmFyeSBwcmVmaXhlcyBmaXJzdCAoc28gdGhhdCAnWWknIGlzIHByb2Nlc3NlZCBiZWZvcmVcclxuICAgICAgICAgICAgICAgIC8vICdZJylcclxuICAgICAgICAgICAgICAgIGlmIChmcm9tX2JpbmFyeV9wcmVmaXgpIHtcclxuICAgICAgICAgICAgICAgICAgZnJvbV9tdWx0aXBsaWVyID0gZnJvbV9iaW5hcnlfcHJlZml4WzJdO1xyXG4gICAgICAgICAgICAgICAgICBiYXNlX2Zyb21fdW5pdCA9IGZyb21fdW5pdC5zdWJzdHJpbmcoMik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZyb21fdW5pdF9wcmVmaXgpIHtcclxuICAgICAgICAgICAgICAgICAgZnJvbV9tdWx0aXBsaWVyID0gZnJvbV91bml0X3ByZWZpeFsxXTtcclxuICAgICAgICAgICAgICAgICAgYmFzZV9mcm9tX3VuaXQgPSBmcm9tX3VuaXQuc3Vic3RyaW5nKGZyb21fdW5pdF9wcmVmaXhbMl0ubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gTG9va3VwIGZyb20gdW5pdFxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB1bml0cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICBhbHQgPSAodW5pdHNbal1bMl0gPT09IG51bGwpID8gW10gOiB1bml0c1tqXVsyXTtcclxuICAgICAgICAgICAgICAgICAgaWYgKHVuaXRzW2pdWzFdID09PSBiYXNlX2Zyb21fdW5pdCB8fCBhbHQuaW5kZXhPZihiYXNlX2Zyb21fdW5pdCkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgZnJvbSA9IHVuaXRzW2pdO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBMb29rdXAgdG8gcHJlZml4XHJcbiAgICAgICAgICAgIGlmICh0byA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvX2JpbmFyeV9wcmVmaXggPSBiaW5hcnlfcHJlZml4ZXNbdG9fdW5pdC5zdWJzdHJpbmcoMCwgMildO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvX3VuaXRfcHJlZml4ID0gdW5pdF9wcmVmaXhlc1t0b191bml0LnN1YnN0cmluZygwLCAxKV07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBkZWthbyB1bml0IHByZWZpeCAob25seSB1bml0IHByZWZpeCB3aXRoIHR3byBjaGFyYWN0ZXJzKVxyXG4gICAgICAgICAgICAgICAgaWYgKHRvX3VuaXQuc3Vic3RyaW5nKDAsIDIpID09PSAnZGEnKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRvX3VuaXRfcHJlZml4ID0gW1wiZGVrYW9cIiwgMWUrMDEsIFwiZGFcIl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBiaW5hcnkgcHJlZml4ZXMgZmlyc3QgKHNvIHRoYXQgJ1lpJyBpcyBwcm9jZXNzZWQgYmVmb3JlXHJcbiAgICAgICAgICAgICAgICAvLyAnWScpXHJcbiAgICAgICAgICAgICAgICBpZiAodG9fYmluYXJ5X3ByZWZpeCkge1xyXG4gICAgICAgICAgICAgICAgICB0b19tdWx0aXBsaWVyID0gdG9fYmluYXJ5X3ByZWZpeFsyXTtcclxuICAgICAgICAgICAgICAgICAgYmFzZV90b191bml0ID0gdG9fdW5pdC5zdWJzdHJpbmcoMik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRvX3VuaXRfcHJlZml4KSB7XHJcbiAgICAgICAgICAgICAgICAgIHRvX211bHRpcGxpZXIgPSB0b191bml0X3ByZWZpeFsxXTtcclxuICAgICAgICAgICAgICAgICAgYmFzZV90b191bml0ID0gdG9fdW5pdC5zdWJzdHJpbmcodG9fdW5pdF9wcmVmaXhbMl0ubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gTG9va3VwIHRvIHVuaXRcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdW5pdHMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgYWx0ID0gKHVuaXRzW2tdWzJdID09PSBudWxsKSA/IFtdIDogdW5pdHNba11bMl07XHJcbiAgICAgICAgICAgICAgICAgIGlmICh1bml0c1trXVsxXSA9PT0gYmFzZV90b191bml0IHx8IGFsdC5pbmRleE9mKGJhc2VfdG9fdW5pdCkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdG8gPSB1bml0c1trXTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGEgdW5pdCBkb2VzIG5vdCBleGlzdFxyXG4gICAgICAgICAgICBpZiAoZnJvbSA9PT0gbnVsbCB8fCB0byA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm5hO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIHVuaXRzIHJlcHJlc2VudCBkaWZmZXJlbnQgcXVhbnRpdGllc1xyXG4gICAgICAgICAgICBpZiAoZnJvbVszXSAhPT0gdG9bM10pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5uYTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBjb252ZXJ0ZWQgbnVtYmVyXHJcbiAgICAgICAgICAgIHJldHVybiBudW1iZXIgKiBmcm9tWzZdICogZnJvbV9tdWx0aXBsaWVyIC8gKHRvWzZdICogdG9fbXVsdGlwbGllcik7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuREVDMkJJTiA9IGZ1bmN0aW9uKG51bWJlciwgcGxhY2VzKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBudW1iZXIgaXMgbm90IGRlY2ltYWwsIGlzIGxvd2VyIHRoYW4gLTUxMiwgb3IgaXNcclxuICAgICAgICAgICAgLy8gZ3JlYXRlciB0aGFuIDUxMVxyXG4gICAgICAgICAgICBpZiAoIS9eLT9bMC05XXsxLDN9JC8udGVzdChudW1iZXIpIHx8IG51bWJlciA8IC01MTIgfHwgbnVtYmVyID4gNTExKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gSWdub3JlIHBsYWNlcyBhbmQgcmV0dXJuIGEgMTAtY2hhcmFjdGVyIGJpbmFyeSBudW1iZXIgaWYgbnVtYmVyIGlzXHJcbiAgICAgICAgICAgIC8vIG5lZ2F0aXZlXHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJzEnICsgUkVQVCgnMCcsIDkgLSAoNTEyICsgbnVtYmVyKS50b1N0cmluZygyKS5sZW5ndGgpICsgKDUxMiArIG51bWJlcikudG9TdHJpbmcoMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IGRlY2ltYWwgbnVtYmVyIHRvIGJpbmFyeVxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gcGFyc2VJbnQobnVtYmVyLCAxMCkudG9TdHJpbmcoMik7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGJpbmFyeSBudW1iZXIgdXNpbmcgdGhlIG1pbmltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgbmVjZXNzYXJ5XHJcbiAgICAgICAgICAgIC8vIGlmIHBsYWNlcyBpcyB1bmRlZmluZWRcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwbGFjZXMgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIHBsYWNlcyBpcyBub25udW1lcmljXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4ocGxhY2VzKSkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBwbGFjZXMgaXMgbmVnYXRpdmVcclxuICAgICAgICAgICAgICAgIGlmIChwbGFjZXMgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFRydW5jYXRlIHBsYWNlcyBpbiBjYXNlIGl0IGlzIG5vdCBhbiBpbnRlZ2VyXHJcbiAgICAgICAgICAgICAgICBwbGFjZXMgPSBNYXRoLmZsb29yKHBsYWNlcyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFBhZCByZXR1cm4gdmFsdWUgd2l0aCBsZWFkaW5nIDBzICh6ZXJvcykgaWYgbmVjZXNzYXJ5ICh1c2luZ1xyXG4gICAgICAgICAgICAgICAgLy8gVW5kZXJzY29yZS5zdHJpbmcpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHBsYWNlcyA+PSByZXN1bHQubGVuZ3RoKSA/IFJFUFQoJzAnLCBwbGFjZXMgLSByZXN1bHQubGVuZ3RoKSArIHJlc3VsdCA6IGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkRFQzJIRVggPSBmdW5jdGlvbihudW1iZXIsIHBsYWNlcykge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgbnVtYmVyIGlzIG5vdCBkZWNpbWFsLCBpcyBsb3dlciB0aGFuIC01NDk3NTU4MTM4ODgsXHJcbiAgICAgICAgICAgIC8vIG9yIGlzIGdyZWF0ZXIgdGhhbiA1NDk3NTU4MTM4ODdcclxuICAgICAgICAgICAgaWYgKCEvXi0/WzAtOV17MSwxMn0kLy50ZXN0KG51bWJlcikgfHwgbnVtYmVyIDwgLTU0OTc1NTgxMzg4OCB8fCBudW1iZXIgPiA1NDk3NTU4MTM4ODcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBJZ25vcmUgcGxhY2VzIGFuZCByZXR1cm4gYSAxMC1jaGFyYWN0ZXIgaGV4YWRlY2ltYWwgbnVtYmVyIGlmIG51bWJlclxyXG4gICAgICAgICAgICAvLyBpcyBuZWdhdGl2ZVxyXG4gICAgICAgICAgICBpZiAobnVtYmVyIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgxMDk5NTExNjI3Nzc2ICsgbnVtYmVyKS50b1N0cmluZygxNik7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IGRlY2ltYWwgbnVtYmVyIHRvIGhleGFkZWNpbWFsXHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBwYXJzZUludChudW1iZXIsIDEwKS50b1N0cmluZygxNik7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGhleGFkZWNpbWFsIG51bWJlciB1c2luZyB0aGUgbWluaW11bSBudW1iZXIgb2YgY2hhcmFjdGVyc1xyXG4gICAgICAgICAgICAvLyBuZWNlc3NhcnkgaWYgcGxhY2VzIGlzIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHBsYWNlcyA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgcGxhY2VzIGlzIG5vbm51bWVyaWNcclxuICAgICAgICAgICAgICAgIGlmIChpc05hTihwbGFjZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIHBsYWNlcyBpcyBuZWdhdGl2ZVxyXG4gICAgICAgICAgICAgICAgaWYgKHBsYWNlcyA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVHJ1bmNhdGUgcGxhY2VzIGluIGNhc2UgaXQgaXMgbm90IGFuIGludGVnZXJcclxuICAgICAgICAgICAgICAgIHBsYWNlcyA9IE1hdGguZmxvb3IocGxhY2VzKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUGFkIHJldHVybiB2YWx1ZSB3aXRoIGxlYWRpbmcgMHMgKHplcm9zKSBpZiBuZWNlc3NhcnkgKHVzaW5nXHJcbiAgICAgICAgICAgICAgICAvLyBVbmRlcnNjb3JlLnN0cmluZylcclxuICAgICAgICAgICAgICAgIHJldHVybiAocGxhY2VzID49IHJlc3VsdC5sZW5ndGgpID8gUkVQVCgnMCcsIHBsYWNlcyAtIHJlc3VsdC5sZW5ndGgpICsgcmVzdWx0IDogZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuREVDMk9DVCA9IGZ1bmN0aW9uKG51bWJlciwgcGxhY2VzKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBudW1iZXIgaXMgbm90IGRlY2ltYWwsIGlzIGxvd2VyIHRoYW4gLTU0OTc1NTgxMzg4OCxcclxuICAgICAgICAgICAgLy8gb3IgaXMgZ3JlYXRlciB0aGFuIDU0OTc1NTgxMzg4N1xyXG4gICAgICAgICAgICBpZiAoIS9eLT9bMC05XXsxLDl9JC8udGVzdChudW1iZXIpIHx8IG51bWJlciA8IC01MzY4NzA5MTIgfHwgbnVtYmVyID4gNTM2ODcwOTExKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gSWdub3JlIHBsYWNlcyBhbmQgcmV0dXJuIGEgMTAtY2hhcmFjdGVyIG9jdGFsIG51bWJlciBpZiBudW1iZXIgaXNcclxuICAgICAgICAgICAgLy8gbmVnYXRpdmVcclxuICAgICAgICAgICAgaWYgKG51bWJlciA8IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoMTA3Mzc0MTgyNCArIG51bWJlcikudG9TdHJpbmcoOCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IGRlY2ltYWwgbnVtYmVyIHRvIG9jdGFsXHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBwYXJzZUludChudW1iZXIsIDEwKS50b1N0cmluZyg4KTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gb2N0YWwgbnVtYmVyIHVzaW5nIHRoZSBtaW5pbXVtIG51bWJlciBvZiBjaGFyYWN0ZXJzIG5lY2Vzc2FyeVxyXG4gICAgICAgICAgICAvLyBpZiBwbGFjZXMgaXMgdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGxhY2VzID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBwbGFjZXMgaXMgbm9ubnVtZXJpY1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKHBsYWNlcykpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgcGxhY2VzIGlzIG5lZ2F0aXZlXHJcbiAgICAgICAgICAgICAgICBpZiAocGxhY2VzIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBUcnVuY2F0ZSBwbGFjZXMgaW4gY2FzZSBpdCBpcyBub3QgYW4gaW50ZWdlclxyXG4gICAgICAgICAgICAgICAgcGxhY2VzID0gTWF0aC5mbG9vcihwbGFjZXMpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBQYWQgcmV0dXJuIHZhbHVlIHdpdGggbGVhZGluZyAwcyAoemVyb3MpIGlmIG5lY2Vzc2FyeSAodXNpbmdcclxuICAgICAgICAgICAgICAgIC8vIFVuZGVyc2NvcmUuc3RyaW5nKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChwbGFjZXMgPj0gcmVzdWx0Lmxlbmd0aCkgPyBSRVBUKCcwJywgcGxhY2VzIC0gcmVzdWx0Lmxlbmd0aCkgKyByZXN1bHQgOiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5ERUxUQSA9IGZ1bmN0aW9uKG51bWJlcjEsIG51bWJlcjIpIHtcclxuICAgICAgICAgICAgLy8gU2V0IG51bWJlcjIgdG8gemVybyBpZiB1bmRlZmluZWRcclxuICAgICAgICAgICAgbnVtYmVyMiA9IChudW1iZXIyID09PSB1bmRlZmluZWQpID8gMCA6IG51bWJlcjI7XHJcbiAgICAgICAgICAgIG51bWJlcjEgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIxKTtcclxuICAgICAgICAgICAgbnVtYmVyMiA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcjIpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihudW1iZXIxLCBudW1iZXIyKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGRlbHRhXHJcbiAgICAgICAgICAgIHJldHVybiAobnVtYmVyMSA9PT0gbnVtYmVyMikgPyAxIDogMDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5FUkYgPSBmdW5jdGlvbihsb3dlcl9ib3VuZCwgdXBwZXJfYm91bmQpIHtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5FUkYuUFJFQ0lTRSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkVSRkMgPSBmdW5jdGlvbih4KSB7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuRVJGQy5QUkVDSVNFID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuR0VTVEVQID0gZnVuY3Rpb24obnVtYmVyLCBzdGVwKSB7XHJcbiAgICAgICAgICAgIHN0ZXAgPSBzdGVwIHx8IDA7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHN0ZXAsIG51bWJlcikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZGVsdGFcclxuICAgICAgICAgICAgcmV0dXJuIChudW1iZXIgPj0gc3RlcCkgPyAxIDogMDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5IRVgyQklOID0gZnVuY3Rpb24obnVtYmVyLCBwbGFjZXMpIHtcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIG51bWJlciBpcyBub3QgaGV4YWRlY2ltYWwgb3IgY29udGFpbnMgbW9yZSB0aGFuIHRlblxyXG4gICAgICAgICAgICAvLyBjaGFyYWN0ZXJzICgxMCBkaWdpdHMpXHJcbiAgICAgICAgICAgIGlmICghL15bMC05QS1GYS1mXXsxLDEwfSQvLnRlc3QobnVtYmVyKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIG51bWJlciBpcyBuZWdhdGl2ZVxyXG4gICAgICAgICAgICB2YXIgbmVnYXRpdmUgPSAobnVtYmVyLmxlbmd0aCA9PT0gMTAgJiYgbnVtYmVyLnN1YnN0cmluZygwLCAxKS50b0xvd2VyQ2FzZSgpID09PSAnZicpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIENvbnZlcnQgaGV4YWRlY2ltYWwgbnVtYmVyIHRvIGRlY2ltYWxcclxuICAgICAgICAgICAgdmFyIGRlY2ltYWwgPSAobmVnYXRpdmUpID8gcGFyc2VJbnQobnVtYmVyLCAxNikgLSAxMDk5NTExNjI3Nzc2IDogcGFyc2VJbnQobnVtYmVyLCAxNik7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIG51bWJlciBpcyBsb3dlciB0aGFuIC01MTIgb3IgZ3JlYXRlciB0aGFuIDUxMVxyXG4gICAgICAgICAgICBpZiAoZGVjaW1hbCA8IC01MTIgfHwgZGVjaW1hbCA+IDUxMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIElnbm9yZSBwbGFjZXMgYW5kIHJldHVybiBhIDEwLWNoYXJhY3RlciBiaW5hcnkgbnVtYmVyIGlmIG51bWJlciBpc1xyXG4gICAgICAgICAgICAvLyBuZWdhdGl2ZVxyXG4gICAgICAgICAgICBpZiAobmVnYXRpdmUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnMScgKyBSRVBUKCcwJywgOSAtICg1MTIgKyBkZWNpbWFsKS50b1N0cmluZygyKS5sZW5ndGgpICsgKDUxMiArIGRlY2ltYWwpLnRvU3RyaW5nKDIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ29udmVydCBkZWNpbWFsIG51bWJlciB0byBiaW5hcnlcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGRlY2ltYWwudG9TdHJpbmcoMik7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGJpbmFyeSBudW1iZXIgdXNpbmcgdGhlIG1pbmltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgbmVjZXNzYXJ5XHJcbiAgICAgICAgICAgIC8vIGlmIHBsYWNlcyBpcyB1bmRlZmluZWRcclxuICAgICAgICAgICAgaWYgKHBsYWNlcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIHBsYWNlcyBpcyBub25udW1lcmljXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4ocGxhY2VzKSkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBwbGFjZXMgaXMgbmVnYXRpdmVcclxuICAgICAgICAgICAgICAgIGlmIChwbGFjZXMgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFRydW5jYXRlIHBsYWNlcyBpbiBjYXNlIGl0IGlzIG5vdCBhbiBpbnRlZ2VyXHJcbiAgICAgICAgICAgICAgICBwbGFjZXMgPSBNYXRoLmZsb29yKHBsYWNlcyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFBhZCByZXR1cm4gdmFsdWUgd2l0aCBsZWFkaW5nIDBzICh6ZXJvcykgaWYgbmVjZXNzYXJ5ICh1c2luZ1xyXG4gICAgICAgICAgICAgICAgLy8gVW5kZXJzY29yZS5zdHJpbmcpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHBsYWNlcyA+PSByZXN1bHQubGVuZ3RoKSA/IFJFUFQoJzAnLCBwbGFjZXMgLSByZXN1bHQubGVuZ3RoKSArIHJlc3VsdCA6IGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkhFWDJERUMgPSBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIG51bWJlciBpcyBub3QgaGV4YWRlY2ltYWwgb3IgY29udGFpbnMgbW9yZSB0aGFuIHRlblxyXG4gICAgICAgICAgICAvLyBjaGFyYWN0ZXJzICgxMCBkaWdpdHMpXHJcbiAgICAgICAgICAgIGlmICghL15bMC05QS1GYS1mXXsxLDEwfSQvLnRlc3QobnVtYmVyKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIENvbnZlcnQgaGV4YWRlY2ltYWwgbnVtYmVyIHRvIGRlY2ltYWxcclxuICAgICAgICAgICAgdmFyIGRlY2ltYWwgPSBwYXJzZUludChudW1iZXIsIDE2KTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZGVjaW1hbCBudW1iZXJcclxuICAgICAgICAgICAgcmV0dXJuIChkZWNpbWFsID49IDU0OTc1NTgxMzg4OCkgPyBkZWNpbWFsIC0gMTA5OTUxMTYyNzc3NiA6IGRlY2ltYWw7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSEVYMk9DVCA9IGZ1bmN0aW9uKG51bWJlciwgcGxhY2VzKSB7XHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBudW1iZXIgaXMgbm90IGhleGFkZWNpbWFsIG9yIGNvbnRhaW5zIG1vcmUgdGhhbiB0ZW5cclxuICAgICAgICAgICAgLy8gY2hhcmFjdGVycyAoMTAgZGlnaXRzKVxyXG4gICAgICAgICAgICBpZiAoIS9eWzAtOUEtRmEtZl17MSwxMH0kLy50ZXN0KG51bWJlcikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IGhleGFkZWNpbWFsIG51bWJlciB0byBkZWNpbWFsXHJcbiAgICAgICAgICAgIHZhciBkZWNpbWFsID0gcGFyc2VJbnQobnVtYmVyLCAxNik7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIG51bWJlciBpcyBwb3NpdGl2ZSBhbmQgZ3JlYXRlciB0aGFuIDB4MWZmZmZmZmZcclxuICAgICAgICAgICAgLy8gKDUzNjg3MDkxMSlcclxuICAgICAgICAgICAgaWYgKGRlY2ltYWwgPiA1MzY4NzA5MTEgJiYgZGVjaW1hbCA8IDEwOTg5NzQ3NTY4NjQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBJZ25vcmUgcGxhY2VzIGFuZCByZXR1cm4gYSAxMC1jaGFyYWN0ZXIgb2N0YWwgbnVtYmVyIGlmIG51bWJlciBpc1xyXG4gICAgICAgICAgICAvLyBuZWdhdGl2ZVxyXG4gICAgICAgICAgICBpZiAoZGVjaW1hbCA+PSAxMDk4OTc0NzU2ODY0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGRlY2ltYWwgLSAxMDk4NDM3ODg1OTUyKS50b1N0cmluZyg4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIENvbnZlcnQgZGVjaW1hbCBudW1iZXIgdG8gb2N0YWxcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGRlY2ltYWwudG9TdHJpbmcoOCk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIG9jdGFsIG51bWJlciB1c2luZyB0aGUgbWluaW11bSBudW1iZXIgb2YgY2hhcmFjdGVycyBuZWNlc3NhcnlcclxuICAgICAgICAgICAgLy8gaWYgcGxhY2VzIGlzIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICBpZiAocGxhY2VzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgcGxhY2VzIGlzIG5vbm51bWVyaWNcclxuICAgICAgICAgICAgICAgIGlmIChpc05hTihwbGFjZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIHBsYWNlcyBpcyBuZWdhdGl2ZVxyXG4gICAgICAgICAgICAgICAgaWYgKHBsYWNlcyA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVHJ1bmNhdGUgcGxhY2VzIGluIGNhc2UgaXQgaXMgbm90IGFuIGludGVnZXJcclxuICAgICAgICAgICAgICAgIHBsYWNlcyA9IE1hdGguZmxvb3IocGxhY2VzKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUGFkIHJldHVybiB2YWx1ZSB3aXRoIGxlYWRpbmcgMHMgKHplcm9zKSBpZiBuZWNlc3NhcnkgKHVzaW5nXHJcbiAgICAgICAgICAgICAgICAvLyBVbmRlcnNjb3JlLnN0cmluZylcclxuICAgICAgICAgICAgICAgIHJldHVybiAocGxhY2VzID49IHJlc3VsdC5sZW5ndGgpID8gUkVQVCgnMCcsIHBsYWNlcyAtIHJlc3VsdC5sZW5ndGgpICsgcmVzdWx0IDogZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSU1BQlMgPSBmdW5jdGlvbihpbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIC8vIExvb2t1cCByZWFsIGFuZCBpbWFnaW5hcnkgY29lZmZpY2llbnRzIHVzaW5nIGV4cG9ydHMuanNcclxuICAgICAgICAgICAgLy8gW2h0dHA6Ly9mb3JtdWxhanMub3JnXVxyXG4gICAgICAgICAgICB2YXIgeCA9IGV4cG9ydHMuSU1SRUFMKGludW1iZXIpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGV4cG9ydHMuSU1BR0lOQVJZKGludW1iZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBlaXRoZXIgY29lZmZpY2llbnQgaXMgbm90IGEgbnVtYmVyXHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHgsIHkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gYWJzb2x1dGUgdmFsdWUgb2YgY29tcGxleCBudW1iZXJcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyh4LCAyKSArIE1hdGgucG93KHksIDIpKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JTUFHSU5BUlkgPSBmdW5jdGlvbihpbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGlmIChpbnVtYmVyID09PSB1bmRlZmluZWQgfHwgaW51bWJlciA9PT0gdHJ1ZSB8fCBpbnVtYmVyID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIDAgaWYgaW51bWJlciBpcyBlcXVhbCB0byAwXHJcbiAgICAgICAgICAgIGlmIChpbnVtYmVyID09PSAwIHx8IGludW1iZXIgPT09ICcwJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBIYW5kbGUgc3BlY2lhbCBjYXNlc1xyXG4gICAgICAgICAgICBpZiAoWydpJywgJ2onXS5pbmRleE9mKGludW1iZXIpID49IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gTm9ybWFsaXplIGltYWdpbmFyeSBjb2VmZmljaWVudFxyXG4gICAgICAgICAgICBpbnVtYmVyID0gaW51bWJlci5yZXBsYWNlKCcraScsICcrMWknKS5yZXBsYWNlKCctaScsICctMWknKS5yZXBsYWNlKCcraicsICcrMWonKS5yZXBsYWNlKCctaicsICctMWonKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBMb29rdXAgc2lnblxyXG4gICAgICAgICAgICB2YXIgcGx1cyA9IGludW1iZXIuaW5kZXhPZignKycpO1xyXG4gICAgICAgICAgICB2YXIgbWludXMgPSBpbnVtYmVyLmluZGV4T2YoJy0nKTtcclxuICAgICAgICAgICAgaWYgKHBsdXMgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHBsdXMgPSBpbnVtYmVyLmluZGV4T2YoJysnLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChtaW51cyA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgbWludXMgPSBpbnVtYmVyLmluZGV4T2YoJy0nLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIExvb2t1cCBpbWFnaW5hcnkgdW5pdFxyXG4gICAgICAgICAgICB2YXIgbGFzdCA9IGludW1iZXIuc3Vic3RyaW5nKGludW1iZXIubGVuZ3RoIC0gMSwgaW51bWJlci5sZW5ndGgpO1xyXG4gICAgICAgICAgICB2YXIgdW5pdCA9IChsYXN0ID09PSAnaScgfHwgbGFzdCA9PT0gJ2onKTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAocGx1cyA+PSAwIHx8IG1pbnVzID49IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBpbWFnaW5hcnkgdW5pdCBpcyBuZWl0aGVyIGkgbm9yIGpcclxuICAgICAgICAgICAgICAgIGlmICghdW5pdCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gaW1hZ2luYXJ5IGNvZWZmaWNpZW50IG9mIGNvbXBsZXggbnVtYmVyXHJcbiAgICAgICAgICAgICAgICBpZiAocGx1cyA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoaXNOYU4oaW51bWJlci5zdWJzdHJpbmcoMCwgcGx1cykpIHx8IGlzTmFOKGludW1iZXIuc3Vic3RyaW5nKHBsdXMgKyAxLCBpbnVtYmVyLmxlbmd0aCAtIDEpKSkgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgZXJyb3IubnVtIDpcclxuICAgICAgICAgICAgICAgICAgICAgIE51bWJlcihpbnVtYmVyLnN1YnN0cmluZyhwbHVzICsgMSwgaW51bWJlci5sZW5ndGggLSAxKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gKGlzTmFOKGludW1iZXIuc3Vic3RyaW5nKDAsIG1pbnVzKSkgfHwgaXNOYU4oaW51bWJlci5zdWJzdHJpbmcobWludXMgKyAxLCBpbnVtYmVyLmxlbmd0aCAtIDEpKSkgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgZXJyb3IubnVtIDpcclxuICAgICAgICAgICAgICAgICAgICAgIC1OdW1iZXIoaW51bWJlci5zdWJzdHJpbmcobWludXMgKyAxLCBpbnVtYmVyLmxlbmd0aCAtIDEpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh1bml0KSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoaXNOYU4oaW51bWJlci5zdWJzdHJpbmcoMCwgaW51bWJlci5sZW5ndGggLSAxKSkpID8gZXJyb3IubnVtIDogaW51bWJlci5zdWJzdHJpbmcoMCwgaW51bWJlci5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoaXNOYU4oaW51bWJlcikpID8gZXJyb3IubnVtIDogMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLklNQVJHVU1FTlQgPSBmdW5jdGlvbihpbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIC8vIExvb2t1cCByZWFsIGFuZCBpbWFnaW5hcnkgY29lZmZpY2llbnRzIHVzaW5nIGV4cG9ydHMuanNcclxuICAgICAgICAgICAgLy8gW2h0dHA6Ly9mb3JtdWxhanMub3JnXVxyXG4gICAgICAgICAgICB2YXIgeCA9IGV4cG9ydHMuSU1SRUFMKGludW1iZXIpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGV4cG9ydHMuSU1BR0lOQVJZKGludW1iZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBlaXRoZXIgY29lZmZpY2llbnQgaXMgbm90IGEgbnVtYmVyXHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHgsIHkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgaW51bWJlciBpcyBlcXVhbCB0byB6ZXJvXHJcbiAgICAgICAgICAgIGlmICh4ID09PSAwICYmIHkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5kaXYwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIFBJLzIgaWYgeCBpcyBlcXVhbCB0byB6ZXJvIGFuZCB5IGlzIHBvc2l0aXZlXHJcbiAgICAgICAgICAgIGlmICh4ID09PSAwICYmIHkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5QSSAvIDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gLVBJLzIgaWYgeCBpcyBlcXVhbCB0byB6ZXJvIGFuZCB5IGlzIG5lZ2F0aXZlXHJcbiAgICAgICAgICAgIGlmICh4ID09PSAwICYmIHkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLU1hdGguUEkgLyAyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIHplcm8gaWYgeCBpcyBuZWdhdGl2ZSBhbmQgeSBpcyBlcXVhbCB0byB6ZXJvXHJcbiAgICAgICAgICAgIGlmICh5ID09PSAwICYmIHggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiB6ZXJvIGlmIHggaXMgbmVnYXRpdmUgYW5kIHkgaXMgZXF1YWwgdG8gemVyb1xyXG4gICAgICAgICAgICBpZiAoeSA9PT0gMCAmJiB4IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC1NYXRoLlBJO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGFyZ3VtZW50IG9mIGNvbXBsZXggbnVtYmVyXHJcbiAgICAgICAgICAgIGlmICh4ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguYXRhbih5IC8geCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoeCA8IDAgJiYgeSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hdGFuKHkgLyB4KSArIE1hdGguUEk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hdGFuKHkgLyB4KSAtIE1hdGguUEk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JTUNPTkpVR0FURSA9IGZ1bmN0aW9uKGludW1iZXIpIHtcclxuICAgICAgICAgICAgLy8gTG9va3VwIHJlYWwgYW5kIGltYWdpbmFyeSBjb2VmZmljaWVudHMgdXNpbmcgZXhwb3J0cy5qc1xyXG4gICAgICAgICAgICAvLyBbaHR0cDovL2Zvcm11bGFqcy5vcmddXHJcbiAgICAgICAgICAgIHZhciB4ID0gZXhwb3J0cy5JTVJFQUwoaW51bWJlcik7XHJcbiAgICAgICAgICAgIHZhciB5ID0gZXhwb3J0cy5JTUFHSU5BUlkoaW51bWJlcik7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoeCwgeSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIExvb2t1cCBpbWFnaW5hcnkgdW5pdFxyXG4gICAgICAgICAgICB2YXIgdW5pdCA9IGludW1iZXIuc3Vic3RyaW5nKGludW1iZXIubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgIHVuaXQgPSAodW5pdCA9PT0gJ2knIHx8IHVuaXQgPT09ICdqJykgPyB1bml0IDogJ2knO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBjb25qdWdhdGUgb2YgY29tcGxleCBudW1iZXJcclxuICAgICAgICAgICAgcmV0dXJuICh5ICE9PSAwKSA/IGV4cG9ydHMuQ09NUExFWCh4LCAteSwgdW5pdCkgOiBpbnVtYmVyO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLklNQ09TID0gZnVuY3Rpb24oaW51bWJlcikge1xyXG4gICAgICAgICAgICAvLyBMb29rdXAgcmVhbCBhbmQgaW1hZ2luYXJ5IGNvZWZmaWNpZW50cyB1c2luZyBleHBvcnRzLmpzXHJcbiAgICAgICAgICAgIC8vIFtodHRwOi8vZm9ybXVsYWpzLm9yZ11cclxuICAgICAgICAgICAgdmFyIHggPSBleHBvcnRzLklNUkVBTChpbnVtYmVyKTtcclxuICAgICAgICAgICAgdmFyIHkgPSBleHBvcnRzLklNQUdJTkFSWShpbnVtYmVyKTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcih4LCB5KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gTG9va3VwIGltYWdpbmFyeSB1bml0XHJcbiAgICAgICAgICAgIHZhciB1bml0ID0gaW51bWJlci5zdWJzdHJpbmcoaW51bWJlci5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgdW5pdCA9ICh1bml0ID09PSAnaScgfHwgdW5pdCA9PT0gJ2onKSA/IHVuaXQgOiAnaSc7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGNvc2luZSBvZiBjb21wbGV4IG51bWJlclxyXG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5DT01QTEVYKE1hdGguY29zKHgpICogKE1hdGguZXhwKHkpICsgTWF0aC5leHAoLXkpKSAvIDIsIC1NYXRoLnNpbih4KSAqIChNYXRoLmV4cCh5KSAtIE1hdGguZXhwKC15KSkgLyAyLCB1bml0KTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JTUNPU0ggPSBmdW5jdGlvbihpbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIC8vIExvb2t1cCByZWFsIGFuZCBpbWFnaW5hcnkgY29lZmZpY2llbnRzIHVzaW5nIGV4cG9ydHMuanNcclxuICAgICAgICAgICAgLy8gW2h0dHA6Ly9mb3JtdWxhanMub3JnXVxyXG4gICAgICAgICAgICB2YXIgeCA9IGV4cG9ydHMuSU1SRUFMKGludW1iZXIpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGV4cG9ydHMuSU1BR0lOQVJZKGludW1iZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHgsIHkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBMb29rdXAgaW1hZ2luYXJ5IHVuaXRcclxuICAgICAgICAgICAgdmFyIHVuaXQgPSBpbnVtYmVyLnN1YnN0cmluZyhpbnVtYmVyLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICB1bml0ID0gKHVuaXQgPT09ICdpJyB8fCB1bml0ID09PSAnaicpID8gdW5pdCA6ICdpJztcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gaHlwZXJib2xpYyBjb3NpbmUgb2YgY29tcGxleCBudW1iZXJcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuQ09NUExFWChNYXRoLmNvcyh5KSAqIChNYXRoLmV4cCh4KSArIE1hdGguZXhwKC14KSkgLyAyLCBNYXRoLnNpbih5KSAqIChNYXRoLmV4cCh4KSAtIE1hdGguZXhwKC14KSkgLyAyLCB1bml0KTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JTUNPVCA9IGZ1bmN0aW9uKGludW1iZXIpIHtcclxuICAgICAgICAgICAgLy8gTG9va3VwIHJlYWwgYW5kIGltYWdpbmFyeSBjb2VmZmljaWVudHMgdXNpbmcgRm9ybXVsYS5qc1xyXG4gICAgICAgICAgICAvLyBbaHR0cDovL2Zvcm11bGFqcy5vcmddXHJcbiAgICAgICAgICAgIHZhciB4ID0gZXhwb3J0cy5JTVJFQUwoaW51bWJlcik7XHJcbiAgICAgICAgICAgIHZhciB5ID0gZXhwb3J0cy5JTUFHSU5BUlkoaW51bWJlcik7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoeCwgeSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBjb3RhbmdlbnQgb2YgY29tcGxleCBudW1iZXJcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuSU1ESVYoZXhwb3J0cy5JTUNPUyhpbnVtYmVyKSwgZXhwb3J0cy5JTVNJTihpbnVtYmVyKSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSU1ESVYgPSBmdW5jdGlvbihpbnVtYmVyMSwgaW51bWJlcjIpIHtcclxuICAgICAgICAgICAgLy8gTG9va3VwIHJlYWwgYW5kIGltYWdpbmFyeSBjb2VmZmljaWVudHMgdXNpbmcgRm9ybXVsYS5qc1xyXG4gICAgICAgICAgICAvLyBbaHR0cDovL2Zvcm11bGFqcy5vcmddXHJcbiAgICAgICAgICAgIHZhciBhID0gZXhwb3J0cy5JTVJFQUwoaW51bWJlcjEpO1xyXG4gICAgICAgICAgICB2YXIgYiA9IGV4cG9ydHMuSU1BR0lOQVJZKGludW1iZXIxKTtcclxuICAgICAgICAgICAgdmFyIGMgPSBleHBvcnRzLklNUkVBTChpbnVtYmVyMik7XHJcbiAgICAgICAgICAgIHZhciBkID0gZXhwb3J0cy5JTUFHSU5BUlkoaW51bWJlcjIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKGEsIGIsIGMsIGQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBMb29rdXAgaW1hZ2luYXJ5IHVuaXRcclxuICAgICAgICAgICAgdmFyIHVuaXQxID0gaW51bWJlcjEuc3Vic3RyaW5nKGludW1iZXIxLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICB2YXIgdW5pdDIgPSBpbnVtYmVyMi5zdWJzdHJpbmcoaW51bWJlcjIubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgIHZhciB1bml0ID0gJ2knO1xyXG4gICAgICAgICAgICBpZiAodW5pdDEgPT09ICdqJykge1xyXG4gICAgICAgICAgICAgICAgdW5pdCA9ICdqJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh1bml0MiA9PT0gJ2onKSB7XHJcbiAgICAgICAgICAgICAgICB1bml0ID0gJ2onO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGludW1iZXIyIGlzIG51bGxcclxuICAgICAgICAgICAgaWYgKGMgPT09IDAgJiYgZCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBleHBvbmVudGlhbCBvZiBjb21wbGV4IG51bWJlclxyXG4gICAgICAgICAgICB2YXIgZGVuID0gYyAqIGMgKyBkICogZDtcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuQ09NUExFWCgoYSAqIGMgKyBiICogZCkgLyBkZW4sIChiICogYyAtIGEgKiBkKSAvIGRlbiwgdW5pdCk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSU1FWFAgPSBmdW5jdGlvbihpbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIC8vIExvb2t1cCByZWFsIGFuZCBpbWFnaW5hcnkgY29lZmZpY2llbnRzIHVzaW5nIEZvcm11bGEuanNcclxuICAgICAgICAgICAgLy8gW2h0dHA6Ly9mb3JtdWxhanMub3JnXVxyXG4gICAgICAgICAgICB2YXIgeCA9IGV4cG9ydHMuSU1SRUFMKGludW1iZXIpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGV4cG9ydHMuSU1BR0lOQVJZKGludW1iZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHgsIHkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBMb29rdXAgaW1hZ2luYXJ5IHVuaXRcclxuICAgICAgICAgICAgdmFyIHVuaXQgPSBpbnVtYmVyLnN1YnN0cmluZyhpbnVtYmVyLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICB1bml0ID0gKHVuaXQgPT09ICdpJyB8fCB1bml0ID09PSAnaicpID8gdW5pdCA6ICdpJztcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXhwb25lbnRpYWwgb2YgY29tcGxleCBudW1iZXJcclxuICAgICAgICAgICAgdmFyIGUgPSBNYXRoLmV4cCh4KTtcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuQ09NUExFWChlICogTWF0aC5jb3MoeSksIGUgKiBNYXRoLnNpbih5KSwgdW5pdCk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSU1MTiA9IGZ1bmN0aW9uKGludW1iZXIpIHtcclxuICAgICAgICAgICAgLy8gTG9va3VwIHJlYWwgYW5kIGltYWdpbmFyeSBjb2VmZmljaWVudHMgdXNpbmcgRm9ybXVsYS5qc1xyXG4gICAgICAgICAgICAvLyBbaHR0cDovL2Zvcm11bGFqcy5vcmddXHJcbiAgICAgICAgICAgIHZhciB4ID0gZXhwb3J0cy5JTVJFQUwoaW51bWJlcik7XHJcbiAgICAgICAgICAgIHZhciB5ID0gZXhwb3J0cy5JTUFHSU5BUlkoaW51bWJlcik7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoeCwgeSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIExvb2t1cCBpbWFnaW5hcnkgdW5pdFxyXG4gICAgICAgICAgICB2YXIgdW5pdCA9IGludW1iZXIuc3Vic3RyaW5nKGludW1iZXIubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgIHVuaXQgPSAodW5pdCA9PT0gJ2knIHx8IHVuaXQgPT09ICdqJykgPyB1bml0IDogJ2knO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBleHBvbmVudGlhbCBvZiBjb21wbGV4IG51bWJlclxyXG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5DT01QTEVYKE1hdGgubG9nKE1hdGguc3FydCh4ICogeCArIHkgKiB5KSksIE1hdGguYXRhbih5IC8geCksIHVuaXQpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLklNTE9HMTAgPSBmdW5jdGlvbihpbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIC8vIExvb2t1cCByZWFsIGFuZCBpbWFnaW5hcnkgY29lZmZpY2llbnRzIHVzaW5nIEZvcm11bGEuanNcclxuICAgICAgICAgICAgLy8gW2h0dHA6Ly9mb3JtdWxhanMub3JnXVxyXG4gICAgICAgICAgICB2YXIgeCA9IGV4cG9ydHMuSU1SRUFMKGludW1iZXIpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGV4cG9ydHMuSU1BR0lOQVJZKGludW1iZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHgsIHkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBMb29rdXAgaW1hZ2luYXJ5IHVuaXRcclxuICAgICAgICAgICAgdmFyIHVuaXQgPSBpbnVtYmVyLnN1YnN0cmluZyhpbnVtYmVyLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICB1bml0ID0gKHVuaXQgPT09ICdpJyB8fCB1bml0ID09PSAnaicpID8gdW5pdCA6ICdpJztcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXhwb25lbnRpYWwgb2YgY29tcGxleCBudW1iZXJcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuQ09NUExFWChNYXRoLmxvZyhNYXRoLnNxcnQoeCAqIHggKyB5ICogeSkpIC8gTWF0aC5sb2coMTApLCBNYXRoLmF0YW4oeSAvIHgpIC8gTWF0aC5sb2coMTApLCB1bml0KTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JTUxPRzIgPSBmdW5jdGlvbihpbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIC8vIExvb2t1cCByZWFsIGFuZCBpbWFnaW5hcnkgY29lZmZpY2llbnRzIHVzaW5nIEZvcm11bGEuanNcclxuICAgICAgICAgICAgLy8gW2h0dHA6Ly9mb3JtdWxhanMub3JnXVxyXG4gICAgICAgICAgICB2YXIgeCA9IGV4cG9ydHMuSU1SRUFMKGludW1iZXIpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGV4cG9ydHMuSU1BR0lOQVJZKGludW1iZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHgsIHkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBMb29rdXAgaW1hZ2luYXJ5IHVuaXRcclxuICAgICAgICAgICAgdmFyIHVuaXQgPSBpbnVtYmVyLnN1YnN0cmluZyhpbnVtYmVyLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICB1bml0ID0gKHVuaXQgPT09ICdpJyB8fCB1bml0ID09PSAnaicpID8gdW5pdCA6ICdpJztcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXhwb25lbnRpYWwgb2YgY29tcGxleCBudW1iZXJcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuQ09NUExFWChNYXRoLmxvZyhNYXRoLnNxcnQoeCAqIHggKyB5ICogeSkpIC8gTWF0aC5sb2coMiksIE1hdGguYXRhbih5IC8geCkgLyBNYXRoLmxvZygyKSwgdW5pdCk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSU1QT1dFUiA9IGZ1bmN0aW9uKGludW1iZXIsIG51bWJlcikge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICB2YXIgeCA9IGV4cG9ydHMuSU1SRUFMKGludW1iZXIpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGV4cG9ydHMuSU1BR0lOQVJZKGludW1iZXIpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihudW1iZXIsIHgsIHkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBMb29rdXAgaW1hZ2luYXJ5IHVuaXRcclxuICAgICAgICAgICAgdmFyIHVuaXQgPSBpbnVtYmVyLnN1YnN0cmluZyhpbnVtYmVyLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICB1bml0ID0gKHVuaXQgPT09ICdpJyB8fCB1bml0ID09PSAnaicpID8gdW5pdCA6ICdpJztcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgcG93ZXIgb2YgbW9kdWx1c1xyXG4gICAgICAgICAgICB2YXIgcCA9IE1hdGgucG93KGV4cG9ydHMuSU1BQlMoaW51bWJlciksIG51bWJlcik7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGFyZ3VtZW50XHJcbiAgICAgICAgICAgIHZhciB0ID0gZXhwb3J0cy5JTUFSR1VNRU5UKGludW1iZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBleHBvbmVudGlhbCBvZiBjb21wbGV4IG51bWJlclxyXG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5DT01QTEVYKHAgKiBNYXRoLmNvcyhudW1iZXIgKiB0KSwgcCAqIE1hdGguc2luKG51bWJlciAqIHQpLCB1bml0KTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JTVBST0RVQ1QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSByZXN1bHRcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGFyZ3VtZW50c1swXTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBMb29wIG9uIGFsbCBudW1iZXJzXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBMb29rdXAgY29lZmZpY2llbnRzIG9mIHR3byBjb21wbGV4IG51bWJlcnNcclxuICAgICAgICAgICAgICAgIHZhciBhID0gZXhwb3J0cy5JTVJFQUwocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gZXhwb3J0cy5JTUFHSU5BUlkocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gZXhwb3J0cy5JTVJFQUwoYXJndW1lbnRzW2ldKTtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gZXhwb3J0cy5JTUFHSU5BUlkoYXJndW1lbnRzW2ldKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoYSwgYiwgYywgZCkpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBDb21wbHV0ZSBwcm9kdWN0IG9mIHR3byBjb21wbGV4IG51bWJlcnNcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGV4cG9ydHMuQ09NUExFWChhICogYyAtIGIgKiBkLCBhICogZCArIGIgKiBjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBwcm9kdWN0IG9mIGNvbXBsZXggbnVtYmVyc1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLklNUkVBTCA9IGZ1bmN0aW9uKGludW1iZXIpIHtcclxuICAgICAgICAgICAgaWYgKGludW1iZXIgPT09IHVuZGVmaW5lZCB8fCBpbnVtYmVyID09PSB0cnVlIHx8IGludW1iZXIgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gMCBpZiBpbnVtYmVyIGlzIGVxdWFsIHRvIDBcclxuICAgICAgICAgICAgaWYgKGludW1iZXIgPT09IDAgfHwgaW51bWJlciA9PT0gJzAnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEhhbmRsZSBzcGVjaWFsIGNhc2VzXHJcbiAgICAgICAgICAgIGlmIChbJ2knLCAnK2knLCAnMWknLCAnKzFpJywgJy1pJywgJy0xaScsICdqJywgJytqJywgJzFqJywgJysxaicsICctaicsICctMWonXS5pbmRleE9mKGludW1iZXIpID49IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gTG9va3VwIHNpZ25cclxuICAgICAgICAgICAgdmFyIHBsdXMgPSBpbnVtYmVyLmluZGV4T2YoJysnKTtcclxuICAgICAgICAgICAgdmFyIG1pbnVzID0gaW51bWJlci5pbmRleE9mKCctJyk7XHJcbiAgICAgICAgICAgIGlmIChwbHVzID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBwbHVzID0gaW51bWJlci5pbmRleE9mKCcrJywgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1pbnVzID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBtaW51cyA9IGludW1iZXIuaW5kZXhPZignLScsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gTG9va3VwIGltYWdpbmFyeSB1bml0XHJcbiAgICAgICAgICAgIHZhciBsYXN0ID0gaW51bWJlci5zdWJzdHJpbmcoaW51bWJlci5sZW5ndGggLSAxLCBpbnVtYmVyLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIHZhciB1bml0ID0gKGxhc3QgPT09ICdpJyB8fCBsYXN0ID09PSAnaicpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChwbHVzID49IDAgfHwgbWludXMgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGltYWdpbmFyeSB1bml0IGlzIG5laXRoZXIgaSBub3IgalxyXG4gICAgICAgICAgICAgICAgaWYgKCF1bml0KSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIFJldHVybiByZWFsIGNvZWZmaWNpZW50IG9mIGNvbXBsZXggbnVtYmVyXHJcbiAgICAgICAgICAgICAgICBpZiAocGx1cyA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoaXNOYU4oaW51bWJlci5zdWJzdHJpbmcoMCwgcGx1cykpIHx8IGlzTmFOKGludW1iZXIuc3Vic3RyaW5nKHBsdXMgKyAxLCBpbnVtYmVyLmxlbmd0aCAtIDEpKSkgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgZXJyb3IubnVtIDpcclxuICAgICAgICAgICAgICAgICAgICAgIE51bWJlcihpbnVtYmVyLnN1YnN0cmluZygwLCBwbHVzKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gKGlzTmFOKGludW1iZXIuc3Vic3RyaW5nKDAsIG1pbnVzKSkgfHwgaXNOYU4oaW51bWJlci5zdWJzdHJpbmcobWludXMgKyAxLCBpbnVtYmVyLmxlbmd0aCAtIDEpKSkgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgZXJyb3IubnVtIDpcclxuICAgICAgICAgICAgICAgICAgICAgIE51bWJlcihpbnVtYmVyLnN1YnN0cmluZygwLCBtaW51cykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHVuaXQpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChpc05hTihpbnVtYmVyLnN1YnN0cmluZygwLCBpbnVtYmVyLmxlbmd0aCAtIDEpKSkgPyBlcnJvci5udW0gOiAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChpc05hTihpbnVtYmVyKSkgPyBlcnJvci5udW0gOiBpbnVtYmVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSU1TRUMgPSBmdW5jdGlvbihpbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBpbnVtYmVyIGlzIGEgbG9naWNhbCB2YWx1ZVxyXG4gICAgICAgICAgICBpZiAoaW51bWJlciA9PT0gdHJ1ZSB8fCBpbnVtYmVyID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gTG9va3VwIHJlYWwgYW5kIGltYWdpbmFyeSBjb2VmZmljaWVudHMgdXNpbmcgRm9ybXVsYS5qc1xyXG4gICAgICAgICAgICAvLyBbaHR0cDovL2Zvcm11bGFqcy5vcmddXHJcbiAgICAgICAgICAgIHZhciB4ID0gZXhwb3J0cy5JTVJFQUwoaW51bWJlcik7XHJcbiAgICAgICAgICAgIHZhciB5ID0gZXhwb3J0cy5JTUFHSU5BUlkoaW51bWJlcik7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoeCwgeSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBzZWNhbnQgb2YgY29tcGxleCBudW1iZXJcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuSU1ESVYoJzEnLCBleHBvcnRzLklNQ09TKGludW1iZXIpKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JTVNFQ0ggPSBmdW5jdGlvbihpbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIC8vIExvb2t1cCByZWFsIGFuZCBpbWFnaW5hcnkgY29lZmZpY2llbnRzIHVzaW5nIEZvcm11bGEuanNcclxuICAgICAgICAgICAgLy8gW2h0dHA6Ly9mb3JtdWxhanMub3JnXVxyXG4gICAgICAgICAgICB2YXIgeCA9IGV4cG9ydHMuSU1SRUFMKGludW1iZXIpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGV4cG9ydHMuSU1BR0lOQVJZKGludW1iZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHgsIHkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gaHlwZXJib2xpYyBzZWNhbnQgb2YgY29tcGxleCBudW1iZXJcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuSU1ESVYoJzEnLCBleHBvcnRzLklNQ09TSChpbnVtYmVyKSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSU1TSU4gPSBmdW5jdGlvbihpbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIC8vIExvb2t1cCByZWFsIGFuZCBpbWFnaW5hcnkgY29lZmZpY2llbnRzIHVzaW5nIEZvcm11bGEuanNcclxuICAgICAgICAgICAgLy8gW2h0dHA6Ly9mb3JtdWxhanMub3JnXVxyXG4gICAgICAgICAgICB2YXIgeCA9IGV4cG9ydHMuSU1SRUFMKGludW1iZXIpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGV4cG9ydHMuSU1BR0lOQVJZKGludW1iZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHgsIHkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBMb29rdXAgaW1hZ2luYXJ5IHVuaXRcclxuICAgICAgICAgICAgdmFyIHVuaXQgPSBpbnVtYmVyLnN1YnN0cmluZyhpbnVtYmVyLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICB1bml0ID0gKHVuaXQgPT09ICdpJyB8fCB1bml0ID09PSAnaicpID8gdW5pdCA6ICdpJztcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gc2luZSBvZiBjb21wbGV4IG51bWJlclxyXG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5DT01QTEVYKE1hdGguc2luKHgpICogKE1hdGguZXhwKHkpICsgTWF0aC5leHAoLXkpKSAvIDIsIE1hdGguY29zKHgpICogKE1hdGguZXhwKHkpIC0gTWF0aC5leHAoLXkpKSAvIDIsIHVuaXQpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLklNU0lOSCA9IGZ1bmN0aW9uKGludW1iZXIpIHtcclxuICAgICAgICAgICAgLy8gTG9va3VwIHJlYWwgYW5kIGltYWdpbmFyeSBjb2VmZmljaWVudHMgdXNpbmcgRm9ybXVsYS5qc1xyXG4gICAgICAgICAgICAvLyBbaHR0cDovL2Zvcm11bGFqcy5vcmddXHJcbiAgICAgICAgICAgIHZhciB4ID0gZXhwb3J0cy5JTVJFQUwoaW51bWJlcik7XHJcbiAgICAgICAgICAgIHZhciB5ID0gZXhwb3J0cy5JTUFHSU5BUlkoaW51bWJlcik7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoeCwgeSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIExvb2t1cCBpbWFnaW5hcnkgdW5pdFxyXG4gICAgICAgICAgICB2YXIgdW5pdCA9IGludW1iZXIuc3Vic3RyaW5nKGludW1iZXIubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgIHVuaXQgPSAodW5pdCA9PT0gJ2knIHx8IHVuaXQgPT09ICdqJykgPyB1bml0IDogJ2knO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBoeXBlcmJvbGljIHNpbmUgb2YgY29tcGxleCBudW1iZXJcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuQ09NUExFWChNYXRoLmNvcyh5KSAqIChNYXRoLmV4cCh4KSAtIE1hdGguZXhwKC14KSkgLyAyLCBNYXRoLnNpbih5KSAqIChNYXRoLmV4cCh4KSArIE1hdGguZXhwKC14KSkgLyAyLCB1bml0KTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JTVNRUlQgPSBmdW5jdGlvbihpbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIC8vIExvb2t1cCByZWFsIGFuZCBpbWFnaW5hcnkgY29lZmZpY2llbnRzIHVzaW5nIEZvcm11bGEuanNcclxuICAgICAgICAgICAgLy8gW2h0dHA6Ly9mb3JtdWxhanMub3JnXVxyXG4gICAgICAgICAgICB2YXIgeCA9IGV4cG9ydHMuSU1SRUFMKGludW1iZXIpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGV4cG9ydHMuSU1BR0lOQVJZKGludW1iZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHgsIHkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBMb29rdXAgaW1hZ2luYXJ5IHVuaXRcclxuICAgICAgICAgICAgdmFyIHVuaXQgPSBpbnVtYmVyLnN1YnN0cmluZyhpbnVtYmVyLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICB1bml0ID0gKHVuaXQgPT09ICdpJyB8fCB1bml0ID09PSAnaicpID8gdW5pdCA6ICdpJztcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgcG93ZXIgb2YgbW9kdWx1c1xyXG4gICAgICAgICAgICB2YXIgcyA9IE1hdGguc3FydChleHBvcnRzLklNQUJTKGludW1iZXIpKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgYXJndW1lbnRcclxuICAgICAgICAgICAgdmFyIHQgPSBleHBvcnRzLklNQVJHVU1FTlQoaW51bWJlcik7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGV4cG9uZW50aWFsIG9mIGNvbXBsZXggbnVtYmVyXHJcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLkNPTVBMRVgocyAqIE1hdGguY29zKHQgLyAyKSwgcyAqIE1hdGguc2luKHQgLyAyKSwgdW5pdCk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSU1DU0MgPSBmdW5jdGlvbiAoaW51bWJlcikge1xyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgaW51bWJlciBpcyBhIGxvZ2ljYWwgdmFsdWVcclxuICAgICAgICAgICAgaWYgKGludW1iZXIgPT09IHRydWUgfHwgaW51bWJlciA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIExvb2t1cCByZWFsIGFuZCBpbWFnaW5hcnkgY29lZmZpY2llbnRzIHVzaW5nIEZvcm11bGEuanNcclxuICAgICAgICAgICAgLy8gW2h0dHA6Ly9mb3JtdWxhanMub3JnXVxyXG4gICAgICAgICAgICB2YXIgeCA9IGV4cG9ydHMuSU1SRUFMKGludW1iZXIpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGV4cG9ydHMuSU1BR0lOQVJZKGludW1iZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBlaXRoZXIgY29lZmZpY2llbnQgaXMgbm90IGEgbnVtYmVyXHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHgsIHkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGNvc2VjYW50IG9mIGNvbXBsZXggbnVtYmVyXHJcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLklNRElWKCcxJywgZXhwb3J0cy5JTVNJTihpbnVtYmVyKSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSU1DU0NIID0gZnVuY3Rpb24gKGludW1iZXIpIHtcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGludW1iZXIgaXMgYSBsb2dpY2FsIHZhbHVlXHJcbiAgICAgICAgICAgIGlmIChpbnVtYmVyID09PSB0cnVlIHx8IGludW1iZXIgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBMb29rdXAgcmVhbCBhbmQgaW1hZ2luYXJ5IGNvZWZmaWNpZW50cyB1c2luZyBGb3JtdWxhLmpzXHJcbiAgICAgICAgICAgIC8vIFtodHRwOi8vZm9ybXVsYWpzLm9yZ11cclxuICAgICAgICAgICAgdmFyIHggPSBleHBvcnRzLklNUkVBTChpbnVtYmVyKTtcclxuICAgICAgICAgICAgdmFyIHkgPSBleHBvcnRzLklNQUdJTkFSWShpbnVtYmVyKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgZWl0aGVyIGNvZWZmaWNpZW50IGlzIG5vdCBhIG51bWJlclxyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcih4LCB5KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBoeXBlcmJvbGljIGNvc2VjYW50IG9mIGNvbXBsZXggbnVtYmVyXHJcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLklNRElWKCcxJywgZXhwb3J0cy5JTVNJTkgoaW51bWJlcikpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLklNU1VCID0gZnVuY3Rpb24oaW51bWJlcjEsIGludW1iZXIyKSB7XHJcbiAgICAgICAgICAgIC8vIExvb2t1cCByZWFsIGFuZCBpbWFnaW5hcnkgY29lZmZpY2llbnRzIHVzaW5nIEZvcm11bGEuanNcclxuICAgICAgICAgICAgLy8gW2h0dHA6Ly9mb3JtdWxhanMub3JnXVxyXG4gICAgICAgICAgICB2YXIgYSA9IHRoaXMuSU1SRUFMKGludW1iZXIxKTtcclxuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLklNQUdJTkFSWShpbnVtYmVyMSk7XHJcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy5JTVJFQUwoaW51bWJlcjIpO1xyXG4gICAgICAgICAgICB2YXIgZCA9IHRoaXMuSU1BR0lOQVJZKGludW1iZXIyKTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihhLCBiLCBjLCBkKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gTG9va3VwIGltYWdpbmFyeSB1bml0XHJcbiAgICAgICAgICAgIHZhciB1bml0MSA9IGludW1iZXIxLnN1YnN0cmluZyhpbnVtYmVyMS5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgdmFyIHVuaXQyID0gaW51bWJlcjIuc3Vic3RyaW5nKGludW1iZXIyLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICB2YXIgdW5pdCA9ICdpJztcclxuICAgICAgICAgICAgaWYgKHVuaXQxID09PSAnaicpIHtcclxuICAgICAgICAgICAgICAgIHVuaXQgPSAnaic7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodW5pdDIgPT09ICdqJykge1xyXG4gICAgICAgICAgICAgICAgdW5pdCA9ICdqJztcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBfIG9mIHR3byBjb21wbGV4IG51bWJlcnNcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuQ09NUExFWChhIC0gYywgYiAtIGQsIHVuaXQpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLklNU1VNID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBhcmdzID0gdXRpbHMuZmxhdHRlbihhcmd1bWVudHMpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgcmVzdWx0XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBhcmdzWzBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIExvb3Agb24gYWxsIG51bWJlcnNcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBMb29rdXAgY29lZmZpY2llbnRzIG9mIHR3byBjb21wbGV4IG51bWJlcnNcclxuICAgICAgICAgICAgICAgIHZhciBhID0gdGhpcy5JTVJFQUwocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gdGhpcy5JTUFHSU5BUlkocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gdGhpcy5JTVJFQUwoYXJnc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZCA9IHRoaXMuSU1BR0lOQVJZKGFyZ3NbaV0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihhLCBiLCBjLCBkKSkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIENvbXBsdXRlIHByb2R1Y3Qgb2YgdHdvIGNvbXBsZXggbnVtYmVyc1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5DT01QTEVYKGEgKyBjLCBiICsgZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gc3VtIG9mIGNvbXBsZXggbnVtYmVyc1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLklNVEFOID0gZnVuY3Rpb24oaW51bWJlcikge1xyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgaW51bWJlciBpcyBhIGxvZ2ljYWwgdmFsdWVcclxuICAgICAgICAgICAgaWYgKGludW1iZXIgPT09IHRydWUgfHwgaW51bWJlciA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIExvb2t1cCByZWFsIGFuZCBpbWFnaW5hcnkgY29lZmZpY2llbnRzIHVzaW5nIEZvcm11bGEuanNcclxuICAgICAgICAgICAgLy8gW2h0dHA6Ly9mb3JtdWxhanMub3JnXVxyXG4gICAgICAgICAgICB2YXIgeCA9IGV4cG9ydHMuSU1SRUFMKGludW1iZXIpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGV4cG9ydHMuSU1BR0lOQVJZKGludW1iZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHgsIHkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gdGFuZ2VudCBvZiBjb21wbGV4IG51bWJlclxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5JTURJVih0aGlzLklNU0lOKGludW1iZXIpLCB0aGlzLklNQ09TKGludW1iZXIpKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5PQ1QyQklOID0gZnVuY3Rpb24obnVtYmVyLCBwbGFjZXMpIHtcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIG51bWJlciBpcyBub3QgaGV4YWRlY2ltYWwgb3IgY29udGFpbnMgbW9yZSB0aGFuIHRlblxyXG4gICAgICAgICAgICAvLyBjaGFyYWN0ZXJzICgxMCBkaWdpdHMpXHJcbiAgICAgICAgICAgIGlmICghL15bMC03XXsxLDEwfSQvLnRlc3QobnVtYmVyKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIG51bWJlciBpcyBuZWdhdGl2ZVxyXG4gICAgICAgICAgICB2YXIgbmVnYXRpdmUgPSAobnVtYmVyLmxlbmd0aCA9PT0gMTAgJiYgbnVtYmVyLnN1YnN0cmluZygwLCAxKSA9PT0gJzcnKSA/IHRydWUgOiBmYWxzZTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IG9jdGFsIG51bWJlciB0byBkZWNpbWFsXHJcbiAgICAgICAgICAgIHZhciBkZWNpbWFsID0gKG5lZ2F0aXZlKSA/IHBhcnNlSW50KG51bWJlciwgOCkgLSAxMDczNzQxODI0IDogcGFyc2VJbnQobnVtYmVyLCA4KTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgbnVtYmVyIGlzIGxvd2VyIHRoYW4gLTUxMiBvciBncmVhdGVyIHRoYW4gNTExXHJcbiAgICAgICAgICAgIGlmIChkZWNpbWFsIDwgLTUxMiB8fCBkZWNpbWFsID4gNTExKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gSWdub3JlIHBsYWNlcyBhbmQgcmV0dXJuIGEgMTAtY2hhcmFjdGVyIGJpbmFyeSBudW1iZXIgaWYgbnVtYmVyIGlzXHJcbiAgICAgICAgICAgIC8vIG5lZ2F0aXZlXHJcbiAgICAgICAgICAgIGlmIChuZWdhdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcxJyArIFJFUFQoJzAnLCA5IC0gKDUxMiArIGRlY2ltYWwpLnRvU3RyaW5nKDIpLmxlbmd0aCkgKyAoNTEyICsgZGVjaW1hbCkudG9TdHJpbmcoMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IGRlY2ltYWwgbnVtYmVyIHRvIGJpbmFyeVxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZGVjaW1hbC50b1N0cmluZygyKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gYmluYXJ5IG51bWJlciB1c2luZyB0aGUgbWluaW11bSBudW1iZXIgb2YgY2hhcmFjdGVycyBuZWNlc3NhcnlcclxuICAgICAgICAgICAgLy8gaWYgcGxhY2VzIGlzIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHBsYWNlcyA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgcGxhY2VzIGlzIG5vbm51bWVyaWNcclxuICAgICAgICAgICAgICAgIGlmIChpc05hTihwbGFjZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIHBsYWNlcyBpcyBuZWdhdGl2ZVxyXG4gICAgICAgICAgICAgICAgaWYgKHBsYWNlcyA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVHJ1bmNhdGUgcGxhY2VzIGluIGNhc2UgaXQgaXMgbm90IGFuIGludGVnZXJcclxuICAgICAgICAgICAgICAgIHBsYWNlcyA9IE1hdGguZmxvb3IocGxhY2VzKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUGFkIHJldHVybiB2YWx1ZSB3aXRoIGxlYWRpbmcgMHMgKHplcm9zKSBpZiBuZWNlc3NhcnkgKHVzaW5nXHJcbiAgICAgICAgICAgICAgICAvLyBVbmRlcnNjb3JlLnN0cmluZylcclxuICAgICAgICAgICAgICAgIHJldHVybiAocGxhY2VzID49IHJlc3VsdC5sZW5ndGgpID8gUkVQVCgnMCcsIHBsYWNlcyAtIHJlc3VsdC5sZW5ndGgpICsgcmVzdWx0IDogZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuT0NUMkRFQyA9IGZ1bmN0aW9uKG51bWJlcikge1xyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgbnVtYmVyIGlzIG5vdCBvY3RhbCBvciBjb250YWlucyBtb3JlIHRoYW4gdGVuXHJcbiAgICAgICAgICAgIC8vIGNoYXJhY3RlcnMgKDEwIGRpZ2l0cylcclxuICAgICAgICAgICAgaWYgKCEvXlswLTddezEsMTB9JC8udGVzdChudW1iZXIpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ29udmVydCBvY3RhbCBudW1iZXIgdG8gZGVjaW1hbFxyXG4gICAgICAgICAgICB2YXIgZGVjaW1hbCA9IHBhcnNlSW50KG51bWJlciwgOCk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGRlY2ltYWwgbnVtYmVyXHJcbiAgICAgICAgICAgIHJldHVybiAoZGVjaW1hbCA+PSA1MzY4NzA5MTIpID8gZGVjaW1hbCAtIDEwNzM3NDE4MjQgOiBkZWNpbWFsO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLk9DVDJIRVggPSBmdW5jdGlvbihudW1iZXIsIHBsYWNlcykge1xyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgbnVtYmVyIGlzIG5vdCBvY3RhbCBvciBjb250YWlucyBtb3JlIHRoYW4gdGVuXHJcbiAgICAgICAgICAgIC8vIGNoYXJhY3RlcnMgKDEwIGRpZ2l0cylcclxuICAgICAgICAgICAgaWYgKCEvXlswLTddezEsMTB9JC8udGVzdChudW1iZXIpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ29udmVydCBvY3RhbCBudW1iZXIgdG8gZGVjaW1hbFxyXG4gICAgICAgICAgICB2YXIgZGVjaW1hbCA9IHBhcnNlSW50KG51bWJlciwgOCk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gSWdub3JlIHBsYWNlcyBhbmQgcmV0dXJuIGEgMTAtY2hhcmFjdGVyIG9jdGFsIG51bWJlciBpZiBudW1iZXIgaXNcclxuICAgICAgICAgICAgLy8gbmVnYXRpdmVcclxuICAgICAgICAgICAgaWYgKGRlY2ltYWwgPj0gNTM2ODcwOTEyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2ZmJyArIChkZWNpbWFsICsgMzIyMTIyNTQ3MikudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ29udmVydCBkZWNpbWFsIG51bWJlciB0byBoZXhhZGVjaW1hbFxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZGVjaW1hbC50b1N0cmluZygxNik7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGhleGFkZWNpbWFsIG51bWJlciB1c2luZyB0aGUgbWluaW11bSBudW1iZXIgb2YgY2hhcmFjdGVyc1xyXG4gICAgICAgICAgICAvLyBuZWNlc3NhcnkgaWYgcGxhY2VzIGlzIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICBpZiAocGxhY2VzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgcGxhY2VzIGlzIG5vbm51bWVyaWNcclxuICAgICAgICAgICAgICAgIGlmIChpc05hTihwbGFjZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIHBsYWNlcyBpcyBuZWdhdGl2ZVxyXG4gICAgICAgICAgICAgICAgaWYgKHBsYWNlcyA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVHJ1bmNhdGUgcGxhY2VzIGluIGNhc2UgaXQgaXMgbm90IGFuIGludGVnZXJcclxuICAgICAgICAgICAgICAgIHBsYWNlcyA9IE1hdGguZmxvb3IocGxhY2VzKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUGFkIHJldHVybiB2YWx1ZSB3aXRoIGxlYWRpbmcgMHMgKHplcm9zKSBpZiBuZWNlc3NhcnkgKHVzaW5nXHJcbiAgICAgICAgICAgICAgICAvLyBVbmRlcnNjb3JlLnN0cmluZylcclxuICAgICAgICAgICAgICAgIHJldHVybiAocGxhY2VzID49IHJlc3VsdC5sZW5ndGgpID8gUkVQVCgnMCcsIHBsYWNlcyAtIHJlc3VsdC5sZW5ndGgpICsgcmVzdWx0IDogZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBleHBvcnRzO1xyXG4gICAgfSkoKTtcclxuICAgIFxyXG4gICAgamV4Y2VsLm1ldGhvZHMuZmluYW5jaWFsID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBleHBvcnRzID0ge307XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiB2YWxpZERhdGUoZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZCAmJiBkLmdldFRpbWUgJiYgIWlzTmFOKGQuZ2V0VGltZSgpKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBlbnN1cmVEYXRlKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChkIGluc3RhbmNlb2YgRGF0ZSk/ZDpuZXcgRGF0ZShkKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkFDQ1JJTlQgPSBmdW5jdGlvbihpc3N1ZSwgZmlyc3QsIHNldHRsZW1lbnQsIHJhdGUsIHBhciwgZnJlcXVlbmN5LCBiYXNpcykge1xyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgZWl0aGVyIGRhdGUgaXMgaW52YWxpZFxyXG4gICAgICAgICAgICBpc3N1ZSAgICAgICAgPSBlbnN1cmVEYXRlKGlzc3VlKTtcclxuICAgICAgICAgICAgZmlyc3QgICAgICAgID0gZW5zdXJlRGF0ZShmaXJzdCk7XHJcbiAgICAgICAgICAgIHNldHRsZW1lbnQgPSBlbnN1cmVEYXRlKHNldHRsZW1lbnQpO1xyXG4gICAgICAgICAgICBpZiAoIXZhbGlkRGF0ZShpc3N1ZSkgfHwgIXZhbGlkRGF0ZShmaXJzdCkgfHwgIXZhbGlkRGF0ZShzZXR0bGVtZW50KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcjVkFMVUUhJztcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBlaXRoZXIgcmF0ZSBvciBwYXIgYXJlIGxvd2VyIHRoYW4gb3IgZXF1YWwgdG8gemVyb1xyXG4gICAgICAgICAgICBpZiAocmF0ZSA8PSAwIHx8IHBhciA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJyNOVU0hJztcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBmcmVxdWVuY3kgaXMgbmVpdGhlciAxLCAyLCBvciA0XHJcbiAgICAgICAgICAgIGlmIChbMSwgMiwgNF0uaW5kZXhPZihmcmVxdWVuY3kpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcjTlVNISc7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgYmFzaXMgaXMgbmVpdGhlciAwLCAxLCAyLCAzLCBvciA0XHJcbiAgICAgICAgICAgIGlmIChbMCwgMSwgMiwgMywgNF0uaW5kZXhPZihiYXNpcykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJyNOVU0hJztcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBzZXR0bGVtZW50IGlzIGJlZm9yZSBvciBlcXVhbCB0byBpc3N1ZVxyXG4gICAgICAgICAgICBpZiAoc2V0dGxlbWVudCA8PSBpc3N1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcjTlVNISc7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBTZXQgZGVmYXVsdCB2YWx1ZXNcclxuICAgICAgICAgICAgcGFyICAgPSBwYXIgICB8fCAwO1xyXG4gICAgICAgICAgICBiYXNpcyA9IGJhc2lzIHx8IDA7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ29tcHV0ZSBhY2NydWVkIGludGVyZXN0XHJcbiAgICAgICAgICAgIHJldHVybiBwYXIgKiByYXRlICogWUVBUkZSQUMoaXNzdWUsIHNldHRsZW1lbnQsIGJhc2lzKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5BQ0NSSU5UTSA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkFNT1JERUdSQyA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkFNT1JMSU5DID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQ09VUERBWUJTID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQ09VUERBWVMgPSBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5DT1VQREFZU05DID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQ09VUE5DRCA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkNPVVBOVU0gPSBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5DT1VQUENEID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQ1VNSVBNVCA9IGZ1bmN0aW9uKHJhdGUsIHBlcmlvZHMsIHZhbHVlLCBzdGFydCwgZW5kLCB0eXBlKSB7XHJcbiAgICAgICAgICAgIC8vIENyZWRpdHM6IGFsZ29yaXRobSBpbnNwaXJlZCBieSBBcGFjaGUgT3Blbk9mZmljZVxyXG4gICAgICAgICAgICAvLyBDcmVkaXRzOiBIYW5uZXMgU3RpZWJpdHpob2ZlciBmb3IgdGhlIHRyYW5zbGF0aW9ucyBvZiBmdW5jdGlvbiBhbmRcclxuICAgICAgICAgICAgICAgIC8vIHZhcmlhYmxlIG5hbWVzXHJcbiAgICAgICAgICAgIC8vIFJlcXVpcmVzIGV4cG9ydHMuRlYoKSBhbmQgZXhwb3J0cy5QTVQoKSBmcm9tIGV4cG9ydHMuanNcclxuICAgICAgICAgICAgICAgIC8vIFtodHRwOi8vc3RvaWMuY29tL2V4cG9ydHMvXVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJhdGUgPSB1dGlscy5wYXJzZU51bWJlcihyYXRlKTtcclxuICAgICAgICAgICAgcGVyaW9kcyA9IHV0aWxzLnBhcnNlTnVtYmVyKHBlcmlvZHMpO1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHV0aWxzLnBhcnNlTnVtYmVyKHZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IocmF0ZSwgcGVyaW9kcywgdmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgZWl0aGVyIHJhdGUsIHBlcmlvZHMsIG9yIHZhbHVlIGFyZSBsb3dlciB0aGFuIG9yXHJcbiAgICAgICAgICAgICAgICAvLyBlcXVhbCB0byB6ZXJvXHJcbiAgICAgICAgICAgIGlmIChyYXRlIDw9IDAgfHwgcGVyaW9kcyA8PSAwIHx8IHZhbHVlIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgc3RhcnQgPCAxLCBlbmQgPCAxLCBvciBzdGFydCA+IGVuZFxyXG4gICAgICAgICAgICBpZiAoc3RhcnQgPCAxIHx8IGVuZCA8IDEgfHwgc3RhcnQgPiBlbmQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgdHlwZSBpcyBuZWl0aGVyIDAgbm9yIDFcclxuICAgICAgICAgICAgaWYgKHR5cGUgIT09IDAgJiYgdHlwZSAhPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIENvbXB1dGUgY3VtdWxhdGl2ZSBpbnRlcmVzdFxyXG4gICAgICAgICAgICB2YXIgcGF5bWVudCA9IGV4cG9ydHMuUE1UKHJhdGUsIHBlcmlvZHMsIHZhbHVlLCAwLCB0eXBlKTtcclxuICAgICAgICAgICAgdmFyIGludGVyZXN0ID0gMDtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoc3RhcnQgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJlc3QgPSAtdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8PSBlbmQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcmVzdCArPSBleHBvcnRzLkZWKHJhdGUsIGkgLSAyLCBwYXltZW50LCB2YWx1ZSwgMSkgLSBwYXltZW50O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcmVzdCArPSBleHBvcnRzLkZWKHJhdGUsIGkgLSAxLCBwYXltZW50LCB2YWx1ZSwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaW50ZXJlc3QgKj0gcmF0ZTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gY3VtdWxhdGl2ZSBpbnRlcmVzdFxyXG4gICAgICAgICAgICByZXR1cm4gaW50ZXJlc3Q7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQ1VNUFJJTkMgPSBmdW5jdGlvbihyYXRlLCBwZXJpb2RzLCB2YWx1ZSwgc3RhcnQsIGVuZCwgdHlwZSkge1xyXG4gICAgICAgICAgICAvLyBDcmVkaXRzOiBhbGdvcml0aG0gaW5zcGlyZWQgYnkgQXBhY2hlIE9wZW5PZmZpY2VcclxuICAgICAgICAgICAgLy8gQ3JlZGl0czogSGFubmVzIFN0aWViaXR6aG9mZXIgZm9yIHRoZSB0cmFuc2xhdGlvbnMgb2YgZnVuY3Rpb24gYW5kXHJcbiAgICAgICAgICAgICAgICAvLyB2YXJpYWJsZSBuYW1lc1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJhdGUgPSB1dGlscy5wYXJzZU51bWJlcihyYXRlKTtcclxuICAgICAgICAgICAgcGVyaW9kcyA9IHV0aWxzLnBhcnNlTnVtYmVyKHBlcmlvZHMpO1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHV0aWxzLnBhcnNlTnVtYmVyKHZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IocmF0ZSwgcGVyaW9kcywgdmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgZWl0aGVyIHJhdGUsIHBlcmlvZHMsIG9yIHZhbHVlIGFyZSBsb3dlciB0aGFuIG9yXHJcbiAgICAgICAgICAgICAgICAvLyBlcXVhbCB0byB6ZXJvXHJcbiAgICAgICAgICAgIGlmIChyYXRlIDw9IDAgfHwgcGVyaW9kcyA8PSAwIHx8IHZhbHVlIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgc3RhcnQgPCAxLCBlbmQgPCAxLCBvciBzdGFydCA+IGVuZFxyXG4gICAgICAgICAgICBpZiAoc3RhcnQgPCAxIHx8IGVuZCA8IDEgfHwgc3RhcnQgPiBlbmQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgdHlwZSBpcyBuZWl0aGVyIDAgbm9yIDFcclxuICAgICAgICAgICAgaWYgKHR5cGUgIT09IDAgJiYgdHlwZSAhPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIENvbXB1dGUgY3VtdWxhdGl2ZSBwcmluY2lwYWxcclxuICAgICAgICAgICAgdmFyIHBheW1lbnQgPSBleHBvcnRzLlBNVChyYXRlLCBwZXJpb2RzLCB2YWx1ZSwgMCwgdHlwZSk7XHJcbiAgICAgICAgICAgIHZhciBwcmluY2lwYWwgPSAwO1xyXG4gICAgICAgICAgICBpZiAoc3RhcnQgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJpbmNpcGFsID0gcGF5bWVudCArIHZhbHVlICogcmF0ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJpbmNpcGFsID0gcGF5bWVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHN0YXJ0Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDw9IGVuZDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmluY2lwYWwgKz0gcGF5bWVudCAtIChleHBvcnRzLkZWKHJhdGUsIGkgLSAyLCBwYXltZW50LCB2YWx1ZSwgMSkgLSBwYXltZW50KSAqIHJhdGU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHByaW5jaXBhbCArPSBwYXltZW50IC0gZXhwb3J0cy5GVihyYXRlLCBpIC0gMSwgcGF5bWVudCwgdmFsdWUsIDApICogcmF0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBjdW11bGF0aXZlIHByaW5jaXBhbFxyXG4gICAgICAgICAgICByZXR1cm4gcHJpbmNpcGFsO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkRCID0gZnVuY3Rpb24oY29zdCwgc2FsdmFnZSwgbGlmZSwgcGVyaW9kLCBtb250aCkge1xyXG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIG1vbnRoXHJcbiAgICAgICAgICAgIG1vbnRoID0gKG1vbnRoID09PSB1bmRlZmluZWQpID8gMTIgOiBtb250aDtcclxuICAgIFxyXG4gICAgICAgICAgICBjb3N0ID0gdXRpbHMucGFyc2VOdW1iZXIoY29zdCk7XHJcbiAgICAgICAgICAgIHNhbHZhZ2UgPSB1dGlscy5wYXJzZU51bWJlcihzYWx2YWdlKTtcclxuICAgICAgICAgICAgbGlmZSA9IHV0aWxzLnBhcnNlTnVtYmVyKGxpZmUpO1xyXG4gICAgICAgICAgICBwZXJpb2QgPSB1dGlscy5wYXJzZU51bWJlcihwZXJpb2QpO1xyXG4gICAgICAgICAgICBtb250aCA9IHV0aWxzLnBhcnNlTnVtYmVyKG1vbnRoKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoY29zdCwgc2FsdmFnZSwgbGlmZSwgcGVyaW9kLCBtb250aCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBhbnkgb2YgdGhlIHBhcmFtZXRlcnMgaXMgbmVnYXRpdmVcclxuICAgICAgICAgICAgaWYgKGNvc3QgPCAwIHx8IHNhbHZhZ2UgPCAwIHx8IGxpZmUgPCAwIHx8IHBlcmlvZCA8IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgbW9udGggaXMgbm90IGFuIGludGVnZXIgYmV0d2VlbiAxIGFuZCAxMlxyXG4gICAgICAgICAgICBpZiAoWzEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTJdLmluZGV4T2YobW9udGgpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBwZXJpb2QgaXMgZ3JlYXRlciB0aGFuIGxpZmVcclxuICAgICAgICAgICAgaWYgKHBlcmlvZCA+IGxpZmUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gMCAoemVybykgaWYgc2FsdmFnZSBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gY29zdFxyXG4gICAgICAgICAgICBpZiAoc2FsdmFnZSA+PSBjb3N0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJhdGUgaXMgcm91bmRlZCB0byB0aHJlZSBkZWNpbWFscyBwbGFjZXNcclxuICAgICAgICAgICAgdmFyIHJhdGUgPSAoMSAtIE1hdGgucG93KHNhbHZhZ2UgLyBjb3N0LCAxIC8gbGlmZSkpLnRvRml4ZWQoMyk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ29tcHV0ZSBpbml0aWFsIGRlcHJlY2lhdGlvblxyXG4gICAgICAgICAgICB2YXIgaW5pdGlhbCA9IGNvc3QgKiByYXRlICogbW9udGggLyAxMjtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDb21wdXRlIHRvdGFsIGRlcHJlY2lhdGlvblxyXG4gICAgICAgICAgICB2YXIgdG90YWwgPSBpbml0aWFsO1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBjZWlsaW5nID0gKHBlcmlvZCA9PT0gbGlmZSkgPyBsaWZlIC0gMSA6IHBlcmlvZDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDI7IGkgPD0gY2VpbGluZzsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gKGNvc3QgLSB0b3RhbCkgKiByYXRlO1xyXG4gICAgICAgICAgICAgICAgdG90YWwgKz0gY3VycmVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIERlcHJlY2lhdGlvbiBmb3IgdGhlIGZpcnN0IGFuZCBsYXN0IHBlcmlvZHMgYXJlIHNwZWNpYWwgY2FzZXNcclxuICAgICAgICAgICAgaWYgKHBlcmlvZCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gRmlyc3QgcGVyaW9kXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5pdGlhbDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwZXJpb2QgPT09IGxpZmUpIHtcclxuICAgICAgICAgICAgICAgIC8vIExhc3QgcGVyaW9kXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGNvc3QgLSB0b3RhbCkgKiByYXRlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5EREIgPSBmdW5jdGlvbihjb3N0LCBzYWx2YWdlLCBsaWZlLCBwZXJpb2QsIGZhY3Rvcikge1xyXG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIGZhY3RvclxyXG4gICAgICAgICAgICBmYWN0b3IgPSAoZmFjdG9yID09PSB1bmRlZmluZWQpID8gMiA6IGZhY3RvcjtcclxuICAgIFxyXG4gICAgICAgICAgICBjb3N0ID0gdXRpbHMucGFyc2VOdW1iZXIoY29zdCk7XHJcbiAgICAgICAgICAgIHNhbHZhZ2UgPSB1dGlscy5wYXJzZU51bWJlcihzYWx2YWdlKTtcclxuICAgICAgICAgICAgbGlmZSA9IHV0aWxzLnBhcnNlTnVtYmVyKGxpZmUpO1xyXG4gICAgICAgICAgICBwZXJpb2QgPSB1dGlscy5wYXJzZU51bWJlcihwZXJpb2QpO1xyXG4gICAgICAgICAgICBmYWN0b3IgPSB1dGlscy5wYXJzZU51bWJlcihmYWN0b3IpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihjb3N0LCBzYWx2YWdlLCBsaWZlLCBwZXJpb2QsIGZhY3RvcikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBhbnkgb2YgdGhlIHBhcmFtZXRlcnMgaXMgbmVnYXRpdmUgb3IgaWYgZmFjdG9yIGlzXHJcbiAgICAgICAgICAgICAgICAvLyBudWxsXHJcbiAgICAgICAgICAgIGlmIChjb3N0IDwgMCB8fCBzYWx2YWdlIDwgMCB8fCBsaWZlIDwgMCB8fCBwZXJpb2QgPCAwIHx8IGZhY3RvciA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIHBlcmlvZCBpcyBncmVhdGVyIHRoYW4gbGlmZVxyXG4gICAgICAgICAgICBpZiAocGVyaW9kID4gbGlmZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiAwICh6ZXJvKSBpZiBzYWx2YWdlIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBjb3N0XHJcbiAgICAgICAgICAgIGlmIChzYWx2YWdlID49IGNvc3QpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ29tcHV0ZSBkZXByZWNpYXRpb25cclxuICAgICAgICAgICAgdmFyIHRvdGFsID0gMDtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBwZXJpb2Q7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudCA9IE1hdGgubWluKChjb3N0IC0gdG90YWwpICogKGZhY3RvciAvIGxpZmUpLCAoY29zdCAtIHNhbHZhZ2UgLSB0b3RhbCkpO1xyXG4gICAgICAgICAgICAgICAgdG90YWwgKz0gY3VycmVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBkZXByZWNpYXRpb25cclxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuRElTQyA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkRPTExBUkRFID0gZnVuY3Rpb24oZG9sbGFyLCBmcmFjdGlvbikge1xyXG4gICAgICAgICAgICAvLyBDcmVkaXRzOiBhbGdvcml0aG0gaW5zcGlyZWQgYnkgQXBhY2hlIE9wZW5PZmZpY2VcclxuICAgIFxyXG4gICAgICAgICAgICBkb2xsYXIgPSB1dGlscy5wYXJzZU51bWJlcihkb2xsYXIpO1xyXG4gICAgICAgICAgICBmcmFjdGlvbiA9IHV0aWxzLnBhcnNlTnVtYmVyKGZyYWN0aW9uKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoZG9sbGFyLCBmcmFjdGlvbikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBmcmFjdGlvbiBpcyBuZWdhdGl2ZVxyXG4gICAgICAgICAgICBpZiAoZnJhY3Rpb24gPCAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGZyYWN0aW9uIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAwIGFuZCBsZXNzIHRoYW5cclxuICAgICAgICAgICAgICAgIC8vIDFcclxuICAgICAgICAgICAgaWYgKGZyYWN0aW9uID49IDAgJiYgZnJhY3Rpb24gPCAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IuZGl2MDtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFRydW5jYXRlIGZyYWN0aW9uIGlmIGl0IGlzIG5vdCBhbiBpbnRlZ2VyXHJcbiAgICAgICAgICAgIGZyYWN0aW9uID0gcGFyc2VJbnQoZnJhY3Rpb24sIDEwKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDb21wdXRlIGludGVnZXIgcGFydFxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gcGFyc2VJbnQoZG9sbGFyLCAxMCk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQWRkIGRlY2ltYWwgcGFydFxyXG4gICAgICAgICAgICByZXN1bHQgKz0gKGRvbGxhciAlIDEpICogTWF0aC5wb3coMTAsIE1hdGguY2VpbChNYXRoLmxvZyhmcmFjdGlvbikgLyBNYXRoLkxOMTApKSAvIGZyYWN0aW9uO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJvdW5kIHJlc3VsdFxyXG4gICAgICAgICAgICB2YXIgcG93ZXIgPSBNYXRoLnBvdygxMCwgTWF0aC5jZWlsKE1hdGgubG9nKGZyYWN0aW9uKSAvIE1hdGguTE4yKSArIDEpO1xyXG4gICAgICAgICAgICByZXN1bHQgPSBNYXRoLnJvdW5kKHJlc3VsdCAqIHBvd2VyKSAvIHBvd2VyO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBjb252ZXJ0ZWQgZG9sbGFyIHByaWNlXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuRE9MTEFSRlIgPSBmdW5jdGlvbihkb2xsYXIsIGZyYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIC8vIENyZWRpdHM6IGFsZ29yaXRobSBpbnNwaXJlZCBieSBBcGFjaGUgT3Blbk9mZmljZVxyXG4gICAgXHJcbiAgICAgICAgICAgIGRvbGxhciA9IHV0aWxzLnBhcnNlTnVtYmVyKGRvbGxhcik7XHJcbiAgICAgICAgICAgIGZyYWN0aW9uID0gdXRpbHMucGFyc2VOdW1iZXIoZnJhY3Rpb24pO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihkb2xsYXIsIGZyYWN0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGZyYWN0aW9uIGlzIG5lZ2F0aXZlXHJcbiAgICAgICAgICAgIGlmIChmcmFjdGlvbiA8IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgZnJhY3Rpb24gaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIDAgYW5kIGxlc3MgdGhhblxyXG4gICAgICAgICAgICAgICAgLy8gMVxyXG4gICAgICAgICAgICBpZiAoZnJhY3Rpb24gPj0gMCAmJiBmcmFjdGlvbiA8IDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5kaXYwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gVHJ1bmNhdGUgZnJhY3Rpb24gaWYgaXQgaXMgbm90IGFuIGludGVnZXJcclxuICAgICAgICAgICAgZnJhY3Rpb24gPSBwYXJzZUludChmcmFjdGlvbiwgMTApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIENvbXB1dGUgaW50ZWdlciBwYXJ0XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBwYXJzZUludChkb2xsYXIsIDEwKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBBZGQgZGVjaW1hbCBwYXJ0XHJcbiAgICAgICAgICAgIHJlc3VsdCArPSAoZG9sbGFyICUgMSkgKiBNYXRoLnBvdygxMCwgLU1hdGguY2VpbChNYXRoLmxvZyhmcmFjdGlvbikgLyBNYXRoLkxOMTApKSAqIGZyYWN0aW9uO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBjb252ZXJ0ZWQgZG9sbGFyIHByaWNlXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuRFVSQVRJT04gPSBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5FRkZFQ1QgPSBmdW5jdGlvbihyYXRlLCBwZXJpb2RzKSB7XHJcbiAgICAgICAgICAgIHJhdGUgPSB1dGlscy5wYXJzZU51bWJlcihyYXRlKTtcclxuICAgICAgICAgICAgcGVyaW9kcyA9IHV0aWxzLnBhcnNlTnVtYmVyKHBlcmlvZHMpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihyYXRlLCBwZXJpb2RzKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIHJhdGUgPD0wIG9yIHBlcmlvZHMgPCAxXHJcbiAgICAgICAgICAgIGlmIChyYXRlIDw9IDAgfHwgcGVyaW9kcyA8IDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBUcnVuY2F0ZSBwZXJpb2RzIGlmIGl0IGlzIG5vdCBhbiBpbnRlZ2VyXHJcbiAgICAgICAgICAgIHBlcmlvZHMgPSBwYXJzZUludChwZXJpb2RzLCAxMCk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVmZmVjdGl2ZSBhbm51YWwgaW50ZXJlc3QgcmF0ZVxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5wb3coMSArIHJhdGUgLyBwZXJpb2RzLCBwZXJpb2RzKSAtIDE7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuRlYgPSBmdW5jdGlvbihyYXRlLCBwZXJpb2RzLCBwYXltZW50LCB2YWx1ZSwgdHlwZSkge1xyXG4gICAgICAgICAgICAvLyBDcmVkaXRzOiBhbGdvcml0aG0gaW5zcGlyZWQgYnkgQXBhY2hlIE9wZW5PZmZpY2VcclxuICAgIFxyXG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlIHx8IDA7XHJcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlIHx8IDA7XHJcbiAgICBcclxuICAgICAgICAgICAgcmF0ZSA9IHV0aWxzLnBhcnNlTnVtYmVyKHJhdGUpO1xyXG4gICAgICAgICAgICBwZXJpb2RzID0gdXRpbHMucGFyc2VOdW1iZXIocGVyaW9kcyk7XHJcbiAgICAgICAgICAgIHBheW1lbnQgPSB1dGlscy5wYXJzZU51bWJlcihwYXltZW50KTtcclxuICAgICAgICAgICAgdmFsdWUgPSB1dGlscy5wYXJzZU51bWJlcih2YWx1ZSk7XHJcbiAgICAgICAgICAgIHR5cGUgPSB1dGlscy5wYXJzZU51bWJlcih0eXBlKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IocmF0ZSwgcGVyaW9kcywgcGF5bWVudCwgdmFsdWUsIHR5cGUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZnV0dXJlIHZhbHVlXHJcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgICAgIGlmIChyYXRlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB2YWx1ZSArIHBheW1lbnQgKiBwZXJpb2RzO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBNYXRoLnBvdygxICsgcmF0ZSwgcGVyaW9kcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlICogdGVybSArIHBheW1lbnQgKiAoMSArIHJhdGUpICogKHRlcm0gLSAxKSAvIHJhdGU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlICogdGVybSArIHBheW1lbnQgKiAodGVybSAtIDEpIC8gcmF0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gLXJlc3VsdDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5GVlNDSEVEVUxFID0gZnVuY3Rpb24ocHJpbmNpcGFsLCBzY2hlZHVsZSkge1xyXG4gICAgICAgICAgICBwcmluY2lwYWwgPSB1dGlscy5wYXJzZU51bWJlcihwcmluY2lwYWwpO1xyXG4gICAgICAgICAgICBzY2hlZHVsZSA9IHV0aWxzLnBhcnNlTnVtYmVyQXJyYXkodXRpbHMuZmxhdHRlbihzY2hlZHVsZSkpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihwcmluY2lwYWwsIHNjaGVkdWxlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIG4gPSBzY2hlZHVsZS5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBmdXR1cmUgPSBwcmluY2lwYWw7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQXBwbHkgYWxsIGludGVyZXN0cyBpbiBzY2hlZHVsZVxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgc2NoZWR1bGVkIGludGVyZXN0XHJcbiAgICAgICAgICAgICAgICBmdXR1cmUgKj0gMSArIHNjaGVkdWxlW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGZ1dHVyZSB2YWx1ZVxyXG4gICAgICAgICAgICByZXR1cm4gZnV0dXJlO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLklOVFJBVEUgPSBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JUE1UID0gZnVuY3Rpb24ocmF0ZSwgcGVyaW9kLCBwZXJpb2RzLCBwcmVzZW50LCBmdXR1cmUsIHR5cGUpIHtcclxuICAgICAgICAgICAgLy8gQ3JlZGl0czogYWxnb3JpdGhtIGluc3BpcmVkIGJ5IEFwYWNoZSBPcGVuT2ZmaWNlXHJcbiAgICBcclxuICAgICAgICAgICAgZnV0dXJlID0gZnV0dXJlIHx8IDA7XHJcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlIHx8IDA7XHJcbiAgICBcclxuICAgICAgICAgICAgcmF0ZSA9IHV0aWxzLnBhcnNlTnVtYmVyKHJhdGUpO1xyXG4gICAgICAgICAgICBwZXJpb2QgPSB1dGlscy5wYXJzZU51bWJlcihwZXJpb2QpO1xyXG4gICAgICAgICAgICBwZXJpb2RzID0gdXRpbHMucGFyc2VOdW1iZXIocGVyaW9kcyk7XHJcbiAgICAgICAgICAgIHByZXNlbnQgPSB1dGlscy5wYXJzZU51bWJlcihwcmVzZW50KTtcclxuICAgICAgICAgICAgZnV0dXJlID0gdXRpbHMucGFyc2VOdW1iZXIoZnV0dXJlKTtcclxuICAgICAgICAgICAgdHlwZSA9IHV0aWxzLnBhcnNlTnVtYmVyKHR5cGUpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihyYXRlLCBwZXJpb2QsIHBlcmlvZHMsIHByZXNlbnQsIGZ1dHVyZSwgdHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIENvbXB1dGUgcGF5bWVudFxyXG4gICAgICAgICAgICB2YXIgcGF5bWVudCA9IGV4cG9ydHMuUE1UKHJhdGUsIHBlcmlvZHMsIHByZXNlbnQsIGZ1dHVyZSwgdHlwZSk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ29tcHV0ZSBpbnRlcmVzdFxyXG4gICAgICAgICAgICB2YXIgaW50ZXJlc3Q7XHJcbiAgICAgICAgICAgIGlmIChwZXJpb2QgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJlc3QgPSAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcmVzdCA9IC1wcmVzZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcmVzdCA9IGV4cG9ydHMuRlYocmF0ZSwgcGVyaW9kIC0gMiwgcGF5bWVudCwgcHJlc2VudCwgMSkgLSBwYXltZW50O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcmVzdCA9IGV4cG9ydHMuRlYocmF0ZSwgcGVyaW9kIC0gMSwgcGF5bWVudCwgcHJlc2VudCwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gaW50ZXJlc3RcclxuICAgICAgICAgICAgcmV0dXJuIGludGVyZXN0ICogcmF0ZTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JUlIgPSBmdW5jdGlvbih2YWx1ZXMsIGd1ZXNzKSB7XHJcbiAgICAgICAgICAgIC8vIENyZWRpdHM6IGFsZ29yaXRobSBpbnNwaXJlZCBieSBBcGFjaGUgT3Blbk9mZmljZVxyXG4gICAgXHJcbiAgICAgICAgICAgIGd1ZXNzID0gZ3Vlc3MgfHwgMDtcclxuICAgIFxyXG4gICAgICAgICAgICB2YWx1ZXMgPSB1dGlscy5wYXJzZU51bWJlckFycmF5KHV0aWxzLmZsYXR0ZW4odmFsdWVzKSk7XHJcbiAgICAgICAgICAgIGd1ZXNzID0gdXRpbHMucGFyc2VOdW1iZXIoZ3Vlc3MpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcih2YWx1ZXMsIGd1ZXNzKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlcyB0aGUgcmVzdWx0aW5nIGFtb3VudFxyXG4gICAgICAgICAgICB2YXIgaXJyUmVzdWx0ID0gZnVuY3Rpb24odmFsdWVzLCBkYXRlcywgcmF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSByYXRlICsgMTtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB2YWx1ZXNbMF07XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSB2YWx1ZXNbaV0gLyBNYXRoLnBvdyhyLCAoZGF0ZXNbaV0gLSBkYXRlc1swXSkgLyAzNjUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGVzIHRoZSBmaXJzdCBkZXJpdmF0aW9uXHJcbiAgICAgICAgICAgIHZhciBpcnJSZXN1bHREZXJpdiA9IGZ1bmN0aW9uKHZhbHVlcywgZGF0ZXMsIHJhdGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciByID0gcmF0ZSArIDE7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZyYWMgPSAoZGF0ZXNbaV0gLSBkYXRlc1swXSkgLyAzNjU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0IC09IGZyYWMgKiB2YWx1ZXNbaV0gLyBNYXRoLnBvdyhyLCBmcmFjICsgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgZGF0ZXMgYW5kIGNoZWNrIHRoYXQgdmFsdWVzIGNvbnRhaW5zIGF0IGxlYXN0IG9uZSBwb3NpdGl2ZVxyXG4gICAgICAgICAgICAgICAgLy8gdmFsdWUgYW5kIG9uZSBuZWdhdGl2ZSB2YWx1ZVxyXG4gICAgICAgICAgICB2YXIgZGF0ZXMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBuZWdhdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZGF0ZXNbaV0gPSAoaSA9PT0gMCkgPyAwIDogZGF0ZXNbaSAtIDFdICsgMzY1O1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlc1tpXSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWVzW2ldIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5lZ2F0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiB2YWx1ZXMgZG9lcyBub3QgY29udGFpbiBhdCBsZWFzdCBvbmUgcG9zaXRpdmUgdmFsdWVcclxuICAgICAgICAgICAgICAgIC8vIGFuZCBvbmUgbmVnYXRpdmUgdmFsdWVcclxuICAgICAgICAgICAgaWYgKCFwb3NpdGl2ZSB8fCAhbmVnYXRpdmUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIGd1ZXNzIGFuZCByZXN1bHRSYXRlXHJcbiAgICAgICAgICAgIGd1ZXNzID0gKGd1ZXNzID09PSB1bmRlZmluZWQpID8gMC4xIDogZ3Vlc3M7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHRSYXRlID0gZ3Vlc3M7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gU2V0IG1heGltdW0gZXBzaWxvbiBmb3IgZW5kIG9mIGl0ZXJhdGlvblxyXG4gICAgICAgICAgICB2YXIgZXBzTWF4ID0gMWUtMTA7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gSW1wbGVtZW50IE5ld3RvbidzIG1ldGhvZFxyXG4gICAgICAgICAgICB2YXIgbmV3UmF0ZSwgZXBzUmF0ZSwgcmVzdWx0VmFsdWU7XHJcbiAgICAgICAgICAgIHZhciBjb250TG9vcCA9IHRydWU7XHJcbiAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFZhbHVlID0gaXJyUmVzdWx0KHZhbHVlcywgZGF0ZXMsIHJlc3VsdFJhdGUpO1xyXG4gICAgICAgICAgICAgICAgbmV3UmF0ZSA9IHJlc3VsdFJhdGUgLSByZXN1bHRWYWx1ZSAvIGlyclJlc3VsdERlcml2KHZhbHVlcywgZGF0ZXMsIHJlc3VsdFJhdGUpO1xyXG4gICAgICAgICAgICAgICAgZXBzUmF0ZSA9IE1hdGguYWJzKG5ld1JhdGUgLSByZXN1bHRSYXRlKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFJhdGUgPSBuZXdSYXRlO1xyXG4gICAgICAgICAgICAgICAgY29udExvb3AgPSAoZXBzUmF0ZSA+IGVwc01heCkgJiYgKE1hdGguYWJzKHJlc3VsdFZhbHVlKSA+IGVwc01heCk7XHJcbiAgICAgICAgICAgIH0gd2hpbGUgKGNvbnRMb29wKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gaW50ZXJuYWwgcmF0ZSBvZiByZXR1cm5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFJhdGU7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSVNQTVQgPSBmdW5jdGlvbihyYXRlLCBwZXJpb2QsIHBlcmlvZHMsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJhdGUgPSB1dGlscy5wYXJzZU51bWJlcihyYXRlKTtcclxuICAgICAgICAgICAgcGVyaW9kID0gdXRpbHMucGFyc2VOdW1iZXIocGVyaW9kKTtcclxuICAgICAgICAgICAgcGVyaW9kcyA9IHV0aWxzLnBhcnNlTnVtYmVyKHBlcmlvZHMpO1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHV0aWxzLnBhcnNlTnVtYmVyKHZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IocmF0ZSwgcGVyaW9kLCBwZXJpb2RzLCB2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBpbnRlcmVzdFxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgKiByYXRlICogKHBlcmlvZCAvIHBlcmlvZHMgLSAxKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5NRFVSQVRJT04gPSBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5NSVJSID0gZnVuY3Rpb24odmFsdWVzLCBmaW5hbmNlX3JhdGUsIHJlaW52ZXN0X3JhdGUpIHtcclxuICAgICAgICAgICAgdmFsdWVzID0gdXRpbHMucGFyc2VOdW1iZXJBcnJheSh1dGlscy5mbGF0dGVuKHZhbHVlcykpO1xyXG4gICAgICAgICAgICBmaW5hbmNlX3JhdGUgPSB1dGlscy5wYXJzZU51bWJlcihmaW5hbmNlX3JhdGUpO1xyXG4gICAgICAgICAgICByZWludmVzdF9yYXRlID0gdXRpbHMucGFyc2VOdW1iZXIocmVpbnZlc3RfcmF0ZSk7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHZhbHVlcywgZmluYW5jZV9yYXRlLCByZWludmVzdF9yYXRlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBudW1iZXIgb2YgdmFsdWVzXHJcbiAgICAgICAgICAgIHZhciBuID0gdmFsdWVzLmxlbmd0aDtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBMb29rdXAgcGF5bWVudHMgKG5lZ2F0aXZlIHZhbHVlcykgYW5kIGluY29tZXMgKHBvc2l0aXZlIHZhbHVlcylcclxuICAgICAgICAgICAgdmFyIHBheW1lbnRzID0gW107XHJcbiAgICAgICAgICAgIHZhciBpbmNvbWVzID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWVzW2ldIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnRzLnB1c2godmFsdWVzW2ldKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5jb21lcy5wdXNoKHZhbHVlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gbW9kaWZpZWQgaW50ZXJuYWwgcmF0ZSBvZiByZXR1cm5cclxuICAgICAgICAgICAgdmFyIG51bSA9IC1leHBvcnRzLk5QVihyZWludmVzdF9yYXRlLCBpbmNvbWVzKSAqIE1hdGgucG93KDEgKyByZWludmVzdF9yYXRlLCBuIC0gMSk7XHJcbiAgICAgICAgICAgIHZhciBkZW4gPSBleHBvcnRzLk5QVihmaW5hbmNlX3JhdGUsIHBheW1lbnRzKSAqICgxICsgZmluYW5jZV9yYXRlKTtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgucG93KG51bSAvIGRlbiwgMSAvIChuIC0gMSkpIC0gMTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5OT01JTkFMID0gZnVuY3Rpb24ocmF0ZSwgcGVyaW9kcykge1xyXG4gICAgICAgICAgICByYXRlID0gdXRpbHMucGFyc2VOdW1iZXIocmF0ZSk7XHJcbiAgICAgICAgICAgIHBlcmlvZHMgPSB1dGlscy5wYXJzZU51bWJlcihwZXJpb2RzKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IocmF0ZSwgcGVyaW9kcykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiByYXRlIDw9MCBvciBwZXJpb2RzIDwgMVxyXG4gICAgICAgICAgICBpZiAocmF0ZSA8PSAwIHx8IHBlcmlvZHMgPCAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gVHJ1bmNhdGUgcGVyaW9kcyBpZiBpdCBpcyBub3QgYW4gaW50ZWdlclxyXG4gICAgICAgICAgICBwZXJpb2RzID0gcGFyc2VJbnQocGVyaW9kcywgMTApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBub21pbmFsIGFubnVhbCBpbnRlcmVzdCByYXRlXHJcbiAgICAgICAgICAgIHJldHVybiAoTWF0aC5wb3cocmF0ZSArIDEsIDEgLyBwZXJpb2RzKSAtIDEpICogcGVyaW9kcztcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5OUEVSID0gZnVuY3Rpb24ocmF0ZSwgcGF5bWVudCwgcHJlc2VudCwgZnV0dXJlLCB0eXBlKSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSAodHlwZSA9PT0gdW5kZWZpbmVkKSA/IDAgOiB0eXBlO1xyXG4gICAgICAgICAgICBmdXR1cmUgPSAoZnV0dXJlID09PSB1bmRlZmluZWQpID8gMCA6IGZ1dHVyZTtcclxuICAgIFxyXG4gICAgICAgICAgICByYXRlID0gdXRpbHMucGFyc2VOdW1iZXIocmF0ZSk7XHJcbiAgICAgICAgICAgIHBheW1lbnQgPSB1dGlscy5wYXJzZU51bWJlcihwYXltZW50KTtcclxuICAgICAgICAgICAgcHJlc2VudCA9IHV0aWxzLnBhcnNlTnVtYmVyKHByZXNlbnQpO1xyXG4gICAgICAgICAgICBmdXR1cmUgPSB1dGlscy5wYXJzZU51bWJlcihmdXR1cmUpO1xyXG4gICAgICAgICAgICB0eXBlID0gdXRpbHMucGFyc2VOdW1iZXIodHlwZSk7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHJhdGUsIHBheW1lbnQsIHByZXNlbnQsIGZ1dHVyZSwgdHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBudW1iZXIgb2YgcGVyaW9kc1xyXG4gICAgICAgICAgICB2YXIgbnVtID0gcGF5bWVudCAqICgxICsgcmF0ZSAqIHR5cGUpIC0gZnV0dXJlICogcmF0ZTtcclxuICAgICAgICAgICAgdmFyIGRlbiA9IChwcmVzZW50ICogcmF0ZSArIHBheW1lbnQgKiAoMSArIHJhdGUgKiB0eXBlKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmxvZyhudW0gLyBkZW4pIC8gTWF0aC5sb2coMSArIHJhdGUpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLk5QViA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgYXJncyA9IHV0aWxzLnBhcnNlTnVtYmVyQXJyYXkodXRpbHMuZmxhdHRlbihhcmd1bWVudHMpKTtcclxuICAgICAgICAgICAgaWYgKGFyZ3MgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBMb29rdXAgcmF0ZVxyXG4gICAgICAgICAgICB2YXIgcmF0ZSA9IGFyZ3NbMF07XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBuZXQgcHJlc2VudCB2YWx1ZVxyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIExvb3Agb24gYWxsIHZhbHVlc1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMTsgaiA8IGFyZ3MubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlICs9IGFyZ3Nbal0gLyBNYXRoLnBvdygxICsgcmF0ZSwgaik7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gbmV0IHByZXNlbnQgdmFsdWVcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLk9EREZQUklDRSA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLk9EREZZSUVMRCA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLk9ERExQUklDRSA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLk9ERExZSUVMRCA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlBEVVJBVElPTiA9IGZ1bmN0aW9uKHJhdGUsIHByZXNlbnQsIGZ1dHVyZSkge1xyXG4gICAgICAgICAgICByYXRlID0gdXRpbHMucGFyc2VOdW1iZXIocmF0ZSk7XHJcbiAgICAgICAgICAgIHByZXNlbnQgPSB1dGlscy5wYXJzZU51bWJlcihwcmVzZW50KTtcclxuICAgICAgICAgICAgZnV0dXJlID0gdXRpbHMucGFyc2VOdW1iZXIoZnV0dXJlKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IocmF0ZSwgcHJlc2VudCwgZnV0dXJlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIHJhdGUgPD0wXHJcbiAgICAgICAgICAgIGlmIChyYXRlIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gbnVtYmVyIG9mIHBlcmlvZHNcclxuICAgICAgICAgICAgcmV0dXJuIChNYXRoLmxvZyhmdXR1cmUpIC0gTWF0aC5sb2cocHJlc2VudCkpIC8gTWF0aC5sb2coMSArIHJhdGUpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlBNVCA9IGZ1bmN0aW9uKHJhdGUsIHBlcmlvZHMsIHByZXNlbnQsIGZ1dHVyZSwgdHlwZSkge1xyXG4gICAgICAgICAgICAvLyBDcmVkaXRzOiBhbGdvcml0aG0gaW5zcGlyZWQgYnkgQXBhY2hlIE9wZW5PZmZpY2VcclxuICAgIFxyXG4gICAgICAgICAgICBmdXR1cmUgPSBmdXR1cmUgfHwgMDtcclxuICAgICAgICAgICAgdHlwZSA9IHR5cGUgfHwgMDtcclxuICAgIFxyXG4gICAgICAgICAgICByYXRlID0gdXRpbHMucGFyc2VOdW1iZXIocmF0ZSk7XHJcbiAgICAgICAgICAgIHBlcmlvZHMgPSB1dGlscy5wYXJzZU51bWJlcihwZXJpb2RzKTtcclxuICAgICAgICAgICAgcHJlc2VudCA9IHV0aWxzLnBhcnNlTnVtYmVyKHByZXNlbnQpO1xyXG4gICAgICAgICAgICBmdXR1cmUgPSB1dGlscy5wYXJzZU51bWJlcihmdXR1cmUpO1xyXG4gICAgICAgICAgICB0eXBlID0gdXRpbHMucGFyc2VOdW1iZXIodHlwZSk7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHJhdGUsIHBlcmlvZHMsIHByZXNlbnQsIGZ1dHVyZSwgdHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBwYXltZW50XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgICAgIGlmIChyYXRlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSAocHJlc2VudCArIGZ1dHVyZSkgLyBwZXJpb2RzO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBNYXRoLnBvdygxICsgcmF0ZSwgcGVyaW9kcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IChmdXR1cmUgKiByYXRlIC8gKHRlcm0gLSAxKSArIHByZXNlbnQgKiByYXRlIC8gKDEgLSAxIC8gdGVybSkpIC8gKDEgKyByYXRlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnV0dXJlICogcmF0ZSAvICh0ZXJtIC0gMSkgKyBwcmVzZW50ICogcmF0ZSAvICgxIC0gMSAvIHRlcm0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAtcmVzdWx0O1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlBQTVQgPSBmdW5jdGlvbihyYXRlLCBwZXJpb2QsIHBlcmlvZHMsIHByZXNlbnQsIGZ1dHVyZSwgdHlwZSkge1xyXG4gICAgICAgICAgICBmdXR1cmUgPSBmdXR1cmUgfHwgMDtcclxuICAgICAgICAgICAgdHlwZSA9IHR5cGUgfHwgMDtcclxuICAgIFxyXG4gICAgICAgICAgICByYXRlID0gdXRpbHMucGFyc2VOdW1iZXIocmF0ZSk7XHJcbiAgICAgICAgICAgIHBlcmlvZHMgPSB1dGlscy5wYXJzZU51bWJlcihwZXJpb2RzKTtcclxuICAgICAgICAgICAgcHJlc2VudCA9IHV0aWxzLnBhcnNlTnVtYmVyKHByZXNlbnQpO1xyXG4gICAgICAgICAgICBmdXR1cmUgPSB1dGlscy5wYXJzZU51bWJlcihmdXR1cmUpO1xyXG4gICAgICAgICAgICB0eXBlID0gdXRpbHMucGFyc2VOdW1iZXIodHlwZSk7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHJhdGUsIHBlcmlvZHMsIHByZXNlbnQsIGZ1dHVyZSwgdHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLlBNVChyYXRlLCBwZXJpb2RzLCBwcmVzZW50LCBmdXR1cmUsIHR5cGUpIC0gZXhwb3J0cy5JUE1UKHJhdGUsIHBlcmlvZCwgcGVyaW9kcywgcHJlc2VudCwgZnV0dXJlLCB0eXBlKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5QUklDRSA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlBSSUNFRElTQyA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlBSSUNFTUFUID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuUFYgPSBmdW5jdGlvbihyYXRlLCBwZXJpb2RzLCBwYXltZW50LCBmdXR1cmUsIHR5cGUpIHtcclxuICAgICAgICAgICAgZnV0dXJlID0gZnV0dXJlIHx8IDA7XHJcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlIHx8IDA7XHJcbiAgICBcclxuICAgICAgICAgICAgcmF0ZSA9IHV0aWxzLnBhcnNlTnVtYmVyKHJhdGUpO1xyXG4gICAgICAgICAgICBwZXJpb2RzID0gdXRpbHMucGFyc2VOdW1iZXIocGVyaW9kcyk7XHJcbiAgICAgICAgICAgIHBheW1lbnQgPSB1dGlscy5wYXJzZU51bWJlcihwYXltZW50KTtcclxuICAgICAgICAgICAgZnV0dXJlID0gdXRpbHMucGFyc2VOdW1iZXIoZnV0dXJlKTtcclxuICAgICAgICAgICAgdHlwZSA9IHV0aWxzLnBhcnNlTnVtYmVyKHR5cGUpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihyYXRlLCBwZXJpb2RzLCBwYXltZW50LCBmdXR1cmUsIHR5cGUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gcHJlc2VudCB2YWx1ZVxyXG4gICAgICAgICAgICBpZiAocmF0ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC1wYXltZW50ICogcGVyaW9kcyAtIGZ1dHVyZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoKCgxIC0gTWF0aC5wb3coMSArIHJhdGUsIHBlcmlvZHMpKSAvIHJhdGUpICogcGF5bWVudCAqICgxICsgcmF0ZSAqIHR5cGUpIC0gZnV0dXJlKSAvIE1hdGgucG93KDEgKyByYXRlLCBwZXJpb2RzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlJBVEUgPSBmdW5jdGlvbihwZXJpb2RzLCBwYXltZW50LCBwcmVzZW50LCBmdXR1cmUsIHR5cGUsIGd1ZXNzKSB7XHJcbiAgICAgICAgICAgIC8vIENyZWRpdHM6IHJhYnVnZW50b1xyXG4gICAgXHJcbiAgICAgICAgICAgIGd1ZXNzID0gKGd1ZXNzID09PSB1bmRlZmluZWQpID8gMC4wMSA6IGd1ZXNzO1xyXG4gICAgICAgICAgICBmdXR1cmUgPSAoZnV0dXJlID09PSB1bmRlZmluZWQpID8gMCA6IGZ1dHVyZTtcclxuICAgICAgICAgICAgdHlwZSA9ICh0eXBlID09PSB1bmRlZmluZWQpID8gMCA6IHR5cGU7XHJcbiAgICBcclxuICAgICAgICAgICAgcGVyaW9kcyA9IHV0aWxzLnBhcnNlTnVtYmVyKHBlcmlvZHMpO1xyXG4gICAgICAgICAgICBwYXltZW50ID0gdXRpbHMucGFyc2VOdW1iZXIocGF5bWVudCk7XHJcbiAgICAgICAgICAgIHByZXNlbnQgPSB1dGlscy5wYXJzZU51bWJlcihwcmVzZW50KTtcclxuICAgICAgICAgICAgZnV0dXJlID0gdXRpbHMucGFyc2VOdW1iZXIoZnV0dXJlKTtcclxuICAgICAgICAgICAgdHlwZSA9IHV0aWxzLnBhcnNlTnVtYmVyKHR5cGUpO1xyXG4gICAgICAgICAgICBndWVzcyA9IHV0aWxzLnBhcnNlTnVtYmVyKGd1ZXNzKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IocGVyaW9kcywgcGF5bWVudCwgcHJlc2VudCwgZnV0dXJlLCB0eXBlLCBndWVzcykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFNldCBtYXhpbXVtIGVwc2lsb24gZm9yIGVuZCBvZiBpdGVyYXRpb25cclxuICAgICAgICAgICAgdmFyIGVwc01heCA9IDFlLTY7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gU2V0IG1heGltdW0gbnVtYmVyIG9mIGl0ZXJhdGlvbnNcclxuICAgICAgICAgICAgdmFyIGl0ZXJNYXggPSAxMDA7XHJcbiAgICAgICAgICAgIHZhciBpdGVyID0gMDtcclxuICAgICAgICAgICAgdmFyIGNsb3NlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciByYXRlID0gZ3Vlc3M7XHJcbiAgICBcclxuICAgICAgICAgICAgd2hpbGUgKGl0ZXIgPCBpdGVyTWF4ICYmICFjbG9zZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQxID0gTWF0aC5wb3cocmF0ZSArIDEsIHBlcmlvZHMpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQyID0gTWF0aC5wb3cocmF0ZSArIDEsIHBlcmlvZHMgLSAxKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIGYxID0gZnV0dXJlICsgdDEgKiBwcmVzZW50ICsgcGF5bWVudCAqICh0MSAtIDEpICogKHJhdGUgKiB0eXBlICsgMSkgLyByYXRlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGYyID0gcGVyaW9kcyAqIHQyICogcHJlc2VudCAtIHBheW1lbnQgKiAodDEgLSAxKSAqKHJhdGUgKiB0eXBlICsgMSkgLyBNYXRoLnBvdyhyYXRlLDIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGYzID0gcGVyaW9kcyAqIHBheW1lbnQgKiB0MiAqIChyYXRlICogdHlwZSArIDEpIC8gcmF0ZSArIHBheW1lbnQgKiAodDEgLSAxKSAqIHR5cGUgLyByYXRlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3UmF0ZSA9IHJhdGUgLSBmMSAvIChmMiArIGYzKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKG5ld1JhdGUgLSByYXRlKSA8IGVwc01heCkgY2xvc2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaXRlcisrXHJcbiAgICAgICAgICAgICAgICByYXRlID0gbmV3UmF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICghY2xvc2UpIHJldHVybiBOdW1iZXIuTmFOICsgcmF0ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHJhdGU7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8vIFRPRE9cclxuICAgICAgICBleHBvcnRzLlJFQ0VJVkVEID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuUlJJID0gZnVuY3Rpb24ocGVyaW9kcywgcHJlc2VudCwgZnV0dXJlKSB7XHJcbiAgICAgICAgICAgIHBlcmlvZHMgPSB1dGlscy5wYXJzZU51bWJlcihwZXJpb2RzKTtcclxuICAgICAgICAgICAgcHJlc2VudCA9IHV0aWxzLnBhcnNlTnVtYmVyKHByZXNlbnQpO1xyXG4gICAgICAgICAgICBmdXR1cmUgPSB1dGlscy5wYXJzZU51bWJlcihmdXR1cmUpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihwZXJpb2RzLCBwcmVzZW50LCBmdXR1cmUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgcGVyaW9kcyBvciBwcmVzZW50IGlzIGVxdWFsIHRvIDAgKHplcm8pXHJcbiAgICAgICAgICAgIGlmIChwZXJpb2RzID09PSAwIHx8IHByZXNlbnQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXF1aXZhbGVudCBpbnRlcmVzdCByYXRlXHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdyhmdXR1cmUgLyBwcmVzZW50LCAxIC8gcGVyaW9kcykgLSAxO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlNMTiA9IGZ1bmN0aW9uKGNvc3QsIHNhbHZhZ2UsIGxpZmUpIHtcclxuICAgICAgICAgICAgY29zdCA9IHV0aWxzLnBhcnNlTnVtYmVyKGNvc3QpO1xyXG4gICAgICAgICAgICBzYWx2YWdlID0gdXRpbHMucGFyc2VOdW1iZXIoc2FsdmFnZSk7XHJcbiAgICAgICAgICAgIGxpZmUgPSB1dGlscy5wYXJzZU51bWJlcihsaWZlKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoY29zdCwgc2FsdmFnZSwgbGlmZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBsaWZlIGVxdWFsIHRvIDAgKHplcm8pXHJcbiAgICAgICAgICAgIGlmIChsaWZlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIHN0cmFpZ2h0LWxpbmUgZGVwcmVjaWF0aW9uXHJcbiAgICAgICAgICAgIHJldHVybiAoY29zdCAtIHNhbHZhZ2UpIC8gbGlmZTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5TWUQgPSBmdW5jdGlvbihjb3N0LCBzYWx2YWdlLCBsaWZlLCBwZXJpb2QpIHtcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGFueSBvZiB0aGUgcGFyYW1ldGVycyBpcyBub3QgYSBudW1iZXJcclxuICAgICAgICAgICAgY29zdCA9IHV0aWxzLnBhcnNlTnVtYmVyKGNvc3QpO1xyXG4gICAgICAgICAgICBzYWx2YWdlID0gdXRpbHMucGFyc2VOdW1iZXIoc2FsdmFnZSk7XHJcbiAgICAgICAgICAgIGxpZmUgPSB1dGlscy5wYXJzZU51bWJlcihsaWZlKTtcclxuICAgICAgICAgICAgcGVyaW9kID0gdXRpbHMucGFyc2VOdW1iZXIocGVyaW9kKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoY29zdCwgc2FsdmFnZSwgbGlmZSwgcGVyaW9kKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGxpZmUgZXF1YWwgdG8gMCAoemVybylcclxuICAgICAgICAgICAgaWYgKGxpZmUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgcGVyaW9kIGlzIGxvd2VyIHRoYW4gMSBvciBncmVhdGVyIHRoYW4gbGlmZVxyXG4gICAgICAgICAgICBpZiAocGVyaW9kIDwgMSB8fCBwZXJpb2QgPiBsaWZlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gVHJ1bmNhdGUgcGVyaW9kIGlmIGl0IGlzIG5vdCBhbiBpbnRlZ2VyXHJcbiAgICAgICAgICAgIHBlcmlvZCA9IHBhcnNlSW50KHBlcmlvZCwgMTApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBzdHJhaWdodC1saW5lIGRlcHJlY2lhdGlvblxyXG4gICAgICAgICAgICByZXR1cm4gKChjb3N0IC0gc2FsdmFnZSkgKiAobGlmZSAtIHBlcmlvZCArIDEpICogMikgLyAobGlmZSAqIChsaWZlICsgMSkpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlRCSUxMRVEgPSBmdW5jdGlvbihzZXR0bGVtZW50LCBtYXR1cml0eSwgZGlzY291bnQpIHtcclxuICAgICAgICAgICAgc2V0dGxlbWVudCA9IHV0aWxzLnBhcnNlRGF0ZShzZXR0bGVtZW50KTtcclxuICAgICAgICAgICAgbWF0dXJpdHkgPSB1dGlscy5wYXJzZURhdGUobWF0dXJpdHkpO1xyXG4gICAgICAgICAgICBkaXNjb3VudCA9IHV0aWxzLnBhcnNlTnVtYmVyKGRpc2NvdW50KTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3Ioc2V0dGxlbWVudCwgbWF0dXJpdHksIGRpc2NvdW50KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIGRpc2NvdW50IGlzIGxvd2VyIHRoYW4gb3IgZXF1YWwgdG8gemVyb1xyXG4gICAgICAgICAgICBpZiAoZGlzY291bnQgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBzZXR0bGVtZW50IGlzIGdyZWF0ZXIgdGhhbiBtYXR1cml0eVxyXG4gICAgICAgICAgICBpZiAoc2V0dGxlbWVudCA+IG1hdHVyaXR5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIG1hdHVyaXR5IGlzIG1vcmUgdGhhbiBvbmUgeWVhciBhZnRlciBzZXR0bGVtZW50XHJcbiAgICAgICAgICAgIGlmIChtYXR1cml0eSAtIHNldHRsZW1lbnQgPiAzNjUgKiAyNCAqIDYwICogNjAgKiAxMDAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGJvbmQtZXF1aXZhbGVudCB5aWVsZFxyXG4gICAgICAgICAgICByZXR1cm4gKDM2NSAqIGRpc2NvdW50KSAvICgzNjAgLSBkaXNjb3VudCAqIERBWVMzNjAoc2V0dGxlbWVudCwgbWF0dXJpdHksIGZhbHNlKSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuVEJJTExQUklDRSA9IGZ1bmN0aW9uKHNldHRsZW1lbnQsIG1hdHVyaXR5LCBkaXNjb3VudCkge1xyXG4gICAgICAgICAgICBzZXR0bGVtZW50ID0gdXRpbHMucGFyc2VEYXRlKHNldHRsZW1lbnQpO1xyXG4gICAgICAgICAgICBtYXR1cml0eSA9IHV0aWxzLnBhcnNlRGF0ZShtYXR1cml0eSk7XHJcbiAgICAgICAgICAgIGRpc2NvdW50ID0gdXRpbHMucGFyc2VOdW1iZXIoZGlzY291bnQpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihzZXR0bGVtZW50LCBtYXR1cml0eSwgZGlzY291bnQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgZGlzY291bnQgaXMgbG93ZXIgdGhhbiBvciBlcXVhbCB0byB6ZXJvXHJcbiAgICAgICAgICAgIGlmIChkaXNjb3VudCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGVycm9yIGlmIHNldHRsZW1lbnQgaXMgZ3JlYXRlciB0aGFuIG1hdHVyaXR5XHJcbiAgICAgICAgICAgIGlmIChzZXR0bGVtZW50ID4gbWF0dXJpdHkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgbWF0dXJpdHkgaXMgbW9yZSB0aGFuIG9uZSB5ZWFyIGFmdGVyIHNldHRsZW1lbnRcclxuICAgICAgICAgICAgaWYgKG1hdHVyaXR5IC0gc2V0dGxlbWVudCA+IDM2NSAqIDI0ICogNjAgKiA2MCAqIDEwMDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gYm9uZC1lcXVpdmFsZW50IHlpZWxkXHJcbiAgICAgICAgICAgIHJldHVybiAxMDAgKiAoMSAtIGRpc2NvdW50ICogREFZUzM2MChzZXR0bGVtZW50LCBtYXR1cml0eSwgZmFsc2UpIC8gMzYwKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5UQklMTFlJRUxEID0gZnVuY3Rpb24oc2V0dGxlbWVudCwgbWF0dXJpdHksIHByaWNlKSB7XHJcbiAgICAgICAgICAgIHNldHRsZW1lbnQgPSB1dGlscy5wYXJzZURhdGUoc2V0dGxlbWVudCk7XHJcbiAgICAgICAgICAgIG1hdHVyaXR5ID0gdXRpbHMucGFyc2VEYXRlKG1hdHVyaXR5KTtcclxuICAgICAgICAgICAgcHJpY2UgPSB1dGlscy5wYXJzZU51bWJlcihwcmljZSk7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHNldHRsZW1lbnQsIG1hdHVyaXR5LCBwcmljZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBwcmljZSBpcyBsb3dlciB0aGFuIG9yIGVxdWFsIHRvIHplcm9cclxuICAgICAgICAgICAgaWYgKHByaWNlIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgc2V0dGxlbWVudCBpcyBncmVhdGVyIHRoYW4gbWF0dXJpdHlcclxuICAgICAgICAgICAgaWYgKHNldHRsZW1lbnQgPiBtYXR1cml0eSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBlcnJvciBpZiBtYXR1cml0eSBpcyBtb3JlIHRoYW4gb25lIHllYXIgYWZ0ZXIgc2V0dGxlbWVudFxyXG4gICAgICAgICAgICBpZiAobWF0dXJpdHkgLSBzZXR0bGVtZW50ID4gMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBib25kLWVxdWl2YWxlbnQgeWllbGRcclxuICAgICAgICAgICAgcmV0dXJuICgxMDAgLSBwcmljZSkgKiAzNjAgLyAocHJpY2UgKiBEQVlTMzYwKHNldHRsZW1lbnQsIG1hdHVyaXR5LCBmYWxzZSkpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlZEQiA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlhJUlIgPSBmdW5jdGlvbih2YWx1ZXMsIGRhdGVzLCBndWVzcykge1xyXG4gICAgICAgICAgICAvLyBDcmVkaXRzOiBhbGdvcml0aG0gaW5zcGlyZWQgYnkgQXBhY2hlIE9wZW5PZmZpY2VcclxuICAgIFxyXG4gICAgICAgICAgICB2YWx1ZXMgPSB1dGlscy5wYXJzZU51bWJlckFycmF5KHV0aWxzLmZsYXR0ZW4odmFsdWVzKSk7XHJcbiAgICAgICAgICAgIGRhdGVzID0gdXRpbHMucGFyc2VEYXRlQXJyYXkodXRpbHMuZmxhdHRlbihkYXRlcykpO1xyXG4gICAgICAgICAgICBndWVzcyA9IHV0aWxzLnBhcnNlTnVtYmVyKGd1ZXNzKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IodmFsdWVzLCBkYXRlcywgZ3Vlc3MpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGVzIHRoZSByZXN1bHRpbmcgYW1vdW50XHJcbiAgICAgICAgICAgIHZhciBpcnJSZXN1bHQgPSBmdW5jdGlvbih2YWx1ZXMsIGRhdGVzLCByYXRlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgciA9IHJhdGUgKyAxO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHZhbHVlc1swXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IHZhbHVlc1tpXSAvIE1hdGgucG93KHIsIERBWVMoZGF0ZXNbaV0sIGRhdGVzWzBdKSAvIDM2NSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZXMgdGhlIGZpcnN0IGRlcml2YXRpb25cclxuICAgICAgICAgICAgdmFyIGlyclJlc3VsdERlcml2ID0gZnVuY3Rpb24odmFsdWVzLCBkYXRlcywgcmF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSByYXRlICsgMTtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZnJhYyA9IERBWVMoZGF0ZXNbaV0sIGRhdGVzWzBdKSAvIDM2NTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgLT0gZnJhYyAqIHZhbHVlc1tpXSAvIE1hdGgucG93KHIsIGZyYWMgKyAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCB2YWx1ZXMgY29udGFpbnMgYXQgbGVhc3Qgb25lIHBvc2l0aXZlIHZhbHVlIGFuZCBvbmVcclxuICAgICAgICAgICAgICAgIC8vIG5lZ2F0aXZlIHZhbHVlXHJcbiAgICAgICAgICAgIHZhciBwb3NpdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgbmVnYXRpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZXNbaV0gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlc1tpXSA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBuZWdhdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZXJyb3IgaWYgdmFsdWVzIGRvZXMgbm90IGNvbnRhaW4gYXQgbGVhc3Qgb25lIHBvc2l0aXZlIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAvLyBhbmQgb25lIG5lZ2F0aXZlIHZhbHVlXHJcbiAgICAgICAgICAgIGlmICghcG9zaXRpdmUgfHwgIW5lZ2F0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBndWVzcyBhbmQgcmVzdWx0UmF0ZVxyXG4gICAgICAgICAgICBndWVzcyA9IGd1ZXNzIHx8IDAuMTtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdFJhdGUgPSBndWVzcztcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBTZXQgbWF4aW11bSBlcHNpbG9uIGZvciBlbmQgb2YgaXRlcmF0aW9uXHJcbiAgICAgICAgICAgIHZhciBlcHNNYXggPSAxZS0xMDtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBJbXBsZW1lbnQgTmV3dG9uJ3MgbWV0aG9kXHJcbiAgICAgICAgICAgIHZhciBuZXdSYXRlLCBlcHNSYXRlLCByZXN1bHRWYWx1ZTtcclxuICAgICAgICAgICAgdmFyIGNvbnRMb29wID0gdHJ1ZTtcclxuICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0VmFsdWUgPSBpcnJSZXN1bHQodmFsdWVzLCBkYXRlcywgcmVzdWx0UmF0ZSk7XHJcbiAgICAgICAgICAgICAgICBuZXdSYXRlID0gcmVzdWx0UmF0ZSAtIHJlc3VsdFZhbHVlIC8gaXJyUmVzdWx0RGVyaXYodmFsdWVzLCBkYXRlcywgcmVzdWx0UmF0ZSk7XHJcbiAgICAgICAgICAgICAgICBlcHNSYXRlID0gTWF0aC5hYnMobmV3UmF0ZSAtIHJlc3VsdFJhdGUpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0UmF0ZSA9IG5ld1JhdGU7XHJcbiAgICAgICAgICAgICAgICBjb250TG9vcCA9IChlcHNSYXRlID4gZXBzTWF4KSAmJiAoTWF0aC5hYnMocmVzdWx0VmFsdWUpID4gZXBzTWF4KTtcclxuICAgICAgICAgICAgfSB3aGlsZSAoY29udExvb3ApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiBpbnRlcm5hbCByYXRlIG9mIHJldHVyblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0UmF0ZTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5YTlBWID0gZnVuY3Rpb24ocmF0ZSwgdmFsdWVzLCBkYXRlcykge1xyXG4gICAgICAgICAgICByYXRlID0gdXRpbHMucGFyc2VOdW1iZXIocmF0ZSk7XHJcbiAgICAgICAgICAgIHZhbHVlcyA9IHV0aWxzLnBhcnNlTnVtYmVyQXJyYXkodXRpbHMuZmxhdHRlbih2YWx1ZXMpKTtcclxuICAgICAgICAgICAgZGF0ZXMgPSB1dGlscy5wYXJzZURhdGVBcnJheSh1dGlscy5mbGF0dGVuKGRhdGVzKSk7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHJhdGUsIHZhbHVlcywgZGF0ZXMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gMDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSB2YWx1ZXNbaV0gLyBNYXRoLnBvdygxICsgcmF0ZSwgREFZUyhkYXRlc1tpXSwgZGF0ZXNbMF0pIC8gMzY1KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLllJRUxEID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuWUlFTERESVNDID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuWUlFTERNQVQgPSBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIGV4cG9ydHM7XHJcbiAgICB9KSgpO1xyXG4gICAgXHJcbiAgICBqZXhjZWwubWV0aG9kcy5pbmZvcm1hdGlvbiA9IChmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZXhwb3J0cyA9IHt9O1xyXG4gICAgICAgIGV4cG9ydHMuQ0VMTCA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkVSUk9SID0ge307XHJcbiAgICAgICAgZXhwb3J0cy5FUlJPUi5UWVBFID0gZnVuY3Rpb24oZXJyb3JfdmFsKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZXJyb3JfdmFsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIGVycm9yLm5pbDogcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICBjYXNlIGVycm9yLmRpdjA6IHJldHVybiAyO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBlcnJvci52YWx1ZTogcmV0dXJuIDM7XHJcbiAgICAgICAgICAgICAgICBjYXNlIGVycm9yLnJlZjogcmV0dXJuIDQ7XHJcbiAgICAgICAgICAgICAgICBjYXNlIGVycm9yLm5hbWU6IHJldHVybiA1O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBlcnJvci5udW06IHJldHVybiA2O1xyXG4gICAgICAgICAgICAgICAgY2FzZSBlcnJvci5uYTogcmV0dXJuIDc7XHJcbiAgICAgICAgICAgICAgICBjYXNlIGVycm9yLmRhdGE6IHJldHVybiA4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBlcnJvci5uYTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JTkZPID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSVNCTEFOSyA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JU0JJTkFSWSA9IGZ1bmN0aW9uIChudW1iZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICgvXlswMV17MSwxMH0kLykudGVzdChudW1iZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLklTRVJSID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChbZXJyb3IudmFsdWUsIGVycm9yLnJlZiwgZXJyb3IuZGl2MCwgZXJyb3IubnVtLCBlcnJvci5uYW1lLCBlcnJvci5uaWxdKS5pbmRleE9mKHZhbHVlKSA+PSAwIHx8XHJcbiAgICAgICAgICAgICAgICAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAoaXNOYU4odmFsdWUpIHx8ICFpc0Zpbml0ZSh2YWx1ZSkpKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JU0VSUk9SID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuSVNFUlIodmFsdWUpIHx8IHZhbHVlID09PSBlcnJvci5uYTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JU0VWRU4gPSBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChNYXRoLmZsb29yKE1hdGguYWJzKG51bWJlcikpICYgMSkgPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8vIFRPRE9cclxuICAgICAgICBleHBvcnRzLklTRk9STVVMQSA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLklTTE9HSUNBTCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSVNOQSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gZXJyb3IubmE7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSVNOT05URVhUID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZih2YWx1ZSkgIT09ICdzdHJpbmcnO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLklTTlVNQkVSID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZih2YWx1ZSkgPT09ICdudW1iZXInICYmICFpc05hTih2YWx1ZSkgJiYgaXNGaW5pdGUodmFsdWUpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLklTT0REID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoTWF0aC5mbG9vcihNYXRoLmFicyhudW1iZXIpKSAmIDEpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLklTUkVGID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSVNURVhUID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZih2YWx1ZSkgPT09ICdzdHJpbmcnO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLk4gPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5JU05VTUJFUih2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuSVNFUlJPUih2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5OQSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXJyb3IubmE7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuU0hFRVQgPSBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5TSEVFVFMgPSBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5UWVBFID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuSVNOVU1CRVIodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5JU1RFWFQodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5JU0xPR0lDQUwodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5JU0VSUk9SKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE2O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDY0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBleHBvcnRzO1xyXG4gICAgfSkoKTtcclxuICAgIFxyXG4gICAgamV4Y2VsLm1ldGhvZHMubG9naWNhbCA9IChmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZXhwb3J0cyA9IHt9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5BTkQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB1dGlscy5mbGF0dGVuKGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICghYXJnc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQ0hPT1NFID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm5hO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gYXJndW1lbnRzWzBdO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPCAxIHx8IGluZGV4ID4gMjU0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IGluZGV4ICsgMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50c1tpbmRleF07XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuRkFMU0UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLklGID0gZnVuY3Rpb24odGVzdCwgdGhlbl92YWx1ZSwgb3RoZXJ3aXNlX3ZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXN0ID8gdGhlbl92YWx1ZSA6IG90aGVyd2lzZV92YWx1ZTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5JRkVSUk9SID0gZnVuY3Rpb24odmFsdWUsIHZhbHVlSWZFcnJvcikge1xyXG4gICAgICAgICAgICBpZiAoSVNFUlJPUih2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZUlmRXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLklGTkEgPSBmdW5jdGlvbih2YWx1ZSwgdmFsdWVfaWZfbmEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09PSBlcnJvci5uYSA/IHZhbHVlX2lmX25hIDogdmFsdWU7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuTk9UID0gZnVuY3Rpb24obG9naWNhbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gIWxvZ2ljYWw7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuT1IgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB1dGlscy5mbGF0dGVuKGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJnc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5UUlVFID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlhPUiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgYXJncyA9IHV0aWxzLmZsYXR0ZW4oYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFyZ3NbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gKE1hdGguZmxvb3IoTWF0aC5hYnMocmVzdWx0KSkgJiAxKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5TV0lUQ0ggPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFZhbHVlID0gYXJndW1lbnRzWzBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ2MgPSBhcmd1bWVudHMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgIHZhciBzd2l0Y2hDb3VudCA9IE1hdGguZmxvb3IoYXJnYyAvIDIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN3aXRjaFNhdGlzZmllZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRDbGF1c2UgPSBhcmdjICUgMiA9PT0gMCA/IG51bGwgOiBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoc3dpdGNoQ291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgc3dpdGNoQ291bnQ7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFZhbHVlID09PSBhcmd1bWVudHNbaW5kZXggKiAyICsgMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBhcmd1bWVudHNbaW5kZXggKiAyICsgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2F0aXNmaWVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCFzd2l0Y2hTYXRpc2ZpZWQgJiYgZGVmYXVsdENsYXVzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRlZmF1bHRDbGF1c2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gZXhwb3J0cztcclxuICAgIH0pKCk7XHJcbiAgICBcclxuICAgIGpleGNlbC5tZXRob2RzLm1hdGggPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGV4cG9ydHMgPSB7fTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQUJTID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5hYnModXRpbHMucGFyc2VOdW1iZXIobnVtYmVyKSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQUNPUyA9IGZ1bmN0aW9uKG51bWJlcikge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguYWNvcyhudW1iZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkFDT1NIID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5sb2cobnVtYmVyICsgTWF0aC5zcXJ0KG51bWJlciAqIG51bWJlciAtIDEpKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5BQ09UID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5hdGFuKDEgLyBudW1iZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkFDT1RIID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gMC41ICogTWF0aC5sb2coKG51bWJlciArIDEpIC8gKG51bWJlciAtIDEpKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5BR0dSRUdBVEUgPSBudWxsXHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkFSQUJJQyA9IGZ1bmN0aW9uKHRleHQpIHtcclxuICAgICAgICAgICAgLy8gQ3JlZGl0czogUmFmYT8gS3VrYXdza2lcclxuICAgICAgICAgICAgaWYgKCEvXk0qKD86RD9DezAsM318Q1tNRF0pKD86TD9YezAsM318WFtDTF0pKD86Vj9JezAsM318SVtYVl0pJC8udGVzdCh0ZXh0KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByID0gMDtcclxuICAgICAgICAgICAgdGV4dC5yZXBsYWNlKC9bTURMVl18Q1tNRF0/fFhbQ0xdP3xJW1hWXT8vZywgZnVuY3Rpb24oaSkge1xyXG4gICAgICAgICAgICAgICAgciArPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTTogMTAwMCxcclxuICAgICAgICAgICAgICAgICAgICBDTTogOTAwLFxyXG4gICAgICAgICAgICAgICAgICAgIEQ6IDUwMCxcclxuICAgICAgICAgICAgICAgICAgICBDRDogNDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIEM6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICBYQzogOTAsXHJcbiAgICAgICAgICAgICAgICAgICAgTDogNTAsXHJcbiAgICAgICAgICAgICAgICAgICAgWEw6IDQwLFxyXG4gICAgICAgICAgICAgICAgICAgIFg6IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgIElYOiA5LFxyXG4gICAgICAgICAgICAgICAgICAgIFY6IDUsXHJcbiAgICAgICAgICAgICAgICAgICAgSVY6IDQsXHJcbiAgICAgICAgICAgICAgICAgICAgSTogMVxyXG4gICAgICAgICAgICAgICAgfVtpXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkFTSU4gPSBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgICAgICAgbnVtYmVyID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyKTtcclxuICAgICAgICAgICAgaWYgKG51bWJlciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmFzaW4obnVtYmVyKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5BU0lOSCA9IGZ1bmN0aW9uKG51bWJlcikge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubG9nKG51bWJlciArIE1hdGguc3FydChudW1iZXIgKiBudW1iZXIgKyAxKSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQVRBTiA9IGZ1bmN0aW9uKG51bWJlcikge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguYXRhbihudW1iZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkFUQU4yID0gZnVuY3Rpb24obnVtYmVyX3gsIG51bWJlcl95KSB7XHJcbiAgICAgICAgICAgIG51bWJlcl94ID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyX3gpO1xyXG4gICAgICAgICAgICBudW1iZXJfeSA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcl95KTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IobnVtYmVyX3gsIG51bWJlcl95KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmF0YW4yKG51bWJlcl94LCBudW1iZXJfeSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQVRBTkggPSBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgICAgICAgbnVtYmVyID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyKTtcclxuICAgICAgICAgICAgaWYgKG51bWJlciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmxvZygoMSArIG51bWJlcikgLyAoMSAtIG51bWJlcikpIC8gMjtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5CQVNFID0gZnVuY3Rpb24obnVtYmVyLCByYWRpeCwgbWluX2xlbmd0aCkge1xyXG4gICAgICAgICAgICBtaW5fbGVuZ3RoID0gbWluX2xlbmd0aCB8fCAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIHJhZGl4ID0gdXRpbHMucGFyc2VOdW1iZXIocmFkaXgpO1xyXG4gICAgICAgICAgICBtaW5fbGVuZ3RoID0gdXRpbHMucGFyc2VOdW1iZXIobWluX2xlbmd0aCk7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKG51bWJlciwgcmFkaXgsIG1pbl9sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWluX2xlbmd0aCA9IChtaW5fbGVuZ3RoID09PSB1bmRlZmluZWQpID8gMCA6IG1pbl9sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBudW1iZXIudG9TdHJpbmcocmFkaXgpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5KE1hdGgubWF4KG1pbl9sZW5ndGggKyAxIC0gcmVzdWx0Lmxlbmd0aCwgMCkpLmpvaW4oJzAnKSArIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5DRUlMSU5HID0gZnVuY3Rpb24obnVtYmVyLCBzaWduaWZpY2FuY2UsIG1vZGUpIHtcclxuICAgICAgICAgICAgc2lnbmlmaWNhbmNlID0gKHNpZ25pZmljYW5jZSA9PT0gdW5kZWZpbmVkKSA/IDEgOiBzaWduaWZpY2FuY2U7XHJcbiAgICAgICAgICAgIG1vZGUgPSAobW9kZSA9PT0gdW5kZWZpbmVkKSA/IDAgOiBtb2RlO1xyXG4gICAgXHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIHNpZ25pZmljYW5jZSA9IHV0aWxzLnBhcnNlTnVtYmVyKHNpZ25pZmljYW5jZSk7XHJcbiAgICAgICAgICAgIG1vZGUgPSB1dGlscy5wYXJzZU51bWJlcihtb2RlKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IobnVtYmVyLCBzaWduaWZpY2FuY2UsIG1vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHNpZ25pZmljYW5jZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBzaWduaWZpY2FuY2UgPSBNYXRoLmFicyhzaWduaWZpY2FuY2UpO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyID49IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwobnVtYmVyIC8gc2lnbmlmaWNhbmNlKSAqIHNpZ25pZmljYW5jZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xICogTWF0aC5mbG9vcihNYXRoLmFicyhudW1iZXIpIC8gc2lnbmlmaWNhbmNlKSAqIHNpZ25pZmljYW5jZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xICogTWF0aC5jZWlsKE1hdGguYWJzKG51bWJlcikgLyBzaWduaWZpY2FuY2UpICogc2lnbmlmaWNhbmNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQ0VJTElORy5NQVRIID0gZXhwb3J0cy5DRUlMSU5HO1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5DRUlMSU5HLlBSRUNJU0UgPSBleHBvcnRzLkNFSUxJTkc7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkNPTUJJTiA9IGZ1bmN0aW9uKG51bWJlciwgbnVtYmVyX2Nob3Nlbikge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBudW1iZXJfY2hvc2VuID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyX2Nob3Nlbik7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKG51bWJlciwgbnVtYmVyX2Nob3NlbikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5GQUNUKG51bWJlcikgLyAoZXhwb3J0cy5GQUNUKG51bWJlcl9jaG9zZW4pICogZXhwb3J0cy5GQUNUKG51bWJlciAtIG51bWJlcl9jaG9zZW4pKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5DT01CSU5BID0gZnVuY3Rpb24obnVtYmVyLCBudW1iZXJfY2hvc2VuKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIG51bWJlcl9jaG9zZW4gPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXJfY2hvc2VuKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IobnVtYmVyLCBudW1iZXJfY2hvc2VuKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAobnVtYmVyID09PSAwICYmIG51bWJlcl9jaG9zZW4gPT09IDApID8gMSA6IGV4cG9ydHMuQ09NQklOKG51bWJlciArIG51bWJlcl9jaG9zZW4gLSAxLCBudW1iZXIgLSAxKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5DT1MgPSBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgICAgICAgbnVtYmVyID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyKTtcclxuICAgICAgICAgICAgaWYgKG51bWJlciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmNvcyhudW1iZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkNPU0ggPSBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgICAgICAgbnVtYmVyID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyKTtcclxuICAgICAgICAgICAgaWYgKG51bWJlciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAoTWF0aC5leHAobnVtYmVyKSArIE1hdGguZXhwKC1udW1iZXIpKSAvIDI7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQ09UID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gMSAvIE1hdGgudGFuKG51bWJlcik7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQ09USCA9IGZ1bmN0aW9uKG51bWJlcikge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGUyID0gTWF0aC5leHAoMiAqIG51bWJlcik7XHJcbiAgICAgICAgICAgIHJldHVybiAoZTIgKyAxKSAvIChlMiAtIDEpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkNTQyA9IGZ1bmN0aW9uKG51bWJlcikge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIDEgLyBNYXRoLnNpbihudW1iZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkNTQ0ggPSBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgICAgICAgbnVtYmVyID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyKTtcclxuICAgICAgICAgICAgaWYgKG51bWJlciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAyIC8gKE1hdGguZXhwKG51bWJlcikgLSBNYXRoLmV4cCgtbnVtYmVyKSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuREVDSU1BTCA9IGZ1bmN0aW9uKG51bWJlciwgcmFkaXgpIHtcclxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludChudW1iZXIsIHJhZGl4KTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5ERUdSRUVTID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVtYmVyICogMTgwIC8gTWF0aC5QSTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5FVkVOID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5DRUlMSU5HKG51bWJlciwgLTIsIC0xKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5FWFAgPSBNYXRoLmV4cDtcclxuICAgIFxyXG4gICAgICAgIHZhciBNRU1PSVpFRF9GQUNUID0gW107XHJcbiAgICAgICAgZXhwb3J0cy5GQUNUID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbiA9IE1hdGguZmxvb3IobnVtYmVyKTtcclxuICAgICAgICAgICAgaWYgKG4gPT09IDAgfHwgbiA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoTUVNT0laRURfRkFDVFtuXSA+IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNRU1PSVpFRF9GQUNUW25dO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgTUVNT0laRURfRkFDVFtuXSA9IGV4cG9ydHMuRkFDVChuIC0gMSkgKiBuO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1FTU9JWkVEX0ZBQ1Rbbl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5GQUNURE9VQkxFID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbiA9IE1hdGguZmxvb3IobnVtYmVyKTtcclxuICAgICAgICAgICAgaWYgKG4gPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbiAqIGV4cG9ydHMuRkFDVERPVUJMRShuIC0gMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5GTE9PUiA9IGZ1bmN0aW9uKG51bWJlciwgc2lnbmlmaWNhbmNlLCBtb2RlKSB7XHJcbiAgICAgICAgICAgIHNpZ25pZmljYW5jZSA9IChzaWduaWZpY2FuY2UgPT09IHVuZGVmaW5lZCkgPyAxIDogc2lnbmlmaWNhbmNlO1xyXG4gICAgICAgICAgICBtb2RlID0gKG1vZGUgPT09IHVuZGVmaW5lZCkgPyAwIDogbW9kZTtcclxuICAgIFxyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBzaWduaWZpY2FuY2UgPSB1dGlscy5wYXJzZU51bWJlcihzaWduaWZpY2FuY2UpO1xyXG4gICAgICAgICAgICBtb2RlID0gdXRpbHMucGFyc2VOdW1iZXIobW9kZSk7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKG51bWJlciwgc2lnbmlmaWNhbmNlLCBtb2RlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzaWduaWZpY2FuY2UgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgc2lnbmlmaWNhbmNlID0gTWF0aC5hYnMoc2lnbmlmaWNhbmNlKTtcclxuICAgICAgICAgICAgaWYgKG51bWJlciA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihudW1iZXIgLyBzaWduaWZpY2FuY2UpICogc2lnbmlmaWNhbmNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEgKiBNYXRoLmNlaWwoTWF0aC5hYnMobnVtYmVyKSAvIHNpZ25pZmljYW5jZSkgKiBzaWduaWZpY2FuY2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMSAqIE1hdGguZmxvb3IoTWF0aC5hYnMobnVtYmVyKSAvIHNpZ25pZmljYW5jZSkgKiBzaWduaWZpY2FuY2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5GTE9PUi5NQVRIID0gZXhwb3J0cy5GTE9PUjtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuR0NEID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSU5UID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihudW1iZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkxDTSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBDcmVkaXRzOiBKb25hcyBSYW9uaSBTb2FyZXMgU2lsdmFcclxuICAgICAgICAgICAgdmFyIG8gPSB1dGlscy5wYXJzZU51bWJlckFycmF5KHV0aWxzLmZsYXR0ZW4oYXJndW1lbnRzKSk7XHJcbiAgICAgICAgICAgIGlmIChvIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAodmFyIGksIGosIG4sIGQsIHIgPSAxO1xyXG4gICAgICAgICAgICAgICAgKG4gPSBvLnBvcCgpKSAhPT0gdW5kZWZpbmVkOykge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4gJSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDMsIGogPSBNYXRoLmZsb29yKE1hdGguc3FydChuKSk7IGkgPD0gaiAmJiBuICUgaTsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9lbXB0eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQgPSAoaSA8PSBqKSA/IGkgOiBuO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKG4gLz0gZCwgciAqPSBkLCBpID0gby5sZW5ndGg7IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChvWy0taV0gJSBkKSA9PT0gMCAmJiAob1tpXSAvPSBkKSA9PT0gMSAmJiBvLnNwbGljZShpLCAxKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2VtcHR5XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkxOID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5sb2cobnVtYmVyKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5MT0cgPSBmdW5jdGlvbihudW1iZXIsIGJhc2UpIHtcclxuICAgICAgICAgICAgbnVtYmVyID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyKTtcclxuICAgICAgICAgICAgYmFzZSA9IChiYXNlID09PSB1bmRlZmluZWQpID8gMTAgOiB1dGlscy5wYXJzZU51bWJlcihiYXNlKTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihudW1iZXIsIGJhc2UpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5sb2cobnVtYmVyKSAvIE1hdGgubG9nKGJhc2UpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkxPRzEwID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5sb2cobnVtYmVyKSAvIE1hdGgubG9nKDEwKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5NREVURVJNID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuTUlOVkVSU0UgPSBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5NTVVMVCA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLk1PRCA9IGZ1bmN0aW9uKGRpdmlkZW5kLCBkaXZpc29yKSB7XHJcbiAgICAgICAgICAgIGRpdmlkZW5kID0gdXRpbHMucGFyc2VOdW1iZXIoZGl2aWRlbmQpO1xyXG4gICAgICAgICAgICBkaXZpc29yID0gdXRpbHMucGFyc2VOdW1iZXIoZGl2aXNvcik7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKGRpdmlkZW5kLCBkaXZpc29yKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkaXZpc29yID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IuZGl2MDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbW9kdWx1cyA9IE1hdGguYWJzKGRpdmlkZW5kICUgZGl2aXNvcik7XHJcbiAgICAgICAgICAgIHJldHVybiAoZGl2aXNvciA+IDApID8gbW9kdWx1cyA6IC1tb2R1bHVzO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLk1ST1VORCA9IGZ1bmN0aW9uKG51bWJlciwgbXVsdGlwbGUpIHtcclxuICAgICAgICAgICAgbnVtYmVyID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyKTtcclxuICAgICAgICAgICAgbXVsdGlwbGUgPSB1dGlscy5wYXJzZU51bWJlcihtdWx0aXBsZSk7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKG51bWJlciwgbXVsdGlwbGUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG51bWJlciAqIG11bHRpcGxlIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKG51bWJlciAvIG11bHRpcGxlKSAqIG11bHRpcGxlO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLk1VTFRJTk9NSUFMID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBhcmdzID0gdXRpbHMucGFyc2VOdW1iZXJBcnJheSh1dGlscy5mbGF0dGVuKGFyZ3VtZW50cykpO1xyXG4gICAgICAgICAgICBpZiAoYXJncyBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJncztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc3VtID0gMDtcclxuICAgICAgICAgICAgdmFyIGRpdmlzb3IgPSAxO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHN1bSArPSBhcmdzW2ldO1xyXG4gICAgICAgICAgICAgICAgZGl2aXNvciAqPSBleHBvcnRzLkZBQ1QoYXJnc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuRkFDVChzdW0pIC8gZGl2aXNvcjtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5NVU5JVCA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLk9ERCA9IGZ1bmN0aW9uKG51bWJlcikge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHRlbXAgPSBNYXRoLmNlaWwoTWF0aC5hYnMobnVtYmVyKSk7XHJcbiAgICAgICAgICAgIHRlbXAgPSAodGVtcCAmIDEpID8gdGVtcCA6IHRlbXAgKyAxO1xyXG4gICAgICAgICAgICByZXR1cm4gKG51bWJlciA+IDApID8gdGVtcCA6IC10ZW1wO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlBJID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLlBJO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlBPV0VSID0gZnVuY3Rpb24obnVtYmVyLCBwb3dlcikge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBwb3dlciA9IHV0aWxzLnBhcnNlTnVtYmVyKHBvd2VyKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IobnVtYmVyLCBwb3dlcikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gTWF0aC5wb3cobnVtYmVyLCBwb3dlcik7XHJcbiAgICAgICAgICAgIGlmIChpc05hTihyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5QUk9EVUNUID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBhcmdzID0gdXRpbHMucGFyc2VOdW1iZXJBcnJheSh1dGlscy5mbGF0dGVuKGFyZ3VtZW50cykpO1xyXG4gICAgICAgICAgICBpZiAoYXJncyBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJncztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gMTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgKj0gYXJnc1tpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlFVT1RJRU5UID0gZnVuY3Rpb24obnVtZXJhdG9yLCBkZW5vbWluYXRvcikge1xyXG4gICAgICAgICAgICBudW1lcmF0b3IgPSB1dGlscy5wYXJzZU51bWJlcihudW1lcmF0b3IpO1xyXG4gICAgICAgICAgICBkZW5vbWluYXRvciA9IHV0aWxzLnBhcnNlTnVtYmVyKGRlbm9taW5hdG9yKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IobnVtZXJhdG9yLCBkZW5vbWluYXRvcikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQobnVtZXJhdG9yIC8gZGVub21pbmF0b3IsIDEwKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5SQURJQU5TID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVtYmVyICogTWF0aC5QSSAvIDE4MDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5SQU5EID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlJBTkRCRVRXRUVOID0gZnVuY3Rpb24oYm90dG9tLCB0b3ApIHtcclxuICAgICAgICAgICAgYm90dG9tID0gdXRpbHMucGFyc2VOdW1iZXIoYm90dG9tKTtcclxuICAgICAgICAgICAgdG9wID0gdXRpbHMucGFyc2VOdW1iZXIodG9wKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoYm90dG9tLCB0b3ApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQ3JlYXRpdmUgQ29tbW9ucyBBdHRyaWJ1dGlvbiAzLjAgTGljZW5zZVxyXG4gICAgICAgICAgICAvLyBDb3B5cmlnaHQgKGMpIDIwMTIgZXFjb2RlXHJcbiAgICAgICAgICAgIHJldHVybiBib3R0b20gKyBNYXRoLmNlaWwoKHRvcCAtIGJvdHRvbSArIDEpICogTWF0aC5yYW5kb20oKSkgLSAxO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlJPTUFOID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuUk9VTkQgPSBmdW5jdGlvbihudW1iZXIsIGRpZ2l0cykge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBkaWdpdHMgPSB1dGlscy5wYXJzZU51bWJlcihkaWdpdHMpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihudW1iZXIsIGRpZ2l0cykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW1iZXIgKiBNYXRoLnBvdygxMCwgZGlnaXRzKSkgLyBNYXRoLnBvdygxMCwgZGlnaXRzKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5ST1VORERPV04gPSBmdW5jdGlvbihudW1iZXIsIGRpZ2l0cykge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBkaWdpdHMgPSB1dGlscy5wYXJzZU51bWJlcihkaWdpdHMpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihudW1iZXIsIGRpZ2l0cykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc2lnbiA9IChudW1iZXIgPiAwKSA/IDEgOiAtMTtcclxuICAgICAgICAgICAgcmV0dXJuIHNpZ24gKiAoTWF0aC5mbG9vcihNYXRoLmFicyhudW1iZXIpICogTWF0aC5wb3coMTAsIGRpZ2l0cykpKSAvIE1hdGgucG93KDEwLCBkaWdpdHMpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlJPVU5EVVAgPSBmdW5jdGlvbihudW1iZXIsIGRpZ2l0cykge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBkaWdpdHMgPSB1dGlscy5wYXJzZU51bWJlcihkaWdpdHMpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihudW1iZXIsIGRpZ2l0cykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc2lnbiA9IChudW1iZXIgPiAwKSA/IDEgOiAtMTtcclxuICAgICAgICAgICAgcmV0dXJuIHNpZ24gKiAoTWF0aC5jZWlsKE1hdGguYWJzKG51bWJlcikgKiBNYXRoLnBvdygxMCwgZGlnaXRzKSkpIC8gTWF0aC5wb3coMTAsIGRpZ2l0cyk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuU0VDID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gMSAvIE1hdGguY29zKG51bWJlcik7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuU0VDSCA9IGZ1bmN0aW9uKG51bWJlcikge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIDIgLyAoTWF0aC5leHAobnVtYmVyKSArIE1hdGguZXhwKC1udW1iZXIpKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5TRVJJRVNTVU0gPSBmdW5jdGlvbih4LCBuLCBtLCBjb2VmZmljaWVudHMpIHtcclxuICAgICAgICAgICAgeCA9IHV0aWxzLnBhcnNlTnVtYmVyKHgpO1xyXG4gICAgICAgICAgICBuID0gdXRpbHMucGFyc2VOdW1iZXIobik7XHJcbiAgICAgICAgICAgIG0gPSB1dGlscy5wYXJzZU51bWJlcihtKTtcclxuICAgICAgICAgICAgY29lZmZpY2llbnRzID0gdXRpbHMucGFyc2VOdW1iZXJBcnJheShjb2VmZmljaWVudHMpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcih4LCBuLCBtLCBjb2VmZmljaWVudHMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNvZWZmaWNpZW50c1swXSAqIE1hdGgucG93KHgsIG4pO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGNvZWZmaWNpZW50c1tpXSAqIE1hdGgucG93KHgsIG4gKyBpICogbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5TSUdOID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobnVtYmVyIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG51bWJlciA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlNJTiA9IGZ1bmN0aW9uKG51bWJlcikge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguc2luKG51bWJlcik7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuU0lOSCA9IGZ1bmN0aW9uKG51bWJlcikge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIChNYXRoLmV4cChudW1iZXIpIC0gTWF0aC5leHAoLW51bWJlcikpIC8gMjtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5TUVJUID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobnVtYmVyIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KG51bWJlcik7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuU1FSVFBJID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KG51bWJlciAqIE1hdGguUEkpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlNVQlRPVEFMID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQUREID0gZnVuY3Rpb24gKG51bTEsIG51bTIpIHtcclxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggIT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5uYTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIG51bTEgPSB1dGlscy5wYXJzZU51bWJlcihudW0xKTtcclxuICAgICAgICAgICAgbnVtMiA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bTIpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihudW0xLCBudW0yKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIG51bTEgKyBudW0yO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLk1JTlVTID0gZnVuY3Rpb24gKG51bTEsIG51bTIpIHtcclxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggIT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5uYTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIG51bTEgPSB1dGlscy5wYXJzZU51bWJlcihudW0xKTtcclxuICAgICAgICAgICAgbnVtMiA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bTIpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihudW0xLCBudW0yKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIG51bTEgLSBudW0yO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkRJVklERSA9IGZ1bmN0aW9uIChkaXZpZGVuZCwgZGl2aXNvcikge1xyXG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAhPT0gMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm5hO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgZGl2aWRlbmQgPSB1dGlscy5wYXJzZU51bWJlcihkaXZpZGVuZCk7XHJcbiAgICAgICAgICAgIGRpdmlzb3IgPSB1dGlscy5wYXJzZU51bWJlcihkaXZpc29yKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoZGl2aWRlbmQsIGRpdmlzb3IpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoZGl2aXNvciA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLmRpdjA7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gZGl2aWRlbmQgLyBkaXZpc29yO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLk1VTFRJUExZID0gZnVuY3Rpb24gKGZhY3RvcjEsIGZhY3RvcjIpIHtcclxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggIT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5uYTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGZhY3RvcjEgPSB1dGlscy5wYXJzZU51bWJlcihmYWN0b3IxKTtcclxuICAgICAgICAgICAgZmFjdG9yMiA9IHV0aWxzLnBhcnNlTnVtYmVyKGZhY3RvcjIpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihmYWN0b3IxLCBmYWN0b3IyKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGZhY3RvcjEgKiBmYWN0b3IyO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkdURSA9IGZ1bmN0aW9uIChudW0xLCBudW0yKSB7XHJcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICE9PSAyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubmE7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBudW0xID0gdXRpbHMucGFyc2VOdW1iZXIobnVtMSk7XHJcbiAgICAgICAgICAgIG51bTIgPSB1dGlscy5wYXJzZU51bWJlcihudW0yKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IobnVtMSwgbnVtMikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5lcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBudW0xID49IG51bTI7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuTFQgPSBmdW5jdGlvbiAobnVtMSwgbnVtMikge1xyXG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAhPT0gMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm5hO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgbnVtMSA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bTEpO1xyXG4gICAgICAgICAgICBudW0yID0gdXRpbHMucGFyc2VOdW1iZXIobnVtMik7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKG51bTEsIG51bTIpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IuZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gbnVtMSA8IG51bTI7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuTFRFID0gZnVuY3Rpb24gKG51bTEsIG51bTIpIHtcclxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggIT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5uYTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIG51bTEgPSB1dGlscy5wYXJzZU51bWJlcihudW0xKTtcclxuICAgICAgICAgICAgbnVtMiA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bTIpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihudW0xLCBudW0yKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLmVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIG51bTEgPD0gbnVtMjtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5FUSA9IGZ1bmN0aW9uICh2YWx1ZTEsIHZhbHVlMikge1xyXG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAhPT0gMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm5hO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlMSA9PT0gdmFsdWUyO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLk5FID0gZnVuY3Rpb24gKHZhbHVlMSwgdmFsdWUyKSB7XHJcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICE9PSAyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubmE7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUxICE9PSB2YWx1ZTI7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuUE9XID0gZnVuY3Rpb24gKGJhc2UsIGV4cG9uZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICE9PSAyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubmE7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBiYXNlID0gdXRpbHMucGFyc2VOdW1iZXIoYmFzZSk7XHJcbiAgICAgICAgICAgIGV4cG9uZW50ID0gdXRpbHMucGFyc2VOdW1iZXIoZXhwb25lbnQpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihiYXNlLCBleHBvbmVudCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5lcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLlBPV0VSKGJhc2UsIGV4cG9uZW50KTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5TVU0gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBhcmdzS2V5cyA9IE9iamVjdC5rZXlzKGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJnc0tleXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbHQgPSBhcmd1bWVudHNbYXJnc0tleXNbaV1dO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbHQgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGVsdDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGVsdCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyc2VkID0gcGFyc2VGbG9hdChlbHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICFpc05hTihwYXJzZWQpICYmIChyZXN1bHQgKz0gcGFyc2VkKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShlbHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGV4cG9ydHMuU1VNLmFwcGx5KG51bGwsIGVsdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5TVU1JRiA9IGZ1bmN0aW9uKHJhbmdlLCBjcml0ZXJpYSkge1xyXG4gICAgICAgICAgICByYW5nZSA9IHV0aWxzLnBhcnNlTnVtYmVyQXJyYXkodXRpbHMuZmxhdHRlbihyYW5nZSkpO1xyXG4gICAgICAgICAgICBpZiAocmFuZ2UgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhbmdlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gKGV2YWwocmFuZ2VbaV0gKyBjcml0ZXJpYSkpID8gcmFuZ2VbaV0gOiAwOyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlNVTUlGUyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgYXJncyA9IHV0aWxzLmFyZ3NUb0FycmF5KGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHV0aWxzLnBhcnNlTnVtYmVyQXJyYXkodXRpbHMuZmxhdHRlbihhcmdzLnNoaWZ0KCkpKTtcclxuICAgICAgICAgICAgaWYgKHJhbmdlIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByYW5nZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgY3JpdGVyaWEgPSBhcmdzO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHZhciBuX3JhbmdlX2VsZW1lbnRzID0gcmFuZ2UubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgbl9jcml0ZXJpYXMgPSBjcml0ZXJpYS5sZW5ndGg7XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbl9yYW5nZV9lbGVtZW50czsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWwgPSByYW5nZVtpXTtcclxuICAgICAgICAgICAgICAgIHZhciBjb25kaXRpb24gPSAnJztcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgbl9jcml0ZXJpYXM7IGMrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbiArPSBlbCArIGNyaXRlcmlhW2NdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjICE9PSBuX2NyaXRlcmlhcyAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uICs9ICcmJic7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGV2YWwoY29uZGl0aW9uKSkgeyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gZWw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5TVU1QUk9EVUNUID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuU1VNU1EgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIG51bWJlcnMgPSB1dGlscy5wYXJzZU51bWJlckFycmF5KHV0aWxzLmZsYXR0ZW4oYXJndW1lbnRzKSk7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXJzIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXJzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAwO1xyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gbnVtYmVycy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSAoSVNOVU1CRVIobnVtYmVyc1tpXSkpID8gbnVtYmVyc1tpXSAqIG51bWJlcnNbaV0gOiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuU1VNWDJNWTIgPSBmdW5jdGlvbihhcnJheV94LCBhcnJheV95KSB7XHJcbiAgICAgICAgICAgIGFycmF5X3ggPSB1dGlscy5wYXJzZU51bWJlckFycmF5KHV0aWxzLmZsYXR0ZW4oYXJyYXlfeCkpO1xyXG4gICAgICAgICAgICBhcnJheV95ID0gdXRpbHMucGFyc2VOdW1iZXJBcnJheSh1dGlscy5mbGF0dGVuKGFycmF5X3kpKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoYXJyYXlfeCwgYXJyYXlfeSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gMDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheV94Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gYXJyYXlfeFtpXSAqIGFycmF5X3hbaV0gLSBhcnJheV95W2ldICogYXJyYXlfeVtpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlNVTVgyUFkyID0gZnVuY3Rpb24oYXJyYXlfeCwgYXJyYXlfeSkge1xyXG4gICAgICAgICAgICBhcnJheV94ID0gdXRpbHMucGFyc2VOdW1iZXJBcnJheSh1dGlscy5mbGF0dGVuKGFycmF5X3gpKTtcclxuICAgICAgICAgICAgYXJyYXlfeSA9IHV0aWxzLnBhcnNlTnVtYmVyQXJyYXkodXRpbHMuZmxhdHRlbihhcnJheV95KSk7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKGFycmF5X3gsIGFycmF5X3kpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IDA7XHJcbiAgICAgICAgICAgIGFycmF5X3ggPSB1dGlscy5wYXJzZU51bWJlckFycmF5KHV0aWxzLmZsYXR0ZW4oYXJyYXlfeCkpO1xyXG4gICAgICAgICAgICBhcnJheV95ID0gdXRpbHMucGFyc2VOdW1iZXJBcnJheSh1dGlscy5mbGF0dGVuKGFycmF5X3kpKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheV94Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gYXJyYXlfeFtpXSAqIGFycmF5X3hbaV0gKyBhcnJheV95W2ldICogYXJyYXlfeVtpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlNVTVhNWTIgPSBmdW5jdGlvbihhcnJheV94LCBhcnJheV95KSB7XHJcbiAgICAgICAgICAgIGFycmF5X3ggPSB1dGlscy5wYXJzZU51bWJlckFycmF5KHV0aWxzLmZsYXR0ZW4oYXJyYXlfeCkpO1xyXG4gICAgICAgICAgICBhcnJheV95ID0gdXRpbHMucGFyc2VOdW1iZXJBcnJheSh1dGlscy5mbGF0dGVuKGFycmF5X3kpKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoYXJyYXlfeCwgYXJyYXlfeSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gMDtcclxuICAgICAgICAgICAgYXJyYXlfeCA9IHV0aWxzLmZsYXR0ZW4oYXJyYXlfeCk7XHJcbiAgICAgICAgICAgIGFycmF5X3kgPSB1dGlscy5mbGF0dGVuKGFycmF5X3kpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5X3gubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBNYXRoLnBvdyhhcnJheV94W2ldIC0gYXJyYXlfeVtpXSwgMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5UQU4gPSBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgICAgICAgbnVtYmVyID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyKTtcclxuICAgICAgICAgICAgaWYgKG51bWJlciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnRhbihudW1iZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlRBTkggPSBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgICAgICAgbnVtYmVyID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyKTtcclxuICAgICAgICAgICAgaWYgKG51bWJlciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBlMiA9IE1hdGguZXhwKDIgKiBudW1iZXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gKGUyIC0gMSkgLyAoZTIgKyAxKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5UUlVOQyA9IGZ1bmN0aW9uKG51bWJlciwgZGlnaXRzKSB7XHJcbiAgICAgICAgICAgIGRpZ2l0cyA9IChkaWdpdHMgPT09IHVuZGVmaW5lZCkgPyAwIDogZGlnaXRzO1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBkaWdpdHMgPSB1dGlscy5wYXJzZU51bWJlcihkaWdpdHMpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihudW1iZXIsIGRpZ2l0cykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc2lnbiA9IChudW1iZXIgPiAwKSA/IDEgOiAtMTtcclxuICAgICAgICAgICAgcmV0dXJuIHNpZ24gKiAoTWF0aC5mbG9vcihNYXRoLmFicyhudW1iZXIpICogTWF0aC5wb3coMTAsIGRpZ2l0cykpKSAvIE1hdGgucG93KDEwLCBkaWdpdHMpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gZXhwb3J0cztcclxuICAgIH0pKCk7XHJcbiAgICBcclxuICAgIGpleGNlbC5tZXRob2RzLm1pc2MgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGV4cG9ydHMgPSB7fTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuVU5JUVVFID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaGFzRWxlbWVudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhcmd1bWVudHNbaV07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlJ3ZlIGFscmVhZHkgc2VlbiB0aGlzIGVsZW1lbnQuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJlc3VsdC5sZW5ndGg7ICsraikge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc0VsZW1lbnQgPSByZXN1bHRbal0gPT09IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0VsZW1lbnQpIHsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgZGlkIG5vdCBmaW5kIGl0LCBhZGQgaXQgdG8gdGhlIHJlc3VsdC5cclxuICAgICAgICAgICAgICAgIGlmICghaGFzRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuRkxBVFRFTiA9IHV0aWxzLmZsYXR0ZW47XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkFSR1MyQVJSQVkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlJFRkVSRU5DRSA9IGZ1bmN0aW9uIChjb250ZXh0LCByZWZlcmVuY2UpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gcmVmZXJlbmNlLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gY29udGV4dDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGVwID0gcGF0aFtpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RlcFtzdGVwLmxlbmd0aCAtIDFdID09PSAnXScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wZW5pbmcgPSBzdGVwLmluZGV4T2YoJ1snKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gc3RlcC5zdWJzdHJpbmcob3BlbmluZyArIDEsIHN0ZXAubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdFtzdGVwLnN1YnN0cmluZygwLCBvcGVuaW5nKV1baW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdFtzdGVwXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge31cclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5KT0lOID0gZnVuY3Rpb24gKGFycmF5LCBzZXBhcmF0b3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFycmF5LmpvaW4oc2VwYXJhdG9yKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5OVU1CRVJTID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcG9zc2libGVOdW1iZXJzID0gdXRpbHMuZmxhdHRlbihhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICByZXR1cm4gcG9zc2libGVOdW1iZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZWwgPT09ICdudW1iZXInO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5OVU1FUkFMID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBleHBvcnRzO1xyXG4gICAgfSkoKTtcclxuICAgIFxyXG4gICAgamV4Y2VsLm1ldGhvZHMudGV4dCA9IChmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZXhwb3J0cyA9IHt9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5BU0MgPSBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5CQUhUVEVYVCA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkNIQVIgPSBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgICAgICAgbnVtYmVyID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyKTtcclxuICAgICAgICAgICAgaWYgKG51bWJlciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKG51bWJlcik7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQ0xFQU4gPSBmdW5jdGlvbih0ZXh0KSB7XHJcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0IHx8ICcnO1xyXG4gICAgICAgICAgICB2YXIgcmUgPSAvW1xcMC1cXHgxRl0vZztcclxuICAgICAgICAgICAgcmV0dXJuIHRleHQucmVwbGFjZShyZSwgXCJcIik7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQ09ERSA9IGZ1bmN0aW9uKHRleHQpIHtcclxuICAgICAgICAgICAgdGV4dCA9IHRleHQgfHwgJyc7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0LmNoYXJDb2RlQXQoMCk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQ09OQ0FURU5BVEUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB1dGlscy5mbGF0dGVuKGFyZ3VtZW50cyk7XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIHRydWVGb3VuZCA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlICgodHJ1ZUZvdW5kID0gYXJncy5pbmRleE9mKHRydWUpKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBhcmdzW3RydWVGb3VuZF0gPSAnVFJVRSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgZmFsc2VGb3VuZCA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlICgoZmFsc2VGb3VuZCA9IGFyZ3MuaW5kZXhPZihmYWxzZSkpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIGFyZ3NbZmFsc2VGb3VuZF0gPSAnRkFMU0UnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGFyZ3Muam9pbignJyk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuREJDUyA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkRPTExBUiA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkVYQUNUID0gZnVuY3Rpb24odGV4dDEsIHRleHQyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0MSA9PT0gdGV4dDI7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuRklORCA9IGZ1bmN0aW9uKGZpbmRfdGV4dCwgd2l0aGluX3RleHQsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gKHBvc2l0aW9uID09PSB1bmRlZmluZWQpID8gMCA6IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICByZXR1cm4gd2l0aGluX3RleHQgPyB3aXRoaW5fdGV4dC5pbmRleE9mKGZpbmRfdGV4dCwgcG9zaXRpb24gLSAxKSArIDEgOiBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkZJWEVEID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuSFRNTDJURVhUID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAnJztcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChmdW5jdGlvbiAobGluZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnXFxuJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gKGxpbmUucmVwbGFjZSgvPCg/Oi58XFxuKSo/Pi9nbSwgJycpKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWUucmVwbGFjZSgvPCg/Oi58XFxuKSo/Pi9nbSwgJycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5MRUZUID0gZnVuY3Rpb24odGV4dCwgbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IChudW1iZXIgPT09IHVuZGVmaW5lZCkgPyAxIDogbnVtYmVyO1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyIGluc3RhbmNlb2YgRXJyb3IgfHwgdHlwZW9mIHRleHQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRleHQgPyB0ZXh0LnN1YnN0cmluZygwLCBudW1iZXIpIDogbnVsbDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5MRU4gPSBmdW5jdGlvbih0ZXh0KSB7XHJcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IuZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRleHQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dCA/IHRleHQubGVuZ3RoIDogMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh0ZXh0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRleHQubGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkxPV0VSID0gZnVuY3Rpb24odGV4dCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRleHQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRleHQgPyB0ZXh0LnRvTG93ZXJDYXNlKCkgOiB0ZXh0O1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLk1JRCA9IGZ1bmN0aW9uKHRleHQsIHN0YXJ0LCBudW1iZXIpIHtcclxuICAgICAgICAgICAgc3RhcnQgPSB1dGlscy5wYXJzZU51bWJlcihzdGFydCk7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHN0YXJ0LCBudW1iZXIpIHx8IHR5cGVvZiB0ZXh0ICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHZhciBiZWdpbiA9IHN0YXJ0IC0gMTtcclxuICAgICAgICAgICAgdmFyIGVuZCA9IGJlZ2luICsgbnVtYmVyO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0LnN1YnN0cmluZyhiZWdpbiwgZW5kKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5OVU1CRVJWQUxVRSA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlBST05FVElDID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuUFJPUEVSID0gZnVuY3Rpb24odGV4dCkge1xyXG4gICAgICAgICAgICBpZiAodGV4dCA9PT0gdW5kZWZpbmVkIHx8IHRleHQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRleHQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHRleHQgPSAnVFJVRSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRleHQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0ID0gJ0ZBTFNFJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaXNOYU4odGV4dCkgJiYgdHlwZW9mIHRleHQgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXh0ID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgdGV4dCA9ICcnICsgdGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoL1xcd1xcUyovZywgZnVuY3Rpb24odHh0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHh0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdHh0LnN1YnN0cigxKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5SRUdFWEVYVFJBQ1QgPSBmdW5jdGlvbiAodGV4dCwgcmVndWxhcl9leHByZXNzaW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IHRleHQubWF0Y2gobmV3IFJlZ0V4cChyZWd1bGFyX2V4cHJlc3Npb24pKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoID8gKG1hdGNoW21hdGNoLmxlbmd0aCA+IDEgPyBtYXRjaC5sZW5ndGggLSAxIDogMF0pIDogbnVsbDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5SRUdFWE1BVENIID0gZnVuY3Rpb24gKHRleHQsIHJlZ3VsYXJfZXhwcmVzc2lvbiwgZnVsbCkge1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSB0ZXh0Lm1hdGNoKG5ldyBSZWdFeHAocmVndWxhcl9leHByZXNzaW9uKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmdWxsID8gbWF0Y2ggOiAhIW1hdGNoO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlJFR0VYUkVQTEFDRSA9IGZ1bmN0aW9uICh0ZXh0LCByZWd1bGFyX2V4cHJlc3Npb24sIHJlcGxhY2VtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UobmV3IFJlZ0V4cChyZWd1bGFyX2V4cHJlc3Npb24pLCByZXBsYWNlbWVudCk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuUkVQTEFDRSA9IGZ1bmN0aW9uKHRleHQsIHBvc2l0aW9uLCBsZW5ndGgsIG5ld190ZXh0KSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gdXRpbHMucGFyc2VOdW1iZXIocG9zaXRpb24pO1xyXG4gICAgICAgICAgICBsZW5ndGggPSB1dGlscy5wYXJzZU51bWJlcihsZW5ndGgpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihwb3NpdGlvbiwgbGVuZ3RoKSB8fFxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIHRleHQgIT09ICdzdHJpbmcnIHx8XHJcbiAgICAgICAgICAgICAgICB0eXBlb2YgbmV3X3RleHQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRleHQuc3Vic3RyKDAsIHBvc2l0aW9uIC0gMSkgKyBuZXdfdGV4dCArIHRleHQuc3Vic3RyKHBvc2l0aW9uIC0gMSArIGxlbmd0aCk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuUkVQVCA9IGZ1bmN0aW9uKHRleHQsIG51bWJlcikge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheShudW1iZXIgKyAxKS5qb2luKHRleHQpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlJJR0hUID0gZnVuY3Rpb24odGV4dCwgbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IChudW1iZXIgPT09IHVuZGVmaW5lZCkgPyAxIDogbnVtYmVyO1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRleHQgPyB0ZXh0LnN1YnN0cmluZyh0ZXh0Lmxlbmd0aCAtIG51bWJlcikgOiBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlNFQVJDSCA9IGZ1bmN0aW9uKGZpbmRfdGV4dCwgd2l0aGluX3RleHQsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBmb3VuZEF0O1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGZpbmRfdGV4dCAhPT0gJ3N0cmluZycgfHwgdHlwZW9mIHdpdGhpbl90ZXh0ICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gKHBvc2l0aW9uID09PSB1bmRlZmluZWQpID8gMCA6IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICBmb3VuZEF0ID0gd2l0aGluX3RleHQudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbmRfdGV4dC50b0xvd2VyQ2FzZSgpLCBwb3NpdGlvbiAtIDEpKzE7XHJcbiAgICAgICAgICAgIHJldHVybiAoZm91bmRBdCA9PT0gMCk/ZXJyb3IudmFsdWU6Zm91bmRBdDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5TUExJVCA9IGZ1bmN0aW9uICh0ZXh0LCBzZXBhcmF0b3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRleHQuc3BsaXQoc2VwYXJhdG9yKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5TVUJTVElUVVRFID0gZnVuY3Rpb24odGV4dCwgb2xkX3RleHQsIG5ld190ZXh0LCBvY2N1cnJlbmNlKSB7XHJcbiAgICAgICAgICAgIGlmICghdGV4dCB8fCAhb2xkX3RleHQgfHwgIW5ld190ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChvY2N1cnJlbmNlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UobmV3IFJlZ0V4cChvbGRfdGV4dCwgJ2cnKSwgbmV3X3RleHQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0ZXh0LmluZGV4T2Yob2xkX3RleHQsIGluZGV4KSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRleHQuaW5kZXhPZihvbGRfdGV4dCwgaW5kZXggKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IG9jY3VycmVuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRleHQuc3Vic3RyaW5nKDAsIGluZGV4KSArIG5ld190ZXh0ICsgdGV4dC5zdWJzdHJpbmcoaW5kZXggKyBvbGRfdGV4dC5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlQgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikgPyB2YWx1ZSA6ICcnO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlRFWFQgPSBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5UUklNID0gZnVuY3Rpb24odGV4dCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRleHQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRleHQucmVwbGFjZSgvICsvZywgJyAnKS50cmltKCk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuVU5JQ0hBUiA9IGV4cG9ydHMuQ0hBUjtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuVU5JQ09ERSA9IGV4cG9ydHMuQ09ERTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuVVBQRVIgPSBmdW5jdGlvbih0ZXh0KSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGV4dCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGV4dC50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlZBTFVFID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBleHBvcnRzO1xyXG4gICAgfSkoKTtcclxuICAgIFxyXG4gICAgamV4Y2VsLm1ldGhvZHMuc3RhdHMgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGV4cG9ydHMgPSB7fTtcclxuICAgIFxyXG4gICAgICAgIHZhciBTUVJUMlBJID0gMi41MDY2MjgyNzQ2MzEwMDAyO1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5BVkVERVYgPSBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5BVkVSQUdFID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHV0aWxzLm51bWJlcnModXRpbHMuZmxhdHRlbihhcmd1bWVudHMpKTtcclxuICAgICAgICAgICAgdmFyIG4gPSByYW5nZS5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBzdW0gPSAwO1xyXG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgc3VtICs9IHJhbmdlW2ldO1xyXG4gICAgICAgICAgICAgICAgY291bnQgKz0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3VtIC8gY291bnQ7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQVZFUkFHRUEgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHJhbmdlID0gdXRpbHMuZmxhdHRlbihhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB2YXIgbiA9IHJhbmdlLmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIHN1bSA9IDA7XHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWwgPSByYW5nZVtpXTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZWwgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VtICs9IGVsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGVsID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VtKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZWwgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzdW0gLyBjb3VudDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5BVkVSQUdFSUYgPSBmdW5jdGlvbihyYW5nZSwgY3JpdGVyaWEsIGF2ZXJhZ2VfcmFuZ2UpIHtcclxuICAgICAgICAgICAgYXZlcmFnZV9yYW5nZSA9IGF2ZXJhZ2VfcmFuZ2UgfHwgcmFuZ2U7XHJcbiAgICAgICAgICAgIHJhbmdlID0gdXRpbHMuZmxhdHRlbihyYW5nZSk7XHJcbiAgICAgICAgICAgIGF2ZXJhZ2VfcmFuZ2UgPSB1dGlscy5wYXJzZU51bWJlckFycmF5KHV0aWxzLmZsYXR0ZW4oYXZlcmFnZV9yYW5nZSkpO1xyXG4gICAgICAgICAgICBpZiAoYXZlcmFnZV9yYW5nZSBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXZlcmFnZV9yYW5nZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgYXZlcmFnZV9jb3VudCA9IDA7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZhbChyYW5nZVtpXSArIGNyaXRlcmlhKSkgeyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gYXZlcmFnZV9yYW5nZVtpXTtcclxuICAgICAgICAgICAgICAgICAgICBhdmVyYWdlX2NvdW50Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCAvIGF2ZXJhZ2VfY291bnQ7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQVZFUkFHRUlGUyA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkNPVU5UID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1dGlscy5udW1iZXJzKHV0aWxzLmZsYXR0ZW4oYXJndW1lbnRzKSkubGVuZ3RoO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkNPVU5UQSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSB1dGlscy5mbGF0dGVuKGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIHJldHVybiByYW5nZS5sZW5ndGggLSBleHBvcnRzLkNPVU5UQkxBTksocmFuZ2UpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLkNPVU5USU4gPSBmdW5jdGlvbiAocmFuZ2UsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmFuZ2VbaV0gPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5DT1VOVEJMQU5LID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHV0aWxzLmZsYXR0ZW4oYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgdmFyIGJsYW5rcyA9IDA7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50O1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gcmFuZ2VbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJsYW5rcysrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBibGFua3M7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQ09VTlRJRiA9IGZ1bmN0aW9uKHJhbmdlLCBjcml0ZXJpYSkge1xyXG4gICAgICAgICAgICByYW5nZSA9IHV0aWxzLmZsYXR0ZW4ocmFuZ2UpO1xyXG4gICAgICAgICAgICBpZiAoIS9bPD49IV0vLnRlc3QoY3JpdGVyaWEpKSB7XHJcbiAgICAgICAgICAgICAgICBjcml0ZXJpYSA9ICc9PVwiJyArIGNyaXRlcmlhICsgJ1wiJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IDA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2UubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmFuZ2VbaV0gIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2YWwocmFuZ2VbaV0gKyBjcml0ZXJpYSkpIHsgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXMrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmFsKCdcIicgKyByYW5nZVtpXSArICdcIicgKyBjcml0ZXJpYSkpIHsgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXMrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXM7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuQ09VTlRJRlMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB1dGlscy5hcmdzVG9BcnJheShhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IG5ldyBBcnJheSh1dGlscy5mbGF0dGVuKGFyZ3NbMF0pLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdWx0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0c1tpXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpICs9IDIpIHtcclxuICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IHV0aWxzLmZsYXR0ZW4oYXJnc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3JpdGVyaWEgPSBhcmdzW2kgKyAxXTtcclxuICAgICAgICAgICAgICAgIGlmICghL1s8Pj0hXS8udGVzdChjcml0ZXJpYSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjcml0ZXJpYSA9ICc9PVwiJyArIGNyaXRlcmlhICsgJ1wiJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmFuZ2UubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJhbmdlW2pdICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzW2pdID0gcmVzdWx0c1tqXSAmJiBldmFsKHJhbmdlW2pdICsgY3JpdGVyaWEpOyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzW2pdID0gcmVzdWx0c1tqXSAmJiBldmFsKCdcIicgKyByYW5nZVtqXSArICdcIicgKyBjcml0ZXJpYSk7IC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gMDtcclxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5DT1VOVFVOSVFVRSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFVOSVFVRS5hcHBseShudWxsLCB1dGlscy5mbGF0dGVuKGFyZ3VtZW50cykpLmxlbmd0aDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5GSVNIRVIgPSBmdW5jdGlvbih4KSB7XHJcbiAgICAgICAgICAgIHggPSB1dGlscy5wYXJzZU51bWJlcih4KTtcclxuICAgICAgICAgICAgaWYgKHggaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubG9nKCgxICsgeCkgLyAoMSAtIHgpKSAvIDI7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuRklTSEVSSU5WID0gZnVuY3Rpb24oeSkge1xyXG4gICAgICAgICAgICB5ID0gdXRpbHMucGFyc2VOdW1iZXIoeSk7XHJcbiAgICAgICAgICAgIGlmICh5IGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBlMnkgPSBNYXRoLmV4cCgyICogeSk7XHJcbiAgICAgICAgICAgIHJldHVybiAoZTJ5IC0gMSkgLyAoZTJ5ICsgMSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuRlJFUVVFTkNZID0gZnVuY3Rpb24oZGF0YSwgYmlucykge1xyXG4gICAgICAgICAgICBkYXRhID0gdXRpbHMucGFyc2VOdW1iZXJBcnJheSh1dGlscy5mbGF0dGVuKGRhdGEpKTtcclxuICAgICAgICAgICAgYmlucyA9IHV0aWxzLnBhcnNlTnVtYmVyQXJyYXkodXRpbHMuZmxhdHRlbihiaW5zKSk7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKGRhdGEsIGJpbnMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG4gPSBkYXRhLmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGIgPSBiaW5zLmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIHIgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gYjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICByW2ldID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbal0gPD0gYmluc1swXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgclswXSArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpIDwgYikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVtqXSA+IGJpbnNbaSAtIDFdICYmIGRhdGFbal0gPD0gYmluc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcltpXSArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpID09PSBiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhW2pdID4gYmluc1tiIC0gMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbYl0gKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcjtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5MQVJHRSA9IGZ1bmN0aW9uKHJhbmdlLCBrKSB7XHJcbiAgICAgICAgICAgIHJhbmdlID0gdXRpbHMucGFyc2VOdW1iZXJBcnJheSh1dGlscy5mbGF0dGVuKHJhbmdlKSk7XHJcbiAgICAgICAgICAgIGsgPSB1dGlscy5wYXJzZU51bWJlcihrKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IocmFuZ2UsIGspKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmFuZ2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJhbmdlLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGIgLSBhO1xyXG4gICAgICAgICAgICB9KVtrIC0gMV07XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuTUFYID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHV0aWxzLm51bWJlcnModXRpbHMuZmxhdHRlbihhcmd1bWVudHMpKTtcclxuICAgICAgICAgICAgcmV0dXJuIChyYW5nZS5sZW5ndGggPT09IDApID8gMCA6IE1hdGgubWF4LmFwcGx5KE1hdGgsIHJhbmdlKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5NQVhBID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHV0aWxzLmFycmF5VmFsdWVzVG9OdW1iZXJzKHV0aWxzLmZsYXR0ZW4oYXJndW1lbnRzKSk7XHJcbiAgICAgICAgICAgIHJldHVybiAocmFuZ2UubGVuZ3RoID09PSAwKSA/IDAgOiBNYXRoLm1heC5hcHBseShNYXRoLCByYW5nZSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuTUlOID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHV0aWxzLm51bWJlcnModXRpbHMuZmxhdHRlbihhcmd1bWVudHMpKTtcclxuICAgICAgICAgICAgcmV0dXJuIChyYW5nZS5sZW5ndGggPT09IDApID8gMCA6IE1hdGgubWluLmFwcGx5KE1hdGgsIHJhbmdlKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5NSU5BID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHV0aWxzLmFycmF5VmFsdWVzVG9OdW1iZXJzKHV0aWxzLmZsYXR0ZW4oYXJndW1lbnRzKSk7XHJcbiAgICAgICAgICAgIHJldHVybiAocmFuZ2UubGVuZ3RoID09PSAwKSA/IDAgOiBNYXRoLm1pbi5hcHBseShNYXRoLCByYW5nZSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuTU9ERSA9IHt9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5NT0RFLk1VTFQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gQ3JlZGl0czogUm/Dtm5hw6RuXHJcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHV0aWxzLnBhcnNlTnVtYmVyQXJyYXkodXRpbHMuZmxhdHRlbihhcmd1bWVudHMpKTtcclxuICAgICAgICAgICAgaWYgKHJhbmdlIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByYW5nZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbiA9IHJhbmdlLmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGNvdW50ID0ge307XHJcbiAgICAgICAgICAgIHZhciBtYXhJdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgbWF4ID0gMDtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRJdGVtO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50SXRlbSA9IHJhbmdlW2ldO1xyXG4gICAgICAgICAgICAgICAgY291bnRbY3VycmVudEl0ZW1dID0gY291bnRbY3VycmVudEl0ZW1dID8gY291bnRbY3VycmVudEl0ZW1dICsgMSA6IDE7XHJcbiAgICAgICAgICAgICAgICBpZiAoY291bnRbY3VycmVudEl0ZW1dID4gbWF4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY291bnRbY3VycmVudEl0ZW1dO1xyXG4gICAgICAgICAgICAgICAgICAgIG1heEl0ZW1zID0gW107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY291bnRbY3VycmVudEl0ZW1dID09PSBtYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXhJdGVtc1ttYXhJdGVtcy5sZW5ndGhdID0gY3VycmVudEl0ZW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1heEl0ZW1zO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLk1PREUuU05HTCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSB1dGlscy5wYXJzZU51bWJlckFycmF5KHV0aWxzLmZsYXR0ZW4oYXJndW1lbnRzKSk7XHJcbiAgICAgICAgICAgIGlmIChyYW5nZSBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmFuZ2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuTU9ERS5NVUxUKHJhbmdlKS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhIC0gYjtcclxuICAgICAgICAgICAgfSlbMF07XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuUEVSQ0VOVElMRSA9IHt9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5QRVJDRU5USUxFLkVYQyA9IGZ1bmN0aW9uKGFycmF5LCBrKSB7XHJcbiAgICAgICAgICAgIGFycmF5ID0gdXRpbHMucGFyc2VOdW1iZXJBcnJheSh1dGlscy5mbGF0dGVuKGFycmF5KSk7XHJcbiAgICAgICAgICAgIGsgPSB1dGlscy5wYXJzZU51bWJlcihrKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoYXJyYXksIGspKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXJyYXkgPSBhcnJheS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSAtIGI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgbiA9IGFycmF5Lmxlbmd0aDtcclxuICAgICAgICAgICAgaWYgKGsgPCAxIC8gKG4gKyAxKSB8fCBrID4gMSAtIDEgLyAobiArIDEpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBsID0gayAqIChuICsgMSkgLSAxO1xyXG4gICAgICAgICAgICB2YXIgZmwgPSBNYXRoLmZsb29yKGwpO1xyXG4gICAgICAgICAgICByZXR1cm4gdXRpbHMuY2xlYW5GbG9hdCgobCA9PT0gZmwpID8gYXJyYXlbbF0gOiBhcnJheVtmbF0gKyAobCAtIGZsKSAqIChhcnJheVtmbCArIDFdIC0gYXJyYXlbZmxdKSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuUEVSQ0VOVElMRS5JTkMgPSBmdW5jdGlvbihhcnJheSwgaykge1xyXG4gICAgICAgICAgICBhcnJheSA9IHV0aWxzLnBhcnNlTnVtYmVyQXJyYXkodXRpbHMuZmxhdHRlbihhcnJheSkpO1xyXG4gICAgICAgICAgICBrID0gdXRpbHMucGFyc2VOdW1iZXIoayk7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKGFycmF5LCBrKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFycmF5ID0gYXJyYXkuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYSAtIGI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgbiA9IGFycmF5Lmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGwgPSBrICogKG4gLSAxKTtcclxuICAgICAgICAgICAgdmFyIGZsID0gTWF0aC5mbG9vcihsKTtcclxuICAgICAgICAgICAgcmV0dXJuIHV0aWxzLmNsZWFuRmxvYXQoKGwgPT09IGZsKSA/IGFycmF5W2xdIDogYXJyYXlbZmxdICsgKGwgLSBmbCkgKiAoYXJyYXlbZmwgKyAxXSAtIGFycmF5W2ZsXSkpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlBFUkNFTlRSQU5LID0ge307XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlBFUkNFTlRSQU5LLkVYQyA9IGZ1bmN0aW9uKGFycmF5LCB4LCBzaWduaWZpY2FuY2UpIHtcclxuICAgICAgICAgICAgc2lnbmlmaWNhbmNlID0gKHNpZ25pZmljYW5jZSA9PT0gdW5kZWZpbmVkKSA/IDMgOiBzaWduaWZpY2FuY2U7XHJcbiAgICAgICAgICAgIGFycmF5ID0gdXRpbHMucGFyc2VOdW1iZXJBcnJheSh1dGlscy5mbGF0dGVuKGFycmF5KSk7XHJcbiAgICAgICAgICAgIHggPSB1dGlscy5wYXJzZU51bWJlcih4KTtcclxuICAgICAgICAgICAgc2lnbmlmaWNhbmNlID0gdXRpbHMucGFyc2VOdW1iZXIoc2lnbmlmaWNhbmNlKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoYXJyYXksIHgsIHNpZ25pZmljYW5jZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhcnJheSA9IGFycmF5LnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEgLSBiO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIHVuaXF1ZXMgPSBVTklRVUUuYXBwbHkobnVsbCwgYXJyYXkpO1xyXG4gICAgICAgICAgICB2YXIgbiA9IGFycmF5Lmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIG0gPSB1bmlxdWVzLmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIHBvd2VyID0gTWF0aC5wb3coMTAsIHNpZ25pZmljYW5jZSk7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAwO1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAoIW1hdGNoICYmIGkgPCBtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeCA9PT0gdW5pcXVlc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IChhcnJheS5pbmRleE9mKHVuaXF1ZXNbaV0pICsgMSkgLyAobiArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoeCA+PSB1bmlxdWVzW2ldICYmICh4IDwgdW5pcXVlc1tpICsgMV0gfHwgaSA9PT0gbSAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gKGFycmF5LmluZGV4T2YodW5pcXVlc1tpXSkgKyAxICsgKHggLSB1bmlxdWVzW2ldKSAvICh1bmlxdWVzW2kgKyAxXSAtIHVuaXF1ZXNbaV0pKSAvIChuICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKHJlc3VsdCAqIHBvd2VyKSAvIHBvd2VyO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlBFUkNFTlRSQU5LLklOQyA9IGZ1bmN0aW9uKGFycmF5LCB4LCBzaWduaWZpY2FuY2UpIHtcclxuICAgICAgICAgICAgc2lnbmlmaWNhbmNlID0gKHNpZ25pZmljYW5jZSA9PT0gdW5kZWZpbmVkKSA/IDMgOiBzaWduaWZpY2FuY2U7XHJcbiAgICAgICAgICAgIGFycmF5ID0gdXRpbHMucGFyc2VOdW1iZXJBcnJheSh1dGlscy5mbGF0dGVuKGFycmF5KSk7XHJcbiAgICAgICAgICAgIHggPSB1dGlscy5wYXJzZU51bWJlcih4KTtcclxuICAgICAgICAgICAgc2lnbmlmaWNhbmNlID0gdXRpbHMucGFyc2VOdW1iZXIoc2lnbmlmaWNhbmNlKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoYXJyYXksIHgsIHNpZ25pZmljYW5jZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhcnJheSA9IGFycmF5LnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEgLSBiO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIHVuaXF1ZXMgPSBVTklRVUUuYXBwbHkobnVsbCwgYXJyYXkpO1xyXG4gICAgICAgICAgICB2YXIgbiA9IGFycmF5Lmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIG0gPSB1bmlxdWVzLmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIHBvd2VyID0gTWF0aC5wb3coMTAsIHNpZ25pZmljYW5jZSk7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAwO1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAoIW1hdGNoICYmIGkgPCBtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeCA9PT0gdW5pcXVlc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGFycmF5LmluZGV4T2YodW5pcXVlc1tpXSkgLyAobiAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoeCA+PSB1bmlxdWVzW2ldICYmICh4IDwgdW5pcXVlc1tpICsgMV0gfHwgaSA9PT0gbSAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gKGFycmF5LmluZGV4T2YodW5pcXVlc1tpXSkgKyAoeCAtIHVuaXF1ZXNbaV0pIC8gKHVuaXF1ZXNbaSArIDFdIC0gdW5pcXVlc1tpXSkpIC8gKG4gLSAxKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IocmVzdWx0ICogcG93ZXIpIC8gcG93ZXI7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuUEVSTVVUID0gZnVuY3Rpb24obnVtYmVyLCBudW1iZXJfY2hvc2VuKSB7XHJcbiAgICAgICAgICAgIG51bWJlciA9IHV0aWxzLnBhcnNlTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgICAgIG51bWJlcl9jaG9zZW4gPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXJfY2hvc2VuKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IobnVtYmVyLCBudW1iZXJfY2hvc2VuKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBGQUNUKG51bWJlcikgLyBGQUNUKG51bWJlciAtIG51bWJlcl9jaG9zZW4pO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlBFUk1VVEFUSU9OQSA9IGZ1bmN0aW9uKG51bWJlciwgbnVtYmVyX2Nob3Nlbikge1xyXG4gICAgICAgICAgICBudW1iZXIgPSB1dGlscy5wYXJzZU51bWJlcihudW1iZXIpO1xyXG4gICAgICAgICAgICBudW1iZXJfY2hvc2VuID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyX2Nob3Nlbik7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKG51bWJlciwgbnVtYmVyX2Nob3NlbikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5wb3cobnVtYmVyLCBudW1iZXJfY2hvc2VuKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5QSEkgPSBmdW5jdGlvbih4KSB7XHJcbiAgICAgICAgICAgIHggPSB1dGlscy5wYXJzZU51bWJlcih4KTtcclxuICAgICAgICAgICAgaWYgKHggaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmV4cCgtMC41ICogeCAqIHgpIC8gU1FSVDJQSTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5QUk9CID0gZnVuY3Rpb24ocmFuZ2UsIHByb2JhYmlsaXR5LCBsb3dlciwgdXBwZXIpIHtcclxuICAgICAgICAgICAgaWYgKGxvd2VyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVwcGVyID0gKHVwcGVyID09PSB1bmRlZmluZWQpID8gbG93ZXIgOiB1cHBlcjtcclxuICAgIFxyXG4gICAgICAgICAgICByYW5nZSA9IHV0aWxzLnBhcnNlTnVtYmVyQXJyYXkodXRpbHMuZmxhdHRlbihyYW5nZSkpO1xyXG4gICAgICAgICAgICBwcm9iYWJpbGl0eSA9IHV0aWxzLnBhcnNlTnVtYmVyQXJyYXkodXRpbHMuZmxhdHRlbihwcm9iYWJpbGl0eSkpO1xyXG4gICAgICAgICAgICBsb3dlciA9IHV0aWxzLnBhcnNlTnVtYmVyKGxvd2VyKTtcclxuICAgICAgICAgICAgdXBwZXIgPSB1dGlscy5wYXJzZU51bWJlcih1cHBlcik7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHJhbmdlLCBwcm9iYWJpbGl0eSwgbG93ZXIsIHVwcGVyKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKGxvd2VyID09PSB1cHBlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChyYW5nZS5pbmRleE9mKGxvd2VyKSA+PSAwKSA/IHByb2JhYmlsaXR5W3JhbmdlLmluZGV4T2YobG93ZXIpXSA6IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgc29ydGVkID0gcmFuZ2Uuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYSAtIGI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgbiA9IHNvcnRlZC5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNvcnRlZFtpXSA+PSBsb3dlciAmJiBzb3J0ZWRbaV0gPD0gdXBwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gcHJvYmFiaWxpdHlbcmFuZ2UuaW5kZXhPZihzb3J0ZWRbaV0pXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlFVQVJUSUxFID0ge307XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlFVQVJUSUxFLkVYQyA9IGZ1bmN0aW9uKHJhbmdlLCBxdWFydCkge1xyXG4gICAgICAgICAgICByYW5nZSA9IHV0aWxzLnBhcnNlTnVtYmVyQXJyYXkodXRpbHMuZmxhdHRlbihyYW5nZSkpO1xyXG4gICAgICAgICAgICBxdWFydCA9IHV0aWxzLnBhcnNlTnVtYmVyKHF1YXJ0KTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IocmFuZ2UsIHF1YXJ0KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN3aXRjaCAocXVhcnQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5QRVJDRU5USUxFLkVYQyhyYW5nZSwgMC4yNSk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuUEVSQ0VOVElMRS5FWEMocmFuZ2UsIDAuNSk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuUEVSQ0VOVElMRS5FWEMocmFuZ2UsIDAuNzUpO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuUVVBUlRJTEUuSU5DID0gZnVuY3Rpb24ocmFuZ2UsIHF1YXJ0KSB7XHJcbiAgICAgICAgICAgIHJhbmdlID0gdXRpbHMucGFyc2VOdW1iZXJBcnJheSh1dGlscy5mbGF0dGVuKHJhbmdlKSk7XHJcbiAgICAgICAgICAgIHF1YXJ0ID0gdXRpbHMucGFyc2VOdW1iZXIocXVhcnQpO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihyYW5nZSwgcXVhcnQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3dpdGNoIChxdWFydCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleHBvcnRzLlBFUkNFTlRJTEUuSU5DKHJhbmdlLCAwLjI1KTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5QRVJDRU5USUxFLklOQyhyYW5nZSwgMC41KTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5QRVJDRU5USUxFLklOQyhyYW5nZSwgMC43NSk7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5udW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5SQU5LID0ge307XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlJBTksuQVZHID0gZnVuY3Rpb24obnVtYmVyLCByYW5nZSwgb3JkZXIpIHtcclxuICAgICAgICAgICAgbnVtYmVyID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyKTtcclxuICAgICAgICAgICAgcmFuZ2UgPSB1dGlscy5wYXJzZU51bWJlckFycmF5KHV0aWxzLmZsYXR0ZW4ocmFuZ2UpKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IobnVtYmVyLCByYW5nZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByYW5nZSA9IHV0aWxzLmZsYXR0ZW4ocmFuZ2UpO1xyXG4gICAgICAgICAgICBvcmRlciA9IG9yZGVyIHx8IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgc29ydCA9IChvcmRlcikgPyBmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYSAtIGI7XHJcbiAgICAgICAgICAgIH0gOiBmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYiAtIGE7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJhbmdlID0gcmFuZ2Uuc29ydChzb3J0KTtcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gcmFuZ2UubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmFuZ2VbaV0gPT09IG51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gKGNvdW50ID4gMSkgPyAoMiAqIHJhbmdlLmluZGV4T2YobnVtYmVyKSArIGNvdW50ICsgMSkgLyAyIDogcmFuZ2UuaW5kZXhPZihudW1iZXIpICsgMTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5SQU5LLkVRID0gZnVuY3Rpb24obnVtYmVyLCByYW5nZSwgb3JkZXIpIHtcclxuICAgICAgICAgICAgbnVtYmVyID0gdXRpbHMucGFyc2VOdW1iZXIobnVtYmVyKTtcclxuICAgICAgICAgICAgcmFuZ2UgPSB1dGlscy5wYXJzZU51bWJlckFycmF5KHV0aWxzLmZsYXR0ZW4ocmFuZ2UpKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IobnVtYmVyLCByYW5nZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcmRlciA9IG9yZGVyIHx8IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgc29ydCA9IChvcmRlcikgPyBmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYSAtIGI7XHJcbiAgICAgICAgICAgIH0gOiBmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYiAtIGE7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJhbmdlID0gcmFuZ2Uuc29ydChzb3J0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJhbmdlLmluZGV4T2YobnVtYmVyKSArIDE7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuUlNRID0gZnVuY3Rpb24oZGF0YV94LCBkYXRhX3kpIHsgLy8gbm8gbmVlZCB0byBmbGF0dGVuIGhlcmUsIFBFQVJTT04gd2lsbCB0YWtlIGNhcmUgb2YgdGhhdFxyXG4gICAgICAgICAgICBkYXRhX3ggPSB1dGlscy5wYXJzZU51bWJlckFycmF5KHV0aWxzLmZsYXR0ZW4oZGF0YV94KSk7XHJcbiAgICAgICAgICAgIGRhdGFfeSA9IHV0aWxzLnBhcnNlTnVtYmVyQXJyYXkodXRpbHMuZmxhdHRlbihkYXRhX3kpKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoZGF0YV94LCBkYXRhX3kpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgucG93KGV4cG9ydHMuUEVBUlNPTihkYXRhX3gsIGRhdGFfeSksIDIpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlNNQUxMID0gZnVuY3Rpb24ocmFuZ2UsIGspIHtcclxuICAgICAgICAgICAgcmFuZ2UgPSB1dGlscy5wYXJzZU51bWJlckFycmF5KHV0aWxzLmZsYXR0ZW4ocmFuZ2UpKTtcclxuICAgICAgICAgICAgayA9IHV0aWxzLnBhcnNlTnVtYmVyKGspO1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuYW55SXNFcnJvcihyYW5nZSwgaykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByYW5nZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmFuZ2Uuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYSAtIGI7XHJcbiAgICAgICAgICAgIH0pW2sgLSAxXTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5TVEFOREFSRElaRSA9IGZ1bmN0aW9uKHgsIG1lYW4sIHNkKSB7XHJcbiAgICAgICAgICAgIHggPSB1dGlscy5wYXJzZU51bWJlcih4KTtcclxuICAgICAgICAgICAgbWVhbiA9IHV0aWxzLnBhcnNlTnVtYmVyKG1lYW4pO1xyXG4gICAgICAgICAgICBzZCA9IHV0aWxzLnBhcnNlTnVtYmVyKHNkKTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IoeCwgbWVhbiwgc2QpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICh4IC0gbWVhbikgLyBzZDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5TVERFViA9IHt9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5TVERFVi5QID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gZXhwb3J0cy5WQVIuUC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHYpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlNUREVWLlMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHYgPSBleHBvcnRzLlZBUi5TLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQodik7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuU1RERVZBID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gZXhwb3J0cy5WQVJBLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQodik7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuU1RERVZQQSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdiA9IGV4cG9ydHMuVkFSUEEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydCh2KTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5WQVIgPSB7fTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuVkFSLlAgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHJhbmdlID0gdXRpbHMubnVtYmVycyh1dGlscy5mbGF0dGVuKGFyZ3VtZW50cykpO1xyXG4gICAgICAgICAgICB2YXIgbiA9IHJhbmdlLmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIHNpZ21hID0gMDtcclxuICAgICAgICAgICAgdmFyIG1lYW4gPSBleHBvcnRzLkFWRVJBR0UocmFuZ2UpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgc2lnbWEgKz0gTWF0aC5wb3cocmFuZ2VbaV0gLSBtZWFuLCAyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc2lnbWEgLyBuO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlZBUi5TID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHV0aWxzLm51bWJlcnModXRpbHMuZmxhdHRlbihhcmd1bWVudHMpKTtcclxuICAgICAgICAgICAgdmFyIG4gPSByYW5nZS5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBzaWdtYSA9IDA7XHJcbiAgICAgICAgICAgIHZhciBtZWFuID0gZXhwb3J0cy5BVkVSQUdFKHJhbmdlKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHNpZ21hICs9IE1hdGgucG93KHJhbmdlW2ldIC0gbWVhbiwgMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNpZ21hIC8gKG4gLSAxKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5WQVJBID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHV0aWxzLmZsYXR0ZW4oYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgdmFyIG4gPSByYW5nZS5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBzaWdtYSA9IDA7XHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBtZWFuID0gZXhwb3J0cy5BVkVSQUdFQShyYW5nZSk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWwgPSByYW5nZVtpXTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZWwgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbWEgKz0gTWF0aC5wb3coZWwgLSBtZWFuLCAyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWwgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaWdtYSArPSBNYXRoLnBvdygxIC0gbWVhbiwgMik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ21hICs9IE1hdGgucG93KDAgLSBtZWFuLCAyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGVsICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc2lnbWEgLyAoY291bnQgLSAxKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5WQVJQQSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSB1dGlscy5mbGF0dGVuKGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIHZhciBuID0gcmFuZ2UubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgc2lnbWEgPSAwO1xyXG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgICAgICB2YXIgbWVhbiA9IGV4cG9ydHMuQVZFUkFHRUEocmFuZ2UpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsID0gcmFuZ2VbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ21hICs9IE1hdGgucG93KGVsIC0gbWVhbiwgMik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVsID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbWEgKz0gTWF0aC5wb3coMSAtIG1lYW4sIDIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzaWdtYSArPSBNYXRoLnBvdygwIC0gbWVhbiwgMik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChlbCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNpZ21hIC8gY291bnQ7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuV0VJQlVMTCA9IHt9O1xyXG4gICAgXHJcbiAgICAgICAgZXhwb3J0cy5XRUlCVUxMLkRJU1QgPSBmdW5jdGlvbih4LCBhbHBoYSwgYmV0YSwgY3VtdWxhdGl2ZSkge1xyXG4gICAgICAgICAgICB4ID0gdXRpbHMucGFyc2VOdW1iZXIoeCk7XHJcbiAgICAgICAgICAgIGFscGhhID0gdXRpbHMucGFyc2VOdW1iZXIoYWxwaGEpO1xyXG4gICAgICAgICAgICBiZXRhID0gdXRpbHMucGFyc2VOdW1iZXIoYmV0YSk7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5hbnlJc0Vycm9yKHgsIGFscGhhLCBiZXRhKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAoY3VtdWxhdGl2ZSkgPyAxIC0gTWF0aC5leHAoLU1hdGgucG93KHggLyBiZXRhLCBhbHBoYSkpIDogTWF0aC5wb3coeCwgYWxwaGEgLSAxKSAqIE1hdGguZXhwKC1NYXRoLnBvdyh4IC8gYmV0YSwgYWxwaGEpKSAqIGFscGhhIC8gTWF0aC5wb3coYmV0YSwgYWxwaGEpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBleHBvcnRzLlogPSB7fTtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydHMuWi5URVNUID0gZnVuY3Rpb24ocmFuZ2UsIHgsIHNkKSB7XHJcbiAgICAgICAgICAgIHJhbmdlID0gdXRpbHMucGFyc2VOdW1iZXJBcnJheSh1dGlscy5mbGF0dGVuKHJhbmdlKSk7XHJcbiAgICAgICAgICAgIHggPSB1dGlscy5wYXJzZU51bWJlcih4KTtcclxuICAgICAgICAgICAgaWYgKHV0aWxzLmFueUlzRXJyb3IocmFuZ2UsIHgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBzZCA9IHNkIHx8IGV4cG9ydHMuU1RERVYuUyhyYW5nZSk7XHJcbiAgICAgICAgICAgIHZhciBuID0gcmFuZ2UubGVuZ3RoO1xyXG4gICAgICAgICAgICByZXR1cm4gMSAtIGV4cG9ydHMuTk9STS5TLkRJU1QoKGV4cG9ydHMuQVZFUkFHRShyYW5nZSkgLSB4KSAvIChzZCAvIE1hdGguc3FydChuKSksIHRydWUpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gZXhwb3J0cztcclxuICAgIH0pKCk7XHJcblxyXG4gICAgamV4Y2VsLm1ldGhvZHMudXRpbHMgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGV4cG9ydHMgPSB7fTtcclxuXHJcbiAgICAgICAgZXhwb3J0cy5QUk9HUkVTUyA9IGZ1bmN0aW9uKHAsIGMpIHtcclxuICAgICAgICAgICAgdmFyIGNvbG9yID0gYyA/IGMgOiAncmVkJztcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gcCA/IHAgOiAnMCc7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gJzxkaXYgc3R5bGU9XCJ3aWR0aDonICsgdmFsdWUgKyAnJTtoZWlnaHQ6NHB4O2JhY2tncm91bmQtY29sb3I6JyArIGNvbG9yICsgJzttYXJnaW4tdG9wOjFweDtcIj48L2Rpdj4nO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGV4cG9ydHMuUkFUSU5HID0gZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICB2YXIgaHRtbCA9ICc8ZGl2IGNsYXNzPVwianJhdGluZ1wiPic7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IHYpIHtcclxuICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwianJhdGluZy1zZWxlY3RlZFwiPjwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PC9kaXY+JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICByZXR1cm4gaHRtbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBleHBvcnRzO1xyXG4gICAgfSkoKTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IE9iamVjdC5rZXlzKGpleGNlbC5tZXRob2RzKS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBtZXRob2RzID0gamV4Y2VsLm1ldGhvZHNbT2JqZWN0LmtleXMoamV4Y2VsLm1ldGhvZHMpW2ldXTtcclxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IE9iamVjdC5rZXlzKG1ldGhvZHMpLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YobWV0aG9kc1tPYmplY3Qua2V5cyhtZXRob2RzKVtqXV0pID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvd1tPYmplY3Qua2V5cyhtZXRob2RzKVtqXV0gPSBtZXRob2RzW09iamVjdC5rZXlzKG1ldGhvZHMpW2pdXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvd1tPYmplY3Qua2V5cyhtZXRob2RzKVtqXV0gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMobWV0aG9kcylbal0gKyAnTm90IGltcGxlbWVudGVkJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gamV4Y2VsO1xyXG59KSkpO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///710\n")},711:function(module,exports,__webpack_require__){eval("// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(859);\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = __webpack_require__(27).default\nvar update = add(\"893aec4c\", content, true, {\"sourceMap\":false});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvamV4Y2VsL2Rpc3QvamV4Y2VsLmNzcz80ZTFhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0EsY0FBYyxtQkFBTyxDQUFDLEdBQW1IO0FBQ3pJO0FBQ0EsNENBQTRDLFFBQVM7QUFDckQ7QUFDQTtBQUNBLFVBQVUsbUJBQU8sQ0FBQyxFQUFnRDtBQUNsRSw2Q0FBNkMsa0JBQWtCIiwiZmlsZSI6IjcxMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTMtb25lT2YtMS0xIS4uLy4uL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cmVmLS0zLW9uZU9mLTEtMiEuL2pleGNlbC5jc3NcIik7XG5pZihjb250ZW50Ll9fZXNNb2R1bGUpIGNvbnRlbnQgPSBjb250ZW50LmRlZmF1bHQ7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIGFkZCA9IHJlcXVpcmUoXCIhLi4vLi4vdnVlLXN0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzQ2xpZW50LmpzXCIpLmRlZmF1bHRcbnZhciB1cGRhdGUgPSBhZGQoXCI4OTNhZWM0Y1wiLCBjb250ZW50LCB0cnVlLCB7XCJzb3VyY2VNYXBcIjpmYWxzZX0pOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///711\n")},774:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(17);\n/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(11);\n/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(18);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2);\n/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32);\n/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(19);\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(50);\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(92);\n/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var core_js_modules_es_map_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(495);\n/* harmony import */ var core_js_modules_es_map_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_map_js__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(25);\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(43);\n/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var core_js_modules_esnext_map_delete_all_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(496);\n/* harmony import */ var core_js_modules_esnext_map_delete_all_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_delete_all_js__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var core_js_modules_esnext_map_every_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(497);\n/* harmony import */ var core_js_modules_esnext_map_every_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_every_js__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var core_js_modules_esnext_map_filter_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(498);\n/* harmony import */ var core_js_modules_esnext_map_filter_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_filter_js__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var core_js_modules_esnext_map_find_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(499);\n/* harmony import */ var core_js_modules_esnext_map_find_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_find_js__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var core_js_modules_esnext_map_find_key_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(500);\n/* harmony import */ var core_js_modules_esnext_map_find_key_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_find_key_js__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var core_js_modules_esnext_map_includes_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(501);\n/* harmony import */ var core_js_modules_esnext_map_includes_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_includes_js__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var core_js_modules_esnext_map_key_of_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(502);\n/* harmony import */ var core_js_modules_esnext_map_key_of_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_key_of_js__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var core_js_modules_esnext_map_map_keys_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(503);\n/* harmony import */ var core_js_modules_esnext_map_map_keys_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_map_keys_js__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var core_js_modules_esnext_map_map_values_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(504);\n/* harmony import */ var core_js_modules_esnext_map_map_values_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_map_values_js__WEBPACK_IMPORTED_MODULE_20__);\n/* harmony import */ var core_js_modules_esnext_map_merge_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(505);\n/* harmony import */ var core_js_modules_esnext_map_merge_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_merge_js__WEBPACK_IMPORTED_MODULE_21__);\n/* harmony import */ var core_js_modules_esnext_map_reduce_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(506);\n/* harmony import */ var core_js_modules_esnext_map_reduce_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_reduce_js__WEBPACK_IMPORTED_MODULE_22__);\n/* harmony import */ var core_js_modules_esnext_map_some_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(507);\n/* harmony import */ var core_js_modules_esnext_map_some_js__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_some_js__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var core_js_modules_esnext_map_update_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(508);\n/* harmony import */ var core_js_modules_esnext_map_update_js__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_update_js__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(42);\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_25__);\n/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(55);\n/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_26__);\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(14);\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_27__);\n/* harmony import */ var core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(93);\n/* harmony import */ var core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_28___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_28__);\n/* harmony import */ var _src_components_VGrid_VGrid_sass__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(509);\n/* harmony import */ var _src_components_VGrid_VGrid_sass__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(_src_components_VGrid_VGrid_sass__WEBPACK_IMPORTED_MODULE_29__);\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(4);\n/* harmony import */ var _util_mergeData__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(72);\n/* harmony import */ var _util_helpers__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(0);\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // no xs\n\nvar breakpoints = ['sm', 'md', 'lg', 'xl'];\n\nvar breakpointProps = function () {\n  return breakpoints.reduce(function (props, val) {\n    props[val] = {\n      type: [Boolean, String, Number],\n      default: false\n    };\n    return props;\n  }, {});\n}();\n\nvar offsetProps = function () {\n  return breakpoints.reduce(function (props, val) {\n    props['offset' + Object(_util_helpers__WEBPACK_IMPORTED_MODULE_32__[/* upperFirst */ \"A\"])(val)] = {\n      type: [String, Number],\n      default: null\n    };\n    return props;\n  }, {});\n}();\n\nvar orderProps = function () {\n  return breakpoints.reduce(function (props, val) {\n    props['order' + Object(_util_helpers__WEBPACK_IMPORTED_MODULE_32__[/* upperFirst */ \"A\"])(val)] = {\n      type: [String, Number],\n      default: null\n    };\n    return props;\n  }, {});\n}();\n\nvar propMap = {\n  col: Object.keys(breakpointProps),\n  offset: Object.keys(offsetProps),\n  order: Object.keys(orderProps)\n};\n\nfunction breakpointClass(type, prop, val) {\n  var className = type;\n\n  if (val == null || val === false) {\n    return undefined;\n  }\n\n  if (prop) {\n    var breakpoint = prop.replace(type, '');\n    className += \"-\".concat(breakpoint);\n  } // Handling the boolean style prop when accepting [Boolean, String, Number]\n  // means Vue will not convert <v-col sm></v-col> to sm: true for us.\n  // Since the default is false, an empty string indicates the prop's presence.\n\n\n  if (type === 'col' && (val === '' || val === true)) {\n    // .col-md\n    return className.toLowerCase();\n  } // .order-md-6\n\n\n  className += \"-\".concat(val);\n  return className.toLowerCase();\n}\n\nvar cache = new Map();\n/* harmony default export */ __webpack_exports__[\"a\"] = (vue__WEBPACK_IMPORTED_MODULE_30__[\"default\"].extend({\n  name: 'v-col',\n  functional: true,\n  props: _objectSpread(_objectSpread(_objectSpread(_objectSpread({\n    cols: {\n      type: [Boolean, String, Number],\n      default: false\n    }\n  }, breakpointProps), {}, {\n    offset: {\n      type: [String, Number],\n      default: null\n    }\n  }, offsetProps), {}, {\n    order: {\n      type: [String, Number],\n      default: null\n    }\n  }, orderProps), {}, {\n    alignSelf: {\n      type: String,\n      default: null,\n      validator: function validator(str) {\n        return ['auto', 'start', 'end', 'center', 'baseline', 'stretch'].includes(str);\n      }\n    },\n    tag: {\n      type: String,\n      default: 'div'\n    }\n  }),\n  render: function render(h, _ref) {\n    var props = _ref.props,\n        data = _ref.data,\n        children = _ref.children,\n        parent = _ref.parent;\n    // Super-fast memoization based on props, 5x faster than JSON.stringify\n    var cacheKey = '';\n\n    for (var prop in props) {\n      cacheKey += String(props[prop]);\n    }\n\n    var classList = cache.get(cacheKey);\n\n    if (!classList) {\n      (function () {\n        var _classList$push;\n\n        classList = []; // Loop through `col`, `offset`, `order` breakpoint props\n\n        var type;\n\n        for (type in propMap) {\n          propMap[type].forEach(function (prop) {\n            var value = props[prop];\n            var className = breakpointClass(type, prop, value);\n            if (className) classList.push(className);\n          });\n        }\n\n        var hasColClasses = classList.some(function (className) {\n          return className.startsWith('col-');\n        });\n        classList.push((_classList$push = {\n          // Default to .col if no other col-{bp}-* classes generated nor `cols` specified.\n          col: !hasColClasses || !props.cols\n        }, Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_classList$push, \"col-\".concat(props.cols), props.cols), Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_classList$push, \"offset-\".concat(props.offset), props.offset), Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_classList$push, \"order-\".concat(props.order), props.order), Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_classList$push, \"align-self-\".concat(props.alignSelf), props.alignSelf), _classList$push));\n        cache.set(cacheKey, classList);\n      })();\n    }\n\n    return h(props.tag, Object(_util_mergeData__WEBPACK_IMPORTED_MODULE_31__[/* default */ \"a\"])(data, {\n      class: classList\n    }), children);\n  }\n}));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvVkdyaWQvVkNvbC50cz80ZjNlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFDQTtDQUdBOztBQUNBLElBQU0sV0FBVyxHQUFHLG1CQUFwQixJQUFvQixDQUFwQjs7QUFFQSxJQUFNLGVBQWUsR0FBSSxZQUFLO0FBQzVCLFNBQU8sV0FBVyxDQUFYLE9BQW1CLHNCQUFlO0FBQ3ZDLFNBQUssQ0FBTCxHQUFLLENBQUwsR0FBYTtBQUNYLFVBQUksRUFBRSxrQkFESyxNQUNMLENBREs7QUFFWCxhQUFPLEVBQUU7QUFGRSxLQUFiO0FBSUE7QUFMSyxLQUFQLEVBQU8sQ0FBUDtBQURGLENBQXdCLEVBQXhCOztBQVVBLElBQU0sV0FBVyxHQUFJLFlBQUs7QUFDeEIsU0FBTyxXQUFXLENBQVgsT0FBbUIsc0JBQWU7QUFDdkMsU0FBSyxDQUFDLFdBQVcseUVBQVUsQ0FBM0IsR0FBMkIsQ0FBdEIsQ0FBTCxHQUFvQztBQUNsQyxVQUFJLEVBQUUsU0FENEIsTUFDNUIsQ0FENEI7QUFFbEMsYUFBTyxFQUFFO0FBRnlCLEtBQXBDO0FBSUE7QUFMSyxLQUFQLEVBQU8sQ0FBUDtBQURGLENBQW9CLEVBQXBCOztBQVVBLElBQU0sVUFBVSxHQUFJLFlBQUs7QUFDdkIsU0FBTyxXQUFXLENBQVgsT0FBbUIsc0JBQWU7QUFDdkMsU0FBSyxDQUFDLFVBQVUseUVBQVUsQ0FBMUIsR0FBMEIsQ0FBckIsQ0FBTCxHQUFtQztBQUNqQyxVQUFJLEVBQUUsU0FEMkIsTUFDM0IsQ0FEMkI7QUFFakMsYUFBTyxFQUFFO0FBRndCLEtBQW5DO0FBSUE7QUFMSyxLQUFQLEVBQU8sQ0FBUDtBQURGLENBQW1CLEVBQW5COztBQVVBLElBQU0sT0FB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QWYsc0lBS1ksS0FBSyxDQUFmLEtBTEYsR0FLNEIsS0FBSyxDQUxsQixLQUFmLDJJQU1pQixLQUFLLENBQXBCLFNBTkYsR0FNcUMsS0FBSyxDQUFDLFNBTjNDO0FBU0EsYUFBSyxDQUFMO0FBdkJjO0FBd0JmOztBQUVELFdBQU8sQ0FBQyxDQUFDLEtBQUssQ0FBTixLQUFZLHdFQUFTLE9BQU87QUFBRSxXQUFLLEVBQUU7QUFBVCxLQUFQLENBQXJCLEVBQVIsUUFBUSxDQUFSO0FBQ0Q7QUFoRXVCLENBQVgsQ0FBZiIsImZpbGUiOiI3NzQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJy4vVkdyaWQuc2FzcydcblxuaW1wb3J0IFZ1ZSwgeyBWTm9kZSwgUHJvcE9wdGlvbnMgfSBmcm9tICd2dWUnXG5pbXBvcnQgbWVyZ2VEYXRhIGZyb20gJy4uLy4uL3V0aWwvbWVyZ2VEYXRhJ1xuaW1wb3J0IHsgdXBwZXJGaXJzdCB9IGZyb20gJy4uLy4uL3V0aWwvaGVscGVycydcblxuLy8gbm8geHNcbmNvbnN0IGJyZWFrcG9pbnRzID0gWydzbScsICdtZCcsICdsZycsICd4bCddXG5cbmNvbnN0IGJyZWFrcG9pbnRQcm9wcyA9ICgoKSA9PiB7XG4gIHJldHVybiBicmVha3BvaW50cy5yZWR1Y2UoKHByb3BzLCB2YWwpID0+IHtcbiAgICBwcm9wc1t2YWxdID0ge1xuICAgICAgdHlwZTogW0Jvb2xlYW4sIFN0cmluZywgTnVtYmVyXSxcbiAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIH1cbiAgICByZXR1cm4gcHJvcHNcbiAgfSwge30gYXMgRGljdGlvbmFyeTxQcm9wT3B0aW9ucz4pXG59KSgpXG5cbmNvbnN0IG9mZnNldFByb3BzID0gKCgpID0+IHtcbiAgcmV0dXJuIGJyZWFrcG9pbnRzLnJlZHVjZSgocHJvcHMsIHZhbCkgPT4ge1xuICAgIHByb3BzWydvZmZzZXQnICsgdXBwZXJGaXJzdCh2YWwpXSA9IHtcbiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH1cbiAgICByZXR1cm4gcHJvcHNcbiAgfSwge30gYXMgRGljdGlvbmFyeTxQcm9wT3B0aW9ucz4pXG59KSgpXG5cbmNvbnN0IG9yZGVyUHJvcHMgPSAoKCkgPT4ge1xuICByZXR1cm4gYnJlYWtwb2ludHMucmVkdWNlKChwcm9wcywgdmFsKSA9PiB7XG4gICAgcHJvcHNbJ29yZGVyJyArIHVwcGVyRmlyc3QodmFsKV0gPSB7XG4gICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLFxuICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICB9XG4gICAgcmV0dXJuIHByb3BzXG4gIH0sIHt9IGFzIERpY3Rpb25hcnk8UHJvcE9wdGlvbnM+KVxufSkoKVxuXG5jb25zdCBwcm9wTWFwID0ge1xuICBjb2w6IE9iamVjdC5rZXlzKGJyZWFrcG9pbnRQcm9wcyksXG4gIG9mZnNldDogT2JqZWN0LmtleXMob2Zmc2V0UHJvcHMpLFxuICBvcmRlcjogT2JqZWN0LmtleXMob3JkZXJQcm9wcyksXG59XG5cbmZ1bmN0aW9uIGJyZWFrcG9pbnRDbGFzcyAodHlwZToga2V5b2YgdHlwZW9mIHByb3BNYXAsIHByb3A6IHN0cmluZywgdmFsOiBib29sZWFuIHwgc3RyaW5nIHwgbnVtYmVyKSB7XG4gIGxldCBjbGFzc05hbWUgPSB0eXBlXG4gIGlmICh2YWwgPT0gbnVsbCB8fCB2YWwgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG4gIGlmIChwcm9wKSB7XG4gICAgY29uc3QgYnJlYWtwb2ludCA9IHByb3AucmVwbGFjZSh0eXBlLCAnJylcbiAgICBjbGFzc05hbWUgKz0gYC0ke2JyZWFrcG9pbnR9YFxuICB9XG4gIC8vIEhhbmRsaW5nIHRoZSBib29sZWFuIHN0eWxlIHByb3Agd2hlbiBhY2NlcHRpbmcgW0Jvb2xlYW4sIFN0cmluZywgTnVtYmVyXVxuICAvLyBtZWFucyBWdWUgd2lsbCBub3QgY29udmVydCA8di1jb2wgc20+PC92LWNvbD4gdG8gc206IHRydWUgZm9yIHVzLlxuICAvLyBTaW5jZSB0aGUgZGVmYXVsdCBpcyBmYWxzZSwgYW4gZW1wdHkgc3RyaW5nIGluZGljYXRlcyB0aGUgcHJvcCdzIHByZXNlbmNlLlxuICBpZiAodHlwZSA9PT0gJ2NvbCcgJiYgKHZhbCA9PT0gJycgfHwgdmFsID09PSB0cnVlKSkge1xuICAgIC8vIC5jb2wtbWRcbiAgICByZXR1cm4gY2xhc3NOYW1lLnRvTG93ZXJDYXNlKClcbiAgfVxuICAvLyAub3JkZXItbWQtNlxuICBjbGFzc05hbWUgKz0gYC0ke3ZhbH1gXG4gIHJldHVybiBjbGFzc05hbWUudG9Mb3dlckNhc2UoKVxufVxuXG5jb25zdCBjYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBhbnlbXT4oKVxuXG5leHBvcnQgZGVmYXVsdCBWdWUuZXh0ZW5kKHtcbiAgbmFtZTogJ3YtY29sJyxcbiAgZnVuY3Rpb25hbDogdHJ1ZSxcbiAgcHJvcHM6IHtcbiAgICBjb2xzOiB7XG4gICAgICB0eXBlOiBbQm9vbGVhbiwgU3RyaW5nLCBOdW1iZXJdLFxuICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgfSxcbiAgICAuLi5icmVha3BvaW50UHJvcHMsXG4gICAgb2Zmc2V0OiB7XG4gICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLFxuICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICB9LFxuICAgIC4uLm9mZnNldFByb3BzLFxuICAgIG9yZGVyOiB7XG4gICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLFxuICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICB9LFxuICAgIC4uLm9yZGVyUHJvcHMsXG4gICAgYWxpZ25TZWxmOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgdmFsaWRhdG9yOiAoc3RyOiBhbnkpID0+IFsnYXV0bycsICdzdGFydCcsICdlbmQnLCAnY2VudGVyJywgJ2Jhc2VsaW5lJywgJ3N0cmV0Y2gnXS5pbmNsdWRlcyhzdHIpLFxuICAgIH0sXG4gICAgdGFnOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnZGl2JyxcbiAgICB9LFxuICB9LFxuICByZW5kZXIgKGgsIHsgcHJvcHMsIGRhdGEsIGNoaWxkcmVuLCBwYXJlbnQgfSk6IFZOb2RlIHtcbiAgICAvLyBTdXBlci1mYXN0IG1lbW9pemF0aW9uIGJhc2VkIG9uIHByb3BzLCA1eCBmYXN0ZXIgdGhhbiBKU09OLnN0cmluZ2lmeVxuICAgIGxldCBjYWNoZUtleSA9ICcnXG4gICAgZm9yIChjb25zdCBwcm9wIGluIHByb3BzKSB7XG4gICAgICBjYWNoZUtleSArPSBTdHJpbmcoKHByb3BzIGFzIGFueSlbcHJvcF0pXG4gICAgfVxuICAgIGxldCBjbGFzc0xpc3QgPSBjYWNoZS5nZXQoY2FjaGVLZXkpXG5cbiAgICBpZiAoIWNsYXNzTGlzdCkge1xuICAgICAgY2xhc3NMaXN0ID0gW11cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBgY29sYCwgYG9mZnNldGAsIGBvcmRlcmAgYnJlYWtwb2ludCBwcm9wc1xuICAgICAgbGV0IHR5cGU6IGtleW9mIHR5cGVvZiBwcm9wTWFwXG4gICAgICBmb3IgKHR5cGUgaW4gcHJvcE1hcCkge1xuICAgICAgICBwcm9wTWFwW3R5cGVdLmZvckVhY2gocHJvcCA9PiB7XG4gICAgICAgICAgY29uc3QgdmFsdWU6IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gPSAocHJvcHMgYXMgYW55KVtwcm9wXVxuICAgICAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IGJyZWFrcG9pbnRDbGFzcyh0eXBlLCBwcm9wLCB2YWx1ZSlcbiAgICAgICAgICBpZiAoY2xhc3NOYW1lKSBjbGFzc0xpc3QhLnB1c2goY2xhc3NOYW1lKVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBoYXNDb2xDbGFzc2VzID0gY2xhc3NMaXN0LnNvbWUoY2xhc3NOYW1lID0+IGNsYXNzTmFtZS5zdGFydHNXaXRoKCdjb2wtJykpXG5cbiAgICAgIGNsYXNzTGlzdC5wdXNoKHtcbiAgICAgICAgLy8gRGVmYXVsdCB0byAuY29sIGlmIG5vIG90aGVyIGNvbC17YnB9LSogY2xhc3NlcyBnZW5lcmF0ZWQgbm9yIGBjb2xzYCBzcGVjaWZpZWQuXG4gICAgICAgIGNvbDogIWhhc0NvbENsYXNzZXMgfHwgIXByb3BzLmNvbHMsXG4gICAgICAgIFtgY29sLSR7cHJvcHMuY29sc31gXTogcHJvcHMuY29scyxcbiAgICAgICAgW2BvZmZzZXQtJHtwcm9wcy5vZmZzZXR9YF06IHByb3BzLm9mZnNldCxcbiAgICAgICAgW2BvcmRlci0ke3Byb3BzLm9yZGVyfWBdOiBwcm9wcy5vcmRlcixcbiAgICAgICAgW2BhbGlnbi1zZWxmLSR7cHJvcHMuYWxpZ25TZWxmfWBdOiBwcm9wcy5hbGlnblNlbGYsXG4gICAgICB9KVxuXG4gICAgICBjYWNoZS5zZXQoY2FjaGVLZXksIGNsYXNzTGlzdClcbiAgICB9XG5cbiAgICByZXR1cm4gaChwcm9wcy50YWcsIG1lcmdlRGF0YShkYXRhLCB7IGNsYXNzOiBjbGFzc0xpc3QgfSksIGNoaWxkcmVuKVxuICB9LFxufSlcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///774\n")},775:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(17);\n/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(11);\n/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(18);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2);\n/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(55);\n/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(70);\n/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(35);\n/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(19);\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(50);\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(92);\n/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var core_js_modules_es_map_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(495);\n/* harmony import */ var core_js_modules_es_map_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_map_js__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(25);\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(43);\n/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var core_js_modules_esnext_map_delete_all_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(496);\n/* harmony import */ var core_js_modules_esnext_map_delete_all_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_delete_all_js__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var core_js_modules_esnext_map_every_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(497);\n/* harmony import */ var core_js_modules_esnext_map_every_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_every_js__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var core_js_modules_esnext_map_filter_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(498);\n/* harmony import */ var core_js_modules_esnext_map_filter_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_filter_js__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var core_js_modules_esnext_map_find_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(499);\n/* harmony import */ var core_js_modules_esnext_map_find_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_find_js__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var core_js_modules_esnext_map_find_key_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(500);\n/* harmony import */ var core_js_modules_esnext_map_find_key_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_find_key_js__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var core_js_modules_esnext_map_includes_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(501);\n/* harmony import */ var core_js_modules_esnext_map_includes_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_includes_js__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var core_js_modules_esnext_map_key_of_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(502);\n/* harmony import */ var core_js_modules_esnext_map_key_of_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_key_of_js__WEBPACK_IMPORTED_MODULE_20__);\n/* harmony import */ var core_js_modules_esnext_map_map_keys_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(503);\n/* harmony import */ var core_js_modules_esnext_map_map_keys_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_map_keys_js__WEBPACK_IMPORTED_MODULE_21__);\n/* harmony import */ var core_js_modules_esnext_map_map_values_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(504);\n/* harmony import */ var core_js_modules_esnext_map_map_values_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_map_values_js__WEBPACK_IMPORTED_MODULE_22__);\n/* harmony import */ var core_js_modules_esnext_map_merge_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(505);\n/* harmony import */ var core_js_modules_esnext_map_merge_js__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_merge_js__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var core_js_modules_esnext_map_reduce_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(506);\n/* harmony import */ var core_js_modules_esnext_map_reduce_js__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_reduce_js__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var core_js_modules_esnext_map_some_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(507);\n/* harmony import */ var core_js_modules_esnext_map_some_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_some_js__WEBPACK_IMPORTED_MODULE_25__);\n/* harmony import */ var core_js_modules_esnext_map_update_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(508);\n/* harmony import */ var core_js_modules_esnext_map_update_js__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_update_js__WEBPACK_IMPORTED_MODULE_26__);\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(42);\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_27__);\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(14);\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_28___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_28__);\n/* harmony import */ var _src_components_VGrid_VGrid_sass__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(509);\n/* harmony import */ var _src_components_VGrid_VGrid_sass__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(_src_components_VGrid_VGrid_sass__WEBPACK_IMPORTED_MODULE_29__);\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(4);\n/* harmony import */ var _util_mergeData__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(72);\n/* harmony import */ var _util_helpers__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(0);\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // no xs\n\nvar breakpoints = ['sm', 'md', 'lg', 'xl'];\nvar ALIGNMENT = ['start', 'end', 'center'];\n\nfunction makeProps(prefix, def) {\n  return breakpoints.reduce(function (props, val) {\n    props[prefix + Object(_util_helpers__WEBPACK_IMPORTED_MODULE_32__[/* upperFirst */ \"A\"])(val)] = def();\n    return props;\n  }, {});\n}\n\nvar alignValidator = function alignValidator(str) {\n  return [].concat(ALIGNMENT, ['baseline', 'stretch']).includes(str);\n};\n\nvar alignProps = makeProps('align', function () {\n  return {\n    type: String,\n    default: null,\n    validator: alignValidator\n  };\n});\n\nvar justifyValidator = function justifyValidator(str) {\n  return [].concat(ALIGNMENT, ['space-between', 'space-around']).includes(str);\n};\n\nvar justifyProps = makeProps('justify', function () {\n  return {\n    type: String,\n    default: null,\n    validator: justifyValidator\n  };\n});\n\nvar alignContentValidator = function alignContentValidator(str) {\n  return [].concat(ALIGNMENT, ['space-between', 'space-around', 'stretch']).includes(str);\n};\n\nvar alignContentProps = makeProps('alignContent', function () {\n  return {\n    type: String,\n    default: null,\n    validator: alignContentValidator\n  };\n});\nvar propMap = {\n  align: Object.keys(alignProps),\n  justify: Object.keys(justifyProps),\n  alignContent: Object.keys(alignContentProps)\n};\nvar classMap = {\n  align: 'align',\n  justify: 'justify',\n  alignContent: 'align-content'\n};\n\nfunction breakpointClass(type, prop, val) {\n  var className = classMap[type];\n\n  if (val == null) {\n    return undefined;\n  }\n\n  if (prop) {\n    // alignSm -> Sm\n    var breakpoint = prop.replace(type, '');\n    className += \"-\".concat(breakpoint);\n  } // .align-items-sm-center\n\n\n  className += \"-\".concat(val);\n  return className.toLowerCase();\n}\n\nvar cache = new Map();\n/* harmony default export */ __webpack_exports__[\"a\"] = (vue__WEBPACK_IMPORTED_MODULE_30__[\"default\"].extend({\n  name: 'v-row',\n  functional: true,\n  props: _objectSpread(_objectSpread(_objectSpread({\n    tag: {\n      type: String,\n      default: 'div'\n    },\n    dense: Boolean,\n    noGutters: Boolean,\n    align: {\n      type: String,\n      default: null,\n      validator: alignValidator\n    }\n  }, alignProps), {}, {\n    justify: {\n      type: String,\n      default: null,\n      validator: justifyValidator\n    }\n  }, justifyProps), {}, {\n    alignContent: {\n      type: String,\n      default: null,\n      validator: alignContentValidator\n    }\n  }, alignContentProps),\n  render: function render(h, _ref) {\n    var props = _ref.props,\n        data = _ref.data,\n        children = _ref.children;\n    // Super-fast memoization based on props, 5x faster than JSON.stringify\n    var cacheKey = '';\n\n    for (var prop in props) {\n      cacheKey += String(props[prop]);\n    }\n\n    var classList = cache.get(cacheKey);\n\n    if (!classList) {\n      (function () {\n        var _classList$push;\n\n        classList = []; // Loop through `align`, `justify`, `alignContent` breakpoint props\n\n        var type;\n\n        for (type in propMap) {\n          propMap[type].forEach(function (prop) {\n            var value = props[prop];\n            var className = breakpointClass(type, prop, value);\n            if (className) classList.push(className);\n          });\n        }\n\n        classList.push((_classList$push = {\n          'no-gutters': props.noGutters,\n          'row--dense': props.dense\n        }, Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_classList$push, \"align-\".concat(props.align), props.align), Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_classList$push, \"justify-\".concat(props.justify), props.justify), Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_classList$push, \"align-content-\".concat(props.alignContent), props.alignContent), _classList$push));\n        cache.set(cacheKey, classList);\n      })();\n    }\n\n    return h(props.tag, Object(_util_mergeData__WEBPACK_IMPORTED_MODULE_31__[/* default */ \"a\"])(data, {\n      staticClass: 'row',\n      class: classList\n    }), children);\n  }\n}));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvVkdyaWQvVlJvdy50cz9lMDgzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFDQTtDQUdBOztBQUNBLElBQU0sV0FBVyxHQUFHLG1CQUFwQixJQUFvQixDQUFwQjtBQUVBLElBQU0sU0FBUyxHQUFHLGlCQUFsQixRQUFrQixDQUFsQjs7QUFFQSxnQ0FBMEQ7QUFDeEQsU0FBTyxXQUFXLENBQVgsT0FBbUIsc0JBQWU7QUFDdkMsU0FBSyxDQUFDLE1BQU0sR0FBRyx5RUFBVSxDQUF6QixHQUF5QixDQUFwQixDQUFMLEdBQWtDLEdBQWxDO0FBQ0E7QUFGSyxLQUFQLEVBQU8sQ0FBUDtBQUlEOztBQUVELElBQU0sY0FBYyxHQUFJLFNBQWxCLGNBQWtCLElBQUQ7QUFBQSxTQUFjLHVEQUFyQyxHQUFxQyxDQUFkO0FBQUEsQ0FBdkI7O0FBQ0EsSUFBTSxVQUFVLEdBQUcsU0FBUyxVQUFVO0FBQUEsU0FBTztBQUMzQyxRQUFJLEVBRHVDO0FBRTNDLFdBQU8sRUFGb0M7QUFHM0MsYUFBUyxFQUFFO0FBSGdDLEdBQVA7QUFBQSxDQUFWLENBQTVCOztBQU1BLElBQU0sZ0JBQWdCLEdBQUksU0FBcEIsZ0JBQW9CLElBQUQ7QUFBQSxTQUFjLGlFQUF2QyxHQUF1QyxDQUFkO0FBQUEsQ0FBekI7O0FBQ0EsSUFBTSxZQUFZLEdBQUcsU0FBUyxZQUFZO0FBQUEsU0FBTztBQUMvQyxRQUFJLEVBRDJDO0FBRS9DLFdBQU8sRUFGd0M7QUFHL0MsYUFBUyxFQUFFO0FBSG9DLEdBQVA7QUFBQSxDQUFaLENBQTlCOztBQU1BLElBQU0scUJBQXFCLEdBQUksU0FBekIscUJBQXlCLElBQUQ7QUFBQSxTQUFjLDRFQUE1QyxHQUE0QyxD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QXFCZjs7QUFFRCxXQUFPLENBQUMsQ0FDTixLQUFLLENBREMsS0FFTix3RUFBUyxPQUFPO0FBQ2QsaUJBQVcsRUFERztBQUVkLFdBQUssRUFBRTtBQUZPLEtBQVAsQ0FGSCxFQUFSLFFBQVEsQ0FBUjtBQVFEO0FBcEV1QixDQUFYLENBQWYiLCJmaWxlIjoiNzc1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICcuL1ZHcmlkLnNhc3MnXG5cbmltcG9ydCBWdWUsIHsgUHJvcE9wdGlvbnMgfSBmcm9tICd2dWUnXG5pbXBvcnQgbWVyZ2VEYXRhIGZyb20gJy4uLy4uL3V0aWwvbWVyZ2VEYXRhJ1xuaW1wb3J0IHsgdXBwZXJGaXJzdCB9IGZyb20gJy4uLy4uL3V0aWwvaGVscGVycydcblxuLy8gbm8geHNcbmNvbnN0IGJyZWFrcG9pbnRzID0gWydzbScsICdtZCcsICdsZycsICd4bCddXG5cbmNvbnN0IEFMSUdOTUVOVCA9IFsnc3RhcnQnLCAnZW5kJywgJ2NlbnRlciddXG5cbmZ1bmN0aW9uIG1ha2VQcm9wcyAocHJlZml4OiBzdHJpbmcsIGRlZjogKCkgPT4gUHJvcE9wdGlvbnMpIHtcbiAgcmV0dXJuIGJyZWFrcG9pbnRzLnJlZHVjZSgocHJvcHMsIHZhbCkgPT4ge1xuICAgIHByb3BzW3ByZWZpeCArIHVwcGVyRmlyc3QodmFsKV0gPSBkZWYoKVxuICAgIHJldHVybiBwcm9wc1xuICB9LCB7fSBhcyBEaWN0aW9uYXJ5PFByb3BPcHRpb25zPilcbn1cblxuY29uc3QgYWxpZ25WYWxpZGF0b3IgPSAoc3RyOiBhbnkpID0+IFsuLi5BTElHTk1FTlQsICdiYXNlbGluZScsICdzdHJldGNoJ10uaW5jbHVkZXMoc3RyKVxuY29uc3QgYWxpZ25Qcm9wcyA9IG1ha2VQcm9wcygnYWxpZ24nLCAoKSA9PiAoe1xuICB0eXBlOiBTdHJpbmcsXG4gIGRlZmF1bHQ6IG51bGwsXG4gIHZhbGlkYXRvcjogYWxpZ25WYWxpZGF0b3IsXG59KSlcblxuY29uc3QganVzdGlmeVZhbGlkYXRvciA9IChzdHI6IGFueSkgPT4gWy4uLkFMSUdOTUVOVCwgJ3NwYWNlLWJldHdlZW4nLCAnc3BhY2UtYXJvdW5kJ10uaW5jbHVkZXMoc3RyKVxuY29uc3QganVzdGlmeVByb3BzID0gbWFrZVByb3BzKCdqdXN0aWZ5JywgKCkgPT4gKHtcbiAgdHlwZTogU3RyaW5nLFxuICBkZWZhdWx0OiBudWxsLFxuICB2YWxpZGF0b3I6IGp1c3RpZnlWYWxpZGF0b3IsXG59KSlcblxuY29uc3QgYWxpZ25Db250ZW50VmFsaWRhdG9yID0gKHN0cjogYW55KSA9PiBbLi4uQUxJR05NRU5ULCAnc3BhY2UtYmV0d2VlbicsICdzcGFjZS1hcm91bmQnLCAnc3RyZXRjaCddLmluY2x1ZGVzKHN0cilcbmNvbnN0IGFsaWduQ29udGVudFByb3BzID0gbWFrZVByb3BzKCdhbGlnbkNvbnRlbnQnLCAoKSA9PiAoe1xuICB0eXBlOiBTdHJpbmcsXG4gIGRlZmF1bHQ6IG51bGwsXG4gIHZhbGlkYXRvcjogYWxpZ25Db250ZW50VmFsaWRhdG9yLFxufSkpXG5cbmNvbnN0IHByb3BNYXAgPSB7XG4gIGFsaWduOiBPYmplY3Qua2V5cyhhbGlnblByb3BzKSxcbiAganVzdGlmeTogT2JqZWN0LmtleXMoanVzdGlmeVByb3BzKSxcbiAgYWxpZ25Db250ZW50OiBPYmplY3Qua2V5cyhhbGlnbkNvbnRlbnRQcm9wcyksXG59XG5cbmNvbnN0IGNsYXNzTWFwID0ge1xuICBhbGlnbjogJ2FsaWduJyxcbiAganVzdGlmeTogJ2p1c3RpZnknLFxuICBhbGlnbkNvbnRlbnQ6ICdhbGlnbi1jb250ZW50Jyxcbn1cblxuZnVuY3Rpb24gYnJlYWtwb2ludENsYXNzICh0eXBlOiBrZXlvZiB0eXBlb2YgcHJvcE1hcCwgcHJvcDogc3RyaW5nLCB2YWw6IHN0cmluZykge1xuICBsZXQgY2xhc3NOYW1lID0gY2xhc3NNYXBbdHlwZV1cbiAgaWYgKHZhbCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG4gIGlmIChwcm9wKSB7XG4gICAgLy8gYWxpZ25TbSAtPiBTbVxuICAgIGNvbnN0IGJyZWFrcG9pbnQgPSBwcm9wLnJlcGxhY2UodHlwZSwgJycpXG4gICAgY2xhc3NOYW1lICs9IGAtJHticmVha3BvaW50fWBcbiAgfVxuICAvLyAuYWxpZ24taXRlbXMtc20tY2VudGVyXG4gIGNsYXNzTmFtZSArPSBgLSR7dmFsfWBcbiAgcmV0dXJuIGNsYXNzTmFtZS50b0xvd2VyQ2FzZSgpXG59XG5cbmNvbnN0IGNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIGFueVtdPigpXG5cbmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoe1xuICBuYW1lOiAndi1yb3cnLFxuICBmdW5jdGlvbmFsOiB0cnVlLFxuICBwcm9wczoge1xuICAgIHRhZzoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJ2RpdicsXG4gICAgfSxcbiAgICBkZW5zZTogQm9vbGVhbixcbiAgICBub0d1dHRlcnM6IEJvb2xlYW4sXG4gICAgYWxpZ246IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICB2YWxpZGF0b3I6IGFsaWduVmFsaWRhdG9yLFxuICAgIH0sXG4gICAgLi4uYWxpZ25Qcm9wcyxcbiAgICBqdXN0aWZ5OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgdmFsaWRhdG9yOiBqdXN0aWZ5VmFsaWRhdG9yLFxuICAgIH0sXG4gICAgLi4uanVzdGlmeVByb3BzLFxuICAgIGFsaWduQ29udGVudDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgIHZhbGlkYXRvcjogYWxpZ25Db250ZW50VmFsaWRhdG9yLFxuICAgIH0sXG4gICAgLi4uYWxpZ25Db250ZW50UHJvcHMsXG4gIH0sXG4gIHJlbmRlciAoaCwgeyBwcm9wcywgZGF0YSwgY2hpbGRyZW4gfSkge1xuICAgIC8vIFN1cGVyLWZhc3QgbWVtb2l6YXRpb24gYmFzZWQgb24gcHJvcHMsIDV4IGZhc3RlciB0aGFuIEpTT04uc3RyaW5naWZ5XG4gICAgbGV0IGNhY2hlS2V5ID0gJydcbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gcHJvcHMpIHtcbiAgICAgIGNhY2hlS2V5ICs9IFN0cmluZygocHJvcHMgYXMgYW55KVtwcm9wXSlcbiAgICB9XG4gICAgbGV0IGNsYXNzTGlzdCA9IGNhY2hlLmdldChjYWNoZUtleSlcblxuICAgIGlmICghY2xhc3NMaXN0KSB7XG4gICAgICBjbGFzc0xpc3QgPSBbXVxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGBhbGlnbmAsIGBqdXN0aWZ5YCwgYGFsaWduQ29udGVudGAgYnJlYWtwb2ludCBwcm9wc1xuICAgICAgbGV0IHR5cGU6IGtleW9mIHR5cGVvZiBwcm9wTWFwXG4gICAgICBmb3IgKHR5cGUgaW4gcHJvcE1hcCkge1xuICAgICAgICBwcm9wTWFwW3R5cGVdLmZvckVhY2gocHJvcCA9PiB7XG4gICAgICAgICAgY29uc3QgdmFsdWU6IHN0cmluZyA9IChwcm9wcyBhcyBhbnkpW3Byb3BdXG4gICAgICAgICAgY29uc3QgY2xhc3NOYW1lID0gYnJlYWtwb2ludENsYXNzKHR5cGUsIHByb3AsIHZhbHVlKVxuICAgICAgICAgIGlmIChjbGFzc05hbWUpIGNsYXNzTGlzdCEucHVzaChjbGFzc05hbWUpXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGNsYXNzTGlzdC5wdXNoKHtcbiAgICAgICAgJ25vLWd1dHRlcnMnOiBwcm9wcy5ub0d1dHRlcnMsXG4gICAgICAgICdyb3ctLWRlbnNlJzogcHJvcHMuZGVuc2UsXG4gICAgICAgIFtgYWxpZ24tJHtwcm9wcy5hbGlnbn1gXTogcHJvcHMuYWxpZ24sXG4gICAgICAgIFtganVzdGlmeS0ke3Byb3BzLmp1c3RpZnl9YF06IHByb3BzLmp1c3RpZnksXG4gICAgICAgIFtgYWxpZ24tY29udGVudC0ke3Byb3BzLmFsaWduQ29udGVudH1gXTogcHJvcHMuYWxpZ25Db250ZW50LFxuICAgICAgfSlcblxuICAgICAgY2FjaGUuc2V0KGNhY2hlS2V5LCBjbGFzc0xpc3QpXG4gICAgfVxuXG4gICAgcmV0dXJuIGgoXG4gICAgICBwcm9wcy50YWcsXG4gICAgICBtZXJnZURhdGEoZGF0YSwge1xuICAgICAgICBzdGF0aWNDbGFzczogJ3JvdycsXG4gICAgICAgIGNsYXNzOiBjbGFzc0xpc3QsXG4gICAgICB9KSxcbiAgICAgIGNoaWxkcmVuXG4gICAgKVxuICB9LFxufSlcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///775\n")},785:function(module,exports,__webpack_require__){eval("// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(786);\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = __webpack_require__(27).default\nvar update = add(\"5c8fbe94\", content, true, {\"sourceMap\":false});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdnVldGlmeS9zcmMvY29tcG9uZW50cy9WVGV4dGFyZWEvVlRleHRhcmVhLnNhc3M/ZGYzMCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBLGNBQWMsbUJBQU8sQ0FBQyxHQUF5TDtBQUMvTTtBQUNBLDRDQUE0QyxRQUFTO0FBQ3JEO0FBQ0E7QUFDQSxVQUFVLG1CQUFPLENBQUMsRUFBc0Q7QUFDeEUsNkNBQTZDLGtCQUFrQiIsImZpbGUiOiI3ODUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vLi4vY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS02LW9uZU9mLTEtMSEuLi8uLi8uLi8uLi9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3JlZi0tNi1vbmVPZi0xLTIhLi4vLi4vLi4vLi4vc2Fzcy1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tNi1vbmVPZi0xLTMhLi9WVGV4dGFyZWEuc2Fzc1wiKTtcbmlmKGNvbnRlbnQuX19lc01vZHVsZSkgY29udGVudCA9IGNvbnRlbnQuZGVmYXVsdDtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgYWRkID0gcmVxdWlyZShcIiEuLi8uLi8uLi8uLi92dWUtc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXNDbGllbnQuanNcIikuZGVmYXVsdFxudmFyIHVwZGF0ZSA9IGFkZChcIjVjOGZiZTk0XCIsIGNvbnRlbnQsIHRydWUsIHtcInNvdXJjZU1hcFwiOmZhbHNlfSk7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///785\n")},786:function(module,exports,__webpack_require__){eval('// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(26);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, ".v-textarea textarea{align-self:stretch;flex:1 1 auto;line-height:1.75rem;max-width:100%;min-height:32px;outline:none;padding:0;width:100%}.v-textarea .v-text-field__prefix,.v-textarea .v-text-field__suffix{padding-top:2px;align-self:start}.v-textarea.v-text-field--box .v-text-field__prefix,.v-textarea.v-text-field--box textarea,.v-textarea.v-text-field--enclosed .v-text-field__prefix,.v-textarea.v-text-field--enclosed textarea{margin-top:24px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) textarea{margin-top:10px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-label{top:18px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense textarea{margin-top:6px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-outer{align-self:flex-start;margin-top:8px}.v-textarea.v-text-field--solo{align-items:flex-start}.v-textarea.v-text-field--solo .v-input__append-inner,.v-textarea.v-text-field--solo .v-input__append-outer,.v-textarea.v-text-field--solo .v-input__prepend-inner,.v-textarea.v-text-field--solo .v-input__prepend-outer{align-self:flex-start;margin-top:12px}.v-application--is-ltr .v-textarea.v-text-field--solo .v-input__append-inner{padding-left:12px}.v-application--is-rtl .v-textarea.v-text-field--solo .v-input__append-inner{padding-right:12px}.v-textarea--auto-grow textarea{overflow:hidden}.v-textarea--no-resize textarea{resize:none}.v-textarea.v-text-field--enclosed .v-text-field__slot{align-self:stretch}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-right:-12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-left:-12px}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-right:12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-left:12px}", ""]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdnVldGlmeS9zcmMvY29tcG9uZW50cy9WVGV4dGFyZWEvVlRleHRhcmVhLnNhc3M/NDZmYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLGtDQUFrQyxtQkFBTyxDQUFDLEVBQTRDO0FBQ3RGO0FBQ0E7QUFDQSw4QkFBOEIsUUFBUyx3QkFBd0IsbUJBQW1CLGNBQWMsb0JBQW9CLGVBQWUsZ0JBQWdCLGFBQWEsVUFBVSxXQUFXLG9FQUFvRSxnQkFBZ0IsaUJBQWlCLGdNQUFnTSxnQkFBZ0IsNG5DQUE0bkMsZ0JBQWdCLDRWQUE0VixTQUFTLG9qQ0FBb2pDLGVBQWUsdy9DQUF3L0Msc0JBQXNCLGVBQWUsK0JBQStCLHVCQUF1QiwwTkFBME4sc0JBQXNCLGdCQUFnQiw2RUFBNkUsa0JBQWtCLDZFQUE2RSxtQkFBbUIsZ0NBQWdDLGdCQUFnQixnQ0FBZ0MsWUFBWSx1REFBdUQsbUJBQW1CLDhFQUE4RSxtQkFBbUIsOEVBQThFLGtCQUFrQix1RkFBdUYsbUJBQW1CLHVGQUF1RixrQkFBa0I7QUFDMW1MO0FBQ0EiLCJmaWxlIjoiNzg2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xudmFyIF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIik7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiLnYtdGV4dGFyZWEgdGV4dGFyZWF7YWxpZ24tc2VsZjpzdHJldGNoO2ZsZXg6MSAxIGF1dG87bGluZS1oZWlnaHQ6MS43NXJlbTttYXgtd2lkdGg6MTAwJTttaW4taGVpZ2h0OjMycHg7b3V0bGluZTpub25lO3BhZGRpbmc6MDt3aWR0aDoxMDAlfS52LXRleHRhcmVhIC52LXRleHQtZmllbGRfX3ByZWZpeCwudi10ZXh0YXJlYSAudi10ZXh0LWZpZWxkX19zdWZmaXh7cGFkZGluZy10b3A6MnB4O2FsaWduLXNlbGY6c3RhcnR9LnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1ib3ggLnYtdGV4dC1maWVsZF9fcHJlZml4LC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tYm94IHRleHRhcmVhLC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tZW5jbG9zZWQgLnYtdGV4dC1maWVsZF9fcHJlZml4LC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tZW5jbG9zZWQgdGV4dGFyZWF7bWFyZ2luLXRvcDoyNHB4fS52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tYm94LnYtdGV4dC1maWVsZC0tb3V0bGluZWQ6bm90KC52LWlucHV0LS1kZW5zZSkgLnYtdGV4dC1maWVsZF9fcHJlZml4LC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tYm94LnYtdGV4dC1maWVsZC0tb3V0bGluZWQ6bm90KC52LWlucHV0LS1kZW5zZSkgLnYtdGV4dC1maWVsZF9fc3VmZml4LC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tYm94LnYtdGV4dC1maWVsZC0tb3V0bGluZWQ6bm90KC52LWlucHV0LS1kZW5zZSkgdGV4dGFyZWEsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1ib3gudi10ZXh0LWZpZWxkLS1zaW5nbGUtbGluZTpub3QoLnYtaW5wdXQtLWRlbnNlKSAudi10ZXh0LWZpZWxkX19wcmVmaXgsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1ib3gudi10ZXh0LWZpZWxkLS1zaW5nbGUtbGluZTpub3QoLnYtaW5wdXQtLWRlbnNlKSAudi10ZXh0LWZpZWxkX19zdWZmaXgsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1ib3gudi10ZXh0LWZpZWxkLS1zaW5nbGUtbGluZTpub3QoLnYtaW5wdXQtLWRlbnNlKSB0ZXh0YXJlYSwudi10ZXh0YXJlYS52LXRleHQtZmllbGQtLWVuY2xvc2VkLnYtdGV4dC1maWVsZC0tb3V0bGluZWQ6bm90KC52LWlucHV0LS1kZW5zZSkgLnYtdGV4dC1maWVsZF9fcHJlZml4LC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tZW5jbG9zZWQudi10ZXh0LWZpZWxkLS1vdXRsaW5lZDpub3QoLnYtaW5wdXQtLWRlbnNlKSAudi10ZXh0LWZpZWxkX19zdWZmaXgsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1lbmNsb3NlZC52LXRleHQtZmllbGQtLW91dGxpbmVkOm5vdCgudi1pbnB1dC0tZGVuc2UpIHRleHRhcmVhLC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tZW5jbG9zZWQudi10ZXh0LWZpZWxkLS1zaW5nbGUtbGluZTpub3QoLnYtaW5wdXQtLWRlbnNlKSAudi10ZXh0LWZpZWxkX19wcmVmaXgsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1lbmNsb3NlZC52LXRleHQtZmllbGQtLXNpbmdsZS1saW5lOm5vdCgudi1pbnB1dC0tZGVuc2UpIC52LXRleHQtZmllbGRfX3N1ZmZpeCwudi10ZXh0YXJlYS52LXRleHQtZmllbGQtLWVuY2xvc2VkLnYtdGV4dC1maWVsZC0tc2luZ2xlLWxpbmU6bm90KC52LWlucHV0LS1kZW5zZSkgdGV4dGFyZWF7bWFyZ2luLXRvcDoxMHB4fS52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tYm94LnYtdGV4dC1maWVsZC0tb3V0bGluZWQ6bm90KC52LWlucHV0LS1kZW5zZSkgLnYtbGFiZWwsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1ib3gudi10ZXh0LWZpZWxkLS1zaW5nbGUtbGluZTpub3QoLnYtaW5wdXQtLWRlbnNlKSAudi1sYWJlbCwudi10ZXh0YXJlYS52LXRleHQtZmllbGQtLWVuY2xvc2VkLnYtdGV4dC1maWVsZC0tb3V0bGluZWQ6bm90KC52LWlucHV0LS1kZW5zZSkgLnYtbGFiZWwsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1lbmNsb3NlZC52LXRleHQtZmllbGQtLXNpbmdsZS1saW5lOm5vdCgudi1pbnB1dC0tZGVuc2UpIC52LWxhYmVse3RvcDoxOHB4fS52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tYm94LnYtdGV4dC1maWVsZC0tb3V0bGluZWQudi1pbnB1dC0tZGVuc2UgLnYtdGV4dC1maWVsZF9fcHJlZml4LC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tYm94LnYtdGV4dC1maWVsZC0tb3V0bGluZWQudi1pbnB1dC0tZGVuc2UgLnYtdGV4dC1maWVsZF9fc3VmZml4LC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tYm94LnYtdGV4dC1maWVsZC0tb3V0bGluZWQudi1pbnB1dC0tZGVuc2UgdGV4dGFyZWEsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1ib3gudi10ZXh0LWZpZWxkLS1zaW5nbGUtbGluZS52LWlucHV0LS1kZW5zZSAudi10ZXh0LWZpZWxkX19wcmVmaXgsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1ib3gudi10ZXh0LWZpZWxkLS1zaW5nbGUtbGluZS52LWlucHV0LS1kZW5zZSAudi10ZXh0LWZpZWxkX19zdWZmaXgsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1ib3gudi10ZXh0LWZpZWxkLS1zaW5nbGUtbGluZS52LWlucHV0LS1kZW5zZSB0ZXh0YXJlYSwudi10ZXh0YXJlYS52LXRleHQtZmllbGQtLWVuY2xvc2VkLnYtdGV4dC1maWVsZC0tb3V0bGluZWQudi1pbnB1dC0tZGVuc2UgLnYtdGV4dC1maWVsZF9fcHJlZml4LC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tZW5jbG9zZWQudi10ZXh0LWZpZWxkLS1vdXRsaW5lZC52LWlucHV0LS1kZW5zZSAudi10ZXh0LWZpZWxkX19zdWZmaXgsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1lbmNsb3NlZC52LXRleHQtZmllbGQtLW91dGxpbmVkLnYtaW5wdXQtLWRlbnNlIHRleHRhcmVhLC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tZW5jbG9zZWQudi10ZXh0LWZpZWxkLS1zaW5nbGUtbGluZS52LWlucHV0LS1kZW5zZSAudi10ZXh0LWZpZWxkX19wcmVmaXgsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1lbmNsb3NlZC52LXRleHQtZmllbGQtLXNpbmdsZS1saW5lLnYtaW5wdXQtLWRlbnNlIC52LXRleHQtZmllbGRfX3N1ZmZpeCwudi10ZXh0YXJlYS52LXRleHQtZmllbGQtLWVuY2xvc2VkLnYtdGV4dC1maWVsZC0tc2luZ2xlLWxpbmUudi1pbnB1dC0tZGVuc2UgdGV4dGFyZWF7bWFyZ2luLXRvcDo2cHh9LnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1ib3gudi10ZXh0LWZpZWxkLS1vdXRsaW5lZC52LWlucHV0LS1kZW5zZSAudi1pbnB1dF9fYXBwZW5kLWlubmVyLC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tYm94LnYtdGV4dC1maWVsZC0tb3V0bGluZWQudi1pbnB1dC0tZGVuc2UgLnYtaW5wdXRfX2FwcGVuZC1vdXRlciwudi10ZXh0YXJlYS52LXRleHQtZmllbGQtLWJveC52LXRleHQtZmllbGQtLW91dGxpbmVkLnYtaW5wdXQtLWRlbnNlIC52LWlucHV0X19wcmVwZW5kLWlubmVyLC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tYm94LnYtdGV4dC1maWVsZC0tb3V0bGluZWQudi1pbnB1dC0tZGVuc2UgLnYtaW5wdXRfX3ByZXBlbmQtb3V0ZXIsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1ib3gudi10ZXh0LWZpZWxkLS1zaW5nbGUtbGluZS52LWlucHV0LS1kZW5zZSAudi1pbnB1dF9fYXBwZW5kLWlubmVyLC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tYm94LnYtdGV4dC1maWVsZC0tc2luZ2xlLWxpbmUudi1pbnB1dC0tZGVuc2UgLnYtaW5wdXRfX2FwcGVuZC1vdXRlciwudi10ZXh0YXJlYS52LXRleHQtZmllbGQtLWJveC52LXRleHQtZmllbGQtLXNpbmdsZS1saW5lLnYtaW5wdXQtLWRlbnNlIC52LWlucHV0X19wcmVwZW5kLWlubmVyLC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tYm94LnYtdGV4dC1maWVsZC0tc2luZ2xlLWxpbmUudi1pbnB1dC0tZGVuc2UgLnYtaW5wdXRfX3ByZXBlbmQtb3V0ZXIsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1lbmNsb3NlZC52LXRleHQtZmllbGQtLW91dGxpbmVkLnYtaW5wdXQtLWRlbnNlIC52LWlucHV0X19hcHBlbmQtaW5uZXIsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1lbmNsb3NlZC52LXRleHQtZmllbGQtLW91dGxpbmVkLnYtaW5wdXQtLWRlbnNlIC52LWlucHV0X19hcHBlbmQtb3V0ZXIsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1lbmNsb3NlZC52LXRleHQtZmllbGQtLW91dGxpbmVkLnYtaW5wdXQtLWRlbnNlIC52LWlucHV0X19wcmVwZW5kLWlubmVyLC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tZW5jbG9zZWQudi10ZXh0LWZpZWxkLS1vdXRsaW5lZC52LWlucHV0LS1kZW5zZSAudi1pbnB1dF9fcHJlcGVuZC1vdXRlciwudi10ZXh0YXJlYS52LXRleHQtZmllbGQtLWVuY2xvc2VkLnYtdGV4dC1maWVsZC0tc2luZ2xlLWxpbmUudi1pbnB1dC0tZGVuc2UgLnYtaW5wdXRfX2FwcGVuZC1pbm5lciwudi10ZXh0YXJlYS52LXRleHQtZmllbGQtLWVuY2xvc2VkLnYtdGV4dC1maWVsZC0tc2luZ2xlLWxpbmUudi1pbnB1dC0tZGVuc2UgLnYtaW5wdXRfX2FwcGVuZC1vdXRlciwudi10ZXh0YXJlYS52LXRleHQtZmllbGQtLWVuY2xvc2VkLnYtdGV4dC1maWVsZC0tc2luZ2xlLWxpbmUudi1pbnB1dC0tZGVuc2UgLnYtaW5wdXRfX3ByZXBlbmQtaW5uZXIsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1lbmNsb3NlZC52LXRleHQtZmllbGQtLXNpbmdsZS1saW5lLnYtaW5wdXQtLWRlbnNlIC52LWlucHV0X19wcmVwZW5kLW91dGVye2FsaWduLXNlbGY6ZmxleC1zdGFydDttYXJnaW4tdG9wOjhweH0udi10ZXh0YXJlYS52LXRleHQtZmllbGQtLXNvbG97YWxpZ24taXRlbXM6ZmxleC1zdGFydH0udi10ZXh0YXJlYS52LXRleHQtZmllbGQtLXNvbG8gLnYtaW5wdXRfX2FwcGVuZC1pbm5lciwudi10ZXh0YXJlYS52LXRleHQtZmllbGQtLXNvbG8gLnYtaW5wdXRfX2FwcGVuZC1vdXRlciwudi10ZXh0YXJlYS52LXRleHQtZmllbGQtLXNvbG8gLnYtaW5wdXRfX3ByZXBlbmQtaW5uZXIsLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1zb2xvIC52LWlucHV0X19wcmVwZW5kLW91dGVye2FsaWduLXNlbGY6ZmxleC1zdGFydDttYXJnaW4tdG9wOjEycHh9LnYtYXBwbGljYXRpb24tLWlzLWx0ciAudi10ZXh0YXJlYS52LXRleHQtZmllbGQtLXNvbG8gLnYtaW5wdXRfX2FwcGVuZC1pbm5lcntwYWRkaW5nLWxlZnQ6MTJweH0udi1hcHBsaWNhdGlvbi0taXMtcnRsIC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tc29sbyAudi1pbnB1dF9fYXBwZW5kLWlubmVye3BhZGRpbmctcmlnaHQ6MTJweH0udi10ZXh0YXJlYS0tYXV0by1ncm93IHRleHRhcmVhe292ZXJmbG93OmhpZGRlbn0udi10ZXh0YXJlYS0tbm8tcmVzaXplIHRleHRhcmVhe3Jlc2l6ZTpub25lfS52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tZW5jbG9zZWQgLnYtdGV4dC1maWVsZF9fc2xvdHthbGlnbi1zZWxmOnN0cmV0Y2h9LnYtYXBwbGljYXRpb24tLWlzLWx0ciAudi10ZXh0YXJlYS52LXRleHQtZmllbGQtLWVuY2xvc2VkIC52LXRleHQtZmllbGRfX3Nsb3R7bWFyZ2luLXJpZ2h0Oi0xMnB4fS52LWFwcGxpY2F0aW9uLS1pcy1ydGwgLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1lbmNsb3NlZCAudi10ZXh0LWZpZWxkX19zbG90e21hcmdpbi1sZWZ0Oi0xMnB4fS52LWFwcGxpY2F0aW9uLS1pcy1sdHIgLnYtdGV4dGFyZWEudi10ZXh0LWZpZWxkLS1lbmNsb3NlZCAudi10ZXh0LWZpZWxkX19zbG90IHRleHRhcmVhe3BhZGRpbmctcmlnaHQ6MTJweH0udi1hcHBsaWNhdGlvbi0taXMtcnRsIC52LXRleHRhcmVhLnYtdGV4dC1maWVsZC0tZW5jbG9zZWQgLnYtdGV4dC1maWVsZF9fc2xvdCB0ZXh0YXJlYXtwYWRkaW5nLWxlZnQ6MTJweH1cIiwgXCJcIl0pO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///786\n')},813:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(19);\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(17);\n/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(11);\n/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(18);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(14);\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(21);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2);\n/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(32);\n/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(67);\n/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _src_components_VTextarea_VTextarea_sass__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(785);\n/* harmony import */ var _src_components_VTextarea_VTextarea_sass__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_src_components_VTextarea_VTextarea_sass__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _VTextField_VTextField__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(125);\n/* harmony import */ var _util_mixins__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(8);\n\n\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n// Styles\n // Extensions\n\n // Utilities\n\n\nvar baseMixins = Object(_util_mixins__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"])(_VTextField_VTextField__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"]);\n/* @vue/component */\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (baseMixins.extend({\n  name: 'v-textarea',\n  props: {\n    autoGrow: Boolean,\n    noResize: Boolean,\n    rowHeight: {\n      type: [Number, String],\n      default: 24,\n      validator: function validator(v) {\n        return !isNaN(parseFloat(v));\n      }\n    },\n    rows: {\n      type: [Number, String],\n      default: 5,\n      validator: function validator(v) {\n        return !isNaN(parseInt(v, 10));\n      }\n    }\n  },\n  computed: {\n    classes: function classes() {\n      return _objectSpread({\n        'v-textarea': true,\n        'v-textarea--auto-grow': this.autoGrow,\n        'v-textarea--no-resize': this.noResizeHandle\n      }, _VTextField_VTextField__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"].options.computed.classes.call(this));\n    },\n    noResizeHandle: function noResizeHandle() {\n      return this.noResize || this.autoGrow;\n    }\n  },\n  watch: {\n    autoGrow: function autoGrow(val) {\n      var _this = this;\n\n      this.$nextTick(function () {\n        var _this$$refs$input;\n\n        val ? _this.calculateInputHeight() : (_this$$refs$input = _this.$refs.input) == null ? void 0 : _this$$refs$input.style.removeProperty('height');\n      });\n    },\n    lazyValue: function lazyValue() {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight);\n    },\n    rowHeight: function rowHeight() {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight);\n    }\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    setTimeout(function () {\n      _this2.autoGrow && _this2.calculateInputHeight();\n    }, 0);\n  },\n  methods: {\n    calculateInputHeight: function calculateInputHeight() {\n      var input = this.$refs.input;\n      if (!input) return;\n      input.style.height = '0';\n      var height = input.scrollHeight;\n      var minHeight = parseInt(this.rows, 10) * parseFloat(this.rowHeight); // This has to be done ASAP, waiting for Vue\n      // to update the DOM causes ugly layout jumping\n\n      input.style.height = Math.max(minHeight, height) + 'px';\n    },\n    genInput: function genInput() {\n      var input = _VTextField_VTextField__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"].options.methods.genInput.call(this);\n      input.tag = 'textarea';\n      delete input.data.attrs.type;\n      input.data.attrs.rows = this.rows;\n      return input;\n    },\n    onInput: function onInput(e) {\n      _VTextField_VTextField__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"].options.methods.onInput.call(this, e);\n      this.autoGrow && this.calculateInputHeight();\n    },\n    onKeyDown: function onKeyDown(e) {\n      // Prevents closing of a\n      // dialog when pressing\n      // enter\n      if (this.isFocused && e.keyCode === 13) {\n        e.stopPropagation();\n      }\n\n      this.$emit('keydown', e);\n    }\n  }\n}));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvVlRleHRhcmVhL1ZUZXh0YXJlYS50cz8wZjExIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Q0FHQTs7Q0FHQTs7QUFDQTtBQVdBLElBQU0sVUFBVSxHQUFHLHFFQUFNLENBQXpCLHVFQUF5QixDQUF6QjtBQU1BOztBQUNlLG1FQUFVLENBQVYsT0FBa0I7QUFDL0IsTUFBSSxFQUQyQjtBQUcvQixPQUFLLEVBQUU7QUFDTCxZQUFRLEVBREg7QUFFTCxZQUFRLEVBRkg7QUFHTCxhQUFTLEVBQUU7QUFDVCxVQUFJLEVBQUUsU0FERyxNQUNILENBREc7QUFFVCxhQUFPLEVBRkU7QUFHVCxlQUFTLEVBQUcsb0JBQUQ7QUFBQSxlQUFZLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBWCxDQUFXLENBQVgsQ0FBbEI7QUFBQTtBQUhGLEtBSE47QUFRTCxRQUFJLEVBQUU7QUFDSixVQUFJLEVBQUUsU0FERixNQUNFLENBREY7QUFFSixhQUFPLEVBRkg7QUFHSixlQUFTLEVBQUcsb0JBQUQ7QUFBQSxlQUFZLENBQUMsS0FBSyxDQUFDLFFBQVEsSUFBVCxFQUFTLENBQVQsQ0FBbEI7QUFBQTtBQUhQO0FBUkQsR0FId0I7QUFrQi9CLFVBQVEsRUFBRTtBQUNSLFdBRFEscUJBQ0Q7QUFDTDtBQUNFLHNCQURLLElBQVA7QUFFRSxpQ0FBeUIsS0FGcEIsUUFBUDtBQUdFLGlDQUF5QixLQUhwQjtBQUFQLFNBSUssdUVBQVUsQ0FBVixtQ0FKTDtBQUZNO0FBU1Isa0JBVFEsNEJBU007QUFDWixhQUFPLGlCQUFpQixLQUF4QjtBQUNEO0FBWE8sR0FsQnFCO0FBZ0MvQixPQUFLLEVBQUU7QUFDTCxZQURLLG9CQUNHLEdBREgsRUFDaUI7QUFBQTs7QUFDcEIscUJBQWUsWUFBSztBQUFBOztBQUNsQixXQUFHLEdBQ0MsTUFERCxvQkFDQyxFQURELHdCQUVDLFlBRkQsMEJBRUMsdUNBRkosUUFFSSxDQUZKO0FBREY7QUFGRztBQVFMLGFBUkssdUJBUUk7QUFDUCx1QkFBaUIsZUFBZSxLQUFoQyxvQkFBaUIsQ0FBakI7QUFURztBQVdMLGFBWEssdUJBV0k7QUFDUCx1QkFBaUIsZUFBZSxLQUFoQyxvQkFBaUIsQ0FBakI7QUFDRDtBQWJJLEdBaEN3QjtBQWdEL0IsU0FoRCtCLHFCQWdEeEI7QUFBQTs7QUFDTCxjQUFVLENBQUMsWUFBSztBQUNkLHlCQUFpQixPQUFqQixvQkFBaUIsRUFBakI7QUFEUSxPQUFWLENBQVUsQ0FBVjtBQWpENkI7QUFzRC9CLFNBQU8sRUFBRTtBQUNQLHdCQURPLGtDQUNhO0FBQ2xCLFVBQU0sS0FBSyxHQUFHLFdBQWQ7QUFDQSxVQUFJLENBQUosT0FBWTtBQUVaLFdBQUssQ0FBTDtBQUNBLFVBQU0sTUFBTSxHQUFHLEtBQUssQ0FBcEI7QUFDQSxVQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsS0FBRCxNQUFSLEVBQVEsQ0FBUixHQUEwQixVQUFVLENBQUMsS0FOckMsU0FNb0MsQ0FBdEQsQ0FOa0IsQ0FPbEI7QUFDQTs7QUFDQSxXQUFLLENBQUwsZUFBcUIsSUFBSSxDQUFKLHlCQUFyQjtBQVZLO0FBWVAsWUFaTyxzQkFZQztBQUNOLFVBQU0sS0FBSyxHQUFHLHVFQUFVLENBQVYsOEJBQWQsSUFBYyxDQUFkO0FBRUEsV0FBSyxDQUFMO0FBQ0EsYUFBTyxLQUFLLENBQUwsV0FBUDtBQUNBLFdBQUssQ0FBTCxrQkFBMEIsS0FBMUI7QUFFQTtBQW5CSztBQXFCUCxXQXJCTyxtQkFxQkEsQ0FyQkEsRUFxQlU7QUFDZiw2RUFBVSxDQUFWO0FBQ0EsdUJBQWlCLEtBQWpCLG9CQUFpQixFQUFqQjtBQXZCSztBQXlCUCxhQXpCTyxxQkF5QkUsQ0F6QkYsRUF5Qm9CO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLFVBQUksa0JBQWtCLENBQUMsQ0FBRCxZQUF0QixJQUF3QztBQUN0QyxTQUFDLENBQUQ7QUFDRDs7QUFFRDtBQUNEO0FBbENNO0FBdERzQixDQUFsQixDQUFmIiwiZmlsZSI6IjgxMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFN0eWxlc1xuaW1wb3J0ICcuL1ZUZXh0YXJlYS5zYXNzJ1xuXG4vLyBFeHRlbnNpb25zXG5pbXBvcnQgVlRleHRGaWVsZCBmcm9tICcuLi9WVGV4dEZpZWxkL1ZUZXh0RmllbGQnXG5cbi8vIFV0aWxpdGllc1xuaW1wb3J0IG1peGlucyBmcm9tICcuLi8uLi91dGlsL21peGlucydcblxuLy8gVHlwZXNcbmltcG9ydCBWdWUgZnJvbSAndnVlJ1xuXG5pbnRlcmZhY2Ugb3B0aW9ucyBleHRlbmRzIFZ1ZSB7XG4gICRyZWZzOiB7XG4gICAgaW5wdXQ6IEhUTUxUZXh0QXJlYUVsZW1lbnRcbiAgfVxufVxuXG5jb25zdCBiYXNlTWl4aW5zID0gbWl4aW5zPG9wdGlvbnMgJlxuICBJbnN0YW5jZVR5cGU8dHlwZW9mIFZUZXh0RmllbGQ+XG4+KFxuICBWVGV4dEZpZWxkXG4pXG5cbi8qIEB2dWUvY29tcG9uZW50ICovXG5leHBvcnQgZGVmYXVsdCBiYXNlTWl4aW5zLmV4dGVuZCh7XG4gIG5hbWU6ICd2LXRleHRhcmVhJyxcblxuICBwcm9wczoge1xuICAgIGF1dG9Hcm93OiBCb29sZWFuLFxuICAgIG5vUmVzaXplOiBCb29sZWFuLFxuICAgIHJvd0hlaWdodDoge1xuICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSxcbiAgICAgIGRlZmF1bHQ6IDI0LFxuICAgICAgdmFsaWRhdG9yOiAodjogYW55KSA9PiAhaXNOYU4ocGFyc2VGbG9hdCh2KSksXG4gICAgfSxcbiAgICByb3dzOiB7XG4gICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLFxuICAgICAgZGVmYXVsdDogNSxcbiAgICAgIHZhbGlkYXRvcjogKHY6IGFueSkgPT4gIWlzTmFOKHBhcnNlSW50KHYsIDEwKSksXG4gICAgfSxcbiAgfSxcblxuICBjb21wdXRlZDoge1xuICAgIGNsYXNzZXMgKCk6IG9iamVjdCB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAndi10ZXh0YXJlYSc6IHRydWUsXG4gICAgICAgICd2LXRleHRhcmVhLS1hdXRvLWdyb3cnOiB0aGlzLmF1dG9Hcm93LFxuICAgICAgICAndi10ZXh0YXJlYS0tbm8tcmVzaXplJzogdGhpcy5ub1Jlc2l6ZUhhbmRsZSxcbiAgICAgICAgLi4uVlRleHRGaWVsZC5vcHRpb25zLmNvbXB1dGVkLmNsYXNzZXMuY2FsbCh0aGlzKSxcbiAgICAgIH1cbiAgICB9LFxuICAgIG5vUmVzaXplSGFuZGxlICgpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiB0aGlzLm5vUmVzaXplIHx8IHRoaXMuYXV0b0dyb3dcbiAgICB9LFxuICB9LFxuXG4gIHdhdGNoOiB7XG4gICAgYXV0b0dyb3cgKHZhbDogYm9vbGVhbikge1xuICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICB2YWxcbiAgICAgICAgICA/IHRoaXMuY2FsY3VsYXRlSW5wdXRIZWlnaHQoKVxuICAgICAgICAgIDogdGhpcy4kcmVmcy5pbnB1dD8uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2hlaWdodCcpXG4gICAgICB9KVxuICAgIH0sXG4gICAgbGF6eVZhbHVlICgpIHtcbiAgICAgIHRoaXMuYXV0b0dyb3cgJiYgdGhpcy4kbmV4dFRpY2sodGhpcy5jYWxjdWxhdGVJbnB1dEhlaWdodClcbiAgICB9LFxuICAgIHJvd0hlaWdodCAoKSB7XG4gICAgICB0aGlzLmF1dG9Hcm93ICYmIHRoaXMuJG5leHRUaWNrKHRoaXMuY2FsY3VsYXRlSW5wdXRIZWlnaHQpXG4gICAgfSxcbiAgfSxcblxuICBtb3VudGVkICgpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuYXV0b0dyb3cgJiYgdGhpcy5jYWxjdWxhdGVJbnB1dEhlaWdodCgpXG4gICAgfSwgMClcbiAgfSxcblxuICBtZXRob2RzOiB7XG4gICAgY2FsY3VsYXRlSW5wdXRIZWlnaHQgKCkge1xuICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLiRyZWZzLmlucHV0XG4gICAgICBpZiAoIWlucHV0KSByZXR1cm5cblxuICAgICAgaW5wdXQuc3R5bGUuaGVpZ2h0ID0gJzAnXG4gICAgICBjb25zdCBoZWlnaHQgPSBpbnB1dC5zY3JvbGxIZWlnaHRcbiAgICAgIGNvbnN0IG1pbkhlaWdodCA9IHBhcnNlSW50KHRoaXMucm93cywgMTApICogcGFyc2VGbG9hdCh0aGlzLnJvd0hlaWdodClcbiAgICAgIC8vIFRoaXMgaGFzIHRvIGJlIGRvbmUgQVNBUCwgd2FpdGluZyBmb3IgVnVlXG4gICAgICAvLyB0byB1cGRhdGUgdGhlIERPTSBjYXVzZXMgdWdseSBsYXlvdXQganVtcGluZ1xuICAgICAgaW5wdXQuc3R5bGUuaGVpZ2h0ID0gTWF0aC5tYXgobWluSGVpZ2h0LCBoZWlnaHQpICsgJ3B4J1xuICAgIH0sXG4gICAgZ2VuSW5wdXQgKCkge1xuICAgICAgY29uc3QgaW5wdXQgPSBWVGV4dEZpZWxkLm9wdGlvbnMubWV0aG9kcy5nZW5JbnB1dC5jYWxsKHRoaXMpXG5cbiAgICAgIGlucHV0LnRhZyA9ICd0ZXh0YXJlYSdcbiAgICAgIGRlbGV0ZSBpbnB1dC5kYXRhIS5hdHRycyEudHlwZVxuICAgICAgaW5wdXQuZGF0YSEuYXR0cnMhLnJvd3MgPSB0aGlzLnJvd3NcblxuICAgICAgcmV0dXJuIGlucHV0XG4gICAgfSxcbiAgICBvbklucHV0IChlOiBFdmVudCkge1xuICAgICAgVlRleHRGaWVsZC5vcHRpb25zLm1ldGhvZHMub25JbnB1dC5jYWxsKHRoaXMsIGUpXG4gICAgICB0aGlzLmF1dG9Hcm93ICYmIHRoaXMuY2FsY3VsYXRlSW5wdXRIZWlnaHQoKVxuICAgIH0sXG4gICAgb25LZXlEb3duIChlOiBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAvLyBQcmV2ZW50cyBjbG9zaW5nIG9mIGFcbiAgICAgIC8vIGRpYWxvZyB3aGVuIHByZXNzaW5nXG4gICAgICAvLyBlbnRlclxuICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkICYmIGUua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgfVxuXG4gICAgICB0aGlzLiRlbWl0KCdrZXlkb3duJywgZSlcbiAgICB9LFxuICB9LFxufSlcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///813\n")},856:function(module,exports,__webpack_require__){eval("/**\r\n * (c) jSuites Javascript Web Components\r\n *\r\n * Website: https://jsuites.net\r\n * Description: Create amazing web based applications.\r\n *\r\n * MIT License\r\n *\r\n */\r\n;(function (global, factory) {\r\n     true ? module.exports = factory() :\r\n    undefined;\r\n}(this, (function () {\r\n\r\n    'use strict';\r\n\r\nvar jSuites = function(options) {\r\n    var obj = {}\r\n    var version = '4.9.21';\r\n\r\n    var find = function(DOMElement, component) {\r\n        if (DOMElement[component.type] && DOMElement[component.type] == component) {\r\n            return true;\r\n        }\r\n        if (DOMElement.parentNode) {\r\n            return find(DOMElement.parentNode, component);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    var isOpened = function(element) {\r\n        if (jSuites.current.length > 0) {\r\n            for (var i = 0; i < jSuites.current.length; i++) {\r\n                if (jSuites.current[i] && ! find(element, jSuites.current[i])) {\r\n                    jSuites.current[i].close();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    obj.init = function() {\r\n        var element = null;\r\n\r\n        document.addEventListener(\"mousedown\", function(e) {\r\n            if (e.changedTouches && e.changedTouches[0]) {\r\n                var x = e.changedTouches[0].clientX;\r\n                var y = e.changedTouches[0].clientY;\r\n            } else {\r\n                var x = e.clientX;\r\n                var y = e.clientY;\r\n            }\r\n\r\n            if (e.target && e.target.shadowRoot) {\r\n                var d = e.target.shadowRoot;\r\n            } else {\r\n                var d = document;\r\n            }\r\n\r\n            // Get the first target element\r\n            element = d.elementFromPoint(x, y);\r\n        });\r\n\r\n        document.addEventListener(\"click\", function(e) {\r\n            // Check opened components\r\n            isOpened(element);\r\n        });\r\n\r\n        obj.version = version;\r\n    }\r\n\r\n    obj.setExtensions = function(o) {\r\n        if (typeof(o) == 'object') {\r\n            var k = Object.keys(o);\r\n            for (var i = 0; i < k.length; i++) {\r\n                obj[k[i]] = o[k[i]];\r\n            }\r\n        }\r\n    }\r\n\r\n    obj.tracking = function(component, state) {\r\n        if (state == true) {\r\n            jSuites.current = jSuites.current.filter(function(v) {\r\n                return v !== null;\r\n            });\r\n\r\n            // Start after all events\r\n            setTimeout(function() {\r\n                jSuites.current.push(component);\r\n            }, 0);\r\n\r\n        } else {\r\n            var index = jSuites.current.indexOf(component);\r\n            if (index >= 0) {\r\n                jSuites.current[index] = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get or set a property from a JSON from a string.\r\n     */\r\n    obj.path = function(str, val) {\r\n        str = str.split('.');\r\n        if (str.length) {\r\n            var o = this;\r\n            var p = null;\r\n            while (str.length > 1) {\r\n                // Get the property\r\n                p = str.shift();\r\n                // Check if the property exists\r\n                if (o.hasOwnProperty(p)) {\r\n                    o = o[p];\r\n                } else {\r\n                    // Property does not exists\r\n                    if (val === undefined) {\r\n                        return undefined;\r\n                    } else {\r\n                        // Create the property\r\n                        o[p] = {};\r\n                        // Next property\r\n                        o = o[p];\r\n                    }\r\n                }\r\n            }\r\n            // Get the property\r\n            p = str.shift();\r\n            // Set or get the value\r\n            if (val !== undefined) {\r\n                o[p] = val;\r\n                // Success\r\n                return true;\r\n            } else {\r\n                // Return the value\r\n                if (o) {\r\n                    return o[p];\r\n                }\r\n            }\r\n        }\r\n        // Something went wrong\r\n        return false;\r\n    }\r\n\r\n    // Update dictionary\r\n    obj.setDictionary = function(d) {\r\n        var k = Object.keys(obj.dictionary);\r\n        if (k.length == 0) {\r\n            obj.dictionary = d;\r\n        } else {\r\n            // Replace the key into the dictionary and append the new ones\r\n            var k = Object.keys(d);\r\n            for (var i = 0; i < k.length; i++) {\r\n                obj.dictionary[k[i]] = d[k[i]];\r\n            }\r\n        }\r\n\r\n        // Translations\r\n        var t = null;\r\n        for (var i = 0; i < jSuites.calendar.weekdays.length; i++) {\r\n            t =  jSuites.translate(jSuites.calendar.weekdays[i]);\r\n            if (jSuites.calendar.weekdays[i]) {\r\n                jSuites.calendar.weekdays[i] = t;\r\n                jSuites.calendar.weekdaysShort[i] = t.substr(0,3);\r\n            }\r\n        }\r\n        for (var i = 0; i < jSuites.calendar.months.length; i++) {\r\n            t = jSuites.translate(jSuites.calendar.months[i]);\r\n            if (t) {\r\n                jSuites.calendar.months[i] = t;\r\n                jSuites.calendar.monthsShort[i] = t.substr(0,3);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Dictionary\r\n    obj.dictionary = {};\r\n\r\n    // Translate\r\n    obj.translate = function(t) {\r\n        return obj.dictionary[t] || t;\r\n    }\r\n\r\n    // Array of opened components\r\n    obj.current = [];\r\n\r\n    return obj;\r\n}();\r\n\r\n/**\r\n * Global jsuites event\r\n */\r\nif (typeof(document) !== \"undefined\") {\r\n    jSuites.init();\r\n}\r\n\r\njSuites.ajax = (function(options, complete) {\r\n    if (Array.isArray(options)) {\r\n        // Create multiple request controller \r\n        var multiple = {\r\n            instance: [],\r\n            complete: complete,\r\n        }\r\n\r\n        if (options.length > 0) {\r\n            for (var i = 0; i < options.length; i++) {\r\n                options[i].multiple = multiple;\r\n                multiple.instance.push(jSuites.ajax(options[i]));\r\n            }\r\n        }\r\n\r\n        return multiple;\r\n    }\r\n\r\n    if (! options.data) {\r\n        options.data = {};\r\n    }\r\n\r\n    if (options.type) {\r\n        options.method = options.type;\r\n    }\r\n\r\n    // Default method\r\n    if (! options.method) {\r\n        options.method = 'GET';\r\n    }\r\n\r\n    // Default type\r\n    if (! options.dataType) {\r\n        options.dataType = 'json';\r\n    }\r\n\r\n    if (options.data) {\r\n        // Parse object to variables format\r\n        var parseData = function(value, key) {\r\n            var vars = [];\r\n            var keys = Object.keys(value);\r\n            if (keys.length) {\r\n                for (var i = 0; i < keys.length; i++) {\r\n                    if (key) {\r\n                        var k = key + '[' + keys[i] + ']';\r\n                    } else {\r\n                        var k = keys[i];\r\n                    }\r\n\r\n                    if (typeof(value[keys[i]]) == 'object') {\r\n                        var r = parseData(value[keys[i]], k);\r\n                        var o = Object.keys(r);\r\n                        for (var j = 0; j < o.length; j++) {\r\n                            vars[o[j]] = r[o[j]];\r\n                        }\r\n                    } else {\r\n                        vars[k] = value[keys[i]];\r\n                    }\r\n                }\r\n            }\r\n\r\n            return vars;\r\n        }\r\n\r\n        var data = [];\r\n        var d = parseData(options.data);\r\n        var k = Object.keys(d);\r\n        for (var i = 0; i < k.length; i++) {\r\n            data.push(k[i] + '=' + encodeURIComponent(d[k[i]]));\r\n        }\r\n\r\n        if (options.method == 'GET' && data.length > 0) {\r\n            if (options.url.indexOf('?') < 0) {\r\n                options.url += '?';\r\n            }\r\n            options.url += data.join('&');\r\n        }\r\n    }\r\n\r\n    var httpRequest = new XMLHttpRequest();\r\n    httpRequest.open(options.method, options.url, true);\r\n    httpRequest.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\r\n\r\n    if (options.method == 'POST') {\r\n        httpRequest.setRequestHeader('Accept', 'application/json');\r\n        httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n    } else {\r\n        if (options.dataType == 'json') {\r\n            httpRequest.setRequestHeader('Content-Type', 'text/json');\r\n        } else if (options.dataType == 'blob') {\r\n            httpRequest.responseType = \"blob\";\r\n        } else if (options.dataType == 'html') {\r\n            httpRequest.setRequestHeader('Content-Type', 'text/html');\r\n        }\r\n    }\r\n\r\n    // No cache\r\n    if (options.cache != true) {\r\n        httpRequest.setRequestHeader('pragma', 'no-cache');\r\n        httpRequest.setRequestHeader('cache-control', 'no-cache');\r\n    }\r\n\r\n    // Authentication\r\n    if (options.withCredentials == true) {\r\n        httpRequest.withCredentials = true\r\n    }\r\n\r\n    // Before send\r\n    if (typeof(options.beforeSend) == 'function') {\r\n        options.beforeSend(httpRequest);\r\n    }\r\n\r\n    httpRequest.onload = function() {\r\n        if (httpRequest.status === 200) {\r\n            if (options.dataType == 'json') {\r\n                try {\r\n                    var result = JSON.parse(httpRequest.responseText);\r\n\r\n                    if (options.success && typeof(options.success) == 'function') {\r\n                        options.success(result);\r\n                    }\r\n                } catch(err) {\r\n                    if (options.error && typeof(options.error) == 'function') {\r\n                        options.error(err, result);\r\n                    }\r\n                }\r\n            } else {\r\n                if (options.dataType == 'blob') {\r\n                    var result = httpRequest.response;\r\n                } else {\r\n                    var result = httpRequest.responseText;\r\n                }\r\n\r\n                if (options.success && typeof(options.success) == 'function') {\r\n                    options.success(result);\r\n                }\r\n            }\r\n        } else {\r\n            if (options.error && typeof(options.error) == 'function') {\r\n                options.error(httpRequest.responseText, httpRequest.status);\r\n            }\r\n        }\r\n\r\n        // Global queue\r\n        if (jSuites.ajax.queue && jSuites.ajax.queue.length > 0) {\r\n            jSuites.ajax.send(jSuites.ajax.queue.shift());\r\n        }\r\n\r\n        // Global complete method\r\n        if (jSuites.ajax.requests && jSuites.ajax.requests.length) {\r\n            // Get index of this request in the container\r\n            var index = jSuites.ajax.requests.indexOf(httpRequest);\r\n            // Remove from the ajax requests container\r\n            jSuites.ajax.requests.splice(index, 1);\r\n            // Deprected: Last one?\r\n            if (! jSuites.ajax.requests.length) {\r\n                // Object event\r\n                if (options.complete && typeof(options.complete) == 'function') {\r\n                    options.complete(result);\r\n                }\r\n            }\r\n            // Group requests\r\n            if (options.group) {\r\n                if (jSuites.ajax.oncomplete && typeof(jSuites.ajax.oncomplete[options.group]) == 'function') {\r\n                    if (! jSuites.ajax.pending(options.group)) {\r\n                        jSuites.ajax.oncomplete[options.group]();\r\n                        jSuites.ajax.oncomplete[options.group] = null;\r\n                    }\r\n                }\r\n            }\r\n            // Multiple requests controller\r\n            if (options.multiple && options.multiple.instance) {\r\n                // Get index of this request in the container\r\n                var index = options.multiple.instance.indexOf(httpRequest);\r\n                // Remove from the ajax requests container\r\n                options.multiple.instance.splice(index, 1);\r\n                // If this is the last one call method complete\r\n                if (! options.multiple.instance.length) {\r\n                    if (options.multiple.complete && typeof(options.multiple.complete) == 'function') {\r\n                        options.multiple.complete(result);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Keep the options\r\n    httpRequest.options = options;\r\n    // Data\r\n    httpRequest.data = data;\r\n\r\n    // Queue\r\n    if (options.queue == true && jSuites.ajax.requests.length > 0) {\r\n        jSuites.ajax.queue.push(httpRequest);\r\n    } else {\r\n        jSuites.ajax.send(httpRequest)\r\n    }\r\n\r\n    return httpRequest;\r\n});\r\n\r\njSuites.ajax.send = function(httpRequest) {\r\n    if (httpRequest.data) {\r\n        httpRequest.send(httpRequest.data.join('&'));\r\n    } else {\r\n        httpRequest.send();\r\n    }\r\n\r\n    jSuites.ajax.requests.push(httpRequest);\r\n}\r\n\r\njSuites.ajax.exists = function(url, __callback) {\r\n    var http = new XMLHttpRequest();\r\n    http.open('HEAD', url, false);\r\n    http.send();\r\n    if (http.status) {\r\n        __callback(http.status);\r\n    }\r\n}\r\n\r\njSuites.ajax.pending = function(group) {\r\n    var n = 0;\r\n    var o = jSuites.ajax.requests;\r\n    if (o && o.length) {\r\n        for (var i = 0; i < o.length; i++) {\r\n            if (! group || group == o[i].options.group) {\r\n                n++\r\n            }\r\n        }\r\n    }\r\n    return n;\r\n}\r\n\r\njSuites.ajax.oncomplete = {};\r\njSuites.ajax.requests = [];\r\njSuites.ajax.queue = [];\r\n\r\njSuites.alert = function(message) {\r\n    if (jSuites.getWindowWidth() < 800 && jSuites.dialog) {\r\n        jSuites.dialog.open({\r\n            title:'Alert',\r\n            message:message,\r\n        });\r\n    } else {\r\n        alert(message);\r\n    }\r\n}\r\n\r\njSuites.animation = {};\r\n\r\njSuites.animation.slideLeft = function(element, direction, done) {\r\n    if (direction == true) {\r\n        element.classList.add('slide-left-in');\r\n        setTimeout(function() {\r\n            element.classList.remove('slide-left-in');\r\n            if (typeof(done) == 'function') {\r\n                done();\r\n            }\r\n        }, 400);\r\n    } else {\r\n        element.classList.add('slide-left-out');\r\n        setTimeout(function() {\r\n            element.classList.remove('slide-left-out');\r\n            if (typeof(done) == 'function') {\r\n                done();\r\n            }\r\n        }, 400);\r\n    }\r\n}\r\n\r\njSuites.animation.slideRight = function(element, direction, done) {\r\n    if (direction == true) {\r\n        element.classList.add('slide-right-in');\r\n        setTimeout(function() {\r\n            element.classList.remove('slide-right-in');\r\n            if (typeof(done) == 'function') {\r\n                done();\r\n            }\r\n        }, 400);\r\n    } else {\r\n        element.classList.add('slide-right-out');\r\n        setTimeout(function() {\r\n            element.classList.remove('slide-right-out');\r\n            if (typeof(done) == 'function') {\r\n                done();\r\n            }\r\n        }, 400);\r\n    }\r\n}\r\n\r\njSuites.animation.slideTop = function(element, direction, done) {\r\n    if (direction == true) {\r\n        element.classList.add('slide-top-in');\r\n        setTimeout(function() {\r\n            element.classList.remove('slide-top-in');\r\n            if (typeof(done) == 'function') {\r\n                done();\r\n            }\r\n        }, 400);\r\n    } else {\r\n        element.classList.add('slide-top-out');\r\n        setTimeout(function() {\r\n            element.classList.remove('slide-top-out');\r\n            if (typeof(done) == 'function') {\r\n                done();\r\n            }\r\n        }, 400);\r\n    }\r\n}\r\n\r\njSuites.animation.slideBottom = function(element, direction, done) {\r\n    if (direction == true) {\r\n        element.classList.add('slide-bottom-in');\r\n        setTimeout(function() {\r\n            element.classList.remove('slide-bottom-in');\r\n            if (typeof(done) == 'function') {\r\n                done();\r\n            }\r\n        }, 400);\r\n    } else {\r\n        element.classList.add('slide-bottom-out');\r\n        setTimeout(function() {\r\n            element.classList.remove('slide-bottom-out');\r\n            if (typeof(done) == 'function') {\r\n                done();\r\n            }\r\n        }, 100);\r\n    }\r\n}\r\n\r\njSuites.animation.fadeIn = function(element, done) {\r\n    element.style.display = '';\r\n    element.classList.add('fade-in');\r\n    setTimeout(function() {\r\n        element.classList.remove('fade-in');\r\n        if (typeof(done) == 'function') {\r\n            done();\r\n        }\r\n    }, 2000);\r\n}\r\n\r\njSuites.animation.fadeOut = function(element, done) {\r\n    element.classList.add('fade-out');\r\n    setTimeout(function() {\r\n        element.style.display = 'none';\r\n        element.classList.remove('fade-out');\r\n        if (typeof(done) == 'function') {\r\n            done();\r\n        }\r\n    }, 1000);\r\n}\r\n\r\njSuites.calendar = (function(el, options) {\r\n    // Already created, update options\r\n    if (el.calendar) {\r\n        return el.calendar.setOptions(options, true);\r\n    }\r\n\r\n    // New instance\r\n    var obj = { type:'calendar' };\r\n    obj.options = {};\r\n\r\n    // Date\r\n    obj.date = null;\r\n\r\n    /**\r\n     * Update options\r\n     */\r\n    obj.setOptions = function(options, reset) {\r\n        // Default configuration\r\n        var defaults = {\r\n            // Render type: [ default | year-month-picker ]\r\n            type: 'default',\r\n            // Restrictions\r\n            validRange: null,\r\n            // Starting weekday - 0 for sunday, 6 for saturday\r\n            startingDay: null, \r\n            // Date format\r\n            format: 'DD/MM/YYYY',\r\n            // Allow keyboard date entry\r\n            readonly: true,\r\n            // Today is default\r\n            today: false,\r\n            // Show timepicker\r\n            time: false,\r\n            // Show the reset button\r\n            resetButton: true,\r\n            // Placeholder\r\n            placeholder: '',\r\n            // Translations can be done here\r\n            months: jSuites.calendar.monthsShort,\r\n            monthsFull: jSuites.calendar.months,\r\n            weekdays: jSuites.calendar.weekdays,\r\n            weekdays_short: jSuites.calendar.weekdays,\r\n            textDone: jSuites.translate('Done'),\r\n            textReset: jSuites.translate('Reset'),\r\n            textUpdate: jSuites.translate('Update'),\r\n            // Value\r\n            value: null,\r\n            // Fullscreen (this is automatic set for screensize < 800)\r\n            fullscreen: false,\r\n            // Create the calendar closed as default\r\n            opened: false,\r\n            // Events\r\n            onopen: null,\r\n            onclose: null,\r\n            onchange: null,\r\n            onupdate: null,\r\n            // Internal mode controller\r\n            mode: null,\r\n            position: null,\r\n            // Data type\r\n            dataType: null,\r\n        }\r\n\r\n        for (var i = 0; i < defaults.weekdays_short.length; i++) {\r\n            defaults.weekdays_short[i] = defaults.weekdays_short[i].substr(0,1);\r\n        }\r\n\r\n        // Loop through our object\r\n        for (var property in defaults) {\r\n            if (options && options.hasOwnProperty(property)) {\r\n                obj.options[property] = options[property];\r\n            } else {\r\n                if (typeof(obj.options[property]) == 'undefined' || reset === true) {\r\n                    obj.options[property] = defaults[property];\r\n                }\r\n            }\r\n        }\r\n\r\n        // Reset button\r\n        if (obj.options.resetButton == false) {\r\n            calendarReset.style.display = 'none';\r\n        } else {\r\n            calendarReset.style.display = '';\r\n        }\r\n\r\n        // Readonly\r\n        if (obj.options.readonly) {\r\n            el.setAttribute('readonly', 'readonly');\r\n        } else {\r\n            el.removeAttribute('readonly');\r\n        }\r\n\r\n        // Placeholder\r\n        if (obj.options.placeholder) {\r\n            el.setAttribute('placeholder', obj.options.placeholder);\r\n        } else {\r\n            el.removeAttribute('placeholder');\r\n        }\r\n\r\n        if (jSuites.isNumeric(obj.options.value) && obj.options.value > 0) {\r\n            obj.options.value = jSuites.calendar.numToDate(obj.options.value);\r\n            // Data type numberic\r\n            obj.options.dataType = 'numeric';\r\n        }\r\n\r\n        // Texts\r\n        calendarReset.innerHTML = obj.options.textReset;\r\n        calendarConfirm.innerHTML = obj.options.textDone;\r\n        calendarControlsUpdateButton.innerHTML = obj.options.textUpdate;\r\n\r\n        // Define mask\r\n        el.setAttribute('data-mask', obj.options.format.toLowerCase());\r\n\r\n        // Value\r\n        if (! obj.options.value && obj.options.today) {\r\n            var value = jSuites.calendar.now();\r\n        } else {\r\n            var value = obj.options.value;\r\n        }\r\n\r\n        // Set internal date\r\n        if (value) {\r\n            // Force the update\r\n            obj.options.value = null;\r\n            // New value\r\n            obj.setValue(value);\r\n        }\r\n\r\n        return obj;\r\n    }\r\n\r\n    /**\r\n     * Open the calendar\r\n     */\r\n    obj.open = function (value) {\r\n        if (! calendar.classList.contains('jcalendar-focus')) {\r\n            if (! calendar.classList.contains('jcalendar-inline')) {\r\n                // Current\r\n                jSuites.calendar.current = obj;\r\n                // Start tracking\r\n                jSuites.tracking(obj, true);\r\n                // Create the days\r\n                obj.getDays();\r\n                // Render months\r\n                if (obj.options.type == 'year-month-picker') {\r\n                    obj.getMonths();\r\n                }\r\n                // Get time\r\n                if (obj.options.time) {\r\n                    calendarSelectHour.value = obj.date[3];\r\n                    calendarSelectMin.value = obj.date[4];\r\n                }\r\n\r\n                // Show calendar\r\n                calendar.classList.add('jcalendar-focus');\r\n\r\n                // Get the position of the corner helper\r\n                if (jSuites.getWindowWidth() < 800 || obj.options.fullscreen) {\r\n                    calendar.classList.add('jcalendar-fullsize');\r\n                    // Animation\r\n                    jSuites.animation.slideBottom(calendarContent, 1);\r\n                } else {\r\n                    calendar.classList.remove('jcalendar-fullsize');\r\n\r\n                    var rect = el.getBoundingClientRect();\r\n                    var rectContent = calendarContent.getBoundingClientRect();\r\n\r\n                    if (obj.options.position) {\r\n                        calendarContainer.style.position = 'fixed';\r\n                        if (window.innerHeight < rect.bottom + rectContent.height) {\r\n                            calendarContainer.style.top = (rect.top - (rectContent.height + 2)) + 'px';\r\n                        } else {\r\n                            calendarContainer.style.top = (rect.top + rect.height + 2) + 'px';\r\n                        }\r\n                        calendarContainer.style.left = rect.left + 'px';\r\n                    } else {\r\n                        if (window.innerHeight < rect.bottom + rectContent.height) {\r\n                            var d = -1 * (rect.height + rectContent.height + 2);\r\n                            if (d + rect.top < 0) {\r\n                                d = -1 * (rect.top + rect.height);\r\n                            }\r\n                            calendarContainer.style.top = d + 'px';\r\n                        } else {\r\n                            calendarContainer.style.top = 2 + 'px'; \r\n                        }\r\n\r\n                        if (window.innerWidth < rect.left + rectContent.width) {\r\n                            var d = window.innerWidth - (rect.left + rectContent.width + 20);\r\n                            calendarContainer.style.left = d + 'px';\r\n                        } else {\r\n                            calendarContainer.style.left = '0px'; \r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Events\r\n                if (typeof(obj.options.onopen) == 'function') {\r\n                    obj.options.onopen(el);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    obj.close = function (ignoreEvents, update) {\r\n        if (calendar.classList.contains('jcalendar-focus')) {\r\n            if (update !== false) {\r\n                var element = calendar.querySelector('.jcalendar-selected');\r\n\r\n                if (typeof(update) == 'string') {\r\n                    var value = update;\r\n                } else if (! element || element.classList.contains('jcalendar-disabled')) {\r\n                    var value = obj.options.value\r\n                } else {\r\n                    var value = obj.getValue();\r\n                }\r\n\r\n                obj.setValue(value);\r\n            }\r\n\r\n            // Events\r\n            if (! ignoreEvents && typeof(obj.options.onclose) == 'function') {\r\n                obj.options.onclose(el);\r\n            }\r\n            // Hide\r\n            calendar.classList.remove('jcalendar-focus');\r\n            // Stop tracking\r\n            jSuites.tracking(obj, false);\r\n            // Current\r\n            jSuites.calendar.current = null;\r\n        }\r\n\r\n        return obj.options.value;\r\n    }\r\n\r\n    obj.prev = function() {\r\n        // Check if the visualization is the days picker or years picker\r\n        if (obj.options.mode == 'years') {\r\n            obj.date[0] = obj.date[0] - 12;\r\n\r\n            // Update picker table of days\r\n            obj.getYears();\r\n        } else if (obj.options.mode == 'months') {\r\n            obj.date[0] = parseInt(obj.date[0]) - 1;\r\n            // Update picker table of months\r\n            obj.getMonths();\r\n        } else {\r\n            // Go to the previous month\r\n            if (obj.date[1] < 2) {\r\n                obj.date[0] = obj.date[0] - 1;\r\n                obj.date[1] = 12;\r\n            } else {\r\n                obj.date[1] = obj.date[1] - 1;\r\n            }\r\n\r\n            // Update picker table of days\r\n            obj.getDays();\r\n        }\r\n    }\r\n\r\n    obj.next = function() {\r\n        // Check if the visualization is the days picker or years picker\r\n        if (obj.options.mode == 'years') {\r\n            obj.date[0] = parseInt(obj.date[0]) + 12;\r\n\r\n            // Update picker table of days\r\n            obj.getYears();\r\n        } else if (obj.options.mode == 'months') {\r\n            obj.date[0] = parseInt(obj.date[0]) + 1;\r\n            // Update picker table of months\r\n            obj.getMonths();\r\n        } else {\r\n            // Go to the previous month\r\n            if (obj.date[1] > 11) {\r\n                obj.date[0] = parseInt(obj.date[0]) + 1;\r\n                obj.date[1] = 1;\r\n            } else {\r\n                obj.date[1] = parseInt(obj.date[1]) + 1;\r\n            }\r\n\r\n            // Update picker table of days\r\n            obj.getDays();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set today\r\n     */\r\n    obj.setToday = function() {\r\n        // Today\r\n        var value = new Date().toISOString().substr(0, 10);\r\n        // Change value\r\n        obj.setValue(value);\r\n        // Value\r\n        return value;\r\n    }\r\n\r\n    obj.setValue = function(val) {\r\n        if (! val) {\r\n            val = '' + val;\r\n        }\r\n        // Values\r\n        var newValue = val;\r\n        var oldValue = obj.options.value;\r\n\r\n        if (oldValue != newValue) {\r\n            // Set label\r\n            if (! newValue) {\r\n                obj.date = null;\r\n                var val = '';\r\n            } else {\r\n                var value = obj.setLabel(newValue, obj.options);\r\n                var date = newValue.split(' ');\r\n                if (! date[1]) {\r\n                    date[1] = '00:00:00';\r\n                }\r\n                var time = date[1].split(':')\r\n                var date = date[0].split('-');\r\n                var y = parseInt(date[0]);\r\n                var m = parseInt(date[1]);\r\n                var d = parseInt(date[2]);\r\n                var h = parseInt(time[0]);\r\n                var i = parseInt(time[1]);\r\n                obj.date = [ y, m, d, h, i, 0 ];\r\n                var val = obj.setLabel(newValue, obj.options);\r\n            }\r\n\r\n            // New value\r\n            obj.options.value = newValue;\r\n\r\n            if (typeof(obj.options.onchange) ==  'function') {\r\n                obj.options.onchange(el, newValue, oldValue);\r\n            }\r\n\r\n            // Lemonade JS\r\n            if (el.value != val) {\r\n                el.value = val;\r\n                if (typeof(el.onchange) == 'function') {\r\n                    el.onchange({\r\n                        type: 'change',\r\n                        target: el,\r\n                        value: el.value\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        obj.getDays();\r\n    }\r\n\r\n    obj.getValue = function() {\r\n        if (obj.date) {\r\n            if (obj.options.time) {\r\n                return jSuites.two(obj.date[0]) + '-' + jSuites.two(obj.date[1]) + '-' + jSuites.two(obj.date[2]) + ' ' + jSuites.two(obj.date[3]) + ':' + jSuites.two(obj.date[4]) + ':' + jSuites.two(0);\r\n            } else {\r\n                return jSuites.two(obj.date[0]) + '-' + jSuites.two(obj.date[1]) + '-' + jSuites.two(obj.date[2]) + ' ' + jSuites.two(0) + ':' + jSuites.two(0) + ':' + jSuites.two(0);\r\n            }\r\n        } else {\r\n            return \"\";\r\n        }\r\n    }\r\n\r\n    /**\r\n     *  Calendar\r\n     */\r\n    obj.update = function(element, v) {\r\n        if (element.classList.contains('jcalendar-disabled')) {\r\n            // Do nothing\r\n        } else {\r\n            var elements = calendar.querySelector('.jcalendar-selected');\r\n            if (elements) {\r\n                elements.classList.remove('jcalendar-selected');\r\n            }\r\n            element.classList.add('jcalendar-selected');\r\n\r\n            if (element.classList.contains('jcalendar-set-month')) {\r\n                obj.date[1] = v;\r\n            } else {\r\n                obj.date[2] = element.innerText;\r\n            }\r\n\r\n            if (! obj.options.time) {\r\n                obj.close();\r\n            } else {\r\n                obj.date[3] = calendarSelectHour.value;\r\n                obj.date[4] = calendarSelectMin.value;\r\n            }\r\n        }\r\n\r\n        // Update\r\n        updateActions();\r\n    }\r\n\r\n    /**\r\n     * Set to blank\r\n     */\r\n    obj.reset = function() {\r\n        // Close calendar\r\n        obj.setValue('');\r\n        obj.date = null;\r\n        obj.close(false, false);\r\n    }\r\n\r\n    /**\r\n     * Get calendar days\r\n     */\r\n    obj.getDays = function() {\r\n        // Mode\r\n        obj.options.mode = 'days';\r\n\r\n        // Setting current values in case of NULLs\r\n        var date = new Date();\r\n\r\n        // Current selection\r\n        var year = obj.date && jSuites.isNumeric(obj.date[0]) ? obj.date[0] : parseInt(date.getFullYear());\r\n        var month = obj.date && jSuites.isNumeric(obj.date[1]) ? obj.date[1] : parseInt(date.getMonth()) + 1;\r\n        var day = obj.date && jSuites.isNumeric(obj.date[2]) ? obj.date[2] : parseInt(date.getDate());\r\n        var hour = obj.date && jSuites.isNumeric(obj.date[3]) ? obj.date[3] : parseInt(date.getHours());\r\n        var min = obj.date && jSuites.isNumeric(obj.date[4]) ? obj.date[4] : parseInt(date.getMinutes());\r\n\r\n        // Selection container\r\n        obj.date = [ year, month, day, hour, min, 0 ];\r\n\r\n        // Update title\r\n        calendarLabelYear.innerHTML = year;\r\n        calendarLabelMonth.innerHTML = obj.options.months[month - 1];\r\n\r\n        // Current month and Year\r\n        var isCurrentMonthAndYear = (date.getMonth() == month - 1) && (date.getFullYear() == year) ? true : false;\r\n        var currentDay = date.getDate();\r\n\r\n        // Number of days in the month\r\n        var date = new Date(year, month, 0, 0, 0);\r\n        var numberOfDays = date.getDate();\r\n\r\n        // First day\r\n        var date = new Date(year, month-1, 0, 0, 0);\r\n        var firstDay = date.getDay() + 1;\r\n\r\n        // Index value\r\n        var index = obj.options.startingDay || 0;\r\n\r\n        // First of day relative to the starting calendar weekday\r\n        firstDay = firstDay - index;\r\n\r\n        // Reset table\r\n        calendarBody.innerHTML = '';\r\n\r\n        // Weekdays Row\r\n        var row = document.createElement('tr');\r\n        row.setAttribute('align', 'center');\r\n        calendarBody.appendChild(row);\r\n\r\n        // Create weekdays row\r\n        for (var i = 0; i < 7; i++) {\r\n            var cell = document.createElement('td');\r\n            cell.classList.add('jcalendar-weekday')\r\n            cell.innerHTML = obj.options.weekdays_short[index];\r\n            row.appendChild(cell);\r\n            // Next week day\r\n            index++;\r\n            // Restart index\r\n            if (index > 6) {\r\n                index = 0;\r\n            }\r\n        }\r\n\r\n        // Index of days\r\n        var index = 0;\r\n        var d = 0;\r\n \r\n        // Calendar table\r\n        for (var j = 0; j < 6; j++) {\r\n            // Reset cells container\r\n            var row = document.createElement('tr');\r\n            row.setAttribute('align', 'center');\r\n            // Data control\r\n            var emptyRow = true;\r\n            // Create cells\r\n            for (var i = 0; i < 7; i++) {\r\n                // Create cell\r\n                var cell = document.createElement('td');\r\n                cell.classList.add('jcalendar-set-day');\r\n\r\n                if (index >= firstDay && index < (firstDay + numberOfDays)) {\r\n                    // Day cell\r\n                    d++;\r\n                    cell.innerHTML = d;\r\n\r\n                    // Selected\r\n                    if (d == day) {\r\n                        cell.classList.add('jcalendar-selected');\r\n                    }\r\n\r\n                    // Current selection day is today\r\n                    if (isCurrentMonthAndYear && currentDay == d) {\r\n                        cell.style.fontWeight = 'bold';\r\n                    }\r\n\r\n                    // Current selection day\r\n                    var current = jSuites.calendar.now(new Date(year, month-1, d), true);\r\n\r\n                    // Available ranges\r\n                    if (obj.options.validRange) {\r\n                        if (! obj.options.validRange[0] || current >= obj.options.validRange[0]) {\r\n                            var test1 = true;\r\n                        } else {\r\n                            var test1 = false;\r\n                        }\r\n\r\n                        if (! obj.options.validRange[1] || current <= obj.options.validRange[1]) {\r\n                            var test2 = true;\r\n                        } else {\r\n                            var test2 = false;\r\n                        }\r\n\r\n                        if (! (test1 && test2)) {\r\n                            cell.classList.add('jcalendar-disabled');\r\n                        }\r\n                    }\r\n\r\n                    // Control\r\n                    emptyRow = false;\r\n                }\r\n                // Day cell\r\n                row.appendChild(cell);\r\n                // Index\r\n                index++;\r\n            }\r\n\r\n            // Add cell to the calendar body\r\n            if (emptyRow == false) {\r\n                calendarBody.appendChild(row);\r\n            }\r\n        }\r\n\r\n        // Show time controls\r\n        if (obj.options.time) {\r\n            calendarControlsTime.style.display = '';\r\n        } else {\r\n            calendarControlsTime.style.display = 'none';\r\n        }\r\n\r\n        // Update\r\n        updateActions();\r\n    }\r\n\r\n    obj.getMonths = function() {\r\n        // Mode\r\n        obj.options.mode = 'months';\r\n\r\n        // Loading month labels\r\n        var months = obj.options.months;\r\n\r\n        // Value\r\n        var value = obj.options.value; \r\n\r\n        // Current date\r\n        var date = new Date();\r\n        var currentYear = parseInt(date.getFullYear());\r\n        var currentMonth = parseInt(date.getMonth()) + 1;\r\n        var selectedYear = obj.date && jSuites.isNumeric(obj.date[0]) ? obj.date[0] : currentYear;\r\n        var selectedMonth = obj.date && jSuites.isNumeric(obj.date[1]) ? obj.date[1] : currentMonth;\r\n\r\n        // Update title\r\n        calendarLabelYear.innerHTML = obj.date[0];\r\n        calendarLabelMonth.innerHTML = months[selectedMonth-1];\r\n\r\n        // Table\r\n        var table = document.createElement('table');\r\n        table.setAttribute('width', '100%');\r\n\r\n        // Row\r\n        var row = null;\r\n\r\n        // Calendar table\r\n        for (var i = 0; i < 12; i++) {\r\n            if (! (i % 4)) {\r\n                // Reset cells container\r\n                var row = document.createElement('tr');\r\n                row.setAttribute('align', 'center');\r\n                table.appendChild(row);\r\n            }\r\n\r\n            // Create cell\r\n            var cell = document.createElement('td');\r\n            cell.classList.add('jcalendar-set-month');\r\n            cell.setAttribute('data-value', i+1);\r\n            cell.innerText = months[i];\r\n\r\n            if (obj.options.validRange) {\r\n                var current = selectedYear + '-' + jSuites.two(i+1);\r\n                if (! obj.options.validRange[0] || current >= obj.options.validRange[0].substr(0,7)) {\r\n                    var test1 = true;\r\n                } else {\r\n                    var test1 = false;\r\n                }\r\n\r\n                if (! obj.options.validRange[1] || current <= obj.options.validRange[1].substr(0,7)) {\r\n                    var test2 = true;\r\n                } else {\r\n                    var test2 = false;\r\n                }\r\n\r\n                if (! (test1 && test2)) {\r\n                    cell.classList.add('jcalendar-disabled');\r\n                }\r\n            }\r\n\r\n            if (i+1 == selectedMonth) {\r\n                cell.classList.add('jcalendar-selected');\r\n            }\r\n\r\n            if (currentYear == selectedYear && i+1 == currentMonth) {\r\n                cell.style.fontWeight = 'bold';\r\n            }\r\n\r\n            row.appendChild(cell);\r\n        }\r\n\r\n        calendarBody.innerHTML = '<tr><td colspan=\"7\"></td></tr>';\r\n        calendarBody.children[0].children[0].appendChild(table);\r\n\r\n        // Update\r\n        updateActions();\r\n    }\r\n\r\n    obj.getYears = function() { \r\n        // Mode\r\n        obj.options.mode = 'years';\r\n\r\n        // Current date\r\n        var date = new Date();\r\n        var currentYear = date.getFullYear();\r\n        var selectedYear = obj.date && jSuites.isNumeric(obj.date[0]) ? obj.date[0] : parseInt(date.getFullYear());\r\n\r\n        // Array of years\r\n        var y = [];\r\n        for (var i = 0; i < 25; i++) {\r\n            y[i] = parseInt(obj.date[0]) + (i - 12);\r\n        }\r\n\r\n        // Assembling the year tables\r\n        var table = document.createElement('table');\r\n        table.setAttribute('width', '100%');\r\n\r\n        for (var i = 0; i < 25; i++) {\r\n            if (! (i % 5)) {\r\n                // Reset cells container\r\n                var row = document.createElement('tr');\r\n                row.setAttribute('align', 'center');\r\n                table.appendChild(row);\r\n            }\r\n\r\n            // Create cell\r\n            var cell = document.createElement('td');\r\n            cell.classList.add('jcalendar-set-year');\r\n            cell.innerText = y[i];\r\n\r\n            if (selectedYear == y[i]) {\r\n                cell.classList.add('jcalendar-selected');\r\n            }\r\n\r\n            if (currentYear == y[i]) {\r\n                cell.style.fontWeight = 'bold';\r\n            }\r\n\r\n            row.appendChild(cell);\r\n        }\r\n\r\n        calendarBody.innerHTML = '<tr><td colspan=\"7\"></td></tr>';\r\n        calendarBody.firstChild.firstChild.appendChild(table);\r\n\r\n        // Update\r\n        updateActions();\r\n    }\r\n\r\n    obj.setLabel = function(value, mixed) {\r\n        return jSuites.calendar.getDateString(value, mixed);\r\n    }\r\n\r\n    obj.fromFormatted = function (value, format) {\r\n        return jSuites.calendar.extractDateFromString(value, format);\r\n    }\r\n\r\n    var mouseUpControls = function(e) {\r\n        var element = jSuites.findElement(e.target, 'jcalendar-container');\r\n        if (element) {\r\n            var action = e.target.className;\r\n\r\n            // Object id\r\n            if (action == 'jcalendar-prev') {\r\n                obj.prev();\r\n            } else if (action == 'jcalendar-next') {\r\n                obj.next();\r\n            } else if (action == 'jcalendar-month') {\r\n                obj.getMonths();\r\n            } else if (action == 'jcalendar-year') {\r\n                obj.getYears();\r\n            } else if (action == 'jcalendar-set-year') {\r\n                obj.date[0] = e.target.innerText;\r\n                if (obj.options.type == 'year-month-picker') {\r\n                    obj.getMonths();\r\n                } else {\r\n                    obj.getDays();\r\n                }\r\n            } else if (e.target.classList.contains('jcalendar-set-month')) {\r\n                var month = parseInt(e.target.getAttribute('data-value'));\r\n                if (obj.options.type == 'year-month-picker') {\r\n                    obj.update(e.target, month);\r\n                } else {\r\n                    obj.date[1] = month;\r\n                    obj.getDays();\r\n                }\r\n            } else if (action == 'jcalendar-confirm' || action == 'jcalendar-update' || action == 'jcalendar-close') {\r\n                obj.close();\r\n            } else if (action == 'jcalendar-backdrop') {\r\n                obj.close(false, false);\r\n            } else if (action == 'jcalendar-reset') {\r\n                obj.reset();\r\n            } else if (e.target.classList.contains('jcalendar-set-day') && e.target.innerText) {\r\n                obj.update(e.target);\r\n            }\r\n        } else {\r\n            obj.close();\r\n        }\r\n    }\r\n\r\n    var keyUpControls = function(e) {\r\n        if (e.target.value && e.target.value.length > 3) {\r\n            var test = jSuites.calendar.extractDateFromString(e.target.value, obj.options.format);\r\n            if (test) {\r\n                obj.setValue(test);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Update actions button\r\n    var updateActions = function() {\r\n        var currentDay = calendar.querySelector('.jcalendar-selected');\r\n\r\n        if (currentDay && currentDay.classList.contains('jcalendar-disabled')) {\r\n            calendarControlsUpdateButton.setAttribute('disabled', 'disabled');\r\n            calendarSelectHour.setAttribute('disabled', 'disabled');\r\n            calendarSelectMin.setAttribute('disabled', 'disabled');\r\n        } else {\r\n            calendarControlsUpdateButton.removeAttribute('disabled');\r\n            calendarSelectHour.removeAttribute('disabled');\r\n            calendarSelectMin.removeAttribute('disabled');\r\n        }\r\n\r\n        // Event\r\n        if (typeof(obj.options.onupdate) == 'function') {\r\n            obj.options.onupdate(el, obj.getValue());\r\n        }\r\n    }\r\n\r\n    var calendar = null;\r\n    var calendarReset = null;\r\n    var calendarConfirm = null;\r\n    var calendarContainer = null;\r\n    var calendarContent = null;\r\n    var calendarLabelYear = null;\r\n    var calendarLabelMonth = null;\r\n    var calendarTable = null;\r\n    var calendarBody = null;\r\n\r\n    var calendarControls = null;\r\n    var calendarControlsTime = null;\r\n    var calendarControlsUpdate = null;\r\n    var calendarControlsUpdateButton = null;\r\n    var calendarSelectHour = null;\r\n    var calendarSelectMin = null;\r\n\r\n    var init = function() {\r\n        // Get value from initial element if that is an input\r\n        if (el.tagName == 'INPUT' && el.value) {\r\n            options.value = el.value;\r\n        }\r\n\r\n        // Calendar DOM elements\r\n        calendarReset = document.createElement('div');\r\n        calendarReset.className = 'jcalendar-reset';\r\n\r\n        calendarConfirm = document.createElement('div');\r\n        calendarConfirm.className = 'jcalendar-confirm';\r\n\r\n        calendarControls = document.createElement('div');\r\n        calendarControls.className = 'jcalendar-controls'\r\n        calendarControls.style.borderBottom = '1px solid #ddd';\r\n        calendarControls.appendChild(calendarReset);\r\n        calendarControls.appendChild(calendarConfirm);\r\n\r\n        calendarContainer = document.createElement('div');\r\n        calendarContainer.className = 'jcalendar-container';\r\n\r\n        calendarContent = document.createElement('div');\r\n        calendarContent.className = 'jcalendar-content';\r\n        calendarContainer.appendChild(calendarContent);\r\n\r\n        // Main element\r\n        if (el.tagName == 'DIV') {\r\n            calendar = el;\r\n            calendar.classList.add('jcalendar-inline');\r\n        } else {\r\n            // Add controls to the screen\r\n            calendarContent.appendChild(calendarControls);\r\n\r\n            calendar = document.createElement('div');\r\n            calendar.className = 'jcalendar';\r\n        }\r\n        calendar.classList.add('jcalendar-container');\r\n        calendar.appendChild(calendarContainer);\r\n\r\n        // Table container\r\n        var calendarTableContainer = document.createElement('div');\r\n        calendarTableContainer.className = 'jcalendar-table';\r\n        calendarContent.appendChild(calendarTableContainer);\r\n\r\n        // Previous button\r\n        var calendarHeaderPrev = document.createElement('td');\r\n        calendarHeaderPrev.setAttribute('colspan', '2');\r\n        calendarHeaderPrev.className = 'jcalendar-prev';\r\n\r\n        // Header with year and month\r\n        calendarLabelYear = document.createElement('span');\r\n        calendarLabelYear.className = 'jcalendar-year';\r\n        calendarLabelMonth = document.createElement('span');\r\n        calendarLabelMonth.className = 'jcalendar-month';\r\n\r\n        var calendarHeaderTitle = document.createElement('td');\r\n        calendarHeaderTitle.className = 'jcalendar-header';\r\n        calendarHeaderTitle.setAttribute('colspan', '3');\r\n        calendarHeaderTitle.appendChild(calendarLabelMonth);\r\n        calendarHeaderTitle.appendChild(calendarLabelYear);\r\n\r\n        var calendarHeaderNext = document.createElement('td');\r\n        calendarHeaderNext.setAttribute('colspan', '2');\r\n        calendarHeaderNext.className = 'jcalendar-next';\r\n\r\n        var calendarHeader = document.createElement('thead');\r\n        var calendarHeaderRow = document.createElement('tr');\r\n        calendarHeaderRow.appendChild(calendarHeaderPrev);\r\n        calendarHeaderRow.appendChild(calendarHeaderTitle);\r\n        calendarHeaderRow.appendChild(calendarHeaderNext);\r\n        calendarHeader.appendChild(calendarHeaderRow);\r\n\r\n        calendarTable = document.createElement('table');\r\n        calendarBody = document.createElement('tbody');\r\n        calendarTable.setAttribute('cellpadding', '0');\r\n        calendarTable.setAttribute('cellspacing', '0');\r\n        calendarTable.appendChild(calendarHeader);\r\n        calendarTable.appendChild(calendarBody);\r\n        calendarTableContainer.appendChild(calendarTable);\r\n\r\n        calendarSelectHour = document.createElement('select');\r\n        calendarSelectHour.className = 'jcalendar-select';\r\n        calendarSelectHour.onchange = function() {\r\n            obj.date[3] = this.value; \r\n\r\n            // Event\r\n            if (typeof(obj.options.onupdate) == 'function') {\r\n                obj.options.onupdate(el, obj.getValue());\r\n            }\r\n        }\r\n\r\n        for (var i = 0; i < 24; i++) {\r\n            var element = document.createElement('option');\r\n            element.value = i;\r\n            element.innerHTML = jSuites.two(i);\r\n            calendarSelectHour.appendChild(element);\r\n        }\r\n\r\n        calendarSelectMin = document.createElement('select');\r\n        calendarSelectMin.className = 'jcalendar-select';\r\n        calendarSelectMin.onchange = function() {\r\n            obj.date[4] = this.value;\r\n\r\n            // Event\r\n            if (typeof(obj.options.onupdate) == 'function') {\r\n                obj.options.onupdate(el, obj.getValue());\r\n            }\r\n        }\r\n\r\n        for (var i = 0; i < 60; i++) {\r\n            var element = document.createElement('option');\r\n            element.value = i;\r\n            element.innerHTML = jSuites.two(i);\r\n            calendarSelectMin.appendChild(element);\r\n        }\r\n\r\n        // Footer controls\r\n        var calendarControlsFooter = document.createElement('div');\r\n        calendarControlsFooter.className = 'jcalendar-controls';\r\n\r\n        calendarControlsTime = document.createElement('div');\r\n        calendarControlsTime.className = 'jcalendar-time';\r\n        calendarControlsTime.style.maxWidth = '140px';\r\n        calendarControlsTime.appendChild(calendarSelectHour);\r\n        calendarControlsTime.appendChild(calendarSelectMin);\r\n\r\n        calendarControlsUpdateButton = document.createElement('button');\r\n        calendarControlsUpdateButton.setAttribute('type', 'button');\r\n        calendarControlsUpdateButton.className = 'jcalendar-update';\r\n\r\n        calendarControlsUpdate = document.createElement('div');\r\n        calendarControlsUpdate.style.flexGrow = '10';\r\n        calendarControlsUpdate.appendChild(calendarControlsUpdateButton);\r\n        calendarControlsFooter.appendChild(calendarControlsTime);\r\n\r\n        // Only show the update button for input elements\r\n        if (el.tagName == 'INPUT') {\r\n            calendarControlsFooter.appendChild(calendarControlsUpdate);\r\n        }\r\n\r\n        calendarContent.appendChild(calendarControlsFooter);\r\n\r\n        var calendarBackdrop = document.createElement('div');\r\n        calendarBackdrop.className = 'jcalendar-backdrop';\r\n        calendar.appendChild(calendarBackdrop);\r\n\r\n        // Handle events\r\n        el.addEventListener(\"keyup\", keyUpControls);\r\n\r\n        // Add global events\r\n        calendar.addEventListener(\"swipeleft\", function(e) {\r\n            jSuites.animation.slideLeft(calendarTable, 0, function() {\r\n                obj.next();\r\n                jSuites.animation.slideRight(calendarTable, 1);\r\n            });\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        });\r\n\r\n        calendar.addEventListener(\"swiperight\", function(e) {\r\n            jSuites.animation.slideRight(calendarTable, 0, function() {\r\n                obj.prev();\r\n                jSuites.animation.slideLeft(calendarTable, 1);\r\n            });\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        });\r\n\r\n        el.onmouseup = function() {\r\n            obj.open();\r\n        }\r\n\r\n        if ('ontouchend' in document.documentElement === true) {\r\n            calendar.addEventListener(\"touchend\", mouseUpControls);\r\n        } else {\r\n            calendar.addEventListener(\"mouseup\", mouseUpControls);\r\n        }\r\n\r\n        // Global controls\r\n        if (! jSuites.calendar.hasEvents) {\r\n            // Execute only one time\r\n            jSuites.calendar.hasEvents = true;\r\n            // Enter and Esc\r\n            document.addEventListener(\"keydown\", jSuites.calendar.keydown);\r\n        }\r\n\r\n        // Set configuration\r\n        obj.setOptions(options);\r\n\r\n        // Append element to the DOM\r\n        if (el.tagName == 'INPUT') {\r\n            el.parentNode.insertBefore(calendar, el.nextSibling);\r\n            // Add properties\r\n            el.setAttribute('autocomplete', 'off');\r\n            // Element\r\n            el.classList.add('jcalendar-input');\r\n            // Value\r\n            el.value = obj.setLabel(obj.getValue(), obj.options);\r\n        } else {\r\n            // Get days\r\n            obj.getDays();\r\n            // Hour\r\n            if (obj.options.time) {\r\n                calendarSelectHour.value = obj.date[3];\r\n                calendarSelectMin.value = obj.date[4];\r\n            }\r\n        }\r\n\r\n        // Default opened\r\n        if (obj.options.opened == true) {\r\n            obj.open();\r\n        }\r\n\r\n        // Change method\r\n        el.change = obj.setValue;\r\n\r\n        // Global generic value handler\r\n        el.val = function(val) {\r\n            if (val === undefined) {\r\n                return obj.getValue();\r\n            } else {\r\n                obj.setValue(val);\r\n            }\r\n        }\r\n\r\n        // Keep object available from the node\r\n        el.calendar = calendar.calendar = obj;\r\n    }\r\n\r\n    init();\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.calendar.keydown = function(e) {\r\n    var calendar = null;\r\n    if (calendar = jSuites.calendar.current) { \r\n        if (e.which == 13) {\r\n            // ENTER\r\n            calendar.close(false, true);\r\n        } else if (e.which == 27) {\r\n            // ESC\r\n            calendar.close(false, false);\r\n        }\r\n    }\r\n}\r\n\r\njSuites.calendar.prettify = function(d, texts) {\r\n    if (! texts) {\r\n        var texts = {\r\n            justNow: 'Just now',\r\n            xMinutesAgo: '{0}m ago',\r\n            xHoursAgo: '{0}h ago',\r\n            xDaysAgo: '{0}d ago',\r\n            xWeeksAgo: '{0}w ago',\r\n            xMonthsAgo: '{0} mon ago',\r\n            xYearsAgo: '{0}y ago',\r\n        }\r\n    }\r\n\r\n    var d1 = new Date();\r\n    var d2 = new Date(d);\r\n    var total = parseInt((d1 - d2) / 1000 / 60);\r\n\r\n    String.prototype.format = function(o) {\r\n        return this.replace('{0}', o);\r\n    }\r\n\r\n    if (total == 0) {\r\n        var text = texts.justNow;\r\n    } else if (total < 90) {\r\n        var text = texts.xMinutesAgo.format(total);\r\n    } else if (total < 1440) { // One day\r\n        var text = texts.xHoursAgo.format(Math.round(total/60));\r\n    } else if (total < 20160) { // 14 days\r\n        var text = texts.xDaysAgo.format(Math.round(total / 1440));\r\n    } else if (total < 43200) { // 30 days\r\n        var text = texts.xWeeksAgo.format(Math.round(total / 10080));\r\n    } else if (total < 1036800) { // 24 months\r\n        var text = texts.xMonthsAgo.format(Math.round(total / 43200));\r\n    } else { // 24 months+\r\n        var text = texts.xYearsAgo.format(Math.round(total / 525600));\r\n    }\r\n\r\n    return text;\r\n}\r\n\r\njSuites.calendar.prettifyAll = function() {\r\n    var elements = document.querySelectorAll('.prettydate');\r\n    for (var i = 0; i < elements.length; i++) {\r\n        if (elements[i].getAttribute('data-date')) {\r\n            elements[i].innerHTML = jSuites.calendar.prettify(elements[i].getAttribute('data-date'));\r\n        } else {\r\n            if (elements[i].innerHTML) {\r\n                elements[i].setAttribute('data-date', elements[i].innerHTML);\r\n                elements[i].innerHTML = jSuites.calendar.prettify(elements[i].innerHTML);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\njSuites.calendar.now = function(date, dateOnly) {\r\n    if (Array.isArray(date)) {\r\n        var y = date[0];\r\n        var m = date[1];\r\n        var d = date[2];\r\n        var h = date[3];\r\n        var i = date[4];\r\n        var s = date[5];\r\n    } else {\r\n        if (! date) {\r\n            var date = new Date();\r\n        }\r\n        var y = date.getFullYear();\r\n        var m = date.getMonth() + 1;\r\n        var d = date.getDate();\r\n        var h = date.getHours();\r\n        var i = date.getMinutes();\r\n        var s = date.getSeconds();\r\n    }\r\n\r\n    if (dateOnly == true) {\r\n        return jSuites.two(y) + '-' + jSuites.two(m) + '-' + jSuites.two(d);\r\n    } else {\r\n        return jSuites.two(y) + '-' + jSuites.two(m) + '-' + jSuites.two(d) + ' ' + jSuites.two(h) + ':' + jSuites.two(i) + ':' + jSuites.two(s);\r\n    }\r\n}\r\n\r\njSuites.calendar.toArray = function(value) {\r\n    var date = value.split(((value.indexOf('T') !== -1) ? 'T' : ' '));\r\n    var time = date[1];\r\n    var date = date[0].split('-');\r\n    var y = parseInt(date[0]);\r\n    var m = parseInt(date[1]);\r\n    var d = parseInt(date[2]);\r\n\r\n    if (time) {\r\n        var time = time.split(':');\r\n        var h = parseInt(time[0]);\r\n        var i = parseInt(time[1]);\r\n    } else {\r\n        var h = 0;\r\n        var i = 0;\r\n    }\r\n    return [ y, m, d, h, i, 0 ];\r\n}\r\n\r\n// Helper to extract date from a string\r\njSuites.calendar.extractDateFromString = function(date, format) {\r\n    if (date > 0 && Number(date) == date) {\r\n        var d = new Date(Math.round((date - 25569)*86400*1000));\r\n        return d.getFullYear() + \"-\" + jSuites.two(d.getMonth()) + \"-\" + jSuites.two(d.getDate()) + ' 00:00:00';\r\n    }\r\n\r\n    var o = jSuites.mask(date, { mask: format }, true);\r\n    if (o.date[0] && o.date[1]) {\r\n        if (! o.date[2]) {\r\n            o.date[2] = 1;\r\n        }\r\n\r\n        return o.date[0] + '-' + jSuites.two(o.date[1]) + '-' + jSuites.two(o.date[2]) + ' ' + jSuites.two(o.date[3]) + ':' + jSuites.two(o.date[4])+ ':' + jSuites.two(o.date[5]);\r\n    }\r\n    return '';\r\n}\r\n\r\n/**\r\n * Date to number\r\n */\r\njSuites.calendar.dateToNum = function(a, b) {\r\n    a = new Date(a);\r\n    if (! b) {\r\n        b = '1899-12-30 ' + a.getHours() + ':' + a.getMinutes() + ':' + a.getSeconds();\r\n    }\r\n    b = new Date(b);\r\n    var v = a.getTime() - b.getTime();\r\n    return Math.round(v / 86400000);\r\n}\r\n\r\n/**\r\n * Number to date\r\n */\r\njSuites.calendar.numToDate = function(value) {\r\n    var d = new Date(Math.round((value - 25569)*86400*1000));\r\n    return d.getFullYear() + \"-\" + jSuites.two(d.getMonth()+1) + \"-\" + jSuites.two(d.getDate()) + ' 00:00:00';\r\n}\r\n\r\n// Helper to convert date into string\r\njSuites.calendar.getDateString = function(value, options) {\r\n    if (! options) {\r\n        var options = {};\r\n    }\r\n\r\n    // Labels\r\n    if (options && typeof(options) == 'object') {\r\n        var format = options.format;\r\n    } else {\r\n        var format = options;\r\n    }\r\n\r\n    if (! format) {\r\n        format = 'YYYY-MM-DD';\r\n    }\r\n\r\n    // Convert to number of hours\r\n    if (typeof(value) == 'number' && format.indexOf('[h]') >= 0) {\r\n        var result = parseFloat(24 * Number(value));\r\n        if (format.indexOf('mm') >= 0) {\r\n            var h = (''+result).split('.');\r\n            if (h[1]) {\r\n                var d = 60 * parseFloat('0.' + h[1])\r\n                d = parseFloat(d.toFixed(2));\r\n            } else {\r\n                var d = 0;\r\n            }\r\n            result = parseInt(h[0]) + ':' + jSuites.two(d);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    // Date instance\r\n    if (value instanceof Date) {\r\n        value = jSuites.calendar.now(value);\r\n    } else if (value && jSuites.isNumeric(value)) {\r\n        value = jSuites.calendar.numToDate(value);\r\n    }\r\n\r\n    // Tokens\r\n    var tokens = [ 'DAY', 'WD', 'DDDD', 'DDD', 'DD', 'D', 'Q', 'HH24', 'HH12', 'HH', 'H', 'AM/PM', 'MI', 'SS', 'MS', 'YYYY', 'YYY', 'YY', 'Y', 'MONTH', 'MON', 'MMMMM', 'MMMM', 'MMM', 'MM', 'M', '.' ];\r\n\r\n    // Expression to extract all tokens from the string\r\n    var e = new RegExp(tokens.join('|'), 'gi');\r\n    // Extract\r\n    var t = format.match(e);\r\n\r\n    // Compatibility with excel\r\n    for (var i = 0; i < t.length; i++) {\r\n        if (t[i].toUpperCase() == 'MM') {\r\n            // Not a month, correct to minutes\r\n            if (t[i-1] && t[i-1].toUpperCase().indexOf('H') >= 0) {\r\n                t[i] = 'mi';\r\n            } else if (t[i-2] && t[i-2].toUpperCase().indexOf('H') >= 0) {\r\n                t[i] = 'mi';\r\n            } else if (t[i+1] && t[i+1].toUpperCase().indexOf('S') >= 0) {\r\n                t[i] = 'mi';\r\n            } else if (t[i+2] && t[i+2].toUpperCase().indexOf('S') >= 0) {\r\n                t[i] = 'mi';\r\n            }\r\n        }\r\n    }\r\n\r\n    // Object\r\n    var o = {\r\n        tokens: t\r\n    }\r\n\r\n    // Value\r\n    if (value) {\r\n        var d = ''+value;\r\n        var splitStr = (d.indexOf('T') !== -1) ? 'T' : ' ';\r\n        d = d.split(splitStr);\r\n \r\n        var h = 0;\r\n        var m = 0;\r\n        var s = 0;\r\n\r\n        if (d[1]) {\r\n            h = d[1].split(':');\r\n            m = h[1] ? h[1] : 0;\r\n            s = h[2] ? h[2] : 0;\r\n            h = h[0] ? h[0] : 0;\r\n        }\r\n\r\n        d = d[0].split('-');\r\n\r\n        if (d[0] && d[1] && d[2] && d[0] > 0 && d[1] > 0 && d[1] < 13 && d[2] > 0 && d[2] < 32) {\r\n\r\n            // Data\r\n            o.data = [ d[0], d[1], d[2], h, m, s ];\r\n\r\n            // Value\r\n            o.value = [];\r\n\r\n            // Calendar instance\r\n            var calendar = new Date(o.data[0], o.data[1]-1, o.data[2], o.data[3], o.data[4], o.data[5]);\r\n\r\n            // Get method\r\n            var get = function(i) {\r\n                // Token\r\n                var t = this.tokens[i];\r\n                // Case token\r\n                var s = t.toUpperCase();\r\n                var v = null;\r\n\r\n                if (s === 'YYYY') {\r\n                    v = this.data[0];\r\n                } else if (s === 'YYY') {\r\n                    v = this.data[0].substring(1,4);\r\n                } else if (s === 'YY') {\r\n                    v = this.data[0].substring(2,4);\r\n                } else if (s === 'Y') {\r\n                    v = this.data[0].substring(3,4);\r\n                } else if (t === 'MON') {\r\n                    v = jSuites.calendar.months[calendar.getMonth()].substr(0,3).toUpperCase();\r\n                } else if (t === 'mon') {\r\n                    v = jSuites.calendar.months[calendar.getMonth()].substr(0,3).toLowerCase();\r\n                } else if (t === 'MONTH') {\r\n                    v = jSuites.calendar.months[calendar.getMonth()].toUpperCase();\r\n                } else if (t === 'month') {\r\n                    v = jSuites.calendar.months[calendar.getMonth()].toLowerCase();\r\n                } else if (s === 'MMMMM') {\r\n                    v = jSuites.calendar.months[calendar.getMonth()].substr(0, 1);\r\n                } else if (s === 'MMMM' || t === 'Month') {\r\n                    v = jSuites.calendar.months[calendar.getMonth()];\r\n                } else if (s === 'MMM' || t == 'Mon') {\r\n                    v = jSuites.calendar.months[calendar.getMonth()].substr(0,3);\r\n                } else if (s === 'MM') {\r\n                    v = jSuites.two(this.data[1]);\r\n                } else if (s === 'M') {\r\n                    v = calendar.getMonth()+1;\r\n                } else if (t === 'DAY') {\r\n                    v = jSuites.calendar.weekdays[calendar.getDay()].toUpperCase();\r\n                } else if (t === 'day') {\r\n                    v = jSuites.calendar.weekdays[calendar.getDay()].toLowerCase();\r\n                } else if (s === 'DDDD' || t == 'Day') {\r\n                    v = jSuites.calendar.weekdays[calendar.getDay()];\r\n                } else if (s === 'DDD') {\r\n                    v = jSuites.calendar.weekdays[calendar.getDay()].substr(0,3);\r\n                } else if (s === 'DD') {\r\n                    v = jSuites.two(this.data[2]);\r\n                } else if (s === 'D') {\r\n                    v = this.data[2];\r\n                } else if (s === 'Q') {\r\n                    v = Math.floor((calendar.getMonth() + 3) / 3);\r\n                } else if (s === 'HH24' || s === 'HH') {\r\n                    v = jSuites.two(this.data[3]);\r\n                } else if (s === 'HH12') {\r\n                    if (this.data[3] > 12) {\r\n                        v = jSuites.two(this.data[3] - 12);\r\n                    } else {\r\n                        v = jSuites.two(this.data[3]);\r\n                    }\r\n                } else if (s === 'H') {\r\n                    v = this.data[3];\r\n                } else if (s === 'MI') {\r\n                    v = jSuites.two(this.data[4]);\r\n                } else if (s === 'SS') {\r\n                    v = jSuites.two(this.data[5]);\r\n                } else if (s === 'MS') {\r\n                    v = calendar.getMilliseconds();\r\n                } else if (s === 'AM/PM') {\r\n                    if (this.data[3] >= 12) {\r\n                        v = 'PM';\r\n                    } else {\r\n                        v = 'AM';\r\n                    }\r\n                } else if (s === 'WD') {\r\n                    v = jSuites.calendar.weekdays[calendar.getDay()];\r\n                }\r\n\r\n                if (v === null) {\r\n                    this.value[i] = this.tokens[i];\r\n                } else {\r\n                    this.value[i] = v;\r\n                }\r\n            }\r\n\r\n            for (var i = 0; i < o.tokens.length; i++) {\r\n                get.call(o, i);\r\n            }\r\n            // Put pieces together\r\n            value = o.value.join('');\r\n        } else {\r\n            value = '';\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n// Jsuites calendar labels\r\njSuites.calendar.weekdays = [ 'Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday' ];\r\njSuites.calendar.months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\njSuites.calendar.weekdaysShort = [ 'Sun','Mon','Tue','Wed','Thu','Fri','Sat' ];\r\njSuites.calendar.monthsShort = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\n\r\n\r\njSuites.color = (function(el, options) {\r\n    // Already created, update options\r\n    if (el.color) {\r\n        return el.color.setOptions(options, true);\r\n    }\r\n\r\n    // New instance\r\n    var obj = { type: 'color' };\r\n    obj.options = {};\r\n\r\n    var container = null;\r\n    var backdrop = null;\r\n    var content = null;\r\n    var resetButton = null;\r\n    var closeButton = null;\r\n    var tabs = null;\r\n    var jsuitesTabs = null;\r\n\r\n    /**\r\n     * Update options\r\n     */\r\n    obj.setOptions = function(options, reset) {\r\n        /**\r\n         * @typedef {Object} defaults\r\n         * @property {(string|Array)} value - Initial value of the compontent\r\n         * @property {string} placeholder - The default instruction text on the element\r\n         * @property {requestCallback} onchange - Method to be execute after any changes on the element\r\n         * @property {requestCallback} onclose - Method to be execute when the element is closed\r\n         * @property {string} doneLabel - Label for button done\r\n         * @property {string} resetLabel - Label for button reset\r\n         * @property {string} resetValue - Value for button reset\r\n         * @property {Bool} showResetButton - Active or note for button reset - default false\r\n         */\r\n        var defaults = {\r\n            placeholder: '',\r\n            value: null,\r\n            onopen: null,\r\n            onclose: null,\r\n            onchange: null,\r\n            closeOnChange: true,\r\n            palette: null,\r\n            position: null,\r\n            doneLabel: 'Done',\r\n            resetLabel: 'Reset',\r\n            fullscreen: false,\r\n            opened: false,\r\n        }\r\n\r\n        if (! options) {\r\n            options = {};\r\n        }\r\n\r\n        if (options && ! options.palette) {\r\n            // Default pallete\r\n            options.palette = jSuites.palette();\r\n        }\r\n\r\n        // Loop through our object\r\n        for (var property in defaults) {\r\n            if (options && options.hasOwnProperty(property)) {\r\n                obj.options[property] = options[property];\r\n            } else {\r\n                if (typeof(obj.options[property]) == 'undefined' || reset === true) {\r\n                    obj.options[property] = defaults[property];\r\n                }\r\n            }\r\n        }\r\n\r\n        // Update the text of the controls, if they have already been created\r\n        if (resetButton) {\r\n            resetButton.innerHTML = obj.options.resetLabel;\r\n        }\r\n        if (closeButton) {\r\n            closeButton.innerHTML = obj.options.doneLabel;\r\n        }\r\n\r\n        // Update the pallete\r\n        if (obj.options.palette && jsuitesTabs) {\r\n            jsuitesTabs.updateContent(0, table());\r\n        }\r\n\r\n        // Value\r\n        if (typeof obj.options.value === 'string') {\r\n            el.value = obj.options.value;\r\n        }\r\n\r\n        // Placeholder\r\n        if (obj.options.placeholder) {\r\n            el.setAttribute('placeholder', obj.options.placeholder);\r\n        } else {\r\n            if (el.getAttribute('placeholder')) {\r\n                el.removeAttribute('placeholder');\r\n            }\r\n        }\r\n\r\n        return obj;\r\n    }\r\n\r\n    /**\r\n     * Open color pallete\r\n     */\r\n    obj.open = function() {\r\n        if (! container.classList.contains('jcolor-focus')) {\r\n            // Start tracking\r\n            jSuites.tracking(obj, true);\r\n\r\n            // Show colorpicker\r\n            container.classList.add('jcolor-focus');\r\n\r\n            var rectContent = content.getBoundingClientRect();\r\n\r\n            if (jSuites.getWindowWidth() < 800 || obj.options.fullscreen == true) {\r\n                content.style.top = '';\r\n                content.classList.add('jcolor-fullscreen');\r\n                jSuites.animation.slideBottom(content, 1);\r\n                backdrop.style.display = 'block';\r\n            } else {\r\n                if (content.classList.contains('jcolor-fullscreen')) {\r\n                    content.classList.remove('jcolor-fullscreen');\r\n                    backdrop.style.display = '';\r\n                }\r\n\r\n                var rect = el.getBoundingClientRect();\r\n\r\n                if (obj.options.position) {\r\n                    content.style.position = 'fixed';\r\n                    if (window.innerHeight < rect.bottom + rectContent.height) {\r\n                        content.style.top = (rect.top - (rectContent.height + 2)) + 'px';\r\n                    } else {\r\n                        content.style.top = (rect.top + rect.height + 2) + 'px';\r\n                    }\r\n                    content.style.left = rect.left + 'px';\r\n                } else {\r\n                    if (window.innerHeight < rect.bottom + rectContent.height) {\r\n                        content.style.top = -1 * (rectContent.height + rect.height + 2) + 'px';\r\n                    } else {\r\n                        content.style.top = '2px';\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (typeof(obj.options.onopen) == 'function') {\r\n                obj.options.onopen(el);\r\n            }\r\n\r\n            jsuitesTabs.setBorder(jsuitesTabs.getActive());\r\n\r\n            // Update sliders\r\n            if (obj.options.value) {\r\n                var rgb = HexToRgb(obj.options.value);\r\n\r\n                rgbInputs.forEach(function(rgbInput, index) {\r\n                    rgbInput.value = rgb[index];\r\n                    rgbInput.dispatchEvent(new Event('input'));\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Close color pallete\r\n     */\r\n    obj.close = function(ignoreEvents) {\r\n        if (container.classList.contains('jcolor-focus')) {\r\n            // Remove focus\r\n            container.classList.remove('jcolor-focus');\r\n            // Make sure backdrop is hidden\r\n            backdrop.style.display = '';\r\n            // Call related events\r\n            if (! ignoreEvents && typeof(obj.options.onclose) == 'function') {\r\n                obj.options.onclose(el);\r\n            }\r\n            // Stop  the object\r\n            jSuites.tracking(obj, false);\r\n        }\r\n\r\n        return obj.options.value;\r\n    }\r\n\r\n    /**\r\n     * Set value\r\n     */\r\n    obj.setValue = function(color) {\r\n        if (! color) {\r\n            color = '';\r\n        }\r\n\r\n        if (color != obj.options.value) {\r\n            obj.options.value = color;\r\n            slidersResult = color;\r\n\r\n            // Remove current selecded mark\r\n            var selected = container.querySelector('.jcolor-selected');\r\n            if (selected) {\r\n                selected.classList.remove('jcolor-selected');\r\n            }\r\n\r\n            // Mark cell as selected\r\n            if (obj.values[color]) {\r\n                obj.values[color].classList.add('jcolor-selected');\r\n            }\r\n\r\n            // Onchange\r\n            if (typeof(obj.options.onchange) == 'function') {\r\n                obj.options.onchange(el, color);\r\n            }\r\n\r\n            // Changes\r\n            if (el.value != obj.options.value) {\r\n                // Set input value\r\n                el.value = obj.options.value;\r\n                // Element onchange native\r\n                if (typeof(el.onchange) == 'function') {\r\n                    el.onchange({\r\n                        type: 'change',\r\n                        target: el,\r\n                        value: el.value\r\n                    });\r\n                }\r\n            }\r\n\r\n            if (obj.options.closeOnChange == true) {\r\n                obj.close();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get value\r\n     */\r\n    obj.getValue = function() {\r\n        return obj.options.value;\r\n    }\r\n\r\n    var backdropClickControl = false;\r\n\r\n    // Converts a number in decimal to hexadecimal\r\n    var decToHex = function(num) {\r\n        var hex = num.toString(16);\r\n        return hex.length === 1 ? \"0\" + hex : hex;\r\n    }\r\n\r\n    // Converts a color in rgb to hexadecimal\r\n    var rgbToHex = function(r, g, b) {\r\n        return \"#\" + decToHex(r) + decToHex(g) + decToHex(b);\r\n    }\r\n\r\n    // Converts a number in hexadecimal to decimal\r\n    var hexToDec = function(hex) {\r\n        return parseInt('0x' + hex);\r\n    }\r\n\r\n    // Converts a color in hexadecimal to rgb\r\n    var HexToRgb = function(hex) {\r\n        return [hexToDec(hex.substr(1, 2)), hexToDec(hex.substr(3, 2)), hexToDec(hex.substr(5, 2))]\r\n    }\r\n\r\n    var table = function() {\r\n        // Content of the first tab\r\n        var tableContainer = document.createElement('div');\r\n        tableContainer.className = 'jcolor-grid';\r\n\r\n        // Cells\r\n        obj.values = [];\r\n\r\n        // Table pallete\r\n        var t = document.createElement('table');\r\n        t.setAttribute('cellpadding', '7');\r\n        t.setAttribute('cellspacing', '0');\r\n\r\n        for (var j = 0; j < obj.options.palette.length; j++) {\r\n            var tr = document.createElement('tr');\r\n            for (var i = 0; i < obj.options.palette[j].length; i++) {\r\n                var td = document.createElement('td');\r\n                var color = obj.options.palette[j][i];\r\n                if (color.length < 7 && color.substr(0,1) !== '#') {\r\n                    color = '#' + color;\r\n                }\r\n                td.style.backgroundColor = color;\r\n                td.setAttribute('data-value', color);\r\n                td.innerHTML = '';\r\n                tr.appendChild(td);\r\n\r\n                // Selected color\r\n                if (obj.options.value == color) {\r\n                    td.classList.add('jcolor-selected');\r\n                }\r\n\r\n                // Possible values\r\n                obj.values[color] = td;\r\n            }\r\n            t.appendChild(tr);\r\n        }\r\n\r\n        // Append to the table\r\n        tableContainer.appendChild(t);\r\n\r\n        // Select color\r\n        tableContainer.addEventListener(\"mousedown\", function(e) {\r\n            if (e.target.tagName == 'TD') {\r\n                var value = e.target.getAttribute('data-value');\r\n                if (value) {\r\n                    obj.setValue(value);\r\n                }\r\n            }\r\n        });\r\n\r\n        return tableContainer;\r\n    }\r\n\r\n    // Canvas where the image will be rendered\r\n    var canvas = document.createElement('canvas');\r\n    canvas.width = 200;\r\n    canvas.height = 160;\r\n    var context = canvas.getContext(\"2d\");\r\n\r\n    var resizeCanvas = function() {\r\n        // Specifications necessary to correctly obtain colors later in certain positions\r\n        var m = tabs.firstChild.getBoundingClientRect();\r\n        canvas.width = m.width - 14;\r\n        gradient()\r\n    }\r\n\r\n    var gradient = function() {\r\n        var g = context.createLinearGradient(0, 0, canvas.width, 0);\r\n        // Create color gradient\r\n        g.addColorStop(0,    \"rgb(255,0,0)\");\r\n        g.addColorStop(0.15, \"rgb(255,0,255)\");\r\n        g.addColorStop(0.33, \"rgb(0,0,255)\");\r\n        g.addColorStop(0.49, \"rgb(0,255,255)\");\r\n        g.addColorStop(0.67, \"rgb(0,255,0)\");\r\n        g.addColorStop(0.84, \"rgb(255,255,0)\");\r\n        g.addColorStop(1,    \"rgb(255,0,0)\");\r\n        context.fillStyle = g;\r\n        context.fillRect(0, 0, canvas.width, canvas.height);\r\n        g = context.createLinearGradient(0, 0, 0, canvas.height);\r\n        g.addColorStop(0,   \"rgba(255,255,255,1)\");\r\n        g.addColorStop(0.5, \"rgba(255,255,255,0)\");\r\n        g.addColorStop(0.5, \"rgba(0,0,0,0)\");\r\n        g.addColorStop(1,   \"rgba(0,0,0,1)\");\r\n        context.fillStyle = g;\r\n        context.fillRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n\r\n    var hsl = function() {\r\n        var element = document.createElement('div');\r\n        element.className = \"jcolor-hsl\";\r\n\r\n        var point = document.createElement('div');\r\n        point.className = 'jcolor-point';\r\n\r\n        var div = document.createElement('div');\r\n        div.appendChild(canvas);\r\n        div.appendChild(point);\r\n        element.appendChild(div);\r\n\r\n        // Moves the marquee point to the specified position\r\n        var update = function(buttons, x, y) {\r\n            if (buttons === 1) {\r\n                var rect = element.getBoundingClientRect();\r\n                var left = x - rect.left;\r\n                var top = y - rect.top;\r\n                if (left < 0) {\r\n                    left = 0;\r\n                }\r\n                if (top < 0) {\r\n                    top = 0;\r\n                }\r\n                if (left > rect.width) {\r\n                    left = rect.width;\r\n                }\r\n                if (top > rect.height) {\r\n                    top = rect.height;\r\n                }\r\n                point.style.left = left + 'px';\r\n                point.style.top = top + 'px';\r\n                var pixel = context.getImageData(left, top, 1, 1).data;\r\n                slidersResult = rgbToHex(pixel[0], pixel[1], pixel[2]);\r\n            }\r\n        }\r\n\r\n        // Applies the point's motion function to the div that contains it\r\n        element.addEventListener('mousedown', function(e) {\r\n            update(e.buttons, e.clientX, e.clientY);\r\n        });\r\n\r\n        element.addEventListener('mousemove', function(e) {\r\n            update(e.buttons, e.clientX, e.clientY);\r\n        });\r\n\r\n        element.addEventListener('touchmove', function(e) {\r\n            update(1, e.changedTouches[0].clientX, e.changedTouches[0].clientY);\r\n        });\r\n\r\n        return element;\r\n    }\r\n\r\n    var slidersResult = '';\r\n\r\n    var rgbInputs = [];\r\n\r\n    var changeInputColors = function() {\r\n        if (slidersResult !== '') {\r\n            for (var j = 0; j < rgbInputs.length; j++) {\r\n                var currentColor = HexToRgb(slidersResult);\r\n\r\n                currentColor[j] = 0;\r\n\r\n                var newGradient = 'linear-gradient(90deg, rgb(';\r\n                newGradient += currentColor.join(', ');\r\n                newGradient += '), rgb(';\r\n\r\n                currentColor[j] = 255;\r\n\r\n                newGradient += currentColor.join(', ');\r\n                newGradient += '))';\r\n\r\n                rgbInputs[j].style.backgroundImage = newGradient;\r\n            }\r\n        }\r\n    }\r\n\r\n    var sliders = function() {\r\n        // Content of the third tab\r\n        var slidersElement = document.createElement('div');\r\n        slidersElement.className = 'jcolor-sliders';\r\n\r\n        var slidersBody = document.createElement('div');\r\n\r\n        // Creates a range-type input with the specified name\r\n        var createSliderInput = function(name) {\r\n            var inputContainer = document.createElement('div');\r\n            inputContainer.className = 'jcolor-sliders-input-container';\r\n\r\n            var label = document.createElement('label');\r\n            label.innerText = name;\r\n\r\n            var subContainer = document.createElement('div');\r\n            subContainer.className = 'jcolor-sliders-input-subcontainer';\r\n\r\n            var input = document.createElement('input');\r\n            input.type = 'range';\r\n            input.min = 0;\r\n            input.max = 255;\r\n            input.value = 0;\r\n\r\n            inputContainer.appendChild(label);\r\n            subContainer.appendChild(input);\r\n\r\n            var value = document.createElement('div');\r\n            value.innerText = input.value;\r\n\r\n            input.addEventListener('input', function() {\r\n                value.innerText = input.value;\r\n            });\r\n\r\n            subContainer.appendChild(value);\r\n            inputContainer.appendChild(subContainer);\r\n\r\n            slidersBody.appendChild(inputContainer);\r\n\r\n            return input;\r\n        }\r\n\r\n        // Creates red, green and blue inputs\r\n        rgbInputs = [\r\n            createSliderInput('Red'),\r\n            createSliderInput('Green'),\r\n            createSliderInput('Blue'),\r\n        ];\r\n\r\n        slidersElement.appendChild(slidersBody);\r\n\r\n        // Element that prints the current color\r\n        var slidersResultColor = document.createElement('div');\r\n        slidersResultColor.className = 'jcolor-sliders-final-color';\r\n\r\n        var resultElement = document.createElement('div');\r\n        resultElement.style.visibility = 'hidden';\r\n        resultElement.innerText = 'a';\r\n        slidersResultColor.appendChild(resultElement)\r\n\r\n        // Update the element that prints the current color\r\n        var updateResult = function() {\r\n            var resultColor = rgbToHex(parseInt(rgbInputs[0].value), parseInt(rgbInputs[1].value), parseInt(rgbInputs[2].value));\r\n\r\n            resultElement.innerText = resultColor;\r\n            resultElement.style.color = resultColor;\r\n            resultElement.style.removeProperty('visibility');\r\n\r\n            slidersResult = resultColor;\r\n        }\r\n\r\n        // Apply the update function to color inputs\r\n        rgbInputs.forEach(function(rgbInput) {\r\n            rgbInput.addEventListener('input', function() {\r\n                updateResult();\r\n                changeInputColors();\r\n            });\r\n        });\r\n\r\n        slidersElement.appendChild(slidersResultColor);\r\n\r\n        return slidersElement;\r\n    }\r\n\r\n    var init = function() {\r\n        // Initial options\r\n        obj.setOptions(options);\r\n\r\n        // Add a proper input tag when the element is an input\r\n        if (el.tagName == 'INPUT') {\r\n            el.classList.add('jcolor-input');\r\n            el.readOnly = true;\r\n        }\r\n\r\n        // Table container\r\n        container = document.createElement('div');\r\n        container.className = 'jcolor';\r\n\r\n        // Table container\r\n        backdrop = document.createElement('div');\r\n        backdrop.className = 'jcolor-backdrop';\r\n        container.appendChild(backdrop);\r\n\r\n        // Content\r\n        content = document.createElement('div');\r\n        content.className = 'jcolor-content';\r\n\r\n        // Controls\r\n        var controls = document.createElement('div');\r\n        controls.className = 'jcolor-controls';\r\n        content.appendChild(controls);\r\n\r\n        // Reset button\r\n        resetButton  = document.createElement('div');\r\n        resetButton.className = 'jcolor-reset';\r\n        resetButton.innerHTML = obj.options.resetLabel;\r\n        resetButton.onclick = function(e) {\r\n            obj.setValue('');\r\n            obj.close();\r\n        }\r\n        controls.appendChild(resetButton);\r\n\r\n        // Close button\r\n        closeButton  = document.createElement('div');\r\n        closeButton.className = 'jcolor-close';\r\n        closeButton.innerHTML = obj.options.doneLabel;\r\n        closeButton.onclick = function(e) {\r\n            if (jsuitesTabs.getActive() > 0) {\r\n                obj.setValue(slidersResult);\r\n            }\r\n            obj.close();\r\n        }\r\n        controls.appendChild(closeButton);\r\n\r\n        // Element that will be used to create the tabs\r\n        tabs = document.createElement('div');\r\n        content.appendChild(tabs);\r\n\r\n        // Starts the jSuites tabs component\r\n        jsuitesTabs = jSuites.tabs(tabs, {\r\n            animation: true,\r\n            data: [\r\n                {\r\n                    title: 'Grid',\r\n                    contentElement: table(),\r\n                },\r\n                {\r\n                    title: 'Spectrum',\r\n                    contentElement: hsl(),\r\n                },\r\n                {\r\n                    title: 'Sliders',\r\n                    contentElement: sliders(),\r\n                }\r\n            ],\r\n            onchange: function(element, instance, index) {\r\n                if (index === 1) {\r\n                    resizeCanvas();\r\n                } else {\r\n                    var color = slidersResult !== '' ? slidersResult : obj.getValue();\r\n\r\n                    if (index === 2 && color) {\r\n                        var rgb = HexToRgb(color);\r\n\r\n                        rgbInputs.forEach(function(rgbInput, index) {\r\n                            rgbInput.value = rgb[index];\r\n                            rgbInput.dispatchEvent(new Event('input'));\r\n                        });\r\n                    }\r\n                }\r\n            },\r\n            palette: 'modern',\r\n        });\r\n\r\n        container.appendChild(content);\r\n\r\n        // Insert picker after the element\r\n        if (el.tagName == 'INPUT') {\r\n            el.parentNode.insertBefore(container, el.nextSibling);\r\n        } else {\r\n            el.appendChild(container);\r\n        }\r\n\r\n        /**\r\n         * If element is focus open the picker\r\n         */\r\n        el.addEventListener(\"mouseup\", function(e) {\r\n            obj.open();\r\n        });\r\n\r\n        backdrop.addEventListener(\"mousedown\", function(e) {\r\n            backdropClickControl = true;\r\n        });\r\n\r\n        backdrop.addEventListener(\"mouseup\", function(e) {\r\n            if (backdropClickControl) {\r\n                obj.close();\r\n                backdropClickControl = false;\r\n            }\r\n        });\r\n\r\n        // If the picker is open on the spectrum tab, it changes the canvas size when the window size is changed\r\n        window.addEventListener('resize', function() {\r\n            if (container.classList.contains('jcolor-focus') && jsuitesTabs.getActive() == 1) {\r\n                resizeCanvas();\r\n            }\r\n        });\r\n\r\n        // Default opened\r\n        if (obj.options.opened == true) {\r\n            obj.open();\r\n        }\r\n\r\n        // Change\r\n        el.change = obj.setValue;\r\n\r\n        // Global generic value handler\r\n        el.val = function(val) {\r\n            if (val === undefined) {\r\n                return obj.getValue();\r\n            } else {\r\n                obj.setValue(val);\r\n            }\r\n        }\r\n\r\n        // Keep object available from the node\r\n        el.color = obj;\r\n\r\n        // Container shortcut\r\n        container.color = obj;\r\n    }\r\n\r\n    init();\r\n\r\n    return obj;\r\n});\r\n\r\n\r\n\r\njSuites.contextmenu = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    // Default configuration\r\n    var defaults = {\r\n        items: null,\r\n        onclick: null,\r\n    };\r\n\r\n    // Loop through our object\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    // Class definition\r\n    el.classList.add('jcontextmenu');\r\n    // Focusable\r\n    el.setAttribute('tabindex', '900');\r\n\r\n    /**\r\n     * Open contextmenu\r\n     */\r\n    obj.open = function(e, items) {\r\n        if (items) {\r\n            // Update content\r\n            obj.options.items = items;\r\n            // Create items\r\n            obj.create(items);\r\n        }\r\n\r\n        // Coordinates\r\n        if ((obj.options.items && obj.options.items.length > 0) || el.children.length) {\r\n            if (e.target) {\r\n                var x = e.clientX;\r\n                var y = e.clientY;\r\n            } else {\r\n                var x = e.x;\r\n                var y = e.y;\r\n            }\r\n\r\n            el.classList.add('jcontextmenu-focus');\r\n            el.focus();\r\n\r\n            var rect = el.getBoundingClientRect();\r\n\r\n            if (window.innerHeight < y + rect.height) {\r\n                var h = y - rect.height;\r\n                if (h < 0) {\r\n                    h = 0;\r\n                }\r\n                el.style.top = h + 'px';\r\n            } else {\r\n                el.style.top = y + 'px';\r\n            }\r\n\r\n            if (window.innerWidth < x + rect.width) {\r\n                if (x - rect.width > 0) {\r\n                    el.style.left = (x - rect.width) + 'px';\r\n                } else {\r\n                    el.style.left = '10px';\r\n                }\r\n            } else {\r\n                el.style.left = x + 'px';\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Close menu\r\n     */\r\n    obj.close = function() {\r\n        if (el.classList.contains('jcontextmenu-focus')) {\r\n            el.classList.remove('jcontextmenu-focus');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create items based on the declared objectd\r\n     * @param {object} items - List of object\r\n     */\r\n    obj.create = function(items) {\r\n        // Update content\r\n        el.innerHTML = '';\r\n\r\n        // Add header contextmenu\r\n        var itemHeader = createHeader();\r\n        el.appendChild(itemHeader);\r\n\r\n        // Append items\r\n        for (var i = 0; i < items.length; i++) {\r\n            var itemContainer = createItemElement(items[i]);\r\n            el.appendChild(itemContainer);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * createHeader for context menu\r\n     * @private\r\n     * @returns {HTMLElement}\r\n     */\r\n    function createHeader() {\r\n        var header = document.createElement('div');\r\n        header.classList.add(\"header\");\r\n        header.addEventListener(\"click\", function(e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        });\r\n        var title = document.createElement('a');\r\n        title.classList.add(\"title\");\r\n        title.innerHTML = jSuites.translate(\"Menu\");\r\n\r\n        header.appendChild(title);\r\n\r\n        var closeButton = document.createElement('a');\r\n        closeButton.classList.add(\"close\");\r\n        closeButton.innerHTML = jSuites.translate(\"close\");\r\n        closeButton.addEventListener(\"click\", function(e) {\r\n            obj.close();\r\n        });\r\n\r\n        header.appendChild(closeButton);\r\n\r\n        return header;\r\n    }\r\n\r\n    /**\r\n     * Private function for create a new Item element\r\n     * @param {type} item\r\n     * @returns {jsuitesL#15.jSuites.contextmenu.createItemElement.itemContainer}\r\n     */\r\n    function createItemElement(item) {\r\n        if (item.type && (item.type == 'line' || item.type == 'divisor')) {\r\n            var itemContainer = document.createElement('hr');\r\n        } else {\r\n            var itemContainer = document.createElement('div');\r\n            var itemText = document.createElement('a');\r\n            itemText.innerHTML = item.title;\r\n\r\n            if (item.tooltip) {\r\n                itemContainer.setAttribute('title', item.tooltip);\r\n            }\r\n\r\n            if (item.icon) {\r\n                itemContainer.setAttribute('data-icon', item.icon);\r\n            }\r\n\r\n            if (item.id) {\r\n                itemContainer.id = item.id;\r\n            }\r\n\r\n            if (item.disabled) {\r\n                itemContainer.className = 'jcontextmenu-disabled';\r\n            } else if (item.onclick) {\r\n                itemContainer.method = item.onclick;\r\n                itemContainer.addEventListener(\"mousedown\", function(e) {\r\n                    e.preventDefault();\r\n                });\r\n                itemContainer.addEventListener(\"mouseup\", function() {\r\n                    // Execute method\r\n                    this.method(this);\r\n                });\r\n            }\r\n            itemContainer.appendChild(itemText);\r\n\r\n            if (item.submenu) {\r\n                var itemIconSubmenu = document.createElement('span');\r\n                itemIconSubmenu.innerHTML = \"&#9658;\";\r\n                itemContainer.appendChild(itemIconSubmenu);\r\n                itemContainer.classList.add('jcontexthassubmenu');\r\n                var el_submenu = document.createElement('div');\r\n                // Class definition\r\n                el_submenu.classList.add('jcontextmenu');\r\n                // Focusable\r\n                el_submenu.setAttribute('tabindex', '900');\r\n\r\n                // Append items\r\n                var submenu = item.submenu;\r\n                for (var i = 0; i < submenu.length; i++) {\r\n                    var itemContainerSubMenu = createItemElement(submenu[i]);\r\n                    el_submenu.appendChild(itemContainerSubMenu);\r\n                }\r\n\r\n                itemContainer.appendChild(el_submenu);\r\n            } else if (item.shortcut) {\r\n                var itemShortCut = document.createElement('span');\r\n                itemShortCut.innerHTML = item.shortcut;\r\n                itemContainer.appendChild(itemShortCut);\r\n            }\r\n        }\r\n        return itemContainer;\r\n    }\r\n\r\n    if (typeof(obj.options.onclick) == 'function') {\r\n        el.addEventListener('click', function(e) {\r\n            obj.options.onclick(obj, e);\r\n        });\r\n    }\r\n\r\n    // Create items\r\n    if (obj.options.items) {\r\n        obj.create(obj.options.items);\r\n    }\r\n\r\n    el.addEventListener('blur', function(e) {\r\n        obj.close();\r\n    });\r\n\r\n    if (! jSuites.contextmenu.hasEvents) {\r\n        window.addEventListener(\"mousewheel\", function() {\r\n            obj.close();\r\n        });\r\n\r\n        document.addEventListener(\"contextmenu\", function(e) {\r\n            var id = jSuites.contextmenu.getElement(e.target);\r\n            if (id) {\r\n                var element = document.querySelector('#' + id);\r\n                if (! element) {\r\n                    console.error('JSUITES: Contextmenu id not found');\r\n                } else {\r\n                    element.contextmenu.open(e);\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        });\r\n\r\n        jSuites.contextmenu.hasEvents = true;\r\n    }\r\n\r\n    el.contextmenu = obj;\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.contextmenu.getElement = function(element) {\r\n    var foundId = 0;\r\n\r\n    function path (element) {\r\n        if (element.parentNode && element.getAttribute('aria-contextmenu-id')) {\r\n            foundId = element.getAttribute('aria-contextmenu-id')\r\n        } else {\r\n            if (element.parentNode) {\r\n                path(element.parentNode);\r\n            }\r\n        }\r\n    }\r\n\r\n    path(element);\r\n\r\n    return foundId;\r\n}\r\n\r\n\r\njSuites.dropdown = (function(el, options) {\r\n    // Already created, update options\r\n    if (el.dropdown) {\r\n        return el.dropdown.setOptions(options, true);\r\n    }\r\n\r\n    // New instance\r\n    var obj = { type: 'dropdown' };\r\n    obj.options = {};\r\n\r\n    // Success\r\n    var success = function(data, val) {\r\n        // Set data\r\n        if (data && data.length) {\r\n            // Sort\r\n            if (obj.options.sortResults !== false) {\r\n                if(typeof obj.options.sortResults == \"function\") {\r\n                    data.sort(obj.options.sortResults);\r\n                } else {\r\n                    data.sort(sortData);\r\n                }\r\n            }\r\n\r\n            obj.setData(data);\r\n\r\n            // Onload method\r\n            if (typeof(obj.options.onload) == 'function') {\r\n                obj.options.onload(el, obj, data, val);\r\n            }\r\n        }\r\n\r\n        // Set value\r\n        if (val) {\r\n            applyValue(val);\r\n        }\r\n\r\n        // Component value\r\n        if (val === undefined || val === null) {\r\n            obj.options.value = '';\r\n        }\r\n        el.value = obj.options.value;\r\n\r\n        // Open dropdown\r\n        if (obj.options.opened == true) {\r\n            obj.open();\r\n        }\r\n    }\r\n\r\n    \r\n    // Default sort\r\n    var sortData = function(itemA, itemB) {\r\n        var testA, testB;\r\n        if(typeof itemA == \"string\") {\r\n            testA = itemA;\r\n        } else {\r\n            if(itemA.text) {\r\n                testA = itemA.text;\r\n            } else if(itemA.name) {\r\n                testA = itemA.name;\r\n            }\r\n        }\r\n        \r\n        if(typeof itemB == \"string\") {\r\n            testB = itemB;\r\n        } else {\r\n            if(itemB.text) {\r\n                testB = itemB.text;\r\n            } else if(itemB.name) {\r\n                testB = itemB.name;\r\n            }\r\n        }\r\n        \r\n        if(typeof testA == \"string\" || typeof testB == \"string\") {\r\n            if(typeof testA != \"string\") { testA = \"\"+testA; }\r\n            if(typeof testB != \"string\") { testB = \"\"+testB; }\r\n            return testA.localeCompare(testB);\r\n        } else {\r\n            return testA - testB;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Reset the options for the dropdown\r\n     */\r\n    var resetValue = function() {\r\n        // Reset value container\r\n        obj.value = {};\r\n        // Remove selected\r\n        for (var i = 0; i < obj.items.length; i++) {\r\n            if (obj.items[i].selected == true) {\r\n                if (obj.items[i].element) {\r\n                    obj.items[i].element.classList.remove('jdropdown-selected')\r\n                }\r\n                obj.items[i].selected = null;\r\n            }\r\n        }\r\n        // Reset options\r\n        obj.options.value = '';\r\n    }\r\n\r\n    /**\r\n     * Apply values to the dropdown\r\n     */\r\n    var applyValue = function(values) {\r\n        // Reset the current values\r\n        resetValue();\r\n\r\n        // Read values\r\n        if (values !== null) {\r\n            if (! values) {\r\n                if (typeof(obj.value['']) !== 'undefined') {\r\n                    obj.value[''] = '';\r\n                }\r\n            } else {\r\n                if (! Array.isArray(values)) {\r\n                    values = ('' + values).split(';');\r\n                }\r\n                for (var i = 0; i < values.length; i++) {\r\n                    obj.value[values[i]] = '';\r\n                }\r\n            }\r\n        }\r\n\r\n        // Update the DOM\r\n        for (var i = 0; i < obj.items.length; i++) {\r\n            if (typeof(obj.value[Value(i)]) !== 'undefined') {\r\n                if (obj.items[i].element) {\r\n                    obj.items[i].element.classList.add('jdropdown-selected')\r\n                }\r\n                obj.items[i].selected = true;\r\n\r\n                // Keep label\r\n                obj.value[Value(i)] = Text(i);\r\n            }\r\n        }\r\n\r\n        // Global value\r\n        obj.options.value = Object.keys(obj.value).join(';');\r\n\r\n        // Update labels\r\n        obj.header.value = obj.getText();\r\n    }\r\n\r\n    // Get the value of one item\r\n    var Value = function(k, v) {\r\n        // Legacy purposes\r\n        if (! obj.options.format) {\r\n            var property = 'value';\r\n        } else {\r\n            var property = 'id';\r\n        }\r\n\r\n        if (obj.items[k]) {\r\n            if (v !== undefined) {\r\n                return obj.items[k].data[property] = v;\r\n            } else {\r\n                return obj.items[k].data[property];\r\n            }\r\n        }\r\n\r\n        return '';\r\n    }\r\n\r\n    // Get the label of one item\r\n    var Text = function(k, v) {\r\n        // Legacy purposes\r\n        if (! obj.options.format) {\r\n            var property = 'text';\r\n        } else {\r\n            var property = 'name';\r\n        }\r\n\r\n        if (obj.items[k]) {\r\n            if (v !== undefined) {\r\n                return obj.items[k].data[property] = v;\r\n            } else {\r\n                return obj.items[k].data[property];\r\n            }\r\n        }\r\n\r\n        return '';\r\n    }\r\n\r\n    var getValue = function() {\r\n        return Object.keys(obj.value);\r\n    }\r\n\r\n    var getText = function() {\r\n        var data = [];\r\n        var k = Object.keys(obj.value);\r\n        for (var i = 0; i < k.length; i++) {\r\n            data.push(obj.value[k[i]]);\r\n        }\r\n        return data;\r\n    }\r\n\r\n    obj.setOptions = function(options, reset) {\r\n        if (! options) {\r\n            options = {};\r\n        }\r\n\r\n        // Default configuration\r\n        var defaults = {\r\n            url: null,\r\n            data: [],\r\n            format: 0,\r\n            multiple: false,\r\n            autocomplete: false,\r\n            remoteSearch: false,\r\n            lazyLoading: false,\r\n            type: null,\r\n            width: null,\r\n            maxWidth: null,\r\n            opened: false,\r\n            value: null,\r\n            placeholder: '',\r\n            newOptions: false,\r\n            position: false,\r\n            onchange: null,\r\n            onload: null,\r\n            onopen: null,\r\n            onclose: null,\r\n            onfocus: null,\r\n            onblur: null,\r\n            oninsert: null,\r\n            onbeforeinsert: null,\r\n            sortResults: false,\r\n            autofocus: false,\r\n        }\r\n\r\n        // Loop through our object\r\n        for (var property in defaults) {\r\n            if (options && options.hasOwnProperty(property)) {\r\n                obj.options[property] = options[property];\r\n            } else {\r\n                if (typeof(obj.options[property]) == 'undefined' || reset === true) {\r\n                    obj.options[property] = defaults[property];\r\n                }\r\n            }\r\n        }\r\n\r\n        // Force autocomplete search\r\n        if (obj.options.remoteSearch == true || obj.options.type === 'searchbar') {\r\n            obj.options.autocomplete = true;\r\n        }\r\n\r\n        // New options\r\n        if (obj.options.newOptions == true) {\r\n            obj.header.classList.add('jdropdown-add');\r\n        } else {\r\n            obj.header.classList.remove('jdropdown-add');\r\n        }\r\n\r\n        // Autocomplete\r\n        if (obj.options.autocomplete == true) {\r\n            obj.header.removeAttribute('readonly');\r\n        } else {\r\n            obj.header.setAttribute('readonly', 'readonly');\r\n        }\r\n\r\n        // Place holder\r\n        if (obj.options.placeholder) {\r\n            obj.header.setAttribute('placeholder', obj.options.placeholder);\r\n        } else {\r\n            obj.header.removeAttribute('placeholder');\r\n        }\r\n\r\n        // Remove specific dropdown typing to add again\r\n        el.classList.remove('jdropdown-searchbar');\r\n        el.classList.remove('jdropdown-picker');\r\n        el.classList.remove('jdropdown-list');\r\n\r\n        if (obj.options.type == 'searchbar') {\r\n            el.classList.add('jdropdown-searchbar');\r\n        } else if (obj.options.type == 'list') {\r\n            el.classList.add('jdropdown-list');\r\n        } else if (obj.options.type == 'picker') {\r\n            el.classList.add('jdropdown-picker');\r\n        } else {\r\n            if (jSuites.getWindowWidth() < 800) {\r\n                if (obj.options.autocomplete) {\r\n                    el.classList.add('jdropdown-searchbar');\r\n                    obj.options.type = 'searchbar';\r\n                } else {\r\n                    el.classList.add('jdropdown-picker');\r\n                    obj.options.type = 'picker';\r\n                }\r\n            } else {\r\n                if (obj.options.width) {\r\n                    el.style.width = obj.options.width;\r\n                    el.style.minWidth = obj.options.width;\r\n                } else {\r\n                    el.style.removeProperty('width');\r\n                    el.style.removeProperty('min-width');\r\n                }\r\n\r\n                el.classList.add('jdropdown-default');\r\n                obj.options.type = 'default';\r\n            }\r\n        }\r\n\r\n        // Close button\r\n        if (obj.options.type == 'searchbar') {\r\n            containerHeader.appendChild(closeButton);\r\n        } else {\r\n            container.insertBefore(closeButton, container.firstChild);\r\n        }\r\n\r\n        // Load the content\r\n        if (obj.options.url && ! options.data) {\r\n            jSuites.ajax({\r\n                url: obj.options.url,\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    if (data) {\r\n                        success(data, obj.options.value);\r\n                    }\r\n                }\r\n            });\r\n        } else {\r\n            success(obj.options.data, obj.options.value);\r\n        }\r\n\r\n        // Return the instance\r\n        return obj;\r\n    }\r\n\r\n    // Helpers\r\n    var containerHeader = null;\r\n    var container = null;\r\n    var content = null;\r\n    var closeButton = null;\r\n    var resetButton = null;\r\n    var backdrop = null;\r\n\r\n    var keyTimer = null;\r\n\r\n    /**\r\n     * Init dropdown\r\n     */\r\n    var init = function() {\r\n        // Do not accept null\r\n        if (! options) {\r\n            options = {};\r\n        }\r\n\r\n        // If the element is a SELECT tag, create a configuration object\r\n        if (el.tagName == 'SELECT') {\r\n            var ret = jSuites.dropdown.extractFromDom(el, options);\r\n            el = ret.el;\r\n            options = ret.options;\r\n        }\r\n\r\n        // Place holder\r\n        if (! options.placeholder && el.getAttribute('placeholder')) {\r\n            options.placeholder = el.getAttribute('placeholder');\r\n        }\r\n\r\n        // Value container\r\n        obj.value = {};\r\n        // Containers\r\n        obj.items = [];\r\n        obj.groups = [];\r\n        // Search options\r\n        obj.search = '';\r\n        obj.results = null;\r\n\r\n        // Create dropdown\r\n        el.classList.add('jdropdown');\r\n\r\n        // Header container\r\n        containerHeader = document.createElement('div');\r\n        containerHeader.className = 'jdropdown-container-header';\r\n\r\n        // Header\r\n        obj.header = document.createElement('input');\r\n        obj.header.className = 'jdropdown-header';\r\n        obj.header.type = 'text';\r\n        obj.header.setAttribute('autocomplete', 'off');\r\n        obj.header.onfocus = function() {\r\n            if (typeof(obj.options.onfocus) == 'function') {\r\n                obj.options.onfocus(el);\r\n            }\r\n        }\r\n\r\n        obj.header.onblur = function() {\r\n            if (typeof(obj.options.onblur) == 'function') {\r\n                obj.options.onblur(el);\r\n            }\r\n        }\r\n\r\n        obj.header.onkeyup = function(e) {\r\n            if (obj.options.autocomplete == true && ! keyTimer) {\r\n                if (obj.search != obj.header.value.trim()) {\r\n                    keyTimer = setTimeout(function() {\r\n                        obj.find(obj.header.value.trim());\r\n                        keyTimer = null;\r\n                    }, 400);\r\n                }\r\n\r\n                if (! el.classList.contains('jdropdown-focus')) {\r\n                    obj.open();\r\n                }\r\n            } else {\r\n                if (! obj.options.autocomplete) {\r\n                    obj.next(e.key);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Global controls\r\n        if (! jSuites.dropdown.hasEvents) {\r\n            // Execute only one time\r\n            jSuites.dropdown.hasEvents = true;\r\n            // Enter and Esc\r\n            document.addEventListener(\"keydown\", jSuites.dropdown.keydown);\r\n        }\r\n\r\n        // Container\r\n        container = document.createElement('div');\r\n        container.className = 'jdropdown-container';\r\n\r\n        // Dropdown content\r\n        content = document.createElement('div');\r\n        content.className = 'jdropdown-content';\r\n\r\n        // Close button\r\n        closeButton = document.createElement('div');\r\n        closeButton.className = 'jdropdown-close';\r\n        closeButton.innerHTML = 'Done';\r\n\r\n        // Reset button\r\n        resetButton = document.createElement('div');\r\n        resetButton.className = 'jdropdown-reset';\r\n        resetButton.innerHTML = 'x';\r\n        resetButton.onclick = function() {\r\n            obj.reset();\r\n            obj.close();\r\n        }\r\n\r\n        // Create backdrop\r\n        backdrop = document.createElement('div');\r\n        backdrop.className = 'jdropdown-backdrop';\r\n\r\n        // Append elements\r\n        containerHeader.appendChild(obj.header);\r\n\r\n        container.appendChild(content);\r\n        el.appendChild(containerHeader);\r\n        el.appendChild(container);\r\n        el.appendChild(backdrop);\r\n\r\n        // Set the otiptions\r\n        obj.setOptions(options);\r\n\r\n        if ('ontouchsend' in document.documentElement === true) {\r\n            el.addEventListener('touchsend', jSuites.dropdown.mouseup);\r\n        } else {\r\n            el.addEventListener('mouseup', jSuites.dropdown.mouseup);\r\n        }\r\n\r\n        // Lazyloading\r\n        if (obj.options.lazyLoading == true) {\r\n            jSuites.lazyLoading(content, {\r\n                loadUp: obj.loadUp,\r\n                loadDown: obj.loadDown,\r\n            });\r\n        }\r\n\r\n        content.onwheel = function(e) {\r\n            e.stopPropagation();\r\n        }\r\n\r\n        // Change method\r\n        el.change = obj.setValue;\r\n\r\n        // Global generic value handler\r\n        el.val = function(val) {\r\n            if (val === undefined) {\r\n                return obj.getValue(obj.options.multiple ? true : false);\r\n            } else {\r\n                obj.setValue(val);\r\n            }\r\n        }\r\n\r\n        // Keep object available from the node\r\n        el.dropdown = obj;\r\n    }\r\n\r\n    /**\r\n     * Get the current remote source of data URL\r\n     */\r\n    obj.getUrl = function() {\r\n        return obj.options.url;\r\n    }\r\n\r\n    /**\r\n     * Set the new data from a remote source\r\n     * @param {string} url - url from the remote source\r\n     * @param {function} callback - callback when the data is loaded\r\n     */\r\n    obj.setUrl = function(url, callback) {\r\n        obj.options.url = url;\r\n\r\n        jSuites.ajax({\r\n            url: obj.options.url,\r\n            method: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                obj.setData(data);\r\n                // Callback\r\n                if (typeof(callback) == 'function') {\r\n                    callback(obj);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Set ID for one item\r\n     */\r\n    obj.setId = function(item, v) {\r\n        // Legacy purposes\r\n        if (! obj.options.format) {\r\n            var property = 'value';\r\n        } else {\r\n            var property = 'id';\r\n        }\r\n\r\n        if (typeof(item) == 'object') {\r\n            item[property] = v;\r\n        } else {\r\n            obj.items[item].data[property] = v;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add a new item\r\n     * @param {string} title - title of the new item\r\n     * @param {string} id - value/id of the new item\r\n     */\r\n    obj.add = function(title, id) {\r\n        if (! title) {\r\n            var current = obj.options.autocomplete == true ? obj.header.value : '';\r\n            var title = prompt(jSuites.translate('Add A New Option'), current);\r\n            if (! title) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // Id\r\n        if (! id) {\r\n           id = jSuites.guid();\r\n        }\r\n\r\n        // Create new item\r\n        if (! obj.options.format) {\r\n            var item = {\r\n                value: id,\r\n                text: title,\r\n            }\r\n        } else {\r\n            var item = {\r\n                id: id,\r\n                name: title,\r\n            }\r\n        }\r\n\r\n        // Callback\r\n        if (typeof(obj.options.onbeforeinsert) == 'function') {\r\n            var ret = obj.options.onbeforeinsert(obj, item);\r\n            if (ret === false) {\r\n                return false;\r\n            } else if (ret) {\r\n                item = ret;\r\n            }\r\n        }\r\n\r\n        // Add item to the main list\r\n        obj.options.data.push(item);\r\n\r\n        // Create DOM\r\n        var newItem = obj.createItem(item);\r\n\r\n        // Append DOM to the list\r\n        content.appendChild(newItem.element);\r\n\r\n        // Callback\r\n        if (typeof(obj.options.oninsert) == 'function') {\r\n            obj.options.oninsert(obj, item, newItem);\r\n        }\r\n\r\n        // Show content\r\n        if (content.style.display == 'none') {\r\n            content.style.display = '';\r\n        }\r\n\r\n        // Search?\r\n        if (obj.results) {\r\n            obj.results.push(newItem);\r\n        }\r\n\r\n        return item;\r\n    }\r\n\r\n    /**\r\n     * Create a new item\r\n     */\r\n    obj.createItem = function(data, group, groupName) {\r\n        // Keep the correct source of data\r\n        if (! obj.options.format) {\r\n            if (! data.value && data.id !== undefined) {\r\n                data.value = data.id;\r\n                //delete data.id;\r\n            }\r\n            if (! data.text && data.name !== undefined) {\r\n                data.text = data.name;\r\n                //delete data.name;\r\n            }\r\n        } else {\r\n            if (! data.id && data.value !== undefined) {\r\n                data.id = data.value;\r\n                //delete data.value;\r\n            }\r\n            if (! data.name && data.text !== undefined) {\r\n                data.name = data.text\r\n                //delete data.text;\r\n            }\r\n        }\r\n\r\n        // Create item\r\n        var item = {};\r\n        item.element = document.createElement('div');\r\n        item.element.className = 'jdropdown-item';\r\n        item.element.indexValue = obj.items.length;\r\n        item.data = data;\r\n\r\n        // Groupd DOM\r\n        if (group) {\r\n            item.group = group; \r\n        }\r\n\r\n        // Id\r\n        if (data.id) {\r\n            item.element.setAttribute('id', data.id);\r\n        }\r\n\r\n        // Disabled\r\n        if (data.disabled == true) {\r\n            item.element.setAttribute('data-disabled', true);\r\n        }\r\n\r\n        // Tooltip\r\n        if (data.tooltip) {\r\n            item.element.setAttribute('title', data.tooltip);\r\n        }\r\n\r\n        // Image\r\n        if (data.image) {\r\n            var image = document.createElement('img');\r\n            image.className = 'jdropdown-image';\r\n            image.src = data.image;\r\n            if (! data.title) {\r\n               image.classList.add('jdropdown-image-small');\r\n            }\r\n            item.element.appendChild(image);\r\n        } else if (data.icon) {\r\n            var icon = document.createElement('span');\r\n            icon.className = \"jdropdown-icon material-icons\";\r\n            icon.innerText = data.icon;\r\n            if (! data.title) {\r\n               icon.classList.add('jdropdown-icon-small');\r\n            }\r\n            if (data.color) {\r\n                icon.style.color = data.color;\r\n            }\r\n            item.element.appendChild(icon);\r\n        } else if (data.color) {\r\n            var color = document.createElement('div');\r\n            color.className = 'jdropdown-color';\r\n            color.style.backgroundColor = data.color;\r\n            item.element.appendChild(color);\r\n        }\r\n\r\n        // Set content\r\n        if (! obj.options.format) {\r\n            var text = data.text;\r\n        } else {\r\n            var text = data.name;\r\n        }\r\n\r\n        var node = document.createElement('div');\r\n        node.className = 'jdropdown-description';\r\n        node.innerHTML = text || '&nbsp;'; \r\n\r\n        // Title\r\n        if (data.title) {\r\n            var title = document.createElement('div');\r\n            title.className = 'jdropdown-title';\r\n            title.innerText = data.title;\r\n            node.appendChild(title);\r\n        }\r\n\r\n        // Set content\r\n        if (! obj.options.format) {\r\n            var val = data.value;\r\n        } else {\r\n            var val = data.id;\r\n        }\r\n\r\n        // Value\r\n        if (obj.value[val]) {\r\n            item.element.classList.add('jdropdown-selected');\r\n            item.selected = true;\r\n        }\r\n\r\n        // Keep DOM accessible\r\n        obj.items.push(item);\r\n\r\n        // Add node to item\r\n        item.element.appendChild(node);\r\n\r\n        return item;\r\n    }\r\n\r\n    obj.appendData = function(data) {\r\n        // Create elements\r\n        if (data.length) {\r\n            // Helpers\r\n            var items = [];\r\n            var groups = [];\r\n\r\n            // Prepare data\r\n            for (var i = 0; i < data.length; i++) {\r\n                // Process groups\r\n                if (data[i].group) {\r\n                    if (! groups[data[i].group]) {\r\n                        groups[data[i].group] = [];\r\n                    }\r\n                    groups[data[i].group].push(i);\r\n                } else {\r\n                    items.push(i);\r\n                }\r\n            }\r\n\r\n            // Number of items counter\r\n            var counter = 0;\r\n\r\n            // Groups\r\n            var groupNames = Object.keys(groups);\r\n\r\n            // Append groups in case exists\r\n            if (groupNames.length > 0) {\r\n                for (var i = 0; i < groupNames.length; i++) {\r\n                    // Group container\r\n                    var group = document.createElement('div');\r\n                    group.className = 'jdropdown-group';\r\n                    // Group name\r\n                    var groupName = document.createElement('div');\r\n                    groupName.className = 'jdropdown-group-name';\r\n                    groupName.innerHTML = groupNames[i];\r\n                    // Group arrow\r\n                    var groupArrow = document.createElement('i');\r\n                    groupArrow.className = 'jdropdown-group-arrow jdropdown-group-arrow-down';\r\n                    groupName.appendChild(groupArrow);\r\n                    // Group items\r\n                    var groupContent = document.createElement('div');\r\n                    groupContent.className = 'jdropdown-group-items';\r\n                    for (var j = 0; j < groups[groupNames[i]].length; j++) {\r\n                        var item = obj.createItem(data[groups[groupNames[i]][j]], group, groupNames[i]);\r\n\r\n                        if (obj.options.lazyLoading == false || counter < 200) {\r\n                            groupContent.appendChild(item.element);\r\n                            counter++;\r\n                        }\r\n                    }\r\n                    // Group itens\r\n                    group.appendChild(groupName);\r\n                    group.appendChild(groupContent);\r\n                    // Keep group DOM\r\n                    obj.groups.push(group);\r\n                    // Only add to the screen if children on the group\r\n                    if (groupContent.children.length > 0) {\r\n                        // Add DOM to the content\r\n                        content.appendChild(group);\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (items.length) {\r\n                for (var i = 0; i < items.length; i++) {\r\n                    var item = obj.createItem(data[items[i]]);\r\n                    if (obj.options.lazyLoading == false || counter < 200) {\r\n                        content.appendChild(item.element);\r\n                        counter++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    obj.setData = function(data) {\r\n        // Prepare data\r\n        if (data.length) {\r\n            for (var i = 0; i < data.length; i++) {\r\n                // Compatibility\r\n                if (typeof(data[i]) != 'object') {\r\n                    // Correct format\r\n                    if (! obj.options.format) {\r\n                        data[i] = {\r\n                            value: data[i],\r\n                            text: data[i]\r\n                        }\r\n                    } else {\r\n                        data[i] = {\r\n                            id: data[i],\r\n                            name: data[i]\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Reset current value\r\n            resetValue();\r\n\r\n            // Make sure the content container is blank\r\n            content.innerHTML = '';\r\n\r\n            // Reset\r\n            obj.header.value = '';\r\n\r\n            // Reset items and values\r\n            obj.items = [];\r\n\r\n            // Append data\r\n            obj.appendData(data);\r\n\r\n            // Update data\r\n            obj.options.data = data;\r\n        }\r\n    }\r\n\r\n    obj.getData = function() {\r\n        return obj.options.data;\r\n    }\r\n\r\n    /**\r\n     * Get position of the item\r\n     */\r\n    obj.getPosition = function(val) {\r\n        for (var i = 0; i < obj.items.length; i++) {\r\n            if (Value(i) == val) {\r\n                return i;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Get dropdown current text\r\n     */\r\n    obj.getText = function(asArray) {\r\n        // Get value\r\n        var v = getText();\r\n        // Return value\r\n        if (asArray) {\r\n            return v;\r\n        } else {\r\n            return v.join('; ');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get dropdown current value\r\n     */\r\n    obj.getValue = function(asArray) {\r\n        // Get value\r\n        var v = getValue();\r\n        // Return value\r\n        if (asArray) {\r\n            return v;\r\n        } else {\r\n            return v.join(';');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Change event\r\n     */\r\n    var change = function(oldValue) {\r\n        // Events\r\n        if (typeof(obj.options.onchange) == 'function') {\r\n            obj.options.onchange(el, obj, oldValue, obj.options.value);\r\n        }\r\n\r\n        // Lemonade JS\r\n        if (el.value != obj.options.value) {\r\n            el.value = obj.options.value;\r\n            if (typeof(el.onchange) == 'function') {\r\n                el.onchange({\r\n                    type: 'change',\r\n                    target: el,\r\n                    value: el.value\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set value\r\n     */\r\n    obj.setValue = function(newValue) {\r\n        // Current value\r\n        var oldValue = obj.getValue();\r\n        // New value\r\n        if (Array.isArray(newValue)) {\r\n            newValue = newValue.join(';')\r\n        }\r\n\r\n        if (oldValue !== newValue) {\r\n            // Set value\r\n            applyValue(newValue);\r\n\r\n            // Change\r\n            change(oldValue);\r\n        }\r\n    }\r\n\r\n    obj.resetSelected = function() {\r\n        obj.setValue(null);\r\n    } \r\n\r\n    obj.selectIndex = function(index, force) {\r\n        // Make sure is a number\r\n        var index = parseInt(index);\r\n\r\n        // Only select those existing elements\r\n        if (obj.items && obj.items[index] && (force === true || obj.items[index].data.disabled !== true)) {\r\n            // Reset cursor to a new position\r\n            obj.setCursor(index, false);\r\n\r\n            // Behaviour\r\n            if (! obj.options.multiple) {\r\n                // Update value\r\n                if (obj.items[index].selected) {\r\n                    obj.setValue(null);\r\n                } else {\r\n                    obj.setValue(Value(index));\r\n                }\r\n\r\n                // Close component\r\n                obj.close();\r\n            } else {\r\n                // Old value\r\n                var oldValue = obj.options.value;\r\n\r\n                // Toggle option\r\n                if (obj.items[index].selected) {\r\n                    obj.items[index].element.classList.remove('jdropdown-selected');\r\n                    obj.items[index].selected = false;\r\n\r\n                    delete obj.value[Value(index)];\r\n                } else {\r\n                    // Select element\r\n                    obj.items[index].element.classList.add('jdropdown-selected');\r\n                    obj.items[index].selected = true;\r\n\r\n                    // Set value\r\n                    obj.value[Value(index)] = Text(index);\r\n                }\r\n\r\n                // Global value\r\n                obj.options.value = Object.keys(obj.value).join(';');\r\n\r\n                // Update labels for multiple dropdown\r\n                if (obj.options.autocomplete == false) {\r\n                    obj.header.value = getText().join('; ');\r\n                }\r\n\r\n                // Events\r\n                change(oldValue);\r\n            }\r\n        }\r\n    }\r\n\r\n    obj.selectItem = function(item) {\r\n        obj.selectIndex(item.indexValue);\r\n    }\r\n\r\n    var exists = function(k, result) {\r\n        for (var j = 0; j < result.length; j++) {\r\n            if (! obj.options.format) {\r\n                if (result[j].value == k) {\r\n                    return true;\r\n                }\r\n            } else {\r\n                if (result[j].id == k) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    obj.find = function(str) {\r\n        if (obj.search == str.trim()) {\r\n            return false;\r\n        }\r\n\r\n        // Search term\r\n        obj.search = str;\r\n\r\n        // Reset index\r\n        obj.setCursor();\r\n\r\n        // Remove nodes from all groups\r\n        if (obj.groups.length) {\r\n            for (var i = 0; i < obj.groups.length; i++) {\r\n                obj.groups[i].lastChild.innerHTML = '';\r\n            }\r\n        }\r\n\r\n        // Remove all nodes\r\n        content.innerHTML = '';\r\n\r\n        // Remove current items in the remote search\r\n        if (obj.options.remoteSearch == true) {\r\n            // Reset results\r\n            obj.results = null;\r\n            // URL\r\n            var url = obj.options.url + (obj.options.url.indexOf('?') > 0 ? '&' : '?') + 'q=' + str;\r\n            // Remote search\r\n            jSuites.ajax({\r\n                url: url,\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(result) {\r\n                    // Reset items\r\n                    obj.items = [];\r\n\r\n                    // Add the current selected items to the results in case they are not there\r\n                    var current = Object.keys(obj.value);\r\n                    if (current.length) {\r\n                        for (var i = 0; i < current.length; i++) {\r\n                            if (! exists(current[i], result)) {\r\n                                if (! obj.options.format) {\r\n                                    result.unshift({ value: current[i], text: obj.value[current[i]] });\r\n                                } else {\r\n                                    result.unshift({ id: current[i], name: obj.value[current[i]] });\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    // Append data\r\n                    obj.appendData(result);\r\n                    // Show or hide results\r\n                    if (! result.length) {\r\n                        content.style.display = 'none';\r\n                    } else {\r\n                        content.style.display = '';\r\n                    }\r\n                }\r\n            });\r\n        } else {\r\n            // Search terms\r\n            str = new RegExp(str, 'gi');\r\n\r\n            // Reset search\r\n            var results = [];\r\n\r\n            // Append options\r\n            for (var i = 0; i < obj.items.length; i++) {\r\n                // Item label\r\n                var label = Text(i);\r\n                // Item title\r\n                var title = obj.items[i].data.title || '';\r\n                // Group name\r\n                var groupName = obj.items[i].data.group || '';\r\n                // Synonym\r\n                var synonym = obj.items[i].data.synonym || '';\r\n                if (synonym) {\r\n                    synonym = synonym.join(' ');\r\n                }\r\n\r\n                if (str == null || obj.items[i].selected == true || label.match(str) || title.match(str) || groupName.match(str) || synonym.match(str)) {\r\n                    results.push(obj.items[i]);\r\n                }\r\n            }\r\n\r\n            if (! results.length) {\r\n                content.style.display = 'none';\r\n\r\n                // Results\r\n                obj.results = null;\r\n            } else {\r\n                content.style.display = '';\r\n\r\n                // Results\r\n                obj.results = results;\r\n\r\n                // Show 200 items at once\r\n                var number = results.length || 0;\r\n\r\n                // Lazyloading\r\n                if (obj.options.lazyLoading == true && number > 200) {\r\n                    number = 200;\r\n                }\r\n\r\n                for (var i = 0; i < number; i++) {\r\n                    if (obj.results[i].group) {\r\n                        if (! obj.results[i].group.parentNode) {\r\n                            content.appendChild(obj.results[i].group);\r\n                        }\r\n                        obj.results[i].group.lastChild.appendChild(obj.results[i].element);\r\n                    } else {\r\n                        content.appendChild(obj.results[i].element);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Auto focus\r\n        if (obj.options.autofocus == true) {\r\n            obj.first();\r\n        }\r\n    }\r\n\r\n    obj.open = function() {\r\n        // Focus\r\n        if (! el.classList.contains('jdropdown-focus')) {\r\n            // Current dropdown\r\n            jSuites.dropdown.current = obj;\r\n\r\n            // Start tracking\r\n            jSuites.tracking(obj, true);\r\n\r\n            // Add focus\r\n            el.classList.add('jdropdown-focus');\r\n\r\n            // Animation\r\n            if (jSuites.getWindowWidth() < 800) {\r\n                if (obj.options.type == null || obj.options.type == 'picker') {\r\n                    jSuites.animation.slideBottom(container, 1);\r\n                }\r\n            }\r\n\r\n            // Filter\r\n            if (obj.options.autocomplete == true) {\r\n                obj.header.value = obj.search;\r\n                obj.header.focus();\r\n            }\r\n\r\n            // Set cursor for the first or first selected element\r\n            var k = getValue();\r\n            if (k[0]) {\r\n                var cursor = obj.getPosition(k[0]);\r\n                if (cursor !== false) {\r\n                    obj.setCursor(cursor);\r\n                }\r\n            }\r\n\r\n            // Container Size\r\n            if (! obj.options.type || obj.options.type == 'default') {\r\n                var rect = el.getBoundingClientRect();\r\n                var rectContainer = container.getBoundingClientRect();\r\n\r\n                if (obj.options.position) {\r\n                    container.style.position = 'fixed';\r\n                    if (window.innerHeight < rect.bottom + rectContainer.height) {\r\n                        container.style.top = '';\r\n                        container.style.bottom = (window.innerHeight - rect.top ) + 1 + 'px';\r\n                    } else {\r\n                        container.style.top = rect.bottom + 'px';\r\n                        container.style.bottom = '';\r\n                    }\r\n                    container.style.left = rect.left + 'px';\r\n                } else {\r\n                    if (window.innerHeight < rect.bottom + rectContainer.height) {\r\n                        container.style.top = '';\r\n                        container.style.bottom = rect.height + 1 + 'px';\r\n                    } else {\r\n                        container.style.top = '';\r\n                        container.style.bottom = '';\r\n                    }\r\n                }\r\n\r\n                container.style.minWidth = rect.width + 'px';\r\n\r\n                if (obj.options.maxWidth) {\r\n                    container.style.maxWidth = obj.options.maxWidth;\r\n                }\r\n\r\n                if (! obj.items.length && obj.options.autocomplete == true) {\r\n                    content.style.display = 'none';\r\n                } else {\r\n                    content.style.display = '';\r\n                }\r\n            }\r\n        }\r\n\r\n        // Events\r\n        if (typeof(obj.options.onopen) == 'function') {\r\n            obj.options.onopen(el);\r\n        }\r\n    }\r\n\r\n    obj.close = function(ignoreEvents) {\r\n        if (el.classList.contains('jdropdown-focus')) {\r\n            // Update labels\r\n            obj.header.value = obj.getText();\r\n            // Remove cursor\r\n            obj.setCursor();\r\n            // Events\r\n            if (! ignoreEvents && typeof(obj.options.onclose) == 'function') {\r\n                obj.options.onclose(el);\r\n            }\r\n            // Blur\r\n            if (obj.header.blur) {\r\n                obj.header.blur();\r\n            }\r\n            // Remove focus\r\n            el.classList.remove('jdropdown-focus');\r\n            // Start tracking\r\n            jSuites.tracking(obj, false);\r\n            // Current dropdown\r\n            jSuites.dropdown.current = null;\r\n        }\r\n\r\n        return obj.getValue();\r\n    }\r\n\r\n    /**\r\n     * Set cursor\r\n     */\r\n    obj.setCursor = function(index, setPosition) {\r\n        // Remove current cursor\r\n        if (obj.currentIndex != null) {\r\n            // Remove visual cursor\r\n            if (obj.items && obj.items[obj.currentIndex]) {\r\n                obj.items[obj.currentIndex].element.classList.remove('jdropdown-cursor');\r\n            }\r\n        }\r\n\r\n        if (index == undefined) {\r\n            obj.currentIndex = null;\r\n        } else {\r\n            index = parseInt(index);\r\n\r\n            // Cursor only for visible items\r\n            if (obj.items[index].element.parentNode) {\r\n                obj.items[index].element.classList.add('jdropdown-cursor');\r\n                obj.currentIndex = index;\r\n\r\n                // Update scroll to the cursor element\r\n                if (setPosition !== false && obj.items[obj.currentIndex].element) {\r\n                    var container = content.scrollTop;\r\n                    var element = obj.items[obj.currentIndex].element;\r\n                    content.scrollTop = element.offsetTop - element.scrollTop + element.clientTop - 95;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Compatibility\r\n    obj.resetCursor = obj.setCursor;\r\n    obj.updateCursor = obj.setCursor;\r\n\r\n    /**\r\n     * Reset cursor and selected items\r\n     */\r\n    obj.reset = function() {\r\n        // Reset cursor\r\n        obj.setCursor();\r\n\r\n        // Reset selected\r\n        obj.setValue(null);\r\n    }\r\n\r\n    /**\r\n     * First available item\r\n     */\r\n    obj.first = function() {\r\n        if (obj.options.lazyLoading === true) {\r\n            obj.loadFirst();\r\n        }\r\n\r\n        var items = content.querySelectorAll('.jdropdown-item');\r\n        if (items.length) {\r\n            var newIndex = items[0].indexValue;\r\n            obj.setCursor(newIndex);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Last available item \r\n     */\r\n    obj.last = function() {\r\n        if (obj.options.lazyLoading === true) {\r\n            obj.loadLast();\r\n        }\r\n\r\n        var items = content.querySelectorAll('.jdropdown-item');\r\n        if (items.length) {\r\n            var newIndex = items[items.length-1].indexValue;\r\n            obj.setCursor(newIndex);\r\n        }\r\n    }\r\n\r\n    obj.next = function(letter) {\r\n        var newIndex = null;\r\n\r\n        if (letter) {\r\n            if (letter.length == 1) {\r\n                // Current index\r\n                var current = obj.currentIndex || -1;\r\n                // Letter\r\n                letter = letter.toLowerCase();\r\n\r\n                var e = null;\r\n                var l = null;\r\n                var items = content.querySelectorAll('.jdropdown-item');\r\n                if (items.length) {\r\n                    for (var i = 0; i < items.length; i++) {\r\n                        if (items[i].indexValue > current) {\r\n                            if (e = obj.items[items[i].indexValue]) {\r\n                                if (l = e.element.innerText[0]) {\r\n                                    l = l.toLowerCase();\r\n                                    if (letter == l) {\r\n                                        newIndex = items[i].indexValue;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    obj.setCursor(newIndex);\r\n                }\r\n            }\r\n        } else {\r\n            if (obj.currentIndex == undefined || obj.currentIndex == null) {\r\n                obj.first();\r\n            } else {\r\n                var element = obj.items[obj.currentIndex].element;\r\n\r\n                var next = element.nextElementSibling;\r\n                if (next) {\r\n                    if (next.classList.contains('jdropdown-group')) {\r\n                        next = next.lastChild.firstChild;\r\n                    }\r\n                    newIndex = next.indexValue;\r\n                } else {\r\n                    if (element.parentNode.classList.contains('jdropdown-group-items')) {\r\n                        if (next = element.parentNode.parentNode.nextElementSibling) {\r\n                            if (next.classList.contains('jdropdown-group')) {\r\n                                next = next.lastChild.firstChild;\r\n                            } else if (next.classList.contains('jdropdown-item')) {\r\n                                newIndex = next.indexValue;\r\n                            } else {\r\n                                next = null;\r\n                            }\r\n                        }\r\n\r\n                        if (next) {\r\n                            newIndex = next.indexValue;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (newIndex !== null) {\r\n                    obj.setCursor(newIndex);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    obj.prev = function() {\r\n        var newIndex = null;\r\n\r\n        if (obj.currentIndex === null) {\r\n            obj.first();\r\n        } else {\r\n            var element = obj.items[obj.currentIndex].element;\r\n\r\n            var prev = element.previousElementSibling;\r\n            if (prev) {\r\n                if (prev.classList.contains('jdropdown-group')) {\r\n                    prev = prev.lastChild.lastChild;\r\n                }\r\n                newIndex = prev.indexValue;\r\n            } else {\r\n                if (element.parentNode.classList.contains('jdropdown-group-items')) {\r\n                    if (prev = element.parentNode.parentNode.previousElementSibling) {\r\n                        if (prev.classList.contains('jdropdown-group')) {\r\n                            prev = prev.lastChild.lastChild;\r\n                        } else if (prev.classList.contains('jdropdown-item')) {\r\n                            newIndex = prev.indexValue;\r\n                        } else {\r\n                            prev = null\r\n                        }\r\n                    }\r\n\r\n                    if (prev) {\r\n                        newIndex = prev.indexValue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (newIndex !== null) {\r\n            obj.setCursor(newIndex);\r\n        }\r\n    }\r\n\r\n    obj.loadFirst = function() {\r\n        // Search\r\n        if (obj.results) {\r\n            var results = obj.results;\r\n        } else {\r\n            var results = obj.items;\r\n        }\r\n\r\n        // Show 200 items at once\r\n        var number = results.length || 0;\r\n\r\n        // Lazyloading\r\n        if (obj.options.lazyLoading == true && number > 200) {\r\n            number = 200;\r\n        }\r\n\r\n        // Reset container\r\n        content.innerHTML = '';\r\n\r\n        // First 200 items\r\n        for (var i = 0; i < number; i++) {\r\n            if (results[i].group) {\r\n                if (! results[i].group.parentNode) {\r\n                    content.appendChild(results[i].group);\r\n                }\r\n                results[i].group.lastChild.appendChild(results[i].element);\r\n            } else {\r\n                content.appendChild(results[i].element);\r\n            }\r\n        }\r\n\r\n        // Scroll go to the begin\r\n        content.scrollTop = 0;\r\n    }\r\n\r\n    obj.loadLast = function() {\r\n        // Search\r\n        if (obj.results) {\r\n            var results = obj.results;\r\n        } else {\r\n            var results = obj.items;\r\n        }\r\n\r\n        // Show first page\r\n        var number = results.length;\r\n\r\n        // Max 200 items\r\n        if (number > 200) {\r\n            number = number - 200;\r\n\r\n            // Reset container\r\n            content.innerHTML = '';\r\n\r\n            // First 200 items\r\n            for (var i = number; i < results.length; i++) {\r\n                if (results[i].group) {\r\n                    if (! results[i].group.parentNode) {\r\n                        content.appendChild(results[i].group);\r\n                    }\r\n                    results[i].group.lastChild.appendChild(results[i].element);\r\n                } else {\r\n                    content.appendChild(results[i].element);\r\n                }\r\n            }\r\n\r\n            // Scroll go to the begin\r\n            content.scrollTop = content.scrollHeight;\r\n        }\r\n    }\r\n\r\n    obj.loadUp = function() {\r\n        var test = false;\r\n\r\n        // Search\r\n        if (obj.results) {\r\n            var results = obj.results;\r\n        } else {\r\n            var results = obj.items;\r\n        }\r\n\r\n        var items = content.querySelectorAll('.jdropdown-item');\r\n        var fistItem = items[0].indexValue;\r\n        fistItem = obj.items[fistItem];\r\n        var index = results.indexOf(fistItem) - 1;\r\n\r\n        if (index > 0) {\r\n            var number = 0;\r\n\r\n            while (index > 0 && results[index] && number < 200) {\r\n                if (results[index].group) {\r\n                    if (! results[index].group.parentNode) {\r\n                        content.insertBefore(results[index].group, content.firstChild);\r\n                    }\r\n                    results[index].group.lastChild.insertBefore(results[index].element, results[index].group.lastChild.firstChild);\r\n                } else {\r\n                    content.insertBefore(results[index].element, content.firstChild);\r\n                }\r\n\r\n                index--;\r\n                number++;\r\n            }\r\n\r\n            // New item added\r\n            test = true;\r\n        }\r\n\r\n        return test;\r\n    }\r\n\r\n    obj.loadDown = function() {\r\n        var test = false;\r\n\r\n        // Search\r\n        if (obj.results) {\r\n            var results = obj.results;\r\n        } else {\r\n            var results = obj.items;\r\n        }\r\n\r\n        var items = content.querySelectorAll('.jdropdown-item');\r\n        var lastItem = items[items.length-1].indexValue;\r\n        lastItem = obj.items[lastItem];\r\n        var index = results.indexOf(lastItem) + 1;\r\n\r\n        if (index < results.length) {\r\n            var number = 0;\r\n            while (index < results.length && results[index] && number < 200) {\r\n                if (results[index].group) {\r\n                    if (! results[index].group.parentNode) {\r\n                        content.appendChild(results[index].group);\r\n                    }\r\n                    results[index].group.lastChild.appendChild(results[index].element);\r\n                } else {\r\n                    content.appendChild(results[index].element);\r\n                }\r\n\r\n                index++;\r\n                number++;\r\n            }\r\n\r\n            // New item added\r\n            test = true;\r\n        }\r\n\r\n        return test;\r\n    }\r\n\r\n    init();\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.dropdown.keydown = function(e) {\r\n    var dropdown = null;\r\n    if (dropdown = jSuites.dropdown.current) {\r\n        if (e.which == 13 || e.which == 9) {  // enter or tab\r\n            if (dropdown.header.value && dropdown.currentIndex == null && dropdown.options.newOptions) {\r\n                // if they typed something in, but it matched nothing, and newOptions are allowed, start that flow\r\n                dropdown.add();\r\n            } else {\r\n                // Quick Select/Filter\r\n                if (dropdown.currentIndex == null && dropdown.options.autocomplete == true && dropdown.header.value != \"\") {\r\n                    dropdown.find(dropdown.header.value);\r\n                }\r\n                dropdown.selectIndex(dropdown.currentIndex);\r\n            }\r\n        } else if (e.which == 38) {  // up arrow\r\n            if (dropdown.currentIndex == null) {\r\n                dropdown.first();\r\n            } else if (dropdown.currentIndex > 0) {\r\n                dropdown.prev();\r\n            }\r\n            e.preventDefault();\r\n        } else if (e.which == 40) {  // down arrow\r\n            if (dropdown.currentIndex == null) {\r\n                dropdown.first();\r\n            } else if (dropdown.currentIndex + 1 < dropdown.items.length) {\r\n                dropdown.next();\r\n            }\r\n            e.preventDefault();\r\n        } else if (e.which == 36) {\r\n            dropdown.first();\r\n            if (! e.target.classList.contains('jdropdown-header')) {\r\n                e.preventDefault();\r\n            }\r\n        } else if (e.which == 35) {\r\n            dropdown.last();\r\n            if (! e.target.classList.contains('jdropdown-header')) {\r\n                e.preventDefault();\r\n            }\r\n        } else if (e.which == 27) {\r\n            dropdown.close();\r\n        } else if (e.which == 33) {  // page up\r\n            if (dropdown.currentIndex == null) {\r\n                dropdown.first();\r\n            } else if (dropdown.currentIndex > 0) {\r\n                for (var i = 0; i < 7; i++) {\r\n                    dropdown.prev()\r\n                }\r\n            }\r\n            e.preventDefault();\r\n        } else if (e.which == 34) {  // page down\r\n            if (dropdown.currentIndex == null) {\r\n                dropdown.first();\r\n            } else if (dropdown.currentIndex + 1 < dropdown.items.length) {\r\n                for (var i = 0; i < 7; i++) {\r\n                    dropdown.next()\r\n                }\r\n            }\r\n            e.preventDefault();\r\n        }\r\n    }\r\n}\r\n\r\njSuites.dropdown.mouseup = function(e) {\r\n    var element = jSuites.findElement(e.target, 'jdropdown');\r\n    if (element) {\r\n        var dropdown = element.dropdown;\r\n        if (e.target.classList.contains('jdropdown-header')) {\r\n            if (element.classList.contains('jdropdown-focus') && element.classList.contains('jdropdown-default')) {\r\n                var rect = element.getBoundingClientRect();\r\n\r\n                if (e.changedTouches && e.changedTouches[0]) {\r\n                    var x = e.changedTouches[0].clientX;\r\n                    var y = e.changedTouches[0].clientY;\r\n                } else {\r\n                    var x = e.clientX;\r\n                    var y = e.clientY;\r\n                }\r\n\r\n                if (rect.width - (x - rect.left) < 30) {\r\n                    if (e.target.classList.contains('jdropdown-add')) {\r\n                        dropdown.add();\r\n                    } else {\r\n                        dropdown.close();\r\n                    }\r\n                } else {\r\n                    if (dropdown.options.autocomplete == false) {\r\n                        dropdown.close();\r\n                    }\r\n                }\r\n            } else {\r\n                dropdown.open();\r\n            }\r\n        } else if (e.target.classList.contains('jdropdown-group-name')) {\r\n            var items = e.target.nextSibling.children;\r\n            if (e.target.nextSibling.style.display != 'none') {\r\n                for (var i = 0; i < items.length; i++) {\r\n                    if (items[i].style.display != 'none') {\r\n                        dropdown.selectItem(items[i]);\r\n                    }\r\n                }\r\n            }\r\n        } else if (e.target.classList.contains('jdropdown-group-arrow')) {\r\n            if (e.target.classList.contains('jdropdown-group-arrow-down')) {\r\n                e.target.classList.remove('jdropdown-group-arrow-down');\r\n                e.target.classList.add('jdropdown-group-arrow-up');\r\n                e.target.parentNode.nextSibling.style.display = 'none';\r\n            } else {\r\n                e.target.classList.remove('jdropdown-group-arrow-up');\r\n                e.target.classList.add('jdropdown-group-arrow-down');\r\n                e.target.parentNode.nextSibling.style.display = '';\r\n            }\r\n        } else if (e.target.classList.contains('jdropdown-item')) {\r\n            dropdown.selectItem(e.target);\r\n        } else if (e.target.classList.contains('jdropdown-image')) {\r\n            dropdown.selectItem(e.target.parentNode);\r\n        } else if (e.target.classList.contains('jdropdown-description')) {\r\n            dropdown.selectItem(e.target.parentNode);\r\n        } else if (e.target.classList.contains('jdropdown-title')) {\r\n            dropdown.selectItem(e.target.parentNode.parentNode);\r\n        } else if (e.target.classList.contains('jdropdown-close') || e.target.classList.contains('jdropdown-backdrop')) {\r\n            dropdown.close();\r\n        }\r\n    }\r\n}\r\n\r\njSuites.dropdown.extractFromDom = function(el, options) {\r\n    // Keep reference\r\n    var select = el;\r\n    if (! options) {\r\n        options = {};\r\n    }\r\n    // Prepare configuration\r\n    if (el.getAttribute('multiple') && (! options || options.multiple == undefined)) {\r\n        options.multiple = true;\r\n    }\r\n    if (el.getAttribute('placeholder') && (! options || options.placeholder == undefined)) {\r\n        options.placeholder = el.getAttribute('placeholder');\r\n    }\r\n    if (el.getAttribute('data-autocomplete') && (! options || options.autocomplete == undefined)) {\r\n        options.autocomplete = true;\r\n    }\r\n    if (! options || options.width == undefined) {\r\n        options.width = el.offsetWidth;\r\n    }\r\n    if (el.value && (! options || options.value == undefined)) {\r\n        options.value = el.value;\r\n    }\r\n    if (! options || options.data == undefined) {\r\n        options.data = [];\r\n        for (var j = 0; j < el.children.length; j++) {\r\n            if (el.children[j].tagName == 'OPTGROUP') {\r\n                for (var i = 0; i < el.children[j].children.length; i++) {\r\n                    options.data.push({\r\n                        value: el.children[j].children[i].value,\r\n                        text: el.children[j].children[i].innerHTML,\r\n                        group: el.children[j].getAttribute('label'),\r\n                    });\r\n                }\r\n            } else {\r\n                options.data.push({\r\n                    value: el.children[j].value,\r\n                    text: el.children[j].innerHTML,\r\n                });\r\n            }\r\n        }\r\n    }\r\n    if (! options || options.onchange == undefined) {\r\n        options.onchange = function(a,b,c,d) {\r\n            if (options.multiple == true) {\r\n                if (obj.items[b].classList.contains('jdropdown-selected')) {\r\n                    select.options[b].setAttribute('selected', 'selected');\r\n                } else {\r\n                    select.options[b].removeAttribute('selected');\r\n                }\r\n            } else {\r\n                select.value = d;\r\n            }\r\n        }\r\n    }\r\n    // Create DIV\r\n    var div = document.createElement('div');\r\n    el.parentNode.insertBefore(div, el);\r\n    el.style.display = 'none';\r\n    el = div;\r\n\r\n    return { el:el, options:options };\r\n}\r\n\r\njSuites.editor = (function(el, options) {\r\n    // New instance\r\n    var obj = { type:'editor' };\r\n    obj.options = {};\r\n\r\n    // Default configuration\r\n    var defaults = {\r\n        // Initial HTML content\r\n        value: null,\r\n        // Initial snippet\r\n        snippet: null,\r\n        // Add toolbar\r\n        toolbar: null,\r\n        // Website parser is to read websites and images from cross domain\r\n        remoteParser: null,\r\n        // Placeholder\r\n        placeholder: null,\r\n        // Parse URL\r\n        parseURL: false,\r\n        filterPaste: true,\r\n        // Accept drop files\r\n        dropZone: false,\r\n        dropAsSnippet: false,\r\n        acceptImages: false,\r\n        acceptFiles: false,\r\n        maxFileSize: 5000000,\r\n        allowImageResize: true,\r\n        // Style\r\n        border: true,\r\n        padding: true,\r\n        maxHeight: null,\r\n        height: null,\r\n        focus: false,\r\n        // Events\r\n        onclick: null,\r\n        onfocus: null,\r\n        onblur: null,\r\n        onload: null,\r\n        onkeyup: null,\r\n        onkeydown: null,\r\n        onchange: null,\r\n    };\r\n\r\n    // Loop through our object\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    // Private controllers\r\n    var imageResize = 0;\r\n    var editorTimer = null;\r\n    var editorAction = null;\r\n    var files = [];\r\n\r\n    // Make sure element is empty\r\n    el.innerHTML = '';\r\n\r\n    // Keep the reference for the container\r\n    obj.el = el;\r\n\r\n    if (typeof(obj.options.onclick) == 'function') {\r\n        el.onclick = function(e) {\r\n            obj.options.onclick(el, obj, e);\r\n        }\r\n    }\r\n\r\n    // Prepare container\r\n    el.classList.add('jeditor-container');\r\n\r\n    // Padding\r\n    if (obj.options.padding == true) {\r\n        el.classList.add('jeditor-padding');\r\n    }\r\n\r\n    // Border\r\n    if (obj.options.border == false) {\r\n        el.style.border = '0px';\r\n    }\r\n\r\n    // Snippet\r\n    var snippet = document.createElement('div');\r\n    snippet.className = 'jsnippet';\r\n    snippet.setAttribute('contenteditable', false);\r\n\r\n    // Toolbar\r\n    var toolbar = document.createElement('div');\r\n    toolbar.className = 'jeditor-toolbar';\r\n\r\n    // Create editor\r\n    var editor = document.createElement('div');\r\n    editor.setAttribute('contenteditable', true);\r\n    editor.setAttribute('spellcheck', false);\r\n    editor.className = 'jeditor';\r\n\r\n    // Placeholder\r\n    if (obj.options.placeholder) {\r\n        editor.setAttribute('data-placeholder', obj.options.placeholder);\r\n    }\r\n\r\n    // Max height\r\n    if (obj.options.maxHeight || obj.options.height) {\r\n        editor.style.overflowY = 'auto';\r\n\r\n        if (obj.options.maxHeight) {\r\n            editor.style.maxHeight = obj.options.maxHeight;\r\n        }\r\n        if (obj.options.height) {\r\n            editor.style.height = obj.options.height;\r\n        }\r\n    }\r\n\r\n    // Set editor initial value\r\n    if (obj.options.value) {\r\n        var value = obj.options.value;\r\n    } else {\r\n        var value = el.innerHTML ? el.innerHTML : ''; \r\n    }\r\n\r\n    if (! value) {\r\n        var value = '';\r\n    }\r\n\r\n    /**\r\n     * Onchange event controllers\r\n     */\r\n    var change = function(e) {\r\n        if (typeof(obj.options.onchange) == 'function') { \r\n            obj.options.onchange(el, obj, e);\r\n        }\r\n\r\n        // Update value\r\n        obj.options.value = obj.getData();\r\n\r\n        // Lemonade JS\r\n        if (el.value != obj.options.value) {\r\n            el.value = obj.options.value;\r\n            if (typeof(el.onchange) == 'function') {\r\n                el.onchange({\r\n                    type: 'change',\r\n                    target: el,\r\n                    value: el.value\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Extract images from a HTML string\r\n     */\r\n    var extractImageFromHtml = function(html) {\r\n        // Create temp element\r\n        var div = document.createElement('div');\r\n        div.innerHTML = html;\r\n\r\n        // Extract images\r\n        var img = div.querySelectorAll('img');\r\n\r\n        if (img.length) {\r\n            for (var i = 0; i < img.length; i++) {\r\n                obj.addImage(img[i].src);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Insert node at caret\r\n     */\r\n    var insertNodeAtCaret = function(newNode) {\r\n        var sel, range;\r\n\r\n        if (window.getSelection) {\r\n            sel = window.getSelection();\r\n            if (sel.rangeCount) {\r\n                range = sel.getRangeAt(0);\r\n                var selectedText = range.toString();\r\n                range.deleteContents();\r\n                range.insertNode(newNode); \r\n                // move the cursor after element\r\n                range.setStartAfter(newNode);\r\n                range.setEndAfter(newNode); \r\n                sel.removeAllRanges();\r\n                sel.addRange(range);\r\n            }\r\n        }\r\n    }\r\n\r\n    var updateTotalImages = function() {\r\n        var o = null;\r\n        if (o = snippet.children[0]) {\r\n            // Make sure is a grid\r\n            if (! o.classList.contains('jslider-grid')) {\r\n                o.classList.add('jslider-grid');\r\n            }\r\n            // Quantify of images\r\n            var number = o.children.length;\r\n            // Set the configuration of the grid\r\n            o.setAttribute('data-number', number > 4 ? 4 : number);\r\n            // Total of images inside the grid\r\n            if (number > 4) {\r\n                o.setAttribute('data-total', number - 4);\r\n            } else {\r\n                o.removeAttribute('data-total');\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Append image to the snippet\r\n     */\r\n    var appendImage = function(image) {\r\n        if (! snippet.innerHTML) {\r\n            appendElement({});\r\n        }\r\n        snippet.children[0].appendChild(image);\r\n        updateTotalImages();\r\n    }\r\n\r\n    /**\r\n     * Append snippet\r\n     * @Param object data\r\n     */\r\n    var appendElement = function(data) {\r\n        // Reset snippet\r\n        snippet.innerHTML = '';\r\n\r\n        // Attributes\r\n        var a = [ 'image', 'title', 'description', 'host', 'url' ];\r\n\r\n        for (var i = 0; i < a.length; i++) {\r\n            var div = document.createElement('div');\r\n            div.className = 'jsnippet-' + a[i];\r\n            div.setAttribute('data-k', a[i]);\r\n            snippet.appendChild(div);\r\n            if (data[a[i]]) {\r\n                if (a[i] == 'image') {\r\n                    if (! Array.isArray(data.image)) {\r\n                        data.image = [ data.image ];\r\n                    }\r\n                    for (var j = 0; j < data.image.length; j++) {\r\n                        var img = document.createElement('img');\r\n                        img.src = data.image[j];\r\n                        div.appendChild(img);\r\n                    }\r\n                } else {\r\n                    div.innerHTML = data[a[i]];\r\n                }\r\n            }\r\n        }\r\n\r\n        editor.appendChild(document.createElement('br'));\r\n        editor.appendChild(snippet);\r\n    }\r\n\r\n    var verifyEditor = function() {\r\n        clearTimeout(editorTimer);\r\n        editorTimer = setTimeout(function() {\r\n            var snippet = editor.querySelector('.jsnippet');\r\n            if (! snippet) {\r\n                var html = editor.innerHTML.replace(/\\n/g, ' ');\r\n                var container = document.createElement('div');\r\n                container.innerHTML = html;\r\n                var text = container.innerText; \r\n                var url = jSuites.editor.detectUrl(text);\r\n\r\n                if (url) {\r\n                    if (url[0].substr(-3) == 'jpg' || url[0].substr(-3) == 'png' || url[0].substr(-3) == 'gif') {\r\n                         obj.addImage(url[0], true);\r\n                    } else {\r\n                        var id = jSuites.editor.youtubeParser(url[0]);\r\n                        obj.parseWebsite(url[0], id);\r\n                    }\r\n                }\r\n            }\r\n        }, 1000);\r\n    }\r\n\r\n    obj.parseContent = function() {\r\n        verifyEditor();\r\n    }\r\n\r\n    obj.parseWebsite = function(url, youtubeId) {\r\n        if (! obj.options.remoteParser) {\r\n            console.log('The remoteParser is not defined');\r\n        } else {\r\n            // Youtube definitions\r\n            if (youtubeId) {\r\n                var url = 'https://www.youtube.com/watch?v=' + youtubeId;\r\n            }\r\n\r\n            var p = {\r\n                title: '',\r\n                description: '',\r\n                image: '',\r\n                host: url.split('/')[2],\r\n                url: url,\r\n            }\r\n\r\n            jSuites.ajax({\r\n                url: obj.options.remoteParser + encodeURI(url.trim()),\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(result) {\r\n                    // Get title\r\n                    if (result.title) {\r\n                        p.title = result.title;\r\n                    }\r\n                    // Description\r\n                    if (result.description) {\r\n                        p.description = result.description;\r\n                    }\r\n                    // Host\r\n                    if (result.host) {\r\n                        p.host = result.host;\r\n                    }\r\n                    // Url\r\n                    if (result.url) {\r\n                        p.url = result.url;\r\n                    }\r\n                    // Append snippet\r\n                    appendElement(p);\r\n                    // Add image\r\n                    if (result.image) {\r\n                        obj.addImage(result.image, true);\r\n                    } else if (result['og:image']) {\r\n                        obj.addImage(result['og:image'], true);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set editor value\r\n     */\r\n    obj.setData = function(html) {\r\n        editor.innerHTML = html;\r\n\r\n        if (obj.options.focus) {\r\n            jSuites.editor.setCursor(editor, true);\r\n        }\r\n\r\n        // Reset files container\r\n        files = [];\r\n    }\r\n\r\n    obj.getFiles = function() {\r\n        var f = editor.querySelectorAll('.jfile');\r\n        var d = [];\r\n        for (var i = 0; i < f.length; i++) {\r\n            if (files[f[i].src]) {\r\n                d.push(files[f[i].src]);\r\n            }\r\n        }\r\n        return d;\r\n    }\r\n\r\n    obj.getText = function() {\r\n        return editor.innerText;\r\n    }\r\n\r\n    /**\r\n     * Get editor data\r\n     */\r\n    obj.getData = function(json) {\r\n        if (! json) {\r\n            var data = editor.innerHTML;\r\n        } else {\r\n            var data = {\r\n                content : '',\r\n            }\r\n\r\n            // Get snippet\r\n            if (snippet.innerHTML) {\r\n                var index = 0;\r\n                data.snippet = {};\r\n                for (var i = 0; i < snippet.children.length; i++) {\r\n                    // Get key from element\r\n                    var key = snippet.children[i].getAttribute('data-k');\r\n                    if (key) {\r\n                        if (key == 'image') {\r\n                            if (! data.snippet.image) {\r\n                                data.snippet.image = [];\r\n                            }\r\n                            // Get all images\r\n                            for (var j = 0; j < snippet.children[i].children.length; j++) {\r\n                                data.snippet.image.push(snippet.children[i].children[j].getAttribute('src'))\r\n                            }\r\n                        } else {\r\n                            data.snippet[key] = snippet.children[i].innerHTML;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Get files\r\n            var f = Object.keys(files);\r\n            if (f.length) {\r\n                data.files = [];\r\n                for (var i = 0; i < f.length; i++) {\r\n                    data.files.push(files[f[i]]);\r\n                }\r\n            }\r\n\r\n            // Get content\r\n            var text = editor.innerHTML;\r\n            text = text.replace(/<br>/g, \"\\n\");\r\n            text = text.replace(/<\\/div>/g, \"<\\/div>\\n\");\r\n            text = text.replace(/<(?:.|\\n)*?>/gm, \"\");\r\n            data.content = text.trim();\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n    // Reset\r\n    obj.reset = function() {\r\n        editor.innerHTML = '';\r\n        snippet.innerHTML = '';\r\n        files = [];\r\n    }\r\n\r\n    obj.addPdf = function(data) {\r\n        if (data.result.substr(0,4) != 'data') {\r\n            console.error('Invalid source');\r\n        } else {\r\n            var canvas = document.createElement('canvas');\r\n            canvas.width = 60;\r\n            canvas.height = 60;\r\n\r\n            var img = new Image();\r\n            var ctx = canvas.getContext('2d');\r\n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n\r\n            canvas.toBlob(function(blob) {\r\n                var newImage = document.createElement('img');\r\n                newImage.src = window.URL.createObjectURL(blob);\r\n                newImage.title = data.name;\r\n                newImage.className = 'jfile pdf';\r\n\r\n                files[newImage.src] = {\r\n                    file: newImage.src,\r\n                    extension: 'pdf',\r\n                    content: data.result,\r\n                }\r\n\r\n                insertNodeAtCaret(newImage);\r\n            });\r\n        }\r\n    }\r\n\r\n    obj.addImage = function(src, asSnippet) {\r\n        if (! src) {\r\n            src = '';\r\n        }\r\n\r\n        if (src.substr(0,4) != 'data' && ! obj.options.remoteParser) {\r\n            console.error('remoteParser not defined in your initialization');\r\n        } else {\r\n            // This is to process cross domain images\r\n            if (src.substr(0,4) == 'data') {\r\n                var extension = src.split(';')\r\n                extension = extension[0].split('/');\r\n                extension = extension[1];\r\n            } else {\r\n                var extension = src.substr(src.lastIndexOf('.') + 1);\r\n                // Work for cross browsers\r\n                src = obj.options.remoteParser + src;\r\n            }\r\n\r\n            var img = new Image();\r\n\r\n            img.onload = function onload() {\r\n                var canvas = document.createElement('canvas');\r\n                canvas.width = img.width;\r\n                canvas.height = img.height;\r\n\r\n                var ctx = canvas.getContext('2d');\r\n                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n\r\n                canvas.toBlob(function(blob) {\r\n                    var newImage = document.createElement('img');\r\n                    newImage.src = window.URL.createObjectURL(blob);\r\n                    newImage.classList.add('jfile');\r\n                    newImage.setAttribute('tabindex', '900');\r\n                    files[newImage.src] = {\r\n                        file: newImage.src,\r\n                        extension: extension,\r\n                        content: canvas.toDataURL(),\r\n                    }\r\n\r\n                    if (obj.options.dropAsSnippet || asSnippet) {\r\n                        appendImage(newImage);\r\n                        // Just to understand the attachment is part of a snippet\r\n                        files[newImage.src].snippet = true;\r\n                    } else {\r\n                        insertNodeAtCaret(newImage);\r\n                    }\r\n\r\n                    change();\r\n                });\r\n            };\r\n\r\n            img.src = src;\r\n        }\r\n    }\r\n\r\n    obj.addFile = function(files) {\r\n        var reader = [];\r\n\r\n        for (var i = 0; i < files.length; i++) {\r\n            if (files[i].size > obj.options.maxFileSize) {\r\n                alert('The file is too big');\r\n            } else {\r\n                // Only PDF or Images\r\n                var type = files[i].type.split('/');\r\n\r\n                if (type[0] == 'image') {\r\n                    type = 1;\r\n                } else if (type[1] == 'pdf') {\r\n                    type = 2;\r\n                } else {\r\n                    type = 0;\r\n                }\r\n\r\n                if (type) {\r\n                    // Create file\r\n                    reader[i] = new FileReader();\r\n                    reader[i].index = i;\r\n                    reader[i].type = type;\r\n                    reader[i].name = files[i].name;\r\n                    reader[i].date = files[i].lastModified;\r\n                    reader[i].size = files[i].size;\r\n                    reader[i].addEventListener(\"load\", function (data) {\r\n                        // Get result\r\n                        if (data.target.type == 2) {\r\n                            if (obj.options.acceptFiles == true) {\r\n                                obj.addPdf(data.target);\r\n                            }\r\n                        } else {\r\n                            obj.addImage(data.target.result);\r\n                        }\r\n                    }, false);\r\n\r\n                    reader[i].readAsDataURL(files[i])\r\n                } else {\r\n                    alert('The extension is not allowed');\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Destroy\r\n    obj.destroy = function() {\r\n        editor.removeEventListener('mouseup', editorMouseUp);\r\n        editor.removeEventListener('mousedown', editorMouseDown);\r\n        editor.removeEventListener('mousemove', editorMouseMove);\r\n        editor.removeEventListener('keyup', editorKeyUp);\r\n        editor.removeEventListener('keydown', editorKeyDown);\r\n        editor.removeEventListener('dragstart', editorDragStart);\r\n        editor.removeEventListener('dragenter', editorDragEnter);\r\n        editor.removeEventListener('dragover', editorDragOver);\r\n        editor.removeEventListener('drop', editorDrop);\r\n        editor.removeEventListener('paste', editorPaste);\r\n\r\n        if (typeof(obj.options.onblur) == 'function') {\r\n            editor.removeEventListener('blur', editorBlur);\r\n        }\r\n        if (typeof(obj.options.onfocus) == 'function') {\r\n            editor.removeEventListener('focus', editorFocus);\r\n        }\r\n\r\n        el.editor = null;\r\n        el.classList.remove('jeditor-container');\r\n\r\n        toolbar.remove();\r\n        snippet.remove();\r\n        editor.remove();\r\n    }\r\n\r\n    var isLetter = function (str) {\r\n        var regex = /([\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]+)/g;\r\n        return str.match(regex) ? 1 : 0;\r\n    }\r\n\r\n    // Event handlers\r\n    var editorMouseUp = function(e) {\r\n        if (editorAction && editorAction.e) {\r\n            editorAction.e.classList.remove('resizing');\r\n        }\r\n\r\n        editorAction = false;\r\n    }\r\n\r\n    var editorMouseDown = function(e) {\r\n        var close = function(snippet) {\r\n            var rect = snippet.getBoundingClientRect();\r\n            if (rect.width - (e.clientX - rect.left) < 40 && e.clientY - rect.top < 40) {\r\n                snippet.innerHTML = '';\r\n                snippet.remove();\r\n            }\r\n        }\r\n\r\n        if (e.target.tagName == 'IMG') {\r\n            if (e.target.style.cursor) {\r\n                var rect = e.target.getBoundingClientRect();\r\n                editorAction = {\r\n                    e: e.target,\r\n                    x: e.clientX,\r\n                    y: e.clientY,\r\n                    w: rect.width,\r\n                    h: rect.height,\r\n                    d: e.target.style.cursor,\r\n                }\r\n\r\n                if (! e.target.width) {\r\n                    e.target.width = rect.width + 'px';\r\n                }\r\n\r\n                if (! e.target.height) {\r\n                    e.target.height = rect.height + 'px';\r\n                }\r\n\r\n                var s = window.getSelection();\r\n                if (s.rangeCount) {\r\n                    for (var i = 0; i < s.rangeCount; i++) {\r\n                        s.removeRange(s.getRangeAt(i));\r\n                    }\r\n                }\r\n\r\n                e.target.classList.add('resizing');\r\n            } else {\r\n                editorAction = true;\r\n            }\r\n        } else { \r\n            if (e.target.classList.contains('jsnippet')) {\r\n                close(e.target);\r\n            } else if (e.target.parentNode.classList.contains('jsnippet')) {\r\n                close(e.target.parentNode);\r\n            }\r\n\r\n            editorAction = true;\r\n        }\r\n    }\r\n\r\n    var editorMouseMove = function(e) {\r\n        if (e.target.tagName == 'IMG' && ! e.target.parentNode.classList.contains('jsnippet-image') && obj.options.allowImageResize == true) {\r\n            if (e.target.getAttribute('tabindex')) {\r\n                var rect = e.target.getBoundingClientRect();\r\n                if (e.clientY - rect.top < 5) {\r\n                    if (rect.width - (e.clientX - rect.left) < 5) {\r\n                        e.target.style.cursor = 'ne-resize';\r\n                    } else if (e.clientX - rect.left < 5) {\r\n                        e.target.style.cursor = 'nw-resize';\r\n                    } else {\r\n                        e.target.style.cursor = 'n-resize';\r\n                    }\r\n                } else if (rect.height - (e.clientY - rect.top) < 5) {\r\n                    if (rect.width - (e.clientX - rect.left) < 5) {\r\n                        e.target.style.cursor = 'se-resize';\r\n                    } else if (e.clientX - rect.left < 5) {\r\n                        e.target.style.cursor = 'sw-resize';\r\n                    } else {\r\n                        e.target.style.cursor = 's-resize';\r\n                    }\r\n                } else if (rect.width - (e.clientX - rect.left) < 5) {\r\n                    e.target.style.cursor = 'e-resize';\r\n                } else if (e.clientX - rect.left < 5) {\r\n                    e.target.style.cursor = 'w-resize';\r\n                } else {\r\n                    e.target.style.cursor = '';\r\n                }\r\n            }\r\n        }\r\n\r\n        // Move\r\n        if (e.which == 1 && editorAction && editorAction.d) {\r\n            if (editorAction.d == 'e-resize' || editorAction.d == 'ne-resize' ||  editorAction.d == 'se-resize') {\r\n                editorAction.e.width = (editorAction.w + (e.clientX - editorAction.x));\r\n\r\n                if (e.shiftKey) {\r\n                    var newHeight = (e.clientX - editorAction.x) * (editorAction.h / editorAction.w);\r\n                    editorAction.e.height = editorAction.h + newHeight;\r\n                } else {\r\n                    var newHeight =  null;\r\n                }\r\n            }\r\n\r\n            if (! newHeight) {\r\n                if (editorAction.d == 's-resize' || editorAction.d == 'se-resize' || editorAction.d == 'sw-resize') {\r\n                    if (! e.shiftKey) {\r\n                        editorAction.e.height = editorAction.h + (e.clientY - editorAction.y);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    var editorKeyUp = function(e) {\r\n        if (! editor.innerHTML) {\r\n            editor.innerHTML = '<div><br></div>';\r\n        }\r\n\r\n        if (typeof(obj.options.onkeyup) == 'function') { \r\n            obj.options.onkeyup(el, obj, e);\r\n        }\r\n    }\r\n\r\n\r\n    var editorKeyDown = function(e) {\r\n        // Check for URL\r\n        if (obj.options.parseURL == true) {\r\n            verifyEditor();\r\n        }\r\n\r\n        if (typeof(obj.options.onkeydown) == 'function') { \r\n            obj.options.onkeydown(el, obj, e);\r\n        }\r\n\r\n        if (e.key == 'Delete') {\r\n            if (e.target.tagName == 'IMG' && e.target.parentNode.classList.contains('jsnippet-image')) {\r\n                e.target.remove();\r\n                updateTotalImages();\r\n            }\r\n        }\r\n    }\r\n\r\n    // Elements to be removed\r\n    var remove = [HTMLUnknownElement,HTMLAudioElement,HTMLEmbedElement,HTMLIFrameElement,HTMLTextAreaElement,HTMLInputElement,HTMLScriptElement];\r\n\r\n    // Valid properties\r\n    var validProperty = ['width', 'height', 'align', 'border', 'src', 'tabindex'];\r\n\r\n    // Valid CSS attributes\r\n    var validStyle = ['color', 'font-weight', 'font-size', 'background', 'background-color', 'margin'];\r\n\r\n    var parse = function(element) {\r\n       // Remove attributes\r\n       if (element.attributes && element.attributes.length) {\r\n           var image = null;\r\n           var style = null;\r\n           // Process style attribute\r\n           var elementStyle = element.getAttribute('style');\r\n           if (elementStyle) {\r\n               style = [];\r\n               var t = elementStyle.split(';');\r\n               for (var j = 0; j < t.length; j++) {\r\n                   var v = t[j].trim().split(':');\r\n                   if (validStyle.indexOf(v[0].trim()) >= 0) {\r\n                       var k = v.shift();\r\n                       var v = v.join(':');\r\n                       style.push(k + ':' + v);\r\n                   }\r\n               }\r\n           }\r\n           // Process image\r\n           if (element.tagName.toUpperCase() == 'IMG') {\r\n               if (! obj.options.acceptImages || ! element.src) {\r\n                   element.parentNode.removeChild(element);\r\n               } else {\r\n                   // Check if is data\r\n                   element.setAttribute('tabindex', '900');\r\n                   // Check attributes for persistance\r\n                   obj.addImage(element.src);\r\n               }\r\n           }\r\n           // Remove attributes\r\n           var attr = [];\r\n           var numAttributes = element.attributes.length - 1;\r\n           if (numAttributes > 0) {\r\n               for (var i = numAttributes; i >= 0 ; i--) {\r\n                   attr.push(element.attributes[i].name);\r\n               }\r\n               attr.forEach(function(v) {\r\n                   if (validProperty.indexOf(v) == -1) {\r\n                       element.removeAttribute(v);\r\n                   }\r\n               });\r\n           }\r\n           element.style = '';\r\n           // Add valid style\r\n           if (style && style.length) {\r\n               element.setAttribute('style', style.join(';'));\r\n           }\r\n       }\r\n       // Parse children\r\n       if (element.children.length) {\r\n           for (var i = 0; i < element.children.length; i++) {\r\n               parse(element.children[i]);\r\n           }\r\n       }\r\n\r\n       if (remove.indexOf(element.constructor) >= 0) {\r\n           element.remove();\r\n       }\r\n    }\r\n\r\n    var filter = function(data) {\r\n        if (data) {\r\n            data = data.replace(new RegExp('\x3c!--(.*?)--\x3e', 'gsi'), '');\r\n        }\r\n        var parser = new DOMParser();\r\n        var d = parser.parseFromString(data, \"text/html\");\r\n        parse(d);\r\n        var span = document.createElement('span');\r\n        span.innerHTML = d.firstChild.innerHTML;\r\n        return span;\r\n    } \r\n\r\n    var editorPaste = function(e) {\r\n        if (obj.options.filterPaste == true) {\r\n            if (e.clipboardData || e.originalEvent.clipboardData) {\r\n                var html = (e.originalEvent || e).clipboardData.getData('text/html');\r\n                var text = (e.originalEvent || e).clipboardData.getData('text/plain');\r\n                var file = (e.originalEvent || e).clipboardData.files\r\n            } else if (window.clipboardData) {\r\n                var html = window.clipboardData.getData('Html');\r\n                var text = window.clipboardData.getData('Text');\r\n                var file = window.clipboardData.files\r\n            }\r\n\r\n            if (file.length) {\r\n                // Paste a image from the clipboard\r\n                obj.addFile(file);\r\n            } else {\r\n                if (! html) {\r\n                    html = text.split('\\r\\n');\r\n                    if (! e.target.innerText) {\r\n                        html.map(function(v) {\r\n                            var d = document.createElement('div');\r\n                            d.innerText = v;\r\n                            editor.appendChild(d);\r\n                        });\r\n                    } else {\r\n                        html = html.map(function(v) {\r\n                            return '<div>' + v + '</div>';\r\n                        });\r\n                        document.execCommand('insertHtml', false, html.join(''));\r\n                    }\r\n                } else {\r\n                    var d = filter(html);\r\n                    // Paste to the editor\r\n                    //insertNodeAtCaret(d);\r\n                    document.execCommand('insertHtml', false, d.innerHTML);\r\n                }\r\n            }\r\n\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    var editorDragStart = function(e) {\r\n        if (editorAction && editorAction.e) {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    var editorDragEnter = function(e) {\r\n        if (editorAction || obj.options.dropZone == false) {\r\n            // Do nothing\r\n        } else {\r\n            el.classList.add('jeditor-dragging');\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    var editorDragOver = function(e) {\r\n        if (editorAction || obj.options.dropZone == false) {\r\n            // Do nothing\r\n        } else {\r\n            if (editorTimer) {\r\n                clearTimeout(editorTimer);\r\n            }\r\n\r\n            editorTimer = setTimeout(function() {\r\n                el.classList.remove('jeditor-dragging');\r\n            }, 100);\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    var editorDrop = function(e) {\r\n        if (editorAction || obj.options.dropZone == false) {\r\n            // Do nothing\r\n        } else {\r\n            // Position caret on the drop\r\n            var range = null;\r\n            if (document.caretRangeFromPoint) {\r\n                range=document.caretRangeFromPoint(e.clientX, e.clientY);\r\n            } else if (e.rangeParent) {\r\n                range=document.createRange();\r\n                range.setStart(e.rangeParent,e.rangeOffset);\r\n            }\r\n            var sel = window.getSelection();\r\n            sel.removeAllRanges();\r\n            sel.addRange(range);\r\n            sel.anchorNode.parentNode.focus();\r\n\r\n            var html = (e.originalEvent || e).dataTransfer.getData('text/html');\r\n            var text = (e.originalEvent || e).dataTransfer.getData('text/plain');\r\n            var file = (e.originalEvent || e).dataTransfer.files;\r\n    \r\n            if (file.length) {\r\n                obj.addFile(file);\r\n            } else if (text) {\r\n                extractImageFromHtml(html);\r\n            }\r\n\r\n            el.classList.remove('jeditor-dragging');\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    var editorBlur = function(e) {\r\n        // Blur\r\n        if (typeof(obj.options.onblur) == 'function') {\r\n            obj.options.onblur(el, obj, e);\r\n        }\r\n\r\n        change(e);\r\n    }\r\n\r\n    var editorFocus = function(e) {\r\n        // Focus\r\n        if (typeof(obj.options.onfocus) == 'function') {\r\n            obj.options.onfocus(el, obj, e);\r\n        }\r\n    }\r\n\r\n    editor.addEventListener('mouseup', editorMouseUp);\r\n    editor.addEventListener('mousedown', editorMouseDown);\r\n    editor.addEventListener('mousemove', editorMouseMove);\r\n    editor.addEventListener('keyup', editorKeyUp);\r\n    editor.addEventListener('keydown', editorKeyDown);\r\n    editor.addEventListener('dragstart', editorDragStart);\r\n    editor.addEventListener('dragenter', editorDragEnter);\r\n    editor.addEventListener('dragover', editorDragOver);\r\n    editor.addEventListener('drop', editorDrop);\r\n    editor.addEventListener('paste', editorPaste);\r\n    editor.addEventListener('focus', editorFocus);\r\n    editor.addEventListener('blur', editorBlur);\r\n\r\n    // Onload\r\n    if (typeof(obj.options.onload) == 'function') {\r\n        obj.options.onload(el, obj, editor);\r\n    }\r\n\r\n    // Set value to the editor\r\n    editor.innerHTML = value;\r\n\r\n    // Append editor to the containre\r\n    el.appendChild(editor);\r\n\r\n    // Snippet\r\n    if (obj.options.snippet) {\r\n        appendElement(obj.options.snippet);\r\n    }\r\n\r\n    // Default toolbar\r\n    if (obj.options.toolbar == null) {\r\n        obj.options.toolbar = jSuites.editor.getDefaultToolbar();\r\n    }\r\n\r\n    // Add toolbar\r\n    if (obj.options.toolbar) {\r\n        // Append to the DOM\r\n        el.appendChild(toolbar);\r\n        // Create toolbar\r\n        jSuites.toolbar(toolbar, {\r\n            container: true,\r\n            responsive: true,\r\n            items: obj.options.toolbar\r\n        });\r\n    }\r\n\r\n    // Focus to the editor\r\n    if (obj.options.focus) {\r\n        jSuites.editor.setCursor(editor, obj.options.focus == 'initial' ? true : false);\r\n    }\r\n\r\n    // Change method\r\n    el.change = obj.setData;\r\n\r\n    // Global generic value handler\r\n    el.val = function(val) {\r\n        if (val === undefined) {\r\n            // Data type\r\n            var o = el.getAttribute('data-html') === 'true' ? false : true;\r\n            return obj.getData(o);\r\n        } else {\r\n            obj.setData(val);\r\n        }\r\n    }\r\n\r\n    el.editor = obj;\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.editor.setCursor = function(element, first) {\r\n    element.focus();\r\n    document.execCommand('selectAll');\r\n    var sel = window.getSelection();\r\n    var range = sel.getRangeAt(0);\r\n    if (first == true) {\r\n        var node = range.startContainer;\r\n        var size = 0;\r\n    } else {\r\n        var node = range.endContainer;\r\n        var size = node.length;\r\n    }\r\n    range.setStart(node, size);\r\n    range.setEnd(node, size);\r\n    sel.removeAllRanges();\r\n    sel.addRange(range);\r\n}\r\n\r\njSuites.editor.getDomain = function(url) {\r\n    return url.replace('http://','').replace('https://','').replace('www.','').split(/[/?#]/)[0].split(/:/g)[0];\r\n}\r\n\r\njSuites.editor.detectUrl = function(text) {\r\n    var expression = /(((https?:\\/\\/)|(www\\.))[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|]+)/ig;\r\n    var links = text.match(expression);\r\n\r\n    if (links) {\r\n        if (links[0].substr(0,3) == 'www') {\r\n            links[0] = 'http://' + links[0];\r\n        }\r\n    }\r\n\r\n    return links;\r\n}\r\n\r\njSuites.editor.youtubeParser = function(url) {\r\n    var regExp = /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#\\&\\?]*).*/;\r\n    var match = url.match(regExp);\r\n\r\n    return (match && match[7].length == 11) ? match[7] : false;\r\n}\r\n\r\njSuites.editor.getDefaultToolbar = function() { \r\n    return [\r\n        {\r\n            content: 'undo',\r\n            onclick: function() {\r\n                document.execCommand('undo');\r\n            }\r\n        },\r\n        {\r\n            content: 'redo',\r\n            onclick: function() {\r\n                document.execCommand('redo');\r\n            }\r\n        },\r\n        {\r\n            type:'divisor'\r\n        },\r\n        {\r\n            content: 'format_bold',\r\n            onclick: function(a,b,c) {\r\n                document.execCommand('bold');\r\n\r\n                if (document.queryCommandState(\"bold\")) {\r\n                    c.classList.add('selected');\r\n                } else {\r\n                    c.classList.remove('selected');\r\n                }\r\n            }\r\n        },\r\n        {\r\n            content: 'format_italic',\r\n            onclick: function(a,b,c) {\r\n                document.execCommand('italic');\r\n\r\n                if (document.queryCommandState(\"italic\")) {\r\n                    c.classList.add('selected');\r\n                } else {\r\n                    c.classList.remove('selected');\r\n                }\r\n            }\r\n        },\r\n        {\r\n            content: 'format_underline',\r\n            onclick: function(a,b,c) {\r\n                document.execCommand('underline');\r\n\r\n                if (document.queryCommandState(\"underline\")) {\r\n                    c.classList.add('selected');\r\n                } else {\r\n                    c.classList.remove('selected');\r\n                }\r\n            }\r\n        },\r\n        {\r\n            type:'divisor'\r\n        },\r\n        {\r\n            content: 'format_list_bulleted',\r\n            onclick: function(a,b,c) {\r\n                document.execCommand('insertUnorderedList');\r\n\r\n                if (document.queryCommandState(\"insertUnorderedList\")) {\r\n                    c.classList.add('selected');\r\n                } else {\r\n                    c.classList.remove('selected');\r\n                }\r\n            }\r\n        },\r\n        {\r\n            content: 'format_list_numbered',\r\n            onclick: function(a,b,c) {\r\n                document.execCommand('insertOrderedList');\r\n\r\n                if (document.queryCommandState(\"insertOrderedList\")) {\r\n                    c.classList.add('selected');\r\n                } else {\r\n                    c.classList.remove('selected');\r\n                }\r\n            }\r\n        },\r\n        {\r\n            content: 'format_indent_increase',\r\n            onclick: function(a,b,c) {\r\n                document.execCommand('indent', true, null);\r\n\r\n                if (document.queryCommandState(\"indent\")) {\r\n                    c.classList.add('selected');\r\n                } else {\r\n                    c.classList.remove('selected');\r\n                }\r\n            }\r\n        },\r\n        {\r\n            content: 'format_indent_decrease',\r\n            onclick: function() {\r\n                document.execCommand('outdent');\r\n\r\n                if (document.queryCommandState(\"outdent\")) {\r\n                    this.classList.add('selected');\r\n                } else {\r\n                    this.classList.remove('selected');\r\n                }\r\n            }\r\n        }/*,\r\n        {\r\n            icon: ['format_align_left', 'format_align_right', 'format_align_center'],\r\n            onclick: function() {\r\n                document.execCommand('justifyCenter');\r\n\r\n                if (document.queryCommandState(\"justifyCenter\")) {\r\n                    this.classList.add('selected');\r\n                } else {\r\n                    this.classList.remove('selected');\r\n                }\r\n            }\r\n        }\r\n        {\r\n            type:'select',\r\n            items: ['Verdana','Arial','Courier New'],\r\n            onchange: function() {\r\n            }\r\n        },\r\n        {\r\n            type:'select',\r\n            items: ['10px','12px','14px','16px','18px','20px','22px'],\r\n            onchange: function() {\r\n            }\r\n        },\r\n        {\r\n            icon:'format_align_left',\r\n            onclick: function() {\r\n                document.execCommand('JustifyLeft');\r\n\r\n                if (document.queryCommandState(\"JustifyLeft\")) {\r\n                    this.classList.add('selected');\r\n                } else {\r\n                    this.classList.remove('selected');\r\n                }\r\n            }\r\n        },\r\n        {\r\n            icon:'format_align_center',\r\n            onclick: function() {\r\n                document.execCommand('justifyCenter');\r\n\r\n                if (document.queryCommandState(\"justifyCenter\")) {\r\n                    this.classList.add('selected');\r\n                } else {\r\n                    this.classList.remove('selected');\r\n                }\r\n            }\r\n        },\r\n        {\r\n            icon:'format_align_right',\r\n            onclick: function() {\r\n                document.execCommand('justifyRight');\r\n\r\n                if (document.queryCommandState(\"justifyRight\")) {\r\n                    this.classList.add('selected');\r\n                } else {\r\n                    this.classList.remove('selected');\r\n                }\r\n            }\r\n        },\r\n        {\r\n            icon:'format_align_justify',\r\n            onclick: function() {\r\n                document.execCommand('justifyFull');\r\n\r\n                if (document.queryCommandState(\"justifyFull\")) {\r\n                    this.classList.add('selected');\r\n                } else {\r\n                    this.classList.remove('selected');\r\n                }\r\n            }\r\n        },\r\n        {\r\n            icon:'format_list_bulleted',\r\n            onclick: function() {\r\n                document.execCommand('insertUnorderedList');\r\n\r\n                if (document.queryCommandState(\"insertUnorderedList\")) {\r\n                    this.classList.add('selected');\r\n                } else {\r\n                    this.classList.remove('selected');\r\n                }\r\n            }\r\n        }*/\r\n    ];\r\n}\r\n\r\n\r\njSuites.form = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    // Default configuration\r\n    var defaults = {\r\n        url: null,\r\n        message: 'Are you sure? There are unsaved information in your form',\r\n        ignore: false,\r\n        currentHash: null,\r\n        submitButton:null,\r\n        validations: null,\r\n        onbeforeload: null,\r\n        onload: null,\r\n        onbeforesave: null,\r\n        onsave: null,\r\n        onbeforeremove: null,\r\n        onremove: null,\r\n        onerror: function(el, message) {\r\n            jSuites.alert(message);\r\n        }\r\n    };\r\n\r\n    // Loop through our object\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    // Validations\r\n    if (! obj.options.validations) {\r\n        obj.options.validations = {};\r\n    }\r\n\r\n    // Submit Button\r\n    if (! obj.options.submitButton) {\r\n        obj.options.submitButton = el.querySelector('input[type=submit]');\r\n    }\r\n\r\n    if (obj.options.submitButton && obj.options.url) {\r\n        obj.options.submitButton.onclick = function() {\r\n            obj.save();\r\n        }\r\n    }\r\n\r\n    if (! obj.options.validations.email) {\r\n        obj.options.validations.email = jSuites.validations.email;\r\n    }\r\n\r\n    if (! obj.options.validations.length) {\r\n        obj.options.validations.length = jSuites.validations.length;\r\n    }\r\n\r\n    if (! obj.options.validations.required) {\r\n        obj.options.validations.required = jSuites.validations.required;\r\n    }\r\n\r\n    obj.setUrl = function(url) {\r\n        obj.options.url = url;\r\n    }\r\n\r\n    obj.load = function() {\r\n        jSuites.ajax({\r\n            url: obj.options.url,\r\n            method: 'GET',\r\n            dataType: 'json',\r\n            queue: true,\r\n            success: function(data) {\r\n                // Overwrite values from the backend\r\n                if (typeof(obj.options.onbeforeload) == 'function') {\r\n                    var ret = obj.options.onbeforeload(el, data);\r\n                    if (ret) {\r\n                        data = ret;\r\n                    }\r\n                }\r\n                // Apply values to the form\r\n                jSuites.form.setElements(el, data);\r\n                // Onload methods\r\n                if (typeof(obj.options.onload) == 'function') {\r\n                    obj.options.onload(el, data);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    obj.save = function() {\r\n        var test = obj.validate();\r\n\r\n        if (test) {\r\n            obj.options.onerror(el, test);\r\n        } else {\r\n            var data = jSuites.form.getElements(el, true);\r\n\r\n            if (typeof(obj.options.onbeforesave) == 'function') {\r\n                var data = obj.options.onbeforesave(el, data);\r\n\r\n                if (data === false) {\r\n                    return; \r\n                }\r\n            }\r\n\r\n            jSuites.ajax({\r\n                url: obj.options.url,\r\n                method: 'POST',\r\n                dataType: 'json',\r\n                data: data,\r\n                success: function(result) {\r\n                    if (typeof(obj.options.onsave) == 'function') {\r\n                        obj.options.onsave(el, data, result);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    obj.remove = function() {\r\n        if (typeof(obj.options.onbeforeremove) == 'function') {\r\n            var ret = obj.options.onbeforeremove(el, obj);\r\n            if (ret === false) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        jSuites.ajax({\r\n            url: obj.options.url,\r\n            method: 'DELETE',\r\n            dataType: 'json',\r\n            success: function(result) {\r\n                if (typeof(obj.options.onremove) == 'function') {\r\n                    obj.options.onremove(el, obj, result);\r\n                }\r\n\r\n                obj.reset();\r\n            }\r\n        });\r\n    }\r\n\r\n    var addError = function(element) {\r\n        // Add error in the element\r\n        element.classList.add('error');\r\n        // Submit button\r\n        if (obj.options.submitButton) {\r\n            obj.options.submitButton.setAttribute('disabled', true);\r\n        }\r\n        // Return error message\r\n        var error = element.getAttribute('data-error') || 'There is an error in the form';\r\n        element.setAttribute('title', error);\r\n        return error;\r\n    }\r\n\r\n    var delError = function(element) {\r\n        var error = false;\r\n        // Remove class from this element\r\n        element.classList.remove('error');\r\n        element.removeAttribute('title');\r\n        // Get elements in the form\r\n        var elements = el.querySelectorAll(\"input, select, textarea, div[name]\");\r\n        // Run all elements \r\n        for (var i = 0; i < elements.length; i++) {\r\n            if (elements[i].getAttribute('data-validation')) {\r\n                if (elements[i].classList.contains('error')) {\r\n                    error = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (obj.options.submitButton) {\r\n            if (error) {\r\n                obj.options.submitButton.setAttribute('disabled', true);\r\n            } else {\r\n                obj.options.submitButton.removeAttribute('disabled');\r\n            }\r\n        }\r\n    }\r\n\r\n    obj.validateElement = function(element) {\r\n        // Test results\r\n        var test = false;\r\n        // Value\r\n        var value = jSuites.form.getValue(element);\r\n        // Validation\r\n        var validation = element.getAttribute('data-validation');\r\n        // Parse\r\n        if (typeof(obj.options.validations[validation]) == 'function' && ! obj.options.validations[validation](value, element)) {\r\n            // Not passed in the test\r\n            test = addError(element);\r\n        } else {\r\n            if (element.classList.contains('error')) {\r\n                delError(element);\r\n            }\r\n        }\r\n\r\n        return test;\r\n    }\r\n\r\n    obj.reset = function() {\r\n        // Get elements in the form\r\n        var name = null;\r\n        var elements = el.querySelectorAll(\"input, select, textarea, div[name]\");\r\n        // Run all elements \r\n        for (var i = 0; i < elements.length; i++) {\r\n            if (name = elements[i].getAttribute('name')) {\r\n                if (elements[i].type == 'checkbox' || elements[i].type == 'radio') {\r\n                    elements[i].checked = false;\r\n                } else {\r\n                    if (typeof(elements[i].val) == 'function') {\r\n                        elements[i].val('');\r\n                    } else {\r\n                        elements[i].value = '';\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Run form validation\r\n    obj.validate = function() {\r\n        var test = [];\r\n        // Get elements in the form\r\n        var elements = el.querySelectorAll(\"input, select, textarea, div[name]\");\r\n        // Run all elements \r\n        for (var i = 0; i < elements.length; i++) {\r\n            // Required\r\n            if (elements[i].getAttribute('data-validation')) {\r\n                var res = obj.validateElement(elements[i]);\r\n                if (res) {\r\n                    test.push(res);\r\n                }\r\n            }\r\n        }\r\n        if (test.length > 0) {\r\n            return test.join('<br>');\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // Check the form\r\n    obj.getError = function() {\r\n        // Validation\r\n        return obj.validation() ? true : false;\r\n    }\r\n\r\n    // Return the form hash\r\n    obj.setHash = function() {\r\n        return obj.getHash(jSuites.form.getElements(el));\r\n    }\r\n\r\n    // Get the form hash\r\n    obj.getHash = function(str) {\r\n        var hash = 0, i, chr;\r\n\r\n        if (str.length === 0) {\r\n            return hash;\r\n        } else {\r\n            for (i = 0; i < str.length; i++) {\r\n              chr = str.charCodeAt(i);\r\n              hash = ((hash << 5) - hash) + chr;\r\n              hash |= 0;\r\n            }\r\n        }\r\n\r\n        return hash;\r\n    }\r\n\r\n    // Is there any change in the form since start tracking?\r\n    obj.isChanged = function() {\r\n        var hash = obj.setHash();\r\n        return (obj.options.currentHash != hash);\r\n    }\r\n\r\n    // Restart tracking\r\n    obj.resetTracker = function() {\r\n        obj.options.currentHash = obj.setHash();\r\n        obj.options.ignore = false;\r\n    }\r\n\r\n    // Ignore flag\r\n    obj.setIgnore = function(ignoreFlag) {\r\n        obj.options.ignore = ignoreFlag ? true : false;\r\n    }\r\n\r\n    // Start tracking in one second\r\n    setTimeout(function() {\r\n        obj.options.currentHash = obj.setHash();\r\n    }, 1000);\r\n\r\n    // Validations\r\n    el.addEventListener(\"keyup\", function(e) {\r\n        if (e.target.getAttribute('data-validation')) {\r\n            obj.validateElement(e.target);\r\n        }\r\n    });\r\n\r\n    // Alert\r\n    if (! jSuites.form.hasEvents) {\r\n        window.addEventListener(\"beforeunload\", function (e) {\r\n            if (obj.isChanged() && obj.options.ignore == false) {\r\n                var confirmationMessage =  obj.options.message? obj.options.message : \"\\o/\";\r\n\r\n                if (confirmationMessage) {\r\n                    if (typeof e == 'undefined') {\r\n                        e = window.event;\r\n                    }\r\n\r\n                    if (e) {\r\n                        e.returnValue = confirmationMessage;\r\n                    }\r\n\r\n                    return confirmationMessage;\r\n                } else {\r\n                    return void(0);\r\n                }\r\n            }\r\n        });\r\n\r\n        jSuites.form.hasEvents = true;\r\n    }\r\n\r\n    el.form = obj;\r\n\r\n    return obj;\r\n});\r\n\r\n// Get value from one element\r\njSuites.form.getValue = function(element) {\r\n    var value = null;\r\n    if (element.type == 'checkbox') {\r\n        if (element.checked == true) {\r\n            value = element.value || true;\r\n        }\r\n    } else if (element.type == 'radio') {\r\n        if (element.checked == true) {\r\n            value = element.value;\r\n        }\r\n    } else if (element.tagName == 'select' && element.multiple == true) {\r\n        value = [];\r\n        var options = element.querySelectorAll(\"options[selected]\");\r\n        for (var j = 0; j < options.length; j++) {\r\n            value.push(options[j].value);\r\n        }\r\n    } else if (typeof(element.val) == 'function') {\r\n        value = element.val();\r\n    } else {\r\n        value = element.value || '';\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n// Get form elements\r\njSuites.form.getElements = function(el, asArray) {\r\n    var data = {};\r\n    var name = null;\r\n    var elements = el.querySelectorAll(\"input, select, textarea, div[name]\");\r\n\r\n    for (var i = 0; i < elements.length; i++) {\r\n        if (name = elements[i].getAttribute('name')) {\r\n            data[name] = jSuites.form.getValue(elements[i]) || '';\r\n        }\r\n    }\r\n\r\n    return asArray == true ? data : JSON.stringify(data);\r\n}\r\n\r\n//Get form elements\r\njSuites.form.setElements = function(el, data) {\r\n    var name = null;\r\n    var value = null;\r\n    var elements = el.querySelectorAll(\"input, select, textarea, div[name]\");\r\n    for (var i = 0; i < elements.length; i++) {\r\n        // Attributes\r\n        var type = elements[i].getAttribute('type');\r\n        if (name = elements[i].getAttribute('name')) {\r\n            // Transform variable names in pathname\r\n            name = name.replace(new RegExp(/\\[(.*?)\\]/ig), '.$1');\r\n            value = null;\r\n            // Seach for the data in the path\r\n            if (name.match(/\\./)) {\r\n                var tmp = jSuites.path.call(data, name) || '';\r\n                if (typeof(tmp) !== 'undefined') {\r\n                    value = tmp;\r\n                }\r\n            } else {\r\n                if (typeof(data[name]) !== 'undefined') {\r\n                    value = data[name];\r\n                }\r\n            }\r\n            // Set the values\r\n            if (value !== null) {\r\n                if (type == 'checkbox' || type == 'radio') {\r\n                    elements[i].checked = value ? true : false;\r\n                } else {\r\n                    if (typeof (elements[i].val) == 'function') {\r\n                        elements[i].val(value);\r\n                    } else {\r\n                        elements[i].value = value;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// Legacy\r\njSuites.tracker = jSuites.form;\r\n\r\njSuites.focus = function(el) {\r\n    if (el.innerText.length) {\r\n        var range = document.createRange();\r\n        var sel = window.getSelection();\r\n        var node = el.childNodes[el.childNodes.length-1];\r\n        range.setStart(node, node.length)\r\n        range.collapse(true)\r\n        sel.removeAllRanges()\r\n        sel.addRange(range)\r\n        el.scrollLeft = el.scrollWidth;\r\n    }\r\n}\r\n\r\njSuites.isNumeric = (function (num) {\r\n    return !isNaN(num) && num !== null && num !== '';\r\n});\r\n\r\njSuites.guid = function() {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n        return v.toString(16);\r\n    });\r\n}\r\n\r\njSuites.getNode = function() {\r\n    var node = document.getSelection().anchorNode;\r\n    if (node) {\r\n        return (node.nodeType == 3 ? node.parentNode : node);\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n/**\r\n * Generate hash from a string\r\n */\r\njSuites.hash = function(str) {\r\n    var hash = 0, i, chr;\r\n\r\n    if (str.length === 0) {\r\n        return hash;\r\n    } else {\r\n        for (i = 0; i < str.length; i++) {\r\n            chr = str.charCodeAt(i);\r\n            if (chr > 32) {\r\n                hash = ((hash << 5) - hash) + chr;\r\n                hash |= 0;\r\n            }\r\n        }\r\n    }\r\n    return hash;\r\n}\r\n\r\n/**\r\n * Generate a random color\r\n */\r\njSuites.randomColor = function(h) {\r\n    var lum = -0.25;\r\n    var hex = String('#' + Math.random().toString(16).slice(2, 8).toUpperCase()).replace(/[^0-9a-f]/gi, '');\r\n    if (hex.length < 6) {\r\n        hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\r\n    }\r\n    var rgb = [], c, i;\r\n    for (i = 0; i < 3; i++) {\r\n        c = parseInt(hex.substr(i * 2, 2), 16);\r\n        c = Math.round(Math.min(Math.max(0, c + (c * lum)), 255)).toString(16);\r\n        rgb.push((\"00\" + c).substr(c.length));\r\n    }\r\n\r\n    // Return hex\r\n    if (h == true) {\r\n        return '#' + jSuites.two(rgb[0].toString(16)) + jSuites.two(rgb[1].toString(16)) + jSuites.two(rgb[2].toString(16));\r\n    }\r\n\r\n    return rgb;\r\n}\r\n\r\njSuites.getWindowWidth = function() {\r\n    var w = window,\r\n    d = document,\r\n    e = d.documentElement,\r\n    g = d.getElementsByTagName('body')[0],\r\n    x = w.innerWidth || e.clientWidth || g.clientWidth;\r\n    return x;\r\n}\r\n\r\njSuites.getWindowHeight = function() {\r\n    var w = window,\r\n    d = document,\r\n    e = d.documentElement,\r\n    g = d.getElementsByTagName('body')[0],\r\n    y = w.innerHeight|| e.clientHeight|| g.clientHeight;\r\n    return  y;\r\n}\r\n\r\njSuites.getPosition = function(e) {\r\n    if (e.changedTouches && e.changedTouches[0]) {\r\n        var x = e.changedTouches[0].pageX;\r\n        var y = e.changedTouches[0].pageY;\r\n    } else {\r\n        var x = (window.Event) ? e.pageX : e.clientX + (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);\r\n        var y = (window.Event) ? e.pageY : e.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);\r\n    }\r\n\r\n    return [ x, y ];\r\n}\r\n\r\njSuites.click = function(el) {\r\n    if (el.click) {\r\n        el.click();\r\n    } else {\r\n        var evt = new MouseEvent('click', {\r\n            bubbles: true,\r\n            cancelable: true,\r\n            view: window\r\n        });\r\n        el.dispatchEvent(evt);\r\n    }\r\n}\r\n\r\njSuites.findElement = function(element, condition) {\r\n    var foundElement = false;\r\n\r\n    function path (element) {\r\n        if (element && ! foundElement) {\r\n            if (typeof(condition) == 'function') {\r\n                foundElement = condition(element)\r\n            } else if (typeof(condition) == 'string') {\r\n                if (element.classList && element.classList.contains(condition)) {\r\n                    foundElement = element;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (element.parentNode && ! foundElement) {\r\n            path(element.parentNode);\r\n        }\r\n    }\r\n\r\n    path(element);\r\n\r\n    return foundElement;\r\n}\r\n\r\n// Two digits\r\njSuites.two = function(value) {\r\n    value = '' + value;\r\n    if (value.length == 1) {\r\n        value = '0' + value;\r\n    }\r\n    return value;\r\n}\r\n\r\njSuites.sha512 = (function(str) {\r\n    function int64(msint_32, lsint_32) {\r\n        this.highOrder = msint_32;\r\n        this.lowOrder = lsint_32;\r\n    }\r\n\r\n    var H = [new int64(0x6a09e667, 0xf3bcc908), new int64(0xbb67ae85, 0x84caa73b),\r\n        new int64(0x3c6ef372, 0xfe94f82b), new int64(0xa54ff53a, 0x5f1d36f1),\r\n        new int64(0x510e527f, 0xade682d1), new int64(0x9b05688c, 0x2b3e6c1f),\r\n        new int64(0x1f83d9ab, 0xfb41bd6b), new int64(0x5be0cd19, 0x137e2179)];\r\n\r\n    var K = [new int64(0x428a2f98, 0xd728ae22), new int64(0x71374491, 0x23ef65cd),\r\n        new int64(0xb5c0fbcf, 0xec4d3b2f), new int64(0xe9b5dba5, 0x8189dbbc),\r\n        new int64(0x3956c25b, 0xf348b538), new int64(0x59f111f1, 0xb605d019),\r\n        new int64(0x923f82a4, 0xaf194f9b), new int64(0xab1c5ed5, 0xda6d8118),\r\n        new int64(0xd807aa98, 0xa3030242), new int64(0x12835b01, 0x45706fbe),\r\n        new int64(0x243185be, 0x4ee4b28c), new int64(0x550c7dc3, 0xd5ffb4e2),\r\n        new int64(0x72be5d74, 0xf27b896f), new int64(0x80deb1fe, 0x3b1696b1),\r\n        new int64(0x9bdc06a7, 0x25c71235), new int64(0xc19bf174, 0xcf692694),\r\n        new int64(0xe49b69c1, 0x9ef14ad2), new int64(0xefbe4786, 0x384f25e3),\r\n        new int64(0x0fc19dc6, 0x8b8cd5b5), new int64(0x240ca1cc, 0x77ac9c65),\r\n        new int64(0x2de92c6f, 0x592b0275), new int64(0x4a7484aa, 0x6ea6e483),\r\n        new int64(0x5cb0a9dc, 0xbd41fbd4), new int64(0x76f988da, 0x831153b5),\r\n        new int64(0x983e5152, 0xee66dfab), new int64(0xa831c66d, 0x2db43210),\r\n        new int64(0xb00327c8, 0x98fb213f), new int64(0xbf597fc7, 0xbeef0ee4),\r\n        new int64(0xc6e00bf3, 0x3da88fc2), new int64(0xd5a79147, 0x930aa725),\r\n        new int64(0x06ca6351, 0xe003826f), new int64(0x14292967, 0x0a0e6e70),\r\n        new int64(0x27b70a85, 0x46d22ffc), new int64(0x2e1b2138, 0x5c26c926),\r\n        new int64(0x4d2c6dfc, 0x5ac42aed), new int64(0x53380d13, 0x9d95b3df),\r\n        new int64(0x650a7354, 0x8baf63de), new int64(0x766a0abb, 0x3c77b2a8),\r\n        new int64(0x81c2c92e, 0x47edaee6), new int64(0x92722c85, 0x1482353b),\r\n        new int64(0xa2bfe8a1, 0x4cf10364), new int64(0xa81a664b, 0xbc423001),\r\n        new int64(0xc24b8b70, 0xd0f89791), new int64(0xc76c51a3, 0x0654be30),\r\n        new int64(0xd192e819, 0xd6ef5218), new int64(0xd6990624, 0x5565a910),\r\n        new int64(0xf40e3585, 0x5771202a), new int64(0x106aa070, 0x32bbd1b8),\r\n        new int64(0x19a4c116, 0xb8d2d0c8), new int64(0x1e376c08, 0x5141ab53),\r\n        new int64(0x2748774c, 0xdf8eeb99), new int64(0x34b0bcb5, 0xe19b48a8),\r\n        new int64(0x391c0cb3, 0xc5c95a63), new int64(0x4ed8aa4a, 0xe3418acb),\r\n        new int64(0x5b9cca4f, 0x7763e373), new int64(0x682e6ff3, 0xd6b2b8a3),\r\n        new int64(0x748f82ee, 0x5defb2fc), new int64(0x78a5636f, 0x43172f60),\r\n        new int64(0x84c87814, 0xa1f0ab72), new int64(0x8cc70208, 0x1a6439ec),\r\n        new int64(0x90befffa, 0x23631e28), new int64(0xa4506ceb, 0xde82bde9),\r\n        new int64(0xbef9a3f7, 0xb2c67915), new int64(0xc67178f2, 0xe372532b),\r\n        new int64(0xca273ece, 0xea26619c), new int64(0xd186b8c7, 0x21c0c207),\r\n        new int64(0xeada7dd6, 0xcde0eb1e), new int64(0xf57d4f7f, 0xee6ed178),\r\n        new int64(0x06f067aa, 0x72176fba), new int64(0x0a637dc5, 0xa2c898a6),\r\n        new int64(0x113f9804, 0xbef90dae), new int64(0x1b710b35, 0x131c471b),\r\n        new int64(0x28db77f5, 0x23047d84), new int64(0x32caab7b, 0x40c72493),\r\n        new int64(0x3c9ebe0a, 0x15c9bebc), new int64(0x431d67c4, 0x9c100d4c),\r\n        new int64(0x4cc5d4be, 0xcb3e42b6), new int64(0x597f299c, 0xfc657e2a),\r\n        new int64(0x5fcb6fab, 0x3ad6faec), new int64(0x6c44198c, 0x4a475817)];\r\n\r\n    var W = new Array(64);\r\n    var a, b, c, d, e, f, g, h, i, j;\r\n    var T1, T2;\r\n    var charsize = 8;\r\n\r\n    function utf8_encode(str) {\r\n        return unescape(encodeURIComponent(str));\r\n    }\r\n\r\n    function str2binb(str) {\r\n        var bin = [];\r\n        var mask = (1 << charsize) - 1;\r\n        var len = str.length * charsize;\r\n    \r\n        for (var i = 0; i < len; i += charsize) {\r\n            bin[i >> 5] |= (str.charCodeAt(i / charsize) & mask) << (32 - charsize - (i % 32));\r\n        }\r\n    \r\n        return bin;\r\n    }\r\n\r\n    function binb2hex(binarray) {\r\n        var hex_tab = \"0123456789abcdef\";\r\n        var str = \"\";\r\n        var length = binarray.length * 4;\r\n        var srcByte;\r\n\r\n        for (var i = 0; i < length; i += 1) {\r\n            srcByte = binarray[i >> 2] >> ((3 - (i % 4)) * 8);\r\n            str += hex_tab.charAt((srcByte >> 4) & 0xF) + hex_tab.charAt(srcByte & 0xF);\r\n        }\r\n\r\n        return str;\r\n    }\r\n\r\n    function safe_add_2(x, y) {\r\n        var lsw, msw, lowOrder, highOrder;\r\n\r\n        lsw = (x.lowOrder & 0xFFFF) + (y.lowOrder & 0xFFFF);\r\n        msw = (x.lowOrder >>> 16) + (y.lowOrder >>> 16) + (lsw >>> 16);\r\n        lowOrder = ((msw & 0xFFFF) << 16) | (lsw & 0xFFFF);\r\n\r\n        lsw = (x.highOrder & 0xFFFF) + (y.highOrder & 0xFFFF) + (msw >>> 16);\r\n        msw = (x.highOrder >>> 16) + (y.highOrder >>> 16) + (lsw >>> 16);\r\n        highOrder = ((msw & 0xFFFF) << 16) | (lsw & 0xFFFF);\r\n\r\n        return new int64(highOrder, lowOrder);\r\n    }\r\n\r\n    function safe_add_4(a, b, c, d) {\r\n        var lsw, msw, lowOrder, highOrder;\r\n\r\n        lsw = (a.lowOrder & 0xFFFF) + (b.lowOrder & 0xFFFF) + (c.lowOrder & 0xFFFF) + (d.lowOrder & 0xFFFF);\r\n        msw = (a.lowOrder >>> 16) + (b.lowOrder >>> 16) + (c.lowOrder >>> 16) + (d.lowOrder >>> 16) + (lsw >>> 16);\r\n        lowOrder = ((msw & 0xFFFF) << 16) | (lsw & 0xFFFF);\r\n\r\n        lsw = (a.highOrder & 0xFFFF) + (b.highOrder & 0xFFFF) + (c.highOrder & 0xFFFF) + (d.highOrder & 0xFFFF) + (msw >>> 16);\r\n        msw = (a.highOrder >>> 16) + (b.highOrder >>> 16) + (c.highOrder >>> 16) + (d.highOrder >>> 16) + (lsw >>> 16);\r\n        highOrder = ((msw & 0xFFFF) << 16) | (lsw & 0xFFFF);\r\n\r\n        return new int64(highOrder, lowOrder);\r\n    }\r\n\r\n    function safe_add_5(a, b, c, d, e) {\r\n        var lsw, msw, lowOrder, highOrder;\r\n\r\n        lsw = (a.lowOrder & 0xFFFF) + (b.lowOrder & 0xFFFF) + (c.lowOrder & 0xFFFF) + (d.lowOrder & 0xFFFF) + (e.lowOrder & 0xFFFF);\r\n        msw = (a.lowOrder >>> 16) + (b.lowOrder >>> 16) + (c.lowOrder >>> 16) + (d.lowOrder >>> 16) + (e.lowOrder >>> 16) + (lsw >>> 16);\r\n        lowOrder = ((msw & 0xFFFF) << 16) | (lsw & 0xFFFF);\r\n\r\n        lsw = (a.highOrder & 0xFFFF) + (b.highOrder & 0xFFFF) + (c.highOrder & 0xFFFF) + (d.highOrder & 0xFFFF) + (e.highOrder & 0xFFFF) + (msw >>> 16);\r\n        msw = (a.highOrder >>> 16) + (b.highOrder >>> 16) + (c.highOrder >>> 16) + (d.highOrder >>> 16) + (e.highOrder >>> 16) + (lsw >>> 16);\r\n        highOrder = ((msw & 0xFFFF) << 16) | (lsw & 0xFFFF);\r\n\r\n        return new int64(highOrder, lowOrder);\r\n    }\r\n\r\n    function maj(x, y, z) {\r\n        return new int64(\r\n            (x.highOrder & y.highOrder) ^ (x.highOrder & z.highOrder) ^ (y.highOrder & z.highOrder),\r\n            (x.lowOrder & y.lowOrder) ^ (x.lowOrder & z.lowOrder) ^ (y.lowOrder & z.lowOrder)\r\n        );\r\n    }\r\n\r\n    function ch(x, y, z) {\r\n        return new int64(\r\n            (x.highOrder & y.highOrder) ^ (~x.highOrder & z.highOrder),\r\n            (x.lowOrder & y.lowOrder) ^ (~x.lowOrder & z.lowOrder)\r\n        );\r\n    }\r\n\r\n    function rotr(x, n) {\r\n        if (n <= 32) {\r\n            return new int64(\r\n             (x.highOrder >>> n) | (x.lowOrder << (32 - n)),\r\n             (x.lowOrder >>> n) | (x.highOrder << (32 - n))\r\n            );\r\n        } else {\r\n            return new int64(\r\n             (x.lowOrder >>> n) | (x.highOrder << (32 - n)),\r\n             (x.highOrder >>> n) | (x.lowOrder << (32 - n))\r\n            );\r\n        }\r\n    }\r\n\r\n    function sigma0(x) {\r\n        var rotr28 = rotr(x, 28);\r\n        var rotr34 = rotr(x, 34);\r\n        var rotr39 = rotr(x, 39);\r\n\r\n        return new int64(\r\n            rotr28.highOrder ^ rotr34.highOrder ^ rotr39.highOrder,\r\n            rotr28.lowOrder ^ rotr34.lowOrder ^ rotr39.lowOrder\r\n        );\r\n    }\r\n\r\n    function sigma1(x) {\r\n        var rotr14 = rotr(x, 14);\r\n        var rotr18 = rotr(x, 18);\r\n        var rotr41 = rotr(x, 41);\r\n\r\n        return new int64(\r\n            rotr14.highOrder ^ rotr18.highOrder ^ rotr41.highOrder,\r\n            rotr14.lowOrder ^ rotr18.lowOrder ^ rotr41.lowOrder\r\n        );\r\n    }\r\n\r\n    function gamma0(x) {\r\n        var rotr1 = rotr(x, 1), rotr8 = rotr(x, 8), shr7 = shr(x, 7);\r\n\r\n        return new int64(\r\n            rotr1.highOrder ^ rotr8.highOrder ^ shr7.highOrder,\r\n            rotr1.lowOrder ^ rotr8.lowOrder ^ shr7.lowOrder\r\n        );\r\n    }\r\n\r\n    function gamma1(x) {\r\n        var rotr19 = rotr(x, 19);\r\n        var rotr61 = rotr(x, 61);\r\n        var shr6 = shr(x, 6);\r\n\r\n        return new int64(\r\n            rotr19.highOrder ^ rotr61.highOrder ^ shr6.highOrder,\r\n            rotr19.lowOrder ^ rotr61.lowOrder ^ shr6.lowOrder\r\n        );\r\n    }\r\n\r\n    function shr(x, n) {\r\n        if (n <= 32) {\r\n            return new int64(\r\n                x.highOrder >>> n,\r\n                x.lowOrder >>> n | (x.highOrder << (32 - n))\r\n            );\r\n        } else {\r\n            return new int64(\r\n                0,\r\n                x.highOrder << (32 - n)\r\n            );\r\n        }\r\n    }\r\n\r\n    var str = utf8_encode(str);\r\n    var strlen = str.length*charsize;\r\n    str = str2binb(str);\r\n\r\n    str[strlen >> 5] |= 0x80 << (24 - strlen % 32);\r\n    str[(((strlen + 128) >> 10) << 5) + 31] = strlen;\r\n\r\n    for (var i = 0; i < str.length; i += 32) {\r\n        a = H[0];\r\n        b = H[1];\r\n        c = H[2];\r\n        d = H[3];\r\n        e = H[4];\r\n        f = H[5];\r\n        g = H[6];\r\n        h = H[7];\r\n\r\n        for (var j = 0; j < 80; j++) {\r\n            if (j < 16) {\r\n                W[j] = new int64(str[j*2 + i], str[j*2 + i + 1]);\r\n            } else {\r\n                W[j] = safe_add_4(gamma1(W[j - 2]), W[j - 7], gamma0(W[j - 15]), W[j - 16]);\r\n            }\r\n\r\n            T1 = safe_add_5(h, sigma1(e), ch(e, f, g), K[j], W[j]);\r\n            T2 = safe_add_2(sigma0(a), maj(a, b, c));\r\n            h = g;\r\n            g = f;\r\n            f = e;\r\n            e = safe_add_2(d, T1);\r\n            d = c;\r\n            c = b;\r\n            b = a;\r\n            a = safe_add_2(T1, T2);\r\n        }\r\n\r\n        H[0] = safe_add_2(a, H[0]);\r\n        H[1] = safe_add_2(b, H[1]);\r\n        H[2] = safe_add_2(c, H[2]);\r\n        H[3] = safe_add_2(d, H[3]);\r\n        H[4] = safe_add_2(e, H[4]);\r\n        H[5] = safe_add_2(f, H[5]);\r\n        H[6] = safe_add_2(g, H[6]);\r\n        H[7] = safe_add_2(h, H[7]);\r\n    }\r\n\r\n    var binarray = [];\r\n    for (var i = 0; i < H.length; i++) {\r\n        binarray.push(H[i].highOrder);\r\n        binarray.push(H[i].lowOrder);\r\n    }\r\n\r\n    return binb2hex(binarray);\r\n});\r\n\r\nif (! jSuites.login) {\r\n    jSuites.login = {};\r\n    jSuites.login.sha512 = jSuites.sha512;\r\n}\r\n\r\njSuites.image = jSuites.upload = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    // Default configuration\r\n    var defaults = {\r\n        type: 'image',\r\n        extension: '*',\r\n        input: false,\r\n        minWidth: false,\r\n        maxWidth: null,\r\n        maxHeight: null,\r\n        maxJpegSizeBytes: null, // For example, 350Kb would be 350000\r\n        onchange: null,\r\n        multiple: false,\r\n        remoteParser: null,\r\n        text:{\r\n            extensionNotAllowed:'The extension is not allowed',\r\n        }\r\n    };\r\n\r\n    // Loop through our object\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    // Multiple\r\n    if (obj.options.multiple == true) {\r\n        el.setAttribute('data-multiple', true);\r\n    }\r\n\r\n    // Container\r\n    el.content = [];\r\n\r\n    // Upload icon\r\n    el.classList.add('jupload');\r\n\r\n    if (obj.options.input == true) {\r\n        el.classList.add('input');\r\n    }\r\n\r\n    obj.add = function(data) {\r\n        // Reset container for single files\r\n        if (obj.options.multiple == false) {\r\n            el.content = [];\r\n            el.innerText = '';\r\n        }\r\n\r\n        // Append to the element\r\n        if (obj.options.type == 'image') {\r\n            var img = document.createElement('img');\r\n            img.setAttribute('src', data.file);\r\n            img.setAttribute('tabindex', -1);\r\n            if (! el.getAttribute('name')) {\r\n                img.className = 'jfile';\r\n                img.content = data;\r\n            }\r\n            el.appendChild(img);\r\n        } else {\r\n            if (data.name) {\r\n                var name = data.name;\r\n            } else {\r\n                var name = data.file;\r\n            }\r\n            var div = document.createElement('div');\r\n            div.innerText = name || obj.options.type;\r\n            div.classList.add('jupload-item');\r\n            div.setAttribute('tabindex', -1);\r\n            el.appendChild(div);\r\n        }\r\n\r\n        if (data.content) {\r\n            data.file = jSuites.guid();\r\n        }\r\n\r\n        // Push content\r\n        el.content.push(data);\r\n\r\n        // Onchange\r\n        if (typeof(obj.options.onchange) == 'function') {\r\n            obj.options.onchange(el, data);\r\n        }\r\n    }\r\n\r\n    obj.addFromFile = function(file) {\r\n        var type = file.type.split('/');\r\n        if (type[0] == obj.options.type) {\r\n            var readFile = new FileReader();\r\n            readFile.addEventListener(\"load\", function (v) {\r\n                var data = {\r\n                    file: v.srcElement.result,\r\n                    extension: file.name.substr(file.name.lastIndexOf('.') + 1),\r\n                    name: file.name,\r\n                    size: file.size,\r\n                    lastmodified: file.lastModified,\r\n                    content: v.srcElement.result,\r\n                }\r\n\r\n                obj.add(data);\r\n            });\r\n\r\n            readFile.readAsDataURL(file);\r\n        } else {\r\n            alert(obj.options.text.extensionNotAllowed);\r\n        }\r\n    }\r\n\r\n    obj.addFromUrl = function(src) {\r\n        if (src.substr(0,4) != 'data' && ! obj.options.remoteParser) {\r\n            console.error('remoteParser not defined in your initialization');\r\n        } else {\r\n            // This is to process cross domain images\r\n            if (src.substr(0,4) == 'data') {\r\n                var extension = src.split(';')\r\n                extension = extension[0].split('/');\r\n                var type = extension[0].replace('data:','');\r\n                if (type == obj.options.type) {\r\n                    var data = {\r\n                        file: src,\r\n                        name: '',\r\n                        extension: extension[1],\r\n                        content: src,\r\n                    }\r\n                    obj.add(data);\r\n                } else {\r\n                    alert(obj.options.text.extensionNotAllowed);\r\n                }\r\n            } else {\r\n                var extension = src.substr(src.lastIndexOf('.') + 1);\r\n                // Work for cross browsers\r\n                src = obj.options.remoteParser + src;\r\n                // Get remove content\r\n                jSuites.ajax({\r\n                    url: src,\r\n                    type: 'GET',\r\n                    dataType: 'blob',\r\n                    success: function(data) {\r\n                        //add(extension[0].replace('data:',''), data);\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    var getDataURL = function(canvas, type) {\r\n        var compression = 0.92;\r\n        var lastContentLength = null;\r\n        var content = canvas.toDataURL(type, compression);\r\n        while (obj.options.maxJpegSizeBytes && type === 'image/jpeg' &&\r\n               content.length > obj.options.maxJpegSizeBytes && content.length !== lastContentLength) {\r\n            // Apply the compression\r\n            compression *= 0.9;\r\n            lastContentLength = content.length;\r\n            content = canvas.toDataURL(type, compression);\r\n        }\r\n        return content;\r\n    }\r\n\r\n    var mime = obj.options.type + '/' + obj.options.extension;\r\n    var input = document.createElement('input');\r\n    input.type = 'file';\r\n    input.setAttribute('accept', mime);\r\n    input.onchange = function() {\r\n        for (var i = 0; i < this.files.length; i++) {\r\n            obj.addFromFile(this.files[i]);\r\n        }\r\n    }\r\n\r\n    // Allow multiple files\r\n    if (obj.options.multiple == true) {\r\n        input.setAttribute('multiple', true);\r\n    }\r\n\r\n    var current = null;\r\n\r\n    el.addEventListener(\"click\", function(e) {\r\n        current = null;\r\n        if (! el.children.length || e.target === el) {\r\n            jSuites.click(input);\r\n        } else {\r\n            if (e.target.parentNode == el) {\r\n                current = e.target;\r\n            }\r\n        }\r\n    });\r\n\r\n    el.addEventListener(\"dblclick\", function(e) {\r\n        jSuites.click(input);\r\n    });\r\n\r\n    el.addEventListener('dragenter', function(e) {\r\n        el.style.border = '1px dashed #000';\r\n    });\r\n\r\n    el.addEventListener('dragleave', function(e) {\r\n        el.style.border = '1px solid #eee';\r\n    });\r\n\r\n    el.addEventListener('dragstop', function(e) {\r\n        el.style.border = '1px solid #eee';\r\n    });\r\n\r\n    el.addEventListener('dragover', function(e) {\r\n        e.preventDefault();\r\n    });\r\n\r\n    el.addEventListener('keydown', function(e) {\r\n        if (current && e.which == 46) {\r\n            var index = Array.prototype.indexOf.call(el.children, current);\r\n            if (index >= 0) {\r\n                el.content.splice(index, 1);\r\n                current.remove();\r\n                current = null;\r\n            }\r\n        }\r\n    });\r\n\r\n    el.addEventListener('drop', function(e) {\r\n        e.preventDefault();  \r\n        e.stopPropagation();\r\n\r\n        var html = (e.originalEvent || e).dataTransfer.getData('text/html');\r\n        var file = (e.originalEvent || e).dataTransfer.files;\r\n\r\n        if (file.length) {\r\n            for (var i = 0; i < e.dataTransfer.files.length; i++) {\r\n                obj.addFromFile(e.dataTransfer.files[i]);\r\n            }\r\n        } else if (html) {\r\n            if (obj.options.multiple == false) {\r\n                el.innerText = '';\r\n            }\r\n\r\n            // Create temp element\r\n            var div = document.createElement('div');\r\n            div.innerHTML = html;\r\n\r\n            // Extract images\r\n            var img = div.querySelectorAll('img');\r\n\r\n            if (img.length) {\r\n                for (var i = 0; i < img.length; i++) {\r\n                    obj.addFromUrl(img[i].src);\r\n                }\r\n            }\r\n        }\r\n\r\n        el.style.border = '1px solid #eee';\r\n\r\n        return false;\r\n    });\r\n\r\n    el.val = function(val) {\r\n        if (val === undefined) {\r\n            return el.content && el.content.length ? el.content : null;\r\n        } else {\r\n            // Reset\r\n            el.innerText = '';\r\n            el.content = [];\r\n\r\n            if (val) {\r\n                if (Array.isArray(val)) {\r\n                    for (var i = 0; i < val.length; i++) {\r\n                        if (typeof(val[i]) == 'string') {\r\n                            obj.add({ file: val[i] });\r\n                        } else {\r\n                            obj.add(val[i]);\r\n                        }\r\n                    }\r\n                } else if (typeof(val) == 'string') {\r\n                    obj.add({ file: val });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    el.upload = el.image = obj;\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.image.create = function(data) {\r\n    var img = document.createElement('img');\r\n    img.setAttribute('src', data.file);\r\n    img.className = 'jfile';\r\n    img.setAttribute('tabindex', -1);\r\n    img.content = data;\r\n\r\n    return img;\r\n}\r\n\r\n\r\njSuites.lazyLoading = (function(el, options) {\r\n    var obj = {}\r\n\r\n    // Mandatory options\r\n    if (! options.loadUp || typeof(options.loadUp) != 'function') {\r\n        options.loadUp = function() {\r\n            return false;\r\n        }\r\n    }\r\n    if (! options.loadDown || typeof(options.loadDown) != 'function') {\r\n        options.loadDown = function() {\r\n            return false;\r\n        }\r\n    }\r\n    // Timer ms\r\n    if (! options.timer) {\r\n        options.timer = 100;\r\n    }\r\n\r\n    // Timer\r\n    var timeControlLoading = null;\r\n\r\n    // Controls\r\n    var scrollControls = function(e) {\r\n        if (timeControlLoading == null) {\r\n            var event = false;\r\n            var scrollTop = el.scrollTop;\r\n            if (el.scrollTop + (el.clientHeight * 2) >= el.scrollHeight) {\r\n                if (options.loadDown()) {\r\n                    if (scrollTop == el.scrollTop) {\r\n                        el.scrollTop = el.scrollTop - (el.clientHeight);\r\n                    }\r\n                    event = true;\r\n                }\r\n            } else if (el.scrollTop <= el.clientHeight) {\r\n                if (options.loadUp()) {\r\n                    if (scrollTop == el.scrollTop) {\r\n                        el.scrollTop = el.scrollTop + (el.clientHeight);\r\n                    }\r\n                    event = true;\r\n                }\r\n            }\r\n\r\n            timeControlLoading = setTimeout(function() {\r\n                timeControlLoading = null;\r\n            }, options.timer);\r\n\r\n            if (event) {\r\n                if (typeof(options.onupdate) == 'function') {\r\n                    options.onupdate();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Onscroll\r\n    el.onscroll = function(e) {\r\n        scrollControls(e);\r\n    }\r\n\r\n    el.onwheel = function(e) {\r\n        scrollControls(e);\r\n    }\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.loading = (function() {\r\n    var obj = {};\r\n\r\n    var loading = null;\r\n\r\n    obj.show = function() {\r\n        if (! loading) {\r\n            loading = document.createElement('div');\r\n            loading.className = 'jloading';\r\n        }\r\n        document.body.appendChild(loading);\r\n    }\r\n\r\n    obj.hide = function() {\r\n        if (loading && loading.parentNode) {\r\n            document.body.removeChild(loading);\r\n        }\r\n    }\r\n\r\n    return obj;\r\n})();\r\n\r\njSuites.mask = (function() {\r\n    // Currency \r\n    var tokens = {\r\n        // Currency tokens\r\n        currency: [ '#(.{1})##0?(.{1}0+)?( ?;(.*)?)?', '#' ],\r\n        // Percentage\r\n        percentage: [ '0{1}(.{1}0+)?%' ],\r\n        // Number\r\n        numeric: [ '0{1}(.{1}0+)?' ],\r\n        // Data tokens\r\n        datetime: [ 'YYYY', 'YYY', 'YY', 'MMMMM', 'MMMM', 'MMM', 'MM', 'DDDDD', 'DDDD', 'DDD', 'DD', 'DY', 'DAY', 'WD', 'D', 'Q', 'HH24', 'HH12', 'HH', '\\\\[H\\\\]', 'H', 'AM/PM', 'PM', 'AM', 'MI', 'SS', 'MS', 'MONTH', 'MON', 'Y', 'M' ],\r\n        // Other\r\n        general: [ 'A', '0', '[0-9a-zA-Z\\$]+', '.']\r\n    }\r\n\r\n    var getDate = function() {\r\n        if (this.mask.toLowerCase().indexOf('[h]') !== -1) {\r\n            var m = 0;\r\n            if (this.date[4]) {\r\n                m = parseFloat(this.date[4] / 60);\r\n            }\r\n            var v = parseInt(this.date[3]) + m;\r\n            v /= 24;\r\n        } else if (! (this.date[0] && this.date[1] && this.date[2]) && (this.date[3] || this.date[4])) {\r\n            v = jSuites.two(this.date[3]) + ':' + jSuites.two(this.date[4]) + ':' + jSuites.two(this.date[5]) \r\n        } else {\r\n            if (this.date[0] && this.date[1] && ! this.date[2]) {\r\n                this.date[2] = 1;\r\n            }\r\n            v = jSuites.two(this.date[0]) + '-' + jSuites.two(this.date[1]) + '-' + jSuites.two(this.date[2]);\r\n\r\n            if (this.date[3] || this.date[4] || this.date[5]) {\r\n                v += ' ' + jSuites.two(this.date[3]) + ':' + jSuites.two(this.date[4]) + ':' + jSuites.two(this.date[5]);\r\n            }\r\n        }\r\n\r\n        return v;\r\n    }\r\n\r\n    var isBlank = function(v) {\r\n        return v === null || v === '' || v === undefined ? true : false;\r\n    }\r\n\r\n    var isFormula = function(value) {\r\n        return (''+value).chartAt(0) == '=';\r\n    }\r\n\r\n    var isNumeric = function(t) {\r\n        return t === 'currency' || t === 'percentage' || t === 'numeric' ? true : false;\r\n    }\r\n    /**\r\n     * Get the decimal defined in the mask configuration\r\n     */\r\n    var getDecimal = function(v) {\r\n        if (v && Number(v) == v) {\r\n            return '.';\r\n        } else {\r\n            if (this.options.decimal) {\r\n                return this.options.decimal;\r\n            } else {\r\n                if (this.locale) {\r\n                    var t = Intl.NumberFormat(this.locale).format(1.1);\r\n                    return this.options.decimal = t[1];\r\n                } else {\r\n                    if (! v) {\r\n                        v  = this.mask;\r\n                    }\r\n                    var e = new RegExp('0{1}(.{1})0+', 'ig');\r\n                    var t = e.exec(v);\r\n                    if (t && t[1] && t[1].length == 1) {\r\n                        // Save decimal\r\n                        this.options.decimal = t[1];\r\n                        // Return decimal\r\n                        return t[1];\r\n                    } else {\r\n                        // Did not find any decimal last resort the default\r\n                        var e = new RegExp('#,##', 'ig');\r\n                        if ((v && v.match(e)) || '1.1'.toLocaleString().substring(1,2) == '.') {\r\n                            this.options.decimal = '.';\r\n                        } else {\r\n                            this.options.decimal = ',';\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.options.decimal) {\r\n            return this.options.decimal;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    var ParseValue = function(v, decimal) {\r\n        if (v == '') {\r\n            return '';\r\n        }\r\n\r\n        // Get decimal\r\n        if (! decimal) {\r\n            decimal = getDecimal.call(this);\r\n        }\r\n\r\n        // New value\r\n        v = (''+v).split(decimal);\r\n        v[0] = v[0].match(/[\\-0-9]+/g, '');\r\n        if (v[0]) {\r\n            v[0] = v[0].join('');\r\n        }\r\n        if (v[0] || v[1]) {\r\n            if (v[1] !== undefined) {\r\n                v[1] = v[1].match(/[0-9]+/g, '');\r\n                if (v[1]) {\r\n                    v[1] = v[1].join('');\r\n                } else {\r\n                    v[1] = '';\r\n                }\r\n            }\r\n        } else {\r\n            return '';\r\n        }\r\n\r\n        return v;\r\n    }\r\n\r\n    var FormatValue = function(v) {\r\n        if (v == '') {\r\n            return '';\r\n        }\r\n        // Get decimal\r\n        var d = getDecimal.call(this);\r\n        // Convert value\r\n        var o = Object.create(this.options || {});\r\n        if (! o.minimumFractionDigits) {\r\n            o.minimumFractionDigits = 1;\r\n        }\r\n        // Parse value\r\n        v = ParseValue.call(this, v);\r\n        if (v == '') {\r\n            return '';\r\n        }\r\n        // Temporary value\r\n        if (v[0]) {\r\n            var t = parseFloat(v.join('.'));\r\n            if (o.style == 'percent') {\r\n                t /= 100;\r\n            }\r\n        } else {\r\n            var t = null;\r\n        }\r\n        var n = new Intl.NumberFormat(this.locale, o).format(t);\r\n        n = n.split(d);\r\n        var s = n[1].replace(/[0-9]*/g, '');\r\n        if (s) {\r\n            n[2] = s;\r\n        }\r\n        if (v[1] !== undefined) {\r\n            n[1] = d + v[1];\r\n        } else {\r\n            n[1] = '';\r\n        }\r\n\r\n        return n.join('');\r\n    }\r\n\r\n    var Format = function(e) {\r\n        var v = Value.call(e);\r\n        if (! v) {\r\n            return;\r\n        }\r\n\r\n        // Get decimal\r\n        var d = getDecimal.call(this);\r\n        var n = FormatValue.call(this, v);\r\n        var t = (n.length) - v.length;\r\n        var index = Caret.call(e) + t;\r\n        // Set value and update caret\r\n        Value.call(e, n, index, true);\r\n    }\r\n\r\n    var Extract = function(v) {\r\n        // Keep the raw value\r\n        var current = ParseValue.call(this, v);\r\n        if (current) {\r\n            return parseFloat(current.join('.'));\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Caret getter and setter methods\r\n     */\r\n    var Caret = function(index, adjustNumeric) {\r\n        if (index === undefined) {\r\n            if (this.tagName == 'DIV') {\r\n                var pos = 0;\r\n                var s = window.getSelection();\r\n                if (s) {\r\n                    if (s.rangeCount !== 0) {\r\n                        var r = s.getRangeAt(0);\r\n                        var p = r.cloneRange();\r\n                        p.selectNodeContents(this);\r\n                        p.setEnd(r.endContainer, r.endOffset);\r\n                        pos = p.toString().length;\r\n                    }\r\n                }\r\n                return pos;\r\n            } else {\r\n                return this.selectionStart;\r\n            }\r\n        } else {\r\n            // Get the current value\r\n            var n = Value.call(this);\r\n\r\n            // Review the position\r\n            if (adjustNumeric) {\r\n                var p = null;\r\n                for (var i = 0; i < n.length; i++) {\r\n                    if (n[i].match(/[\\-0-9]/g) || n[i] == '.' || n[i] == ',') {  \r\n                        p = i;\r\n                    }\r\n                }\r\n\r\n                // If the string has no numbers\r\n                if (p === null) {\r\n                    p = n.indexOf(' ');\r\n                }\r\n\r\n                if (index >= p) {\r\n                    index = p + 1;\r\n                }\r\n            }\r\n\r\n            // Do not update caret\r\n            if (index > n.length) {\r\n                index = n.length;\r\n            }\r\n\r\n            if (index) {\r\n                // Set caret\r\n                if (this.tagName == 'DIV') {\r\n                    var s = window.getSelection();\r\n                    var r = document.createRange();\r\n                    r.setStart(this.childNodes[0], index);\r\n                    s.removeAllRanges();\r\n                    s.addRange(r);\r\n                } else {\r\n                    this.selectionStart = index;\r\n                    this.selectionEnd = index;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Value getter and setter method\r\n     */\r\n    var Value = function(v, updateCaret, adjustNumeric) {\r\n        if (this.tagName == 'DIV') {\r\n            if (v === undefined) {\r\n                return this.innerText;\r\n            } else {\r\n                if (this.innerText !== v) {\r\n                    this.innerText = v;\r\n\r\n                    if (updateCaret) {\r\n                        Caret.call(this, updateCaret, adjustNumeric);\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            if (v === undefined) {\r\n                return this.value;\r\n            } else {\r\n                if (this.value !== v) {\r\n                    this.value = v;\r\n                    if (updateCaret) {\r\n                        Caret.call(this, updateCaret, adjustNumeric);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Labels\r\n    var weekDaysFull = jSuites.calendar.weekdays;\r\n    var weekDays = jSuites.calendar.weekdaysShort;\r\n    var monthsFull = jSuites.calendar.months;\r\n    var months = jSuites.calendar.monthsShort;\r\n\r\n    var parser = {\r\n        'YEAR': function(v, s) {\r\n            var y = ''+new Date().getFullYear();\r\n\r\n            if (typeof(this.values[this.index]) === 'undefined') {\r\n                this.values[this.index] = '';\r\n            }\r\n            if (parseInt(v) >= 0 && parseInt(v) <= 10) {\r\n                if (this.values[this.index].length < s) {\r\n                    this.values[this.index] += v;\r\n                }\r\n            }\r\n            if (this.values[this.index].length == s) {\r\n                if (s == 2) {\r\n                    var y = y.substr(0,2) + this.values[this.index];\r\n                } else if (s == 3) {\r\n                    var y = y.substr(0,1) + this.values[this.index];\r\n                } else if (s == 4) {\r\n                    var y = this.values[this.index];\r\n                }\r\n                this.date[0] = y;\r\n                this.index++;\r\n            }\r\n        },\r\n        'YYYY': function(v) {\r\n            parser.YEAR.call(this, v, 4);\r\n        },\r\n        'YYY': function(v) {\r\n            parser.YEAR.call(this, v, 3);\r\n        },\r\n        'YY': function(v) {\r\n            parser.YEAR.call(this, v, 2);\r\n        },\r\n        'FIND': function(v, a) {\r\n            if (isBlank(this.values[this.index])) {\r\n                this.values[this.index] = '';\r\n            }\r\n            var pos = 0;\r\n            var count = 0;\r\n            var value = (this.values[this.index] + v).toLowerCase();\r\n            for (var i = 0; i < a.length; i++) {\r\n                if (a[i].toLowerCase().indexOf(value) == 0) {\r\n                    pos = i;\r\n                    count++;\r\n                }\r\n            }\r\n            if (count > 1) {\r\n                this.values[this.index] += v;\r\n            } else if (count == 1) {\r\n                // Jump number of chars\r\n                var t = (a[pos].length - this.values[this.index].length) - 1;\r\n                this.position += t;\r\n\r\n                this.values[this.index] = a[pos];\r\n                this.index++;\r\n                return pos;\r\n            }\r\n        },\r\n        'MMM': function(v) {\r\n            var ret = parser.FIND.call(this, v, months);\r\n            if (ret !== undefined) {\r\n                this.date[1] = ret + 1;\r\n            }\r\n        },\r\n        'MMMM': function(v) {\r\n            var ret = parser.FIND.call(this, v, monthsFull);\r\n            if (ret !== undefined) {\r\n                this.date[1] = ret + 1;\r\n            }\r\n        },\r\n        'MMMMM': function(v) {\r\n            if (isBlank(this.values[this.index])) {\r\n                this.values[this.index] = '';\r\n            }\r\n            var pos = 0;\r\n            var count = 0;\r\n            var value = (this.values[this.index] + v).toLowerCase();\r\n            for (var i = 0; i < monthsFull.length; i++) {\r\n                if (monthsFull[i][0].toLowerCase().indexOf(value) == 0) {\r\n                    this.values[this.index] = monthsFull[i][0];\r\n                    this.date[1] = i + 1;\r\n                    this.index++;\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n        'MM': function(v) {\r\n            if (isBlank(this.values[this.index])) {\r\n                if (parseInt(v) > 1 && parseInt(v) < 10) {\r\n                    this.date[1] = this.values[this.index] = '0' + v;\r\n                    this.index++;\r\n                } else if (parseInt(v) < 2) {\r\n                    this.values[this.index] = v;\r\n                }\r\n            } else {\r\n                if (this.values[this.index] == 1 && parseInt(v) < 3) {\r\n                    this.date[1] = this.values[this.index] += v;\r\n                    this.index++;\r\n                } else if (this.values[this.index] == 0 && parseInt(v) > 0 && parseInt(v) < 10) {\r\n                    this.date[1] = this.values[this.index] += v;\r\n                    this.index++;\r\n                }\r\n            }\r\n        },\r\n        'M': function(v) {\r\n            var test = false;\r\n            if (parseInt(v) >= 0 && parseInt(v) < 10) {\r\n                if (isBlank(this.values[this.index])) {\r\n                    this.values[this.index] = v;\r\n                    if (v > 1) {\r\n                        this.date[1] = this.values[this.index];\r\n                        this.index++;\r\n                    }\r\n                } else {\r\n                    if (this.values[this.index] == 1 && parseInt(v) < 3) {\r\n                        this.date[1] = this.values[this.index] += v;\r\n                        this.index++;\r\n                    } else if (this.values[this.index] == 0 && parseInt(v) > 0) {\r\n                        this.date[1] = this.values[this.index] += v;\r\n                        this.index++;\r\n                    } else {\r\n                        var test = true;\r\n                    }\r\n                }\r\n            } else {\r\n                var test = true;\r\n            }\r\n\r\n            // Re-test\r\n            if (test == true) {\r\n                var t = parseInt(this.values[this.index]);\r\n                if (t > 0 && t < 12) {\r\n                    this.date[2] = this.values[this.index];\r\n                    this.index++;\r\n                    // Repeat the character\r\n                    this.position--;\r\n                }\r\n            }\r\n        },\r\n        'D': function(v) {\r\n            var test = false;\r\n            if (parseInt(v) >= 0 && parseInt(v) < 10) {\r\n                if (isBlank(this.values[this.index])) {\r\n                    this.values[this.index] = v;\r\n                    if (parseInt(v) > 3) {\r\n                        this.date[2] = this.values[this.index];\r\n                        this.index++;\r\n                    }\r\n                } else {\r\n                    if (this.values[this.index] == 3 && parseInt(v) < 2) {\r\n                        this.date[2] = this.values[this.index] += v;\r\n                        this.index++;\r\n                    } else if (this.values[this.index] == 1 || this.values[this.index] == 2) {\r\n                        this.date[2] = this.values[this.index] += v;\r\n                        this.index++;\r\n                    } else if (this.values[this.index] == 0 && parseInt(v) > 0) {\r\n                        this.date[2] = this.values[this.index] += v;\r\n                        this.index++;\r\n                    } else {\r\n                        var test = true;\r\n                    }\r\n                }\r\n            } else {\r\n                var test = true;\r\n            }\r\n\r\n            // Re-test\r\n            if (test == true) {\r\n                var t = parseInt(this.values[this.index]);\r\n                if (t > 0 && t < 32) {\r\n                    this.date[2] = this.values[this.index];\r\n                    this.index++;\r\n                    // Repeat the character\r\n                    this.position--;\r\n                }\r\n            }\r\n        },\r\n        'DD': function(v) {\r\n            if (isBlank(this.values[this.index])) {\r\n                if (parseInt(v) > 3 && parseInt(v) < 10) {\r\n                    this.date[2] = this.values[this.index] = '0' + v;\r\n                    this.index++;\r\n                } else if (parseInt(v) < 10) {\r\n                    this.values[this.index] = v;\r\n                }\r\n            } else {\r\n                if (this.values[this.index] == 3 && parseInt(v) < 2) {\r\n                    this.date[2] = this.values[this.index] += v;\r\n                    this.index++;\r\n                } else if ((this.values[this.index] == 1 || this.values[this.index] == 2) && parseInt(v) < 10) {\r\n                    this.date[2] = this.values[this.index] += v;\r\n                    this.index++;\r\n                } else if (this.values[this.index] == 0 && parseInt(v) > 0 && parseInt(v) < 10) {\r\n                    this.date[2] = this.values[this.index] += v;\r\n                    this.index++;\r\n                }\r\n            }\r\n        },\r\n        'DDD': function(v) {\r\n            parser.FIND.call(this, v, weekDays);\r\n        },\r\n        'DDDD': function(v) {\r\n            parser.FIND.call(this, v, weekDaysFull);\r\n        },\r\n        'HH12': function(v, two) {\r\n            if (isBlank(this.values[this.index])) {\r\n                if (parseInt(v) > 1 && parseInt(v) < 10) {\r\n                    if (two) {\r\n                        v = 0 + v;\r\n                    }\r\n                    this.date[3] = this.values[this.index] = v;\r\n                    this.index++;\r\n                } else if (parseInt(v) < 10) {\r\n                    this.values[this.index] = v;\r\n                }\r\n            } else {\r\n                if (this.values[this.index] == 1 && parseInt(v) < 3) {\r\n                    this.date[3] = this.values[this.index] += v;\r\n                    this.index++;\r\n                } else if (this.values[this.index] < 1 && parseInt(v) < 10) {\r\n                    this.date[3] = this.values[this.index] += v;\r\n                    this.index++;\r\n                }\r\n            }\r\n        },\r\n        'HH24': function(v, two) {\r\n            var test = false;\r\n            if (parseInt(v) >= 0 && parseInt(v) < 10) {\r\n                if (this.values[this.index] == null || this.values[this.index] == '') {\r\n                    if (parseInt(v) > 2 && parseInt(v) < 10) {\r\n                        if (two) {\r\n                            v = 0 + v;\r\n                        }\r\n                        this.date[3] = this.values[this.index] = v;\r\n                        this.index++;\r\n                    } else if (parseInt(v) < 10) {\r\n                        this.values[this.index] = v;\r\n                    }\r\n                } else {\r\n                    if (this.values[this.index] == 2 && parseInt(v) < 4) {\r\n                        this.date[3] = this.values[this.index] += v;\r\n                        this.index++;\r\n                    } else if (this.values[this.index] < 2 && parseInt(v) < 10) {\r\n                        this.date[3] = this.values[this.index] += v;\r\n                        this.index++;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        'HH': function(v) {\r\n            parser['HH24'].call(this, v, 1);\r\n        },\r\n        'H': function(v) {\r\n            parser['HH24'].call(this, v, 0);\r\n        },\r\n        '\\\\[H\\\\]': function(v) {\r\n            if (this.values[this.index] == undefined) {\r\n                this.values[this.index] = '';\r\n            }\r\n            if (v.match(/[0-9]/g)) {\r\n                this.date[3] = this.values[this.index] += v;\r\n            } else {\r\n                if (this.values[this.index].match(/[0-9]/g)) {\r\n                    this.date[3] = this.values[this.index];\r\n                    this.index++;\r\n                    // Repeat the character\r\n                    this.position--;\r\n                }\r\n            }\r\n        },\r\n        'N60': function(v, i) {\r\n            if (this.values[this.index] == null || this.values[this.index] == '') {\r\n                if (parseInt(v) > 5 && parseInt(v) < 10) {\r\n                    this.date[i] = this.values[this.index] = '0' + v;\r\n                    this.index++;\r\n                } else if (parseInt(v) < 10) {\r\n                    this.values[this.index] = v;\r\n                }\r\n            } else {\r\n                if (parseInt(v) < 10) {\r\n                    this.date[i] = this.values[this.index] += v;\r\n                    this.index++;\r\n                 }\r\n            }\r\n        },\r\n        'MI': function(v) {\r\n            parser.N60.call(this, v, 4);\r\n        },\r\n        'SS': function(v) {\r\n            parser.N60.call(this, v, 5);\r\n        },\r\n        'AM/PM': function(v) {\r\n            this.values[this.index] = '';\r\n            if (v) {\r\n                if (this.date[3] > 12) {\r\n                    this.values[this.index] = 'PM';\r\n                } else {\r\n                    this.values[this.index] = 'AM';\r\n                }\r\n            }\r\n            this.index++;\r\n        },\r\n        'WD': function(v) {\r\n            if (typeof(this.values[this.index]) === 'undefined') {\r\n                this.values[this.index] = '';\r\n            }\r\n            if (parseInt(v) >= 0 && parseInt(v) < 7) {\r\n                this.values[this.index] = v;\r\n            }\r\n            if (this.value[this.index].length == 1) {\r\n                this.index++;\r\n            }\r\n        },\r\n        '0{1}(.{1}0+)?': function(v) {\r\n            // Get decimal\r\n            var decimal = getDecimal.call(this);\r\n            // Negative number\r\n            var neg = false;\r\n            // Create if is blank\r\n            if (isBlank(this.values[this.index])) {\r\n                this.values[this.index] = '';\r\n            } else {\r\n                if (this.values[this.index] == '-') {\r\n                    neg = true;\r\n                }\r\n            }\r\n            var current = ParseValue.call(this, this.values[this.index], decimal);\r\n            if (current) {\r\n                this.values[this.index] = current.join(decimal);\r\n            }\r\n            // New entry\r\n            if (parseInt(v) >= 0 && parseInt(v) < 10) {\r\n                if (this.values[this.index] != '0' || v == decimal) {\r\n                    this.values[this.index] += v;\r\n                }\r\n            } else if (decimal && v == decimal) {\r\n                if (this.values[this.index].indexOf(decimal) == -1) {\r\n                    if (! this.values[this.index]) {\r\n                        this.values[this.index] = '0';\r\n                    }\r\n                    this.values[this.index] += v;\r\n                }\r\n            } else if (v == '-') {\r\n                // Negative signed\r\n                neg = true;\r\n            }\r\n\r\n            if (neg === true && this.values[this.index][0] !== '-') {\r\n                this.values[this.index] = '-' + this.values[this.index];\r\n            }\r\n        },\r\n        '0{1}(.{1}0+)?%': function(v) {\r\n            parser['0{1}(.{1}0+)?'].call(this, v);\r\n\r\n            if (this.values[this.index].match(/[\\-0-9]/g)) {\r\n                if (this.values[this.index] && this.values[this.index].indexOf('%') == -1) {\r\n                    this.values[this.index] += '%';\r\n                }\r\n            } else {\r\n                this.values[this.index] = '';\r\n            }\r\n        },\r\n        '#(.{1})##0?(.{1}0+)?( ?;(.*)?)?': function(v) {\r\n            // Parse number\r\n            parser['0{1}(.{1}0+)?'].call(this, v);\r\n            // Get decimal\r\n            var decimal = getDecimal.call(this);\r\n            // Get separator\r\n            var separator = this.tokens[this.index].substr(1,1);\r\n            // Negative\r\n            var negative = this.values[this.index][0] === '-' ? true : false;\r\n            // Current value\r\n            var current = ParseValue.call(this, this.values[this.index], decimal);\r\n\r\n            // Get main and decimal parts\r\n            if (current !== '') {\r\n                // Format number\r\n                var n = current[0].match(/[0-9]/g);\r\n                if (n) {\r\n                    // Format\r\n                    n = n.join('');\r\n                    var t = [];\r\n                    var s = 0;\r\n                    for (var j = n.length - 1; j >= 0 ; j--) {\r\n                        t.push(n[j]);\r\n                        s++;\r\n                        if (! (s % 3)) {\r\n                            t.push(separator);\r\n                        }\r\n                    }\r\n                    t = t.reverse();\r\n                    current[0] = t.join('');\r\n                    if (current[0].substr(0,1) == separator) {\r\n                        current[0] = current[0].substr(1);\r\n                    }\r\n                } else {\r\n                    current[0] = '';\r\n                }\r\n\r\n                // Value\r\n                this.values[this.index] = current.join(decimal);\r\n\r\n                // Negative\r\n                if (negative) {\r\n                    this.values[this.index] = '-' + this.values[this.index];\r\n                }\r\n            }\r\n        },\r\n        '0': function(v) {\r\n            if (v.match(/[0-9]/g)) {\r\n                this.values[this.index] = v;\r\n                this.index++;\r\n            }\r\n        },\r\n        '[0-9a-zA-Z$]+': function(v) {\r\n            if (isBlank(this.values[this.index])) {\r\n                this.values[this.index] = '';\r\n            }\r\n            var t = this.tokens[this.index];\r\n            var s = this.values[this.index];\r\n            var i = s.length;\r\n\r\n            if (t[i] == v) {\r\n                this.values[this.index] += v;\r\n\r\n                if (this.values[this.index] == t) {\r\n                    this.index++;\r\n                }\r\n            } else {\r\n                this.values[this.index] = t;\r\n                this.index++;\r\n\r\n                if (v.match(/[\\-0-9]/g)) {\r\n                    // Repeat the character\r\n                    this.position--;\r\n                }\r\n            }\r\n        },\r\n        'A': function(v) {\r\n            if (v.match(/[a-zA-Z]/gi)) {\r\n                this.values[this.index] = v;\r\n                this.index++;\r\n            }\r\n        },\r\n        '.': function(v) {\r\n            parser['[0-9a-zA-Z$]+'].call(this, v);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the tokens in the mask string\r\n     */\r\n    var getTokens = function(str) {\r\n        if (this.type == 'general') {\r\n            var t = [].concat(tokens.general);\r\n        } else {\r\n            var t = [].concat(tokens.currency, tokens.datetime, tokens.percentage, tokens.numeric, tokens.general);\r\n        }\r\n        // Expression to extract all tokens from the string\r\n        var e = new RegExp(t.join('|'), 'gi');\r\n        // Extract\r\n        return str.match(e);\r\n    }\r\n\r\n    /**\r\n     * Get the method of one given token\r\n     */\r\n    var getMethod = function(str) {\r\n        if (! this.type) {\r\n            var types = Object.keys(tokens);\r\n        } else if (this.type == 'general') {\r\n            var types = [ 'general' ];\r\n        } else if (this.type == 'datetime') {\r\n            var types = [ 'numeric', 'datetime', 'general' ];\r\n        } else {\r\n            var types = [ 'currency', 'percentage', 'numeric', 'general' ];\r\n        }\r\n\r\n        // Found\r\n        for (var i = 0; i < types.length; i++) {\r\n            var type = types[i];\r\n            for (var j = 0; j < tokens[type].length; j++) {\r\n                var e = new RegExp(tokens[type][j], 'gi');\r\n                var r = str.match(e);\r\n                if (r) {\r\n                    return { type: type, method: tokens[type][j] }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Identify each method for each token\r\n     */\r\n    var getMethods = function(t) {\r\n        var result = [];\r\n        for (var i = 0; i < t.length; i++) {\r\n            var m = getMethod.call(this, t[i]);\r\n            if (m) {\r\n                result.push(m.method);\r\n            } else {\r\n                result.push(null);\r\n            }\r\n        }\r\n\r\n        // Compatibility with excel\r\n        for (var i = 0; i < result.length; i++) {\r\n            if (result[i] == 'MM') {\r\n                // Not a month, correct to minutes\r\n                if (result[i-1] && result[i-1].indexOf('H') >= 0) {\r\n                    result[i] = 'MI';\r\n                } else if (result[i-2] && result[i-2].indexOf('H') >= 0) {\r\n                    result[i] = 'MI';\r\n                } else if (result[i+1] && result[i+1].indexOf('S') >= 0) {\r\n                    result[i] = 'MI';\r\n                } else if (result[i+2] && result[i+2].indexOf('S') >= 0) {\r\n                    result[i] = 'MI';\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Get the type for one given token\r\n     */\r\n    var getType = function(str) {\r\n        var m = getMethod.call(this, str);\r\n        if (m) {\r\n            var type = m.type;\r\n        }\r\n\r\n        if (type) {\r\n            var numeric = 0;\r\n            // Make sure the correct type\r\n            var t = getTokens.call(this, str);\r\n            for (var i = 0; i < t.length; i++) {\r\n                m = getMethod.call(this, t[i]);\r\n                if (m && isNumeric(m.type)) {\r\n                    numeric++;\r\n                }\r\n            }\r\n            if (numeric > 1) {\r\n                type = 'general';\r\n            }\r\n        }\r\n\r\n        return type;\r\n    }\r\n\r\n    /**\r\n     * Parse character per character using the detected tokens in the mask\r\n     */\r\n    var parse = function() {\r\n        // Parser method for this position\r\n        if (typeof(parser[this.methods[this.index]]) == 'function') {\r\n            parser[this.methods[this.index]].call(this, this.value[this.position]);\r\n            this.position++;\r\n        } else {\r\n            this.values[this.index] = this.tokens[this.index];\r\n            this.index++;\r\n        }\r\n    }\r\n\r\n    var isFormula = function(value) {\r\n        var v = (''+value)[0];\r\n        return v == '=' ? true : false;\r\n    }\r\n\r\n    var toPlainString = function(num) {\r\n        return (''+ +num).replace(/(-?)(\\d*)\\.?(\\d*)e([+-]\\d+)/,\r\n          function(a,b,c,d,e) {\r\n            return e < 0\r\n              ? b + '0.' + Array(1-e-c.length).join(0) + c + d\r\n              : b + c + d + Array(e-d.length+1).join(0);\r\n          });\r\n    }\r\n\r\n    /**\r\n     * Mask function\r\n     * @param {mixed|string} JS input or a string to be parsed\r\n     * @param {object|string} When the first param is a string, the second is the mask or object with the mask options\r\n     */\r\n    var obj = function(e, config, returnObject) {\r\n        // Options\r\n        var r = null;\r\n        var t = null;\r\n        var o = {\r\n            // Element\r\n            input: null,\r\n            // Current value\r\n            value: null,\r\n            // Mask options\r\n            options: {},\r\n            // New values for each token found\r\n            values: [],\r\n            // Token position\r\n            index: 0,\r\n            // Character position\r\n            position: 0,\r\n            // Date raw values\r\n            date: [0,0,0,0,0,0],\r\n            // Raw number for the numeric values\r\n            number: 0,\r\n        }\r\n\r\n        // This is a JavaScript Event\r\n        if (typeof(e) == 'object') {\r\n            // Element\r\n            o.input = e.target;\r\n            // Current value\r\n            o.value = Value.call(e.target);\r\n            // Current caret position\r\n            o.caret = Caret.call(e.target);\r\n            // Mask\r\n            if (t = e.target.getAttribute('data-mask')) {\r\n                o.mask = t;\r\n            }\r\n            // Type\r\n            if (t = e.target.getAttribute('data-type')) {\r\n                o.type = t;\r\n            }\r\n            // Options\r\n            if (e.target.mask) {\r\n                if (e.target.mask.options) {\r\n                    o.options = e.target.mask.options;\r\n                }\r\n                if (e.target.mask.locale) {\r\n                    o.locale = e.target.mask.locale;\r\n                }\r\n            } else {\r\n                // Locale\r\n                if (t = e.target.getAttribute('data-locale')) {\r\n                    o.locale = t;\r\n                    if (o.mask) {\r\n                        o.options.style = o.mask;\r\n                    }\r\n                }\r\n            }\r\n            // Extra configuration\r\n            if (e.target.attributes && e.target.attributes.length) {\r\n                for (var i = 0; i < e.target.attributes.length; i++) {\r\n                    var k = e.target.attributes[i].name;\r\n                    var v = e.target.attributes[i].value;\r\n                    if (k.substr(0,4) == 'data') {\r\n                        o.options[k.substr(5)] = v;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            // Options\r\n            if (typeof(config) == 'string') {\r\n                // Mask\r\n                o.mask = config;\r\n            } else {\r\n                // Mask\r\n                var k = Object.keys(config);\r\n                for (var i = 0; i < k.length; i++) {\r\n                    o[k[i]] = config[k[i]];\r\n                }\r\n            }\r\n\r\n            if (typeof(e) === 'number') {\r\n                // Get decimal\r\n                getDecimal.call(o, o.mask);\r\n                // Replace to the correct decimal\r\n                e = (''+e).replace('.', o.options.decimal);\r\n            }\r\n\r\n            // Current\r\n            o.value = e;\r\n\r\n            if (o.input) {\r\n                // Value\r\n                Value.call(o.input, e);\r\n                // Focus\r\n                jSuites.focus(o.input);\r\n                // Caret\r\n                o.caret = Caret.call(o.input);\r\n            }\r\n        }\r\n\r\n        // Mask detected start the process\r\n        if (! isFormula(o.value) && (o.mask || o.locale)) {\r\n            // Compatibility ixes\r\n            if (o.mask) {\r\n                // Legacy\r\n                o.mask = o.mask.replace('[-]', '');\r\n                // Excel mask TODO: Improve\r\n                if (o.mask.indexOf('##') !== -1) {\r\n                    var d = o.mask.split(';');\r\n                    if (d[0]) {\r\n                        d[0] = d[0].replace('*', '');\r\n                        d[0] = d[0].replace(/_/g, '');\r\n                        d[0] = d[0].replace(/-/g, '');\r\n                        d[0] = d[0].replace('(','');\r\n                        d[0] = d[0].replace(')','');\r\n                        d[0] = d[0].replace('##0.###','##0.000');\r\n                        d[0] = d[0].replace('##0.##','##0.00');\r\n                        d[0] = d[0].replace('##0.#','##0.0');\r\n                    }\r\n                    o.mask = d[0];\r\n                }\r\n                // Get type\r\n                if (! o.type) {\r\n                    o.type = getType.call(o, o.mask);\r\n                }\r\n                // Get tokens\r\n                o.tokens = getTokens.call(o, o.mask);\r\n            }\r\n            // On new input\r\n            if (typeof(e) !== 'object' || ! e.inputType || e.inputType == 'insertText' || e.inputType == 'insertFromPaste') {\r\n                // Start tranformation\r\n                if (o.locale) {\r\n                    if (o.input) {\r\n                        Format.call(o, o.input);\r\n                    } else {\r\n                        var newValue = FormatValue.call(o, o.value);\r\n                    }\r\n                } else {\r\n                    // Get tokens\r\n                    o.methods = getMethods.call(o, o.tokens);\r\n                    // Go through all tokes\r\n                    while (o.position < o.value.length && typeof(o.tokens[o.index]) !== 'undefined') {\r\n                        // Get the approate parser\r\n                        parse.call(o);\r\n                    }\r\n\r\n                    if (isNumeric(o.type)) {\r\n                        // Complement things in the end of the mask\r\n                        while (typeof(o.tokens[o.index]) !== 'undefined') {\r\n                            var t = getMethod.call(o, o.tokens[o.index]);\r\n                            if (t && t.type == 'general') {\r\n                                o.values[o.index] = o.tokens[o.index];\r\n                            }\r\n                            o.index++;\r\n                        }\r\n\r\n                        var adjustNumeric = true;\r\n                    } else {\r\n                        var adjustNumeric = false;\r\n                    }\r\n\r\n                    // New value\r\n                    var newValue = o.values.join('');\r\n\r\n                    // Reset value\r\n                    if (o.input) {\r\n                        t = newValue.length - o.value.length;\r\n                        if (t > 0) {\r\n                            var caret = o.caret + t;\r\n                        } else {\r\n                            var caret = o.caret;\r\n                        }\r\n                        Value.call(o.input, newValue, caret, adjustNumeric);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Update raw data\r\n            if (o.input) {\r\n                var label = null;\r\n                if (isNumeric(o.type)) {\r\n                    // Extract the number\r\n                    o.number = Extract.call(o, Value.call(o.input));\r\n                    // Keep the raw data as a property of the tag\r\n                    if (o.type == 'percentage') {\r\n                        label = o.number / 100;\r\n                    } else {\r\n                        label = o.number;\r\n                    }\r\n                } else if (o.type == 'datetime') {\r\n                    label = getDate.call(o);\r\n\r\n                    if (o.date[0] && o.date[1] && o.date[2]) {\r\n                        o.input.setAttribute('data-completed', true);\r\n                    }\r\n                }\r\n\r\n                if (label) {\r\n                    o.input.setAttribute('data-value', label);\r\n                }\r\n            }\r\n\r\n            if (newValue !== undefined) {\r\n                if (returnObject) {\r\n                    return o;\r\n                } else {\r\n                    return newValue;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Extract the tokens from a mask\r\n    obj.prepare = function(str, o) {\r\n        if (! o) {\r\n            o = {};\r\n        }\r\n        return getTokens.call(o, str);\r\n    }\r\n\r\n    /**\r\n     * Apply the mask to a element (legacy)\r\n     */\r\n    obj.apply = function(e) {\r\n        var v = Value.call(e.target);\r\n        if (e.key.length == 1) {\r\n            v += e.key;\r\n        }\r\n        Value.call(e.target, obj(v, e.target.getAttribute('data-mask')));\r\n    }\r\n\r\n    /**\r\n     * Legacy support\r\n     */\r\n    obj.run = function(value, mask, decimal) {\r\n        return obj(value, { mask: mask, decimal: decimal });\r\n    }\r\n\r\n    /**\r\n     * Extract number from masked string\r\n     */\r\n    obj.extract = function(v, options, returnObject) {\r\n        if (isBlank(v)) {\r\n            return v;\r\n        }\r\n        if (typeof(options) != 'object') {\r\n            return value;\r\n        } else {\r\n            if (! options.options) {\r\n                options.options = {};\r\n            }\r\n        }\r\n\r\n        // Compatibility\r\n        if (! options.mask && options.format) {\r\n            options.mask = options.format;\r\n        }\r\n\r\n        // Get decimal\r\n        getDecimal.call(options, options.mask);\r\n\r\n        var type = null;\r\n        if (options.type == 'percent' || options.options.style == 'percent') {\r\n            type = 'percentage';\r\n        } else if (options.mask) {\r\n            type = getType.call(options, options.mask);\r\n        }\r\n\r\n\r\n        if (type === 'datetime') {\r\n            if (v instanceof Date) {\r\n                var t = jSuites.calendar.getDateString(value, options.mask);\r\n            }\r\n\r\n            var o = obj(v, options, true);\r\n            var value = getDate.call(o);\r\n            if ((o.date[0] && o.date[1] && o.date[2]) && ! (o.date[3] || o.date[4] || o.date[5])) {\r\n                var t = jSuites.calendar.now(o.date);\r\n                value = jSuites.calendar.dateToNum(t);\r\n            }\r\n        } else {\r\n            var value = Extract.call(options, v);\r\n            // Percentage\r\n            if (type == 'percentage') {\r\n                value /= 100;\r\n            }\r\n            var o = options;\r\n        }\r\n\r\n        o.value = value;\r\n\r\n        if (returnObject) {\r\n            return o;\r\n        } else {\r\n            return value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Render\r\n     */\r\n    obj.render = function(value, options, fullMask) {\r\n        if (isBlank(value)) {\r\n            return value;\r\n        }\r\n\r\n        if (typeof(options) != 'object') {\r\n            return value;\r\n        } else {\r\n            if (! options.options) {\r\n                options.options = {};\r\n            }\r\n        }\r\n\r\n        // Compatibility\r\n        if (! options.mask && options.format) {\r\n            options.mask = options.format;\r\n        }\r\n\r\n        var type = null;\r\n        if (options.type == 'percent' || options.options.style == 'percent') {\r\n            type = 'percentage';\r\n        } else if (options.mask) {\r\n            type = getType.call(options, options.mask);\r\n        } else if (value instanceof Date) {\r\n            type = 'datetime';\r\n        }\r\n\r\n        // Fill with blanks\r\n        var fillWithBlanks = false;\r\n\r\n        if (type =='datetime' || options.type == 'calendar') {\r\n            var t = jSuites.calendar.getDateString(value, options.mask);\r\n            if (t) {\r\n                value = t;\r\n            }\r\n\r\n            if (options.mask && fullMask) {\r\n                fillWithBlanks = true;\r\n            }\r\n        } else {\r\n            // Percentage\r\n            if (type == 'percentage') {\r\n                value *= 100;\r\n            }\r\n            // Number of decimal places\r\n            if (typeof(value) === 'number') {\r\n                var t = null;\r\n                if (options.mask && fullMask) {\r\n                    var e = new RegExp('0{1}(.{1})0+', 'ig');\r\n                    var d = options.mask.match(e);\r\n                    if (d && d[0]) {\r\n                        d = d[0].length - 2;\r\n                        t = value.toFixed(d);\r\n                    } else {\r\n                        t = (''+value);\r\n                    }\r\n                } else if (options.locale && fullMask) {\r\n                    var d = (''+value).split('.');\r\n                    if (! d[1]) {\r\n                        d[1] = '00';\r\n                    } else {\r\n                        if (d[1].length == 1) {\r\n                            d[1] += '0';\r\n                        }\r\n                    }\r\n                    t = d.join('.');\r\n                } else {\r\n                    t = toPlainString(value);\r\n                }\r\n\r\n                if (t !== null) {\r\n                    value = t;\r\n                    // Get decimal\r\n                    getDecimal.call(options, options.mask);\r\n                    // Replace to the correct decimal\r\n                    if (options.options.decimal) {\r\n                        value = value.replace('.', options.options.decimal);\r\n                    }\r\n                }\r\n            } else {\r\n                if (options.mask && fullMask) {\r\n                    fillWithBlanks = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (fillWithBlanks) {\r\n            var s = options.mask.length - value.length;\r\n            if (s > 0) {\r\n                for (var i = 0; i < s; i++) {\r\n                    value += ' ';\r\n                }\r\n            }\r\n        }\r\n\r\n        value = obj(value, options);\r\n\r\n        return value;\r\n    }\r\n\r\n    obj.set = function(e, m) {\r\n        if (m) {\r\n            e.setAttribute('data-mask', m);\r\n            // Reset the value\r\n            var event = new Event('input', {\r\n                bubbles: true,\r\n                cancelable: true,\r\n            });\r\n            e.dispatchEvent(event);\r\n        }\r\n    }\r\n\r\n    if (typeof document !== 'undefined') {\r\n        document.addEventListener('input', function(e) {\r\n            if (e.target.getAttribute('data-mask') || e.target.mask) {\r\n                obj(e);\r\n            }\r\n        });\r\n    }\r\n\r\n    return obj;\r\n})();\r\n\r\njSuites.modal = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    // Default configuration\r\n    var defaults = {\r\n        url: null,\r\n        onopen: null,\r\n        onclose: null,\r\n        closed: false,\r\n        width: null,\r\n        height: null,\r\n        title: null,\r\n        padding: null,\r\n    };\r\n\r\n    // Loop through our object\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    // Title\r\n    if (! obj.options.title && el.getAttribute('title')) {\r\n        obj.options.title = el.getAttribute('title');\r\n    }\r\n\r\n    var temp = document.createElement('div');\r\n    while (el.children[0]) {\r\n        temp.appendChild(el.children[0]);\r\n    }\r\n\r\n    obj.content = document.createElement('div');\r\n    obj.content.className = 'jmodal_content';\r\n    obj.content.innerHTML = el.innerHTML;\r\n\r\n    while (temp.children[0]) {\r\n        obj.content.appendChild(temp.children[0]);\r\n    }\r\n\r\n    obj.container = document.createElement('div');\r\n    obj.container.className = 'jmodal';\r\n    obj.container.appendChild(obj.content);\r\n\r\n    if (obj.options.padding) {\r\n        obj.content.style.padding = obj.options.padding;\r\n    }\r\n    if (obj.options.width) {\r\n        obj.container.style.width = obj.options.width;\r\n    }\r\n    if (obj.options.height) {\r\n        obj.container.style.height = obj.options.height;\r\n    }\r\n    if (obj.options.title) {\r\n        obj.container.setAttribute('title', obj.options.title);\r\n    } else {\r\n        obj.container.classList.add('no-title');\r\n    }\r\n    el.innerHTML = '';\r\n    el.style.display = 'none';\r\n    el.appendChild(obj.container);\r\n\r\n    // Backdrop\r\n    var backdrop = document.createElement('div');\r\n    backdrop.className = 'jmodal_backdrop';\r\n    backdrop.onclick = function() {\r\n        obj.close();\r\n    }\r\n    el.appendChild(backdrop);\r\n\r\n    obj.open = function() {\r\n        el.style.display = 'block';\r\n        // Fullscreen\r\n        var rect = obj.container.getBoundingClientRect();\r\n        if (jSuites.getWindowWidth() < rect.width) {\r\n            obj.container.style.top = '';\r\n            obj.container.style.left = '';\r\n            obj.container.classList.add('jmodal_fullscreen');\r\n            jSuites.animation.slideBottom(obj.container, 1);\r\n        } else {\r\n            backdrop.style.display = 'block';\r\n        }\r\n        // Current\r\n        jSuites.modal.current = obj;\r\n        // Event\r\n        if (typeof(obj.options.onopen) == 'function') {\r\n            obj.options.onopen(el, obj);\r\n        }\r\n    }\r\n\r\n    obj.resetPosition = function() {\r\n        obj.container.style.top = '';\r\n        obj.container.style.left = '';\r\n    }\r\n\r\n    obj.isOpen = function() {\r\n        return el.style.display != 'none' ? true : false;\r\n    }\r\n\r\n    obj.close = function() {\r\n        el.style.display = 'none';\r\n        // Backdrop\r\n        backdrop.style.display = '';\r\n        // Current\r\n        jSuites.modal.current = null;\r\n        // Remove fullscreen class\r\n        obj.container.classList.remove('jmodal_fullscreen');\r\n        // Event\r\n        if (typeof(obj.options.onclose) == 'function') {\r\n            obj.options.onclose(el, obj);\r\n        }\r\n    }\r\n\r\n    if (! jSuites.modal.hasEvents) {\r\n        jSuites.modal.current = obj;\r\n\r\n        if ('ontouchstart' in document.documentElement === true) {\r\n            document.addEventListener(\"touchstart\", jSuites.modal.mouseDownControls);\r\n        } else {\r\n            document.addEventListener('mousedown', jSuites.modal.mouseDownControls);\r\n            document.addEventListener('mousemove', jSuites.modal.mouseMoveControls);\r\n            document.addEventListener('mouseup', jSuites.modal.mouseUpControls);\r\n        }\r\n\r\n        document.addEventListener('keydown', jSuites.modal.keyDownControls);\r\n\r\n        jSuites.modal.hasEvents = true;\r\n    }\r\n\r\n    if (obj.options.url) {\r\n        jSuites.ajax({\r\n            url: obj.options.url,\r\n            method: 'GET',\r\n            dataType: 'text/html',\r\n            success: function(data) {\r\n                obj.content.innerHTML = data;\r\n\r\n                if (! obj.options.closed) {\r\n                    obj.open();\r\n                }\r\n            }\r\n        });\r\n    } else {\r\n        if (! obj.options.closed) {\r\n            obj.open();\r\n        }\r\n    }\r\n\r\n    // Keep object available from the node\r\n    el.modal = obj;\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.modal.current = null;\r\njSuites.modal.position = null;\r\n\r\njSuites.modal.keyDownControls = function(e) {\r\n    if (e.which == 27) {\r\n        if (jSuites.modal.current) {\r\n            jSuites.modal.current.close();\r\n        }\r\n    }\r\n}\r\n\r\njSuites.modal.mouseUpControls = function(e) {\r\n    if (jSuites.modal.current) {\r\n        jSuites.modal.current.container.style.cursor = 'auto';\r\n    }\r\n    jSuites.modal.position = null;\r\n}\r\n\r\njSuites.modal.mouseMoveControls = function(e) {\r\n    if (jSuites.modal.current && jSuites.modal.position) {\r\n        if (e.which == 1 || e.which == 3) {\r\n            var position = jSuites.modal.position;\r\n            jSuites.modal.current.container.style.top = (position[1] + (e.clientY - position[3]) + (position[5] / 2)) + 'px';\r\n            jSuites.modal.current.container.style.left = (position[0] + (e.clientX - position[2]) + (position[4] / 2)) + 'px';\r\n            jSuites.modal.current.container.style.cursor = 'move';\r\n        } else {\r\n            jSuites.modal.current.container.style.cursor = 'auto';\r\n        }\r\n    }\r\n}\r\n\r\njSuites.modal.mouseDownControls = function(e) {\r\n    jSuites.modal.position = [];\r\n\r\n    if (e.target.classList.contains('jmodal')) {\r\n        setTimeout(function() {\r\n            // Get target info\r\n            var rect = e.target.getBoundingClientRect();\r\n\r\n            if (e.changedTouches && e.changedTouches[0]) {\r\n                var x = e.changedTouches[0].clientX;\r\n                var y = e.changedTouches[0].clientY;\r\n            } else {\r\n                var x = e.clientX;\r\n                var y = e.clientY;\r\n            }\r\n\r\n            if (rect.width - (x - rect.left) < 50 && (y - rect.top) < 50) {\r\n                setTimeout(function() {\r\n                    jSuites.modal.current.close();\r\n                }, 100);\r\n            } else {\r\n                if (e.target.getAttribute('title') && (y - rect.top) < 50) {\r\n                    if (document.selection) {\r\n                        document.selection.empty();\r\n                    } else if ( window.getSelection ) {\r\n                        window.getSelection().removeAllRanges();\r\n                    }\r\n\r\n                    jSuites.modal.position = [\r\n                        rect.left,\r\n                        rect.top,\r\n                        e.clientX,\r\n                        e.clientY,\r\n                        rect.width,\r\n                        rect.height,\r\n                    ];\r\n                }\r\n            }\r\n        }, 100);\r\n    }\r\n}\r\n\r\n\r\njSuites.notification = (function(options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    // Default configuration\r\n    var defaults = {\r\n        icon: null,\r\n        name: 'Notification',\r\n        date: null,\r\n        error: null,\r\n        title: null,\r\n        message: null,\r\n        timeout: 4000,\r\n        autoHide: true,\r\n        closeable: true,\r\n    };\r\n\r\n    // Loop through our object\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    var notification = document.createElement('div');\r\n    notification.className = 'jnotification';\r\n\r\n    if (obj.options.error) {\r\n        notification.classList.add('jnotification-error');\r\n    }\r\n\r\n    var notificationContainer = document.createElement('div');\r\n    notificationContainer.className = 'jnotification-container';\r\n    notification.appendChild(notificationContainer);\r\n\r\n    var notificationHeader = document.createElement('div');\r\n    notificationHeader.className = 'jnotification-header';\r\n    notificationContainer.appendChild(notificationHeader);\r\n\r\n    var notificationImage = document.createElement('div');\r\n    notificationImage.className = 'jnotification-image';\r\n    notificationHeader.appendChild(notificationImage);\r\n\r\n    if (obj.options.icon) {\r\n        var notificationIcon = document.createElement('img');\r\n        notificationIcon.src = obj.options.icon;\r\n        notificationImage.appendChild(notificationIcon);\r\n    }\r\n\r\n    var notificationName = document.createElement('div');\r\n    notificationName.className = 'jnotification-name';\r\n    notificationName.innerHTML = obj.options.name;\r\n    notificationHeader.appendChild(notificationName);\r\n\r\n    if (obj.options.closeable == true) {\r\n        var notificationClose = document.createElement('div');\r\n        notificationClose.className = 'jnotification-close';\r\n        notificationClose.onclick = function() {\r\n            obj.hide();\r\n        }\r\n        notificationHeader.appendChild(notificationClose);\r\n    }\r\n\r\n    var notificationDate = document.createElement('div');\r\n    notificationDate.className = 'jnotification-date';\r\n    notificationHeader.appendChild(notificationDate);\r\n\r\n    var notificationContent = document.createElement('div');\r\n    notificationContent.className = 'jnotification-content';\r\n    notificationContainer.appendChild(notificationContent);\r\n\r\n    if (obj.options.title) {\r\n        var notificationTitle = document.createElement('div');\r\n        notificationTitle.className = 'jnotification-title';\r\n        notificationTitle.innerHTML = obj.options.title;\r\n        notificationContent.appendChild(notificationTitle);\r\n    }\r\n\r\n    var notificationMessage = document.createElement('div');\r\n    notificationMessage.className = 'jnotification-message';\r\n    notificationMessage.innerHTML = obj.options.message;\r\n    notificationContent.appendChild(notificationMessage);\r\n\r\n    obj.show = function() {\r\n        document.body.appendChild(notification);\r\n        if (jSuites.getWindowWidth() > 800) { \r\n            jSuites.animation.fadeIn(notification);\r\n        } else {\r\n            jSuites.animation.slideTop(notification, 1);\r\n        }\r\n    }\r\n\r\n    obj.hide = function() {\r\n        if (jSuites.getWindowWidth() > 800) { \r\n            jSuites.animation.fadeOut(notification, function() {\r\n                if (notification.parentNode) {\r\n                    notification.parentNode.removeChild(notification);\r\n                    if (notificationTimeout) {\r\n                        clearTimeout(notificationTimeout);\r\n                    }\r\n                }\r\n            });\r\n        } else {\r\n            jSuites.animation.slideTop(notification, 0, function() {\r\n                if (notification.parentNode) {\r\n                    notification.parentNode.removeChild(notification);\r\n                    if (notificationTimeout) {\r\n                        clearTimeout(notificationTimeout);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    obj.show();\r\n\r\n    if (obj.options.autoHide == true) {\r\n        var notificationTimeout = setTimeout(function() {\r\n            obj.hide();\r\n        }, obj.options.timeout);\r\n    }\r\n\r\n    if (jSuites.getWindowWidth() < 800) {\r\n        notification.addEventListener(\"swipeup\", function(e) {\r\n            obj.hide();\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        });\r\n    }\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.notification.isVisible = function() {\r\n    var j = document.querySelector('.jnotification');\r\n    return j && j.parentNode ? true : false;\r\n}\r\n\r\n// More palettes https://coolors.co/ or https://gka.github.io/palettes/#/10|s|003790,005647,ffffe0|ffffe0,ff005e,93003a|1|1\r\n\r\njSuites.palette = function(o) {\r\n    // Material\r\n    var palette = {};\r\n\r\n    palette.material = [\r\n        [ \"#ffebee\", \"#fce4ec\", \"#f3e5f5\", \"#e8eaf6\", \"#e3f2fd\", \"#e0f7fa\", \"#e0f2f1\", \"#e8f5e9\", \"#f1f8e9\", \"#f9fbe7\", \"#fffde7\", \"#fff8e1\", \"#fff3e0\", \"#fbe9e7\", \"#efebe9\", \"#fafafa\", \"#eceff1\" ],\r\n        [ \"#ffcdd2\", \"#f8bbd0\", \"#e1bee7\", \"#c5cae9\", \"#bbdefb\", \"#b2ebf2\", \"#b2dfdb\", \"#c8e6c9\", \"#dcedc8\", \"#f0f4c3\", \"#fff9c4\", \"#ffecb3\", \"#ffe0b2\", \"#ffccbc\", \"#d7ccc8\", \"#f5f5f5\", \"#cfd8dc\" ],\r\n        [ \"#ef9a9a\", \"#f48fb1\", \"#ce93d8\", \"#9fa8da\", \"#90caf9\", \"#80deea\", \"#80cbc4\", \"#a5d6a7\", \"#c5e1a5\", \"#e6ee9c\", \"#fff59d\", \"#ffe082\", \"#ffcc80\", \"#ffab91\", \"#bcaaa4\", \"#eeeeee\", \"#b0bec5\" ],\r\n        [ \"#e57373\", \"#f06292\", \"#ba68c8\", \"#7986cb\", \"#64b5f6\", \"#4dd0e1\", \"#4db6ac\", \"#81c784\", \"#aed581\", \"#dce775\", \"#fff176\", \"#ffd54f\", \"#ffb74d\", \"#ff8a65\", \"#a1887f\", \"#e0e0e0\", \"#90a4ae\" ],\r\n        [ \"#ef5350\", \"#ec407a\", \"#ab47bc\", \"#5c6bc0\", \"#42a5f5\", \"#26c6da\", \"#26a69a\", \"#66bb6a\", \"#9ccc65\", \"#d4e157\", \"#ffee58\", \"#ffca28\", \"#ffa726\", \"#ff7043\", \"#8d6e63\", \"#bdbdbd\", \"#78909c\" ],\r\n        [ \"#f44336\", \"#e91e63\", \"#9c27b0\", \"#3f51b5\", \"#2196f3\", \"#00bcd4\", \"#009688\", \"#4caf50\", \"#8bc34a\", \"#cddc39\", \"#ffeb3b\", \"#ffc107\", \"#ff9800\", \"#ff5722\", \"#795548\", \"#9e9e9e\", \"#607d8b\" ],\r\n        [ \"#e53935\", \"#d81b60\", \"#8e24aa\", \"#3949ab\", \"#1e88e5\", \"#00acc1\", \"#00897b\", \"#43a047\", \"#7cb342\", \"#c0ca33\", \"#fdd835\", \"#ffb300\", \"#fb8c00\", \"#f4511e\", \"#6d4c41\", \"#757575\", \"#546e7a\" ],\r\n        [ \"#d32f2f\", \"#c2185b\", \"#7b1fa2\", \"#303f9f\", \"#1976d2\", \"#0097a7\", \"#00796b\", \"#388e3c\", \"#689f38\", \"#afb42b\", \"#fbc02d\", \"#ffa000\", \"#f57c00\", \"#e64a19\", \"#5d4037\", \"#616161\", \"#455a64\" ],\r\n        [ \"#c62828\", \"#ad1457\", \"#6a1b9a\", \"#283593\", \"#1565c0\", \"#00838f\", \"#00695c\", \"#2e7d32\", \"#558b2f\", \"#9e9d24\", \"#f9a825\", \"#ff8f00\", \"#ef6c00\", \"#d84315\", \"#4e342e\", \"#424242\", \"#37474f\" ],\r\n        [ \"#b71c1c\", \"#880e4f\", \"#4a148c\", \"#1a237e\", \"#0d47a1\", \"#006064\", \"#004d40\", \"#1b5e20\", \"#33691e\", \"#827717\", \"#f57f17\", \"#ff6f00\", \"#e65100\", \"#bf360c\", \"#3e2723\", \"#212121\", \"#263238\" ],\r\n    ];\r\n\r\n    palette.fire = [\r\n        [\"0b1a6d\",\"840f38\",\"b60718\",\"de030b\",\"ff0c0c\",\"fd491c\",\"fc7521\",\"faa331\",\"fbb535\",\"ffc73a\"],\r\n        [\"071147\",\"5f0b28\",\"930513\",\"be0309\",\"ef0000\",\"fa3403\",\"fb670b\",\"f9991b\",\"faad1e\",\"ffc123\"],\r\n        [\"03071e\",\"370617\",\"6a040f\",\"9d0208\",\"d00000\",\"dc2f02\",\"e85d04\",\"f48c06\",\"faa307\",\"ffba08\"],\r\n        [\"020619\",\"320615\",\"61040d\",\"8c0207\",\"bc0000\",\"c82a02\",\"d05203\",\"db7f06\",\"e19405\",\"efab00\"],\r\n        [\"020515\",\"2d0513\",\"58040c\",\"7f0206\",\"aa0000\",\"b62602\",\"b94903\",\"c57205\",\"ca8504\",\"d89b00\"],\r\n    ]\r\n\r\n    palette.baby = [\r\n        [\"eddcd2\",\"fff1e6\",\"fde2e4\",\"fad2e1\",\"c5dedd\",\"dbe7e4\",\"f0efeb\",\"d6e2e9\",\"bcd4e6\",\"99c1de\"],\r\n        [\"e1c4b3\",\"ffd5b5\",\"fab6ba\",\"f5a8c4\",\"aacecd\",\"bfd5cf\",\"dbd9d0\",\"baceda\",\"9dc0db\",\"7eb1d5\"],\r\n        [\"daa990\",\"ffb787\",\"f88e95\",\"f282a9\",\"8fc4c3\",\"a3c8be\",\"cec9b3\",\"9dbcce\",\"82acd2\",\"649dcb\"],\r\n        [\"d69070\",\"ff9c5e\",\"f66770\",\"f05f8f\",\"74bbb9\",\"87bfae\",\"c5b993\",\"83aac3\",\"699bca\",\"4d89c2\"],\r\n        [\"c97d5d\",\"f58443\",\"eb4d57\",\"e54a7b\",\"66a9a7\",\"78ae9c\",\"b5a67e\",\"7599b1\",\"5c88b7\",\"4978aa\"],\r\n    ]\r\n\r\n    if (palette[o]) {\r\n        return palette[o];\r\n    } else {\r\n        return palette.material;\r\n    }\r\n}\r\n\r\njSuites.picker = (function(el, options) {\r\n    // Already created, update options\r\n    if (el.picker) {\r\n        return el.picker.setOptions(options, true);\r\n    }\r\n\r\n    // New instance\r\n    var obj = { type: 'picker' };\r\n    obj.options = {};\r\n\r\n    var dropdownHeader = null;\r\n    var dropdownContent = null;\r\n\r\n    /**\r\n     * Create the content options\r\n     */\r\n    var createContent = function() {\r\n        dropdownContent.innerHTML = '';\r\n\r\n        // Create items\r\n        var keys = Object.keys(obj.options.data);\r\n\r\n        // Go though all options\r\n        for (var i = 0; i < keys.length; i++) {\r\n            // Item\r\n            var dropdownItem = document.createElement('div');\r\n            dropdownItem.classList.add('jpicker-item');\r\n            dropdownItem.k = keys[i];\r\n            dropdownItem.v = obj.options.data[keys[i]];\r\n            // Label\r\n            dropdownItem.innerHTML = obj.getLabel(keys[i]);\r\n            // Append\r\n            dropdownContent.appendChild(dropdownItem);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set or reset the options for the picker\r\n     */\r\n    obj.setOptions = function(options, reset) {\r\n        // Default configuration\r\n        var defaults = {\r\n            value: 0,\r\n            data: null,\r\n            render: null,\r\n            onchange: null,\r\n            onselect: null,\r\n            onopen: null,\r\n            onclose: null,\r\n            onload: null,\r\n            width: null,\r\n            header: true,\r\n            right: false,\r\n            content: false,\r\n            columns: null,\r\n            height: null,\r\n        }\r\n\r\n        // Legacy purpose only\r\n        if (options && options.options) {\r\n            options.data = options.options;\r\n        }\r\n\r\n        // Loop through the initial configuration\r\n        for (var property in defaults) {\r\n            if (options && options.hasOwnProperty(property)) {\r\n                obj.options[property] = options[property];\r\n            } else {\r\n                if (typeof(obj.options[property]) == 'undefined' || reset === true) {\r\n                    obj.options[property] = defaults[property];\r\n                }\r\n            }\r\n        }\r\n\r\n        // Start using the options\r\n        if (obj.options.header === false) {\r\n            dropdownHeader.style.display = 'none';\r\n        } else {\r\n            dropdownHeader.style.display = '';\r\n        }\r\n\r\n        // Width\r\n        if (obj.options.width) {\r\n            dropdownHeader.style.width = parseInt(obj.options.width) + 'px';\r\n        } else {\r\n            dropdownHeader.style.width = '';\r\n        }\r\n\r\n        // Height\r\n        if (obj.options.height) {\r\n            dropdownContent.style.maxHeight = obj.options.height + 'px';\r\n            dropdownContent.style.overflow = 'scroll';\r\n        } else {\r\n            dropdownContent.style.overflow = '';\r\n        }\r\n\r\n        if (obj.options.columns > 0) {\r\n            dropdownContent.classList.add('jpicker-columns');\r\n            dropdownContent.style.width =  obj.options.width ? obj.options.width : 36 * obj.options.columns + 'px';\r\n        }\r\n\r\n        if (isNaN(obj.options.value)) {\r\n            obj.options.value = '0';\r\n        }\r\n\r\n        // Create list from data\r\n        createContent();\r\n\r\n        // Set value\r\n        obj.setValue(obj.options.value);\r\n\r\n        // Set options all returns the own instance\r\n        return obj;\r\n    }\r\n\r\n    obj.getValue = function() {\r\n        return obj.options.value;\r\n    }\r\n\r\n    obj.setValue = function(v) {\r\n        // Set label\r\n        obj.setLabel(v);\r\n\r\n        // Update value\r\n        obj.options.value = String(v);\r\n\r\n        // Lemonade JS\r\n        if (el.value != obj.options.value) {\r\n            el.value = obj.options.value;\r\n            if (typeof(el.onchange) == 'function') {\r\n                el.onchange({\r\n                    type: 'change',\r\n                    target: el,\r\n                    value: el.value\r\n                });\r\n            }\r\n        }\r\n\r\n        if (dropdownContent.children[v].getAttribute('type') !== 'generic') {\r\n            obj.close();\r\n        }\r\n    }\r\n\r\n    obj.getLabel = function(v) {\r\n        var label = obj.options.data[v] || null;\r\n        if (typeof(obj.options.render) == 'function') {\r\n            label = obj.options.render(label);\r\n        }\r\n        return label;\r\n    }\r\n\r\n    obj.setLabel = function(v) {\r\n        if (obj.options.content) {\r\n            var label = '<i class=\"material-icons\">' + obj.options.content + '</i>';\r\n        } else {\r\n            var label = obj.getLabel(v);\r\n        }\r\n\r\n        dropdownHeader.innerHTML = label;\r\n    }\r\n\r\n    obj.open = function() {\r\n        if (! el.classList.contains('jpicker-focus')) {\r\n            // Start tracking the element\r\n            jSuites.tracking(obj, true);\r\n\r\n            // Open picker\r\n            el.classList.add('jpicker-focus');\r\n            el.focus();\r\n\r\n            var rectHeader = dropdownHeader.getBoundingClientRect();\r\n            var rectContent = dropdownContent.getBoundingClientRect();\r\n            if (window.innerHeight < rectHeader.bottom + rectContent.height) {\r\n                dropdownContent.style.marginTop = -1 * (rectContent.height + 4) + 'px';\r\n            } else {\r\n                dropdownContent.style.marginTop = rectHeader.height + 2 + 'px';\r\n            }\r\n\r\n            if (obj.options.right === true) {\r\n                dropdownContent.style.marginLeft = -1 * rectContent.width + 24 + 'px';\r\n            }\r\n\r\n            if (typeof obj.options.onopen == 'function') {\r\n                obj.options.onopen(el, obj);\r\n            }\r\n        }\r\n    }\r\n\r\n    obj.close = function() {\r\n        if (el.classList.contains('jpicker-focus')) {\r\n            el.classList.remove('jpicker-focus');\r\n\r\n            // Start tracking the element\r\n            jSuites.tracking(obj, false);\r\n\r\n            if (typeof obj.options.onclose == 'function') {\r\n                obj.options.onclose(el, obj);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create floating picker\r\n     */\r\n    var init = function() {\r\n        // Class\r\n        el.classList.add('jpicker');\r\n        el.setAttribute('tabindex', '900');\r\n        el.onmousedown = function(e) {\r\n            if (! el.classList.contains('jpicker-focus')) {\r\n                obj.open();\r\n            }\r\n        }\r\n\r\n        // Dropdown Header\r\n        dropdownHeader = document.createElement('div');\r\n        dropdownHeader.classList.add('jpicker-header');\r\n\r\n        // Dropdown content\r\n        dropdownContent = document.createElement('div');\r\n        dropdownContent.classList.add('jpicker-content');\r\n        dropdownContent.onclick = function(e) {\r\n            var item = jSuites.findElement(e.target, 'jpicker-item');\r\n            if (item) {\r\n                if (item.parentNode === dropdownContent) {\r\n                    // Update label\r\n                    obj.setValue(item.k);\r\n                    // Call method\r\n                    if (typeof(obj.options.onchange) == 'function') {\r\n                        obj.options.onchange.call(obj, el, obj, item.v, item.v, item.k);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Append content and header\r\n        el.appendChild(dropdownHeader);\r\n        el.appendChild(dropdownContent);\r\n\r\n        // Default value\r\n        el.value = options.value || 0;\r\n\r\n        // Set options\r\n        obj.setOptions(options);\r\n\r\n        if (typeof(obj.options.onload) == 'function') {\r\n            obj.options.onload(el, obj);\r\n        }\r\n\r\n        // Change\r\n        el.change = obj.setValue;\r\n\r\n        // Global generic value handler\r\n        el.val = function(val) {\r\n            if (val === undefined) {\r\n                return obj.getValue();\r\n            } else {\r\n                obj.setValue(val);\r\n            }\r\n        }\r\n\r\n        // Reference\r\n        el.picker = obj;\r\n    }\r\n\r\n    init();\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.progressbar = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    // Default configuration\r\n    var defaults = {\r\n        value: 0,\r\n        onchange: null,\r\n        width: null,\r\n    };\r\n\r\n    // Loop through the initial configuration\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    // Class\r\n    el.classList.add('jprogressbar');\r\n    el.setAttribute('tabindex', 1);\r\n    el.setAttribute('data-value', obj.options.value);\r\n\r\n    var bar = document.createElement('div');\r\n    bar.style.width = obj.options.value + '%';\r\n    bar.style.color = '#fff';\r\n    el.appendChild(bar);\r\n\r\n    if (obj.options.width) {\r\n        el.style.width = obj.options.width;\r\n    }\r\n\r\n    // Set value\r\n    obj.setValue = function(value) {\r\n        value = parseInt(value);\r\n        obj.options.value = value;\r\n        bar.style.width = value + '%';\r\n        el.setAttribute('data-value', value + '%');\r\n\r\n        if (value < 6) {\r\n            el.style.color = '#000';\r\n        } else {\r\n            el.style.color = '#fff';\r\n        }\r\n\r\n        // Update value\r\n        obj.options.value = value;\r\n\r\n        if (typeof(obj.options.onchange) == 'function') {\r\n            obj.options.onchange(el, value);\r\n        }\r\n\r\n        // Lemonade JS\r\n        if (el.value != obj.options.value) {\r\n            el.value = obj.options.value;\r\n            if (typeof(el.onchange) == 'function') {\r\n                el.onchange({\r\n                    type: 'change',\r\n                    target: el,\r\n                    value: el.value\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    obj.getValue = function() {\r\n        return obj.options.value;\r\n    }\r\n\r\n    var action = function(e) {\r\n        if (e.which) {\r\n            // Get target info\r\n            var rect = el.getBoundingClientRect();\r\n\r\n            if (e.changedTouches && e.changedTouches[0]) {\r\n                var x = e.changedTouches[0].clientX;\r\n                var y = e.changedTouches[0].clientY;\r\n            } else {\r\n                var x = e.clientX;\r\n                var y = e.clientY;\r\n            }\r\n\r\n            obj.setValue(Math.round((x - rect.left) / rect.width * 100));\r\n        }\r\n    }\r\n\r\n    // Events\r\n    if ('touchstart' in document.documentElement === true) {\r\n        el.addEventListener('touchstart', action);\r\n        el.addEventListener('touchend', action);\r\n    } else {\r\n        el.addEventListener('mousedown', action);\r\n        el.addEventListener(\"mousemove\", action);\r\n    }\r\n\r\n    // Change\r\n    el.change = obj.setValue;\r\n\r\n    // Global generic value handler\r\n    el.val = function(val) {\r\n        if (val === undefined) {\r\n            return obj.getValue();\r\n        } else {\r\n            obj.setValue(val);\r\n        }\r\n    }\r\n\r\n    // Reference\r\n    el.progressbar = obj;\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.rating = (function(el, options) {\r\n    // Already created, update options\r\n    if (el.rating) {\r\n        return el.rating.setOptions(options, true);\r\n    }\r\n\r\n    // New instance\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    obj.setOptions = function(options, reset) {\r\n        // Default configuration\r\n        var defaults = {\r\n            number: 5,\r\n            value: 0,\r\n            tooltip: [ 'Very bad', 'Bad', 'Average', 'Good', 'Very good' ],\r\n            onchange: null,\r\n        };\r\n\r\n        // Loop through the initial configuration\r\n        for (var property in defaults) {\r\n            if (options && options.hasOwnProperty(property)) {\r\n                obj.options[property] = options[property];\r\n            } else {\r\n                if (typeof(obj.options[property]) == 'undefined' || reset === true) {\r\n                    obj.options[property] = defaults[property];\r\n                }\r\n            }\r\n        }\r\n\r\n        // Make sure the container is empty\r\n        el.innerHTML = '';\r\n\r\n        // Add elements\r\n        for (var i = 0; i < obj.options.number; i++) {\r\n            var div = document.createElement('div');\r\n            div.setAttribute('data-index', (i + 1))\r\n            div.setAttribute('title', obj.options.tooltip[i])\r\n            el.appendChild(div);\r\n        }\r\n\r\n        // Selected option\r\n        if (obj.options.value) {\r\n            for (var i = 0; i < obj.options.number; i++) {\r\n                if (i < obj.options.value) {\r\n                    el.children[i].classList.add('jrating-selected');\r\n                }\r\n            }\r\n        }\r\n\r\n        return obj;\r\n    }\r\n\r\n    // Set value\r\n    obj.setValue = function(index) {\r\n        for (var i = 0; i < obj.options.number; i++) {\r\n            if (i < index) {\r\n                el.children[i].classList.add('jrating-selected');\r\n            } else {\r\n                el.children[i].classList.remove('jrating-over');\r\n                el.children[i].classList.remove('jrating-selected');\r\n            }\r\n        }\r\n\r\n        obj.options.value = index;\r\n\r\n        if (typeof(obj.options.onchange) == 'function') {\r\n            obj.options.onchange(el, index);\r\n        }\r\n\r\n        // Lemonade JS\r\n        if (el.value != obj.options.value) {\r\n            el.value = obj.options.value;\r\n            if (typeof(el.onchange) == 'function') {\r\n                el.onchange({\r\n                    type: 'change',\r\n                    target: el,\r\n                    value: el.value\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    obj.getValue = function() {\r\n        return obj.options.value;\r\n    }\r\n\r\n    var init = function() {\r\n        // Start plugin\r\n        obj.setOptions(options);\r\n\r\n        // Class\r\n        el.classList.add('jrating');\r\n\r\n        // Events\r\n        el.addEventListener(\"click\", function(e) {\r\n            var index = e.target.getAttribute('data-index');\r\n            if (index != undefined) {\r\n                if (index == obj.options.value) {\r\n                    obj.setValue(0);\r\n                } else {\r\n                    obj.setValue(index);\r\n                }\r\n            }\r\n        });\r\n\r\n        el.addEventListener(\"mouseover\", function(e) {\r\n            var index = e.target.getAttribute('data-index');\r\n            for (var i = 0; i < obj.options.number; i++) {\r\n                if (i < index) {\r\n                    el.children[i].classList.add('jrating-over');\r\n                } else {\r\n                    el.children[i].classList.remove('jrating-over');\r\n                }\r\n            }\r\n        });\r\n\r\n        el.addEventListener(\"mouseout\", function(e) {\r\n            for (var i = 0; i < obj.options.number; i++) {\r\n                el.children[i].classList.remove('jrating-over');\r\n            }\r\n        });\r\n\r\n        // Change\r\n        el.change = obj.setValue;\r\n\r\n        // Global generic value handler\r\n        el.val = function(val) {\r\n            if (val === undefined) {\r\n                return obj.getValue();\r\n            } else {\r\n                obj.setValue(val);\r\n            }\r\n        }\r\n\r\n        // Reference\r\n        el.rating = obj;\r\n    }\r\n\r\n    init();\r\n\r\n    return obj;\r\n});\r\n\r\n\r\njSuites.search = (function(el, options) {\r\n    if (el.search) {\r\n        return el.search;\r\n    }\r\n\r\n    var index =  null;\r\n\r\n    var select = function(e) {\r\n        if (e.target.classList.contains('jsearch_item')) {\r\n            var element = e.target;\r\n        } else {\r\n            var element = e.target.parentNode;\r\n        }\r\n\r\n        obj.selectIndex(element);\r\n        e.preventDefault();\r\n    }\r\n\r\n    var createList = function(data) {\r\n        // Reset container\r\n        container.innerHTML = '';\r\n        // Print results\r\n        if (! data.length) {\r\n            // Show container\r\n            el.style.display = '';\r\n        } else {\r\n            // Show container\r\n            el.style.display = 'block';\r\n\r\n            // Show items (only 10)\r\n            var len = data.length < 11 ? data.length : 10;\r\n            for (var i = 0; i < len; i++) {\r\n                if (typeof(data[i]) == 'string') {\r\n                    var text = data[i];\r\n                    var value = data[i];\r\n                } else {\r\n                    // Legacy\r\n                    var text = data[i].text;\r\n                    if (! text && data[i].name) {\r\n                        text = data[i].name;\r\n                    }\r\n                    var value = data[i].value;\r\n                    if (! value && data[i].id) {\r\n                        value = data[i].id;\r\n                    }\r\n                }\r\n\r\n                var div = document.createElement('div');\r\n                div.setAttribute('data-value', value);\r\n                div.setAttribute('data-text', text);\r\n                div.className = 'jsearch_item';\r\n\r\n                if (data[i].id) {\r\n                    div.setAttribute('id', data[i].id)\r\n                }\r\n\r\n                if (obj.options.forceSelect && i == 0) {\r\n                    div.classList.add('selected');\r\n                }\r\n                var img = document.createElement('img');\r\n                if (data[i].image) {\r\n                    img.src = data[i].image;\r\n                } else {\r\n                    img.style.display = 'none';\r\n                }\r\n                div.appendChild(img);\r\n\r\n                var item = document.createElement('div');\r\n                item.innerHTML = text;\r\n                div.appendChild(item);\r\n\r\n                // Append item to the container\r\n                container.appendChild(div);\r\n            }\r\n        }\r\n    }\r\n\r\n    var execute = function(str) {\r\n        if (str != obj.terms) {\r\n            // New terms\r\n            obj.terms = str;\r\n            // New index\r\n            if (obj.options.forceSelect) {\r\n                index = 0;\r\n            } else {\r\n                index = null;\r\n            }\r\n            // Array or remote search\r\n            if (Array.isArray(obj.options.data)) {\r\n                var test = function(o) {\r\n                    if (typeof(o) == 'string') {\r\n                        if ((''+o).toLowerCase().search(str.toLowerCase()) >= 0) {\r\n                            return true;\r\n                        }\r\n                    } else {\r\n                        for (var key in o) {\r\n                            var value = o[key];\r\n                            if ((''+value).toLowerCase().search(str.toLowerCase()) >= 0) {\r\n                                return true;\r\n                            }\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n\r\n                var results = obj.options.data.filter(function(item) {\r\n                    return test(item);\r\n                });\r\n\r\n                // Show items\r\n                createList(results);\r\n            } else {\r\n                // Get remove results\r\n                jSuites.ajax({\r\n                    url: obj.options.data + str,\r\n                    method: 'GET',\r\n                    dataType: 'json',\r\n                    success: function(data) {\r\n                        // Show items\r\n                        createList(data);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    // Search timer\r\n    var timer = null;\r\n\r\n    // Search methods\r\n    var obj = function(str) {\r\n        if (timer) {\r\n            clearTimeout(timer);\r\n        }\r\n        timer = setTimeout(function() {\r\n            execute(str);\r\n        }, 500);\r\n    }\r\n    if(options.forceSelect === null) {\r\n        options.forceSelect = true;\r\n    }\r\n    obj.options = {\r\n        data: options.data || null,\r\n        input: options.input || null,\r\n        onselect: options.onselect || null,\r\n        forceSelect: options.forceSelect,\r\n    };\r\n\r\n    obj.selectIndex = function(item) {\r\n        var id = item.getAttribute('id');\r\n        var text = item.getAttribute('data-text');\r\n        var value = item.getAttribute('data-value');\r\n        // Onselect\r\n        if (typeof(obj.options.onselect) == 'function') {\r\n            obj.options.onselect(obj, text, value, id);\r\n        }\r\n        // Close container\r\n        obj.close();\r\n    }\r\n\r\n    obj.open = function() {\r\n        el.style.display = 'block';\r\n    }\r\n\r\n    obj.close = function() {\r\n        if (timer) {\r\n            clearTimeout(timer);\r\n        }\r\n        // Current terms\r\n        obj.terms = '';\r\n        // Remove results\r\n        container.innerHTML = '';\r\n        // Hide\r\n        el.style.display = '';\r\n    }\r\n\r\n    obj.isOpened = function() {\r\n        return el.style.display ? true : false;\r\n    }\r\n\r\n    obj.keydown = function(e) {\r\n        if (obj.isOpened()) {\r\n            if (e.key == 'Enter') {\r\n                // Enter\r\n                if (index!==null && container.children[index]) {\r\n                    obj.selectIndex(container.children[index]);\r\n                    e.preventDefault();\r\n                } else {\r\n                    obj.close();\r\n                }\r\n            } else if (e.key === 'ArrowUp') {\r\n                // Up\r\n                if (index!==null && container.children[0]) {\r\n                    container.children[index].classList.remove('selected');\r\n                    if(!obj.options.forceSelect && index === 0) {\r\n                        index = null;\r\n                    } else {\r\n                        index = Math.max(0, index-1);\r\n                        container.children[index].classList.add('selected');\r\n                    }\r\n                }\r\n                e.preventDefault();\r\n            } else if (e.key === 'ArrowDown') {\r\n                // Down\r\n                if(index == null) {\r\n                    index = -1;\r\n                } else {\r\n                    container.children[index].classList.remove('selected');\r\n                }\r\n                if (index < 9 && container.children[index+1]) {\r\n                    index++;\r\n                }\r\n                container.children[index].classList.add('selected');\r\n                e.preventDefault();\r\n            }\r\n        }\r\n    }\r\n\r\n    obj.keyup = function(e) {\r\n        if (obj.options.input) {\r\n            obj(obj.options.input.value);\r\n        } else {\r\n            // Current node\r\n            var node = jSuites.getNode();\r\n            if (node) {\r\n                obj(node.innerText);\r\n            }\r\n        }\r\n    }\r\n    \r\n    // Add events\r\n    if (obj.options.input) {\r\n        obj.options.input.addEventListener(\"keyup\", obj.keyup);\r\n        obj.options.input.addEventListener(\"keydown\", obj.keydown);\r\n    }\r\n\r\n    // Append element\r\n    var container = document.createElement('div');\r\n    container.classList.add('jsearch_container');\r\n    container.onmousedown = select;\r\n    el.appendChild(container);\r\n\r\n    el.classList.add('jsearch');\r\n    el.search = obj;\r\n\r\n    return obj;\r\n});\r\n\r\n\r\njSuites.slider = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n    obj.currentImage = null;\r\n\r\n    if (options) {\r\n        obj.options = options;\r\n    }\r\n\r\n    // Focus\r\n    el.setAttribute('tabindex', '900')\r\n\r\n    // Items\r\n    obj.options.items = [];\r\n\r\n    if (! el.classList.contains('jslider')) {\r\n        el.classList.add('jslider');\r\n        el.classList.add('unselectable');\r\n\r\n        if (obj.options.height) {\r\n            el.style.minHeight = obj.options.height;\r\n        }\r\n        if (obj.options.width) {\r\n            el.style.width = obj.options.width;\r\n        }\r\n        if (obj.options.grid) {\r\n            el.classList.add('jslider-grid');\r\n            var number = el.children.length;\r\n            if (number > 4) {\r\n                el.setAttribute('data-total', number - 4);\r\n            }\r\n            el.setAttribute('data-number', (number > 4 ? 4 : number));\r\n        }\r\n\r\n        // Add slider counter\r\n        var counter = document.createElement('div');\r\n        counter.classList.add('jslider-counter');\r\n\r\n        // Move children inside\r\n        if (el.children.length > 0) {\r\n            // Keep children items\r\n            for (var i = 0; i < el.children.length; i++) {\r\n                obj.options.items.push(el.children[i]);\r\n                \r\n                // counter click event\r\n                var item = document.createElement('div');\r\n                item.onclick = function() {\r\n                    var index = Array.prototype.slice.call(counter.children).indexOf(this);\r\n                    obj.show(obj.currentImage = obj.options.items[index]);\r\n                }\r\n                counter.appendChild(item);\r\n            }\r\n        }\r\n        // Add caption\r\n        var caption = document.createElement('div');\r\n        caption.className = 'jslider-caption';\r\n\r\n        // Add close buttom\r\n        var controls = document.createElement('div');\r\n        var close = document.createElement('div');\r\n        close.className = 'jslider-close';\r\n        close.innerHTML = '';\r\n        \r\n        close.onclick = function() {\r\n            obj.close();\r\n        }\r\n        controls.appendChild(caption);\r\n        controls.appendChild(close);\r\n    }\r\n\r\n    obj.updateCounter = function(index) {\r\n        for (var i = 0; i < counter.children.length; i ++) {\r\n            if (counter.children[i].classList.contains('jslider-counter-focus')) {\r\n                counter.children[i].classList.remove('jslider-counter-focus');\r\n                break;\r\n            }\r\n        }\r\n        counter.children[index].classList.add('jslider-counter-focus');\r\n    }\r\n\r\n    obj.show = function(target) {\r\n        if (! target) {\r\n            var target = el.children[0];\r\n        }\r\n\r\n        // Focus element\r\n        el.classList.add('jslider-focus');\r\n        el.classList.remove('jslider-grid');\r\n        el.appendChild(controls);\r\n        el.appendChild(counter);\r\n\r\n        // Update counter\r\n        var index = obj.options.items.indexOf(target);\r\n        obj.updateCounter(index);\r\n\r\n        // Remove display\r\n        for (var i = 0; i < el.children.length; i++) {\r\n            el.children[i].style.display = '';\r\n        }\r\n        target.style.display = 'block';\r\n\r\n        // Is there any previous\r\n        if (target.previousElementSibling) {\r\n            el.classList.add('jslider-left');\r\n        } else {\r\n            el.classList.remove('jslider-left');\r\n        }\r\n\r\n        // Is there any next\r\n        if (target.nextElementSibling && target.nextElementSibling.tagName == 'IMG') {\r\n            el.classList.add('jslider-right');\r\n        } else {\r\n            el.classList.remove('jslider-right');\r\n        }\r\n\r\n        obj.currentImage = target;\r\n\r\n        // Vertical image\r\n        if (obj.currentImage.offsetHeight > obj.currentImage.offsetWidth) {\r\n            obj.currentImage.classList.add('jslider-vertical');\r\n        }\r\n\r\n        controls.children[0].innerText = obj.currentImage.getAttribute('title');\r\n    }\r\n\r\n    obj.open = function() {\r\n        obj.show();\r\n\r\n        // Event\r\n        if (typeof(obj.options.onopen) == 'function') {\r\n            obj.options.onopen(el);\r\n        }\r\n    }\r\n\r\n    obj.close = function() {\r\n        // Remove control classes\r\n        el.classList.remove('jslider-focus');\r\n        el.classList.remove('jslider-left');\r\n        el.classList.remove('jslider-right');\r\n        // Show as a grid depending on the configuration\r\n        if (obj.options.grid) {\r\n            el.classList.add('jslider-grid');\r\n        }\r\n        // Remove display\r\n        for (var i = 0; i < el.children.length; i++) {\r\n            el.children[i].style.display = '';\r\n        }\r\n        // Remove controls from the component\r\n        counter.remove();\r\n        controls.remove();\r\n        // Current image\r\n        obj.currentImage = null;\r\n        // Event\r\n        if (typeof(obj.options.onclose) == 'function') {\r\n            obj.options.onclose(el);\r\n        }\r\n    }\r\n\r\n    obj.reset = function() {\r\n        el.innerHTML = '';\r\n    }\r\n\r\n    obj.next = function() {\r\n        var nextImage = obj.currentImage.nextElementSibling;\r\n        if (nextImage && nextImage.tagName === 'IMG') {\r\n            obj.show(obj.currentImage.nextElementSibling);\r\n        }\r\n    }\r\n    \r\n    obj.prev = function() {\r\n        if (obj.currentImage.previousElementSibling) {\r\n            obj.show(obj.currentImage.previousElementSibling);\r\n        }\r\n    }\r\n\r\n    var mouseUp = function(e) {\r\n        // Open slider\r\n        if (e.target.tagName == 'IMG') {\r\n            obj.show(e.target);\r\n        } else if (! e.target.classList.contains('jslider-close') && ! (e.target.parentNode.classList.contains('jslider-counter') || e.target.classList.contains('jslider-counter'))){\r\n            // Arrow controls\r\n            var offsetX = e.offsetX || e.changedTouches[0].clientX;\r\n            if (e.target.clientWidth - offsetX < 40) {\r\n                // Show next image\r\n                obj.next();\r\n            } else if (offsetX < 40) {\r\n                // Show previous image\r\n                obj.prev();\r\n            }\r\n        }\r\n    }\r\n\r\n    if ('ontouchend' in document.documentElement === true) {\r\n        el.addEventListener('touchend', mouseUp);\r\n    } else {\r\n        el.addEventListener('mouseup', mouseUp);\r\n    }\r\n\r\n    // Add global events\r\n    el.addEventListener(\"swipeleft\", function(e) {\r\n        obj.next();\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    });\r\n\r\n    el.addEventListener(\"swiperight\", function(e) {\r\n        obj.prev();\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    });\r\n\r\n    el.addEventListener('keydown', function(e) {\r\n        if (e.which == 27) {\r\n            obj.close();\r\n        }\r\n    });\r\n\r\n    el.slider = obj;\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.sorting = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    var defaults = {\r\n        pointer: null,\r\n        direction: null,\r\n        ondragstart: null,\r\n        ondragend: null,\r\n        ondrop: null,\r\n    }\r\n\r\n    var dragElement = null;\r\n\r\n    // Loop through the initial configuration\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    el.classList.add('jsorting');\r\n\r\n    el.addEventListener('dragstart', function(e) {\r\n        var position = Array.prototype.indexOf.call(e.target.parentNode.children, e.target);\r\n        dragElement = {\r\n            element: e.target,\r\n            o: position,\r\n            d: position\r\n        }\r\n        e.target.style.opacity = '0.25';\r\n\r\n        if (typeof(obj.options.ondragstart) == 'function') {\r\n            obj.options.ondragstart(el, e.target, e);\r\n        }\r\n    });\r\n\r\n    el.addEventListener('dragover', function(e) {\r\n        e.preventDefault();\r\n\r\n        if (getElement(e.target) && dragElement) {\r\n            if (e.target.getAttribute('draggable') == 'true' && dragElement.element != e.target) {\r\n                if (! obj.options.direction) {\r\n                    var condition = e.target.clientHeight / 2 > e.offsetY;\r\n                } else {\r\n                    var condition = e.target.clientWidth / 2 > e.offsetX;\r\n                }\r\n\r\n                if (condition) {\r\n                    e.target.parentNode.insertBefore(dragElement.element, e.target);\r\n                } else {\r\n                    e.target.parentNode.insertBefore(dragElement.element, e.target.nextSibling);\r\n                }\r\n\r\n                dragElement.d = Array.prototype.indexOf.call(e.target.parentNode.children, dragElement.element);\r\n            }\r\n        }\r\n    });\r\n\r\n    el.addEventListener('dragleave', function(e) {\r\n        e.preventDefault();\r\n    });\r\n\r\n    el.addEventListener('dragend', function(e) {\r\n        e.preventDefault();\r\n\r\n        if (dragElement) {\r\n            if (typeof(obj.options.ondragend) == 'function') {\r\n                obj.options.ondragend(el, dragElement.element, e);\r\n            }\r\n\r\n            // Cancelled put element to the original position\r\n            if (dragElement.o < dragElement.d) {\r\n                e.target.parentNode.insertBefore(dragElement.element, e.target.parentNode.children[dragElement.o]);\r\n            } else {\r\n                e.target.parentNode.insertBefore(dragElement.element, e.target.parentNode.children[dragElement.o].nextSibling);\r\n            }\r\n\r\n            dragElement.element.style.opacity = '';\r\n            dragElement = null;\r\n        }\r\n    });\r\n\r\n    el.addEventListener('drop', function(e) {\r\n        e.preventDefault();\r\n\r\n        if (dragElement && (dragElement.o != dragElement.d)) {\r\n            if (typeof(obj.options.ondrop) == 'function') {\r\n                obj.options.ondrop(el, dragElement.o, dragElement.d, dragElement.element, e.target, e);\r\n            }\r\n        }\r\n\r\n        dragElement.element.style.opacity = '';\r\n        dragElement = null;\r\n    });\r\n\r\n    var getElement = function(element) {\r\n        var sorting = false;\r\n\r\n        function path (element) {\r\n            if (element.className) {\r\n                if (element.classList.contains('jsorting')) {\r\n                    sorting = true;\r\n                }\r\n            }\r\n\r\n            if (! sorting) {\r\n                path(element.parentNode);\r\n            }\r\n        }\r\n\r\n        path(element);\r\n\r\n        return sorting;\r\n    }\r\n\r\n    for (var i = 0; i < el.children.length; i++) {\r\n        if (! el.children[i].hasAttribute('draggable')) {\r\n            el.children[i].setAttribute('draggable', 'true');\r\n        }\r\n    }\r\n\r\n    el.val = function() {\r\n        var id = null;\r\n        var data = [];\r\n        for (var i = 0; i < el.children.length; i++) {\r\n            if (id = el.children[i].getAttribute('data-id')) {\r\n                data.push(id);\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n\r\n    return el;\r\n});\r\n\r\njSuites.tabs = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    // Default configuration\r\n    var defaults = {\r\n        data: [],\r\n        position: null,\r\n        allowCreate: false,\r\n        allowChangePosition: false,\r\n        onclick: null,\r\n        onload: null,\r\n        onchange: null,\r\n        oncreate: null,\r\n        ondelete: null,\r\n        onbeforecreate: null,\r\n        onchangeposition: null,\r\n        animation: false,\r\n        hideHeaders: false,\r\n        padding: null,\r\n        palette: null,\r\n        maxWidth: null,\r\n    }\r\n\r\n    // Loop through the initial configuration\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    // Class\r\n    el.classList.add('jtabs');\r\n\r\n    var prev = null;\r\n    var next = null;\r\n    var border = null;\r\n\r\n    // Helpers\r\n    var setBorder = function(index) {\r\n        if (obj.options.animation) {\r\n            var rect = obj.headers.children[index].getBoundingClientRect();\r\n\r\n            if (obj.options.palette == 'modern') {\r\n                border.style.width = rect.width - 4 + 'px';\r\n                border.style.left = obj.headers.children[index].offsetLeft + 2 + 'px';\r\n            } else {\r\n                border.style.width = rect.width + 'px';\r\n                border.style.left = obj.headers.children[index].offsetLeft + 'px';\r\n            }\r\n\r\n            if (obj.options.position == 'bottom') {\r\n                border.style.top = '0px';\r\n            } else {\r\n                border.style.bottom = '0px';\r\n            }\r\n        }\r\n    }\r\n\r\n    var updateControls = function(x) {\r\n        if (typeof(obj.headers.scrollTo) == 'function') {\r\n            obj.headers.scrollTo({\r\n                left: x,\r\n                behavior: 'smooth',\r\n            });\r\n        } else {\r\n            obj.headers.scrollLeft = x;\r\n        }\r\n\r\n        if (x <= 1) {\r\n            prev.classList.add('disabled');\r\n        } else {\r\n            prev.classList.remove('disabled');\r\n        }\r\n\r\n        if (x >= obj.headers.scrollWidth - obj.headers.offsetWidth) {\r\n            next.classList.add('disabled');\r\n        } else {\r\n            next.classList.remove('disabled');\r\n        }\r\n\r\n        if (obj.headers.scrollWidth <= obj.headers.offsetWidth) {\r\n            prev.style.display = 'none';\r\n            next.style.display = 'none';\r\n        } else {\r\n            prev.style.display = '';\r\n            next.style.display = '';\r\n        }\r\n    }\r\n\r\n    obj.setBorder = setBorder;\r\n\r\n    // Set value\r\n    obj.open = function(index) {\r\n        var previous = null;\r\n        for (var i = 0; i < obj.headers.children.length; i++) {\r\n            if (obj.headers.children[i].classList.contains('jtabs-selected')) {\r\n                // Current one\r\n                previous = i;\r\n            }\r\n            // Remote selected\r\n            obj.headers.children[i].classList.remove('jtabs-selected');\r\n            if (obj.content.children[i]) {\r\n                obj.content.children[i].classList.remove('jtabs-selected');\r\n            }\r\n        }\r\n\r\n        obj.headers.children[index].classList.add('jtabs-selected');\r\n        if (obj.content.children[index]) {\r\n            obj.content.children[index].classList.add('jtabs-selected');\r\n        }\r\n\r\n        if (previous != index && typeof(obj.options.onchange) == 'function') {\r\n            if (obj.content.children[index]) {\r\n                obj.options.onchange(el, obj, index, obj.headers.children[index], obj.content.children[index]);\r\n            }\r\n        }\r\n\r\n        // Hide\r\n        if (obj.options.hideHeaders == true && (obj.headers.children.length < 3 && obj.options.allowCreate == false)) {\r\n            obj.headers.parentNode.style.display = 'none';\r\n        } else {\r\n            // Set border\r\n            setBorder(index);\r\n\r\n            obj.headers.parentNode.style.display = '';\r\n\r\n            var x1 = obj.headers.children[index].offsetLeft;\r\n            var x2 = x1 + obj.headers.children[index].offsetWidth;\r\n            var r1 = obj.headers.scrollLeft;\r\n            var r2 = r1 + obj.headers.offsetWidth;\r\n\r\n            if (! (r1 <= x1 && r2 >= x2)) {\r\n                // Out of the viewport\r\n                updateControls(x1 - 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    obj.selectIndex = function(a) {\r\n        var index = Array.prototype.indexOf.call(obj.headers.children, a);\r\n        if (index >= 0) {\r\n            obj.open(index);\r\n        }\r\n\r\n        return index;\r\n    }\r\n\r\n    obj.rename = function(i, title) {\r\n        if (! title) {\r\n            title = prompt('New title', obj.headers.children[i].innerText);\r\n        }\r\n        obj.headers.children[i].innerText = title;\r\n        obj.open(i);\r\n    }\r\n\r\n    obj.create = function(title, url) {\r\n        if (typeof(obj.options.onbeforecreate) == 'function') {\r\n            var ret = obj.options.onbeforecreate(el);\r\n            if (ret === false) {\r\n                return false;\r\n            } else {\r\n                title = ret;\r\n            }\r\n        }\r\n\r\n        var div = obj.appendElement(title);\r\n\r\n        if (typeof(obj.options.oncreate) == 'function') {\r\n            obj.options.oncreate(el, div)\r\n        }\r\n\r\n        return div;\r\n    }\r\n\r\n    obj.remove = function(index) {\r\n        return obj.deleteElement(index);\r\n    }\r\n\r\n    obj.nextNumber = function() {\r\n        var num = 0;\r\n        for (var i = 0; i < obj.headers.children.length; i++) {\r\n            var tmp = obj.headers.children[i].innerText.match(/[0-9].*/);\r\n            if (tmp > num) {\r\n                num = parseInt(tmp);\r\n            }\r\n        }\r\n        if (! num) {\r\n            num = 1;\r\n        } else {\r\n            num++;\r\n        }\r\n\r\n        return num;\r\n    }\r\n\r\n    obj.deleteElement = function(index) {\r\n        if (! obj.headers.children[index]) {\r\n            return false;\r\n        } else {\r\n            obj.headers.removeChild(obj.headers.children[index]);\r\n            obj.content.removeChild(obj.content.children[index]);\r\n        }\r\n\r\n        obj.open(0);\r\n\r\n        if (typeof(obj.options.ondelete) == 'function') {\r\n            obj.options.ondelete(el, index)\r\n        }\r\n    }\r\n\r\n    obj.appendElement = function(title, cb) {\r\n        if (! title) {\r\n            var title = prompt('Title?', '');\r\n        }\r\n\r\n        if (title) {\r\n            // Add content\r\n            var div = document.createElement('div');\r\n            obj.content.appendChild(div);\r\n\r\n            // Add headers\r\n            var h = document.createElement('div');\r\n            h.innerHTML = title;\r\n            h.content = div;\r\n            obj.headers.insertBefore(h, obj.headers.lastChild);\r\n\r\n            // Sortable\r\n            if (obj.options.allowChangePosition) {\r\n                h.setAttribute('draggable', 'true');\r\n            }\r\n            // Open new tab\r\n            obj.selectIndex(h);\r\n\r\n            // Callback\r\n            if (typeof(cb) == 'function') {\r\n                cb(div, h);\r\n            }\r\n\r\n            // Return element\r\n            return div;\r\n        }\r\n    }\r\n\r\n    obj.getActive = function() {\r\n        for (var i = 0; i < obj.headers.children.length; i++) {\r\n            if (obj.headers.children[i].classList.contains('jtabs-selected')) {\r\n                return i\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    obj.updateContent = function(position, newContent) {\r\n        if (typeof newContent !== 'string') {\r\n            var contentItem = newContent;\r\n        } else {\r\n            var contentItem = document.createElement('div');\r\n            contentItem.innerHTML = newContent;\r\n        }\r\n\r\n        if (obj.content.children[position].classList.contains('jtabs-selected')) {\r\n            newContent.classList.add('jtabs-selected');\r\n        }\r\n\r\n        obj.content.replaceChild(newContent, obj.content.children[position]);\r\n    }\r\n\r\n    obj.updatePosition = function(f, t) {\r\n        // Ondrop update position of content\r\n        if (f > t) {\r\n            obj.content.insertBefore(obj.content.children[f], obj.content.children[t]);\r\n        } else {\r\n            obj.content.insertBefore(obj.content.children[f], obj.content.children[t].nextSibling);\r\n        }\r\n\r\n        // Open destination tab\r\n        obj.open(t);\r\n\r\n        // Call event\r\n        if (typeof(obj.options.onchangeposition) == 'function') {\r\n            obj.options.onchangeposition(obj.headers, f, t);\r\n        }\r\n    }\r\n\r\n    obj.move = function(f, t) {\r\n        if (f > t) {\r\n            obj.headers.insertBefore(obj.headers.children[f], obj.headers.children[t]);\r\n        } else {\r\n            obj.headers.insertBefore(obj.headers.children[f], obj.headers.children[t].nextSibling);\r\n        }\r\n\r\n        obj.updatePosition(f, t);\r\n    }\r\n\r\n    obj.setBorder = setBorder;\r\n\r\n    obj.init = function() {\r\n        el.innerHTML = '';\r\n\r\n        // Make sure the component is blank\r\n        obj.headers = document.createElement('div');\r\n        obj.content = document.createElement('div');\r\n        obj.headers.classList.add('jtabs-headers');\r\n        obj.content.classList.add('jtabs-content');\r\n\r\n        if (obj.options.palette) {\r\n            el.classList.add('jtabs-modern');\r\n        } else {\r\n            el.classList.remove('jtabs-modern');\r\n        }\r\n\r\n        // Padding\r\n        if (obj.options.padding) {\r\n            obj.content.style.padding = parseInt(obj.options.padding) + 'px';\r\n        }\r\n\r\n        // Header\r\n        var header = document.createElement('div');\r\n        header.className = 'jtabs-headers-container';\r\n        header.appendChild(obj.headers);\r\n        if (obj.options.maxWidth) {\r\n            header.style.maxWidth = parseInt(obj.options.maxWidth) + 'px';\r\n        }\r\n\r\n        // Controls\r\n        var controls = document.createElement('div');\r\n        controls.className = 'jtabs-controls';\r\n        controls.setAttribute('draggable', 'false');\r\n        header.appendChild(controls);\r\n\r\n        // Append DOM elements\r\n        if (obj.options.position == 'bottom') {\r\n            el.appendChild(obj.content);\r\n            el.appendChild(header);\r\n        } else {\r\n            el.appendChild(header);\r\n            el.appendChild(obj.content);\r\n        }\r\n\r\n        // New button\r\n        if (obj.options.allowCreate == true) {\r\n            var add = document.createElement('div');\r\n            add.className = 'jtabs-add';\r\n            add.onclick = function() {\r\n                obj.create();\r\n            }\r\n            controls.appendChild(add);\r\n        }\r\n\r\n        prev = document.createElement('div');\r\n        prev.className = 'jtabs-prev';\r\n        prev.onclick = function() {\r\n            updateControls(obj.headers.scrollLeft - obj.headers.offsetWidth);\r\n        }\r\n        controls.appendChild(prev);\r\n\r\n        next = document.createElement('div');\r\n        next.className = 'jtabs-next';\r\n        next.onclick = function() {\r\n            updateControls(obj.headers.scrollLeft + obj.headers.offsetWidth);\r\n        }\r\n        controls.appendChild(next);\r\n\r\n        // Data\r\n        for (var i = 0; i < obj.options.data.length; i++) {\r\n            // Title\r\n            if (obj.options.data[i].titleElement) {\r\n                var headerItem = obj.options.data[i].titleElement;\r\n            } else {\r\n                var headerItem = document.createElement('div');\r\n            }\r\n            // Icon\r\n            if (obj.options.data[i].icon) {\r\n                var iconContainer = document.createElement('div');\r\n                var icon = document.createElement('i');\r\n                icon.classList.add('material-icons');\r\n                icon.innerHTML = obj.options.data[i].icon;\r\n                iconContainer.appendChild(icon);\r\n                headerItem.appendChild(iconContainer);\r\n            }\r\n            // Title\r\n            if (obj.options.data[i].title) {\r\n                var title = document.createTextNode(obj.options.data[i].title);\r\n                headerItem.appendChild(title);\r\n            }\r\n            // Width\r\n            if (obj.options.data[i].width) {\r\n                headerItem.style.width = obj.options.data[i].width;\r\n            }\r\n            // Content\r\n            if (obj.options.data[i].contentElement) {\r\n                var contentItem = obj.options.data[i].contentElement;\r\n            } else {\r\n                var contentItem = document.createElement('div');\r\n                contentItem.innerHTML = obj.options.data[i].content;\r\n            }\r\n            obj.headers.appendChild(headerItem);\r\n            obj.content.appendChild(contentItem);\r\n        }\r\n\r\n        // Animation\r\n        border = document.createElement('div');\r\n        border.className = 'jtabs-border';\r\n        obj.headers.appendChild(border);\r\n\r\n        if (obj.options.animation) {\r\n            el.classList.add('jtabs-animation');\r\n        }\r\n\r\n        // Events\r\n        obj.headers.addEventListener(\"click\", function(e) {\r\n            if (e.target.parentNode.classList.contains('jtabs-headers')) {\r\n                var target = e.target;\r\n            } else {\r\n                if (e.target.tagName == 'I') {\r\n                    var target = e.target.parentNode.parentNode;\r\n                } else {\r\n                    var target = e.target.parentNode;\r\n                }\r\n            }\r\n\r\n            var index = obj.selectIndex(target);\r\n\r\n            if (typeof(obj.options.onclick) == 'function') {\r\n                obj.options.onclick(el, obj, index, obj.headers.children[index], obj.content.children[index]);\r\n            }\r\n        });\r\n\r\n        obj.headers.addEventListener(\"contextmenu\", function(e) {\r\n            obj.selectIndex(e.target);\r\n        });\r\n\r\n        if (obj.headers.children.length) {\r\n            // Open first tab\r\n            obj.open(0);\r\n        }\r\n\r\n        // Update controls\r\n        updateControls(0);\r\n\r\n        if (obj.options.allowChangePosition == true) {\r\n            jSuites.sorting(obj.headers, {\r\n                direction: 1,\r\n                ondrop: function(a,b,c) {\r\n                    obj.updatePosition(b,c);\r\n                },\r\n            });\r\n        }\r\n\r\n        if (typeof(obj.options.onload) == 'function') {\r\n            obj.options.onload(el, obj);\r\n        }\r\n    }\r\n\r\n    // Loading existing nodes as the data\r\n    if (el.children[0] && el.children[0].children.length) {\r\n        // Create from existing elements\r\n        for (var i = 0; i < el.children[0].children.length; i++) {\r\n            var item = obj.options.data && obj.options.data[i] ? obj.options.data[i] : {};\r\n\r\n            if (el.children[1] && el.children[1].children[i]) {\r\n                item.titleElement = el.children[0].children[i];\r\n                item.contentElement = el.children[1].children[i];\r\n            } else {\r\n                item.contentElement = el.children[0].children[i];\r\n            }\r\n\r\n            obj.options.data[i] = item;\r\n        }\r\n    }\r\n\r\n    // Remote controller flag\r\n    var loadingRemoteData = false;\r\n\r\n    // Create from data\r\n    if (obj.options.data) {\r\n        // Append children\r\n        for (var i = 0; i < obj.options.data.length; i++) {\r\n            if (obj.options.data[i].url) {\r\n                jSuites.ajax({\r\n                    url: obj.options.data[i].url,\r\n                    type: 'GET',\r\n                    dataType: 'text/html',\r\n                    index: i,\r\n                    success: function(result) {\r\n                        obj.options.data[this.index].content = result;\r\n                    },\r\n                    complete: function() {\r\n                        obj.init();\r\n                    }\r\n                });\r\n\r\n                // Flag loading\r\n                loadingRemoteData = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    if (! loadingRemoteData) {\r\n        obj.init();\r\n    }\r\n\r\n    el.tabs = obj;\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.tags = (function(el, options) {\r\n    // Redefine configuration\r\n    if (el.tags) {\r\n        return el.tags.setOptions(options, true);\r\n    }\r\n\r\n    var obj = { type:'tags' };\r\n    obj.options = {};\r\n\r\n    // Limit\r\n    var limit = function() {\r\n        return obj.options.limit && el.children.length >= obj.options.limit ? true : false;\r\n    }\r\n\r\n    // Search helpers\r\n    var search = null;\r\n    var searchContainer = null;\r\n\r\n    obj.setOptions = function(options, reset) {\r\n        /**\r\n         * @typedef {Object} defaults\r\n         * @property {(string|Array)} value - Initial value of the compontent\r\n         * @property {number} limit - Max number of tags inside the element\r\n         * @property {string} search - The URL for suggestions\r\n         * @property {string} placeholder - The default instruction text on the element\r\n         * @property {validation} validation - Method to validate the tags\r\n         * @property {requestCallback} onbeforechange - Method to be execute before any changes on the element\r\n         * @property {requestCallback} onchange - Method to be execute after any changes on the element\r\n         * @property {requestCallback} onfocus - Method to be execute when on focus\r\n         * @property {requestCallback} onblur - Method to be execute when on blur\r\n         * @property {requestCallback} onload - Method to be execute when the element is loaded\r\n         */\r\n        var defaults = {\r\n            value: '',\r\n            limit: null,\r\n            limitMessage: null,\r\n            search: null,\r\n            placeholder: null,\r\n            validation: null,\r\n            onbeforechange: null,\r\n            onlimit: null,\r\n            onchange: null,\r\n            onfocus: null,\r\n            onblur: null,\r\n            onload: null,\r\n            colors: null,\r\n        }\r\n\r\n        // Loop through though the default configuration\r\n        for (var property in defaults) {\r\n            if (options && options.hasOwnProperty(property)) {\r\n                obj.options[property] = options[property];\r\n            } else {\r\n                if (typeof(obj.options[property]) == 'undefined' || reset === true) {\r\n                    obj.options[property] = defaults[property];\r\n                }\r\n            }\r\n        }\r\n\r\n        // Placeholder\r\n        if (obj.options.placeholder) {\r\n            el.setAttribute('data-placeholder', obj.options.placeholder);\r\n        } else {\r\n            el.removeAttribute('data-placeholder');\r\n        }\r\n        el.placeholder = obj.options.placeholder;\r\n\r\n        // Update value\r\n        obj.setValue(obj.options.value);\r\n\r\n        // Validate items\r\n        filter();\r\n\r\n        // Create search box\r\n        if (obj.options.search) {\r\n            if (! searchContainer) {\r\n                searchContainer = document.createElement('div');\r\n                el.parentNode.insertBefore(searchContainer, el.nextSibling);\r\n\r\n                // Create container\r\n                search = jSuites.search(searchContainer, {\r\n                    data: obj.options.search,\r\n                    onselect: function(a,b,c) {\r\n                        obj.selectIndex(b,c);\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            if (searchContainer) {\r\n                search = null;\r\n                searchContainer.remove();\r\n                searchContainer = null;\r\n            }\r\n        }\r\n\r\n        return obj;\r\n    }\r\n\r\n    /**\r\n     * Add a new tag to the element\r\n     * @param {(?string|Array)} value - The value of the new element\r\n     */\r\n    obj.add = function(value, focus) {\r\n        if (typeof(obj.options.onbeforechange) == 'function') {\r\n            var ret = obj.options.onbeforechange(el, obj, obj.options.value, value);\r\n            if (ret === false) {\r\n                return false;\r\n            } else { \r\n                if (ret != null) {\r\n                    value = ret;\r\n                }\r\n            }\r\n        }\r\n\r\n        // Make sure search is closed\r\n        if (search) {\r\n            search.close();\r\n        }\r\n\r\n        if (limit()) {\r\n            if (typeof(obj.options.onlimit) == 'function') {\r\n                obj.options.onlimit(obj, obj.options.limit);\r\n            } else if (obj.options.limitMessage) {\r\n                alert(obj.options.limitMessage + ' ' + obj.options.limit);\r\n            }\r\n        } else {\r\n            // Get node\r\n            var node = jSuites.getNode();\r\n\r\n            if (node && node.parentNode && node.parentNode.classList.contains('jtags') &&\r\n                node.nextSibling && (! (node.nextSibling.innerText && node.nextSibling.innerText.trim()))) {\r\n                div = node.nextSibling;\r\n            } else {\r\n                // Remove not used last item\r\n                if (el.lastChild) {\r\n                    if (! el.lastChild.innerText.trim()) {\r\n                        el.removeChild(el.lastChild);\r\n                    }\r\n                }\r\n\r\n                // Mix argument string or array\r\n                if (! value || typeof(value) == 'string') {\r\n                    var div = createElement(value, value, node);\r\n                } else {\r\n                    for (var i = 0; i <= value.length; i++) {\r\n                        if (! limit()) {\r\n                            if (! value[i] || typeof(value[i]) == 'string') {\r\n                                var t = value[i] || '';\r\n                                var v = null;\r\n                            } else {\r\n                                var t = value[i].text;\r\n                                var v = value[i].value;\r\n                            }\r\n\r\n                            // Add element\r\n                            var div = createElement(t, v);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Change\r\n                change();\r\n            }\r\n\r\n            // Place caret\r\n            if (focus) {\r\n                setFocus(div);\r\n            }\r\n        }\r\n    }\r\n\r\n    obj.setLimit = function(limit) {\r\n        obj.options.limit = limit;\r\n        var n = el.children.length - limit;\r\n        while (el.children.length > limit) {\r\n            el.removeChild(el.lastChild);\r\n        }\r\n    }\r\n\r\n    // Remove a item node\r\n    obj.remove = function(node) {\r\n        // Remove node\r\n        node.parentNode.removeChild(node);\r\n        // Make sure element is not blank\r\n        if (! el.children.length) {\r\n            obj.add('', true);\r\n        } else {\r\n            change();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get all tags in the element\r\n     * @return {Array} data - All tags as an array\r\n     */\r\n    obj.getData = function() {\r\n        var data = [];\r\n        for (var i = 0; i < el.children.length; i++) {\r\n            // Get value\r\n            var text = el.children[i].innerText.replace(\"\\n\", \"\");\r\n            // Get id\r\n            var value = el.children[i].getAttribute('data-value');\r\n            if (! value) {\r\n                value = text;\r\n            }\r\n            // Item\r\n            if (text || value) {\r\n                data.push({ text: text, value: value });\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n\r\n    /**\r\n     * Get the value of one tag. Null for all tags\r\n     * @param {?number} index - Tag index number. Null for all tags.\r\n     * @return {string} value - All tags separated by comma\r\n     */\r\n    obj.getValue = function(index) {\r\n        var value = null;\r\n\r\n        if (index != null) {\r\n            // Get one individual value\r\n            value = el.children[index].getAttribute('data-value');\r\n            if (! value) {\r\n                value = el.children[index].innerText.replace(\"\\n\", \"\");\r\n            }\r\n        } else {\r\n            // Get all\r\n            var data = [];\r\n            for (var i = 0; i < el.children.length; i++) {\r\n                value = el.children[i].innerText.replace(\"\\n\", \"\");\r\n                if (value) {\r\n                    data.push(obj.getValue(i));\r\n                }\r\n            }\r\n            value = data.join(',');\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    /**\r\n     * Set the value of the element based on a string separeted by (,|;|\\r\\n)\r\n     * @param {mixed} value - A string or array object with values\r\n     */\r\n    obj.setValue = function(mixed) {\r\n        if (! mixed) {\r\n            obj.reset();\r\n        } else {\r\n            if (el.value != mixed) {\r\n                if (Array.isArray(mixed)) {\r\n                    obj.add(mixed);\r\n                } else {\r\n                    // Remove whitespaces\r\n                    var text = (''+mixed).trim();\r\n                    // Tags\r\n                    var data = extractTags(text);\r\n                    // Reset\r\n                    el.innerHTML = '';\r\n                    // Add tags to the element\r\n                    obj.add(data);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Reset the data from the element\r\n     */\r\n    obj.reset = function() {\r\n        // Empty class\r\n        el.classList.add('jtags-empty');\r\n        // Empty element\r\n        el.innerHTML = '<div></div>';\r\n        // Execute changes\r\n        change();\r\n    }\r\n\r\n    /**\r\n     * Verify if all tags in the element are valid\r\n     * @return {boolean}\r\n     */\r\n    obj.isValid = function() {\r\n        var test = 0;\r\n        for (var i = 0; i < el.children.length; i++) {\r\n            if (el.children[i].classList.contains('jtags_error')) {\r\n                test++;\r\n            }\r\n        }\r\n        return test == 0 ? true : false;\r\n    }\r\n\r\n    /**\r\n     * Add one element from the suggestions to the element\r\n     * @param {object} item - Node element in the suggestions container\r\n     */ \r\n    obj.selectIndex = function(text, value) {\r\n        var node = jSuites.getNode();\r\n        if (node) {\r\n            // Append text to the caret\r\n            node.innerText = text;\r\n            // Set node id\r\n            if (value) {\r\n                node.setAttribute('data-value', value);\r\n            }\r\n            // Remove any error\r\n            node.classList.remove('jtags_error');\r\n            if (! limit()) {\r\n                // Add new item\r\n                obj.add('', true);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Search for suggestions\r\n     * @param {object} node - Target node for any suggestions\r\n     */\r\n    obj.search = function(node) {\r\n        // Search for\r\n        var terms = node.innerText;\r\n    }\r\n\r\n    // Destroy tags element\r\n    obj.destroy = function() {\r\n        // Bind events\r\n        el.removeEventListener('mouseup', tagsMouseUp);\r\n        el.removeEventListener('keydown', tagsKeyDown);\r\n        el.removeEventListener('keyup', tagsKeyUp);\r\n        el.removeEventListener('paste', tagsPaste);\r\n        el.removeEventListener('focus', tagsFocus);\r\n        el.removeEventListener('blur', tagsBlur);\r\n\r\n        // Remove element\r\n        el.parentNode.removeChild(el);\r\n    }\r\n\r\n    var setFocus = function(node) {\r\n        if (el.children.length > 1) {\r\n            var range = document.createRange();\r\n            var sel = window.getSelection();\r\n            if (! node) {\r\n                var node = el.childNodes[el.childNodes.length-1];\r\n            }\r\n            range.setStart(node, node.length)\r\n            range.collapse(true)\r\n            sel.removeAllRanges()\r\n            sel.addRange(range)\r\n            el.scrollLeft = el.scrollWidth;\r\n        }\r\n    }\r\n\r\n    var createElement = function(label, value, node) {\r\n        var div = document.createElement('div');\r\n        div.innerHTML = label ? label : '';\r\n        if (value) {\r\n            div.setAttribute('data-value', value);\r\n        }\r\n\r\n        if (node && node.parentNode.classList.contains('jtags')) {\r\n            el.insertBefore(div, node.nextSibling);\r\n        } else {\r\n            el.appendChild(div);\r\n        }\r\n\r\n        return div;\r\n    }\r\n\r\n    var change = function() {\r\n        // Value\r\n        var value = obj.getValue();\r\n\r\n        if (value != obj.options.value) {\r\n            obj.options.value = value;\r\n            if (typeof(obj.options.onchange) == 'function') {\r\n                obj.options.onchange(el, obj, obj.options.value);\r\n            }\r\n\r\n            // Lemonade JS\r\n            if (el.value != obj.options.value) {\r\n                el.value = obj.options.value;\r\n                if (typeof(el.onchange) == 'function') {\r\n                    el.onchange({\r\n                        type: 'change',\r\n                        target: el,\r\n                        value: el.value\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        filter();\r\n    }\r\n\r\n    /**\r\n     * Filter tags\r\n     */\r\n    var filter = function() {\r\n        for (var i = 0; i < el.children.length; i++) {\r\n            // Create label design\r\n            if (! obj.getValue(i)) {\r\n                el.children[i].classList.remove('jtags_label');\r\n            } else {\r\n                el.children[i].classList.add('jtags_label');\r\n\r\n                // Validation in place\r\n                if (typeof(obj.options.validation) == 'function') {\r\n                    if (obj.getValue(i)) {\r\n                        if (! obj.options.validation(el.children[i], el.children[i].innerText, el.children[i].getAttribute('data-value'))) {\r\n                            el.children[i].classList.add('jtags_error');\r\n                        } else {\r\n                            el.children[i].classList.remove('jtags_error');\r\n                        }\r\n                    } else {\r\n                        el.children[i].classList.remove('jtags_error');\r\n                    }\r\n                } else {\r\n                    el.children[i].classList.remove('jtags_error');\r\n                }\r\n            }\r\n        }\r\n\r\n        isEmpty();\r\n    }\r\n\r\n    var isEmpty = function() {\r\n        // Can't be empty\r\n        if (! el.innerText.trim()) {\r\n            el.innerHTML = '<div></div>';\r\n            el.classList.add('jtags-empty');\r\n        } else {\r\n            el.classList.remove('jtags-empty');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Extract tags from a string\r\n     * @param {string} text - Raw string\r\n     * @return {Array} data - Array with extracted tags\r\n     */\r\n    var extractTags = function(text) {\r\n        /** @type {Array} */\r\n        var data = [];\r\n\r\n        /** @type {string} */\r\n        var word = '';\r\n\r\n        // Remove whitespaces\r\n        text = text.trim();\r\n\r\n        if (text) {\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (text[i] == ',' || text[i] == ';' || text[i] == '\\n') {\r\n                    if (word) {\r\n                        data.push(word.trim());\r\n                        word = '';\r\n                    }\r\n                } else {\r\n                    word += text[i];\r\n                }\r\n            }\r\n\r\n            if (word) {\r\n                data.push(word);\r\n            }\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n    /** @type {number} */\r\n    var anchorOffset = 0;\r\n\r\n    /**\r\n     * Processing event keydown on the element\r\n     * @param e {object}\r\n     */\r\n    var tagsKeyDown = function(e) {\r\n        // Anchoroffset\r\n        anchorOffset = window.getSelection().anchorOffset;\r\n\r\n        // Verify if is empty\r\n        isEmpty();\r\n\r\n        // Comma\r\n        if (e.key === 'Tab'  || e.key === ';' || e.key === ',') {\r\n            var n = window.getSelection().anchorOffset;\r\n            if (n > 1) {\r\n                if (limit()) {\r\n                    if (typeof(obj.options.onlimit) == 'function') {\r\n                        obj.options.onlimit(obj, obj.options.limit)\r\n                    }\r\n                } else {\r\n                    obj.add('', true);\r\n                }\r\n            }\r\n            e.preventDefault();\r\n        } else if (e.key == 'Enter') {\r\n            if (! search || ! search.isOpened()) {\r\n                var n = window.getSelection().anchorOffset;\r\n                if (n > 1) {\r\n                    if (! limit()) {\r\n                        obj.add('', true);\r\n                    }\r\n                }\r\n                e.preventDefault();\r\n            }\r\n        } else if (e.key == 'Backspace') {\r\n            // Back space - do not let last item to be removed\r\n            if (el.children.length == 1 && window.getSelection().anchorOffset < 1) {\r\n                e.preventDefault();\r\n            }\r\n        }\r\n\r\n        // Search events\r\n        if (search) {\r\n            search.keydown(e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Processing event keyup on the element\r\n     * @param e {object}\r\n     */\r\n    var tagsKeyUp = function(e) {\r\n        if (e.which == 39) {\r\n            // Right arrow\r\n            var n = window.getSelection().anchorOffset;\r\n            if (n > 1 && n == anchorOffset) {\r\n                obj.add('', true);\r\n            }\r\n        } else if (e.which == 13 || e.which == 38 || e.which == 40) {\r\n            e.preventDefault();\r\n        } else {\r\n            if (search) {\r\n                search.keyup(e);\r\n            }\r\n        }\r\n\r\n        filter();\r\n    }\r\n\r\n    /**\r\n     * Processing event paste on the element\r\n     * @param e {object}\r\n     */\r\n    var tagsPaste =  function(e) {\r\n        if (e.clipboardData || e.originalEvent.clipboardData) {\r\n            var text = (e.originalEvent || e).clipboardData.getData('text/plain');\r\n        } else if (window.clipboardData) {\r\n            var text = window.clipboardData.getData('Text');\r\n        }\r\n\r\n        var data = extractTags(text);\r\n        if (data.length > 1) {\r\n            obj.add(data, true);\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Processing event mouseup on the element\r\n     * @param e {object}\r\n     */\r\n    var tagsMouseUp = function(e) {\r\n        if (e.target.parentNode && e.target.parentNode.classList.contains('jtags')) {\r\n            if (e.target.classList.contains('jtags_label') || e.target.classList.contains('jtags_error')) {\r\n                var rect = e.target.getBoundingClientRect();\r\n                if (rect.width - (e.clientX - rect.left) < 16) {\r\n                    obj.remove(e.target);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Set focus in the last item\r\n        if (e.target == el) {\r\n            setFocus();\r\n        }\r\n    }\r\n\r\n    var tagsFocus = function() {\r\n        if (! el.classList.contains('jtags-focus')) {\r\n            if (! el.children.length || obj.getValue(el.children.length - 1)) {\r\n                if (! limit()) {\r\n                    createElement('');\r\n                }\r\n            }\r\n\r\n            if (typeof(obj.options.onfocus) == 'function') {\r\n                obj.options.onfocus(el, obj, obj.getValue());\r\n            }\r\n\r\n            el.classList.add('jtags-focus');\r\n        }\r\n    }\r\n\r\n    var tagsBlur = function() {\r\n        if (el.classList.contains('jtags-focus')) {\r\n            if (search) {\r\n                search.close();\r\n            }\r\n\r\n            for (var i = 0; i < el.children.length - 1; i++) {\r\n                // Create label design\r\n                if (! obj.getValue(i)) {\r\n                    el.removeChild(el.children[i]);\r\n                }\r\n            }\r\n\r\n            change();\r\n\r\n            el.classList.remove('jtags-focus');\r\n\r\n            if (typeof(obj.options.onblur) == 'function') {\r\n                obj.options.onblur(el, obj, obj.getValue());\r\n            }\r\n        }\r\n    }\r\n\r\n    var init = function() {\r\n        // Bind events\r\n        if ('touchend' in document.documentElement === true) {\r\n            el.addEventListener('touchend', tagsMouseUp);\r\n        } else {\r\n            el.addEventListener('mouseup', tagsMouseUp);\r\n        }\r\n\r\n        el.addEventListener('keydown', tagsKeyDown);\r\n        el.addEventListener('keyup', tagsKeyUp);\r\n        el.addEventListener('paste', tagsPaste);\r\n        el.addEventListener('focus', tagsFocus);\r\n        el.addEventListener('blur', tagsBlur);\r\n\r\n        // Editable\r\n        el.setAttribute('contenteditable', true);\r\n\r\n        // Prepare container\r\n        el.classList.add('jtags');\r\n\r\n        // Initial options\r\n        obj.setOptions(options);\r\n\r\n        if (typeof(obj.options.onload) == 'function') {\r\n            obj.options.onload(el, obj);\r\n        }\r\n\r\n        // Change methods\r\n        el.change = obj.setValue;\r\n\r\n        // Global generic value handler\r\n        el.val = function(val) {\r\n            if (val === undefined) {\r\n                return obj.getValue();\r\n            } else {\r\n                obj.setValue(val);\r\n            }\r\n        }\r\n\r\n        el.tags = obj;\r\n    }\r\n\r\n    init();\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.toolbar = (function(el, options) {\r\n    // New instance\r\n    var obj = { type:'toolbar' };\r\n    obj.options = {};\r\n\r\n    // Default configuration\r\n    var defaults = {\r\n        app: null,\r\n        container: false,\r\n        badge: false,\r\n        title: false,\r\n        responsive: false,\r\n        maxWidth: null,\r\n        bottom: true,\r\n        items: [],\r\n    }\r\n\r\n    // Loop through our object\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    if (! el && options.app && options.app.el) {\r\n        el = document.createElement('div');\r\n        options.app.el.appendChild(el);\r\n    }\r\n\r\n    // Arrow\r\n    var toolbarArrow = document.createElement('div');\r\n    toolbarArrow.classList.add('jtoolbar-item');\r\n    toolbarArrow.classList.add('jtoolbar-arrow');\r\n\r\n    var toolbarFloating = document.createElement('div');\r\n    toolbarFloating.classList.add('jtoolbar-floating');\r\n    toolbarArrow.appendChild(toolbarFloating);\r\n\r\n    obj.selectItem = function(element) {\r\n        var elements = toolbarContent.children;\r\n        for (var i = 0; i < elements.length; i++) {\r\n            if (element != elements[i]) {\r\n                elements[i].classList.remove('jtoolbar-selected');\r\n            }\r\n        }\r\n        element.classList.add('jtoolbar-selected');\r\n    }\r\n\r\n    obj.hide = function() {\r\n        jSuites.animation.slideBottom(el, 0, function() {\r\n            el.style.display = 'none';\r\n        });\r\n    }\r\n\r\n    obj.show = function() {\r\n        el.style.display = '';\r\n        jSuites.animation.slideBottom(el, 1);\r\n    }\r\n\r\n    obj.get = function() {\r\n        return el;\r\n    }\r\n\r\n    obj.setBadge = function(index, value) {\r\n        toolbarContent.children[index].children[1].firstChild.innerHTML = value;\r\n    }\r\n\r\n    obj.destroy = function() {\r\n        toolbar.remove();\r\n        el.innerHTML = '';\r\n    }\r\n\r\n    obj.update = function(a, b) {\r\n        for (var i = 0; i < toolbarContent.children.length; i++) {\r\n            // Toolbar element\r\n            var toolbarItem = toolbarContent.children[i];\r\n            // State management\r\n            if (typeof(toolbarItem.updateState) == 'function') {\r\n                toolbarItem.updateState(el, obj, toolbarItem, a, b);\r\n            }\r\n        }\r\n    }\r\n\r\n    obj.create = function(items) {\r\n        // Reset anything in the toolbar\r\n        toolbarContent.innerHTML = '';\r\n        // Create elements in the toolbar\r\n        for (var i = 0; i < items.length; i++) {\r\n            var toolbarItem = document.createElement('div');\r\n            toolbarItem.classList.add('jtoolbar-item');\r\n\r\n            if (items[i].width) {\r\n                toolbarItem.style.width = parseInt(items[i].width) + 'px'; \r\n            }\r\n\r\n            if (items[i].k) {\r\n                toolbarItem.k = items[i].k;\r\n            }\r\n\r\n            if (items[i].tooltip) {\r\n                toolbarItem.setAttribute('title', items[i].tooltip);\r\n            }\r\n\r\n            // Id\r\n            if (items[i].id) {\r\n                toolbarItem.setAttribute('id', items[i].id);\r\n            }\r\n\r\n            // Selected\r\n            if (items[i].updateState) {\r\n                toolbarItem.updateState = items[i].updateState;\r\n            }\r\n\r\n            if (items[i].active) {\r\n                toolbarItem.classList.add('jtoolbar-active');\r\n            }\r\n\r\n            if (items[i].type == 'select' || items[i].type == 'dropdown') {\r\n                jSuites.picker(toolbarItem, items[i]);\r\n            } else if (items[i].type == 'divisor') {\r\n                toolbarItem.classList.add('jtoolbar-divisor');\r\n            } else if (items[i].type == 'label') {\r\n                toolbarItem.classList.add('jtoolbar-label');\r\n                toolbarItem.innerHTML = items[i].content;\r\n            } else {\r\n                // Material icons\r\n                var toolbarIcon = document.createElement('i');\r\n                if (typeof(items[i].class) === 'undefined') {\r\n                    toolbarIcon.classList.add('material-icons');\r\n                } else {\r\n                    var c = items[i].class.split(' ');\r\n                    for (var j = 0; j < c.length; j++) {\r\n                        toolbarIcon.classList.add(c[j]);\r\n                    }\r\n                }\r\n                toolbarIcon.innerHTML = items[i].content ? items[i].content : '';\r\n                toolbarItem.appendChild(toolbarIcon);\r\n\r\n                // Badge options\r\n                if (obj.options.badge == true) {\r\n                    var toolbarBadge = document.createElement('div');\r\n                    toolbarBadge.classList.add('jbadge');\r\n                    var toolbarBadgeContent = document.createElement('div');\r\n                    toolbarBadgeContent.innerHTML = items[i].badge ? items[i].badge : '';\r\n                    toolbarBadge.appendChild(toolbarBadgeContent);\r\n                    toolbarItem.appendChild(toolbarBadge);\r\n                }\r\n\r\n                // Title\r\n                if (items[i].title) {\r\n                    if (obj.options.title == true) {\r\n                        var toolbarTitle = document.createElement('span');\r\n                        toolbarTitle.innerHTML = items[i].title;\r\n                        toolbarItem.appendChild(toolbarTitle);\r\n                    } else {\r\n                        toolbarItem.setAttribute('title', items[i].title);\r\n                    }\r\n                }\r\n\r\n                if (obj.options.app && items[i].route) {\r\n                    // Route\r\n                    toolbarItem.route = items[i].route;\r\n                    // Onclick for route\r\n                    toolbarItem.onclick = function() {\r\n                        obj.options.app.pages(this.route);\r\n                    }\r\n                    // Create pages\r\n                    obj.options.app.pages(items[i].route, {\r\n                        toolbarItem: toolbarItem,\r\n                        closed: true\r\n                    });\r\n                }\r\n            }\r\n\r\n            if (items[i].onclick) {\r\n                toolbarItem.onclick = items[i].onclick.bind(items[i], el, obj, toolbarItem);\r\n            }\r\n\r\n            toolbarContent.appendChild(toolbarItem);\r\n        }\r\n\r\n        // Fits to the page\r\n        setTimeout(function() {\r\n            obj.refresh();\r\n        }, 0);\r\n    }\r\n\r\n    obj.open = function() {\r\n        toolbarArrow.classList.add('jtoolbar-arrow-selected');\r\n\r\n        var rectElement = el.getBoundingClientRect();\r\n        var rect = toolbarFloating.getBoundingClientRect();\r\n        if (rect.bottom > window.innerHeight || obj.options.bottom) {\r\n            toolbarFloating.style.bottom = '0';\r\n        } else {\r\n            toolbarFloating.style.removeProperty('bottom');\r\n        }\r\n\r\n        toolbarFloating.style.right = '0';\r\n\r\n        toolbarArrow.children[0].focus();\r\n        // Start tracking\r\n        jSuites.tracking(obj, true);\r\n    }\r\n\r\n    obj.close = function() {\r\n        toolbarArrow.classList.remove('jtoolbar-arrow-selected')\r\n        // End tracking\r\n        jSuites.tracking(obj, false);\r\n    }\r\n\r\n    obj.refresh = function() {\r\n        if (obj.options.responsive == true) {\r\n            // Width of the c\r\n            var rect = el.parentNode.getBoundingClientRect();\r\n            if (! obj.options.maxWidth) {\r\n                obj.options.maxWidth = rect.width;\r\n            }\r\n            // Available parent space\r\n            var available = parseInt(obj.options.maxWidth);\r\n            // Remove arrow\r\n            toolbarArrow.remove();\r\n            // Move all items to the toolbar\r\n            while (toolbarFloating.firstChild) {\r\n                toolbarContent.appendChild(toolbarFloating.firstChild);\r\n            }\r\n            // Toolbar is larger than the parent, move elements to the floating element\r\n            if (available < toolbarContent.offsetWidth) {\r\n                // Give space to the floating element\r\n                available -= 50;\r\n                // Move to the floating option\r\n                while (toolbarContent.lastChild && available < toolbarContent.offsetWidth) {\r\n                    toolbarFloating.insertBefore(toolbarContent.lastChild, toolbarFloating.firstChild);\r\n                }\r\n            }\r\n            // Show arrow\r\n            if (toolbarFloating.children.length > 0) {\r\n                toolbarContent.appendChild(toolbarArrow);\r\n            }\r\n        }\r\n    }\r\n\r\n    el.onclick = function(e) {\r\n        var element = jSuites.findElement(e.target, 'jtoolbar-item');\r\n        if (element) {\r\n            obj.selectItem(element);\r\n        }\r\n\r\n        if (e.target.classList.contains('jtoolbar-arrow')) {\r\n            obj.open();\r\n        }\r\n    }\r\n\r\n    window.addEventListener('resize', function() {\r\n        obj.refresh();\r\n    });\r\n\r\n    // Toolbar\r\n    el.classList.add('jtoolbar');\r\n    // Reset content\r\n    el.innerHTML = '';\r\n    // Container\r\n    if (obj.options.container == true) {\r\n        el.classList.add('jtoolbar-container');\r\n    }\r\n    // Content\r\n    var toolbarContent = document.createElement('div');\r\n    el.appendChild(toolbarContent);\r\n    // Special toolbar for mobile applications\r\n    if (obj.options.app) {\r\n        el.classList.add('jtoolbar-mobile');\r\n    }\r\n    // Create toolbar\r\n    obj.create(obj.options.items);\r\n    // Shortcut\r\n    el.toolbar = obj;\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.validations = function(value, options) {\r\n    if (typeof(jSuites.validations[options.type]) === 'function') {\r\n        return jSuites.validations[options.type](value, options);\r\n    }\r\n    return null;\r\n};\r\n\r\n// Legacy\r\njSuites.validations.email = function(data) {\r\n    var pattern = new RegExp(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/);\r\n    return data && pattern.test(data) ? true : false; \r\n}\r\n\r\njSuites.validations.required = function(data) {\r\n    return data.trim() ? true : false;\r\n}\r\n\r\njSuites.validations.number = function(data) {\r\n    return jSuites.isNumber(data);\r\n}\r\n\r\njSuites.validations.login = function(data) {\r\n    var pattern = new RegExp(/^[a-zA-Z0-9\\_\\-\\.\\s+]+$/);\r\n    return data && pattern.test(data) ? true : false;\r\n}\r\n\r\n/**\r\n * Options: Object,\r\n * Properties: \r\n * Constraint,\r\n * Reference,\r\n * Value\r\n */\r\n\r\nvar valueComparisons = function(data, options) {\r\n    if (options.constraint === '=') {\r\n        return data === options.reference;\r\n    }\r\n    if (options.constraint === '<') {\r\n        return data < options.reference;\r\n    }\r\n    if (options.constraint === '<=') {\r\n        return data <= options.reference;\r\n    }\r\n    if (options.constraint === '>') {\r\n        return data > options.reference;\r\n    }\r\n    if (options.constraint === '>=') {\r\n        return data >= options.reference;\r\n    }\r\n    if (options.constraint === 'between') {\r\n        return data >= options.reference[0] && data <= options.reference[1];\r\n    }\r\n    if (options.constraint === 'not between') {\r\n        return data < options.reference[0] || data > options.reference[1];\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\njSuites.validations.number = function(data, options) {\r\n    if (!jSuites.isNumeric(data)) {\r\n        return false;\r\n    }\r\n\r\n    if (options === undefined || options.constraint === undefined) {\r\n        return true;\r\n    }\r\n\r\n    return valueComparisons(data, options);\r\n}\r\n\r\njSuites.validations.date = function(data, options) {\r\n    if (new Date(data) == 'Invalid Date') {\r\n        return false;\r\n    }\r\n\r\n    if (options === undefined || options.constraint === undefined) {\r\n        return true;\r\n    } else if (typeof(options) === 'object') {\r\n        data = new Date(data).getTime();\r\n\r\n        if (Array.isArray(options.reference)) {\r\n            options.reference = options.reference.map(function(reference) {\r\n                return new Date(reference).getTime();\r\n            });\r\n        } else {\r\n            options.reference = new Date(options.reference).getTime();\r\n        }\r\n\r\n        return valueComparisons(data, options);\r\n    }\r\n    return null;\r\n}\r\n\r\njSuites.validations.itemList = function(data, options) {\r\n    return options.reference.some(function(reference) {\r\n        return reference == data;\r\n    });\r\n}\r\n\r\njSuites.validations.text = function(data, options) {\r\n    if (typeof data !== 'string') {\r\n        return false;\r\n    }\r\n\r\n    if (options === undefined || options.constraint === undefined) {\r\n        return true;\r\n    }\r\n    if (options.constraint === '=') {\r\n        return data === options.reference;\r\n    }\r\n    if (options.constraint === 'contains') {\r\n        return data.includes(options.reference);\r\n    }\r\n    if (options.constraint === 'not contain') {\r\n        return !data.includes(options.reference);\r\n    }\r\n    if (options.constraint === 'email') {\r\n        return jSuites.validations.email(data);\r\n    }\r\n    if (options.constraint === 'url') {\r\n        var pattern = new RegExp(/(((https?:\\/\\/)|(www\\.))[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|]+)/ig);\r\n        return pattern.test(data) ? true : false;\r\n    }\r\n    return null;\r\n}\r\n\r\njSuites.validations.constraints = function() {\r\n}\r\n\r\n\r\n\r\n    return jSuites;\r\n\r\n})));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvanN1aXRlcy9kaXN0L2pzdWl0ZXMuanM/NjdjYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsSUFBSSxLQUE0RDtBQUNoRSxJQUFJLFNBQzBCO0FBQzlCLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMkJBQTJCLDRCQUE0QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsY0FBYztBQUN6QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLDJCQUEyQixjQUFjO0FBQ3pDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQXVCLHNDQUFzQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0NBQW9DO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkJBQTJCLG9CQUFvQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGlCQUFpQjtBQUNoRDtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLGNBQWM7QUFDckQ7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixjQUFjO0FBQ3JDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGNBQWM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVCQUF1QixvQ0FBb0M7QUFDM0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLG1FO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLGlFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCLE9BQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUIsT0FBTztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsT0FBTztBQUNsQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0Esc0M7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHVCQUF1QixRQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSwrQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUF1QixRQUFRO0FBQy9CO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHVCQUF1QixRQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGFBQWE7QUFDYjtBQUNBLGFBQWE7QUFDYjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVCQUF1QixRQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUIsUUFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQSw4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLEVBQUU7QUFDN0IseUJBQXlCLEVBQUU7QUFDM0Isd0JBQXdCLEVBQUU7QUFDMUIseUJBQXlCLEVBQUU7QUFDM0IsMEJBQTBCLEVBQUU7QUFDNUIseUJBQXlCLEVBQUU7QUFDM0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEIsRUFBRTtBQUNoQzs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSyx5QkFBeUI7QUFDOUI7QUFDQSxLQUFLLDBCQUEwQjtBQUMvQjtBQUNBLEtBQUssMEJBQTBCO0FBQy9CO0FBQ0EsS0FBSyw0QkFBNEI7QUFDakM7QUFDQSxLQUFLLE9BQU87QUFDWjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1CQUFtQixxQkFBcUI7QUFDeEM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdDQUFnQyxlQUFlO0FBQy9DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBOztBQUVBLDJCQUEyQixxQkFBcUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLE9BQU87QUFDNUIsc0JBQXNCLGVBQWU7QUFDckMsc0JBQXNCLE9BQU87QUFDN0Isc0JBQXNCLGdCQUFnQjtBQUN0QyxzQkFBc0IsZ0JBQWdCO0FBQ3RDLHNCQUFzQixPQUFPO0FBQzdCLHNCQUFzQixPQUFPO0FBQzdCLHNCQUFzQixPQUFPO0FBQzdCLHNCQUFzQixLQUFLO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCLGdDQUFnQztBQUN2RDtBQUNBLDJCQUEyQixtQ0FBbUM7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsMkJBQTJCLHNCQUFzQjtBQUNqRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUzs7QUFFVDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTOztBQUVUOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsQ0FBQzs7OztBQUlEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFD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QTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsY0FBYztBQUNyQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsK0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0NBQXdDLEU7O0FBRXhDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtB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QUE4QztBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSwyQkFBMkIsc0JBQXNCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwrQkFBK0IsWUFBWTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGtCQUFrQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FB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QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDO0FBQ0E7QUFDQTtBQUNBLDJDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx1QkFBdUIsY0FBYztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsdUJBQXVCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0M7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNB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QTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1RUFBdUU7QUFDdkU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLCtDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsMkI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCLFNBQVM7QUFDaEM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCLFlBQVk7QUFDbkM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLG1CQUFtQixnQkFBZ0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUIsUUFBUTtBQUMvQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUIsY0FBYztBQUNqQztBQUNBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUJBQXVCO0FBQzlDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FB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UztBQUNUO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixjQUFjO0FBQzdDLCtFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsY0FBYztB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O0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNkM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlO0FBQ2Y7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUIsaUJBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHVCQUF1Qix3QkFBd0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMkJBQTJCLHdCQUF3QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUF1Qix3QkFBd0I7QUFDL0M7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQSwyQkFBMkIsd0JBQXdCO0FBQ25EO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBLDJCQUEyQix3QkFBd0I7QUFDbkQ7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDJCQUEyQixTQUFTO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsd0JBQXdCO0FBQ25EOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVCQUF1Qiw2QkFBNkI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUIsd0JBQXdCO0FBQy9DO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix3QkFBd0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7O0FBRUE7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsbUJBQW1CLHdCQUF3QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0JBQXdCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsaUNBQWlDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUF1QixpQ0FBaUM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUIsaUNBQWlDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7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QkFBaUI7QUFDakI7QUFDQSxtQ0FBbUMsY0FBYztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRkFBbUY7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7OztBQUlBOztBQUVBLENBQUMiLCJmaWxlIjoiODU2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIChjKSBqU3VpdGVzIEphdmFzY3JpcHQgV2ViIENvbXBvbmVudHNcclxuICpcclxuICogV2Vic2l0ZTogaHR0cHM6Ly9qc3VpdGVzLm5ldFxyXG4gKiBEZXNjcmlwdGlvbjogQ3JlYXRlIGFtYXppbmcgd2ViIGJhc2VkIGFwcGxpY2F0aW9ucy5cclxuICpcclxuICogTUlUIExpY2Vuc2VcclxuICpcclxuICovXHJcbjsoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xyXG4gICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxyXG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcclxuICAgIGdsb2JhbC5qU3VpdGVzID0gZmFjdG9yeSgpO1xyXG59KHRoaXMsIChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGpTdWl0ZXMgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICB2YXIgb2JqID0ge31cclxuICAgIHZhciB2ZXJzaW9uID0gJzQuOS4yMSc7XHJcblxyXG4gICAgdmFyIGZpbmQgPSBmdW5jdGlvbihET01FbGVtZW50LCBjb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoRE9NRWxlbWVudFtjb21wb25lbnQudHlwZV0gJiYgRE9NRWxlbWVudFtjb21wb25lbnQudHlwZV0gPT0gY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoRE9NRWxlbWVudC5wYXJlbnROb2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmaW5kKERPTUVsZW1lbnQucGFyZW50Tm9kZSwgY29tcG9uZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBpc09wZW5lZCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoalN1aXRlcy5jdXJyZW50Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBqU3VpdGVzLmN1cnJlbnQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChqU3VpdGVzLmN1cnJlbnRbaV0gJiYgISBmaW5kKGVsZW1lbnQsIGpTdWl0ZXMuY3VycmVudFtpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBqU3VpdGVzLmN1cnJlbnRbaV0uY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvYmouaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmNoYW5nZWRUb3VjaGVzICYmIGUuY2hhbmdlZFRvdWNoZXNbMF0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IGUuY2xpZW50WDtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gZS5jbGllbnRZO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgJiYgZS50YXJnZXQuc2hhZG93Um9vdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSBlLnRhcmdldC5zaGFkb3dSb290O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSBkb2N1bWVudDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gR2V0IHRoZSBmaXJzdCB0YXJnZXQgZWxlbWVudFxyXG4gICAgICAgICAgICBlbGVtZW50ID0gZC5lbGVtZW50RnJvbVBvaW50KHgsIHkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBvcGVuZWQgY29tcG9uZW50c1xyXG4gICAgICAgICAgICBpc09wZW5lZChlbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgb2JqLnZlcnNpb24gPSB2ZXJzaW9uO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5zZXRFeHRlbnNpb25zID0gZnVuY3Rpb24obykge1xyXG4gICAgICAgIGlmICh0eXBlb2YobykgPT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgdmFyIGsgPSBPYmplY3Qua2V5cyhvKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBvYmpba1tpXV0gPSBvW2tbaV1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9iai50cmFja2luZyA9IGZ1bmN0aW9uKGNvbXBvbmVudCwgc3RhdGUpIHtcclxuICAgICAgICBpZiAoc3RhdGUgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBqU3VpdGVzLmN1cnJlbnQgPSBqU3VpdGVzLmN1cnJlbnQuZmlsdGVyKGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2ICE9PSBudWxsO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFN0YXJ0IGFmdGVyIGFsbCBldmVudHNcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGpTdWl0ZXMuY3VycmVudC5wdXNoKGNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBqU3VpdGVzLmN1cnJlbnQuaW5kZXhPZihjb21wb25lbnQpO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgalN1aXRlcy5jdXJyZW50W2luZGV4XSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgb3Igc2V0IGEgcHJvcGVydHkgZnJvbSBhIEpTT04gZnJvbSBhIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgb2JqLnBhdGggPSBmdW5jdGlvbihzdHIsIHZhbCkge1xyXG4gICAgICAgIHN0ciA9IHN0ci5zcGxpdCgnLicpO1xyXG4gICAgICAgIGlmIChzdHIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHZhciBvID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIHAgPSBudWxsO1xyXG4gICAgICAgICAgICB3aGlsZSAoc3RyLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgcHJvcGVydHlcclxuICAgICAgICAgICAgICAgIHAgPSBzdHIuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBwcm9wZXJ0eSBleGlzdHNcclxuICAgICAgICAgICAgICAgIGlmIChvLmhhc093blByb3BlcnR5KHApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbyA9IG9bcF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFByb3BlcnR5IGRvZXMgbm90IGV4aXN0c1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgcHJvcGVydHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgb1twXSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOZXh0IHByb3BlcnR5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBvW3BdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBHZXQgdGhlIHByb3BlcnR5XHJcbiAgICAgICAgICAgIHAgPSBzdHIuc2hpZnQoKTtcclxuICAgICAgICAgICAgLy8gU2V0IG9yIGdldCB0aGUgdmFsdWVcclxuICAgICAgICAgICAgaWYgKHZhbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBvW3BdID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgLy8gU3VjY2Vzc1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHZhbHVlXHJcbiAgICAgICAgICAgICAgICBpZiAobykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvW3BdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNvbWV0aGluZyB3ZW50IHdyb25nXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBkaWN0aW9uYXJ5XHJcbiAgICBvYmouc2V0RGljdGlvbmFyeSA9IGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICB2YXIgayA9IE9iamVjdC5rZXlzKG9iai5kaWN0aW9uYXJ5KTtcclxuICAgICAgICBpZiAoay5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICBvYmouZGljdGlvbmFyeSA9IGQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUga2V5IGludG8gdGhlIGRpY3Rpb25hcnkgYW5kIGFwcGVuZCB0aGUgbmV3IG9uZXNcclxuICAgICAgICAgICAgdmFyIGsgPSBPYmplY3Qua2V5cyhkKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouZGljdGlvbmFyeVtrW2ldXSA9IGRba1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRyYW5zbGF0aW9uc1xyXG4gICAgICAgIHZhciB0ID0gbnVsbDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGpTdWl0ZXMuY2FsZW5kYXIud2Vla2RheXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdCA9ICBqU3VpdGVzLnRyYW5zbGF0ZShqU3VpdGVzLmNhbGVuZGFyLndlZWtkYXlzW2ldKTtcclxuICAgICAgICAgICAgaWYgKGpTdWl0ZXMuY2FsZW5kYXIud2Vla2RheXNbaV0pIHtcclxuICAgICAgICAgICAgICAgIGpTdWl0ZXMuY2FsZW5kYXIud2Vla2RheXNbaV0gPSB0O1xyXG4gICAgICAgICAgICAgICAgalN1aXRlcy5jYWxlbmRhci53ZWVrZGF5c1Nob3J0W2ldID0gdC5zdWJzdHIoMCwzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGpTdWl0ZXMuY2FsZW5kYXIubW9udGhzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHQgPSBqU3VpdGVzLnRyYW5zbGF0ZShqU3VpdGVzLmNhbGVuZGFyLm1vbnRoc1tpXSk7XHJcbiAgICAgICAgICAgIGlmICh0KSB7XHJcbiAgICAgICAgICAgICAgICBqU3VpdGVzLmNhbGVuZGFyLm1vbnRoc1tpXSA9IHQ7XHJcbiAgICAgICAgICAgICAgICBqU3VpdGVzLmNhbGVuZGFyLm1vbnRoc1Nob3J0W2ldID0gdC5zdWJzdHIoMCwzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBEaWN0aW9uYXJ5XHJcbiAgICBvYmouZGljdGlvbmFyeSA9IHt9O1xyXG5cclxuICAgIC8vIFRyYW5zbGF0ZVxyXG4gICAgb2JqLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKHQpIHtcclxuICAgICAgICByZXR1cm4gb2JqLmRpY3Rpb25hcnlbdF0gfHwgdDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBcnJheSBvZiBvcGVuZWQgY29tcG9uZW50c1xyXG4gICAgb2JqLmN1cnJlbnQgPSBbXTtcclxuXHJcbiAgICByZXR1cm4gb2JqO1xyXG59KCk7XHJcblxyXG4vKipcclxuICogR2xvYmFsIGpzdWl0ZXMgZXZlbnRcclxuICovXHJcbmlmICh0eXBlb2YoZG9jdW1lbnQpICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICBqU3VpdGVzLmluaXQoKTtcclxufVxyXG5cclxualN1aXRlcy5hamF4ID0gKGZ1bmN0aW9uKG9wdGlvbnMsIGNvbXBsZXRlKSB7XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zKSkge1xyXG4gICAgICAgIC8vIENyZWF0ZSBtdWx0aXBsZSByZXF1ZXN0IGNvbnRyb2xsZXIgXHJcbiAgICAgICAgdmFyIG11bHRpcGxlID0ge1xyXG4gICAgICAgICAgICBpbnN0YW5jZTogW10sXHJcbiAgICAgICAgICAgIGNvbXBsZXRlOiBjb21wbGV0ZSxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChvcHRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zW2ldLm11bHRpcGxlID0gbXVsdGlwbGU7XHJcbiAgICAgICAgICAgICAgICBtdWx0aXBsZS5pbnN0YW5jZS5wdXNoKGpTdWl0ZXMuYWpheChvcHRpb25zW2ldKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBtdWx0aXBsZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoISBvcHRpb25zLmRhdGEpIHtcclxuICAgICAgICBvcHRpb25zLmRhdGEgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAob3B0aW9ucy50eXBlKSB7XHJcbiAgICAgICAgb3B0aW9ucy5tZXRob2QgPSBvcHRpb25zLnR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVmYXVsdCBtZXRob2RcclxuICAgIGlmICghIG9wdGlvbnMubWV0aG9kKSB7XHJcbiAgICAgICAgb3B0aW9ucy5tZXRob2QgPSAnR0VUJztcclxuICAgIH1cclxuXHJcbiAgICAvLyBEZWZhdWx0IHR5cGVcclxuICAgIGlmICghIG9wdGlvbnMuZGF0YVR5cGUpIHtcclxuICAgICAgICBvcHRpb25zLmRhdGFUeXBlID0gJ2pzb24nO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvcHRpb25zLmRhdGEpIHtcclxuICAgICAgICAvLyBQYXJzZSBvYmplY3QgdG8gdmFyaWFibGVzIGZvcm1hdFxyXG4gICAgICAgIHZhciBwYXJzZURhdGEgPSBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICAgIHZhciB2YXJzID0gW107XHJcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAoa2V5cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGsgPSBrZXkgKyAnWycgKyBrZXlzW2ldICsgJ10nO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrID0ga2V5c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YodmFsdWVba2V5c1tpXV0pID09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gcGFyc2VEYXRhKHZhbHVlW2tleXNbaV1dLCBrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBPYmplY3Qua2V5cyhyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJzW29bal1dID0gcltvW2pdXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcnNba10gPSB2YWx1ZVtrZXlzW2ldXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2YXJzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGRhdGEgPSBbXTtcclxuICAgICAgICB2YXIgZCA9IHBhcnNlRGF0YShvcHRpb25zLmRhdGEpO1xyXG4gICAgICAgIHZhciBrID0gT2JqZWN0LmtleXMoZCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGRhdGEucHVzaChrW2ldICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRba1tpXV0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChvcHRpb25zLm1ldGhvZCA9PSAnR0VUJyAmJiBkYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXJsLmluZGV4T2YoJz8nKSA8IDApIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMudXJsICs9ICc/JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcHRpb25zLnVybCArPSBkYXRhLmpvaW4oJyYnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGh0dHBSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICBodHRwUmVxdWVzdC5vcGVuKG9wdGlvbnMubWV0aG9kLCBvcHRpb25zLnVybCwgdHJ1ZSk7XHJcbiAgICBodHRwUmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdYLVJlcXVlc3RlZC1XaXRoJywgJ1hNTEh0dHBSZXF1ZXN0Jyk7XHJcblxyXG4gICAgaWYgKG9wdGlvbnMubWV0aG9kID09ICdQT1NUJykge1xyXG4gICAgICAgIGh0dHBSZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICAgICAgaHR0cFJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAob3B0aW9ucy5kYXRhVHlwZSA9PSAnanNvbicpIHtcclxuICAgICAgICAgICAgaHR0cFJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ3RleHQvanNvbicpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5kYXRhVHlwZSA9PSAnYmxvYicpIHtcclxuICAgICAgICAgICAgaHR0cFJlcXVlc3QucmVzcG9uc2VUeXBlID0gXCJibG9iXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmRhdGFUeXBlID09ICdodG1sJykge1xyXG4gICAgICAgICAgICBodHRwUmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAndGV4dC9odG1sJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE5vIGNhY2hlXHJcbiAgICBpZiAob3B0aW9ucy5jYWNoZSAhPSB0cnVlKSB7XHJcbiAgICAgICAgaHR0cFJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcigncHJhZ21hJywgJ25vLWNhY2hlJyk7XHJcbiAgICAgICAgaHR0cFJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignY2FjaGUtY29udHJvbCcsICduby1jYWNoZScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEF1dGhlbnRpY2F0aW9uXHJcbiAgICBpZiAob3B0aW9ucy53aXRoQ3JlZGVudGlhbHMgPT0gdHJ1ZSkge1xyXG4gICAgICAgIGh0dHBSZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9IHRydWVcclxuICAgIH1cclxuXHJcbiAgICAvLyBCZWZvcmUgc2VuZFxyXG4gICAgaWYgKHR5cGVvZihvcHRpb25zLmJlZm9yZVNlbmQpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBvcHRpb25zLmJlZm9yZVNlbmQoaHR0cFJlcXVlc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGh0dHBSZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChodHRwUmVxdWVzdC5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kYXRhVHlwZSA9PSAnanNvbicpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IEpTT04ucGFyc2UoaHR0cFJlcXVlc3QucmVzcG9uc2VUZXh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3VjY2VzcyAmJiB0eXBlb2Yob3B0aW9ucy5zdWNjZXNzKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc3VjY2VzcyhyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZXJyb3IgJiYgdHlwZW9mKG9wdGlvbnMuZXJyb3IpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5lcnJvcihlcnIsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGF0YVR5cGUgPT0gJ2Jsb2InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGh0dHBSZXF1ZXN0LnJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gaHR0cFJlcXVlc3QucmVzcG9uc2VUZXh0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN1Y2Nlc3MgJiYgdHlwZW9mKG9wdGlvbnMuc3VjY2VzcykgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc3VjY2VzcyhyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZXJyb3IgJiYgdHlwZW9mKG9wdGlvbnMuZXJyb3IpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZXJyb3IoaHR0cFJlcXVlc3QucmVzcG9uc2VUZXh0LCBodHRwUmVxdWVzdC5zdGF0dXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBHbG9iYWwgcXVldWVcclxuICAgICAgICBpZiAoalN1aXRlcy5hamF4LnF1ZXVlICYmIGpTdWl0ZXMuYWpheC5xdWV1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGpTdWl0ZXMuYWpheC5zZW5kKGpTdWl0ZXMuYWpheC5xdWV1ZS5zaGlmdCgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdsb2JhbCBjb21wbGV0ZSBtZXRob2RcclxuICAgICAgICBpZiAoalN1aXRlcy5hamF4LnJlcXVlc3RzICYmIGpTdWl0ZXMuYWpheC5yZXF1ZXN0cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gR2V0IGluZGV4IG9mIHRoaXMgcmVxdWVzdCBpbiB0aGUgY29udGFpbmVyXHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGpTdWl0ZXMuYWpheC5yZXF1ZXN0cy5pbmRleE9mKGh0dHBSZXF1ZXN0KTtcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIGZyb20gdGhlIGFqYXggcmVxdWVzdHMgY29udGFpbmVyXHJcbiAgICAgICAgICAgIGpTdWl0ZXMuYWpheC5yZXF1ZXN0cy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAvLyBEZXByZWN0ZWQ6IExhc3Qgb25lP1xyXG4gICAgICAgICAgICBpZiAoISBqU3VpdGVzLmFqYXgucmVxdWVzdHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBPYmplY3QgZXZlbnRcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbXBsZXRlICYmIHR5cGVvZihvcHRpb25zLmNvbXBsZXRlKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jb21wbGV0ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEdyb3VwIHJlcXVlc3RzXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoalN1aXRlcy5hamF4Lm9uY29tcGxldGUgJiYgdHlwZW9mKGpTdWl0ZXMuYWpheC5vbmNvbXBsZXRlW29wdGlvbnMuZ3JvdXBdKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgalN1aXRlcy5hamF4LnBlbmRpbmcob3B0aW9ucy5ncm91cCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgalN1aXRlcy5hamF4Lm9uY29tcGxldGVbb3B0aW9ucy5ncm91cF0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgalN1aXRlcy5hamF4Lm9uY29tcGxldGVbb3B0aW9ucy5ncm91cF0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBNdWx0aXBsZSByZXF1ZXN0cyBjb250cm9sbGVyXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm11bHRpcGxlICYmIG9wdGlvbnMubXVsdGlwbGUuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIEdldCBpbmRleCBvZiB0aGlzIHJlcXVlc3QgaW4gdGhlIGNvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gb3B0aW9ucy5tdWx0aXBsZS5pbnN0YW5jZS5pbmRleE9mKGh0dHBSZXF1ZXN0KTtcclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBmcm9tIHRoZSBhamF4IHJlcXVlc3RzIGNvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5tdWx0aXBsZS5pbnN0YW5jZS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgbGFzdCBvbmUgY2FsbCBtZXRob2QgY29tcGxldGVcclxuICAgICAgICAgICAgICAgIGlmICghIG9wdGlvbnMubXVsdGlwbGUuaW5zdGFuY2UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubXVsdGlwbGUuY29tcGxldGUgJiYgdHlwZW9mKG9wdGlvbnMubXVsdGlwbGUuY29tcGxldGUpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5tdWx0aXBsZS5jb21wbGV0ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBLZWVwIHRoZSBvcHRpb25zXHJcbiAgICBodHRwUmVxdWVzdC5vcHRpb25zID0gb3B0aW9ucztcclxuICAgIC8vIERhdGFcclxuICAgIGh0dHBSZXF1ZXN0LmRhdGEgPSBkYXRhO1xyXG5cclxuICAgIC8vIFF1ZXVlXHJcbiAgICBpZiAob3B0aW9ucy5xdWV1ZSA9PSB0cnVlICYmIGpTdWl0ZXMuYWpheC5yZXF1ZXN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgalN1aXRlcy5hamF4LnF1ZXVlLnB1c2goaHR0cFJlcXVlc3QpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBqU3VpdGVzLmFqYXguc2VuZChodHRwUmVxdWVzdClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaHR0cFJlcXVlc3Q7XHJcbn0pO1xyXG5cclxualN1aXRlcy5hamF4LnNlbmQgPSBmdW5jdGlvbihodHRwUmVxdWVzdCkge1xyXG4gICAgaWYgKGh0dHBSZXF1ZXN0LmRhdGEpIHtcclxuICAgICAgICBodHRwUmVxdWVzdC5zZW5kKGh0dHBSZXF1ZXN0LmRhdGEuam9pbignJicpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaHR0cFJlcXVlc3Quc2VuZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGpTdWl0ZXMuYWpheC5yZXF1ZXN0cy5wdXNoKGh0dHBSZXF1ZXN0KTtcclxufVxyXG5cclxualN1aXRlcy5hamF4LmV4aXN0cyA9IGZ1bmN0aW9uKHVybCwgX19jYWxsYmFjaykge1xyXG4gICAgdmFyIGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIGh0dHAub3BlbignSEVBRCcsIHVybCwgZmFsc2UpO1xyXG4gICAgaHR0cC5zZW5kKCk7XHJcbiAgICBpZiAoaHR0cC5zdGF0dXMpIHtcclxuICAgICAgICBfX2NhbGxiYWNrKGh0dHAuc3RhdHVzKTtcclxuICAgIH1cclxufVxyXG5cclxualN1aXRlcy5hamF4LnBlbmRpbmcgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgdmFyIG4gPSAwO1xyXG4gICAgdmFyIG8gPSBqU3VpdGVzLmFqYXgucmVxdWVzdHM7XHJcbiAgICBpZiAobyAmJiBvLmxlbmd0aCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgby5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoISBncm91cCB8fCBncm91cCA9PSBvW2ldLm9wdGlvbnMuZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgIG4rK1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG47XHJcbn1cclxuXHJcbmpTdWl0ZXMuYWpheC5vbmNvbXBsZXRlID0ge307XHJcbmpTdWl0ZXMuYWpheC5yZXF1ZXN0cyA9IFtdO1xyXG5qU3VpdGVzLmFqYXgucXVldWUgPSBbXTtcclxuXHJcbmpTdWl0ZXMuYWxlcnQgPSBmdW5jdGlvbihtZXNzYWdlKSB7XHJcbiAgICBpZiAoalN1aXRlcy5nZXRXaW5kb3dXaWR0aCgpIDwgODAwICYmIGpTdWl0ZXMuZGlhbG9nKSB7XHJcbiAgICAgICAgalN1aXRlcy5kaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgIHRpdGxlOidBbGVydCcsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6bWVzc2FnZSxcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYWxlcnQobWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmpTdWl0ZXMuYW5pbWF0aW9uID0ge307XHJcblxyXG5qU3VpdGVzLmFuaW1hdGlvbi5zbGlkZUxlZnQgPSBmdW5jdGlvbihlbGVtZW50LCBkaXJlY3Rpb24sIGRvbmUpIHtcclxuICAgIGlmIChkaXJlY3Rpb24gPT0gdHJ1ZSkge1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2xpZGUtbGVmdC1pbicpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGUtbGVmdC1pbicpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKGRvbmUpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDQwMCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2xpZGUtbGVmdC1vdXQnKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlLWxlZnQtb3V0Jyk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YoZG9uZSkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgZG9uZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgNDAwKTtcclxuICAgIH1cclxufVxyXG5cclxualN1aXRlcy5hbmltYXRpb24uc2xpZGVSaWdodCA9IGZ1bmN0aW9uKGVsZW1lbnQsIGRpcmVjdGlvbiwgZG9uZSkge1xyXG4gICAgaWYgKGRpcmVjdGlvbiA9PSB0cnVlKSB7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzbGlkZS1yaWdodC1pbicpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGUtcmlnaHQtaW4nKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZihkb25lKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBkb25lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCA0MDApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3NsaWRlLXJpZ2h0LW91dCcpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGUtcmlnaHQtb3V0Jyk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YoZG9uZSkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgZG9uZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgNDAwKTtcclxuICAgIH1cclxufVxyXG5cclxualN1aXRlcy5hbmltYXRpb24uc2xpZGVUb3AgPSBmdW5jdGlvbihlbGVtZW50LCBkaXJlY3Rpb24sIGRvbmUpIHtcclxuICAgIGlmIChkaXJlY3Rpb24gPT0gdHJ1ZSkge1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2xpZGUtdG9wLWluJyk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZS10b3AtaW4nKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZihkb25lKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBkb25lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCA0MDApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3NsaWRlLXRvcC1vdXQnKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlLXRvcC1vdXQnKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZihkb25lKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBkb25lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCA0MDApO1xyXG4gICAgfVxyXG59XHJcblxyXG5qU3VpdGVzLmFuaW1hdGlvbi5zbGlkZUJvdHRvbSA9IGZ1bmN0aW9uKGVsZW1lbnQsIGRpcmVjdGlvbiwgZG9uZSkge1xyXG4gICAgaWYgKGRpcmVjdGlvbiA9PSB0cnVlKSB7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzbGlkZS1ib3R0b20taW4nKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlLWJvdHRvbS1pbicpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKGRvbmUpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDQwMCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2xpZGUtYm90dG9tLW91dCcpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGUtYm90dG9tLW91dCcpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKGRvbmUpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDEwMCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmpTdWl0ZXMuYW5pbWF0aW9uLmZhZGVJbiA9IGZ1bmN0aW9uKGVsZW1lbnQsIGRvbmUpIHtcclxuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdmYWRlLWluJyk7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZmFkZS1pbicpO1xyXG4gICAgICAgIGlmICh0eXBlb2YoZG9uZSkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBkb25lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgMjAwMCk7XHJcbn1cclxuXHJcbmpTdWl0ZXMuYW5pbWF0aW9uLmZhZGVPdXQgPSBmdW5jdGlvbihlbGVtZW50LCBkb25lKSB7XHJcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ZhZGUtb3V0Jyk7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2ZhZGUtb3V0Jyk7XHJcbiAgICAgICAgaWYgKHR5cGVvZihkb25lKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9LCAxMDAwKTtcclxufVxyXG5cclxualN1aXRlcy5jYWxlbmRhciA9IChmdW5jdGlvbihlbCwgb3B0aW9ucykge1xyXG4gICAgLy8gQWxyZWFkeSBjcmVhdGVkLCB1cGRhdGUgb3B0aW9uc1xyXG4gICAgaWYgKGVsLmNhbGVuZGFyKSB7XHJcbiAgICAgICAgcmV0dXJuIGVsLmNhbGVuZGFyLnNldE9wdGlvbnMob3B0aW9ucywgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTmV3IGluc3RhbmNlXHJcbiAgICB2YXIgb2JqID0geyB0eXBlOidjYWxlbmRhcicgfTtcclxuICAgIG9iai5vcHRpb25zID0ge307XHJcblxyXG4gICAgLy8gRGF0ZVxyXG4gICAgb2JqLmRhdGUgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgb2JqLnNldE9wdGlvbnMgPSBmdW5jdGlvbihvcHRpb25zLCByZXNldCkge1xyXG4gICAgICAgIC8vIERlZmF1bHQgY29uZmlndXJhdGlvblxyXG4gICAgICAgIHZhciBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgLy8gUmVuZGVyIHR5cGU6IFsgZGVmYXVsdCB8IHllYXItbW9udGgtcGlja2VyIF1cclxuICAgICAgICAgICAgdHlwZTogJ2RlZmF1bHQnLFxyXG4gICAgICAgICAgICAvLyBSZXN0cmljdGlvbnNcclxuICAgICAgICAgICAgdmFsaWRSYW5nZTogbnVsbCxcclxuICAgICAgICAgICAgLy8gU3RhcnRpbmcgd2Vla2RheSAtIDAgZm9yIHN1bmRheSwgNiBmb3Igc2F0dXJkYXlcclxuICAgICAgICAgICAgc3RhcnRpbmdEYXk6IG51bGwsIFxyXG4gICAgICAgICAgICAvLyBEYXRlIGZvcm1hdFxyXG4gICAgICAgICAgICBmb3JtYXQ6ICdERC9NTS9ZWVlZJyxcclxuICAgICAgICAgICAgLy8gQWxsb3cga2V5Ym9hcmQgZGF0ZSBlbnRyeVxyXG4gICAgICAgICAgICByZWFkb25seTogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gVG9kYXkgaXMgZGVmYXVsdFxyXG4gICAgICAgICAgICB0b2RheTogZmFsc2UsXHJcbiAgICAgICAgICAgIC8vIFNob3cgdGltZXBpY2tlclxyXG4gICAgICAgICAgICB0aW1lOiBmYWxzZSxcclxuICAgICAgICAgICAgLy8gU2hvdyB0aGUgcmVzZXQgYnV0dG9uXHJcbiAgICAgICAgICAgIHJlc2V0QnV0dG9uOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBQbGFjZWhvbGRlclxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXHJcbiAgICAgICAgICAgIC8vIFRyYW5zbGF0aW9ucyBjYW4gYmUgZG9uZSBoZXJlXHJcbiAgICAgICAgICAgIG1vbnRoczogalN1aXRlcy5jYWxlbmRhci5tb250aHNTaG9ydCxcclxuICAgICAgICAgICAgbW9udGhzRnVsbDogalN1aXRlcy5jYWxlbmRhci5tb250aHMsXHJcbiAgICAgICAgICAgIHdlZWtkYXlzOiBqU3VpdGVzLmNhbGVuZGFyLndlZWtkYXlzLFxyXG4gICAgICAgICAgICB3ZWVrZGF5c19zaG9ydDogalN1aXRlcy5jYWxlbmRhci53ZWVrZGF5cyxcclxuICAgICAgICAgICAgdGV4dERvbmU6IGpTdWl0ZXMudHJhbnNsYXRlKCdEb25lJyksXHJcbiAgICAgICAgICAgIHRleHRSZXNldDogalN1aXRlcy50cmFuc2xhdGUoJ1Jlc2V0JyksXHJcbiAgICAgICAgICAgIHRleHRVcGRhdGU6IGpTdWl0ZXMudHJhbnNsYXRlKCdVcGRhdGUnKSxcclxuICAgICAgICAgICAgLy8gVmFsdWVcclxuICAgICAgICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgICAgICAgIC8vIEZ1bGxzY3JlZW4gKHRoaXMgaXMgYXV0b21hdGljIHNldCBmb3Igc2NyZWVuc2l6ZSA8IDgwMClcclxuICAgICAgICAgICAgZnVsbHNjcmVlbjogZmFsc2UsXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY2FsZW5kYXIgY2xvc2VkIGFzIGRlZmF1bHRcclxuICAgICAgICAgICAgb3BlbmVkOiBmYWxzZSxcclxuICAgICAgICAgICAgLy8gRXZlbnRzXHJcbiAgICAgICAgICAgIG9ub3BlbjogbnVsbCxcclxuICAgICAgICAgICAgb25jbG9zZTogbnVsbCxcclxuICAgICAgICAgICAgb25jaGFuZ2U6IG51bGwsXHJcbiAgICAgICAgICAgIG9udXBkYXRlOiBudWxsLFxyXG4gICAgICAgICAgICAvLyBJbnRlcm5hbCBtb2RlIGNvbnRyb2xsZXJcclxuICAgICAgICAgICAgbW9kZTogbnVsbCxcclxuICAgICAgICAgICAgcG9zaXRpb246IG51bGwsXHJcbiAgICAgICAgICAgIC8vIERhdGEgdHlwZVxyXG4gICAgICAgICAgICBkYXRhVHlwZTogbnVsbCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVmYXVsdHMud2Vla2RheXNfc2hvcnQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZGVmYXVsdHMud2Vla2RheXNfc2hvcnRbaV0gPSBkZWZhdWx0cy53ZWVrZGF5c19zaG9ydFtpXS5zdWJzdHIoMCwxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBvdXIgb2JqZWN0XHJcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gZGVmYXVsdHMpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zW3Byb3BlcnR5XSA9IG9wdGlvbnNbcHJvcGVydHldO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9uc1twcm9wZXJ0eV0pID09ICd1bmRlZmluZWQnIHx8IHJlc2V0ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnNbcHJvcGVydHldID0gZGVmYXVsdHNbcHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZXNldCBidXR0b25cclxuICAgICAgICBpZiAob2JqLm9wdGlvbnMucmVzZXRCdXR0b24gPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgY2FsZW5kYXJSZXNldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNhbGVuZGFyUmVzZXQuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVhZG9ubHlcclxuICAgICAgICBpZiAob2JqLm9wdGlvbnMucmVhZG9ubHkpIHtcclxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdyZWFkb25seScsICdyZWFkb25seScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgncmVhZG9ubHknKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFBsYWNlaG9sZGVyXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLnBsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCBvYmoub3B0aW9ucy5wbGFjZWhvbGRlcik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdwbGFjZWhvbGRlcicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGpTdWl0ZXMuaXNOdW1lcmljKG9iai5vcHRpb25zLnZhbHVlKSAmJiBvYmoub3B0aW9ucy52YWx1ZSA+IDApIHtcclxuICAgICAgICAgICAgb2JqLm9wdGlvbnMudmFsdWUgPSBqU3VpdGVzLmNhbGVuZGFyLm51bVRvRGF0ZShvYmoub3B0aW9ucy52YWx1ZSk7XHJcbiAgICAgICAgICAgIC8vIERhdGEgdHlwZSBudW1iZXJpY1xyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhVHlwZSA9ICdudW1lcmljJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRleHRzXHJcbiAgICAgICAgY2FsZW5kYXJSZXNldC5pbm5lckhUTUwgPSBvYmoub3B0aW9ucy50ZXh0UmVzZXQ7XHJcbiAgICAgICAgY2FsZW5kYXJDb25maXJtLmlubmVySFRNTCA9IG9iai5vcHRpb25zLnRleHREb25lO1xyXG4gICAgICAgIGNhbGVuZGFyQ29udHJvbHNVcGRhdGVCdXR0b24uaW5uZXJIVE1MID0gb2JqLm9wdGlvbnMudGV4dFVwZGF0ZTtcclxuXHJcbiAgICAgICAgLy8gRGVmaW5lIG1hc2tcclxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWFzaycsIG9iai5vcHRpb25zLmZvcm1hdC50b0xvd2VyQ2FzZSgpKTtcclxuXHJcbiAgICAgICAgLy8gVmFsdWVcclxuICAgICAgICBpZiAoISBvYmoub3B0aW9ucy52YWx1ZSAmJiBvYmoub3B0aW9ucy50b2RheSkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBqU3VpdGVzLmNhbGVuZGFyLm5vdygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9iai5vcHRpb25zLnZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2V0IGludGVybmFsIGRhdGVcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gRm9yY2UgdGhlIHVwZGF0ZVxyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy52YWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIC8vIE5ldyB2YWx1ZVxyXG4gICAgICAgICAgICBvYmouc2V0VmFsdWUodmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE9wZW4gdGhlIGNhbGVuZGFyXHJcbiAgICAgKi9cclxuICAgIG9iai5vcGVuID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKCEgY2FsZW5kYXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdqY2FsZW5kYXItZm9jdXMnKSkge1xyXG4gICAgICAgICAgICBpZiAoISBjYWxlbmRhci5jbGFzc0xpc3QuY29udGFpbnMoJ2pjYWxlbmRhci1pbmxpbmUnKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ3VycmVudFxyXG4gICAgICAgICAgICAgICAgalN1aXRlcy5jYWxlbmRhci5jdXJyZW50ID0gb2JqO1xyXG4gICAgICAgICAgICAgICAgLy8gU3RhcnQgdHJhY2tpbmdcclxuICAgICAgICAgICAgICAgIGpTdWl0ZXMudHJhY2tpbmcob2JqLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgZGF5c1xyXG4gICAgICAgICAgICAgICAgb2JqLmdldERheXMoKTtcclxuICAgICAgICAgICAgICAgIC8vIFJlbmRlciBtb250aHNcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy50eXBlID09ICd5ZWFyLW1vbnRoLXBpY2tlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouZ2V0TW9udGhzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgdGltZVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnRpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxlbmRhclNlbGVjdEhvdXIudmFsdWUgPSBvYmouZGF0ZVszXTtcclxuICAgICAgICAgICAgICAgICAgICBjYWxlbmRhclNlbGVjdE1pbi52YWx1ZSA9IG9iai5kYXRlWzRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFNob3cgY2FsZW5kYXJcclxuICAgICAgICAgICAgICAgIGNhbGVuZGFyLmNsYXNzTGlzdC5hZGQoJ2pjYWxlbmRhci1mb2N1cycpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgcG9zaXRpb24gb2YgdGhlIGNvcm5lciBoZWxwZXJcclxuICAgICAgICAgICAgICAgIGlmIChqU3VpdGVzLmdldFdpbmRvd1dpZHRoKCkgPCA4MDAgfHwgb2JqLm9wdGlvbnMuZnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGVuZGFyLmNsYXNzTGlzdC5hZGQoJ2pjYWxlbmRhci1mdWxsc2l6ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFuaW1hdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIGpTdWl0ZXMuYW5pbWF0aW9uLnNsaWRlQm90dG9tKGNhbGVuZGFyQ29udGVudCwgMSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGVuZGFyLmNsYXNzTGlzdC5yZW1vdmUoJ2pjYWxlbmRhci1mdWxsc2l6ZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZWN0Q29udGVudCA9IGNhbGVuZGFyQ29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lckhlaWdodCA8IHJlY3QuYm90dG9tICsgcmVjdENvbnRlbnQuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxlbmRhckNvbnRhaW5lci5zdHlsZS50b3AgPSAocmVjdC50b3AgLSAocmVjdENvbnRlbnQuaGVpZ2h0ICsgMikpICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnRvcCA9IChyZWN0LnRvcCArIHJlY3QuaGVpZ2h0ICsgMikgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSByZWN0LmxlZnQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCByZWN0LmJvdHRvbSArIHJlY3RDb250ZW50LmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAtMSAqIChyZWN0LmhlaWdodCArIHJlY3RDb250ZW50LmhlaWdodCArIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQgKyByZWN0LnRvcCA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gLTEgKiAocmVjdC50b3AgKyByZWN0LmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxlbmRhckNvbnRhaW5lci5zdHlsZS50b3AgPSBkICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnRvcCA9IDIgKyAncHgnOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgcmVjdC5sZWZ0ICsgcmVjdENvbnRlbnQud2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gd2luZG93LmlubmVyV2lkdGggLSAocmVjdC5sZWZ0ICsgcmVjdENvbnRlbnQud2lkdGggKyAyMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxlbmRhckNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gZCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxlbmRhckNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gJzBweCc7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEV2ZW50c1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbm9wZW4pID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5vbm9wZW4oZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9iai5jbG9zZSA9IGZ1bmN0aW9uIChpZ25vcmVFdmVudHMsIHVwZGF0ZSkge1xyXG4gICAgICAgIGlmIChjYWxlbmRhci5jbGFzc0xpc3QuY29udGFpbnMoJ2pjYWxlbmRhci1mb2N1cycpKSB7XHJcbiAgICAgICAgICAgIGlmICh1cGRhdGUgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGNhbGVuZGFyLnF1ZXJ5U2VsZWN0b3IoJy5qY2FsZW5kYXItc2VsZWN0ZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHVwZGF0ZSkgPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB1cGRhdGU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEgZWxlbWVudCB8fCBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnamNhbGVuZGFyLWRpc2FibGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBvYmoub3B0aW9ucy52YWx1ZVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBvYmouZ2V0VmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBvYmouc2V0VmFsdWUodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBFdmVudHNcclxuICAgICAgICAgICAgaWYgKCEgaWdub3JlRXZlbnRzICYmIHR5cGVvZihvYmoub3B0aW9ucy5vbmNsb3NlKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5vbmNsb3NlKGVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBIaWRlXHJcbiAgICAgICAgICAgIGNhbGVuZGFyLmNsYXNzTGlzdC5yZW1vdmUoJ2pjYWxlbmRhci1mb2N1cycpO1xyXG4gICAgICAgICAgICAvLyBTdG9wIHRyYWNraW5nXHJcbiAgICAgICAgICAgIGpTdWl0ZXMudHJhY2tpbmcob2JqLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIC8vIEN1cnJlbnRcclxuICAgICAgICAgICAgalN1aXRlcy5jYWxlbmRhci5jdXJyZW50ID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvYmoub3B0aW9ucy52YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBvYmoucHJldiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSB2aXN1YWxpemF0aW9uIGlzIHRoZSBkYXlzIHBpY2tlciBvciB5ZWFycyBwaWNrZXJcclxuICAgICAgICBpZiAob2JqLm9wdGlvbnMubW9kZSA9PSAneWVhcnMnKSB7XHJcbiAgICAgICAgICAgIG9iai5kYXRlWzBdID0gb2JqLmRhdGVbMF0gLSAxMjtcclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBwaWNrZXIgdGFibGUgb2YgZGF5c1xyXG4gICAgICAgICAgICBvYmouZ2V0WWVhcnMoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG9iai5vcHRpb25zLm1vZGUgPT0gJ21vbnRocycpIHtcclxuICAgICAgICAgICAgb2JqLmRhdGVbMF0gPSBwYXJzZUludChvYmouZGF0ZVswXSkgLSAxO1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgcGlja2VyIHRhYmxlIG9mIG1vbnRoc1xyXG4gICAgICAgICAgICBvYmouZ2V0TW9udGhzKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gR28gdG8gdGhlIHByZXZpb3VzIG1vbnRoXHJcbiAgICAgICAgICAgIGlmIChvYmouZGF0ZVsxXSA8IDIpIHtcclxuICAgICAgICAgICAgICAgIG9iai5kYXRlWzBdID0gb2JqLmRhdGVbMF0gLSAxO1xyXG4gICAgICAgICAgICAgICAgb2JqLmRhdGVbMV0gPSAxMjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9iai5kYXRlWzFdID0gb2JqLmRhdGVbMV0gLSAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgcGlja2VyIHRhYmxlIG9mIGRheXNcclxuICAgICAgICAgICAgb2JqLmdldERheXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLm5leHQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgdmlzdWFsaXphdGlvbiBpcyB0aGUgZGF5cyBwaWNrZXIgb3IgeWVhcnMgcGlja2VyXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLm1vZGUgPT0gJ3llYXJzJykge1xyXG4gICAgICAgICAgICBvYmouZGF0ZVswXSA9IHBhcnNlSW50KG9iai5kYXRlWzBdKSArIDEyO1xyXG5cclxuICAgICAgICAgICAgLy8gVXBkYXRlIHBpY2tlciB0YWJsZSBvZiBkYXlzXHJcbiAgICAgICAgICAgIG9iai5nZXRZZWFycygpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAob2JqLm9wdGlvbnMubW9kZSA9PSAnbW9udGhzJykge1xyXG4gICAgICAgICAgICBvYmouZGF0ZVswXSA9IHBhcnNlSW50KG9iai5kYXRlWzBdKSArIDE7XHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBwaWNrZXIgdGFibGUgb2YgbW9udGhzXHJcbiAgICAgICAgICAgIG9iai5nZXRNb250aHMoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBHbyB0byB0aGUgcHJldmlvdXMgbW9udGhcclxuICAgICAgICAgICAgaWYgKG9iai5kYXRlWzFdID4gMTEpIHtcclxuICAgICAgICAgICAgICAgIG9iai5kYXRlWzBdID0gcGFyc2VJbnQob2JqLmRhdGVbMF0pICsgMTtcclxuICAgICAgICAgICAgICAgIG9iai5kYXRlWzFdID0gMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9iai5kYXRlWzFdID0gcGFyc2VJbnQob2JqLmRhdGVbMV0pICsgMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVXBkYXRlIHBpY2tlciB0YWJsZSBvZiBkYXlzXHJcbiAgICAgICAgICAgIG9iai5nZXREYXlzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRvZGF5XHJcbiAgICAgKi9cclxuICAgIG9iai5zZXRUb2RheSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIFRvZGF5XHJcbiAgICAgICAgdmFyIHZhbHVlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCk7XHJcbiAgICAgICAgLy8gQ2hhbmdlIHZhbHVlXHJcbiAgICAgICAgb2JqLnNldFZhbHVlKHZhbHVlKTtcclxuICAgICAgICAvLyBWYWx1ZVxyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBvYmouc2V0VmFsdWUgPSBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICBpZiAoISB2YWwpIHtcclxuICAgICAgICAgICAgdmFsID0gJycgKyB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFZhbHVlc1xyXG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IHZhbDtcclxuICAgICAgICB2YXIgb2xkVmFsdWUgPSBvYmoub3B0aW9ucy52YWx1ZTtcclxuXHJcbiAgICAgICAgaWYgKG9sZFZhbHVlICE9IG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIFNldCBsYWJlbFxyXG4gICAgICAgICAgICBpZiAoISBuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgb2JqLmRhdGUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9ICcnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gb2JqLnNldExhYmVsKG5ld1ZhbHVlLCBvYmoub3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ld1ZhbHVlLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoISBkYXRlWzFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZVsxXSA9ICcwMDowMDowMCc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgdGltZSA9IGRhdGVbMV0uc3BsaXQoJzonKVxyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGUgPSBkYXRlWzBdLnNwbGl0KCctJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IHBhcnNlSW50KGRhdGVbMF0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIG0gPSBwYXJzZUludChkYXRlWzFdKTtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gcGFyc2VJbnQoZGF0ZVsyXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaCA9IHBhcnNlSW50KHRpbWVbMF0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGkgPSBwYXJzZUludCh0aW1lWzFdKTtcclxuICAgICAgICAgICAgICAgIG9iai5kYXRlID0gWyB5LCBtLCBkLCBoLCBpLCAwIF07XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gb2JqLnNldExhYmVsKG5ld1ZhbHVlLCBvYmoub3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIE5ldyB2YWx1ZVxyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy52YWx1ZSA9IG5ld1ZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbmNoYW5nZSkgPT0gICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm9uY2hhbmdlKGVsLCBuZXdWYWx1ZSwgb2xkVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBMZW1vbmFkZSBKU1xyXG4gICAgICAgICAgICBpZiAoZWwudmFsdWUgIT0gdmFsKSB7XHJcbiAgICAgICAgICAgICAgICBlbC52YWx1ZSA9IHZhbDtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoZWwub25jaGFuZ2UpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbC5vbmNoYW5nZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGFuZ2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZWwudmFsdWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb2JqLmdldERheXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBvYmouZ2V0VmFsdWUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAob2JqLmRhdGUpIHtcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnRpbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBqU3VpdGVzLnR3byhvYmouZGF0ZVswXSkgKyAnLScgKyBqU3VpdGVzLnR3byhvYmouZGF0ZVsxXSkgKyAnLScgKyBqU3VpdGVzLnR3byhvYmouZGF0ZVsyXSkgKyAnICcgKyBqU3VpdGVzLnR3byhvYmouZGF0ZVszXSkgKyAnOicgKyBqU3VpdGVzLnR3byhvYmouZGF0ZVs0XSkgKyAnOicgKyBqU3VpdGVzLnR3bygwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBqU3VpdGVzLnR3byhvYmouZGF0ZVswXSkgKyAnLScgKyBqU3VpdGVzLnR3byhvYmouZGF0ZVsxXSkgKyAnLScgKyBqU3VpdGVzLnR3byhvYmouZGF0ZVsyXSkgKyAnICcgKyBqU3VpdGVzLnR3bygwKSArICc6JyArIGpTdWl0ZXMudHdvKDApICsgJzonICsgalN1aXRlcy50d28oMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAgQ2FsZW5kYXJcclxuICAgICAqL1xyXG4gICAgb2JqLnVwZGF0ZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIHYpIHtcclxuICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2pjYWxlbmRhci1kaXNhYmxlZCcpKSB7XHJcbiAgICAgICAgICAgIC8vIERvIG5vdGhpbmdcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBjYWxlbmRhci5xdWVyeVNlbGVjdG9yKCcuamNhbGVuZGFyLXNlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50cykge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMuY2xhc3NMaXN0LnJlbW92ZSgnamNhbGVuZGFyLXNlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdqY2FsZW5kYXItc2VsZWN0ZWQnKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnamNhbGVuZGFyLXNldC1tb250aCcpKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouZGF0ZVsxXSA9IHY7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvYmouZGF0ZVsyXSA9IGVsZW1lbnQuaW5uZXJUZXh0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoISBvYmoub3B0aW9ucy50aW1lKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouY2xvc2UoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9iai5kYXRlWzNdID0gY2FsZW5kYXJTZWxlY3RIb3VyLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgb2JqLmRhdGVbNF0gPSBjYWxlbmRhclNlbGVjdE1pbi52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlXHJcbiAgICAgICAgdXBkYXRlQWN0aW9ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRvIGJsYW5rXHJcbiAgICAgKi9cclxuICAgIG9iai5yZXNldCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIENsb3NlIGNhbGVuZGFyXHJcbiAgICAgICAgb2JqLnNldFZhbHVlKCcnKTtcclxuICAgICAgICBvYmouZGF0ZSA9IG51bGw7XHJcbiAgICAgICAgb2JqLmNsb3NlKGZhbHNlLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgY2FsZW5kYXIgZGF5c1xyXG4gICAgICovXHJcbiAgICBvYmouZ2V0RGF5cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIE1vZGVcclxuICAgICAgICBvYmoub3B0aW9ucy5tb2RlID0gJ2RheXMnO1xyXG5cclxuICAgICAgICAvLyBTZXR0aW5nIGN1cnJlbnQgdmFsdWVzIGluIGNhc2Ugb2YgTlVMTHNcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgICAgIC8vIEN1cnJlbnQgc2VsZWN0aW9uXHJcbiAgICAgICAgdmFyIHllYXIgPSBvYmouZGF0ZSAmJiBqU3VpdGVzLmlzTnVtZXJpYyhvYmouZGF0ZVswXSkgPyBvYmouZGF0ZVswXSA6IHBhcnNlSW50KGRhdGUuZ2V0RnVsbFllYXIoKSk7XHJcbiAgICAgICAgdmFyIG1vbnRoID0gb2JqLmRhdGUgJiYgalN1aXRlcy5pc051bWVyaWMob2JqLmRhdGVbMV0pID8gb2JqLmRhdGVbMV0gOiBwYXJzZUludChkYXRlLmdldE1vbnRoKCkpICsgMTtcclxuICAgICAgICB2YXIgZGF5ID0gb2JqLmRhdGUgJiYgalN1aXRlcy5pc051bWVyaWMob2JqLmRhdGVbMl0pID8gb2JqLmRhdGVbMl0gOiBwYXJzZUludChkYXRlLmdldERhdGUoKSk7XHJcbiAgICAgICAgdmFyIGhvdXIgPSBvYmouZGF0ZSAmJiBqU3VpdGVzLmlzTnVtZXJpYyhvYmouZGF0ZVszXSkgPyBvYmouZGF0ZVszXSA6IHBhcnNlSW50KGRhdGUuZ2V0SG91cnMoKSk7XHJcbiAgICAgICAgdmFyIG1pbiA9IG9iai5kYXRlICYmIGpTdWl0ZXMuaXNOdW1lcmljKG9iai5kYXRlWzRdKSA/IG9iai5kYXRlWzRdIDogcGFyc2VJbnQoZGF0ZS5nZXRNaW51dGVzKCkpO1xyXG5cclxuICAgICAgICAvLyBTZWxlY3Rpb24gY29udGFpbmVyXHJcbiAgICAgICAgb2JqLmRhdGUgPSBbIHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbiwgMCBdO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgdGl0bGVcclxuICAgICAgICBjYWxlbmRhckxhYmVsWWVhci5pbm5lckhUTUwgPSB5ZWFyO1xyXG4gICAgICAgIGNhbGVuZGFyTGFiZWxNb250aC5pbm5lckhUTUwgPSBvYmoub3B0aW9ucy5tb250aHNbbW9udGggLSAxXTtcclxuXHJcbiAgICAgICAgLy8gQ3VycmVudCBtb250aCBhbmQgWWVhclxyXG4gICAgICAgIHZhciBpc0N1cnJlbnRNb250aEFuZFllYXIgPSAoZGF0ZS5nZXRNb250aCgpID09IG1vbnRoIC0gMSkgJiYgKGRhdGUuZ2V0RnVsbFllYXIoKSA9PSB5ZWFyKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICB2YXIgY3VycmVudERheSA9IGRhdGUuZ2V0RGF0ZSgpO1xyXG5cclxuICAgICAgICAvLyBOdW1iZXIgb2YgZGF5cyBpbiB0aGUgbW9udGhcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAwLCAwLCAwKTtcclxuICAgICAgICB2YXIgbnVtYmVyT2ZEYXlzID0gZGF0ZS5nZXREYXRlKCk7XHJcblxyXG4gICAgICAgIC8vIEZpcnN0IGRheVxyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoeWVhciwgbW9udGgtMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgdmFyIGZpcnN0RGF5ID0gZGF0ZS5nZXREYXkoKSArIDE7XHJcblxyXG4gICAgICAgIC8vIEluZGV4IHZhbHVlXHJcbiAgICAgICAgdmFyIGluZGV4ID0gb2JqLm9wdGlvbnMuc3RhcnRpbmdEYXkgfHwgMDtcclxuXHJcbiAgICAgICAgLy8gRmlyc3Qgb2YgZGF5IHJlbGF0aXZlIHRvIHRoZSBzdGFydGluZyBjYWxlbmRhciB3ZWVrZGF5XHJcbiAgICAgICAgZmlyc3REYXkgPSBmaXJzdERheSAtIGluZGV4O1xyXG5cclxuICAgICAgICAvLyBSZXNldCB0YWJsZVxyXG4gICAgICAgIGNhbGVuZGFyQm9keS5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICAgICAgLy8gV2Vla2RheXMgUm93XHJcbiAgICAgICAgdmFyIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XHJcbiAgICAgICAgcm93LnNldEF0dHJpYnV0ZSgnYWxpZ24nLCAnY2VudGVyJyk7XHJcbiAgICAgICAgY2FsZW5kYXJCb2R5LmFwcGVuZENoaWxkKHJvdyk7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSB3ZWVrZGF5cyByb3dcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDc7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnamNhbGVuZGFyLXdlZWtkYXknKVxyXG4gICAgICAgICAgICBjZWxsLmlubmVySFRNTCA9IG9iai5vcHRpb25zLndlZWtkYXlzX3Nob3J0W2luZGV4XTtcclxuICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGwpO1xyXG4gICAgICAgICAgICAvLyBOZXh0IHdlZWsgZGF5XHJcbiAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgIC8vIFJlc3RhcnQgaW5kZXhcclxuICAgICAgICAgICAgaWYgKGluZGV4ID4gNikge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJbmRleCBvZiBkYXlzXHJcbiAgICAgICAgdmFyIGluZGV4ID0gMDtcclxuICAgICAgICB2YXIgZCA9IDA7XHJcbiBcclxuICAgICAgICAvLyBDYWxlbmRhciB0YWJsZVxyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgNjsgaisrKSB7XHJcbiAgICAgICAgICAgIC8vIFJlc2V0IGNlbGxzIGNvbnRhaW5lclxyXG4gICAgICAgICAgICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuICAgICAgICAgICAgcm93LnNldEF0dHJpYnV0ZSgnYWxpZ24nLCAnY2VudGVyJyk7XHJcbiAgICAgICAgICAgIC8vIERhdGEgY29udHJvbFxyXG4gICAgICAgICAgICB2YXIgZW1wdHlSb3cgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgY2VsbHNcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA3OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBjZWxsXHJcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2pjYWxlbmRhci1zZXQtZGF5Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID49IGZpcnN0RGF5ICYmIGluZGV4IDwgKGZpcnN0RGF5ICsgbnVtYmVyT2ZEYXlzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIERheSBjZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgZCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNlbGwuaW5uZXJIVE1MID0gZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VsZWN0ZWRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZCA9PSBkYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdqY2FsZW5kYXItc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgc2VsZWN0aW9uIGRheSBpcyB0b2RheVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0N1cnJlbnRNb250aEFuZFllYXIgJiYgY3VycmVudERheSA9PSBkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgc2VsZWN0aW9uIGRheVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0galN1aXRlcy5jYWxlbmRhci5ub3cobmV3IERhdGUoeWVhciwgbW9udGgtMSwgZCksIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBBdmFpbGFibGUgcmFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnZhbGlkUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMudmFsaWRSYW5nZVswXSB8fCBjdXJyZW50ID49IG9iai5vcHRpb25zLnZhbGlkUmFuZ2VbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXN0MSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdDEgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMudmFsaWRSYW5nZVsxXSB8fCBjdXJyZW50IDw9IG9iai5vcHRpb25zLnZhbGlkUmFuZ2VbMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXN0MiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdDIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEgKHRlc3QxICYmIHRlc3QyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdqY2FsZW5kYXItZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29udHJvbFxyXG4gICAgICAgICAgICAgICAgICAgIGVtcHR5Um93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBEYXkgY2VsbFxyXG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGwpO1xyXG4gICAgICAgICAgICAgICAgLy8gSW5kZXhcclxuICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBjZWxsIHRvIHRoZSBjYWxlbmRhciBib2R5XHJcbiAgICAgICAgICAgIGlmIChlbXB0eVJvdyA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgY2FsZW5kYXJCb2R5LmFwcGVuZENoaWxkKHJvdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNob3cgdGltZSBjb250cm9sc1xyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy50aW1lKSB7XHJcbiAgICAgICAgICAgIGNhbGVuZGFyQ29udHJvbHNUaW1lLnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjYWxlbmRhckNvbnRyb2xzVGltZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlXHJcbiAgICAgICAgdXBkYXRlQWN0aW9ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5nZXRNb250aHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBNb2RlXHJcbiAgICAgICAgb2JqLm9wdGlvbnMubW9kZSA9ICdtb250aHMnO1xyXG5cclxuICAgICAgICAvLyBMb2FkaW5nIG1vbnRoIGxhYmVsc1xyXG4gICAgICAgIHZhciBtb250aHMgPSBvYmoub3B0aW9ucy5tb250aHM7XHJcblxyXG4gICAgICAgIC8vIFZhbHVlXHJcbiAgICAgICAgdmFyIHZhbHVlID0gb2JqLm9wdGlvbnMudmFsdWU7IFxyXG5cclxuICAgICAgICAvLyBDdXJyZW50IGRhdGVcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRZZWFyID0gcGFyc2VJbnQoZGF0ZS5nZXRGdWxsWWVhcigpKTtcclxuICAgICAgICB2YXIgY3VycmVudE1vbnRoID0gcGFyc2VJbnQoZGF0ZS5nZXRNb250aCgpKSArIDE7XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkWWVhciA9IG9iai5kYXRlICYmIGpTdWl0ZXMuaXNOdW1lcmljKG9iai5kYXRlWzBdKSA/IG9iai5kYXRlWzBdIDogY3VycmVudFllYXI7XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkTW9udGggPSBvYmouZGF0ZSAmJiBqU3VpdGVzLmlzTnVtZXJpYyhvYmouZGF0ZVsxXSkgPyBvYmouZGF0ZVsxXSA6IGN1cnJlbnRNb250aDtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHRpdGxlXHJcbiAgICAgICAgY2FsZW5kYXJMYWJlbFllYXIuaW5uZXJIVE1MID0gb2JqLmRhdGVbMF07XHJcbiAgICAgICAgY2FsZW5kYXJMYWJlbE1vbnRoLmlubmVySFRNTCA9IG1vbnRoc1tzZWxlY3RlZE1vbnRoLTFdO1xyXG5cclxuICAgICAgICAvLyBUYWJsZVxyXG4gICAgICAgIHZhciB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XHJcbiAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCd3aWR0aCcsICcxMDAlJyk7XHJcblxyXG4gICAgICAgIC8vIFJvd1xyXG4gICAgICAgIHZhciByb3cgPSBudWxsO1xyXG5cclxuICAgICAgICAvLyBDYWxlbmRhciB0YWJsZVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTI7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoISAoaSAlIDQpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBjZWxscyBjb250YWluZXJcclxuICAgICAgICAgICAgICAgIHZhciByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4gICAgICAgICAgICAgICAgcm93LnNldEF0dHJpYnV0ZSgnYWxpZ24nLCAnY2VudGVyJyk7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChyb3cpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgY2VsbFxyXG4gICAgICAgICAgICB2YXIgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnamNhbGVuZGFyLXNldC1tb250aCcpO1xyXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIGkrMSk7XHJcbiAgICAgICAgICAgIGNlbGwuaW5uZXJUZXh0ID0gbW9udGhzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnZhbGlkUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gc2VsZWN0ZWRZZWFyICsgJy0nICsgalN1aXRlcy50d28oaSsxKTtcclxuICAgICAgICAgICAgICAgIGlmICghIG9iai5vcHRpb25zLnZhbGlkUmFuZ2VbMF0gfHwgY3VycmVudCA+PSBvYmoub3B0aW9ucy52YWxpZFJhbmdlWzBdLnN1YnN0cigwLDcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlc3QxID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlc3QxID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMudmFsaWRSYW5nZVsxXSB8fCBjdXJyZW50IDw9IG9iai5vcHRpb25zLnZhbGlkUmFuZ2VbMV0uc3Vic3RyKDAsNykpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdDIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdDIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoISAodGVzdDEgJiYgdGVzdDIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdqY2FsZW5kYXItZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGkrMSA9PSBzZWxlY3RlZE1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2pjYWxlbmRhci1zZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoY3VycmVudFllYXIgPT0gc2VsZWN0ZWRZZWFyICYmIGkrMSA9PSBjdXJyZW50TW9udGgpIHtcclxuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2FsZW5kYXJCb2R5LmlubmVySFRNTCA9ICc8dHI+PHRkIGNvbHNwYW49XCI3XCI+PC90ZD48L3RyPic7XHJcbiAgICAgICAgY2FsZW5kYXJCb2R5LmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmFwcGVuZENoaWxkKHRhYmxlKTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlXHJcbiAgICAgICAgdXBkYXRlQWN0aW9ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5nZXRZZWFycyA9IGZ1bmN0aW9uKCkgeyBcclxuICAgICAgICAvLyBNb2RlXHJcbiAgICAgICAgb2JqLm9wdGlvbnMubW9kZSA9ICd5ZWFycyc7XHJcblxyXG4gICAgICAgIC8vIEN1cnJlbnQgZGF0ZVxyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICB2YXIgY3VycmVudFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkWWVhciA9IG9iai5kYXRlICYmIGpTdWl0ZXMuaXNOdW1lcmljKG9iai5kYXRlWzBdKSA/IG9iai5kYXRlWzBdIDogcGFyc2VJbnQoZGF0ZS5nZXRGdWxsWWVhcigpKTtcclxuXHJcbiAgICAgICAgLy8gQXJyYXkgb2YgeWVhcnNcclxuICAgICAgICB2YXIgeSA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU7IGkrKykge1xyXG4gICAgICAgICAgICB5W2ldID0gcGFyc2VJbnQob2JqLmRhdGVbMF0pICsgKGkgLSAxMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBc3NlbWJsaW5nIHRoZSB5ZWFyIHRhYmxlc1xyXG4gICAgICAgIHZhciB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XHJcbiAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCd3aWR0aCcsICcxMDAlJyk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoISAoaSAlIDUpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBjZWxscyBjb250YWluZXJcclxuICAgICAgICAgICAgICAgIHZhciByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4gICAgICAgICAgICAgICAgcm93LnNldEF0dHJpYnV0ZSgnYWxpZ24nLCAnY2VudGVyJyk7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChyb3cpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgY2VsbFxyXG4gICAgICAgICAgICB2YXIgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnamNhbGVuZGFyLXNldC15ZWFyJyk7XHJcbiAgICAgICAgICAgIGNlbGwuaW5uZXJUZXh0ID0geVtpXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZFllYXIgPT0geVtpXSkge1xyXG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdqY2FsZW5kYXItc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRZZWFyID09IHlbaV0pIHtcclxuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2FsZW5kYXJCb2R5LmlubmVySFRNTCA9ICc8dHI+PHRkIGNvbHNwYW49XCI3XCI+PC90ZD48L3RyPic7XHJcbiAgICAgICAgY2FsZW5kYXJCb2R5LmZpcnN0Q2hpbGQuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZCh0YWJsZSk7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZVxyXG4gICAgICAgIHVwZGF0ZUFjdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBvYmouc2V0TGFiZWwgPSBmdW5jdGlvbih2YWx1ZSwgbWl4ZWQpIHtcclxuICAgICAgICByZXR1cm4galN1aXRlcy5jYWxlbmRhci5nZXREYXRlU3RyaW5nKHZhbHVlLCBtaXhlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLmZyb21Gb3JtYXR0ZWQgPSBmdW5jdGlvbiAodmFsdWUsIGZvcm1hdCkge1xyXG4gICAgICAgIHJldHVybiBqU3VpdGVzLmNhbGVuZGFyLmV4dHJhY3REYXRlRnJvbVN0cmluZyh2YWx1ZSwgZm9ybWF0KTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbW91c2VVcENvbnRyb2xzID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0galN1aXRlcy5maW5kRWxlbWVudChlLnRhcmdldCwgJ2pjYWxlbmRhci1jb250YWluZXInKTtcclxuICAgICAgICBpZiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICB2YXIgYWN0aW9uID0gZS50YXJnZXQuY2xhc3NOYW1lO1xyXG5cclxuICAgICAgICAgICAgLy8gT2JqZWN0IGlkXHJcbiAgICAgICAgICAgIGlmIChhY3Rpb24gPT0gJ2pjYWxlbmRhci1wcmV2Jykge1xyXG4gICAgICAgICAgICAgICAgb2JqLnByZXYoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT0gJ2pjYWxlbmRhci1uZXh0Jykge1xyXG4gICAgICAgICAgICAgICAgb2JqLm5leHQoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT0gJ2pjYWxlbmRhci1tb250aCcpIHtcclxuICAgICAgICAgICAgICAgIG9iai5nZXRNb250aHMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT0gJ2pjYWxlbmRhci15ZWFyJykge1xyXG4gICAgICAgICAgICAgICAgb2JqLmdldFllYXJzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09ICdqY2FsZW5kYXItc2V0LXllYXInKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouZGF0ZVswXSA9IGUudGFyZ2V0LmlubmVyVGV4dDtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy50eXBlID09ICd5ZWFyLW1vbnRoLXBpY2tlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouZ2V0TW9udGhzKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5nZXREYXlzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqY2FsZW5kYXItc2V0LW1vbnRoJykpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtb250aCA9IHBhcnNlSW50KGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScpKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy50eXBlID09ICd5ZWFyLW1vbnRoLXBpY2tlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoudXBkYXRlKGUudGFyZ2V0LCBtb250aCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5kYXRlWzFdID0gbW9udGg7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmdldERheXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT0gJ2pjYWxlbmRhci1jb25maXJtJyB8fCBhY3Rpb24gPT0gJ2pjYWxlbmRhci11cGRhdGUnIHx8IGFjdGlvbiA9PSAnamNhbGVuZGFyLWNsb3NlJykge1xyXG4gICAgICAgICAgICAgICAgb2JqLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09ICdqY2FsZW5kYXItYmFja2Ryb3AnKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouY2xvc2UoZmFsc2UsIGZhbHNlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT0gJ2pjYWxlbmRhci1yZXNldCcpIHtcclxuICAgICAgICAgICAgICAgIG9iai5yZXNldCgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnamNhbGVuZGFyLXNldC1kYXknKSAmJiBlLnRhcmdldC5pbm5lclRleHQpIHtcclxuICAgICAgICAgICAgICAgIG9iai51cGRhdGUoZS50YXJnZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb2JqLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBrZXlVcENvbnRyb2xzID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGlmIChlLnRhcmdldC52YWx1ZSAmJiBlLnRhcmdldC52YWx1ZS5sZW5ndGggPiAzKSB7XHJcbiAgICAgICAgICAgIHZhciB0ZXN0ID0galN1aXRlcy5jYWxlbmRhci5leHRyYWN0RGF0ZUZyb21TdHJpbmcoZS50YXJnZXQudmFsdWUsIG9iai5vcHRpb25zLmZvcm1hdCk7XHJcbiAgICAgICAgICAgIGlmICh0ZXN0KSB7XHJcbiAgICAgICAgICAgICAgICBvYmouc2V0VmFsdWUodGVzdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXBkYXRlIGFjdGlvbnMgYnV0dG9uXHJcbiAgICB2YXIgdXBkYXRlQWN0aW9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50RGF5ID0gY2FsZW5kYXIucXVlcnlTZWxlY3RvcignLmpjYWxlbmRhci1zZWxlY3RlZCcpO1xyXG5cclxuICAgICAgICBpZiAoY3VycmVudERheSAmJiBjdXJyZW50RGF5LmNsYXNzTGlzdC5jb250YWlucygnamNhbGVuZGFyLWRpc2FibGVkJykpIHtcclxuICAgICAgICAgICAgY2FsZW5kYXJDb250cm9sc1VwZGF0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgIGNhbGVuZGFyU2VsZWN0SG91ci5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgIGNhbGVuZGFyU2VsZWN0TWluLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjYWxlbmRhckNvbnRyb2xzVXBkYXRlQnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgY2FsZW5kYXJTZWxlY3RIb3VyLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgY2FsZW5kYXJTZWxlY3RNaW4ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXZlbnRcclxuICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9udXBkYXRlKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zLm9udXBkYXRlKGVsLCBvYmouZ2V0VmFsdWUoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBjYWxlbmRhciA9IG51bGw7XHJcbiAgICB2YXIgY2FsZW5kYXJSZXNldCA9IG51bGw7XHJcbiAgICB2YXIgY2FsZW5kYXJDb25maXJtID0gbnVsbDtcclxuICAgIHZhciBjYWxlbmRhckNvbnRhaW5lciA9IG51bGw7XHJcbiAgICB2YXIgY2FsZW5kYXJDb250ZW50ID0gbnVsbDtcclxuICAgIHZhciBjYWxlbmRhckxhYmVsWWVhciA9IG51bGw7XHJcbiAgICB2YXIgY2FsZW5kYXJMYWJlbE1vbnRoID0gbnVsbDtcclxuICAgIHZhciBjYWxlbmRhclRhYmxlID0gbnVsbDtcclxuICAgIHZhciBjYWxlbmRhckJvZHkgPSBudWxsO1xyXG5cclxuICAgIHZhciBjYWxlbmRhckNvbnRyb2xzID0gbnVsbDtcclxuICAgIHZhciBjYWxlbmRhckNvbnRyb2xzVGltZSA9IG51bGw7XHJcbiAgICB2YXIgY2FsZW5kYXJDb250cm9sc1VwZGF0ZSA9IG51bGw7XHJcbiAgICB2YXIgY2FsZW5kYXJDb250cm9sc1VwZGF0ZUJ1dHRvbiA9IG51bGw7XHJcbiAgICB2YXIgY2FsZW5kYXJTZWxlY3RIb3VyID0gbnVsbDtcclxuICAgIHZhciBjYWxlbmRhclNlbGVjdE1pbiA9IG51bGw7XHJcblxyXG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBHZXQgdmFsdWUgZnJvbSBpbml0aWFsIGVsZW1lbnQgaWYgdGhhdCBpcyBhbiBpbnB1dFxyXG4gICAgICAgIGlmIChlbC50YWdOYW1lID09ICdJTlBVVCcgJiYgZWwudmFsdWUpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy52YWx1ZSA9IGVsLnZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2FsZW5kYXIgRE9NIGVsZW1lbnRzXHJcbiAgICAgICAgY2FsZW5kYXJSZXNldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGNhbGVuZGFyUmVzZXQuY2xhc3NOYW1lID0gJ2pjYWxlbmRhci1yZXNldCc7XHJcblxyXG4gICAgICAgIGNhbGVuZGFyQ29uZmlybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGNhbGVuZGFyQ29uZmlybS5jbGFzc05hbWUgPSAnamNhbGVuZGFyLWNvbmZpcm0nO1xyXG5cclxuICAgICAgICBjYWxlbmRhckNvbnRyb2xzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgY2FsZW5kYXJDb250cm9scy5jbGFzc05hbWUgPSAnamNhbGVuZGFyLWNvbnRyb2xzJ1xyXG4gICAgICAgIGNhbGVuZGFyQ29udHJvbHMuc3R5bGUuYm9yZGVyQm90dG9tID0gJzFweCBzb2xpZCAjZGRkJztcclxuICAgICAgICBjYWxlbmRhckNvbnRyb2xzLmFwcGVuZENoaWxkKGNhbGVuZGFyUmVzZXQpO1xyXG4gICAgICAgIGNhbGVuZGFyQ29udHJvbHMuYXBwZW5kQ2hpbGQoY2FsZW5kYXJDb25maXJtKTtcclxuXHJcbiAgICAgICAgY2FsZW5kYXJDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjYWxlbmRhckNvbnRhaW5lci5jbGFzc05hbWUgPSAnamNhbGVuZGFyLWNvbnRhaW5lcic7XHJcblxyXG4gICAgICAgIGNhbGVuZGFyQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGNhbGVuZGFyQ29udGVudC5jbGFzc05hbWUgPSAnamNhbGVuZGFyLWNvbnRlbnQnO1xyXG4gICAgICAgIGNhbGVuZGFyQ29udGFpbmVyLmFwcGVuZENoaWxkKGNhbGVuZGFyQ29udGVudCk7XHJcblxyXG4gICAgICAgIC8vIE1haW4gZWxlbWVudFxyXG4gICAgICAgIGlmIChlbC50YWdOYW1lID09ICdESVYnKSB7XHJcbiAgICAgICAgICAgIGNhbGVuZGFyID0gZWw7XHJcbiAgICAgICAgICAgIGNhbGVuZGFyLmNsYXNzTGlzdC5hZGQoJ2pjYWxlbmRhci1pbmxpbmUnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBBZGQgY29udHJvbHMgdG8gdGhlIHNjcmVlblxyXG4gICAgICAgICAgICBjYWxlbmRhckNvbnRlbnQuYXBwZW5kQ2hpbGQoY2FsZW5kYXJDb250cm9scyk7XHJcblxyXG4gICAgICAgICAgICBjYWxlbmRhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjYWxlbmRhci5jbGFzc05hbWUgPSAnamNhbGVuZGFyJztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FsZW5kYXIuY2xhc3NMaXN0LmFkZCgnamNhbGVuZGFyLWNvbnRhaW5lcicpO1xyXG4gICAgICAgIGNhbGVuZGFyLmFwcGVuZENoaWxkKGNhbGVuZGFyQ29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgLy8gVGFibGUgY29udGFpbmVyXHJcbiAgICAgICAgdmFyIGNhbGVuZGFyVGFibGVDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjYWxlbmRhclRhYmxlQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdqY2FsZW5kYXItdGFibGUnO1xyXG4gICAgICAgIGNhbGVuZGFyQ29udGVudC5hcHBlbmRDaGlsZChjYWxlbmRhclRhYmxlQ29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgLy8gUHJldmlvdXMgYnV0dG9uXHJcbiAgICAgICAgdmFyIGNhbGVuZGFySGVhZGVyUHJldiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgICAgY2FsZW5kYXJIZWFkZXJQcmV2LnNldEF0dHJpYnV0ZSgnY29sc3BhbicsICcyJyk7XHJcbiAgICAgICAgY2FsZW5kYXJIZWFkZXJQcmV2LmNsYXNzTmFtZSA9ICdqY2FsZW5kYXItcHJldic7XHJcblxyXG4gICAgICAgIC8vIEhlYWRlciB3aXRoIHllYXIgYW5kIG1vbnRoXHJcbiAgICAgICAgY2FsZW5kYXJMYWJlbFllYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgY2FsZW5kYXJMYWJlbFllYXIuY2xhc3NOYW1lID0gJ2pjYWxlbmRhci15ZWFyJztcclxuICAgICAgICBjYWxlbmRhckxhYmVsTW9udGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgY2FsZW5kYXJMYWJlbE1vbnRoLmNsYXNzTmFtZSA9ICdqY2FsZW5kYXItbW9udGgnO1xyXG5cclxuICAgICAgICB2YXIgY2FsZW5kYXJIZWFkZXJUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgICAgY2FsZW5kYXJIZWFkZXJUaXRsZS5jbGFzc05hbWUgPSAnamNhbGVuZGFyLWhlYWRlcic7XHJcbiAgICAgICAgY2FsZW5kYXJIZWFkZXJUaXRsZS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCAnMycpO1xyXG4gICAgICAgIGNhbGVuZGFySGVhZGVyVGl0bGUuYXBwZW5kQ2hpbGQoY2FsZW5kYXJMYWJlbE1vbnRoKTtcclxuICAgICAgICBjYWxlbmRhckhlYWRlclRpdGxlLmFwcGVuZENoaWxkKGNhbGVuZGFyTGFiZWxZZWFyKTtcclxuXHJcbiAgICAgICAgdmFyIGNhbGVuZGFySGVhZGVyTmV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgICAgY2FsZW5kYXJIZWFkZXJOZXh0LnNldEF0dHJpYnV0ZSgnY29sc3BhbicsICcyJyk7XHJcbiAgICAgICAgY2FsZW5kYXJIZWFkZXJOZXh0LmNsYXNzTmFtZSA9ICdqY2FsZW5kYXItbmV4dCc7XHJcblxyXG4gICAgICAgIHZhciBjYWxlbmRhckhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoZWFkJyk7XHJcbiAgICAgICAgdmFyIGNhbGVuZGFySGVhZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuICAgICAgICBjYWxlbmRhckhlYWRlclJvdy5hcHBlbmRDaGlsZChjYWxlbmRhckhlYWRlclByZXYpO1xyXG4gICAgICAgIGNhbGVuZGFySGVhZGVyUm93LmFwcGVuZENoaWxkKGNhbGVuZGFySGVhZGVyVGl0bGUpO1xyXG4gICAgICAgIGNhbGVuZGFySGVhZGVyUm93LmFwcGVuZENoaWxkKGNhbGVuZGFySGVhZGVyTmV4dCk7XHJcbiAgICAgICAgY2FsZW5kYXJIZWFkZXIuYXBwZW5kQ2hpbGQoY2FsZW5kYXJIZWFkZXJSb3cpO1xyXG5cclxuICAgICAgICBjYWxlbmRhclRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcclxuICAgICAgICBjYWxlbmRhckJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xyXG4gICAgICAgIGNhbGVuZGFyVGFibGUuc2V0QXR0cmlidXRlKCdjZWxscGFkZGluZycsICcwJyk7XHJcbiAgICAgICAgY2FsZW5kYXJUYWJsZS5zZXRBdHRyaWJ1dGUoJ2NlbGxzcGFjaW5nJywgJzAnKTtcclxuICAgICAgICBjYWxlbmRhclRhYmxlLmFwcGVuZENoaWxkKGNhbGVuZGFySGVhZGVyKTtcclxuICAgICAgICBjYWxlbmRhclRhYmxlLmFwcGVuZENoaWxkKGNhbGVuZGFyQm9keSk7XHJcbiAgICAgICAgY2FsZW5kYXJUYWJsZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjYWxlbmRhclRhYmxlKTtcclxuXHJcbiAgICAgICAgY2FsZW5kYXJTZWxlY3RIb3VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7XHJcbiAgICAgICAgY2FsZW5kYXJTZWxlY3RIb3VyLmNsYXNzTmFtZSA9ICdqY2FsZW5kYXItc2VsZWN0JztcclxuICAgICAgICBjYWxlbmRhclNlbGVjdEhvdXIub25jaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgb2JqLmRhdGVbM10gPSB0aGlzLnZhbHVlOyBcclxuXHJcbiAgICAgICAgICAgIC8vIEV2ZW50XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub251cGRhdGUpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm9udXBkYXRlKGVsLCBvYmouZ2V0VmFsdWUoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjQ7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgICAgICBlbGVtZW50LnZhbHVlID0gaTtcclxuICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBqU3VpdGVzLnR3byhpKTtcclxuICAgICAgICAgICAgY2FsZW5kYXJTZWxlY3RIb3VyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2FsZW5kYXJTZWxlY3RNaW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTtcclxuICAgICAgICBjYWxlbmRhclNlbGVjdE1pbi5jbGFzc05hbWUgPSAnamNhbGVuZGFyLXNlbGVjdCc7XHJcbiAgICAgICAgY2FsZW5kYXJTZWxlY3RNaW4ub25jaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgb2JqLmRhdGVbNF0gPSB0aGlzLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgLy8gRXZlbnRcclxuICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbnVwZGF0ZSkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMub251cGRhdGUoZWwsIG9iai5nZXRWYWx1ZSgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA2MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSBpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IGpTdWl0ZXMudHdvKGkpO1xyXG4gICAgICAgICAgICBjYWxlbmRhclNlbGVjdE1pbi5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZvb3RlciBjb250cm9sc1xyXG4gICAgICAgIHZhciBjYWxlbmRhckNvbnRyb2xzRm9vdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgY2FsZW5kYXJDb250cm9sc0Zvb3Rlci5jbGFzc05hbWUgPSAnamNhbGVuZGFyLWNvbnRyb2xzJztcclxuXHJcbiAgICAgICAgY2FsZW5kYXJDb250cm9sc1RpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjYWxlbmRhckNvbnRyb2xzVGltZS5jbGFzc05hbWUgPSAnamNhbGVuZGFyLXRpbWUnO1xyXG4gICAgICAgIGNhbGVuZGFyQ29udHJvbHNUaW1lLnN0eWxlLm1heFdpZHRoID0gJzE0MHB4JztcclxuICAgICAgICBjYWxlbmRhckNvbnRyb2xzVGltZS5hcHBlbmRDaGlsZChjYWxlbmRhclNlbGVjdEhvdXIpO1xyXG4gICAgICAgIGNhbGVuZGFyQ29udHJvbHNUaW1lLmFwcGVuZENoaWxkKGNhbGVuZGFyU2VsZWN0TWluKTtcclxuXHJcbiAgICAgICAgY2FsZW5kYXJDb250cm9sc1VwZGF0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGNhbGVuZGFyQ29udHJvbHNVcGRhdGVCdXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xyXG4gICAgICAgIGNhbGVuZGFyQ29udHJvbHNVcGRhdGVCdXR0b24uY2xhc3NOYW1lID0gJ2pjYWxlbmRhci11cGRhdGUnO1xyXG5cclxuICAgICAgICBjYWxlbmRhckNvbnRyb2xzVXBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgY2FsZW5kYXJDb250cm9sc1VwZGF0ZS5zdHlsZS5mbGV4R3JvdyA9ICcxMCc7XHJcbiAgICAgICAgY2FsZW5kYXJDb250cm9sc1VwZGF0ZS5hcHBlbmRDaGlsZChjYWxlbmRhckNvbnRyb2xzVXBkYXRlQnV0dG9uKTtcclxuICAgICAgICBjYWxlbmRhckNvbnRyb2xzRm9vdGVyLmFwcGVuZENoaWxkKGNhbGVuZGFyQ29udHJvbHNUaW1lKTtcclxuXHJcbiAgICAgICAgLy8gT25seSBzaG93IHRoZSB1cGRhdGUgYnV0dG9uIGZvciBpbnB1dCBlbGVtZW50c1xyXG4gICAgICAgIGlmIChlbC50YWdOYW1lID09ICdJTlBVVCcpIHtcclxuICAgICAgICAgICAgY2FsZW5kYXJDb250cm9sc0Zvb3Rlci5hcHBlbmRDaGlsZChjYWxlbmRhckNvbnRyb2xzVXBkYXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNhbGVuZGFyQ29udGVudC5hcHBlbmRDaGlsZChjYWxlbmRhckNvbnRyb2xzRm9vdGVyKTtcclxuXHJcbiAgICAgICAgdmFyIGNhbGVuZGFyQmFja2Ryb3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjYWxlbmRhckJhY2tkcm9wLmNsYXNzTmFtZSA9ICdqY2FsZW5kYXItYmFja2Ryb3AnO1xyXG4gICAgICAgIGNhbGVuZGFyLmFwcGVuZENoaWxkKGNhbGVuZGFyQmFja2Ryb3ApO1xyXG5cclxuICAgICAgICAvLyBIYW5kbGUgZXZlbnRzXHJcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGtleVVwQ29udHJvbHMpO1xyXG5cclxuICAgICAgICAvLyBBZGQgZ2xvYmFsIGV2ZW50c1xyXG4gICAgICAgIGNhbGVuZGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJzd2lwZWxlZnRcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBqU3VpdGVzLmFuaW1hdGlvbi5zbGlkZUxlZnQoY2FsZW5kYXJUYWJsZSwgMCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgalN1aXRlcy5hbmltYXRpb24uc2xpZGVSaWdodChjYWxlbmRhclRhYmxlLCAxKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY2FsZW5kYXIuYWRkRXZlbnRMaXN0ZW5lcihcInN3aXBlcmlnaHRcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBqU3VpdGVzLmFuaW1hdGlvbi5zbGlkZVJpZ2h0KGNhbGVuZGFyVGFibGUsIDAsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgb2JqLnByZXYoKTtcclxuICAgICAgICAgICAgICAgIGpTdWl0ZXMuYW5pbWF0aW9uLnNsaWRlTGVmdChjYWxlbmRhclRhYmxlLCAxKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZWwub25tb3VzZXVwID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG9iai5vcGVuKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoJ29udG91Y2hlbmQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBjYWxlbmRhci5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgbW91c2VVcENvbnRyb2xzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjYWxlbmRhci5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBtb3VzZVVwQ29udHJvbHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR2xvYmFsIGNvbnRyb2xzXHJcbiAgICAgICAgaWYgKCEgalN1aXRlcy5jYWxlbmRhci5oYXNFdmVudHMpIHtcclxuICAgICAgICAgICAgLy8gRXhlY3V0ZSBvbmx5IG9uZSB0aW1lXHJcbiAgICAgICAgICAgIGpTdWl0ZXMuY2FsZW5kYXIuaGFzRXZlbnRzID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gRW50ZXIgYW5kIEVzY1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBqU3VpdGVzLmNhbGVuZGFyLmtleWRvd24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2V0IGNvbmZpZ3VyYXRpb25cclxuICAgICAgICBvYmouc2V0T3B0aW9ucyhvcHRpb25zKTtcclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIGVsZW1lbnQgdG8gdGhlIERPTVxyXG4gICAgICAgIGlmIChlbC50YWdOYW1lID09ICdJTlBVVCcpIHtcclxuICAgICAgICAgICAgZWwucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY2FsZW5kYXIsIGVsLm5leHRTaWJsaW5nKTtcclxuICAgICAgICAgICAgLy8gQWRkIHByb3BlcnRpZXNcclxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdhdXRvY29tcGxldGUnLCAnb2ZmJyk7XHJcbiAgICAgICAgICAgIC8vIEVsZW1lbnRcclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnamNhbGVuZGFyLWlucHV0Jyk7XHJcbiAgICAgICAgICAgIC8vIFZhbHVlXHJcbiAgICAgICAgICAgIGVsLnZhbHVlID0gb2JqLnNldExhYmVsKG9iai5nZXRWYWx1ZSgpLCBvYmoub3B0aW9ucyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gR2V0IGRheXNcclxuICAgICAgICAgICAgb2JqLmdldERheXMoKTtcclxuICAgICAgICAgICAgLy8gSG91clxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMudGltZSkge1xyXG4gICAgICAgICAgICAgICAgY2FsZW5kYXJTZWxlY3RIb3VyLnZhbHVlID0gb2JqLmRhdGVbM107XHJcbiAgICAgICAgICAgICAgICBjYWxlbmRhclNlbGVjdE1pbi52YWx1ZSA9IG9iai5kYXRlWzRdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEZWZhdWx0IG9wZW5lZFxyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5vcGVuZWQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBvYmoub3BlbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2hhbmdlIG1ldGhvZFxyXG4gICAgICAgIGVsLmNoYW5nZSA9IG9iai5zZXRWYWx1ZTtcclxuXHJcbiAgICAgICAgLy8gR2xvYmFsIGdlbmVyaWMgdmFsdWUgaGFuZGxlclxyXG4gICAgICAgIGVsLnZhbCA9IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmouZ2V0VmFsdWUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9iai5zZXRWYWx1ZSh2YWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBLZWVwIG9iamVjdCBhdmFpbGFibGUgZnJvbSB0aGUgbm9kZVxyXG4gICAgICAgIGVsLmNhbGVuZGFyID0gY2FsZW5kYXIuY2FsZW5kYXIgPSBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpO1xyXG5cclxuICAgIHJldHVybiBvYmo7XHJcbn0pO1xyXG5cclxualN1aXRlcy5jYWxlbmRhci5rZXlkb3duID0gZnVuY3Rpb24oZSkge1xyXG4gICAgdmFyIGNhbGVuZGFyID0gbnVsbDtcclxuICAgIGlmIChjYWxlbmRhciA9IGpTdWl0ZXMuY2FsZW5kYXIuY3VycmVudCkgeyBcclxuICAgICAgICBpZiAoZS53aGljaCA9PSAxMykge1xyXG4gICAgICAgICAgICAvLyBFTlRFUlxyXG4gICAgICAgICAgICBjYWxlbmRhci5jbG9zZShmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLndoaWNoID09IDI3KSB7XHJcbiAgICAgICAgICAgIC8vIEVTQ1xyXG4gICAgICAgICAgICBjYWxlbmRhci5jbG9zZShmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxualN1aXRlcy5jYWxlbmRhci5wcmV0dGlmeSA9IGZ1bmN0aW9uKGQsIHRleHRzKSB7XHJcbiAgICBpZiAoISB0ZXh0cykge1xyXG4gICAgICAgIHZhciB0ZXh0cyA9IHtcclxuICAgICAgICAgICAganVzdE5vdzogJ0p1c3Qgbm93JyxcclxuICAgICAgICAgICAgeE1pbnV0ZXNBZ286ICd7MH1tIGFnbycsXHJcbiAgICAgICAgICAgIHhIb3Vyc0FnbzogJ3swfWggYWdvJyxcclxuICAgICAgICAgICAgeERheXNBZ286ICd7MH1kIGFnbycsXHJcbiAgICAgICAgICAgIHhXZWVrc0FnbzogJ3swfXcgYWdvJyxcclxuICAgICAgICAgICAgeE1vbnRoc0FnbzogJ3swfSBtb24gYWdvJyxcclxuICAgICAgICAgICAgeFllYXJzQWdvOiAnezB9eSBhZ28nLFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZDEgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdmFyIGQyID0gbmV3IERhdGUoZCk7XHJcbiAgICB2YXIgdG90YWwgPSBwYXJzZUludCgoZDEgLSBkMikgLyAxMDAwIC8gNjApO1xyXG5cclxuICAgIFN0cmluZy5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24obykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoJ3swfScsIG8pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0b3RhbCA9PSAwKSB7XHJcbiAgICAgICAgdmFyIHRleHQgPSB0ZXh0cy5qdXN0Tm93O1xyXG4gICAgfSBlbHNlIGlmICh0b3RhbCA8IDkwKSB7XHJcbiAgICAgICAgdmFyIHRleHQgPSB0ZXh0cy54TWludXRlc0Fnby5mb3JtYXQodG90YWwpO1xyXG4gICAgfSBlbHNlIGlmICh0b3RhbCA8IDE0NDApIHsgLy8gT25lIGRheVxyXG4gICAgICAgIHZhciB0ZXh0ID0gdGV4dHMueEhvdXJzQWdvLmZvcm1hdChNYXRoLnJvdW5kKHRvdGFsLzYwKSk7XHJcbiAgICB9IGVsc2UgaWYgKHRvdGFsIDwgMjAxNjApIHsgLy8gMTQgZGF5c1xyXG4gICAgICAgIHZhciB0ZXh0ID0gdGV4dHMueERheXNBZ28uZm9ybWF0KE1hdGgucm91bmQodG90YWwgLyAxNDQwKSk7XHJcbiAgICB9IGVsc2UgaWYgKHRvdGFsIDwgNDMyMDApIHsgLy8gMzAgZGF5c1xyXG4gICAgICAgIHZhciB0ZXh0ID0gdGV4dHMueFdlZWtzQWdvLmZvcm1hdChNYXRoLnJvdW5kKHRvdGFsIC8gMTAwODApKTtcclxuICAgIH0gZWxzZSBpZiAodG90YWwgPCAxMDM2ODAwKSB7IC8vIDI0IG1vbnRoc1xyXG4gICAgICAgIHZhciB0ZXh0ID0gdGV4dHMueE1vbnRoc0Fnby5mb3JtYXQoTWF0aC5yb3VuZCh0b3RhbCAvIDQzMjAwKSk7XHJcbiAgICB9IGVsc2UgeyAvLyAyNCBtb250aHMrXHJcbiAgICAgICAgdmFyIHRleHQgPSB0ZXh0cy54WWVhcnNBZ28uZm9ybWF0KE1hdGgucm91bmQodG90YWwgLyA1MjU2MDApKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGV4dDtcclxufVxyXG5cclxualN1aXRlcy5jYWxlbmRhci5wcmV0dGlmeUFsbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByZXR0eWRhdGUnKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoZWxlbWVudHNbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLWRhdGUnKSkge1xyXG4gICAgICAgICAgICBlbGVtZW50c1tpXS5pbm5lckhUTUwgPSBqU3VpdGVzLmNhbGVuZGFyLnByZXR0aWZ5KGVsZW1lbnRzW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS1kYXRlJykpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50c1tpXS5pbm5lckhUTUwpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLnNldEF0dHJpYnV0ZSgnZGF0YS1kYXRlJywgZWxlbWVudHNbaV0uaW5uZXJIVE1MKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLmlubmVySFRNTCA9IGpTdWl0ZXMuY2FsZW5kYXIucHJldHRpZnkoZWxlbWVudHNbaV0uaW5uZXJIVE1MKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxualN1aXRlcy5jYWxlbmRhci5ub3cgPSBmdW5jdGlvbihkYXRlLCBkYXRlT25seSkge1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0ZSkpIHtcclxuICAgICAgICB2YXIgeSA9IGRhdGVbMF07XHJcbiAgICAgICAgdmFyIG0gPSBkYXRlWzFdO1xyXG4gICAgICAgIHZhciBkID0gZGF0ZVsyXTtcclxuICAgICAgICB2YXIgaCA9IGRhdGVbM107XHJcbiAgICAgICAgdmFyIGkgPSBkYXRlWzRdO1xyXG4gICAgICAgIHZhciBzID0gZGF0ZVs1XTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKCEgZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB5ID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIHZhciBtID0gZGF0ZS5nZXRNb250aCgpICsgMTtcclxuICAgICAgICB2YXIgZCA9IGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgICAgIHZhciBoID0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgIHZhciBpID0gZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgdmFyIHMgPSBkYXRlLmdldFNlY29uZHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGF0ZU9ubHkgPT0gdHJ1ZSkge1xyXG4gICAgICAgIHJldHVybiBqU3VpdGVzLnR3byh5KSArICctJyArIGpTdWl0ZXMudHdvKG0pICsgJy0nICsgalN1aXRlcy50d28oZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBqU3VpdGVzLnR3byh5KSArICctJyArIGpTdWl0ZXMudHdvKG0pICsgJy0nICsgalN1aXRlcy50d28oZCkgKyAnICcgKyBqU3VpdGVzLnR3byhoKSArICc6JyArIGpTdWl0ZXMudHdvKGkpICsgJzonICsgalN1aXRlcy50d28ocyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmpTdWl0ZXMuY2FsZW5kYXIudG9BcnJheSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICB2YXIgZGF0ZSA9IHZhbHVlLnNwbGl0KCgodmFsdWUuaW5kZXhPZignVCcpICE9PSAtMSkgPyAnVCcgOiAnICcpKTtcclxuICAgIHZhciB0aW1lID0gZGF0ZVsxXTtcclxuICAgIHZhciBkYXRlID0gZGF0ZVswXS5zcGxpdCgnLScpO1xyXG4gICAgdmFyIHkgPSBwYXJzZUludChkYXRlWzBdKTtcclxuICAgIHZhciBtID0gcGFyc2VJbnQoZGF0ZVsxXSk7XHJcbiAgICB2YXIgZCA9IHBhcnNlSW50KGRhdGVbMl0pO1xyXG5cclxuICAgIGlmICh0aW1lKSB7XHJcbiAgICAgICAgdmFyIHRpbWUgPSB0aW1lLnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgdmFyIGggPSBwYXJzZUludCh0aW1lWzBdKTtcclxuICAgICAgICB2YXIgaSA9IHBhcnNlSW50KHRpbWVbMV0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgaCA9IDA7XHJcbiAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFsgeSwgbSwgZCwgaCwgaSwgMCBdO1xyXG59XHJcblxyXG4vLyBIZWxwZXIgdG8gZXh0cmFjdCBkYXRlIGZyb20gYSBzdHJpbmdcclxualN1aXRlcy5jYWxlbmRhci5leHRyYWN0RGF0ZUZyb21TdHJpbmcgPSBmdW5jdGlvbihkYXRlLCBmb3JtYXQpIHtcclxuICAgIGlmIChkYXRlID4gMCAmJiBOdW1iZXIoZGF0ZSkgPT0gZGF0ZSkge1xyXG4gICAgICAgIHZhciBkID0gbmV3IERhdGUoTWF0aC5yb3VuZCgoZGF0ZSAtIDI1NTY5KSo4NjQwMCoxMDAwKSk7XHJcbiAgICAgICAgcmV0dXJuIGQuZ2V0RnVsbFllYXIoKSArIFwiLVwiICsgalN1aXRlcy50d28oZC5nZXRNb250aCgpKSArIFwiLVwiICsgalN1aXRlcy50d28oZC5nZXREYXRlKCkpICsgJyAwMDowMDowMCc7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG8gPSBqU3VpdGVzLm1hc2soZGF0ZSwgeyBtYXNrOiBmb3JtYXQgfSwgdHJ1ZSk7XHJcbiAgICBpZiAoby5kYXRlWzBdICYmIG8uZGF0ZVsxXSkge1xyXG4gICAgICAgIGlmICghIG8uZGF0ZVsyXSkge1xyXG4gICAgICAgICAgICBvLmRhdGVbMl0gPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG8uZGF0ZVswXSArICctJyArIGpTdWl0ZXMudHdvKG8uZGF0ZVsxXSkgKyAnLScgKyBqU3VpdGVzLnR3byhvLmRhdGVbMl0pICsgJyAnICsgalN1aXRlcy50d28oby5kYXRlWzNdKSArICc6JyArIGpTdWl0ZXMudHdvKG8uZGF0ZVs0XSkrICc6JyArIGpTdWl0ZXMudHdvKG8uZGF0ZVs1XSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJyc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEYXRlIHRvIG51bWJlclxyXG4gKi9cclxualN1aXRlcy5jYWxlbmRhci5kYXRlVG9OdW0gPSBmdW5jdGlvbihhLCBiKSB7XHJcbiAgICBhID0gbmV3IERhdGUoYSk7XHJcbiAgICBpZiAoISBiKSB7XHJcbiAgICAgICAgYiA9ICcxODk5LTEyLTMwICcgKyBhLmdldEhvdXJzKCkgKyAnOicgKyBhLmdldE1pbnV0ZXMoKSArICc6JyArIGEuZ2V0U2Vjb25kcygpO1xyXG4gICAgfVxyXG4gICAgYiA9IG5ldyBEYXRlKGIpO1xyXG4gICAgdmFyIHYgPSBhLmdldFRpbWUoKSAtIGIuZ2V0VGltZSgpO1xyXG4gICAgcmV0dXJuIE1hdGgucm91bmQodiAvIDg2NDAwMDAwKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIE51bWJlciB0byBkYXRlXHJcbiAqL1xyXG5qU3VpdGVzLmNhbGVuZGFyLm51bVRvRGF0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICB2YXIgZCA9IG5ldyBEYXRlKE1hdGgucm91bmQoKHZhbHVlIC0gMjU1NjkpKjg2NDAwKjEwMDApKTtcclxuICAgIHJldHVybiBkLmdldEZ1bGxZZWFyKCkgKyBcIi1cIiArIGpTdWl0ZXMudHdvKGQuZ2V0TW9udGgoKSsxKSArIFwiLVwiICsgalN1aXRlcy50d28oZC5nZXREYXRlKCkpICsgJyAwMDowMDowMCc7XHJcbn1cclxuXHJcbi8vIEhlbHBlciB0byBjb252ZXJ0IGRhdGUgaW50byBzdHJpbmdcclxualN1aXRlcy5jYWxlbmRhci5nZXREYXRlU3RyaW5nID0gZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcclxuICAgIGlmICghIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExhYmVsc1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mKG9wdGlvbnMpID09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgdmFyIGZvcm1hdCA9IG9wdGlvbnMuZm9ybWF0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgZm9ybWF0ID0gb3B0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoISBmb3JtYXQpIHtcclxuICAgICAgICBmb3JtYXQgPSAnWVlZWS1NTS1ERCc7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ29udmVydCB0byBudW1iZXIgb2YgaG91cnNcclxuICAgIGlmICh0eXBlb2YodmFsdWUpID09ICdudW1iZXInICYmIGZvcm1hdC5pbmRleE9mKCdbaF0nKSA+PSAwKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHBhcnNlRmxvYXQoMjQgKiBOdW1iZXIodmFsdWUpKTtcclxuICAgICAgICBpZiAoZm9ybWF0LmluZGV4T2YoJ21tJykgPj0gMCkge1xyXG4gICAgICAgICAgICB2YXIgaCA9ICgnJytyZXN1bHQpLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgICAgIGlmIChoWzFdKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZCA9IDYwICogcGFyc2VGbG9hdCgnMC4nICsgaFsxXSlcclxuICAgICAgICAgICAgICAgIGQgPSBwYXJzZUZsb2F0KGQudG9GaXhlZCgyKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzdWx0ID0gcGFyc2VJbnQoaFswXSkgKyAnOicgKyBqU3VpdGVzLnR3byhkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBEYXRlIGluc3RhbmNlXHJcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgdmFsdWUgPSBqU3VpdGVzLmNhbGVuZGFyLm5vdyh2YWx1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKHZhbHVlICYmIGpTdWl0ZXMuaXNOdW1lcmljKHZhbHVlKSkge1xyXG4gICAgICAgIHZhbHVlID0galN1aXRlcy5jYWxlbmRhci5udW1Ub0RhdGUodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRva2Vuc1xyXG4gICAgdmFyIHRva2VucyA9IFsgJ0RBWScsICdXRCcsICdEREREJywgJ0RERCcsICdERCcsICdEJywgJ1EnLCAnSEgyNCcsICdISDEyJywgJ0hIJywgJ0gnLCAnQU0vUE0nLCAnTUknLCAnU1MnLCAnTVMnLCAnWVlZWScsICdZWVknLCAnWVknLCAnWScsICdNT05USCcsICdNT04nLCAnTU1NTU0nLCAnTU1NTScsICdNTU0nLCAnTU0nLCAnTScsICcuJyBdO1xyXG5cclxuICAgIC8vIEV4cHJlc3Npb24gdG8gZXh0cmFjdCBhbGwgdG9rZW5zIGZyb20gdGhlIHN0cmluZ1xyXG4gICAgdmFyIGUgPSBuZXcgUmVnRXhwKHRva2Vucy5qb2luKCd8JyksICdnaScpO1xyXG4gICAgLy8gRXh0cmFjdFxyXG4gICAgdmFyIHQgPSBmb3JtYXQubWF0Y2goZSk7XHJcblxyXG4gICAgLy8gQ29tcGF0aWJpbGl0eSB3aXRoIGV4Y2VsXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAodFtpXS50b1VwcGVyQ2FzZSgpID09ICdNTScpIHtcclxuICAgICAgICAgICAgLy8gTm90IGEgbW9udGgsIGNvcnJlY3QgdG8gbWludXRlc1xyXG4gICAgICAgICAgICBpZiAodFtpLTFdICYmIHRbaS0xXS50b1VwcGVyQ2FzZSgpLmluZGV4T2YoJ0gnKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0W2ldID0gJ21pJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0W2ktMl0gJiYgdFtpLTJdLnRvVXBwZXJDYXNlKCkuaW5kZXhPZignSCcpID49IDApIHtcclxuICAgICAgICAgICAgICAgIHRbaV0gPSAnbWknO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRbaSsxXSAmJiB0W2krMV0udG9VcHBlckNhc2UoKS5pbmRleE9mKCdTJykgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgdFtpXSA9ICdtaSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodFtpKzJdICYmIHRbaSsyXS50b1VwcGVyQ2FzZSgpLmluZGV4T2YoJ1MnKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0W2ldID0gJ21pJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBPYmplY3RcclxuICAgIHZhciBvID0ge1xyXG4gICAgICAgIHRva2VuczogdFxyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbHVlXHJcbiAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICB2YXIgZCA9ICcnK3ZhbHVlO1xyXG4gICAgICAgIHZhciBzcGxpdFN0ciA9IChkLmluZGV4T2YoJ1QnKSAhPT0gLTEpID8gJ1QnIDogJyAnO1xyXG4gICAgICAgIGQgPSBkLnNwbGl0KHNwbGl0U3RyKTtcclxuIFxyXG4gICAgICAgIHZhciBoID0gMDtcclxuICAgICAgICB2YXIgbSA9IDA7XHJcbiAgICAgICAgdmFyIHMgPSAwO1xyXG5cclxuICAgICAgICBpZiAoZFsxXSkge1xyXG4gICAgICAgICAgICBoID0gZFsxXS5zcGxpdCgnOicpO1xyXG4gICAgICAgICAgICBtID0gaFsxXSA/IGhbMV0gOiAwO1xyXG4gICAgICAgICAgICBzID0gaFsyXSA/IGhbMl0gOiAwO1xyXG4gICAgICAgICAgICBoID0gaFswXSA/IGhbMF0gOiAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZCA9IGRbMF0uc3BsaXQoJy0nKTtcclxuXHJcbiAgICAgICAgaWYgKGRbMF0gJiYgZFsxXSAmJiBkWzJdICYmIGRbMF0gPiAwICYmIGRbMV0gPiAwICYmIGRbMV0gPCAxMyAmJiBkWzJdID4gMCAmJiBkWzJdIDwgMzIpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIERhdGFcclxuICAgICAgICAgICAgby5kYXRhID0gWyBkWzBdLCBkWzFdLCBkWzJdLCBoLCBtLCBzIF07XHJcblxyXG4gICAgICAgICAgICAvLyBWYWx1ZVxyXG4gICAgICAgICAgICBvLnZhbHVlID0gW107XHJcblxyXG4gICAgICAgICAgICAvLyBDYWxlbmRhciBpbnN0YW5jZVxyXG4gICAgICAgICAgICB2YXIgY2FsZW5kYXIgPSBuZXcgRGF0ZShvLmRhdGFbMF0sIG8uZGF0YVsxXS0xLCBvLmRhdGFbMl0sIG8uZGF0YVszXSwgby5kYXRhWzRdLCBvLmRhdGFbNV0pO1xyXG5cclxuICAgICAgICAgICAgLy8gR2V0IG1ldGhvZFxyXG4gICAgICAgICAgICB2YXIgZ2V0ID0gZnVuY3Rpb24oaSkge1xyXG4gICAgICAgICAgICAgICAgLy8gVG9rZW5cclxuICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy50b2tlbnNbaV07XHJcbiAgICAgICAgICAgICAgICAvLyBDYXNlIHRva2VuXHJcbiAgICAgICAgICAgICAgICB2YXIgcyA9IHQudG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIHZhciB2ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocyA9PT0gJ1lZWVknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdiA9IHRoaXMuZGF0YVswXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocyA9PT0gJ1lZWScpIHtcclxuICAgICAgICAgICAgICAgICAgICB2ID0gdGhpcy5kYXRhWzBdLnN1YnN0cmluZygxLDQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzID09PSAnWVknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdiA9IHRoaXMuZGF0YVswXS5zdWJzdHJpbmcoMiw0KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocyA9PT0gJ1knKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdiA9IHRoaXMuZGF0YVswXS5zdWJzdHJpbmcoMyw0KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodCA9PT0gJ01PTicpIHtcclxuICAgICAgICAgICAgICAgICAgICB2ID0galN1aXRlcy5jYWxlbmRhci5tb250aHNbY2FsZW5kYXIuZ2V0TW9udGgoKV0uc3Vic3RyKDAsMykudG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodCA9PT0gJ21vbicpIHtcclxuICAgICAgICAgICAgICAgICAgICB2ID0galN1aXRlcy5jYWxlbmRhci5tb250aHNbY2FsZW5kYXIuZ2V0TW9udGgoKV0uc3Vic3RyKDAsMykudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodCA9PT0gJ01PTlRIJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHYgPSBqU3VpdGVzLmNhbGVuZGFyLm1vbnRoc1tjYWxlbmRhci5nZXRNb250aCgpXS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0ID09PSAnbW9udGgnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdiA9IGpTdWl0ZXMuY2FsZW5kYXIubW9udGhzW2NhbGVuZGFyLmdldE1vbnRoKCldLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMgPT09ICdNTU1NTScpIHtcclxuICAgICAgICAgICAgICAgICAgICB2ID0galN1aXRlcy5jYWxlbmRhci5tb250aHNbY2FsZW5kYXIuZ2V0TW9udGgoKV0uc3Vic3RyKDAsIDEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzID09PSAnTU1NTScgfHwgdCA9PT0gJ01vbnRoJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHYgPSBqU3VpdGVzLmNhbGVuZGFyLm1vbnRoc1tjYWxlbmRhci5nZXRNb250aCgpXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocyA9PT0gJ01NTScgfHwgdCA9PSAnTW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHYgPSBqU3VpdGVzLmNhbGVuZGFyLm1vbnRoc1tjYWxlbmRhci5nZXRNb250aCgpXS5zdWJzdHIoMCwzKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocyA9PT0gJ01NJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHYgPSBqU3VpdGVzLnR3byh0aGlzLmRhdGFbMV0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzID09PSAnTScpIHtcclxuICAgICAgICAgICAgICAgICAgICB2ID0gY2FsZW5kYXIuZ2V0TW9udGgoKSsxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0ID09PSAnREFZJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHYgPSBqU3VpdGVzLmNhbGVuZGFyLndlZWtkYXlzW2NhbGVuZGFyLmdldERheSgpXS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0ID09PSAnZGF5Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHYgPSBqU3VpdGVzLmNhbGVuZGFyLndlZWtkYXlzW2NhbGVuZGFyLmdldERheSgpXS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzID09PSAnRERERCcgfHwgdCA9PSAnRGF5Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHYgPSBqU3VpdGVzLmNhbGVuZGFyLndlZWtkYXlzW2NhbGVuZGFyLmdldERheSgpXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocyA9PT0gJ0RERCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2ID0galN1aXRlcy5jYWxlbmRhci53ZWVrZGF5c1tjYWxlbmRhci5nZXREYXkoKV0uc3Vic3RyKDAsMyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMgPT09ICdERCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2ID0galN1aXRlcy50d28odGhpcy5kYXRhWzJdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocyA9PT0gJ0QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdiA9IHRoaXMuZGF0YVsyXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocyA9PT0gJ1EnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdiA9IE1hdGguZmxvb3IoKGNhbGVuZGFyLmdldE1vbnRoKCkgKyAzKSAvIDMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzID09PSAnSEgyNCcgfHwgcyA9PT0gJ0hIJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHYgPSBqU3VpdGVzLnR3byh0aGlzLmRhdGFbM10pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzID09PSAnSEgxMicpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhWzNdID4gMTIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdiA9IGpTdWl0ZXMudHdvKHRoaXMuZGF0YVszXSAtIDEyKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0galN1aXRlcy50d28odGhpcy5kYXRhWzNdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMgPT09ICdIJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHYgPSB0aGlzLmRhdGFbM107XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMgPT09ICdNSScpIHtcclxuICAgICAgICAgICAgICAgICAgICB2ID0galN1aXRlcy50d28odGhpcy5kYXRhWzRdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocyA9PT0gJ1NTJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHYgPSBqU3VpdGVzLnR3byh0aGlzLmRhdGFbNV0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzID09PSAnTVMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdiA9IGNhbGVuZGFyLmdldE1pbGxpc2Vjb25kcygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzID09PSAnQU0vUE0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVszXSA+PSAxMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0gJ1BNJztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0gJ0FNJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMgPT09ICdXRCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2ID0galN1aXRlcy5jYWxlbmRhci53ZWVrZGF5c1tjYWxlbmRhci5nZXREYXkoKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHYgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlW2ldID0gdGhpcy50b2tlbnNbaV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVbaV0gPSB2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG8udG9rZW5zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBnZXQuY2FsbChvLCBpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBQdXQgcGllY2VzIHRvZ2V0aGVyXHJcbiAgICAgICAgICAgIHZhbHVlID0gby52YWx1ZS5qb2luKCcnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YWx1ZSA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuXHJcbi8vIEpzdWl0ZXMgY2FsZW5kYXIgbGFiZWxzXHJcbmpTdWl0ZXMuY2FsZW5kYXIud2Vla2RheXMgPSBbICdTdW5kYXknLCdNb25kYXknLCdUdWVzZGF5JywnV2VkbmVzZGF5JywnVGh1cnNkYXknLCdGcmlkYXknLCdTYXR1cmRheScgXTtcclxualN1aXRlcy5jYWxlbmRhci5tb250aHMgPSBbJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnLCAnSnVseScsICdBdWd1c3QnLCAnU2VwdGVtYmVyJywgJ09jdG9iZXInLCAnTm92ZW1iZXInLCAnRGVjZW1iZXInXTtcclxualN1aXRlcy5jYWxlbmRhci53ZWVrZGF5c1Nob3J0ID0gWyAnU3VuJywnTW9uJywnVHVlJywnV2VkJywnVGh1JywnRnJpJywnU2F0JyBdO1xyXG5qU3VpdGVzLmNhbGVuZGFyLm1vbnRoc1Nob3J0ID0gWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYyddO1xyXG5cclxuXHJcbmpTdWl0ZXMuY29sb3IgPSAoZnVuY3Rpb24oZWwsIG9wdGlvbnMpIHtcclxuICAgIC8vIEFscmVhZHkgY3JlYXRlZCwgdXBkYXRlIG9wdGlvbnNcclxuICAgIGlmIChlbC5jb2xvcikge1xyXG4gICAgICAgIHJldHVybiBlbC5jb2xvci5zZXRPcHRpb25zKG9wdGlvbnMsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE5ldyBpbnN0YW5jZVxyXG4gICAgdmFyIG9iaiA9IHsgdHlwZTogJ2NvbG9yJyB9O1xyXG4gICAgb2JqLm9wdGlvbnMgPSB7fTtcclxuXHJcbiAgICB2YXIgY29udGFpbmVyID0gbnVsbDtcclxuICAgIHZhciBiYWNrZHJvcCA9IG51bGw7XHJcbiAgICB2YXIgY29udGVudCA9IG51bGw7XHJcbiAgICB2YXIgcmVzZXRCdXR0b24gPSBudWxsO1xyXG4gICAgdmFyIGNsb3NlQnV0dG9uID0gbnVsbDtcclxuICAgIHZhciB0YWJzID0gbnVsbDtcclxuICAgIHZhciBqc3VpdGVzVGFicyA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBvYmouc2V0T3B0aW9ucyA9IGZ1bmN0aW9uKG9wdGlvbnMsIHJlc2V0KSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGVkZWYge09iamVjdH0gZGVmYXVsdHNcclxuICAgICAgICAgKiBAcHJvcGVydHkgeyhzdHJpbmd8QXJyYXkpfSB2YWx1ZSAtIEluaXRpYWwgdmFsdWUgb2YgdGhlIGNvbXBvbnRlbnRcclxuICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gcGxhY2Vob2xkZXIgLSBUaGUgZGVmYXVsdCBpbnN0cnVjdGlvbiB0ZXh0IG9uIHRoZSBlbGVtZW50XHJcbiAgICAgICAgICogQHByb3BlcnR5IHtyZXF1ZXN0Q2FsbGJhY2t9IG9uY2hhbmdlIC0gTWV0aG9kIHRvIGJlIGV4ZWN1dGUgYWZ0ZXIgYW55IGNoYW5nZXMgb24gdGhlIGVsZW1lbnRcclxuICAgICAgICAgKiBAcHJvcGVydHkge3JlcXVlc3RDYWxsYmFja30gb25jbG9zZSAtIE1ldGhvZCB0byBiZSBleGVjdXRlIHdoZW4gdGhlIGVsZW1lbnQgaXMgY2xvc2VkXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd9IGRvbmVMYWJlbCAtIExhYmVsIGZvciBidXR0b24gZG9uZVxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSByZXNldExhYmVsIC0gTGFiZWwgZm9yIGJ1dHRvbiByZXNldFxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSByZXNldFZhbHVlIC0gVmFsdWUgZm9yIGJ1dHRvbiByZXNldFxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7Qm9vbH0gc2hvd1Jlc2V0QnV0dG9uIC0gQWN0aXZlIG9yIG5vdGUgZm9yIGJ1dHRvbiByZXNldCAtIGRlZmF1bHQgZmFsc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcclxuICAgICAgICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgICAgICAgIG9ub3BlbjogbnVsbCxcclxuICAgICAgICAgICAgb25jbG9zZTogbnVsbCxcclxuICAgICAgICAgICAgb25jaGFuZ2U6IG51bGwsXHJcbiAgICAgICAgICAgIGNsb3NlT25DaGFuZ2U6IHRydWUsXHJcbiAgICAgICAgICAgIHBhbGV0dGU6IG51bGwsXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBudWxsLFxyXG4gICAgICAgICAgICBkb25lTGFiZWw6ICdEb25lJyxcclxuICAgICAgICAgICAgcmVzZXRMYWJlbDogJ1Jlc2V0JyxcclxuICAgICAgICAgICAgZnVsbHNjcmVlbjogZmFsc2UsXHJcbiAgICAgICAgICAgIG9wZW5lZDogZmFsc2UsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoISBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChvcHRpb25zICYmICEgb3B0aW9ucy5wYWxldHRlKSB7XHJcbiAgICAgICAgICAgIC8vIERlZmF1bHQgcGFsbGV0ZVxyXG4gICAgICAgICAgICBvcHRpb25zLnBhbGV0dGUgPSBqU3VpdGVzLnBhbGV0dGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBvdXIgb2JqZWN0XHJcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gZGVmYXVsdHMpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zW3Byb3BlcnR5XSA9IG9wdGlvbnNbcHJvcGVydHldO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9uc1twcm9wZXJ0eV0pID09ICd1bmRlZmluZWQnIHx8IHJlc2V0ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnNbcHJvcGVydHldID0gZGVmYXVsdHNbcHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgdGhlIHRleHQgb2YgdGhlIGNvbnRyb2xzLCBpZiB0aGV5IGhhdmUgYWxyZWFkeSBiZWVuIGNyZWF0ZWRcclxuICAgICAgICBpZiAocmVzZXRCdXR0b24pIHtcclxuICAgICAgICAgICAgcmVzZXRCdXR0b24uaW5uZXJIVE1MID0gb2JqLm9wdGlvbnMucmVzZXRMYWJlbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsb3NlQnV0dG9uKSB7XHJcbiAgICAgICAgICAgIGNsb3NlQnV0dG9uLmlubmVySFRNTCA9IG9iai5vcHRpb25zLmRvbmVMYWJlbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgcGFsbGV0ZVxyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5wYWxldHRlICYmIGpzdWl0ZXNUYWJzKSB7XHJcbiAgICAgICAgICAgIGpzdWl0ZXNUYWJzLnVwZGF0ZUNvbnRlbnQoMCwgdGFibGUoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBWYWx1ZVxyXG4gICAgICAgIGlmICh0eXBlb2Ygb2JqLm9wdGlvbnMudmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGVsLnZhbHVlID0gb2JqLm9wdGlvbnMudmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQbGFjZWhvbGRlclxyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5wbGFjZWhvbGRlcikge1xyXG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgb2JqLm9wdGlvbnMucGxhY2Vob2xkZXIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChlbC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJykpIHtcclxuICAgICAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE9wZW4gY29sb3IgcGFsbGV0ZVxyXG4gICAgICovXHJcbiAgICBvYmoub3BlbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICghIGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2pjb2xvci1mb2N1cycpKSB7XHJcbiAgICAgICAgICAgIC8vIFN0YXJ0IHRyYWNraW5nXHJcbiAgICAgICAgICAgIGpTdWl0ZXMudHJhY2tpbmcob2JqLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNob3cgY29sb3JwaWNrZXJcclxuICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2pjb2xvci1mb2N1cycpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlY3RDb250ZW50ID0gY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChqU3VpdGVzLmdldFdpbmRvd1dpZHRoKCkgPCA4MDAgfHwgb2JqLm9wdGlvbnMuZnVsbHNjcmVlbiA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLnRvcCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCdqY29sb3ItZnVsbHNjcmVlbicpO1xyXG4gICAgICAgICAgICAgICAgalN1aXRlcy5hbmltYXRpb24uc2xpZGVCb3R0b20oY29udGVudCwgMSk7XHJcbiAgICAgICAgICAgICAgICBiYWNrZHJvcC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb250ZW50LmNsYXNzTGlzdC5jb250YWlucygnamNvbG9yLWZ1bGxzY3JlZW4nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnamNvbG9yLWZ1bGxzY3JlZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZHJvcC5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMucG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmlubmVySGVpZ2h0IDwgcmVjdC5ib3R0b20gKyByZWN0Q29udGVudC5oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS50b3AgPSAocmVjdC50b3AgLSAocmVjdENvbnRlbnQuaGVpZ2h0ICsgMikpICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLnRvcCA9IChyZWN0LnRvcCArIHJlY3QuaGVpZ2h0ICsgMikgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLmxlZnQgPSByZWN0LmxlZnQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmlubmVySGVpZ2h0IDwgcmVjdC5ib3R0b20gKyByZWN0Q29udGVudC5oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS50b3AgPSAtMSAqIChyZWN0Q29udGVudC5oZWlnaHQgKyByZWN0LmhlaWdodCArIDIpICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLnRvcCA9ICcycHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbm9wZW4pID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm9ub3BlbihlbCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGpzdWl0ZXNUYWJzLnNldEJvcmRlcihqc3VpdGVzVGFicy5nZXRBY3RpdmUoKSk7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgc2xpZGVyc1xyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZ2IgPSBIZXhUb1JnYihvYmoub3B0aW9ucy52YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmdiSW5wdXRzLmZvckVhY2goZnVuY3Rpb24ocmdiSW5wdXQsIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmdiSW5wdXQudmFsdWUgPSByZ2JbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJnYklucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xvc2UgY29sb3IgcGFsbGV0ZVxyXG4gICAgICovXHJcbiAgICBvYmouY2xvc2UgPSBmdW5jdGlvbihpZ25vcmVFdmVudHMpIHtcclxuICAgICAgICBpZiAoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnamNvbG9yLWZvY3VzJykpIHtcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIGZvY3VzXHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdqY29sb3ItZm9jdXMnKTtcclxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGJhY2tkcm9wIGlzIGhpZGRlblxyXG4gICAgICAgICAgICBiYWNrZHJvcC5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgICAgIC8vIENhbGwgcmVsYXRlZCBldmVudHNcclxuICAgICAgICAgICAgaWYgKCEgaWdub3JlRXZlbnRzICYmIHR5cGVvZihvYmoub3B0aW9ucy5vbmNsb3NlKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5vbmNsb3NlKGVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBTdG9wICB0aGUgb2JqZWN0XHJcbiAgICAgICAgICAgIGpTdWl0ZXMudHJhY2tpbmcob2JqLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb2JqLm9wdGlvbnMudmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdmFsdWVcclxuICAgICAqL1xyXG4gICAgb2JqLnNldFZhbHVlID0gZnVuY3Rpb24oY29sb3IpIHtcclxuICAgICAgICBpZiAoISBjb2xvcikge1xyXG4gICAgICAgICAgICBjb2xvciA9ICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbG9yICE9IG9iai5vcHRpb25zLnZhbHVlKSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zLnZhbHVlID0gY29sb3I7XHJcbiAgICAgICAgICAgIHNsaWRlcnNSZXN1bHQgPSBjb2xvcjtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBjdXJyZW50IHNlbGVjZGVkIG1hcmtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5qY29sb3Itc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZC5jbGFzc0xpc3QucmVtb3ZlKCdqY29sb3Itc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gTWFyayBjZWxsIGFzIHNlbGVjdGVkXHJcbiAgICAgICAgICAgIGlmIChvYmoudmFsdWVzW2NvbG9yXSkge1xyXG4gICAgICAgICAgICAgICAgb2JqLnZhbHVlc1tjb2xvcl0uY2xhc3NMaXN0LmFkZCgnamNvbG9yLXNlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIE9uY2hhbmdlXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub25jaGFuZ2UpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm9uY2hhbmdlKGVsLCBjb2xvcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIENoYW5nZXNcclxuICAgICAgICAgICAgaWYgKGVsLnZhbHVlICE9IG9iai5vcHRpb25zLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTZXQgaW5wdXQgdmFsdWVcclxuICAgICAgICAgICAgICAgIGVsLnZhbHVlID0gb2JqLm9wdGlvbnMudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAvLyBFbGVtZW50IG9uY2hhbmdlIG5hdGl2ZVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihlbC5vbmNoYW5nZSkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLm9uY2hhbmdlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoYW5nZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbC52YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuY2xvc2VPbkNoYW5nZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB2YWx1ZVxyXG4gICAgICovXHJcbiAgICBvYmouZ2V0VmFsdWUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gb2JqLm9wdGlvbnMudmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGJhY2tkcm9wQ2xpY2tDb250cm9sID0gZmFsc2U7XHJcblxyXG4gICAgLy8gQ29udmVydHMgYSBudW1iZXIgaW4gZGVjaW1hbCB0byBoZXhhZGVjaW1hbFxyXG4gICAgdmFyIGRlY1RvSGV4ID0gZnVuY3Rpb24obnVtKSB7XHJcbiAgICAgICAgdmFyIGhleCA9IG51bS50b1N0cmluZygxNik7XHJcbiAgICAgICAgcmV0dXJuIGhleC5sZW5ndGggPT09IDEgPyBcIjBcIiArIGhleCA6IGhleDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb252ZXJ0cyBhIGNvbG9yIGluIHJnYiB0byBoZXhhZGVjaW1hbFxyXG4gICAgdmFyIHJnYlRvSGV4ID0gZnVuY3Rpb24ociwgZywgYikge1xyXG4gICAgICAgIHJldHVybiBcIiNcIiArIGRlY1RvSGV4KHIpICsgZGVjVG9IZXgoZykgKyBkZWNUb0hleChiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb252ZXJ0cyBhIG51bWJlciBpbiBoZXhhZGVjaW1hbCB0byBkZWNpbWFsXHJcbiAgICB2YXIgaGV4VG9EZWMgPSBmdW5jdGlvbihoZXgpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQoJzB4JyArIGhleCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ29udmVydHMgYSBjb2xvciBpbiBoZXhhZGVjaW1hbCB0byByZ2JcclxuICAgIHZhciBIZXhUb1JnYiA9IGZ1bmN0aW9uKGhleCkge1xyXG4gICAgICAgIHJldHVybiBbaGV4VG9EZWMoaGV4LnN1YnN0cigxLCAyKSksIGhleFRvRGVjKGhleC5zdWJzdHIoMywgMikpLCBoZXhUb0RlYyhoZXguc3Vic3RyKDUsIDIpKV1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgdGFibGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBDb250ZW50IG9mIHRoZSBmaXJzdCB0YWJcclxuICAgICAgICB2YXIgdGFibGVDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0YWJsZUNvbnRhaW5lci5jbGFzc05hbWUgPSAnamNvbG9yLWdyaWQnO1xyXG5cclxuICAgICAgICAvLyBDZWxsc1xyXG4gICAgICAgIG9iai52YWx1ZXMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gVGFibGUgcGFsbGV0ZVxyXG4gICAgICAgIHZhciB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcclxuICAgICAgICB0LnNldEF0dHJpYnV0ZSgnY2VsbHBhZGRpbmcnLCAnNycpO1xyXG4gICAgICAgIHQuc2V0QXR0cmlidXRlKCdjZWxsc3BhY2luZycsICcwJyk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JqLm9wdGlvbnMucGFsZXR0ZS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICB2YXIgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5vcHRpb25zLnBhbGV0dGVbal0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBvYmoub3B0aW9ucy5wYWxldHRlW2pdW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbG9yLmxlbmd0aCA8IDcgJiYgY29sb3Iuc3Vic3RyKDAsMSkgIT09ICcjJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yID0gJyMnICsgY29sb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0ZC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjtcclxuICAgICAgICAgICAgICAgIHRkLnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIGNvbG9yKTtcclxuICAgICAgICAgICAgICAgIHRkLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGQpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFNlbGVjdGVkIGNvbG9yXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMudmFsdWUgPT0gY29sb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZC5jbGFzc0xpc3QuYWRkKCdqY29sb3Itc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBQb3NzaWJsZSB2YWx1ZXNcclxuICAgICAgICAgICAgICAgIG9iai52YWx1ZXNbY29sb3JdID0gdGQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdC5hcHBlbmRDaGlsZCh0cik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBcHBlbmQgdG8gdGhlIHRhYmxlXHJcbiAgICAgICAgdGFibGVDb250YWluZXIuYXBwZW5kQ2hpbGQodCk7XHJcblxyXG4gICAgICAgIC8vIFNlbGVjdCBjb2xvclxyXG4gICAgICAgIHRhYmxlQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBpZiAoZS50YXJnZXQudGFnTmFtZSA9PSAnVEQnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnKTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5zZXRWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRhYmxlQ29udGFpbmVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENhbnZhcyB3aGVyZSB0aGUgaW1hZ2Ugd2lsbCBiZSByZW5kZXJlZFxyXG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgY2FudmFzLndpZHRoID0gMjAwO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IDE2MDtcclxuICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuXHJcbiAgICB2YXIgcmVzaXplQ2FudmFzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gU3BlY2lmaWNhdGlvbnMgbmVjZXNzYXJ5IHRvIGNvcnJlY3RseSBvYnRhaW4gY29sb3JzIGxhdGVyIGluIGNlcnRhaW4gcG9zaXRpb25zXHJcbiAgICAgICAgdmFyIG0gPSB0YWJzLmZpcnN0Q2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gbS53aWR0aCAtIDE0O1xyXG4gICAgICAgIGdyYWRpZW50KClcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZ3JhZGllbnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZyA9IGNvbnRleHQuY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgY2FudmFzLndpZHRoLCAwKTtcclxuICAgICAgICAvLyBDcmVhdGUgY29sb3IgZ3JhZGllbnRcclxuICAgICAgICBnLmFkZENvbG9yU3RvcCgwLCAgICBcInJnYigyNTUsMCwwKVwiKTtcclxuICAgICAgICBnLmFkZENvbG9yU3RvcCgwLjE1LCBcInJnYigyNTUsMCwyNTUpXCIpO1xyXG4gICAgICAgIGcuYWRkQ29sb3JTdG9wKDAuMzMsIFwicmdiKDAsMCwyNTUpXCIpO1xyXG4gICAgICAgIGcuYWRkQ29sb3JTdG9wKDAuNDksIFwicmdiKDAsMjU1LDI1NSlcIik7XHJcbiAgICAgICAgZy5hZGRDb2xvclN0b3AoMC42NywgXCJyZ2IoMCwyNTUsMClcIik7XHJcbiAgICAgICAgZy5hZGRDb2xvclN0b3AoMC44NCwgXCJyZ2IoMjU1LDI1NSwwKVwiKTtcclxuICAgICAgICBnLmFkZENvbG9yU3RvcCgxLCAgICBcInJnYigyNTUsMCwwKVwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGc7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIGcgPSBjb250ZXh0LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIDAsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIGcuYWRkQ29sb3JTdG9wKDAsICAgXCJyZ2JhKDI1NSwyNTUsMjU1LDEpXCIpO1xyXG4gICAgICAgIGcuYWRkQ29sb3JTdG9wKDAuNSwgXCJyZ2JhKDI1NSwyNTUsMjU1LDApXCIpO1xyXG4gICAgICAgIGcuYWRkQ29sb3JTdG9wKDAuNSwgXCJyZ2JhKDAsMCwwLDApXCIpO1xyXG4gICAgICAgIGcuYWRkQ29sb3JTdG9wKDEsICAgXCJyZ2JhKDAsMCwwLDEpXCIpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZztcclxuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGhzbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBcImpjb2xvci1oc2xcIjtcclxuXHJcbiAgICAgICAgdmFyIHBvaW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgcG9pbnQuY2xhc3NOYW1lID0gJ2pjb2xvci1wb2ludCc7XHJcblxyXG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoY2FudmFzKTtcclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQocG9pbnQpO1xyXG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcclxuXHJcbiAgICAgICAgLy8gTW92ZXMgdGhlIG1hcnF1ZWUgcG9pbnQgdG8gdGhlIHNwZWNpZmllZCBwb3NpdGlvblxyXG4gICAgICAgIHZhciB1cGRhdGUgPSBmdW5jdGlvbihidXR0b25zLCB4LCB5KSB7XHJcbiAgICAgICAgICAgIGlmIChidXR0b25zID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IHggLSByZWN0LmxlZnQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG9wID0geSAtIHJlY3QudG9wO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxlZnQgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodG9wIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobGVmdCA+IHJlY3Qud2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gcmVjdC53aWR0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0b3AgPiByZWN0LmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IHJlY3QuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcG9pbnQuc3R5bGUubGVmdCA9IGxlZnQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgcG9pbnQuc3R5bGUudG9wID0gdG9wICsgJ3B4JztcclxuICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGNvbnRleHQuZ2V0SW1hZ2VEYXRhKGxlZnQsIHRvcCwgMSwgMSkuZGF0YTtcclxuICAgICAgICAgICAgICAgIHNsaWRlcnNSZXN1bHQgPSByZ2JUb0hleChwaXhlbFswXSwgcGl4ZWxbMV0sIHBpeGVsWzJdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXBwbGllcyB0aGUgcG9pbnQncyBtb3Rpb24gZnVuY3Rpb24gdG8gdGhlIGRpdiB0aGF0IGNvbnRhaW5zIGl0XHJcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZShlLmJ1dHRvbnMsIGUuY2xpZW50WCwgZS5jbGllbnRZKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZShlLmJ1dHRvbnMsIGUuY2xpZW50WCwgZS5jbGllbnRZKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZSgxLCBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFgsIGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBzbGlkZXJzUmVzdWx0ID0gJyc7XHJcblxyXG4gICAgdmFyIHJnYklucHV0cyA9IFtdO1xyXG5cclxuICAgIHZhciBjaGFuZ2VJbnB1dENvbG9ycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChzbGlkZXJzUmVzdWx0ICE9PSAnJykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJnYklucHV0cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRDb2xvciA9IEhleFRvUmdiKHNsaWRlcnNSZXN1bHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGN1cnJlbnRDb2xvcltqXSA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG5ld0dyYWRpZW50ID0gJ2xpbmVhci1ncmFkaWVudCg5MGRlZywgcmdiKCc7XHJcbiAgICAgICAgICAgICAgICBuZXdHcmFkaWVudCArPSBjdXJyZW50Q29sb3Iuam9pbignLCAnKTtcclxuICAgICAgICAgICAgICAgIG5ld0dyYWRpZW50ICs9ICcpLCByZ2IoJztcclxuXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50Q29sb3Jbal0gPSAyNTU7XHJcblxyXG4gICAgICAgICAgICAgICAgbmV3R3JhZGllbnQgKz0gY3VycmVudENvbG9yLmpvaW4oJywgJyk7XHJcbiAgICAgICAgICAgICAgICBuZXdHcmFkaWVudCArPSAnKSknO1xyXG5cclxuICAgICAgICAgICAgICAgIHJnYklucHV0c1tqXS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBuZXdHcmFkaWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgc2xpZGVycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIENvbnRlbnQgb2YgdGhlIHRoaXJkIHRhYlxyXG4gICAgICAgIHZhciBzbGlkZXJzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHNsaWRlcnNFbGVtZW50LmNsYXNzTmFtZSA9ICdqY29sb3Itc2xpZGVycyc7XHJcblxyXG4gICAgICAgIHZhciBzbGlkZXJzQm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgICAvLyBDcmVhdGVzIGEgcmFuZ2UtdHlwZSBpbnB1dCB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZVxyXG4gICAgICAgIHZhciBjcmVhdGVTbGlkZXJJbnB1dCA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIGlucHV0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGlucHV0Q29udGFpbmVyLmNsYXNzTmFtZSA9ICdqY29sb3Itc2xpZGVycy1pbnB1dC1jb250YWluZXInO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcclxuICAgICAgICAgICAgbGFiZWwuaW5uZXJUZXh0ID0gbmFtZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzdWJDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgc3ViQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdqY29sb3Itc2xpZGVycy1pbnB1dC1zdWJjb250YWluZXInO1xyXG5cclxuICAgICAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICAgICAgaW5wdXQudHlwZSA9ICdyYW5nZSc7XHJcbiAgICAgICAgICAgIGlucHV0Lm1pbiA9IDA7XHJcbiAgICAgICAgICAgIGlucHV0Lm1heCA9IDI1NTtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAwO1xyXG5cclxuICAgICAgICAgICAgaW5wdXRDb250YWluZXIuYXBwZW5kQ2hpbGQobGFiZWwpO1xyXG4gICAgICAgICAgICBzdWJDb250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHZhbHVlLmlubmVyVGV4dCA9IGlucHV0LnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlLmlubmVyVGV4dCA9IGlucHV0LnZhbHVlO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHN1YkNvbnRhaW5lci5hcHBlbmRDaGlsZCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIGlucHV0Q29udGFpbmVyLmFwcGVuZENoaWxkKHN1YkNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICBzbGlkZXJzQm9keS5hcHBlbmRDaGlsZChpbnB1dENvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDcmVhdGVzIHJlZCwgZ3JlZW4gYW5kIGJsdWUgaW5wdXRzXHJcbiAgICAgICAgcmdiSW5wdXRzID0gW1xyXG4gICAgICAgICAgICBjcmVhdGVTbGlkZXJJbnB1dCgnUmVkJyksXHJcbiAgICAgICAgICAgIGNyZWF0ZVNsaWRlcklucHV0KCdHcmVlbicpLFxyXG4gICAgICAgICAgICBjcmVhdGVTbGlkZXJJbnB1dCgnQmx1ZScpLFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHNsaWRlcnNFbGVtZW50LmFwcGVuZENoaWxkKHNsaWRlcnNCb2R5KTtcclxuXHJcbiAgICAgICAgLy8gRWxlbWVudCB0aGF0IHByaW50cyB0aGUgY3VycmVudCBjb2xvclxyXG4gICAgICAgIHZhciBzbGlkZXJzUmVzdWx0Q29sb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBzbGlkZXJzUmVzdWx0Q29sb3IuY2xhc3NOYW1lID0gJ2pjb2xvci1zbGlkZXJzLWZpbmFsLWNvbG9yJztcclxuXHJcbiAgICAgICAgdmFyIHJlc3VsdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICByZXN1bHRFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuICAgICAgICByZXN1bHRFbGVtZW50LmlubmVyVGV4dCA9ICdhJztcclxuICAgICAgICBzbGlkZXJzUmVzdWx0Q29sb3IuYXBwZW5kQ2hpbGQocmVzdWx0RWxlbWVudClcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBlbGVtZW50IHRoYXQgcHJpbnRzIHRoZSBjdXJyZW50IGNvbG9yXHJcbiAgICAgICAgdmFyIHVwZGF0ZVJlc3VsdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0Q29sb3IgPSByZ2JUb0hleChwYXJzZUludChyZ2JJbnB1dHNbMF0udmFsdWUpLCBwYXJzZUludChyZ2JJbnB1dHNbMV0udmFsdWUpLCBwYXJzZUludChyZ2JJbnB1dHNbMl0udmFsdWUpKTtcclxuXHJcbiAgICAgICAgICAgIHJlc3VsdEVsZW1lbnQuaW5uZXJUZXh0ID0gcmVzdWx0Q29sb3I7XHJcbiAgICAgICAgICAgIHJlc3VsdEVsZW1lbnQuc3R5bGUuY29sb3IgPSByZXN1bHRDb2xvcjtcclxuICAgICAgICAgICAgcmVzdWx0RWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndmlzaWJpbGl0eScpO1xyXG5cclxuICAgICAgICAgICAgc2xpZGVyc1Jlc3VsdCA9IHJlc3VsdENvbG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXBwbHkgdGhlIHVwZGF0ZSBmdW5jdGlvbiB0byBjb2xvciBpbnB1dHNcclxuICAgICAgICByZ2JJbnB1dHMuZm9yRWFjaChmdW5jdGlvbihyZ2JJbnB1dCkge1xyXG4gICAgICAgICAgICByZ2JJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlUmVzdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VJbnB1dENvbG9ycygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2xpZGVyc0VsZW1lbnQuYXBwZW5kQ2hpbGQoc2xpZGVyc1Jlc3VsdENvbG9yKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNsaWRlcnNFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gSW5pdGlhbCBvcHRpb25zXHJcbiAgICAgICAgb2JqLnNldE9wdGlvbnMob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBhIHByb3BlciBpbnB1dCB0YWcgd2hlbiB0aGUgZWxlbWVudCBpcyBhbiBpbnB1dFxyXG4gICAgICAgIGlmIChlbC50YWdOYW1lID09ICdJTlBVVCcpIHtcclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnamNvbG9yLWlucHV0Jyk7XHJcbiAgICAgICAgICAgIGVsLnJlYWRPbmx5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAnamNvbG9yJztcclxuXHJcbiAgICAgICAgLy8gVGFibGUgY29udGFpbmVyXHJcbiAgICAgICAgYmFja2Ryb3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBiYWNrZHJvcC5jbGFzc05hbWUgPSAnamNvbG9yLWJhY2tkcm9wJztcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYmFja2Ryb3ApO1xyXG5cclxuICAgICAgICAvLyBDb250ZW50XHJcbiAgICAgICAgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGNvbnRlbnQuY2xhc3NOYW1lID0gJ2pjb2xvci1jb250ZW50JztcclxuXHJcbiAgICAgICAgLy8gQ29udHJvbHNcclxuICAgICAgICB2YXIgY29udHJvbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjb250cm9scy5jbGFzc05hbWUgPSAnamNvbG9yLWNvbnRyb2xzJztcclxuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGNvbnRyb2xzKTtcclxuXHJcbiAgICAgICAgLy8gUmVzZXQgYnV0dG9uXHJcbiAgICAgICAgcmVzZXRCdXR0b24gID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgcmVzZXRCdXR0b24uY2xhc3NOYW1lID0gJ2pjb2xvci1yZXNldCc7XHJcbiAgICAgICAgcmVzZXRCdXR0b24uaW5uZXJIVE1MID0gb2JqLm9wdGlvbnMucmVzZXRMYWJlbDtcclxuICAgICAgICByZXNldEJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBvYmouc2V0VmFsdWUoJycpO1xyXG4gICAgICAgICAgICBvYmouY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29udHJvbHMuYXBwZW5kQ2hpbGQocmVzZXRCdXR0b24pO1xyXG5cclxuICAgICAgICAvLyBDbG9zZSBidXR0b25cclxuICAgICAgICBjbG9zZUJ1dHRvbiAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5jbGFzc05hbWUgPSAnamNvbG9yLWNsb3NlJztcclxuICAgICAgICBjbG9zZUJ1dHRvbi5pbm5lckhUTUwgPSBvYmoub3B0aW9ucy5kb25lTGFiZWw7XHJcbiAgICAgICAgY2xvc2VCdXR0b24ub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgaWYgKGpzdWl0ZXNUYWJzLmdldEFjdGl2ZSgpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgb2JqLnNldFZhbHVlKHNsaWRlcnNSZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9iai5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb250cm9scy5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbik7XHJcblxyXG4gICAgICAgIC8vIEVsZW1lbnQgdGhhdCB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIHRoZSB0YWJzXHJcbiAgICAgICAgdGFicyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQodGFicyk7XHJcblxyXG4gICAgICAgIC8vIFN0YXJ0cyB0aGUgalN1aXRlcyB0YWJzIGNvbXBvbmVudFxyXG4gICAgICAgIGpzdWl0ZXNUYWJzID0galN1aXRlcy50YWJzKHRhYnMsIHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdHcmlkJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50RWxlbWVudDogdGFibGUoKSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdTcGVjdHJ1bScsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEVsZW1lbnQ6IGhzbCgpLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1NsaWRlcnMnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRFbGVtZW50OiBzbGlkZXJzKCksXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIG9uY2hhbmdlOiBmdW5jdGlvbihlbGVtZW50LCBpbnN0YW5jZSwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZUNhbnZhcygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBzbGlkZXJzUmVzdWx0ICE9PSAnJyA/IHNsaWRlcnNSZXN1bHQgOiBvYmouZ2V0VmFsdWUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSAyICYmIGNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZ2IgPSBIZXhUb1JnYihjb2xvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZ2JJbnB1dHMuZm9yRWFjaChmdW5jdGlvbihyZ2JJbnB1dCwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJnYklucHV0LnZhbHVlID0gcmdiW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJnYklucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwYWxldHRlOiAnbW9kZXJuJyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xyXG5cclxuICAgICAgICAvLyBJbnNlcnQgcGlja2VyIGFmdGVyIHRoZSBlbGVtZW50XHJcbiAgICAgICAgaWYgKGVsLnRhZ05hbWUgPT0gJ0lOUFVUJykge1xyXG4gICAgICAgICAgICBlbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjb250YWluZXIsIGVsLm5leHRTaWJsaW5nKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgZWxlbWVudCBpcyBmb2N1cyBvcGVuIHRoZSBwaWNrZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIG9iai5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGJhY2tkcm9wLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBiYWNrZHJvcENsaWNrQ29udHJvbCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGJhY2tkcm9wLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgaWYgKGJhY2tkcm9wQ2xpY2tDb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIGJhY2tkcm9wQ2xpY2tDb250cm9sID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gSWYgdGhlIHBpY2tlciBpcyBvcGVuIG9uIHRoZSBzcGVjdHJ1bSB0YWIsIGl0IGNoYW5nZXMgdGhlIGNhbnZhcyBzaXplIHdoZW4gdGhlIHdpbmRvdyBzaXplIGlzIGNoYW5nZWRcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdqY29sb3ItZm9jdXMnKSAmJiBqc3VpdGVzVGFicy5nZXRBY3RpdmUoKSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXNpemVDYW52YXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBEZWZhdWx0IG9wZW5lZFxyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5vcGVuZWQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBvYmoub3BlbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2hhbmdlXHJcbiAgICAgICAgZWwuY2hhbmdlID0gb2JqLnNldFZhbHVlO1xyXG5cclxuICAgICAgICAvLyBHbG9iYWwgZ2VuZXJpYyB2YWx1ZSBoYW5kbGVyXHJcbiAgICAgICAgZWwudmFsID0gZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iai5nZXRWYWx1ZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb2JqLnNldFZhbHVlKHZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEtlZXAgb2JqZWN0IGF2YWlsYWJsZSBmcm9tIHRoZSBub2RlXHJcbiAgICAgICAgZWwuY29sb3IgPSBvYmo7XHJcblxyXG4gICAgICAgIC8vIENvbnRhaW5lciBzaG9ydGN1dFxyXG4gICAgICAgIGNvbnRhaW5lci5jb2xvciA9IG9iajtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCk7XHJcblxyXG4gICAgcmV0dXJuIG9iajtcclxufSk7XHJcblxyXG5cclxuXHJcbmpTdWl0ZXMuY29udGV4dG1lbnUgPSAoZnVuY3Rpb24oZWwsIG9wdGlvbnMpIHtcclxuICAgIHZhciBvYmogPSB7fTtcclxuICAgIG9iai5vcHRpb25zID0ge307XHJcblxyXG4gICAgLy8gRGVmYXVsdCBjb25maWd1cmF0aW9uXHJcbiAgICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgaXRlbXM6IG51bGwsXHJcbiAgICAgICAgb25jbGljazogbnVsbCxcclxuICAgIH07XHJcblxyXG4gICAgLy8gTG9vcCB0aHJvdWdoIG91ciBvYmplY3RcclxuICAgIGZvciAodmFyIHByb3BlcnR5IGluIGRlZmF1bHRzKSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgb2JqLm9wdGlvbnNbcHJvcGVydHldID0gb3B0aW9uc1twcm9wZXJ0eV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb2JqLm9wdGlvbnNbcHJvcGVydHldID0gZGVmYXVsdHNbcHJvcGVydHldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBDbGFzcyBkZWZpbml0aW9uXHJcbiAgICBlbC5jbGFzc0xpc3QuYWRkKCdqY29udGV4dG1lbnUnKTtcclxuICAgIC8vIEZvY3VzYWJsZVxyXG4gICAgZWwuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICc5MDAnKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE9wZW4gY29udGV4dG1lbnVcclxuICAgICAqL1xyXG4gICAgb2JqLm9wZW4gPSBmdW5jdGlvbihlLCBpdGVtcykge1xyXG4gICAgICAgIGlmIChpdGVtcykge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgY29udGVudFxyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy5pdGVtcyA9IGl0ZW1zO1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgaXRlbXNcclxuICAgICAgICAgICAgb2JqLmNyZWF0ZShpdGVtcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDb29yZGluYXRlc1xyXG4gICAgICAgIGlmICgob2JqLm9wdGlvbnMuaXRlbXMgJiYgb2JqLm9wdGlvbnMuaXRlbXMubGVuZ3RoID4gMCkgfHwgZWwuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmIChlLnRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBlLmNsaWVudFg7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IGUuY2xpZW50WTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gZS54O1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSBlLnk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2pjb250ZXh0bWVudS1mb2N1cycpO1xyXG4gICAgICAgICAgICBlbC5mb2N1cygpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCB5ICsgcmVjdC5oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBoID0geSAtIHJlY3QuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgaWYgKGggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbC5zdHlsZS50b3AgPSBoICsgJ3B4JztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsLnN0eWxlLnRvcCA9IHkgKyAncHgnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCB4ICsgcmVjdC53aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHggLSByZWN0LndpZHRoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmxlZnQgPSAoeCAtIHJlY3Qud2lkdGgpICsgJ3B4JztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUubGVmdCA9ICcxMHB4JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsLnN0eWxlLmxlZnQgPSB4ICsgJ3B4JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENsb3NlIG1lbnVcclxuICAgICAqL1xyXG4gICAgb2JqLmNsb3NlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnamNvbnRleHRtZW51LWZvY3VzJykpIHtcclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnamNvbnRleHRtZW51LWZvY3VzJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGl0ZW1zIGJhc2VkIG9uIHRoZSBkZWNsYXJlZCBvYmplY3RkXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbXMgLSBMaXN0IG9mIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBvYmouY3JlYXRlID0gZnVuY3Rpb24oaXRlbXMpIHtcclxuICAgICAgICAvLyBVcGRhdGUgY29udGVudFxyXG4gICAgICAgIGVsLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgICAvLyBBZGQgaGVhZGVyIGNvbnRleHRtZW51XHJcbiAgICAgICAgdmFyIGl0ZW1IZWFkZXIgPSBjcmVhdGVIZWFkZXIoKTtcclxuICAgICAgICBlbC5hcHBlbmRDaGlsZChpdGVtSGVhZGVyKTtcclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIGl0ZW1zXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgaXRlbUNvbnRhaW5lciA9IGNyZWF0ZUl0ZW1FbGVtZW50KGl0ZW1zW2ldKTtcclxuICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoaXRlbUNvbnRhaW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogY3JlYXRlSGVhZGVyIGZvciBjb250ZXh0IG1lbnVcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUhlYWRlcigpIHtcclxuICAgICAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJoZWFkZXJcIik7XHJcbiAgICAgICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgdGl0bGUuY2xhc3NMaXN0LmFkZChcInRpdGxlXCIpO1xyXG4gICAgICAgIHRpdGxlLmlubmVySFRNTCA9IGpTdWl0ZXMudHJhbnNsYXRlKFwiTWVudVwiKTtcclxuXHJcbiAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKHRpdGxlKTtcclxuXHJcbiAgICAgICAgdmFyIGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjbG9zZVwiKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5pbm5lckhUTUwgPSBqU3VpdGVzLnRyYW5zbGF0ZShcImNsb3NlXCIpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIG9iai5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xyXG5cclxuICAgICAgICByZXR1cm4gaGVhZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJpdmF0ZSBmdW5jdGlvbiBmb3IgY3JlYXRlIGEgbmV3IEl0ZW0gZWxlbWVudFxyXG4gICAgICogQHBhcmFtIHt0eXBlfSBpdGVtXHJcbiAgICAgKiBAcmV0dXJucyB7anN1aXRlc0wjMTUualN1aXRlcy5jb250ZXh0bWVudS5jcmVhdGVJdGVtRWxlbWVudC5pdGVtQ29udGFpbmVyfVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVJdGVtRWxlbWVudChpdGVtKSB7XHJcbiAgICAgICAgaWYgKGl0ZW0udHlwZSAmJiAoaXRlbS50eXBlID09ICdsaW5lJyB8fCBpdGVtLnR5cGUgPT0gJ2Rpdmlzb3InKSkge1xyXG4gICAgICAgICAgICB2YXIgaXRlbUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hyJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW1Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgdmFyIGl0ZW1UZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgICAgICBpdGVtVGV4dC5pbm5lckhUTUwgPSBpdGVtLnRpdGxlO1xyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW0udG9vbHRpcCkge1xyXG4gICAgICAgICAgICAgICAgaXRlbUNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgaXRlbS50b29sdGlwKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW0uaWNvbikge1xyXG4gICAgICAgICAgICAgICAgaXRlbUNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWNvbicsIGl0ZW0uaWNvbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpdGVtLmlkKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtQ29udGFpbmVyLmlkID0gaXRlbS5pZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW0uZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW1Db250YWluZXIuY2xhc3NOYW1lID0gJ2pjb250ZXh0bWVudS1kaXNhYmxlZCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5vbmNsaWNrKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtQ29udGFpbmVyLm1ldGhvZCA9IGl0ZW0ub25jbGljaztcclxuICAgICAgICAgICAgICAgIGl0ZW1Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpdGVtQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEV4ZWN1dGUgbWV0aG9kXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRob2QodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpdGVtQ29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW1UZXh0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpdGVtLnN1Ym1lbnUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpdGVtSWNvblN1Ym1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgICAgICAgICBpdGVtSWNvblN1Ym1lbnUuaW5uZXJIVE1MID0gXCImIzk2NTg7XCI7XHJcbiAgICAgICAgICAgICAgICBpdGVtQ29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW1JY29uU3VibWVudSk7XHJcbiAgICAgICAgICAgICAgICBpdGVtQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2pjb250ZXh0aGFzc3VibWVudScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsX3N1Ym1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIC8vIENsYXNzIGRlZmluaXRpb25cclxuICAgICAgICAgICAgICAgIGVsX3N1Ym1lbnUuY2xhc3NMaXN0LmFkZCgnamNvbnRleHRtZW51Jyk7XHJcbiAgICAgICAgICAgICAgICAvLyBGb2N1c2FibGVcclxuICAgICAgICAgICAgICAgIGVsX3N1Ym1lbnUuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICc5MDAnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBBcHBlbmQgaXRlbXNcclxuICAgICAgICAgICAgICAgIHZhciBzdWJtZW51ID0gaXRlbS5zdWJtZW51O1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJtZW51Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1Db250YWluZXJTdWJNZW51ID0gY3JlYXRlSXRlbUVsZW1lbnQoc3VibWVudVtpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxfc3VibWVudS5hcHBlbmRDaGlsZChpdGVtQ29udGFpbmVyU3ViTWVudSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaXRlbUNvbnRhaW5lci5hcHBlbmRDaGlsZChlbF9zdWJtZW51KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLnNob3J0Y3V0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbVNob3J0Q3V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgICAgICAgICAgaXRlbVNob3J0Q3V0LmlubmVySFRNTCA9IGl0ZW0uc2hvcnRjdXQ7XHJcbiAgICAgICAgICAgICAgICBpdGVtQ29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW1TaG9ydEN1dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1Db250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbmNsaWNrKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zLm9uY2xpY2sob2JqLCBlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgaXRlbXNcclxuICAgIGlmIChvYmoub3B0aW9ucy5pdGVtcykge1xyXG4gICAgICAgIG9iai5jcmVhdGUob2JqLm9wdGlvbnMuaXRlbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgb2JqLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoISBqU3VpdGVzLmNvbnRleHRtZW51Lmhhc0V2ZW50cykge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V3aGVlbFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgb2JqLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHZhciBpZCA9IGpTdWl0ZXMuY29udGV4dG1lbnUuZ2V0RWxlbWVudChlLnRhcmdldCk7XHJcbiAgICAgICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGlkKTtcclxuICAgICAgICAgICAgICAgIGlmICghIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdKU1VJVEVTOiBDb250ZXh0bWVudSBpZCBub3QgZm91bmQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jb250ZXh0bWVudS5vcGVuKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBqU3VpdGVzLmNvbnRleHRtZW51Lmhhc0V2ZW50cyA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZWwuY29udGV4dG1lbnUgPSBvYmo7XHJcblxyXG4gICAgcmV0dXJuIG9iajtcclxufSk7XHJcblxyXG5qU3VpdGVzLmNvbnRleHRtZW51LmdldEVsZW1lbnQgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICB2YXIgZm91bmRJZCA9IDA7XHJcblxyXG4gICAgZnVuY3Rpb24gcGF0aCAoZWxlbWVudCkge1xyXG4gICAgICAgIGlmIChlbGVtZW50LnBhcmVudE5vZGUgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29udGV4dG1lbnUtaWQnKSkge1xyXG4gICAgICAgICAgICBmb3VuZElkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29udGV4dG1lbnUtaWQnKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50LnBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgICAgIHBhdGgoZWxlbWVudC5wYXJlbnROb2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwYXRoKGVsZW1lbnQpO1xyXG5cclxuICAgIHJldHVybiBmb3VuZElkO1xyXG59XHJcblxyXG5cclxualN1aXRlcy5kcm9wZG93biA9IChmdW5jdGlvbihlbCwgb3B0aW9ucykge1xyXG4gICAgLy8gQWxyZWFkeSBjcmVhdGVkLCB1cGRhdGUgb3B0aW9uc1xyXG4gICAgaWYgKGVsLmRyb3Bkb3duKSB7XHJcbiAgICAgICAgcmV0dXJuIGVsLmRyb3Bkb3duLnNldE9wdGlvbnMob3B0aW9ucywgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTmV3IGluc3RhbmNlXHJcbiAgICB2YXIgb2JqID0geyB0eXBlOiAnZHJvcGRvd24nIH07XHJcbiAgICBvYmoub3B0aW9ucyA9IHt9O1xyXG5cclxuICAgIC8vIFN1Y2Nlc3NcclxuICAgIHZhciBzdWNjZXNzID0gZnVuY3Rpb24oZGF0YSwgdmFsKSB7XHJcbiAgICAgICAgLy8gU2V0IGRhdGFcclxuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBTb3J0XHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5zb3J0UmVzdWx0cyAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBvYmoub3B0aW9ucy5zb3J0UmVzdWx0cyA9PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLnNvcnQob2JqLm9wdGlvbnMuc29ydFJlc3VsdHMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLnNvcnQoc29ydERhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvYmouc2V0RGF0YShkYXRhKTtcclxuXHJcbiAgICAgICAgICAgIC8vIE9ubG9hZCBtZXRob2RcclxuICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbmxvYWQpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm9ubG9hZChlbCwgb2JqLCBkYXRhLCB2YWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTZXQgdmFsdWVcclxuICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgIGFwcGx5VmFsdWUodmFsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENvbXBvbmVudCB2YWx1ZVxyXG4gICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCB8fCB2YWwgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgb2JqLm9wdGlvbnMudmFsdWUgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWwudmFsdWUgPSBvYmoub3B0aW9ucy52YWx1ZTtcclxuXHJcbiAgICAgICAgLy8gT3BlbiBkcm9wZG93blxyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5vcGVuZWQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBvYmoub3BlbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIC8vIERlZmF1bHQgc29ydFxyXG4gICAgdmFyIHNvcnREYXRhID0gZnVuY3Rpb24oaXRlbUEsIGl0ZW1CKSB7XHJcbiAgICAgICAgdmFyIHRlc3RBLCB0ZXN0QjtcclxuICAgICAgICBpZih0eXBlb2YgaXRlbUEgPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICB0ZXN0QSA9IGl0ZW1BO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmKGl0ZW1BLnRleHQpIHtcclxuICAgICAgICAgICAgICAgIHRlc3RBID0gaXRlbUEudGV4dDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKGl0ZW1BLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHRlc3RBID0gaXRlbUEubmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZih0eXBlb2YgaXRlbUIgPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICB0ZXN0QiA9IGl0ZW1CO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmKGl0ZW1CLnRleHQpIHtcclxuICAgICAgICAgICAgICAgIHRlc3RCID0gaXRlbUIudGV4dDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKGl0ZW1CLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHRlc3RCID0gaXRlbUIubmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZih0eXBlb2YgdGVzdEEgPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdGVzdEIgPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICBpZih0eXBlb2YgdGVzdEEgIT0gXCJzdHJpbmdcIikgeyB0ZXN0QSA9IFwiXCIrdGVzdEE7IH1cclxuICAgICAgICAgICAgaWYodHlwZW9mIHRlc3RCICE9IFwic3RyaW5nXCIpIHsgdGVzdEIgPSBcIlwiK3Rlc3RCOyB9XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXN0QS5sb2NhbGVDb21wYXJlKHRlc3RCKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGVzdEEgLSB0ZXN0QjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldCB0aGUgb3B0aW9ucyBmb3IgdGhlIGRyb3Bkb3duXHJcbiAgICAgKi9cclxuICAgIHZhciByZXNldFZhbHVlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gUmVzZXQgdmFsdWUgY29udGFpbmVyXHJcbiAgICAgICAgb2JqLnZhbHVlID0ge307XHJcbiAgICAgICAgLy8gUmVtb3ZlIHNlbGVjdGVkXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmouaXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKG9iai5pdGVtc1tpXS5zZWxlY3RlZCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLml0ZW1zW2ldLmVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouaXRlbXNbaV0uZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdqZHJvcGRvd24tc2VsZWN0ZWQnKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb2JqLml0ZW1zW2ldLnNlbGVjdGVkID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSZXNldCBvcHRpb25zXHJcbiAgICAgICAgb2JqLm9wdGlvbnMudmFsdWUgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGx5IHZhbHVlcyB0byB0aGUgZHJvcGRvd25cclxuICAgICAqL1xyXG4gICAgdmFyIGFwcGx5VmFsdWUgPSBmdW5jdGlvbih2YWx1ZXMpIHtcclxuICAgICAgICAvLyBSZXNldCB0aGUgY3VycmVudCB2YWx1ZXNcclxuICAgICAgICByZXNldFZhbHVlKCk7XHJcblxyXG4gICAgICAgIC8vIFJlYWQgdmFsdWVzXHJcbiAgICAgICAgaWYgKHZhbHVlcyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoISB2YWx1ZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yob2JqLnZhbHVlWycnXSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnZhbHVlWycnXSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEgQXJyYXkuaXNBcnJheSh2YWx1ZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzID0gKCcnICsgdmFsdWVzKS5zcGxpdCgnOycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoudmFsdWVbdmFsdWVzW2ldXSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgdGhlIERPTVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLml0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Yob2JqLnZhbHVlW1ZhbHVlKGkpXSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLml0ZW1zW2ldLmVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouaXRlbXNbaV0uZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdqZHJvcGRvd24tc2VsZWN0ZWQnKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb2JqLml0ZW1zW2ldLnNlbGVjdGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBLZWVwIGxhYmVsXHJcbiAgICAgICAgICAgICAgICBvYmoudmFsdWVbVmFsdWUoaSldID0gVGV4dChpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR2xvYmFsIHZhbHVlXHJcbiAgICAgICAgb2JqLm9wdGlvbnMudmFsdWUgPSBPYmplY3Qua2V5cyhvYmoudmFsdWUpLmpvaW4oJzsnKTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIGxhYmVsc1xyXG4gICAgICAgIG9iai5oZWFkZXIudmFsdWUgPSBvYmouZ2V0VGV4dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCB0aGUgdmFsdWUgb2Ygb25lIGl0ZW1cclxuICAgIHZhciBWYWx1ZSA9IGZ1bmN0aW9uKGssIHYpIHtcclxuICAgICAgICAvLyBMZWdhY3kgcHVycG9zZXNcclxuICAgICAgICBpZiAoISBvYmoub3B0aW9ucy5mb3JtYXQpIHtcclxuICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gJ3ZhbHVlJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgcHJvcGVydHkgPSAnaWQnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG9iai5pdGVtc1trXSkge1xyXG4gICAgICAgICAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLml0ZW1zW2tdLmRhdGFbcHJvcGVydHldID0gdjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmouaXRlbXNba10uZGF0YVtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgdGhlIGxhYmVsIG9mIG9uZSBpdGVtXHJcbiAgICB2YXIgVGV4dCA9IGZ1bmN0aW9uKGssIHYpIHtcclxuICAgICAgICAvLyBMZWdhY3kgcHVycG9zZXNcclxuICAgICAgICBpZiAoISBvYmoub3B0aW9ucy5mb3JtYXQpIHtcclxuICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gJ3RleHQnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eSA9ICduYW1lJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChvYmouaXRlbXNba10pIHtcclxuICAgICAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iai5pdGVtc1trXS5kYXRhW3Byb3BlcnR5XSA9IHY7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLml0ZW1zW2tdLmRhdGFbcHJvcGVydHldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGdldFZhbHVlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iai52YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGdldFRleHQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IFtdO1xyXG4gICAgICAgIHZhciBrID0gT2JqZWN0LmtleXMob2JqLnZhbHVlKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGsubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZGF0YS5wdXNoKG9iai52YWx1ZVtrW2ldXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5zZXRPcHRpb25zID0gZnVuY3Rpb24ob3B0aW9ucywgcmVzZXQpIHtcclxuICAgICAgICBpZiAoISBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIERlZmF1bHQgY29uZmlndXJhdGlvblxyXG4gICAgICAgIHZhciBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgdXJsOiBudWxsLFxyXG4gICAgICAgICAgICBkYXRhOiBbXSxcclxuICAgICAgICAgICAgZm9ybWF0OiAwLFxyXG4gICAgICAgICAgICBtdWx0aXBsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGF1dG9jb21wbGV0ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHJlbW90ZVNlYXJjaDogZmFsc2UsXHJcbiAgICAgICAgICAgIGxhenlMb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgdHlwZTogbnVsbCxcclxuICAgICAgICAgICAgd2lkdGg6IG51bGwsXHJcbiAgICAgICAgICAgIG1heFdpZHRoOiBudWxsLFxyXG4gICAgICAgICAgICBvcGVuZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICcnLFxyXG4gICAgICAgICAgICBuZXdPcHRpb25zOiBmYWxzZSxcclxuICAgICAgICAgICAgcG9zaXRpb246IGZhbHNlLFxyXG4gICAgICAgICAgICBvbmNoYW5nZTogbnVsbCxcclxuICAgICAgICAgICAgb25sb2FkOiBudWxsLFxyXG4gICAgICAgICAgICBvbm9wZW46IG51bGwsXHJcbiAgICAgICAgICAgIG9uY2xvc2U6IG51bGwsXHJcbiAgICAgICAgICAgIG9uZm9jdXM6IG51bGwsXHJcbiAgICAgICAgICAgIG9uYmx1cjogbnVsbCxcclxuICAgICAgICAgICAgb25pbnNlcnQ6IG51bGwsXHJcbiAgICAgICAgICAgIG9uYmVmb3JlaW5zZXJ0OiBudWxsLFxyXG4gICAgICAgICAgICBzb3J0UmVzdWx0czogZmFsc2UsXHJcbiAgICAgICAgICAgIGF1dG9mb2N1czogZmFsc2UsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBMb29wIHRocm91Z2ggb3VyIG9iamVjdFxyXG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIGRlZmF1bHRzKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoub3B0aW9uc1twcm9wZXJ0eV0gPSBvcHRpb25zW3Byb3BlcnR5XTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnNbcHJvcGVydHldKSA9PSAndW5kZWZpbmVkJyB8fCByZXNldCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zW3Byb3BlcnR5XSA9IGRlZmF1bHRzW3Byb3BlcnR5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRm9yY2UgYXV0b2NvbXBsZXRlIHNlYXJjaFxyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5yZW1vdGVTZWFyY2ggPT0gdHJ1ZSB8fCBvYmoub3B0aW9ucy50eXBlID09PSAnc2VhcmNoYmFyJykge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy5hdXRvY29tcGxldGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTmV3IG9wdGlvbnNcclxuICAgICAgICBpZiAob2JqLm9wdGlvbnMubmV3T3B0aW9ucyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIG9iai5oZWFkZXIuY2xhc3NMaXN0LmFkZCgnamRyb3Bkb3duLWFkZCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG9iai5oZWFkZXIuY2xhc3NMaXN0LnJlbW92ZSgnamRyb3Bkb3duLWFkZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXV0b2NvbXBsZXRlXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLmF1dG9jb21wbGV0ZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIG9iai5oZWFkZXIucmVtb3ZlQXR0cmlidXRlKCdyZWFkb25seScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG9iai5oZWFkZXIuc2V0QXR0cmlidXRlKCdyZWFkb25seScsICdyZWFkb25seScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUGxhY2UgaG9sZGVyXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLnBsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgIG9iai5oZWFkZXIuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsIG9iai5vcHRpb25zLnBsYWNlaG9sZGVyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBvYmouaGVhZGVyLnJlbW92ZUF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSBzcGVjaWZpYyBkcm9wZG93biB0eXBpbmcgdG8gYWRkIGFnYWluXHJcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnamRyb3Bkb3duLXNlYXJjaGJhcicpO1xyXG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2pkcm9wZG93bi1waWNrZXInKTtcclxuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdqZHJvcGRvd24tbGlzdCcpO1xyXG5cclxuICAgICAgICBpZiAob2JqLm9wdGlvbnMudHlwZSA9PSAnc2VhcmNoYmFyJykge1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdqZHJvcGRvd24tc2VhcmNoYmFyJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChvYmoub3B0aW9ucy50eXBlID09ICdsaXN0Jykge1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdqZHJvcGRvd24tbGlzdCcpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAob2JqLm9wdGlvbnMudHlwZSA9PSAncGlja2VyJykge1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdqZHJvcGRvd24tcGlja2VyJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGpTdWl0ZXMuZ2V0V2luZG93V2lkdGgoKSA8IDgwMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmF1dG9jb21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2pkcm9wZG93bi1zZWFyY2hiYXInKTtcclxuICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy50eXBlID0gJ3NlYXJjaGJhcic7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2pkcm9wZG93bi1waWNrZXInKTtcclxuICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy50eXBlID0gJ3BpY2tlcic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMud2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS53aWR0aCA9IG9iai5vcHRpb25zLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLm1pbldpZHRoID0gb2JqLm9wdGlvbnMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCd3aWR0aCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdtaW4td2lkdGgnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdqZHJvcGRvd24tZGVmYXVsdCcpO1xyXG4gICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMudHlwZSA9ICdkZWZhdWx0JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2xvc2UgYnV0dG9uXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLnR5cGUgPT0gJ3NlYXJjaGJhcicpIHtcclxuICAgICAgICAgICAgY29udGFpbmVySGVhZGVyLmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKGNsb3NlQnV0dG9uLCBjb250YWluZXIuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBMb2FkIHRoZSBjb250ZW50XHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLnVybCAmJiAhIG9wdGlvbnMuZGF0YSkge1xyXG4gICAgICAgICAgICBqU3VpdGVzLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBvYmoub3B0aW9ucy51cmwsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzKGRhdGEsIG9iai5vcHRpb25zLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3Mob2JqLm9wdGlvbnMuZGF0YSwgb2JqLm9wdGlvbnMudmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmV0dXJuIHRoZSBpbnN0YW5jZVxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGVscGVyc1xyXG4gICAgdmFyIGNvbnRhaW5lckhlYWRlciA9IG51bGw7XHJcbiAgICB2YXIgY29udGFpbmVyID0gbnVsbDtcclxuICAgIHZhciBjb250ZW50ID0gbnVsbDtcclxuICAgIHZhciBjbG9zZUJ1dHRvbiA9IG51bGw7XHJcbiAgICB2YXIgcmVzZXRCdXR0b24gPSBudWxsO1xyXG4gICAgdmFyIGJhY2tkcm9wID0gbnVsbDtcclxuXHJcbiAgICB2YXIga2V5VGltZXIgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdCBkcm9wZG93blxyXG4gICAgICovXHJcbiAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIERvIG5vdCBhY2NlcHQgbnVsbFxyXG4gICAgICAgIGlmICghIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgaXMgYSBTRUxFQ1QgdGFnLCBjcmVhdGUgYSBjb25maWd1cmF0aW9uIG9iamVjdFxyXG4gICAgICAgIGlmIChlbC50YWdOYW1lID09ICdTRUxFQ1QnKSB7XHJcbiAgICAgICAgICAgIHZhciByZXQgPSBqU3VpdGVzLmRyb3Bkb3duLmV4dHJhY3RGcm9tRG9tKGVsLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgZWwgPSByZXQuZWw7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSByZXQub3B0aW9ucztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFBsYWNlIGhvbGRlclxyXG4gICAgICAgIGlmICghIG9wdGlvbnMucGxhY2Vob2xkZXIgJiYgZWwuZ2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicpKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMucGxhY2Vob2xkZXIgPSBlbC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBWYWx1ZSBjb250YWluZXJcclxuICAgICAgICBvYmoudmFsdWUgPSB7fTtcclxuICAgICAgICAvLyBDb250YWluZXJzXHJcbiAgICAgICAgb2JqLml0ZW1zID0gW107XHJcbiAgICAgICAgb2JqLmdyb3VwcyA9IFtdO1xyXG4gICAgICAgIC8vIFNlYXJjaCBvcHRpb25zXHJcbiAgICAgICAgb2JqLnNlYXJjaCA9ICcnO1xyXG4gICAgICAgIG9iai5yZXN1bHRzID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGRyb3Bkb3duXHJcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnamRyb3Bkb3duJyk7XHJcblxyXG4gICAgICAgIC8vIEhlYWRlciBjb250YWluZXJcclxuICAgICAgICBjb250YWluZXJIZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjb250YWluZXJIZWFkZXIuY2xhc3NOYW1lID0gJ2pkcm9wZG93bi1jb250YWluZXItaGVhZGVyJztcclxuXHJcbiAgICAgICAgLy8gSGVhZGVyXHJcbiAgICAgICAgb2JqLmhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgb2JqLmhlYWRlci5jbGFzc05hbWUgPSAnamRyb3Bkb3duLWhlYWRlcic7XHJcbiAgICAgICAgb2JqLmhlYWRlci50eXBlID0gJ3RleHQnO1xyXG4gICAgICAgIG9iai5oZWFkZXIuc2V0QXR0cmlidXRlKCdhdXRvY29tcGxldGUnLCAnb2ZmJyk7XHJcbiAgICAgICAgb2JqLmhlYWRlci5vbmZvY3VzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub25mb2N1cykgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMub25mb2N1cyhlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9iai5oZWFkZXIub25ibHVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub25ibHVyKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5vbmJsdXIoZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvYmouaGVhZGVyLm9ua2V5dXAgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5hdXRvY29tcGxldGUgPT0gdHJ1ZSAmJiAhIGtleVRpbWVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLnNlYXJjaCAhPSBvYmouaGVhZGVyLnZhbHVlLnRyaW0oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmZpbmQob2JqLmhlYWRlci52YWx1ZS50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlUaW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNDAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoISBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2pkcm9wZG93bi1mb2N1cycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wZW4oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghIG9iai5vcHRpb25zLmF1dG9jb21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5uZXh0KGUua2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR2xvYmFsIGNvbnRyb2xzXHJcbiAgICAgICAgaWYgKCEgalN1aXRlcy5kcm9wZG93bi5oYXNFdmVudHMpIHtcclxuICAgICAgICAgICAgLy8gRXhlY3V0ZSBvbmx5IG9uZSB0aW1lXHJcbiAgICAgICAgICAgIGpTdWl0ZXMuZHJvcGRvd24uaGFzRXZlbnRzID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gRW50ZXIgYW5kIEVzY1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBqU3VpdGVzLmRyb3Bkb3duLmtleWRvd24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ29udGFpbmVyXHJcbiAgICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdqZHJvcGRvd24tY29udGFpbmVyJztcclxuXHJcbiAgICAgICAgLy8gRHJvcGRvd24gY29udGVudFxyXG4gICAgICAgIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjb250ZW50LmNsYXNzTmFtZSA9ICdqZHJvcGRvd24tY29udGVudCc7XHJcblxyXG4gICAgICAgIC8vIENsb3NlIGJ1dHRvblxyXG4gICAgICAgIGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uY2xhc3NOYW1lID0gJ2pkcm9wZG93bi1jbG9zZSc7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uaW5uZXJIVE1MID0gJ0RvbmUnO1xyXG5cclxuICAgICAgICAvLyBSZXNldCBidXR0b25cclxuICAgICAgICByZXNldEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHJlc2V0QnV0dG9uLmNsYXNzTmFtZSA9ICdqZHJvcGRvd24tcmVzZXQnO1xyXG4gICAgICAgIHJlc2V0QnV0dG9uLmlubmVySFRNTCA9ICd4JztcclxuICAgICAgICByZXNldEJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG9iai5yZXNldCgpO1xyXG4gICAgICAgICAgICBvYmouY2xvc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBiYWNrZHJvcFxyXG4gICAgICAgIGJhY2tkcm9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgYmFja2Ryb3AuY2xhc3NOYW1lID0gJ2pkcm9wZG93bi1iYWNrZHJvcCc7XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCBlbGVtZW50c1xyXG4gICAgICAgIGNvbnRhaW5lckhlYWRlci5hcHBlbmRDaGlsZChvYmouaGVhZGVyKTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xyXG4gICAgICAgIGVsLmFwcGVuZENoaWxkKGNvbnRhaW5lckhlYWRlcik7XHJcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcclxuICAgICAgICBlbC5hcHBlbmRDaGlsZChiYWNrZHJvcCk7XHJcblxyXG4gICAgICAgIC8vIFNldCB0aGUgb3RpcHRpb25zXHJcbiAgICAgICAgb2JqLnNldE9wdGlvbnMob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGlmICgnb250b3VjaHNlbmQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHNlbmQnLCBqU3VpdGVzLmRyb3Bkb3duLm1vdXNldXApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBqU3VpdGVzLmRyb3Bkb3duLm1vdXNldXApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTGF6eWxvYWRpbmdcclxuICAgICAgICBpZiAob2JqLm9wdGlvbnMubGF6eUxvYWRpbmcgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBqU3VpdGVzLmxhenlMb2FkaW5nKGNvbnRlbnQsIHtcclxuICAgICAgICAgICAgICAgIGxvYWRVcDogb2JqLmxvYWRVcCxcclxuICAgICAgICAgICAgICAgIGxvYWREb3duOiBvYmoubG9hZERvd24sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29udGVudC5vbndoZWVsID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2hhbmdlIG1ldGhvZFxyXG4gICAgICAgIGVsLmNoYW5nZSA9IG9iai5zZXRWYWx1ZTtcclxuXHJcbiAgICAgICAgLy8gR2xvYmFsIGdlbmVyaWMgdmFsdWUgaGFuZGxlclxyXG4gICAgICAgIGVsLnZhbCA9IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmouZ2V0VmFsdWUob2JqLm9wdGlvbnMubXVsdGlwbGUgPyB0cnVlIDogZmFsc2UpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb2JqLnNldFZhbHVlKHZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEtlZXAgb2JqZWN0IGF2YWlsYWJsZSBmcm9tIHRoZSBub2RlXHJcbiAgICAgICAgZWwuZHJvcGRvd24gPSBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgcmVtb3RlIHNvdXJjZSBvZiBkYXRhIFVSTFxyXG4gICAgICovXHJcbiAgICBvYmouZ2V0VXJsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iai5vcHRpb25zLnVybDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgbmV3IGRhdGEgZnJvbSBhIHJlbW90ZSBzb3VyY2VcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSB1cmwgZnJvbSB0aGUgcmVtb3RlIHNvdXJjZVxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBjYWxsYmFjayB3aGVuIHRoZSBkYXRhIGlzIGxvYWRlZFxyXG4gICAgICovXHJcbiAgICBvYmouc2V0VXJsID0gZnVuY3Rpb24odXJsLCBjYWxsYmFjaykge1xyXG4gICAgICAgIG9iai5vcHRpb25zLnVybCA9IHVybDtcclxuXHJcbiAgICAgICAgalN1aXRlcy5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBvYmoub3B0aW9ucy51cmwsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIG9iai5zZXREYXRhKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgLy8gQ2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoY2FsbGJhY2spID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhvYmopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgSUQgZm9yIG9uZSBpdGVtXHJcbiAgICAgKi9cclxuICAgIG9iai5zZXRJZCA9IGZ1bmN0aW9uKGl0ZW0sIHYpIHtcclxuICAgICAgICAvLyBMZWdhY3kgcHVycG9zZXNcclxuICAgICAgICBpZiAoISBvYmoub3B0aW9ucy5mb3JtYXQpIHtcclxuICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gJ3ZhbHVlJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgcHJvcGVydHkgPSAnaWQnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZihpdGVtKSA9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICBpdGVtW3Byb3BlcnR5XSA9IHY7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb2JqLml0ZW1zW2l0ZW1dLmRhdGFbcHJvcGVydHldID0gdjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYSBuZXcgaXRlbVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRpdGxlIC0gdGl0bGUgb2YgdGhlIG5ldyBpdGVtXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSB2YWx1ZS9pZCBvZiB0aGUgbmV3IGl0ZW1cclxuICAgICAqL1xyXG4gICAgb2JqLmFkZCA9IGZ1bmN0aW9uKHRpdGxlLCBpZCkge1xyXG4gICAgICAgIGlmICghIHRpdGxlKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gb2JqLm9wdGlvbnMuYXV0b2NvbXBsZXRlID09IHRydWUgPyBvYmouaGVhZGVyLnZhbHVlIDogJyc7XHJcbiAgICAgICAgICAgIHZhciB0aXRsZSA9IHByb21wdChqU3VpdGVzLnRyYW5zbGF0ZSgnQWRkIEEgTmV3IE9wdGlvbicpLCBjdXJyZW50KTtcclxuICAgICAgICAgICAgaWYgKCEgdGl0bGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSWRcclxuICAgICAgICBpZiAoISBpZCkge1xyXG4gICAgICAgICAgIGlkID0galN1aXRlcy5ndWlkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgbmV3IGl0ZW1cclxuICAgICAgICBpZiAoISBvYmoub3B0aW9ucy5mb3JtYXQpIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogaWQsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiB0aXRsZSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogdGl0bGUsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENhbGxiYWNrXHJcbiAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbmJlZm9yZWluc2VydCkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB2YXIgcmV0ID0gb2JqLm9wdGlvbnMub25iZWZvcmVpbnNlcnQob2JqLCBpdGVtKTtcclxuICAgICAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXQpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0gPSByZXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFkZCBpdGVtIHRvIHRoZSBtYWluIGxpc3RcclxuICAgICAgICBvYmoub3B0aW9ucy5kYXRhLnB1c2goaXRlbSk7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBET01cclxuICAgICAgICB2YXIgbmV3SXRlbSA9IG9iai5jcmVhdGVJdGVtKGl0ZW0pO1xyXG5cclxuICAgICAgICAvLyBBcHBlbmQgRE9NIHRvIHRoZSBsaXN0XHJcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChuZXdJdGVtLmVsZW1lbnQpO1xyXG5cclxuICAgICAgICAvLyBDYWxsYmFja1xyXG4gICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub25pbnNlcnQpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgb2JqLm9wdGlvbnMub25pbnNlcnQob2JqLCBpdGVtLCBuZXdJdGVtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNob3cgY29udGVudFxyXG4gICAgICAgIGlmIChjb250ZW50LnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2VhcmNoP1xyXG4gICAgICAgIGlmIChvYmoucmVzdWx0cykge1xyXG4gICAgICAgICAgICBvYmoucmVzdWx0cy5wdXNoKG5ld0l0ZW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBuZXcgaXRlbVxyXG4gICAgICovXHJcbiAgICBvYmouY3JlYXRlSXRlbSA9IGZ1bmN0aW9uKGRhdGEsIGdyb3VwLCBncm91cE5hbWUpIHtcclxuICAgICAgICAvLyBLZWVwIHRoZSBjb3JyZWN0IHNvdXJjZSBvZiBkYXRhXHJcbiAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMuZm9ybWF0KSB7XHJcbiAgICAgICAgICAgIGlmICghIGRhdGEudmFsdWUgJiYgZGF0YS5pZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhLnZhbHVlID0gZGF0YS5pZDtcclxuICAgICAgICAgICAgICAgIC8vZGVsZXRlIGRhdGEuaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCEgZGF0YS50ZXh0ICYmIGRhdGEubmFtZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhLnRleHQgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAvL2RlbGV0ZSBkYXRhLm5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoISBkYXRhLmlkICYmIGRhdGEudmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5pZCA9IGRhdGEudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAvL2RlbGV0ZSBkYXRhLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghIGRhdGEubmFtZSAmJiBkYXRhLnRleHQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5uYW1lID0gZGF0YS50ZXh0XHJcbiAgICAgICAgICAgICAgICAvL2RlbGV0ZSBkYXRhLnRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBpdGVtXHJcbiAgICAgICAgdmFyIGl0ZW0gPSB7fTtcclxuICAgICAgICBpdGVtLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBpdGVtLmVsZW1lbnQuY2xhc3NOYW1lID0gJ2pkcm9wZG93bi1pdGVtJztcclxuICAgICAgICBpdGVtLmVsZW1lbnQuaW5kZXhWYWx1ZSA9IG9iai5pdGVtcy5sZW5ndGg7XHJcbiAgICAgICAgaXRlbS5kYXRhID0gZGF0YTtcclxuXHJcbiAgICAgICAgLy8gR3JvdXBkIERPTVxyXG4gICAgICAgIGlmIChncm91cCkge1xyXG4gICAgICAgICAgICBpdGVtLmdyb3VwID0gZ3JvdXA7IFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSWRcclxuICAgICAgICBpZiAoZGF0YS5pZCkge1xyXG4gICAgICAgICAgICBpdGVtLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsIGRhdGEuaWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRGlzYWJsZWRcclxuICAgICAgICBpZiAoZGF0YS5kaXNhYmxlZCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRvb2x0aXBcclxuICAgICAgICBpZiAoZGF0YS50b29sdGlwKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgZGF0YS50b29sdGlwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEltYWdlXHJcbiAgICAgICAgaWYgKGRhdGEuaW1hZ2UpIHtcclxuICAgICAgICAgICAgdmFyIGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICAgICAgICAgIGltYWdlLmNsYXNzTmFtZSA9ICdqZHJvcGRvd24taW1hZ2UnO1xyXG4gICAgICAgICAgICBpbWFnZS5zcmMgPSBkYXRhLmltYWdlO1xyXG4gICAgICAgICAgICBpZiAoISBkYXRhLnRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgIGltYWdlLmNsYXNzTGlzdC5hZGQoJ2pkcm9wZG93bi1pbWFnZS1zbWFsbCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGl0ZW0uZWxlbWVudC5hcHBlbmRDaGlsZChpbWFnZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmljb24pIHtcclxuICAgICAgICAgICAgdmFyIGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgICAgIGljb24uY2xhc3NOYW1lID0gXCJqZHJvcGRvd24taWNvbiBtYXRlcmlhbC1pY29uc1wiO1xyXG4gICAgICAgICAgICBpY29uLmlubmVyVGV4dCA9IGRhdGEuaWNvbjtcclxuICAgICAgICAgICAgaWYgKCEgZGF0YS50aXRsZSkge1xyXG4gICAgICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ2pkcm9wZG93bi1pY29uLXNtYWxsJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRhdGEuY29sb3IpIHtcclxuICAgICAgICAgICAgICAgIGljb24uc3R5bGUuY29sb3IgPSBkYXRhLmNvbG9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGl0ZW0uZWxlbWVudC5hcHBlbmRDaGlsZChpY29uKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRhdGEuY29sb3IpIHtcclxuICAgICAgICAgICAgdmFyIGNvbG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbG9yLmNsYXNzTmFtZSA9ICdqZHJvcGRvd24tY29sb3InO1xyXG4gICAgICAgICAgICBjb2xvci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBkYXRhLmNvbG9yO1xyXG4gICAgICAgICAgICBpdGVtLmVsZW1lbnQuYXBwZW5kQ2hpbGQoY29sb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2V0IGNvbnRlbnRcclxuICAgICAgICBpZiAoISBvYmoub3B0aW9ucy5mb3JtYXQpIHtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSBkYXRhLnRleHQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIG5vZGUuY2xhc3NOYW1lID0gJ2pkcm9wZG93bi1kZXNjcmlwdGlvbic7XHJcbiAgICAgICAgbm9kZS5pbm5lckhUTUwgPSB0ZXh0IHx8ICcmbmJzcDsnOyBcclxuXHJcbiAgICAgICAgLy8gVGl0bGVcclxuICAgICAgICBpZiAoZGF0YS50aXRsZSkge1xyXG4gICAgICAgICAgICB2YXIgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgdGl0bGUuY2xhc3NOYW1lID0gJ2pkcm9wZG93bi10aXRsZSc7XHJcbiAgICAgICAgICAgIHRpdGxlLmlubmVyVGV4dCA9IGRhdGEudGl0bGU7XHJcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2V0IGNvbnRlbnRcclxuICAgICAgICBpZiAoISBvYmoub3B0aW9ucy5mb3JtYXQpIHtcclxuICAgICAgICAgICAgdmFyIHZhbCA9IGRhdGEudmFsdWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHZhbCA9IGRhdGEuaWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBWYWx1ZVxyXG4gICAgICAgIGlmIChvYmoudmFsdWVbdmFsXSkge1xyXG4gICAgICAgICAgICBpdGVtLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnamRyb3Bkb3duLXNlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgIGl0ZW0uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gS2VlcCBET00gYWNjZXNzaWJsZVxyXG4gICAgICAgIG9iai5pdGVtcy5wdXNoKGl0ZW0pO1xyXG5cclxuICAgICAgICAvLyBBZGQgbm9kZSB0byBpdGVtXHJcbiAgICAgICAgaXRlbS5lbGVtZW50LmFwcGVuZENoaWxkKG5vZGUpO1xyXG5cclxuICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgIH1cclxuXHJcbiAgICBvYmouYXBwZW5kRGF0YSA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAvLyBDcmVhdGUgZWxlbWVudHNcclxuICAgICAgICBpZiAoZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gSGVscGVyc1xyXG4gICAgICAgICAgICB2YXIgaXRlbXMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIGdyb3VwcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgLy8gUHJlcGFyZSBkYXRhXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gUHJvY2VzcyBncm91cHNcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhW2ldLmdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgZ3JvdXBzW2RhdGFbaV0uZ3JvdXBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3Vwc1tkYXRhW2ldLmdyb3VwXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBncm91cHNbZGF0YVtpXS5ncm91cF0ucHVzaChpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaChpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gTnVtYmVyIG9mIGl0ZW1zIGNvdW50ZXJcclxuICAgICAgICAgICAgdmFyIGNvdW50ZXIgPSAwO1xyXG5cclxuICAgICAgICAgICAgLy8gR3JvdXBzXHJcbiAgICAgICAgICAgIHZhciBncm91cE5hbWVzID0gT2JqZWN0LmtleXMoZ3JvdXBzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFwcGVuZCBncm91cHMgaW4gY2FzZSBleGlzdHNcclxuICAgICAgICAgICAgaWYgKGdyb3VwTmFtZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBncm91cE5hbWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR3JvdXAgY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAuY2xhc3NOYW1lID0gJ2pkcm9wZG93bi1ncm91cCc7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR3JvdXAgbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBncm91cE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgICAgICBncm91cE5hbWUuY2xhc3NOYW1lID0gJ2pkcm9wZG93bi1ncm91cC1uYW1lJztcclxuICAgICAgICAgICAgICAgICAgICBncm91cE5hbWUuaW5uZXJIVE1MID0gZ3JvdXBOYW1lc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBHcm91cCBhcnJvd1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBncm91cEFycm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwQXJyb3cuY2xhc3NOYW1lID0gJ2pkcm9wZG93bi1ncm91cC1hcnJvdyBqZHJvcGRvd24tZ3JvdXAtYXJyb3ctZG93bic7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBOYW1lLmFwcGVuZENoaWxkKGdyb3VwQXJyb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdyb3VwIGl0ZW1zXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwQ29udGVudC5jbGFzc05hbWUgPSAnamRyb3Bkb3duLWdyb3VwLWl0ZW1zJztcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGdyb3Vwc1tncm91cE5hbWVzW2ldXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IG9iai5jcmVhdGVJdGVtKGRhdGFbZ3JvdXBzW2dyb3VwTmFtZXNbaV1dW2pdXSwgZ3JvdXAsIGdyb3VwTmFtZXNbaV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmxhenlMb2FkaW5nID09IGZhbHNlIHx8IGNvdW50ZXIgPCAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwQ29udGVudC5hcHBlbmRDaGlsZChpdGVtLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcisrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdyb3VwIGl0ZW5zXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAuYXBwZW5kQ2hpbGQoZ3JvdXBOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBncm91cC5hcHBlbmRDaGlsZChncm91cENvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgZ3JvdXAgRE9NXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmdyb3Vwcy5wdXNoKGdyb3VwKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IGFkZCB0byB0aGUgc2NyZWVuIGlmIGNoaWxkcmVuIG9uIHRoZSBncm91cFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChncm91cENvbnRlbnQuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgRE9NIHRvIHRoZSBjb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZ3JvdXApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gb2JqLmNyZWF0ZUl0ZW0oZGF0YVtpdGVtc1tpXV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5sYXp5TG9hZGluZyA9PSBmYWxzZSB8fCBjb3VudGVyIDwgMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoaXRlbS5lbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvYmouc2V0RGF0YSA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAvLyBQcmVwYXJlIGRhdGFcclxuICAgICAgICBpZiAoZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDb21wYXRpYmlsaXR5XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKGRhdGFbaV0pICE9ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCBmb3JtYXRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISBvYmoub3B0aW9ucy5mb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtpXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkYXRhW2ldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZGF0YVtpXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtpXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkYXRhW2ldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZGF0YVtpXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBSZXNldCBjdXJyZW50IHZhbHVlXHJcbiAgICAgICAgICAgIHJlc2V0VmFsdWUoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgY29udGVudCBjb250YWluZXIgaXMgYmxhbmtcclxuICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICAgICAgICAgIC8vIFJlc2V0XHJcbiAgICAgICAgICAgIG9iai5oZWFkZXIudmFsdWUgPSAnJztcclxuXHJcbiAgICAgICAgICAgIC8vIFJlc2V0IGl0ZW1zIGFuZCB2YWx1ZXNcclxuICAgICAgICAgICAgb2JqLml0ZW1zID0gW107XHJcblxyXG4gICAgICAgICAgICAvLyBBcHBlbmQgZGF0YVxyXG4gICAgICAgICAgICBvYmouYXBwZW5kRGF0YShkYXRhKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBkYXRhXHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvYmouZ2V0RGF0YSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBvYmoub3B0aW9ucy5kYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHBvc2l0aW9uIG9mIHRoZSBpdGVtXHJcbiAgICAgKi9cclxuICAgIG9iai5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLml0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChWYWx1ZShpKSA9PSB2YWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBkcm9wZG93biBjdXJyZW50IHRleHRcclxuICAgICAqL1xyXG4gICAgb2JqLmdldFRleHQgPSBmdW5jdGlvbihhc0FycmF5KSB7XHJcbiAgICAgICAgLy8gR2V0IHZhbHVlXHJcbiAgICAgICAgdmFyIHYgPSBnZXRUZXh0KCk7XHJcbiAgICAgICAgLy8gUmV0dXJuIHZhbHVlXHJcbiAgICAgICAgaWYgKGFzQXJyYXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHYuam9pbignOyAnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgZHJvcGRvd24gY3VycmVudCB2YWx1ZVxyXG4gICAgICovXHJcbiAgICBvYmouZ2V0VmFsdWUgPSBmdW5jdGlvbihhc0FycmF5KSB7XHJcbiAgICAgICAgLy8gR2V0IHZhbHVlXHJcbiAgICAgICAgdmFyIHYgPSBnZXRWYWx1ZSgpO1xyXG4gICAgICAgIC8vIFJldHVybiB2YWx1ZVxyXG4gICAgICAgIGlmIChhc0FycmF5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2LmpvaW4oJzsnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGFuZ2UgZXZlbnRcclxuICAgICAqL1xyXG4gICAgdmFyIGNoYW5nZSA9IGZ1bmN0aW9uKG9sZFZhbHVlKSB7XHJcbiAgICAgICAgLy8gRXZlbnRzXHJcbiAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbmNoYW5nZSkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy5vbmNoYW5nZShlbCwgb2JqLCBvbGRWYWx1ZSwgb2JqLm9wdGlvbnMudmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTGVtb25hZGUgSlNcclxuICAgICAgICBpZiAoZWwudmFsdWUgIT0gb2JqLm9wdGlvbnMudmFsdWUpIHtcclxuICAgICAgICAgICAgZWwudmFsdWUgPSBvYmoub3B0aW9ucy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZihlbC5vbmNoYW5nZSkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgZWwub25jaGFuZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGFuZ2UnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVsLnZhbHVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB2YWx1ZVxyXG4gICAgICovXHJcbiAgICBvYmouc2V0VmFsdWUgPSBmdW5jdGlvbihuZXdWYWx1ZSkge1xyXG4gICAgICAgIC8vIEN1cnJlbnQgdmFsdWVcclxuICAgICAgICB2YXIgb2xkVmFsdWUgPSBvYmouZ2V0VmFsdWUoKTtcclxuICAgICAgICAvLyBOZXcgdmFsdWVcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShuZXdWYWx1ZSkpIHtcclxuICAgICAgICAgICAgbmV3VmFsdWUgPSBuZXdWYWx1ZS5qb2luKCc7JylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gbmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gU2V0IHZhbHVlXHJcbiAgICAgICAgICAgIGFwcGx5VmFsdWUobmV3VmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hhbmdlXHJcbiAgICAgICAgICAgIGNoYW5nZShvbGRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9iai5yZXNldFNlbGVjdGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgb2JqLnNldFZhbHVlKG51bGwpO1xyXG4gICAgfSBcclxuXHJcbiAgICBvYmouc2VsZWN0SW5kZXggPSBmdW5jdGlvbihpbmRleCwgZm9yY2UpIHtcclxuICAgICAgICAvLyBNYWtlIHN1cmUgaXMgYSBudW1iZXJcclxuICAgICAgICB2YXIgaW5kZXggPSBwYXJzZUludChpbmRleCk7XHJcblxyXG4gICAgICAgIC8vIE9ubHkgc2VsZWN0IHRob3NlIGV4aXN0aW5nIGVsZW1lbnRzXHJcbiAgICAgICAgaWYgKG9iai5pdGVtcyAmJiBvYmouaXRlbXNbaW5kZXhdICYmIChmb3JjZSA9PT0gdHJ1ZSB8fCBvYmouaXRlbXNbaW5kZXhdLmRhdGEuZGlzYWJsZWQgIT09IHRydWUpKSB7XHJcbiAgICAgICAgICAgIC8vIFJlc2V0IGN1cnNvciB0byBhIG5ldyBwb3NpdGlvblxyXG4gICAgICAgICAgICBvYmouc2V0Q3Vyc29yKGluZGV4LCBmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBCZWhhdmlvdXJcclxuICAgICAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMubXVsdGlwbGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5pdGVtc1tpbmRleF0uc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouc2V0VmFsdWUobnVsbCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5zZXRWYWx1ZShWYWx1ZShpbmRleCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIENsb3NlIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgb2JqLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBPbGQgdmFsdWVcclxuICAgICAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IG9iai5vcHRpb25zLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRvZ2dsZSBvcHRpb25cclxuICAgICAgICAgICAgICAgIGlmIChvYmouaXRlbXNbaW5kZXhdLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLml0ZW1zW2luZGV4XS5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2pkcm9wZG93bi1zZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5pdGVtc1tpbmRleF0uc2VsZWN0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9iai52YWx1ZVtWYWx1ZShpbmRleCldO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBTZWxlY3QgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIG9iai5pdGVtc1tpbmRleF0uZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdqZHJvcGRvd24tc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBvYmouaXRlbXNbaW5kZXhdLnNlbGVjdGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnZhbHVlW1ZhbHVlKGluZGV4KV0gPSBUZXh0KGluZGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBHbG9iYWwgdmFsdWVcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLnZhbHVlID0gT2JqZWN0LmtleXMob2JqLnZhbHVlKS5qb2luKCc7Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGxhYmVscyBmb3IgbXVsdGlwbGUgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5hdXRvY29tcGxldGUgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouaGVhZGVyLnZhbHVlID0gZ2V0VGV4dCgpLmpvaW4oJzsgJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRXZlbnRzXHJcbiAgICAgICAgICAgICAgICBjaGFuZ2Uob2xkVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9iai5zZWxlY3RJdGVtID0gZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgIG9iai5zZWxlY3RJbmRleChpdGVtLmluZGV4VmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBleGlzdHMgPSBmdW5jdGlvbihrLCByZXN1bHQpIHtcclxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJlc3VsdC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBpZiAoISBvYmoub3B0aW9ucy5mb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbal0udmFsdWUgPT0gaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtqXS5pZCA9PSBrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5maW5kID0gZnVuY3Rpb24oc3RyKSB7XHJcbiAgICAgICAgaWYgKG9iai5zZWFyY2ggPT0gc3RyLnRyaW0oKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTZWFyY2ggdGVybVxyXG4gICAgICAgIG9iai5zZWFyY2ggPSBzdHI7XHJcblxyXG4gICAgICAgIC8vIFJlc2V0IGluZGV4XHJcbiAgICAgICAgb2JqLnNldEN1cnNvcigpO1xyXG5cclxuICAgICAgICAvLyBSZW1vdmUgbm9kZXMgZnJvbSBhbGwgZ3JvdXBzXHJcbiAgICAgICAgaWYgKG9iai5ncm91cHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmdyb3Vwcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgb2JqLmdyb3Vwc1tpXS5sYXN0Q2hpbGQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSBhbGwgbm9kZXNcclxuICAgICAgICBjb250ZW50LmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgICAvLyBSZW1vdmUgY3VycmVudCBpdGVtcyBpbiB0aGUgcmVtb3RlIHNlYXJjaFxyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5yZW1vdGVTZWFyY2ggPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAvLyBSZXNldCByZXN1bHRzXHJcbiAgICAgICAgICAgIG9iai5yZXN1bHRzID0gbnVsbDtcclxuICAgICAgICAgICAgLy8gVVJMXHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBvYmoub3B0aW9ucy51cmwgKyAob2JqLm9wdGlvbnMudXJsLmluZGV4T2YoJz8nKSA+IDAgPyAnJicgOiAnPycpICsgJ3E9JyArIHN0cjtcclxuICAgICAgICAgICAgLy8gUmVtb3RlIHNlYXJjaFxyXG4gICAgICAgICAgICBqU3VpdGVzLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IGl0ZW1zXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLml0ZW1zID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgY3VycmVudCBzZWxlY3RlZCBpdGVtcyB0byB0aGUgcmVzdWx0cyBpbiBjYXNlIHRoZXkgYXJlIG5vdCB0aGVyZVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gT2JqZWN0LmtleXMob2JqLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXJyZW50Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBleGlzdHMoY3VycmVudFtpXSwgcmVzdWx0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIG9iai5vcHRpb25zLmZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudW5zaGlmdCh7IHZhbHVlOiBjdXJyZW50W2ldLCB0ZXh0OiBvYmoudmFsdWVbY3VycmVudFtpXV0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnVuc2hpZnQoeyBpZDogY3VycmVudFtpXSwgbmFtZTogb2JqLnZhbHVlW2N1cnJlbnRbaV1dIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBBcHBlbmQgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgIG9iai5hcHBlbmREYXRhKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2hvdyBvciBoaWRlIHJlc3VsdHNcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISByZXN1bHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFNlYXJjaCB0ZXJtc1xyXG4gICAgICAgICAgICBzdHIgPSBuZXcgUmVnRXhwKHN0ciwgJ2dpJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZXNldCBzZWFyY2hcclxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFwcGVuZCBvcHRpb25zXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLml0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJdGVtIGxhYmVsXHJcbiAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBUZXh0KGkpO1xyXG4gICAgICAgICAgICAgICAgLy8gSXRlbSB0aXRsZVxyXG4gICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gb2JqLml0ZW1zW2ldLmRhdGEudGl0bGUgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAvLyBHcm91cCBuYW1lXHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXBOYW1lID0gb2JqLml0ZW1zW2ldLmRhdGEuZ3JvdXAgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAvLyBTeW5vbnltXHJcbiAgICAgICAgICAgICAgICB2YXIgc3lub255bSA9IG9iai5pdGVtc1tpXS5kYXRhLnN5bm9ueW0gfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3lub255bSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN5bm9ueW0gPSBzeW5vbnltLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc3RyID09IG51bGwgfHwgb2JqLml0ZW1zW2ldLnNlbGVjdGVkID09IHRydWUgfHwgbGFiZWwubWF0Y2goc3RyKSB8fCB0aXRsZS5tYXRjaChzdHIpIHx8IGdyb3VwTmFtZS5tYXRjaChzdHIpIHx8IHN5bm9ueW0ubWF0Y2goc3RyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChvYmouaXRlbXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoISByZXN1bHRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJlc3VsdHNcclxuICAgICAgICAgICAgICAgIG9iai5yZXN1bHRzID0gbnVsbDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJlc3VsdHNcclxuICAgICAgICAgICAgICAgIG9iai5yZXN1bHRzID0gcmVzdWx0cztcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTaG93IDIwMCBpdGVtcyBhdCBvbmNlXHJcbiAgICAgICAgICAgICAgICB2YXIgbnVtYmVyID0gcmVzdWx0cy5sZW5ndGggfHwgMDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBMYXp5bG9hZGluZ1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmxhenlMb2FkaW5nID09IHRydWUgJiYgbnVtYmVyID4gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyID0gMjAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtYmVyOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnJlc3VsdHNbaV0uZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEgb2JqLnJlc3VsdHNbaV0uZ3JvdXAucGFyZW50Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChvYmoucmVzdWx0c1tpXS5ncm91cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlc3VsdHNbaV0uZ3JvdXAubGFzdENoaWxkLmFwcGVuZENoaWxkKG9iai5yZXN1bHRzW2ldLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQob2JqLnJlc3VsdHNbaV0uZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBdXRvIGZvY3VzXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLmF1dG9mb2N1cyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIG9iai5maXJzdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvYmoub3BlbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIEZvY3VzXHJcbiAgICAgICAgaWYgKCEgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdqZHJvcGRvd24tZm9jdXMnKSkge1xyXG4gICAgICAgICAgICAvLyBDdXJyZW50IGRyb3Bkb3duXHJcbiAgICAgICAgICAgIGpTdWl0ZXMuZHJvcGRvd24uY3VycmVudCA9IG9iajtcclxuXHJcbiAgICAgICAgICAgIC8vIFN0YXJ0IHRyYWNraW5nXHJcbiAgICAgICAgICAgIGpTdWl0ZXMudHJhY2tpbmcob2JqLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBmb2N1c1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdqZHJvcGRvd24tZm9jdXMnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFuaW1hdGlvblxyXG4gICAgICAgICAgICBpZiAoalN1aXRlcy5nZXRXaW5kb3dXaWR0aCgpIDwgODAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMudHlwZSA9PSBudWxsIHx8IG9iai5vcHRpb25zLnR5cGUgPT0gJ3BpY2tlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICBqU3VpdGVzLmFuaW1hdGlvbi5zbGlkZUJvdHRvbShjb250YWluZXIsIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBGaWx0ZXJcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmF1dG9jb21wbGV0ZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouaGVhZGVyLnZhbHVlID0gb2JqLnNlYXJjaDtcclxuICAgICAgICAgICAgICAgIG9iai5oZWFkZXIuZm9jdXMoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gU2V0IGN1cnNvciBmb3IgdGhlIGZpcnN0IG9yIGZpcnN0IHNlbGVjdGVkIGVsZW1lbnRcclxuICAgICAgICAgICAgdmFyIGsgPSBnZXRWYWx1ZSgpO1xyXG4gICAgICAgICAgICBpZiAoa1swXSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IG9iai5nZXRQb3NpdGlvbihrWzBdKTtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJzb3IgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnNldEN1cnNvcihjdXJzb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDb250YWluZXIgU2l6ZVxyXG4gICAgICAgICAgICBpZiAoISBvYmoub3B0aW9ucy50eXBlIHx8IG9iai5vcHRpb25zLnR5cGUgPT0gJ2RlZmF1bHQnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlY3RDb250YWluZXIgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmlubmVySGVpZ2h0IDwgcmVjdC5ib3R0b20gKyByZWN0Q29udGFpbmVyLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuc3R5bGUudG9wID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5ib3R0b20gPSAod2luZG93LmlubmVySGVpZ2h0IC0gcmVjdC50b3AgKSArIDEgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS50b3AgPSByZWN0LmJvdHRvbSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5ib3R0b20gPSAnJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmxlZnQgPSByZWN0LmxlZnQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmlubmVySGVpZ2h0IDwgcmVjdC5ib3R0b20gKyByZWN0Q29udGFpbmVyLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuc3R5bGUudG9wID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5ib3R0b20gPSByZWN0LmhlaWdodCArIDEgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS50b3AgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmJvdHRvbSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuc3R5bGUubWluV2lkdGggPSByZWN0LndpZHRoICsgJ3B4JztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMubWF4V2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuc3R5bGUubWF4V2lkdGggPSBvYmoub3B0aW9ucy5tYXhXaWR0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoISBvYmouaXRlbXMubGVuZ3RoICYmIG9iai5vcHRpb25zLmF1dG9jb21wbGV0ZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXZlbnRzXHJcbiAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbm9wZW4pID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgb2JqLm9wdGlvbnMub25vcGVuKGVsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLmNsb3NlID0gZnVuY3Rpb24oaWdub3JlRXZlbnRzKSB7XHJcbiAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnamRyb3Bkb3duLWZvY3VzJykpIHtcclxuICAgICAgICAgICAgLy8gVXBkYXRlIGxhYmVsc1xyXG4gICAgICAgICAgICBvYmouaGVhZGVyLnZhbHVlID0gb2JqLmdldFRleHQoKTtcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIGN1cnNvclxyXG4gICAgICAgICAgICBvYmouc2V0Q3Vyc29yKCk7XHJcbiAgICAgICAgICAgIC8vIEV2ZW50c1xyXG4gICAgICAgICAgICBpZiAoISBpZ25vcmVFdmVudHMgJiYgdHlwZW9mKG9iai5vcHRpb25zLm9uY2xvc2UpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm9uY2xvc2UoZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEJsdXJcclxuICAgICAgICAgICAgaWYgKG9iai5oZWFkZXIuYmx1cikge1xyXG4gICAgICAgICAgICAgICAgb2JqLmhlYWRlci5ibHVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIGZvY3VzXHJcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2pkcm9wZG93bi1mb2N1cycpO1xyXG4gICAgICAgICAgICAvLyBTdGFydCB0cmFja2luZ1xyXG4gICAgICAgICAgICBqU3VpdGVzLnRyYWNraW5nKG9iaiwgZmFsc2UpO1xyXG4gICAgICAgICAgICAvLyBDdXJyZW50IGRyb3Bkb3duXHJcbiAgICAgICAgICAgIGpTdWl0ZXMuZHJvcGRvd24uY3VycmVudCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb2JqLmdldFZhbHVlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgY3Vyc29yXHJcbiAgICAgKi9cclxuICAgIG9iai5zZXRDdXJzb3IgPSBmdW5jdGlvbihpbmRleCwgc2V0UG9zaXRpb24pIHtcclxuICAgICAgICAvLyBSZW1vdmUgY3VycmVudCBjdXJzb3JcclxuICAgICAgICBpZiAob2JqLmN1cnJlbnRJbmRleCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSB2aXN1YWwgY3Vyc29yXHJcbiAgICAgICAgICAgIGlmIChvYmouaXRlbXMgJiYgb2JqLml0ZW1zW29iai5jdXJyZW50SW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouaXRlbXNbb2JqLmN1cnJlbnRJbmRleF0uZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdqZHJvcGRvd24tY3Vyc29yJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpbmRleCA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JqLmN1cnJlbnRJbmRleCA9IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5kZXggPSBwYXJzZUludChpbmRleCk7XHJcblxyXG4gICAgICAgICAgICAvLyBDdXJzb3Igb25seSBmb3IgdmlzaWJsZSBpdGVtc1xyXG4gICAgICAgICAgICBpZiAob2JqLml0ZW1zW2luZGV4XS5lbGVtZW50LnBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgICAgIG9iai5pdGVtc1tpbmRleF0uZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdqZHJvcGRvd24tY3Vyc29yJyk7XHJcbiAgICAgICAgICAgICAgICBvYmouY3VycmVudEluZGV4ID0gaW5kZXg7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHNjcm9sbCB0byB0aGUgY3Vyc29yIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgIGlmIChzZXRQb3NpdGlvbiAhPT0gZmFsc2UgJiYgb2JqLml0ZW1zW29iai5jdXJyZW50SW5kZXhdLmVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0gY29udGVudC5zY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBvYmouaXRlbXNbb2JqLmN1cnJlbnRJbmRleF0uZWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LnNjcm9sbFRvcCA9IGVsZW1lbnQub2Zmc2V0VG9wIC0gZWxlbWVudC5zY3JvbGxUb3AgKyBlbGVtZW50LmNsaWVudFRvcCAtIDk1O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbXBhdGliaWxpdHlcclxuICAgIG9iai5yZXNldEN1cnNvciA9IG9iai5zZXRDdXJzb3I7XHJcbiAgICBvYmoudXBkYXRlQ3Vyc29yID0gb2JqLnNldEN1cnNvcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0IGN1cnNvciBhbmQgc2VsZWN0ZWQgaXRlbXNcclxuICAgICAqL1xyXG4gICAgb2JqLnJlc2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gUmVzZXQgY3Vyc29yXHJcbiAgICAgICAgb2JqLnNldEN1cnNvcigpO1xyXG5cclxuICAgICAgICAvLyBSZXNldCBzZWxlY3RlZFxyXG4gICAgICAgIG9iai5zZXRWYWx1ZShudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpcnN0IGF2YWlsYWJsZSBpdGVtXHJcbiAgICAgKi9cclxuICAgIG9iai5maXJzdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5sYXp5TG9hZGluZyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBvYmoubG9hZEZpcnN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaXRlbXMgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qZHJvcGRvd24taXRlbScpO1xyXG4gICAgICAgIGlmIChpdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIG5ld0luZGV4ID0gaXRlbXNbMF0uaW5kZXhWYWx1ZTtcclxuICAgICAgICAgICAgb2JqLnNldEN1cnNvcihuZXdJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTGFzdCBhdmFpbGFibGUgaXRlbSBcclxuICAgICAqL1xyXG4gICAgb2JqLmxhc3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAob2JqLm9wdGlvbnMubGF6eUxvYWRpbmcgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgb2JqLmxvYWRMYXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaXRlbXMgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qZHJvcGRvd24taXRlbScpO1xyXG4gICAgICAgIGlmIChpdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIG5ld0luZGV4ID0gaXRlbXNbaXRlbXMubGVuZ3RoLTFdLmluZGV4VmFsdWU7XHJcbiAgICAgICAgICAgIG9iai5zZXRDdXJzb3IobmV3SW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvYmoubmV4dCA9IGZ1bmN0aW9uKGxldHRlcikge1xyXG4gICAgICAgIHZhciBuZXdJbmRleCA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChsZXR0ZXIpIHtcclxuICAgICAgICAgICAgaWYgKGxldHRlci5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ3VycmVudCBpbmRleFxyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBvYmouY3VycmVudEluZGV4IHx8IC0xO1xyXG4gICAgICAgICAgICAgICAgLy8gTGV0dGVyXHJcbiAgICAgICAgICAgICAgICBsZXR0ZXIgPSBsZXR0ZXIudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB2YXIgbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qZHJvcGRvd24taXRlbScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1zW2ldLmluZGV4VmFsdWUgPiBjdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA9IG9iai5pdGVtc1tpdGVtc1tpXS5pbmRleFZhbHVlXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsID0gZS5lbGVtZW50LmlubmVyVGV4dFswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gbC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGV0dGVyID09IGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGV4ID0gaXRlbXNbaV0uaW5kZXhWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG9iai5zZXRDdXJzb3IobmV3SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKG9iai5jdXJyZW50SW5kZXggPT0gdW5kZWZpbmVkIHx8IG9iai5jdXJyZW50SW5kZXggPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgb2JqLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IG9iai5pdGVtc1tvYmouY3VycmVudEluZGV4XS5lbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gZWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LmNsYXNzTGlzdC5jb250YWlucygnamRyb3Bkb3duLWdyb3VwJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCA9IG5leHQubGFzdENoaWxkLmZpcnN0Q2hpbGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0luZGV4ID0gbmV4dC5pbmRleFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucygnamRyb3Bkb3duLWdyb3VwLWl0ZW1zJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgPSBlbGVtZW50LnBhcmVudE5vZGUucGFyZW50Tm9kZS5uZXh0RWxlbWVudFNpYmxpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LmNsYXNzTGlzdC5jb250YWlucygnamRyb3Bkb3duLWdyb3VwJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID0gbmV4dC5sYXN0Q2hpbGQuZmlyc3RDaGlsZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV4dC5jbGFzc0xpc3QuY29udGFpbnMoJ2pkcm9wZG93bi1pdGVtJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmRleCA9IG5leHQuaW5kZXhWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmRleCA9IG5leHQuaW5kZXhWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobmV3SW5kZXggIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouc2V0Q3Vyc29yKG5ld0luZGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvYmoucHJldiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBuZXdJbmRleCA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChvYmouY3VycmVudEluZGV4ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIG9iai5maXJzdCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gb2JqLml0ZW1zW29iai5jdXJyZW50SW5kZXhdLmVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJldiA9IGVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZztcclxuICAgICAgICAgICAgaWYgKHByZXYpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcmV2LmNsYXNzTGlzdC5jb250YWlucygnamRyb3Bkb3duLWdyb3VwJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2ID0gcHJldi5sYXN0Q2hpbGQubGFzdENoaWxkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbmV3SW5kZXggPSBwcmV2LmluZGV4VmFsdWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucygnamRyb3Bkb3duLWdyb3VwLWl0ZW1zJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldiA9IGVsZW1lbnQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXYuY2xhc3NMaXN0LmNvbnRhaW5zKCdqZHJvcGRvd24tZ3JvdXAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldiA9IHByZXYubGFzdENoaWxkLmxhc3RDaGlsZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcmV2LmNsYXNzTGlzdC5jb250YWlucygnamRyb3Bkb3duLWl0ZW0nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXggPSBwcmV2LmluZGV4VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2ID0gbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmRleCA9IHByZXYuaW5kZXhWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChuZXdJbmRleCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBvYmouc2V0Q3Vyc29yKG5ld0luZGV4KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLmxvYWRGaXJzdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIFNlYXJjaFxyXG4gICAgICAgIGlmIChvYmoucmVzdWx0cykge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IG9iai5yZXN1bHRzO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHRzID0gb2JqLml0ZW1zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2hvdyAyMDAgaXRlbXMgYXQgb25jZVxyXG4gICAgICAgIHZhciBudW1iZXIgPSByZXN1bHRzLmxlbmd0aCB8fCAwO1xyXG5cclxuICAgICAgICAvLyBMYXp5bG9hZGluZ1xyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5sYXp5TG9hZGluZyA9PSB0cnVlICYmIG51bWJlciA+IDIwMCkge1xyXG4gICAgICAgICAgICBudW1iZXIgPSAyMDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZXNldCBjb250YWluZXJcclxuICAgICAgICBjb250ZW50LmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgICAvLyBGaXJzdCAyMDAgaXRlbXNcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bWJlcjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRzW2ldLmdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISByZXN1bHRzW2ldLmdyb3VwLnBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKHJlc3VsdHNbaV0uZ3JvdXApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0c1tpXS5ncm91cC5sYXN0Q2hpbGQuYXBwZW5kQ2hpbGQocmVzdWx0c1tpXS5lbGVtZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQocmVzdWx0c1tpXS5lbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2Nyb2xsIGdvIHRvIHRoZSBiZWdpblxyXG4gICAgICAgIGNvbnRlbnQuc2Nyb2xsVG9wID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBvYmoubG9hZExhc3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBTZWFyY2hcclxuICAgICAgICBpZiAob2JqLnJlc3VsdHMpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBvYmoucmVzdWx0cztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IG9iai5pdGVtcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNob3cgZmlyc3QgcGFnZVxyXG4gICAgICAgIHZhciBudW1iZXIgPSByZXN1bHRzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgLy8gTWF4IDIwMCBpdGVtc1xyXG4gICAgICAgIGlmIChudW1iZXIgPiAyMDApIHtcclxuICAgICAgICAgICAgbnVtYmVyID0gbnVtYmVyIC0gMjAwO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVzZXQgY29udGFpbmVyXHJcbiAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gICAgICAgICAgICAvLyBGaXJzdCAyMDAgaXRlbXNcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IG51bWJlcjsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzW2ldLmdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgcmVzdWx0c1tpXS5ncm91cC5wYXJlbnROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQocmVzdWx0c1tpXS5ncm91cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbaV0uZ3JvdXAubGFzdENoaWxkLmFwcGVuZENoaWxkKHJlc3VsdHNbaV0uZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQocmVzdWx0c1tpXS5lbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gU2Nyb2xsIGdvIHRvIHRoZSBiZWdpblxyXG4gICAgICAgICAgICBjb250ZW50LnNjcm9sbFRvcCA9IGNvbnRlbnQuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvYmoubG9hZFVwID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHRlc3QgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gU2VhcmNoXHJcbiAgICAgICAgaWYgKG9iai5yZXN1bHRzKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHRzID0gb2JqLnJlc3VsdHM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBvYmouaXRlbXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaXRlbXMgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qZHJvcGRvd24taXRlbScpO1xyXG4gICAgICAgIHZhciBmaXN0SXRlbSA9IGl0ZW1zWzBdLmluZGV4VmFsdWU7XHJcbiAgICAgICAgZmlzdEl0ZW0gPSBvYmouaXRlbXNbZmlzdEl0ZW1dO1xyXG4gICAgICAgIHZhciBpbmRleCA9IHJlc3VsdHMuaW5kZXhPZihmaXN0SXRlbSkgLSAxO1xyXG5cclxuICAgICAgICBpZiAoaW5kZXggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBudW1iZXIgPSAwO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGluZGV4ID4gMCAmJiByZXN1bHRzW2luZGV4XSAmJiBudW1iZXIgPCAyMDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzW2luZGV4XS5ncm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIHJlc3VsdHNbaW5kZXhdLmdyb3VwLnBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5pbnNlcnRCZWZvcmUocmVzdWx0c1tpbmRleF0uZ3JvdXAsIGNvbnRlbnQuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbaW5kZXhdLmdyb3VwLmxhc3RDaGlsZC5pbnNlcnRCZWZvcmUocmVzdWx0c1tpbmRleF0uZWxlbWVudCwgcmVzdWx0c1tpbmRleF0uZ3JvdXAubGFzdENoaWxkLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50Lmluc2VydEJlZm9yZShyZXN1bHRzW2luZGV4XS5lbGVtZW50LCBjb250ZW50LmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGluZGV4LS07XHJcbiAgICAgICAgICAgICAgICBudW1iZXIrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gTmV3IGl0ZW0gYWRkZWRcclxuICAgICAgICAgICAgdGVzdCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGVzdDtcclxuICAgIH1cclxuXHJcbiAgICBvYmoubG9hZERvd24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgdGVzdCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBTZWFyY2hcclxuICAgICAgICBpZiAob2JqLnJlc3VsdHMpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBvYmoucmVzdWx0cztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IG9iai5pdGVtcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBpdGVtcyA9IGNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnLmpkcm9wZG93bi1pdGVtJyk7XHJcbiAgICAgICAgdmFyIGxhc3RJdGVtID0gaXRlbXNbaXRlbXMubGVuZ3RoLTFdLmluZGV4VmFsdWU7XHJcbiAgICAgICAgbGFzdEl0ZW0gPSBvYmouaXRlbXNbbGFzdEl0ZW1dO1xyXG4gICAgICAgIHZhciBpbmRleCA9IHJlc3VsdHMuaW5kZXhPZihsYXN0SXRlbSkgKyAxO1xyXG5cclxuICAgICAgICBpZiAoaW5kZXggPCByZXN1bHRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgbnVtYmVyID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKGluZGV4IDwgcmVzdWx0cy5sZW5ndGggJiYgcmVzdWx0c1tpbmRleF0gJiYgbnVtYmVyIDwgMjAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0c1tpbmRleF0uZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISByZXN1bHRzW2luZGV4XS5ncm91cC5wYXJlbnROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQocmVzdWx0c1tpbmRleF0uZ3JvdXApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzW2luZGV4XS5ncm91cC5sYXN0Q2hpbGQuYXBwZW5kQ2hpbGQocmVzdWx0c1tpbmRleF0uZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQocmVzdWx0c1tpbmRleF0uZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgICAgIG51bWJlcisrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBOZXcgaXRlbSBhZGRlZFxyXG4gICAgICAgICAgICB0ZXN0ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0ZXN0O1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKTtcclxuXHJcbiAgICByZXR1cm4gb2JqO1xyXG59KTtcclxuXHJcbmpTdWl0ZXMuZHJvcGRvd24ua2V5ZG93biA9IGZ1bmN0aW9uKGUpIHtcclxuICAgIHZhciBkcm9wZG93biA9IG51bGw7XHJcbiAgICBpZiAoZHJvcGRvd24gPSBqU3VpdGVzLmRyb3Bkb3duLmN1cnJlbnQpIHtcclxuICAgICAgICBpZiAoZS53aGljaCA9PSAxMyB8fCBlLndoaWNoID09IDkpIHsgIC8vIGVudGVyIG9yIHRhYlxyXG4gICAgICAgICAgICBpZiAoZHJvcGRvd24uaGVhZGVyLnZhbHVlICYmIGRyb3Bkb3duLmN1cnJlbnRJbmRleCA9PSBudWxsICYmIGRyb3Bkb3duLm9wdGlvbnMubmV3T3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhleSB0eXBlZCBzb21ldGhpbmcgaW4sIGJ1dCBpdCBtYXRjaGVkIG5vdGhpbmcsIGFuZCBuZXdPcHRpb25zIGFyZSBhbGxvd2VkLCBzdGFydCB0aGF0IGZsb3dcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gUXVpY2sgU2VsZWN0L0ZpbHRlclxyXG4gICAgICAgICAgICAgICAgaWYgKGRyb3Bkb3duLmN1cnJlbnRJbmRleCA9PSBudWxsICYmIGRyb3Bkb3duLm9wdGlvbnMuYXV0b2NvbXBsZXRlID09IHRydWUgJiYgZHJvcGRvd24uaGVhZGVyLnZhbHVlICE9IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5maW5kKGRyb3Bkb3duLmhlYWRlci52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZWxlY3RJbmRleChkcm9wZG93bi5jdXJyZW50SW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLndoaWNoID09IDM4KSB7ICAvLyB1cCBhcnJvd1xyXG4gICAgICAgICAgICBpZiAoZHJvcGRvd24uY3VycmVudEluZGV4ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZHJvcGRvd24uY3VycmVudEluZGV4ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd24ucHJldigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT0gNDApIHsgIC8vIGRvd24gYXJyb3dcclxuICAgICAgICAgICAgaWYgKGRyb3Bkb3duLmN1cnJlbnRJbmRleCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5maXJzdCgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRyb3Bkb3duLmN1cnJlbnRJbmRleCArIDEgPCBkcm9wZG93bi5pdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLm5leHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLndoaWNoID09IDM2KSB7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIGlmICghIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnamRyb3Bkb3duLWhlYWRlcicpKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT0gMzUpIHtcclxuICAgICAgICAgICAgZHJvcGRvd24ubGFzdCgpO1xyXG4gICAgICAgICAgICBpZiAoISBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2pkcm9wZG93bi1oZWFkZXInKSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLndoaWNoID09IDI3KSB7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duLmNsb3NlKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLndoaWNoID09IDMzKSB7ICAvLyBwYWdlIHVwXHJcbiAgICAgICAgICAgIGlmIChkcm9wZG93bi5jdXJyZW50SW5kZXggPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd24uZmlyc3QoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkcm9wZG93bi5jdXJyZW50SW5kZXggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDc7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLnByZXYoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT0gMzQpIHsgIC8vIHBhZ2UgZG93blxyXG4gICAgICAgICAgICBpZiAoZHJvcGRvd24uY3VycmVudEluZGV4ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZHJvcGRvd24uY3VycmVudEluZGV4ICsgMSA8IGRyb3Bkb3duLml0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA3OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5uZXh0KClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5qU3VpdGVzLmRyb3Bkb3duLm1vdXNldXAgPSBmdW5jdGlvbihlKSB7XHJcbiAgICB2YXIgZWxlbWVudCA9IGpTdWl0ZXMuZmluZEVsZW1lbnQoZS50YXJnZXQsICdqZHJvcGRvd24nKTtcclxuICAgIGlmIChlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIGRyb3Bkb3duID0gZWxlbWVudC5kcm9wZG93bjtcclxuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqZHJvcGRvd24taGVhZGVyJykpIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqZHJvcGRvd24tZm9jdXMnKSAmJiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnamRyb3Bkb3duLWRlZmF1bHQnKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlLmNoYW5nZWRUb3VjaGVzICYmIGUuY2hhbmdlZFRvdWNoZXNbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBlLmNsaWVudFg7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBlLmNsaWVudFk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlY3Qud2lkdGggLSAoeCAtIHJlY3QubGVmdCkgPCAzMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2pkcm9wZG93bi1hZGQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRyb3Bkb3duLm9wdGlvbnMuYXV0b2NvbXBsZXRlID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd24ub3BlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2pkcm9wZG93bi1ncm91cC1uYW1lJykpIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW1zID0gZS50YXJnZXQubmV4dFNpYmxpbmcuY2hpbGRyZW47XHJcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5uZXh0U2libGluZy5zdHlsZS5kaXNwbGF5ICE9ICdub25lJykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtc1tpXS5zdHlsZS5kaXNwbGF5ICE9ICdub25lJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5zZWxlY3RJdGVtKGl0ZW1zW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnamRyb3Bkb3duLWdyb3VwLWFycm93JykpIHtcclxuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnamRyb3Bkb3duLWdyb3VwLWFycm93LWRvd24nKSkge1xyXG4gICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnamRyb3Bkb3duLWdyb3VwLWFycm93LWRvd24nKTtcclxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2pkcm9wZG93bi1ncm91cC1hcnJvdy11cCcpO1xyXG4gICAgICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5uZXh0U2libGluZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnamRyb3Bkb3duLWdyb3VwLWFycm93LXVwJyk7XHJcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdqZHJvcGRvd24tZ3JvdXAtYXJyb3ctZG93bicpO1xyXG4gICAgICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5uZXh0U2libGluZy5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnamRyb3Bkb3duLWl0ZW0nKSkge1xyXG4gICAgICAgICAgICBkcm9wZG93bi5zZWxlY3RJdGVtKGUudGFyZ2V0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnamRyb3Bkb3duLWltYWdlJykpIHtcclxuICAgICAgICAgICAgZHJvcGRvd24uc2VsZWN0SXRlbShlLnRhcmdldC5wYXJlbnROb2RlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnamRyb3Bkb3duLWRlc2NyaXB0aW9uJykpIHtcclxuICAgICAgICAgICAgZHJvcGRvd24uc2VsZWN0SXRlbShlLnRhcmdldC5wYXJlbnROb2RlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnamRyb3Bkb3duLXRpdGxlJykpIHtcclxuICAgICAgICAgICAgZHJvcGRvd24uc2VsZWN0SXRlbShlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqZHJvcGRvd24tY2xvc2UnKSB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2pkcm9wZG93bi1iYWNrZHJvcCcpKSB7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5qU3VpdGVzLmRyb3Bkb3duLmV4dHJhY3RGcm9tRG9tID0gZnVuY3Rpb24oZWwsIG9wdGlvbnMpIHtcclxuICAgIC8vIEtlZXAgcmVmZXJlbmNlXHJcbiAgICB2YXIgc2VsZWN0ID0gZWw7XHJcbiAgICBpZiAoISBvcHRpb25zKSB7XHJcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgfVxyXG4gICAgLy8gUHJlcGFyZSBjb25maWd1cmF0aW9uXHJcbiAgICBpZiAoZWwuZ2V0QXR0cmlidXRlKCdtdWx0aXBsZScpICYmICghIG9wdGlvbnMgfHwgb3B0aW9ucy5tdWx0aXBsZSA9PSB1bmRlZmluZWQpKSB7XHJcbiAgICAgICAgb3B0aW9ucy5tdWx0aXBsZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAoZWwuZ2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicpICYmICghIG9wdGlvbnMgfHwgb3B0aW9ucy5wbGFjZWhvbGRlciA9PSB1bmRlZmluZWQpKSB7XHJcbiAgICAgICAgb3B0aW9ucy5wbGFjZWhvbGRlciA9IGVsLmdldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKTtcclxuICAgIH1cclxuICAgIGlmIChlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXV0b2NvbXBsZXRlJykgJiYgKCEgb3B0aW9ucyB8fCBvcHRpb25zLmF1dG9jb21wbGV0ZSA9PSB1bmRlZmluZWQpKSB7XHJcbiAgICAgICAgb3B0aW9ucy5hdXRvY29tcGxldGUgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgaWYgKCEgb3B0aW9ucyB8fCBvcHRpb25zLndpZHRoID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIG9wdGlvbnMud2lkdGggPSBlbC5vZmZzZXRXaWR0aDtcclxuICAgIH1cclxuICAgIGlmIChlbC52YWx1ZSAmJiAoISBvcHRpb25zIHx8IG9wdGlvbnMudmFsdWUgPT0gdW5kZWZpbmVkKSkge1xyXG4gICAgICAgIG9wdGlvbnMudmFsdWUgPSBlbC52YWx1ZTtcclxuICAgIH1cclxuICAgIGlmICghIG9wdGlvbnMgfHwgb3B0aW9ucy5kYXRhID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIG9wdGlvbnMuZGF0YSA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZWwuY2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgaWYgKGVsLmNoaWxkcmVuW2pdLnRhZ05hbWUgPT0gJ09QVEdST1VQJykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbC5jaGlsZHJlbltqXS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVsLmNoaWxkcmVuW2pdLmNoaWxkcmVuW2ldLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBlbC5jaGlsZHJlbltqXS5jaGlsZHJlbltpXS5pbm5lckhUTUwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwOiBlbC5jaGlsZHJlbltqXS5nZXRBdHRyaWJ1dGUoJ2xhYmVsJyksXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVsLmNoaWxkcmVuW2pdLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGVsLmNoaWxkcmVuW2pdLmlubmVySFRNTCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCEgb3B0aW9ucyB8fCBvcHRpb25zLm9uY2hhbmdlID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIG9wdGlvbnMub25jaGFuZ2UgPSBmdW5jdGlvbihhLGIsYyxkKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm11bHRpcGxlID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmouaXRlbXNbYl0uY2xhc3NMaXN0LmNvbnRhaW5zKCdqZHJvcGRvd24tc2VsZWN0ZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdC5vcHRpb25zW2JdLnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0Lm9wdGlvbnNbYl0ucmVtb3ZlQXR0cmlidXRlKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0LnZhbHVlID0gZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIENyZWF0ZSBESVZcclxuICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGVsLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRpdiwgZWwpO1xyXG4gICAgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIGVsID0gZGl2O1xyXG5cclxuICAgIHJldHVybiB7IGVsOmVsLCBvcHRpb25zOm9wdGlvbnMgfTtcclxufVxyXG5cclxualN1aXRlcy5lZGl0b3IgPSAoZnVuY3Rpb24oZWwsIG9wdGlvbnMpIHtcclxuICAgIC8vIE5ldyBpbnN0YW5jZVxyXG4gICAgdmFyIG9iaiA9IHsgdHlwZTonZWRpdG9yJyB9O1xyXG4gICAgb2JqLm9wdGlvbnMgPSB7fTtcclxuXHJcbiAgICAvLyBEZWZhdWx0IGNvbmZpZ3VyYXRpb25cclxuICAgIHZhciBkZWZhdWx0cyA9IHtcclxuICAgICAgICAvLyBJbml0aWFsIEhUTUwgY29udGVudFxyXG4gICAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICAgIC8vIEluaXRpYWwgc25pcHBldFxyXG4gICAgICAgIHNuaXBwZXQ6IG51bGwsXHJcbiAgICAgICAgLy8gQWRkIHRvb2xiYXJcclxuICAgICAgICB0b29sYmFyOiBudWxsLFxyXG4gICAgICAgIC8vIFdlYnNpdGUgcGFyc2VyIGlzIHRvIHJlYWQgd2Vic2l0ZXMgYW5kIGltYWdlcyBmcm9tIGNyb3NzIGRvbWFpblxyXG4gICAgICAgIHJlbW90ZVBhcnNlcjogbnVsbCxcclxuICAgICAgICAvLyBQbGFjZWhvbGRlclxyXG4gICAgICAgIHBsYWNlaG9sZGVyOiBudWxsLFxyXG4gICAgICAgIC8vIFBhcnNlIFVSTFxyXG4gICAgICAgIHBhcnNlVVJMOiBmYWxzZSxcclxuICAgICAgICBmaWx0ZXJQYXN0ZTogdHJ1ZSxcclxuICAgICAgICAvLyBBY2NlcHQgZHJvcCBmaWxlc1xyXG4gICAgICAgIGRyb3Bab25lOiBmYWxzZSxcclxuICAgICAgICBkcm9wQXNTbmlwcGV0OiBmYWxzZSxcclxuICAgICAgICBhY2NlcHRJbWFnZXM6IGZhbHNlLFxyXG4gICAgICAgIGFjY2VwdEZpbGVzOiBmYWxzZSxcclxuICAgICAgICBtYXhGaWxlU2l6ZTogNTAwMDAwMCxcclxuICAgICAgICBhbGxvd0ltYWdlUmVzaXplOiB0cnVlLFxyXG4gICAgICAgIC8vIFN0eWxlXHJcbiAgICAgICAgYm9yZGVyOiB0cnVlLFxyXG4gICAgICAgIHBhZGRpbmc6IHRydWUsXHJcbiAgICAgICAgbWF4SGVpZ2h0OiBudWxsLFxyXG4gICAgICAgIGhlaWdodDogbnVsbCxcclxuICAgICAgICBmb2N1czogZmFsc2UsXHJcbiAgICAgICAgLy8gRXZlbnRzXHJcbiAgICAgICAgb25jbGljazogbnVsbCxcclxuICAgICAgICBvbmZvY3VzOiBudWxsLFxyXG4gICAgICAgIG9uYmx1cjogbnVsbCxcclxuICAgICAgICBvbmxvYWQ6IG51bGwsXHJcbiAgICAgICAgb25rZXl1cDogbnVsbCxcclxuICAgICAgICBvbmtleWRvd246IG51bGwsXHJcbiAgICAgICAgb25jaGFuZ2U6IG51bGwsXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIExvb3AgdGhyb3VnaCBvdXIgb2JqZWN0XHJcbiAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBkZWZhdWx0cykge1xyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zW3Byb3BlcnR5XSA9IG9wdGlvbnNbcHJvcGVydHldO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zW3Byb3BlcnR5XSA9IGRlZmF1bHRzW3Byb3BlcnR5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUHJpdmF0ZSBjb250cm9sbGVyc1xyXG4gICAgdmFyIGltYWdlUmVzaXplID0gMDtcclxuICAgIHZhciBlZGl0b3JUaW1lciA9IG51bGw7XHJcbiAgICB2YXIgZWRpdG9yQWN0aW9uID0gbnVsbDtcclxuICAgIHZhciBmaWxlcyA9IFtdO1xyXG5cclxuICAgIC8vIE1ha2Ugc3VyZSBlbGVtZW50IGlzIGVtcHR5XHJcbiAgICBlbC5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICAvLyBLZWVwIHRoZSByZWZlcmVuY2UgZm9yIHRoZSBjb250YWluZXJcclxuICAgIG9iai5lbCA9IGVsO1xyXG5cclxuICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub25jbGljaykgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIGVsLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zLm9uY2xpY2soZWwsIG9iaiwgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFByZXBhcmUgY29udGFpbmVyXHJcbiAgICBlbC5jbGFzc0xpc3QuYWRkKCdqZWRpdG9yLWNvbnRhaW5lcicpO1xyXG5cclxuICAgIC8vIFBhZGRpbmdcclxuICAgIGlmIChvYmoub3B0aW9ucy5wYWRkaW5nID09IHRydWUpIHtcclxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdqZWRpdG9yLXBhZGRpbmcnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBCb3JkZXJcclxuICAgIGlmIChvYmoub3B0aW9ucy5ib3JkZXIgPT0gZmFsc2UpIHtcclxuICAgICAgICBlbC5zdHlsZS5ib3JkZXIgPSAnMHB4JztcclxuICAgIH1cclxuXHJcbiAgICAvLyBTbmlwcGV0XHJcbiAgICB2YXIgc25pcHBldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgc25pcHBldC5jbGFzc05hbWUgPSAnanNuaXBwZXQnO1xyXG4gICAgc25pcHBldC5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScsIGZhbHNlKTtcclxuXHJcbiAgICAvLyBUb29sYmFyXHJcbiAgICB2YXIgdG9vbGJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdG9vbGJhci5jbGFzc05hbWUgPSAnamVkaXRvci10b29sYmFyJztcclxuXHJcbiAgICAvLyBDcmVhdGUgZWRpdG9yXHJcbiAgICB2YXIgZWRpdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBlZGl0b3Iuc2V0QXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnLCB0cnVlKTtcclxuICAgIGVkaXRvci5zZXRBdHRyaWJ1dGUoJ3NwZWxsY2hlY2snLCBmYWxzZSk7XHJcbiAgICBlZGl0b3IuY2xhc3NOYW1lID0gJ2plZGl0b3InO1xyXG5cclxuICAgIC8vIFBsYWNlaG9sZGVyXHJcbiAgICBpZiAob2JqLm9wdGlvbnMucGxhY2Vob2xkZXIpIHtcclxuICAgICAgICBlZGl0b3Iuc2V0QXR0cmlidXRlKCdkYXRhLXBsYWNlaG9sZGVyJywgb2JqLm9wdGlvbnMucGxhY2Vob2xkZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1heCBoZWlnaHRcclxuICAgIGlmIChvYmoub3B0aW9ucy5tYXhIZWlnaHQgfHwgb2JqLm9wdGlvbnMuaGVpZ2h0KSB7XHJcbiAgICAgICAgZWRpdG9yLnN0eWxlLm92ZXJmbG93WSA9ICdhdXRvJztcclxuXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLm1heEhlaWdodCkge1xyXG4gICAgICAgICAgICBlZGl0b3Iuc3R5bGUubWF4SGVpZ2h0ID0gb2JqLm9wdGlvbnMubWF4SGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JqLm9wdGlvbnMuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIGVkaXRvci5zdHlsZS5oZWlnaHQgPSBvYmoub3B0aW9ucy5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFNldCBlZGl0b3IgaW5pdGlhbCB2YWx1ZVxyXG4gICAgaWYgKG9iai5vcHRpb25zLnZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gb2JqLm9wdGlvbnMudmFsdWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IGVsLmlubmVySFRNTCA/IGVsLmlubmVySFRNTCA6ICcnOyBcclxuICAgIH1cclxuXHJcbiAgICBpZiAoISB2YWx1ZSkge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT25jaGFuZ2UgZXZlbnQgY29udHJvbGxlcnNcclxuICAgICAqL1xyXG4gICAgdmFyIGNoYW5nZSA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9uY2hhbmdlKSA9PSAnZnVuY3Rpb24nKSB7IFxyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy5vbmNoYW5nZShlbCwgb2JqLCBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSB2YWx1ZVxyXG4gICAgICAgIG9iai5vcHRpb25zLnZhbHVlID0gb2JqLmdldERhdGEoKTtcclxuXHJcbiAgICAgICAgLy8gTGVtb25hZGUgSlNcclxuICAgICAgICBpZiAoZWwudmFsdWUgIT0gb2JqLm9wdGlvbnMudmFsdWUpIHtcclxuICAgICAgICAgICAgZWwudmFsdWUgPSBvYmoub3B0aW9ucy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZihlbC5vbmNoYW5nZSkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgZWwub25jaGFuZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGFuZ2UnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVsLnZhbHVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4dHJhY3QgaW1hZ2VzIGZyb20gYSBIVE1MIHN0cmluZ1xyXG4gICAgICovXHJcbiAgICB2YXIgZXh0cmFjdEltYWdlRnJvbUh0bWwgPSBmdW5jdGlvbihodG1sKSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIHRlbXAgZWxlbWVudFxyXG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkaXYuaW5uZXJIVE1MID0gaHRtbDtcclxuXHJcbiAgICAgICAgLy8gRXh0cmFjdCBpbWFnZXNcclxuICAgICAgICB2YXIgaW1nID0gZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpO1xyXG5cclxuICAgICAgICBpZiAoaW1nLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGltZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgb2JqLmFkZEltYWdlKGltZ1tpXS5zcmMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5zZXJ0IG5vZGUgYXQgY2FyZXRcclxuICAgICAqL1xyXG4gICAgdmFyIGluc2VydE5vZGVBdENhcmV0ID0gZnVuY3Rpb24obmV3Tm9kZSkge1xyXG4gICAgICAgIHZhciBzZWwsIHJhbmdlO1xyXG5cclxuICAgICAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbikge1xyXG4gICAgICAgICAgICBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmIChzZWwucmFuZ2VDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgcmFuZ2UgPSBzZWwuZ2V0UmFuZ2VBdCgwKTtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFRleHQgPSByYW5nZS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgcmFuZ2UuZGVsZXRlQ29udGVudHMoKTtcclxuICAgICAgICAgICAgICAgIHJhbmdlLmluc2VydE5vZGUobmV3Tm9kZSk7IFxyXG4gICAgICAgICAgICAgICAgLy8gbW92ZSB0aGUgY3Vyc29yIGFmdGVyIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgIHJhbmdlLnNldFN0YXJ0QWZ0ZXIobmV3Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICByYW5nZS5zZXRFbmRBZnRlcihuZXdOb2RlKTsgXHJcbiAgICAgICAgICAgICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICBzZWwuYWRkUmFuZ2UocmFuZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciB1cGRhdGVUb3RhbEltYWdlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBvID0gbnVsbDtcclxuICAgICAgICBpZiAobyA9IHNuaXBwZXQuY2hpbGRyZW5bMF0pIHtcclxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGlzIGEgZ3JpZFxyXG4gICAgICAgICAgICBpZiAoISBvLmNsYXNzTGlzdC5jb250YWlucygnanNsaWRlci1ncmlkJykpIHtcclxuICAgICAgICAgICAgICAgIG8uY2xhc3NMaXN0LmFkZCgnanNsaWRlci1ncmlkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gUXVhbnRpZnkgb2YgaW1hZ2VzXHJcbiAgICAgICAgICAgIHZhciBudW1iZXIgPSBvLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICAgICAgLy8gU2V0IHRoZSBjb25maWd1cmF0aW9uIG9mIHRoZSBncmlkXHJcbiAgICAgICAgICAgIG8uc2V0QXR0cmlidXRlKCdkYXRhLW51bWJlcicsIG51bWJlciA+IDQgPyA0IDogbnVtYmVyKTtcclxuICAgICAgICAgICAgLy8gVG90YWwgb2YgaW1hZ2VzIGluc2lkZSB0aGUgZ3JpZFxyXG4gICAgICAgICAgICBpZiAobnVtYmVyID4gNCkge1xyXG4gICAgICAgICAgICAgICAgby5zZXRBdHRyaWJ1dGUoJ2RhdGEtdG90YWwnLCBudW1iZXIgLSA0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG8ucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXRvdGFsJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBlbmQgaW1hZ2UgdG8gdGhlIHNuaXBwZXRcclxuICAgICAqL1xyXG4gICAgdmFyIGFwcGVuZEltYWdlID0gZnVuY3Rpb24oaW1hZ2UpIHtcclxuICAgICAgICBpZiAoISBzbmlwcGV0LmlubmVySFRNTCkge1xyXG4gICAgICAgICAgICBhcHBlbmRFbGVtZW50KHt9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc25pcHBldC5jaGlsZHJlblswXS5hcHBlbmRDaGlsZChpbWFnZSk7XHJcbiAgICAgICAgdXBkYXRlVG90YWxJbWFnZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGVuZCBzbmlwcGV0XHJcbiAgICAgKiBAUGFyYW0gb2JqZWN0IGRhdGFcclxuICAgICAqL1xyXG4gICAgdmFyIGFwcGVuZEVsZW1lbnQgPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgLy8gUmVzZXQgc25pcHBldFxyXG4gICAgICAgIHNuaXBwZXQuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gICAgICAgIC8vIEF0dHJpYnV0ZXNcclxuICAgICAgICB2YXIgYSA9IFsgJ2ltYWdlJywgJ3RpdGxlJywgJ2Rlc2NyaXB0aW9uJywgJ2hvc3QnLCAndXJsJyBdO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBkaXYuY2xhc3NOYW1lID0gJ2pzbmlwcGV0LScgKyBhW2ldO1xyXG4gICAgICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCdkYXRhLWsnLCBhW2ldKTtcclxuICAgICAgICAgICAgc25pcHBldC5hcHBlbmRDaGlsZChkaXYpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YVthW2ldXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFbaV0gPT0gJ2ltYWdlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIEFycmF5LmlzQXJyYXkoZGF0YS5pbWFnZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5pbWFnZSA9IFsgZGF0YS5pbWFnZSBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRhdGEuaW1hZ2UubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gZGF0YS5pbWFnZVtqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGltZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gZGF0YVthW2ldXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZWRpdG9yLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JyJykpO1xyXG4gICAgICAgIGVkaXRvci5hcHBlbmRDaGlsZChzbmlwcGV0KTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdmVyaWZ5RWRpdG9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KGVkaXRvclRpbWVyKTtcclxuICAgICAgICBlZGl0b3JUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBzbmlwcGV0ID0gZWRpdG9yLnF1ZXJ5U2VsZWN0b3IoJy5qc25pcHBldCcpO1xyXG4gICAgICAgICAgICBpZiAoISBzbmlwcGV0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IGVkaXRvci5pbm5lckhUTUwucmVwbGFjZSgvXFxuL2csICcgJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgICAgICAgICAgICAgIHZhciB0ZXh0ID0gY29udGFpbmVyLmlubmVyVGV4dDsgXHJcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0galN1aXRlcy5lZGl0b3IuZGV0ZWN0VXJsKHRleHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh1cmwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXJsWzBdLnN1YnN0cigtMykgPT0gJ2pwZycgfHwgdXJsWzBdLnN1YnN0cigtMykgPT0gJ3BuZycgfHwgdXJsWzBdLnN1YnN0cigtMykgPT0gJ2dpZicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5hZGRJbWFnZSh1cmxbMF0sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IGpTdWl0ZXMuZWRpdG9yLnlvdXR1YmVQYXJzZXIodXJsWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnBhcnNlV2Vic2l0ZSh1cmxbMF0sIGlkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAxMDAwKTtcclxuICAgIH1cclxuXHJcbiAgICBvYmoucGFyc2VDb250ZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmVyaWZ5RWRpdG9yKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLnBhcnNlV2Vic2l0ZSA9IGZ1bmN0aW9uKHVybCwgeW91dHViZUlkKSB7XHJcbiAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMucmVtb3RlUGFyc2VyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUaGUgcmVtb3RlUGFyc2VyIGlzIG5vdCBkZWZpbmVkJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gWW91dHViZSBkZWZpbml0aW9uc1xyXG4gICAgICAgICAgICBpZiAoeW91dHViZUlkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gJ2h0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9JyArIHlvdXR1YmVJZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHAgPSB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXHJcbiAgICAgICAgICAgICAgICBpbWFnZTogJycsXHJcbiAgICAgICAgICAgICAgICBob3N0OiB1cmwuc3BsaXQoJy8nKVsyXSxcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBqU3VpdGVzLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBvYmoub3B0aW9ucy5yZW1vdGVQYXJzZXIgKyBlbmNvZGVVUkkodXJsLnRyaW0oKSksXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aXRsZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQudGl0bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcC50aXRsZSA9IHJlc3VsdC50aXRsZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVzY3JpcHRpb25cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmRlc2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHAuZGVzY3JpcHRpb24gPSByZXN1bHQuZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEhvc3RcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmhvc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcC5ob3N0ID0gcmVzdWx0Lmhvc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVybFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQudXJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHAudXJsID0gcmVzdWx0LnVybDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQXBwZW5kIHNuaXBwZXRcclxuICAgICAgICAgICAgICAgICAgICBhcHBlbmRFbGVtZW50KHApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBpbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuaW1hZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmFkZEltYWdlKHJlc3VsdC5pbWFnZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHRbJ29nOmltYWdlJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmFkZEltYWdlKHJlc3VsdFsnb2c6aW1hZ2UnXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgZWRpdG9yIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIG9iai5zZXREYXRhID0gZnVuY3Rpb24oaHRtbCkge1xyXG4gICAgICAgIGVkaXRvci5pbm5lckhUTUwgPSBodG1sO1xyXG5cclxuICAgICAgICBpZiAob2JqLm9wdGlvbnMuZm9jdXMpIHtcclxuICAgICAgICAgICAgalN1aXRlcy5lZGl0b3Iuc2V0Q3Vyc29yKGVkaXRvciwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZXNldCBmaWxlcyBjb250YWluZXJcclxuICAgICAgICBmaWxlcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5nZXRGaWxlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBmID0gZWRpdG9yLnF1ZXJ5U2VsZWN0b3JBbGwoJy5qZmlsZScpO1xyXG4gICAgICAgIHZhciBkID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChmaWxlc1tmW2ldLnNyY10pIHtcclxuICAgICAgICAgICAgICAgIGQucHVzaChmaWxlc1tmW2ldLnNyY10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5nZXRUZXh0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGVkaXRvci5pbm5lclRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgZWRpdG9yIGRhdGFcclxuICAgICAqL1xyXG4gICAgb2JqLmdldERhdGEgPSBmdW5jdGlvbihqc29uKSB7XHJcbiAgICAgICAgaWYgKCEganNvbikge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGVkaXRvci5pbm5lckhUTUw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50IDogJycsXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEdldCBzbmlwcGV0XHJcbiAgICAgICAgICAgIGlmIChzbmlwcGV0LmlubmVySFRNTCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgIGRhdGEuc25pcHBldCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbmlwcGV0LmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IGtleSBmcm9tIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gc25pcHBldC5jaGlsZHJlbltpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PSAnaW1hZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBkYXRhLnNuaXBwZXQuaW1hZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNuaXBwZXQuaW1hZ2UgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCBhbGwgaW1hZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNuaXBwZXQuY2hpbGRyZW5baV0uY2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNuaXBwZXQuaW1hZ2UucHVzaChzbmlwcGV0LmNoaWxkcmVuW2ldLmNoaWxkcmVuW2pdLmdldEF0dHJpYnV0ZSgnc3JjJykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNuaXBwZXRba2V5XSA9IHNuaXBwZXQuY2hpbGRyZW5baV0uaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBHZXQgZmlsZXNcclxuICAgICAgICAgICAgdmFyIGYgPSBPYmplY3Qua2V5cyhmaWxlcyk7XHJcbiAgICAgICAgICAgIGlmIChmLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5maWxlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5maWxlcy5wdXNoKGZpbGVzW2ZbaV1dKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gR2V0IGNvbnRlbnRcclxuICAgICAgICAgICAgdmFyIHRleHQgPSBlZGl0b3IuaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC88YnI+L2csIFwiXFxuXCIpO1xyXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC88XFwvZGl2Pi9nLCBcIjxcXC9kaXY+XFxuXCIpO1xyXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC88KD86LnxcXG4pKj8+L2dtLCBcIlwiKTtcclxuICAgICAgICAgICAgZGF0YS5jb250ZW50ID0gdGV4dC50cmltKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXNldFxyXG4gICAgb2JqLnJlc2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZWRpdG9yLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIHNuaXBwZXQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgZmlsZXMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBvYmouYWRkUGRmID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmIChkYXRhLnJlc3VsdC5zdWJzdHIoMCw0KSAhPSAnZGF0YScpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBzb3VyY2UnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IDYwO1xyXG4gICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gNjA7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICBjYW52YXMudG9CbG9iKGZ1bmN0aW9uKGJsb2IpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgICAgICAgICAgbmV3SW1hZ2Uuc3JjID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgICAgICAgICAgICBuZXdJbWFnZS50aXRsZSA9IGRhdGEubmFtZTtcclxuICAgICAgICAgICAgICAgIG5ld0ltYWdlLmNsYXNzTmFtZSA9ICdqZmlsZSBwZGYnO1xyXG5cclxuICAgICAgICAgICAgICAgIGZpbGVzW25ld0ltYWdlLnNyY10gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZTogbmV3SW1hZ2Uuc3JjLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbjogJ3BkZicsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogZGF0YS5yZXN1bHQsXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaW5zZXJ0Tm9kZUF0Q2FyZXQobmV3SW1hZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLmFkZEltYWdlID0gZnVuY3Rpb24oc3JjLCBhc1NuaXBwZXQpIHtcclxuICAgICAgICBpZiAoISBzcmMpIHtcclxuICAgICAgICAgICAgc3JjID0gJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc3JjLnN1YnN0cigwLDQpICE9ICdkYXRhJyAmJiAhIG9iai5vcHRpb25zLnJlbW90ZVBhcnNlcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdyZW1vdGVQYXJzZXIgbm90IGRlZmluZWQgaW4geW91ciBpbml0aWFsaXphdGlvbicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgdG8gcHJvY2VzcyBjcm9zcyBkb21haW4gaW1hZ2VzXHJcbiAgICAgICAgICAgIGlmIChzcmMuc3Vic3RyKDAsNCkgPT0gJ2RhdGEnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXh0ZW5zaW9uID0gc3JjLnNwbGl0KCc7JylcclxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbiA9IGV4dGVuc2lvblswXS5zcGxpdCgnLycpO1xyXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uID0gZXh0ZW5zaW9uWzFdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGV4dGVuc2lvbiA9IHNyYy5zdWJzdHIoc3JjLmxhc3RJbmRleE9mKCcuJykgKyAxKTtcclxuICAgICAgICAgICAgICAgIC8vIFdvcmsgZm9yIGNyb3NzIGJyb3dzZXJzXHJcbiAgICAgICAgICAgICAgICBzcmMgPSBvYmoub3B0aW9ucy5yZW1vdGVQYXJzZXIgKyBzcmM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuXHJcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiBvbmxvYWQoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSBpbWcud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaW1nLmhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYW52YXMudG9CbG9iKGZ1bmN0aW9uKGJsb2IpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3SW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdJbWFnZS5zcmMgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdJbWFnZS5jbGFzc0xpc3QuYWRkKCdqZmlsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0ltYWdlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnOTAwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZXNbbmV3SW1hZ2Uuc3JjXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTogbmV3SW1hZ2Uuc3JjLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb246IGV4dGVuc2lvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY2FudmFzLnRvRGF0YVVSTCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmRyb3BBc1NuaXBwZXQgfHwgYXNTbmlwcGV0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZEltYWdlKG5ld0ltYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVzdCB0byB1bmRlcnN0YW5kIHRoZSBhdHRhY2htZW50IGlzIHBhcnQgb2YgYSBzbmlwcGV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVzW25ld0ltYWdlLnNyY10uc25pcHBldCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0Tm9kZUF0Q2FyZXQobmV3SW1hZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGltZy5zcmMgPSBzcmM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9iai5hZGRGaWxlID0gZnVuY3Rpb24oZmlsZXMpIHtcclxuICAgICAgICB2YXIgcmVhZGVyID0gW107XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGZpbGVzW2ldLnNpemUgPiBvYmoub3B0aW9ucy5tYXhGaWxlU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ1RoZSBmaWxlIGlzIHRvbyBiaWcnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIE9ubHkgUERGIG9yIEltYWdlc1xyXG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBmaWxlc1tpXS50eXBlLnNwbGl0KCcvJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVbMF0gPT0gJ2ltYWdlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlWzFdID09ICdwZGYnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IDI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGZpbGVcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXJbaV0gPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlcltpXS5pbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyW2ldLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlcltpXS5uYW1lID0gZmlsZXNbaV0ubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXJbaV0uZGF0ZSA9IGZpbGVzW2ldLmxhc3RNb2RpZmllZDtcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXJbaV0uc2l6ZSA9IGZpbGVzW2ldLnNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCByZXN1bHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEudGFyZ2V0LnR5cGUgPT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmFjY2VwdEZpbGVzID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouYWRkUGRmKGRhdGEudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5hZGRJbWFnZShkYXRhLnRhcmdldC5yZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZWFkZXJbaV0ucmVhZEFzRGF0YVVSTChmaWxlc1tpXSlcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1RoZSBleHRlbnNpb24gaXMgbm90IGFsbG93ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBEZXN0cm95XHJcbiAgICBvYmouZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGVkaXRvci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZWRpdG9yTW91c2VVcCk7XHJcbiAgICAgICAgZWRpdG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGVkaXRvck1vdXNlRG93bik7XHJcbiAgICAgICAgZWRpdG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGVkaXRvck1vdXNlTW92ZSk7XHJcbiAgICAgICAgZWRpdG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZWRpdG9yS2V5VXApO1xyXG4gICAgICAgIGVkaXRvci5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZWRpdG9yS2V5RG93bik7XHJcbiAgICAgICAgZWRpdG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIGVkaXRvckRyYWdTdGFydCk7XHJcbiAgICAgICAgZWRpdG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIGVkaXRvckRyYWdFbnRlcik7XHJcbiAgICAgICAgZWRpdG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgZWRpdG9yRHJhZ092ZXIpO1xyXG4gICAgICAgIGVkaXRvci5yZW1vdmVFdmVudExpc3RlbmVyKCdkcm9wJywgZWRpdG9yRHJvcCk7XHJcbiAgICAgICAgZWRpdG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgZWRpdG9yUGFzdGUpO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9uYmx1cikgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBlZGl0b3IucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIGVkaXRvckJsdXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9uZm9jdXMpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgZWRpdG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZWRpdG9yRm9jdXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZWwuZWRpdG9yID0gbnVsbDtcclxuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdqZWRpdG9yLWNvbnRhaW5lcicpO1xyXG5cclxuICAgICAgICB0b29sYmFyLnJlbW92ZSgpO1xyXG4gICAgICAgIHNuaXBwZXQucmVtb3ZlKCk7XHJcbiAgICAgICAgZWRpdG9yLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBpc0xldHRlciA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgICAgICB2YXIgcmVnZXggPSAvKFtcXHUwMDQxLVxcdTAwNUFcXHUwMDYxLVxcdTAwN0FcXHUwMEFBXFx1MDBCNVxcdTAwQkFcXHUwMEMwLVxcdTAwRDZcXHUwMEQ4LVxcdTAwRjZcXHUwMEY4LVxcdTAyQzFcXHUwMkM2LVxcdTAyRDFcXHUwMkUwLVxcdTAyRTRcXHUwMkVDXFx1MDJFRVxcdTAzNzAtXFx1MDM3NFxcdTAzNzZcXHUwMzc3XFx1MDM3QS1cXHUwMzdEXFx1MDM4NlxcdTAzODgtXFx1MDM4QVxcdTAzOENcXHUwMzhFLVxcdTAzQTFcXHUwM0EzLVxcdTAzRjVcXHUwM0Y3LVxcdTA0ODFcXHUwNDhBLVxcdTA1MjdcXHUwNTMxLVxcdTA1NTZcXHUwNTU5XFx1MDU2MS1cXHUwNTg3XFx1MDVEMC1cXHUwNUVBXFx1MDVGMC1cXHUwNUYyXFx1MDYyMC1cXHUwNjRBXFx1MDY2RVxcdTA2NkZcXHUwNjcxLVxcdTA2RDNcXHUwNkQ1XFx1MDZFNVxcdTA2RTZcXHUwNkVFXFx1MDZFRlxcdTA2RkEtXFx1MDZGQ1xcdTA2RkZcXHUwNzEwXFx1MDcxMi1cXHUwNzJGXFx1MDc0RC1cXHUwN0E1XFx1MDdCMVxcdTA3Q0EtXFx1MDdFQVxcdTA3RjRcXHUwN0Y1XFx1MDdGQVxcdTA4MDAtXFx1MDgxNVxcdTA4MUFcXHUwODI0XFx1MDgyOFxcdTA4NDAtXFx1MDg1OFxcdTA4QTBcXHUwOEEyLVxcdTA4QUNcXHUwOTA0LVxcdTA5MzlcXHUwOTNEXFx1MDk1MFxcdTA5NTgtXFx1MDk2MVxcdTA5NzEtXFx1MDk3N1xcdTA5NzktXFx1MDk3RlxcdTA5ODUtXFx1MDk4Q1xcdTA5OEZcXHUwOTkwXFx1MDk5My1cXHUwOUE4XFx1MDlBQS1cXHUwOUIwXFx1MDlCMlxcdTA5QjYtXFx1MDlCOVxcdTA5QkRcXHUwOUNFXFx1MDlEQ1xcdTA5RERcXHUwOURGLVxcdTA5RTFcXHUwOUYwXFx1MDlGMVxcdTBBMDUtXFx1MEEwQVxcdTBBMEZcXHUwQTEwXFx1MEExMy1cXHUwQTI4XFx1MEEyQS1cXHUwQTMwXFx1MEEzMlxcdTBBMzNcXHUwQTM1XFx1MEEzNlxcdTBBMzhcXHUwQTM5XFx1MEE1OS1cXHUwQTVDXFx1MEE1RVxcdTBBNzItXFx1MEE3NFxcdTBBODUtXFx1MEE4RFxcdTBBOEYtXFx1MEE5MVxcdTBBOTMtXFx1MEFBOFxcdTBBQUEtXFx1MEFCMFxcdTBBQjJcXHUwQUIzXFx1MEFCNS1cXHUwQUI5XFx1MEFCRFxcdTBBRDBcXHUwQUUwXFx1MEFFMVxcdTBCMDUtXFx1MEIwQ1xcdTBCMEZcXHUwQjEwXFx1MEIxMy1cXHUwQjI4XFx1MEIyQS1cXHUwQjMwXFx1MEIzMlxcdTBCMzNcXHUwQjM1LVxcdTBCMzlcXHUwQjNEXFx1MEI1Q1xcdTBCNURcXHUwQjVGLVxcdTBCNjFcXHUwQjcxXFx1MEI4M1xcdTBCODUtXFx1MEI4QVxcdTBCOEUtXFx1MEI5MFxcdTBCOTItXFx1MEI5NVxcdTBCOTlcXHUwQjlBXFx1MEI5Q1xcdTBCOUVcXHUwQjlGXFx1MEJBM1xcdTBCQTRcXHUwQkE4LVxcdTBCQUFcXHUwQkFFLVxcdTBCQjlcXHUwQkQwXFx1MEMwNS1cXHUwQzBDXFx1MEMwRS1cXHUwQzEwXFx1MEMxMi1cXHUwQzI4XFx1MEMyQS1cXHUwQzMzXFx1MEMzNS1cXHUwQzM5XFx1MEMzRFxcdTBDNThcXHUwQzU5XFx1MEM2MFxcdTBDNjFcXHUwQzg1LVxcdTBDOENcXHUwQzhFLVxcdTBDOTBcXHUwQzkyLVxcdTBDQThcXHUwQ0FBLVxcdTBDQjNcXHUwQ0I1LVxcdTBDQjlcXHUwQ0JEXFx1MENERVxcdTBDRTBcXHUwQ0UxXFx1MENGMVxcdTBDRjJcXHUwRDA1LVxcdTBEMENcXHUwRDBFLVxcdTBEMTBcXHUwRDEyLVxcdTBEM0FcXHUwRDNEXFx1MEQ0RVxcdTBENjBcXHUwRDYxXFx1MEQ3QS1cXHUwRDdGXFx1MEQ4NS1cXHUwRDk2XFx1MEQ5QS1cXHUwREIxXFx1MERCMy1cXHUwREJCXFx1MERCRFxcdTBEQzAtXFx1MERDNlxcdTBFMDEtXFx1MEUzMFxcdTBFMzJcXHUwRTMzXFx1MEU0MC1cXHUwRTQ2XFx1MEU4MVxcdTBFODJcXHUwRTg0XFx1MEU4N1xcdTBFODhcXHUwRThBXFx1MEU4RFxcdTBFOTQtXFx1MEU5N1xcdTBFOTktXFx1MEU5RlxcdTBFQTEtXFx1MEVBM1xcdTBFQTVcXHUwRUE3XFx1MEVBQVxcdTBFQUJcXHUwRUFELVxcdTBFQjBcXHUwRUIyXFx1MEVCM1xcdTBFQkRcXHUwRUMwLVxcdTBFQzRcXHUwRUM2XFx1MEVEQy1cXHUwRURGXFx1MEYwMFxcdTBGNDAtXFx1MEY0N1xcdTBGNDktXFx1MEY2Q1xcdTBGODgtXFx1MEY4Q1xcdTEwMDAtXFx1MTAyQVxcdTEwM0ZcXHUxMDUwLVxcdTEwNTVcXHUxMDVBLVxcdTEwNURcXHUxMDYxXFx1MTA2NVxcdTEwNjZcXHUxMDZFLVxcdTEwNzBcXHUxMDc1LVxcdTEwODFcXHUxMDhFXFx1MTBBMC1cXHUxMEM1XFx1MTBDN1xcdTEwQ0RcXHUxMEQwLVxcdTEwRkFcXHUxMEZDLVxcdTEyNDhcXHUxMjRBLVxcdTEyNERcXHUxMjUwLVxcdTEyNTZcXHUxMjU4XFx1MTI1QS1cXHUxMjVEXFx1MTI2MC1cXHUxMjg4XFx1MTI4QS1cXHUxMjhEXFx1MTI5MC1cXHUxMkIwXFx1MTJCMi1cXHUxMkI1XFx1MTJCOC1cXHUxMkJFXFx1MTJDMFxcdTEyQzItXFx1MTJDNVxcdTEyQzgtXFx1MTJENlxcdTEyRDgtXFx1MTMxMFxcdTEzMTItXFx1MTMxNVxcdTEzMTgtXFx1MTM1QVxcdTEzODAtXFx1MTM4RlxcdTEzQTAtXFx1MTNGNFxcdTE0MDEtXFx1MTY2Q1xcdTE2NkYtXFx1MTY3RlxcdTE2ODEtXFx1MTY5QVxcdTE2QTAtXFx1MTZFQVxcdTE3MDAtXFx1MTcwQ1xcdTE3MEUtXFx1MTcxMVxcdTE3MjAtXFx1MTczMVxcdTE3NDAtXFx1MTc1MVxcdTE3NjAtXFx1MTc2Q1xcdTE3NkUtXFx1MTc3MFxcdTE3ODAtXFx1MTdCM1xcdTE3RDdcXHUxN0RDXFx1MTgyMC1cXHUxODc3XFx1MTg4MC1cXHUxOEE4XFx1MThBQVxcdTE4QjAtXFx1MThGNVxcdTE5MDAtXFx1MTkxQ1xcdTE5NTAtXFx1MTk2RFxcdTE5NzAtXFx1MTk3NFxcdTE5ODAtXFx1MTlBQlxcdTE5QzEtXFx1MTlDN1xcdTFBMDAtXFx1MUExNlxcdTFBMjAtXFx1MUE1NFxcdTFBQTdcXHUxQjA1LVxcdTFCMzNcXHUxQjQ1LVxcdTFCNEJcXHUxQjgzLVxcdTFCQTBcXHUxQkFFXFx1MUJBRlxcdTFCQkEtXFx1MUJFNVxcdTFDMDAtXFx1MUMyM1xcdTFDNEQtXFx1MUM0RlxcdTFDNUEtXFx1MUM3RFxcdTFDRTktXFx1MUNFQ1xcdTFDRUUtXFx1MUNGMVxcdTFDRjVcXHUxQ0Y2XFx1MUQwMC1cXHUxREJGXFx1MUUwMC1cXHUxRjE1XFx1MUYxOC1cXHUxRjFEXFx1MUYyMC1cXHUxRjQ1XFx1MUY0OC1cXHUxRjREXFx1MUY1MC1cXHUxRjU3XFx1MUY1OVxcdTFGNUJcXHUxRjVEXFx1MUY1Ri1cXHUxRjdEXFx1MUY4MC1cXHUxRkI0XFx1MUZCNi1cXHUxRkJDXFx1MUZCRVxcdTFGQzItXFx1MUZDNFxcdTFGQzYtXFx1MUZDQ1xcdTFGRDAtXFx1MUZEM1xcdTFGRDYtXFx1MUZEQlxcdTFGRTAtXFx1MUZFQ1xcdTFGRjItXFx1MUZGNFxcdTFGRjYtXFx1MUZGQ1xcdTIwNzFcXHUyMDdGXFx1MjA5MC1cXHUyMDlDXFx1MjEwMlxcdTIxMDdcXHUyMTBBLVxcdTIxMTNcXHUyMTE1XFx1MjExOS1cXHUyMTFEXFx1MjEyNFxcdTIxMjZcXHUyMTI4XFx1MjEyQS1cXHUyMTJEXFx1MjEyRi1cXHUyMTM5XFx1MjEzQy1cXHUyMTNGXFx1MjE0NS1cXHUyMTQ5XFx1MjE0RVxcdTIxODNcXHUyMTg0XFx1MkMwMC1cXHUyQzJFXFx1MkMzMC1cXHUyQzVFXFx1MkM2MC1cXHUyQ0U0XFx1MkNFQi1cXHUyQ0VFXFx1MkNGMlxcdTJDRjNcXHUyRDAwLVxcdTJEMjVcXHUyRDI3XFx1MkQyRFxcdTJEMzAtXFx1MkQ2N1xcdTJENkZcXHUyRDgwLVxcdTJEOTZcXHUyREEwLVxcdTJEQTZcXHUyREE4LVxcdTJEQUVcXHUyREIwLVxcdTJEQjZcXHUyREI4LVxcdTJEQkVcXHUyREMwLVxcdTJEQzZcXHUyREM4LVxcdTJEQ0VcXHUyREQwLVxcdTJERDZcXHUyREQ4LVxcdTJEREVcXHUyRTJGXFx1MzAwNVxcdTMwMDZcXHUzMDMxLVxcdTMwMzVcXHUzMDNCXFx1MzAzQ1xcdTMwNDEtXFx1MzA5NlxcdTMwOUQtXFx1MzA5RlxcdTMwQTEtXFx1MzBGQVxcdTMwRkMtXFx1MzBGRlxcdTMxMDUtXFx1MzEyRFxcdTMxMzEtXFx1MzE4RVxcdTMxQTAtXFx1MzFCQVxcdTMxRjAtXFx1MzFGRlxcdTM0MDAtXFx1NERCNVxcdTRFMDAtXFx1OUZDQ1xcdUEwMDAtXFx1QTQ4Q1xcdUE0RDAtXFx1QTRGRFxcdUE1MDAtXFx1QTYwQ1xcdUE2MTAtXFx1QTYxRlxcdUE2MkFcXHVBNjJCXFx1QTY0MC1cXHVBNjZFXFx1QTY3Ri1cXHVBNjk3XFx1QTZBMC1cXHVBNkU1XFx1QTcxNy1cXHVBNzFGXFx1QTcyMi1cXHVBNzg4XFx1QTc4Qi1cXHVBNzhFXFx1QTc5MC1cXHVBNzkzXFx1QTdBMC1cXHVBN0FBXFx1QTdGOC1cXHVBODAxXFx1QTgwMy1cXHVBODA1XFx1QTgwNy1cXHVBODBBXFx1QTgwQy1cXHVBODIyXFx1QTg0MC1cXHVBODczXFx1QTg4Mi1cXHVBOEIzXFx1QThGMi1cXHVBOEY3XFx1QThGQlxcdUE5MEEtXFx1QTkyNVxcdUE5MzAtXFx1QTk0NlxcdUE5NjAtXFx1QTk3Q1xcdUE5ODQtXFx1QTlCMlxcdUE5Q0ZcXHVBQTAwLVxcdUFBMjhcXHVBQTQwLVxcdUFBNDJcXHVBQTQ0LVxcdUFBNEJcXHVBQTYwLVxcdUFBNzZcXHVBQTdBXFx1QUE4MC1cXHVBQUFGXFx1QUFCMVxcdUFBQjVcXHVBQUI2XFx1QUFCOS1cXHVBQUJEXFx1QUFDMFxcdUFBQzJcXHVBQURCLVxcdUFBRERcXHVBQUUwLVxcdUFBRUFcXHVBQUYyLVxcdUFBRjRcXHVBQjAxLVxcdUFCMDZcXHVBQjA5LVxcdUFCMEVcXHVBQjExLVxcdUFCMTZcXHVBQjIwLVxcdUFCMjZcXHVBQjI4LVxcdUFCMkVcXHVBQkMwLVxcdUFCRTJcXHVBQzAwLVxcdUQ3QTNcXHVEN0IwLVxcdUQ3QzZcXHVEN0NCLVxcdUQ3RkJcXHVGOTAwLVxcdUZBNkRcXHVGQTcwLVxcdUZBRDlcXHVGQjAwLVxcdUZCMDZcXHVGQjEzLVxcdUZCMTdcXHVGQjFEXFx1RkIxRi1cXHVGQjI4XFx1RkIyQS1cXHVGQjM2XFx1RkIzOC1cXHVGQjNDXFx1RkIzRVxcdUZCNDBcXHVGQjQxXFx1RkI0M1xcdUZCNDRcXHVGQjQ2LVxcdUZCQjFcXHVGQkQzLVxcdUZEM0RcXHVGRDUwLVxcdUZEOEZcXHVGRDkyLVxcdUZEQzdcXHVGREYwLVxcdUZERkJcXHVGRTcwLVxcdUZFNzRcXHVGRTc2LVxcdUZFRkNcXHVGRjIxLVxcdUZGM0FcXHVGRjQxLVxcdUZGNUFcXHVGRjY2LVxcdUZGQkVcXHVGRkMyLVxcdUZGQzdcXHVGRkNBLVxcdUZGQ0ZcXHVGRkQyLVxcdUZGRDdcXHVGRkRBLVxcdUZGRENdKykvZztcclxuICAgICAgICByZXR1cm4gc3RyLm1hdGNoKHJlZ2V4KSA/IDEgOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEV2ZW50IGhhbmRsZXJzXHJcbiAgICB2YXIgZWRpdG9yTW91c2VVcCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoZWRpdG9yQWN0aW9uICYmIGVkaXRvckFjdGlvbi5lKSB7XHJcbiAgICAgICAgICAgIGVkaXRvckFjdGlvbi5lLmNsYXNzTGlzdC5yZW1vdmUoJ3Jlc2l6aW5nJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlZGl0b3JBY3Rpb24gPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZWRpdG9yTW91c2VEb3duID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIHZhciBjbG9zZSA9IGZ1bmN0aW9uKHNuaXBwZXQpIHtcclxuICAgICAgICAgICAgdmFyIHJlY3QgPSBzbmlwcGV0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICBpZiAocmVjdC53aWR0aCAtIChlLmNsaWVudFggLSByZWN0LmxlZnQpIDwgNDAgJiYgZS5jbGllbnRZIC0gcmVjdC50b3AgPCA0MCkge1xyXG4gICAgICAgICAgICAgICAgc25pcHBldC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgICAgIHNuaXBwZXQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lID09ICdJTUcnKSB7XHJcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5zdHlsZS5jdXJzb3IpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZWN0ID0gZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgICAgICBlZGl0b3JBY3Rpb24gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZTogZS50YXJnZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgeDogZS5jbGllbnRYLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6IGUuY2xpZW50WSxcclxuICAgICAgICAgICAgICAgICAgICB3OiByZWN0LndpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGg6IHJlY3QuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIGQ6IGUudGFyZ2V0LnN0eWxlLmN1cnNvcixcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoISBlLnRhcmdldC53aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LndpZHRoID0gcmVjdC53aWR0aCArICdweCc7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCEgZS50YXJnZXQuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuaGVpZ2h0ID0gcmVjdC5oZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHMucmFuZ2VDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcy5yYW5nZUNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcy5yZW1vdmVSYW5nZShzLmdldFJhbmdlQXQoaSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdyZXNpemluZycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yQWN0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7IFxyXG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqc25pcHBldCcpKSB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZShlLnRhcmdldCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2pzbmlwcGV0JykpIHtcclxuICAgICAgICAgICAgICAgIGNsb3NlKGUudGFyZ2V0LnBhcmVudE5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlZGl0b3JBY3Rpb24gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZWRpdG9yTW91c2VNb3ZlID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lID09ICdJTUcnICYmICEgZS50YXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2pzbmlwcGV0LWltYWdlJykgJiYgb2JqLm9wdGlvbnMuYWxsb3dJbWFnZVJlc2l6ZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JykpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZWN0ID0gZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5jbGllbnRZIC0gcmVjdC50b3AgPCA1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY3Qud2lkdGggLSAoZS5jbGllbnRYIC0gcmVjdC5sZWZ0KSA8IDUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuY3Vyc29yID0gJ25lLXJlc2l6ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmNsaWVudFggLSByZWN0LmxlZnQgPCA1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmN1cnNvciA9ICdudy1yZXNpemUnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmN1cnNvciA9ICduLXJlc2l6ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZWN0LmhlaWdodCAtIChlLmNsaWVudFkgLSByZWN0LnRvcCkgPCA1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY3Qud2lkdGggLSAoZS5jbGllbnRYIC0gcmVjdC5sZWZ0KSA8IDUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuY3Vyc29yID0gJ3NlLXJlc2l6ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmNsaWVudFggLSByZWN0LmxlZnQgPCA1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmN1cnNvciA9ICdzdy1yZXNpemUnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmN1cnNvciA9ICdzLXJlc2l6ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZWN0LndpZHRoIC0gKGUuY2xpZW50WCAtIHJlY3QubGVmdCkgPCA1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuY3Vyc29yID0gJ2UtcmVzaXplJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5jbGllbnRYIC0gcmVjdC5sZWZ0IDwgNSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmN1cnNvciA9ICd3LXJlc2l6ZSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmN1cnNvciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBNb3ZlXHJcbiAgICAgICAgaWYgKGUud2hpY2ggPT0gMSAmJiBlZGl0b3JBY3Rpb24gJiYgZWRpdG9yQWN0aW9uLmQpIHtcclxuICAgICAgICAgICAgaWYgKGVkaXRvckFjdGlvbi5kID09ICdlLXJlc2l6ZScgfHwgZWRpdG9yQWN0aW9uLmQgPT0gJ25lLXJlc2l6ZScgfHwgIGVkaXRvckFjdGlvbi5kID09ICdzZS1yZXNpemUnKSB7XHJcbiAgICAgICAgICAgICAgICBlZGl0b3JBY3Rpb24uZS53aWR0aCA9IChlZGl0b3JBY3Rpb24udyArIChlLmNsaWVudFggLSBlZGl0b3JBY3Rpb24ueCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0hlaWdodCA9IChlLmNsaWVudFggLSBlZGl0b3JBY3Rpb24ueCkgKiAoZWRpdG9yQWN0aW9uLmggLyBlZGl0b3JBY3Rpb24udyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yQWN0aW9uLmUuaGVpZ2h0ID0gZWRpdG9yQWN0aW9uLmggKyBuZXdIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdIZWlnaHQgPSAgbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCEgbmV3SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWRpdG9yQWN0aW9uLmQgPT0gJ3MtcmVzaXplJyB8fCBlZGl0b3JBY3Rpb24uZCA9PSAnc2UtcmVzaXplJyB8fCBlZGl0b3JBY3Rpb24uZCA9PSAnc3ctcmVzaXplJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGUuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yQWN0aW9uLmUuaGVpZ2h0ID0gZWRpdG9yQWN0aW9uLmggKyAoZS5jbGllbnRZIC0gZWRpdG9yQWN0aW9uLnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZWRpdG9yS2V5VXAgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKCEgZWRpdG9yLmlubmVySFRNTCkge1xyXG4gICAgICAgICAgICBlZGl0b3IuaW5uZXJIVE1MID0gJzxkaXY+PGJyPjwvZGl2Pic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9ua2V5dXApID09ICdmdW5jdGlvbicpIHsgXHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zLm9ua2V5dXAoZWwsIG9iaiwgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICB2YXIgZWRpdG9yS2V5RG93biA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAvLyBDaGVjayBmb3IgVVJMXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLnBhcnNlVVJMID09IHRydWUpIHtcclxuICAgICAgICAgICAgdmVyaWZ5RWRpdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9ua2V5ZG93bikgPT0gJ2Z1bmN0aW9uJykgeyBcclxuICAgICAgICAgICAgb2JqLm9wdGlvbnMub25rZXlkb3duKGVsLCBvYmosIGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGUua2V5ID09ICdEZWxldGUnKSB7XHJcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lID09ICdJTUcnICYmIGUudGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdqc25pcHBldC1pbWFnZScpKSB7XHJcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVRvdGFsSW1hZ2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRWxlbWVudHMgdG8gYmUgcmVtb3ZlZFxyXG4gICAgdmFyIHJlbW92ZSA9IFtIVE1MVW5rbm93bkVsZW1lbnQsSFRNTEF1ZGlvRWxlbWVudCxIVE1MRW1iZWRFbGVtZW50LEhUTUxJRnJhbWVFbGVtZW50LEhUTUxUZXh0QXJlYUVsZW1lbnQsSFRNTElucHV0RWxlbWVudCxIVE1MU2NyaXB0RWxlbWVudF07XHJcblxyXG4gICAgLy8gVmFsaWQgcHJvcGVydGllc1xyXG4gICAgdmFyIHZhbGlkUHJvcGVydHkgPSBbJ3dpZHRoJywgJ2hlaWdodCcsICdhbGlnbicsICdib3JkZXInLCAnc3JjJywgJ3RhYmluZGV4J107XHJcblxyXG4gICAgLy8gVmFsaWQgQ1NTIGF0dHJpYnV0ZXNcclxuICAgIHZhciB2YWxpZFN0eWxlID0gWydjb2xvcicsICdmb250LXdlaWdodCcsICdmb250LXNpemUnLCAnYmFja2dyb3VuZCcsICdiYWNrZ3JvdW5kLWNvbG9yJywgJ21hcmdpbiddO1xyXG5cclxuICAgIHZhciBwYXJzZSA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgIC8vIFJlbW92ZSBhdHRyaWJ1dGVzXHJcbiAgICAgICBpZiAoZWxlbWVudC5hdHRyaWJ1dGVzICYmIGVsZW1lbnQuYXR0cmlidXRlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICB2YXIgaW1hZ2UgPSBudWxsO1xyXG4gICAgICAgICAgIHZhciBzdHlsZSA9IG51bGw7XHJcbiAgICAgICAgICAgLy8gUHJvY2VzcyBzdHlsZSBhdHRyaWJ1dGVcclxuICAgICAgICAgICB2YXIgZWxlbWVudFN0eWxlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3N0eWxlJyk7XHJcbiAgICAgICAgICAgaWYgKGVsZW1lbnRTdHlsZSkge1xyXG4gICAgICAgICAgICAgICBzdHlsZSA9IFtdO1xyXG4gICAgICAgICAgICAgICB2YXIgdCA9IGVsZW1lbnRTdHlsZS5zcGxpdCgnOycpO1xyXG4gICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHQubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgIHZhciB2ID0gdFtqXS50cmltKCkuc3BsaXQoJzonKTtcclxuICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZFN0eWxlLmluZGV4T2YodlswXS50cmltKCkpID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICB2YXIgayA9IHYuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IHYuam9pbignOicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHN0eWxlLnB1c2goayArICc6JyArIHYpO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIC8vIFByb2Nlc3MgaW1hZ2VcclxuICAgICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lLnRvVXBwZXJDYXNlKCkgPT0gJ0lNRycpIHtcclxuICAgICAgICAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMuYWNjZXB0SW1hZ2VzIHx8ICEgZWxlbWVudC5zcmMpIHtcclxuICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGlzIGRhdGFcclxuICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICc5MDAnKTtcclxuICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGF0dHJpYnV0ZXMgZm9yIHBlcnNpc3RhbmNlXHJcbiAgICAgICAgICAgICAgICAgICBvYmouYWRkSW1hZ2UoZWxlbWVudC5zcmMpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIC8vIFJlbW92ZSBhdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgdmFyIGF0dHIgPSBbXTtcclxuICAgICAgICAgICB2YXIgbnVtQXR0cmlidXRlcyA9IGVsZW1lbnQuYXR0cmlidXRlcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgIGlmIChudW1BdHRyaWJ1dGVzID4gMCkge1xyXG4gICAgICAgICAgICAgICBmb3IgKHZhciBpID0gbnVtQXR0cmlidXRlczsgaSA+PSAwIDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICBhdHRyLnB1c2goZWxlbWVudC5hdHRyaWJ1dGVzW2ldLm5hbWUpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGF0dHIuZm9yRWFjaChmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRQcm9wZXJ0eS5pbmRleE9mKHYpID09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUodik7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgICBlbGVtZW50LnN0eWxlID0gJyc7XHJcbiAgICAgICAgICAgLy8gQWRkIHZhbGlkIHN0eWxlXHJcbiAgICAgICAgICAgaWYgKHN0eWxlICYmIHN0eWxlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBzdHlsZS5qb2luKCc7JykpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH1cclxuICAgICAgIC8vIFBhcnNlIGNoaWxkcmVuXHJcbiAgICAgICBpZiAoZWxlbWVudC5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgcGFyc2UoZWxlbWVudC5jaGlsZHJlbltpXSk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfVxyXG5cclxuICAgICAgIGlmIChyZW1vdmUuaW5kZXhPZihlbGVtZW50LmNvbnN0cnVjdG9yKSA+PSAwKSB7XHJcbiAgICAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZmlsdGVyID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UobmV3IFJlZ0V4cCgnPCEtLSguKj8pLS0+JywgJ2dzaScpLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XHJcbiAgICAgICAgdmFyIGQgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKGRhdGEsIFwidGV4dC9odG1sXCIpO1xyXG4gICAgICAgIHBhcnNlKGQpO1xyXG4gICAgICAgIHZhciBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIHNwYW4uaW5uZXJIVE1MID0gZC5maXJzdENoaWxkLmlubmVySFRNTDtcclxuICAgICAgICByZXR1cm4gc3BhbjtcclxuICAgIH0gXHJcblxyXG4gICAgdmFyIGVkaXRvclBhc3RlID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5maWx0ZXJQYXN0ZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmNsaXBib2FyZERhdGEgfHwgZS5vcmlnaW5hbEV2ZW50LmNsaXBib2FyZERhdGEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBodG1sID0gKGUub3JpZ2luYWxFdmVudCB8fCBlKS5jbGlwYm9hcmREYXRhLmdldERhdGEoJ3RleHQvaHRtbCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRleHQgPSAoZS5vcmlnaW5hbEV2ZW50IHx8IGUpLmNsaXBib2FyZERhdGEuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpbGUgPSAoZS5vcmlnaW5hbEV2ZW50IHx8IGUpLmNsaXBib2FyZERhdGEuZmlsZXNcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuY2xpcGJvYXJkRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGh0bWwgPSB3aW5kb3cuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCdIdG1sJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IHdpbmRvdy5jbGlwYm9hcmREYXRhLmdldERhdGEoJ1RleHQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBmaWxlID0gd2luZG93LmNsaXBib2FyZERhdGEuZmlsZXNcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGZpbGUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBQYXN0ZSBhIGltYWdlIGZyb20gdGhlIGNsaXBib2FyZFxyXG4gICAgICAgICAgICAgICAgb2JqLmFkZEZpbGUoZmlsZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISBodG1sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA9IHRleHQuc3BsaXQoJ1xcclxcbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGUudGFyZ2V0LmlubmVyVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sLm1hcChmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5pbm5lclRleHQgPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLmFwcGVuZENoaWxkKGQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gaHRtbC5tYXAoZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICc8ZGl2PicgKyB2ICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0SHRtbCcsIGZhbHNlLCBodG1sLmpvaW4oJycpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gZmlsdGVyKGh0bWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFBhc3RlIHRvIHRoZSBlZGl0b3JcclxuICAgICAgICAgICAgICAgICAgICAvL2luc2VydE5vZGVBdENhcmV0KGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRIdG1sJywgZmFsc2UsIGQuaW5uZXJIVE1MKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZWRpdG9yRHJhZ1N0YXJ0ID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGlmIChlZGl0b3JBY3Rpb24gJiYgZWRpdG9yQWN0aW9uLmUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZWRpdG9yRHJhZ0VudGVyID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGlmIChlZGl0b3JBY3Rpb24gfHwgb2JqLm9wdGlvbnMuZHJvcFpvbmUgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgLy8gRG8gbm90aGluZ1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2plZGl0b3ItZHJhZ2dpbmcnKTtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZWRpdG9yRHJhZ092ZXIgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKGVkaXRvckFjdGlvbiB8fCBvYmoub3B0aW9ucy5kcm9wWm9uZSA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAvLyBEbyBub3RoaW5nXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGVkaXRvclRpbWVyKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoZWRpdG9yVGltZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlZGl0b3JUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdqZWRpdG9yLWRyYWdnaW5nJyk7XHJcbiAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGVkaXRvckRyb3AgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKGVkaXRvckFjdGlvbiB8fCBvYmoub3B0aW9ucy5kcm9wWm9uZSA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAvLyBEbyBub3RoaW5nXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gUG9zaXRpb24gY2FyZXQgb24gdGhlIGRyb3BcclxuICAgICAgICAgICAgdmFyIHJhbmdlID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmNhcmV0UmFuZ2VGcm9tUG9pbnQpIHtcclxuICAgICAgICAgICAgICAgIHJhbmdlPWRvY3VtZW50LmNhcmV0UmFuZ2VGcm9tUG9pbnQoZS5jbGllbnRYLCBlLmNsaWVudFkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUucmFuZ2VQYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHJhbmdlPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICByYW5nZS5zZXRTdGFydChlLnJhbmdlUGFyZW50LGUucmFuZ2VPZmZzZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcclxuICAgICAgICAgICAgc2VsLmFkZFJhbmdlKHJhbmdlKTtcclxuICAgICAgICAgICAgc2VsLmFuY2hvck5vZGUucGFyZW50Tm9kZS5mb2N1cygpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGh0bWwgPSAoZS5vcmlnaW5hbEV2ZW50IHx8IGUpLmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L2h0bWwnKTtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSAoZS5vcmlnaW5hbEV2ZW50IHx8IGUpLmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XHJcbiAgICAgICAgICAgIHZhciBmaWxlID0gKGUub3JpZ2luYWxFdmVudCB8fCBlKS5kYXRhVHJhbnNmZXIuZmlsZXM7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKGZpbGUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouYWRkRmlsZShmaWxlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBleHRyYWN0SW1hZ2VGcm9tSHRtbChodG1sKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnamVkaXRvci1kcmFnZ2luZycpO1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBlZGl0b3JCbHVyID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIC8vIEJsdXJcclxuICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9uYmx1cikgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy5vbmJsdXIoZWwsIG9iaiwgZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjaGFuZ2UoZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGVkaXRvckZvY3VzID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIC8vIEZvY3VzXHJcbiAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbmZvY3VzKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zLm9uZm9jdXMoZWwsIG9iaiwgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGVkaXRvci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZWRpdG9yTW91c2VVcCk7XHJcbiAgICBlZGl0b3IuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZWRpdG9yTW91c2VEb3duKTtcclxuICAgIGVkaXRvci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBlZGl0b3JNb3VzZU1vdmUpO1xyXG4gICAgZWRpdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZWRpdG9yS2V5VXApO1xyXG4gICAgZWRpdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlZGl0b3JLZXlEb3duKTtcclxuICAgIGVkaXRvci5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBlZGl0b3JEcmFnU3RhcnQpO1xyXG4gICAgZWRpdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIGVkaXRvckRyYWdFbnRlcik7XHJcbiAgICBlZGl0b3IuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBlZGl0b3JEcmFnT3Zlcik7XHJcbiAgICBlZGl0b3IuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGVkaXRvckRyb3ApO1xyXG4gICAgZWRpdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgZWRpdG9yUGFzdGUpO1xyXG4gICAgZWRpdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZWRpdG9yRm9jdXMpO1xyXG4gICAgZWRpdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBlZGl0b3JCbHVyKTtcclxuXHJcbiAgICAvLyBPbmxvYWRcclxuICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub25sb2FkKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgb2JqLm9wdGlvbnMub25sb2FkKGVsLCBvYmosIGVkaXRvcik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2V0IHZhbHVlIHRvIHRoZSBlZGl0b3JcclxuICAgIGVkaXRvci5pbm5lckhUTUwgPSB2YWx1ZTtcclxuXHJcbiAgICAvLyBBcHBlbmQgZWRpdG9yIHRvIHRoZSBjb250YWlucmVcclxuICAgIGVsLmFwcGVuZENoaWxkKGVkaXRvcik7XHJcblxyXG4gICAgLy8gU25pcHBldFxyXG4gICAgaWYgKG9iai5vcHRpb25zLnNuaXBwZXQpIHtcclxuICAgICAgICBhcHBlbmRFbGVtZW50KG9iai5vcHRpb25zLnNuaXBwZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIERlZmF1bHQgdG9vbGJhclxyXG4gICAgaWYgKG9iai5vcHRpb25zLnRvb2xiYXIgPT0gbnVsbCkge1xyXG4gICAgICAgIG9iai5vcHRpb25zLnRvb2xiYXIgPSBqU3VpdGVzLmVkaXRvci5nZXREZWZhdWx0VG9vbGJhcigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCB0b29sYmFyXHJcbiAgICBpZiAob2JqLm9wdGlvbnMudG9vbGJhcikge1xyXG4gICAgICAgIC8vIEFwcGVuZCB0byB0aGUgRE9NXHJcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQodG9vbGJhcik7XHJcbiAgICAgICAgLy8gQ3JlYXRlIHRvb2xiYXJcclxuICAgICAgICBqU3VpdGVzLnRvb2xiYXIodG9vbGJhciwge1xyXG4gICAgICAgICAgICBjb250YWluZXI6IHRydWUsXHJcbiAgICAgICAgICAgIHJlc3BvbnNpdmU6IHRydWUsXHJcbiAgICAgICAgICAgIGl0ZW1zOiBvYmoub3B0aW9ucy50b29sYmFyXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRm9jdXMgdG8gdGhlIGVkaXRvclxyXG4gICAgaWYgKG9iai5vcHRpb25zLmZvY3VzKSB7XHJcbiAgICAgICAgalN1aXRlcy5lZGl0b3Iuc2V0Q3Vyc29yKGVkaXRvciwgb2JqLm9wdGlvbnMuZm9jdXMgPT0gJ2luaXRpYWwnID8gdHJ1ZSA6IGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGFuZ2UgbWV0aG9kXHJcbiAgICBlbC5jaGFuZ2UgPSBvYmouc2V0RGF0YTtcclxuXHJcbiAgICAvLyBHbG9iYWwgZ2VuZXJpYyB2YWx1ZSBoYW5kbGVyXHJcbiAgICBlbC52YWwgPSBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgLy8gRGF0YSB0eXBlXHJcbiAgICAgICAgICAgIHZhciBvID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWh0bWwnKSA9PT0gJ3RydWUnID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqLmdldERhdGEobyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb2JqLnNldERhdGEodmFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZWwuZWRpdG9yID0gb2JqO1xyXG5cclxuICAgIHJldHVybiBvYmo7XHJcbn0pO1xyXG5cclxualN1aXRlcy5lZGl0b3Iuc2V0Q3Vyc29yID0gZnVuY3Rpb24oZWxlbWVudCwgZmlyc3QpIHtcclxuICAgIGVsZW1lbnQuZm9jdXMoKTtcclxuICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdzZWxlY3RBbGwnKTtcclxuICAgIHZhciBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICB2YXIgcmFuZ2UgPSBzZWwuZ2V0UmFuZ2VBdCgwKTtcclxuICAgIGlmIChmaXJzdCA9PSB0cnVlKSB7XHJcbiAgICAgICAgdmFyIG5vZGUgPSByYW5nZS5zdGFydENvbnRhaW5lcjtcclxuICAgICAgICB2YXIgc2l6ZSA9IDA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBub2RlID0gcmFuZ2UuZW5kQ29udGFpbmVyO1xyXG4gICAgICAgIHZhciBzaXplID0gbm9kZS5sZW5ndGg7XHJcbiAgICB9XHJcbiAgICByYW5nZS5zZXRTdGFydChub2RlLCBzaXplKTtcclxuICAgIHJhbmdlLnNldEVuZChub2RlLCBzaXplKTtcclxuICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcclxuICAgIHNlbC5hZGRSYW5nZShyYW5nZSk7XHJcbn1cclxuXHJcbmpTdWl0ZXMuZWRpdG9yLmdldERvbWFpbiA9IGZ1bmN0aW9uKHVybCkge1xyXG4gICAgcmV0dXJuIHVybC5yZXBsYWNlKCdodHRwOi8vJywnJykucmVwbGFjZSgnaHR0cHM6Ly8nLCcnKS5yZXBsYWNlKCd3d3cuJywnJykuc3BsaXQoL1svPyNdLylbMF0uc3BsaXQoLzovZylbMF07XHJcbn1cclxuXHJcbmpTdWl0ZXMuZWRpdG9yLmRldGVjdFVybCA9IGZ1bmN0aW9uKHRleHQpIHtcclxuICAgIHZhciBleHByZXNzaW9uID0gLygoKGh0dHBzPzpcXC9cXC8pfCh3d3dcXC4pKVstQS1aMC05KyZAI1xcLyU/PX5ffCE6LC47XSpbLUEtWjAtOSsmQCNcXC8lPX5ffF0rKS9pZztcclxuICAgIHZhciBsaW5rcyA9IHRleHQubWF0Y2goZXhwcmVzc2lvbik7XHJcblxyXG4gICAgaWYgKGxpbmtzKSB7XHJcbiAgICAgICAgaWYgKGxpbmtzWzBdLnN1YnN0cigwLDMpID09ICd3d3cnKSB7XHJcbiAgICAgICAgICAgIGxpbmtzWzBdID0gJ2h0dHA6Ly8nICsgbGlua3NbMF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBsaW5rcztcclxufVxyXG5cclxualN1aXRlcy5lZGl0b3IueW91dHViZVBhcnNlciA9IGZ1bmN0aW9uKHVybCkge1xyXG4gICAgdmFyIHJlZ0V4cCA9IC9eLiooKHlvdXR1LmJlXFwvKXwodlxcLyl8KFxcL3VcXC9cXHdcXC8pfChlbWJlZFxcLyl8KHdhdGNoXFw/KSlcXD8/dj89PyhbXiNcXCZcXD9dKikuKi87XHJcbiAgICB2YXIgbWF0Y2ggPSB1cmwubWF0Y2gocmVnRXhwKTtcclxuXHJcbiAgICByZXR1cm4gKG1hdGNoICYmIG1hdGNoWzddLmxlbmd0aCA9PSAxMSkgPyBtYXRjaFs3XSA6IGZhbHNlO1xyXG59XHJcblxyXG5qU3VpdGVzLmVkaXRvci5nZXREZWZhdWx0VG9vbGJhciA9IGZ1bmN0aW9uKCkgeyBcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb250ZW50OiAndW5kbycsXHJcbiAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZG8nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb250ZW50OiAncmVkbycsXHJcbiAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3JlZG8nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0eXBlOidkaXZpc29yJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb250ZW50OiAnZm9ybWF0X2JvbGQnLFxyXG4gICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbihhLGIsYykge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlDb21tYW5kU3RhdGUoXCJib2xkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYy5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29udGVudDogJ2Zvcm1hdF9pdGFsaWMnLFxyXG4gICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbihhLGIsYykge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZShcIml0YWxpY1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGMuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYy5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdmb3JtYXRfdW5kZXJsaW5lJyxcclxuICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24oYSxiLGMpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRlcmxpbmUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlDb21tYW5kU3RhdGUoXCJ1bmRlcmxpbmVcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBjLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGMuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0eXBlOidkaXZpc29yJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb250ZW50OiAnZm9ybWF0X2xpc3RfYnVsbGV0ZWQnLFxyXG4gICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbihhLGIsYykge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFVub3JkZXJlZExpc3QnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlDb21tYW5kU3RhdGUoXCJpbnNlcnRVbm9yZGVyZWRMaXN0XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYy5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29udGVudDogJ2Zvcm1hdF9saXN0X251bWJlcmVkJyxcclxuICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24oYSxiLGMpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRPcmRlcmVkTGlzdCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZShcImluc2VydE9yZGVyZWRMaXN0XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYy5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29udGVudDogJ2Zvcm1hdF9pbmRlbnRfaW5jcmVhc2UnLFxyXG4gICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbihhLGIsYykge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luZGVudCcsIHRydWUsIG51bGwpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZShcImluZGVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGMuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYy5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdmb3JtYXRfaW5kZW50X2RlY3JlYXNlJyxcclxuICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnb3V0ZGVudCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZShcIm91dGRlbnRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0vKixcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGljb246IFsnZm9ybWF0X2FsaWduX2xlZnQnLCAnZm9ybWF0X2FsaWduX3JpZ2h0JywgJ2Zvcm1hdF9hbGlnbl9jZW50ZXInXSxcclxuICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUNlbnRlcicpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZShcImp1c3RpZnlDZW50ZXJcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHR5cGU6J3NlbGVjdCcsXHJcbiAgICAgICAgICAgIGl0ZW1zOiBbJ1ZlcmRhbmEnLCdBcmlhbCcsJ0NvdXJpZXIgTmV3J10sXHJcbiAgICAgICAgICAgIG9uY2hhbmdlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0eXBlOidzZWxlY3QnLFxyXG4gICAgICAgICAgICBpdGVtczogWycxMHB4JywnMTJweCcsJzE0cHgnLCcxNnB4JywnMThweCcsJzIwcHgnLCcyMnB4J10sXHJcbiAgICAgICAgICAgIG9uY2hhbmdlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpY29uOidmb3JtYXRfYWxpZ25fbGVmdCcsXHJcbiAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ0p1c3RpZnlMZWZ0Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN0YXRlKFwiSnVzdGlmeUxlZnRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpY29uOidmb3JtYXRfYWxpZ25fY2VudGVyJyxcclxuICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUNlbnRlcicpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZShcImp1c3RpZnlDZW50ZXJcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpY29uOidmb3JtYXRfYWxpZ25fcmlnaHQnLFxyXG4gICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5UmlnaHQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlDb21tYW5kU3RhdGUoXCJqdXN0aWZ5UmlnaHRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpY29uOidmb3JtYXRfYWxpZ25fanVzdGlmeScsXHJcbiAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlGdWxsJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN0YXRlKFwianVzdGlmeUZ1bGxcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpY29uOidmb3JtYXRfbGlzdF9idWxsZXRlZCcsXHJcbiAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFVub3JkZXJlZExpc3QnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlDb21tYW5kU3RhdGUoXCJpbnNlcnRVbm9yZGVyZWRMaXN0XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9Ki9cclxuICAgIF07XHJcbn1cclxuXHJcblxyXG5qU3VpdGVzLmZvcm0gPSAoZnVuY3Rpb24oZWwsIG9wdGlvbnMpIHtcclxuICAgIHZhciBvYmogPSB7fTtcclxuICAgIG9iai5vcHRpb25zID0ge307XHJcblxyXG4gICAgLy8gRGVmYXVsdCBjb25maWd1cmF0aW9uXHJcbiAgICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgdXJsOiBudWxsLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdBcmUgeW91IHN1cmU/IFRoZXJlIGFyZSB1bnNhdmVkIGluZm9ybWF0aW9uIGluIHlvdXIgZm9ybScsXHJcbiAgICAgICAgaWdub3JlOiBmYWxzZSxcclxuICAgICAgICBjdXJyZW50SGFzaDogbnVsbCxcclxuICAgICAgICBzdWJtaXRCdXR0b246bnVsbCxcclxuICAgICAgICB2YWxpZGF0aW9uczogbnVsbCxcclxuICAgICAgICBvbmJlZm9yZWxvYWQ6IG51bGwsXHJcbiAgICAgICAgb25sb2FkOiBudWxsLFxyXG4gICAgICAgIG9uYmVmb3Jlc2F2ZTogbnVsbCxcclxuICAgICAgICBvbnNhdmU6IG51bGwsXHJcbiAgICAgICAgb25iZWZvcmVyZW1vdmU6IG51bGwsXHJcbiAgICAgICAgb25yZW1vdmU6IG51bGwsXHJcbiAgICAgICAgb25lcnJvcjogZnVuY3Rpb24oZWwsIG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgalN1aXRlcy5hbGVydChtZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIExvb3AgdGhyb3VnaCBvdXIgb2JqZWN0XHJcbiAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBkZWZhdWx0cykge1xyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zW3Byb3BlcnR5XSA9IG9wdGlvbnNbcHJvcGVydHldO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zW3Byb3BlcnR5XSA9IGRlZmF1bHRzW3Byb3BlcnR5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGlvbnNcclxuICAgIGlmICghIG9iai5vcHRpb25zLnZhbGlkYXRpb25zKSB7XHJcbiAgICAgICAgb2JqLm9wdGlvbnMudmFsaWRhdGlvbnMgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTdWJtaXQgQnV0dG9uXHJcbiAgICBpZiAoISBvYmoub3B0aW9ucy5zdWJtaXRCdXR0b24pIHtcclxuICAgICAgICBvYmoub3B0aW9ucy5zdWJtaXRCdXR0b24gPSBlbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPXN1Ym1pdF0nKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAob2JqLm9wdGlvbnMuc3VibWl0QnV0dG9uICYmIG9iai5vcHRpb25zLnVybCkge1xyXG4gICAgICAgIG9iai5vcHRpb25zLnN1Ym1pdEJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG9iai5zYXZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghIG9iai5vcHRpb25zLnZhbGlkYXRpb25zLmVtYWlsKSB7XHJcbiAgICAgICAgb2JqLm9wdGlvbnMudmFsaWRhdGlvbnMuZW1haWwgPSBqU3VpdGVzLnZhbGlkYXRpb25zLmVtYWlsO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghIG9iai5vcHRpb25zLnZhbGlkYXRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgIG9iai5vcHRpb25zLnZhbGlkYXRpb25zLmxlbmd0aCA9IGpTdWl0ZXMudmFsaWRhdGlvbnMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghIG9iai5vcHRpb25zLnZhbGlkYXRpb25zLnJlcXVpcmVkKSB7XHJcbiAgICAgICAgb2JqLm9wdGlvbnMudmFsaWRhdGlvbnMucmVxdWlyZWQgPSBqU3VpdGVzLnZhbGlkYXRpb25zLnJlcXVpcmVkO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5zZXRVcmwgPSBmdW5jdGlvbih1cmwpIHtcclxuICAgICAgICBvYmoub3B0aW9ucy51cmwgPSB1cmw7XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBqU3VpdGVzLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IG9iai5vcHRpb25zLnVybCxcclxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgcXVldWU6IHRydWUsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vIE92ZXJ3cml0ZSB2YWx1ZXMgZnJvbSB0aGUgYmFja2VuZFxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbmJlZm9yZWxvYWQpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmV0ID0gb2JqLm9wdGlvbnMub25iZWZvcmVsb2FkKGVsLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmV0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgdmFsdWVzIHRvIHRoZSBmb3JtXHJcbiAgICAgICAgICAgICAgICBqU3VpdGVzLmZvcm0uc2V0RWxlbWVudHMoZWwsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgLy8gT25sb2FkIG1ldGhvZHNcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub25sb2FkKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMub25sb2FkKGVsLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5zYXZlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHRlc3QgPSBvYmoudmFsaWRhdGUoKTtcclxuXHJcbiAgICAgICAgaWYgKHRlc3QpIHtcclxuICAgICAgICAgICAgb2JqLm9wdGlvbnMub25lcnJvcihlbCwgdGVzdCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBqU3VpdGVzLmZvcm0uZ2V0RWxlbWVudHMoZWwsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbmJlZm9yZXNhdmUpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gb2JqLm9wdGlvbnMub25iZWZvcmVzYXZlKGVsLCBkYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47IFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBqU3VpdGVzLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBvYmoub3B0aW9ucy51cmwsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbnNhdmUpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMub25zYXZlKGVsLCBkYXRhLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9iai5yZW1vdmUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9uYmVmb3JlcmVtb3ZlKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHZhciByZXQgPSBvYmoub3B0aW9ucy5vbmJlZm9yZXJlbW92ZShlbCwgb2JqKTtcclxuICAgICAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgalN1aXRlcy5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBvYmoub3B0aW9ucy51cmwsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbnJlbW92ZSkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm9ucmVtb3ZlKGVsLCBvYmosIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgb2JqLnJlc2V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgYWRkRXJyb3IgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgLy8gQWRkIGVycm9yIGluIHRoZSBlbGVtZW50XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xyXG4gICAgICAgIC8vIFN1Ym1pdCBidXR0b25cclxuICAgICAgICBpZiAob2JqLm9wdGlvbnMuc3VibWl0QnV0dG9uKSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zLnN1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFJldHVybiBlcnJvciBtZXNzYWdlXHJcbiAgICAgICAgdmFyIGVycm9yID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZXJyb3InKSB8fCAnVGhlcmUgaXMgYW4gZXJyb3IgaW4gdGhlIGZvcm0nO1xyXG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCd0aXRsZScsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGRlbEVycm9yID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBlcnJvciA9IGZhbHNlO1xyXG4gICAgICAgIC8vIFJlbW92ZSBjbGFzcyBmcm9tIHRoaXMgZWxlbWVudFxyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcclxuICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgndGl0bGUnKTtcclxuICAgICAgICAvLyBHZXQgZWxlbWVudHMgaW4gdGhlIGZvcm1cclxuICAgICAgICB2YXIgZWxlbWVudHMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGRpdltuYW1lXVwiKTtcclxuICAgICAgICAvLyBSdW4gYWxsIGVsZW1lbnRzIFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnRzW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS12YWxpZGF0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2Vycm9yJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5zdWJtaXRCdXR0b24pIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5zdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMuc3VibWl0QnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvYmoudmFsaWRhdGVFbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgIC8vIFRlc3QgcmVzdWx0c1xyXG4gICAgICAgIHZhciB0ZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgLy8gVmFsdWVcclxuICAgICAgICB2YXIgdmFsdWUgPSBqU3VpdGVzLmZvcm0uZ2V0VmFsdWUoZWxlbWVudCk7XHJcbiAgICAgICAgLy8gVmFsaWRhdGlvblxyXG4gICAgICAgIHZhciB2YWxpZGF0aW9uID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsaWRhdGlvbicpO1xyXG4gICAgICAgIC8vIFBhcnNlXHJcbiAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy52YWxpZGF0aW9uc1t2YWxpZGF0aW9uXSkgPT0gJ2Z1bmN0aW9uJyAmJiAhIG9iai5vcHRpb25zLnZhbGlkYXRpb25zW3ZhbGlkYXRpb25dKHZhbHVlLCBlbGVtZW50KSkge1xyXG4gICAgICAgICAgICAvLyBOb3QgcGFzc2VkIGluIHRoZSB0ZXN0XHJcbiAgICAgICAgICAgIHRlc3QgPSBhZGRFcnJvcihlbGVtZW50KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Vycm9yJykpIHtcclxuICAgICAgICAgICAgICAgIGRlbEVycm9yKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGVzdDtcclxuICAgIH1cclxuXHJcbiAgICBvYmoucmVzZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBHZXQgZWxlbWVudHMgaW4gdGhlIGZvcm1cclxuICAgICAgICB2YXIgbmFtZSA9IG51bGw7XHJcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gZWwucXVlcnlTZWxlY3RvckFsbChcImlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBkaXZbbmFtZV1cIik7XHJcbiAgICAgICAgLy8gUnVuIGFsbCBlbGVtZW50cyBcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChuYW1lID0gZWxlbWVudHNbaV0uZ2V0QXR0cmlidXRlKCduYW1lJykpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50c1tpXS50eXBlID09ICdjaGVja2JveCcgfHwgZWxlbWVudHNbaV0udHlwZSA9PSAncmFkaW8nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNbaV0uY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mKGVsZW1lbnRzW2ldLnZhbCkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50c1tpXS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFJ1biBmb3JtIHZhbGlkYXRpb25cclxuICAgIG9iai52YWxpZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB0ZXN0ID0gW107XHJcbiAgICAgICAgLy8gR2V0IGVsZW1lbnRzIGluIHRoZSBmb3JtXHJcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gZWwucXVlcnlTZWxlY3RvckFsbChcImlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBkaXZbbmFtZV1cIik7XHJcbiAgICAgICAgLy8gUnVuIGFsbCBlbGVtZW50cyBcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIFJlcXVpcmVkXHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50c1tpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsaWRhdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzID0gb2JqLnZhbGlkYXRlRWxlbWVudChlbGVtZW50c1tpXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVzdC5wdXNoKHJlcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRlc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGVzdC5qb2luKCc8YnI+Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayB0aGUgZm9ybVxyXG4gICAgb2JqLmdldEVycm9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gVmFsaWRhdGlvblxyXG4gICAgICAgIHJldHVybiBvYmoudmFsaWRhdGlvbigpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgZm9ybSBoYXNoXHJcbiAgICBvYmouc2V0SGFzaCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBvYmouZ2V0SGFzaChqU3VpdGVzLmZvcm0uZ2V0RWxlbWVudHMoZWwpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgdGhlIGZvcm0gaGFzaFxyXG4gICAgb2JqLmdldEhhc2ggPSBmdW5jdGlvbihzdHIpIHtcclxuICAgICAgICB2YXIgaGFzaCA9IDAsIGksIGNocjtcclxuXHJcbiAgICAgICAgaWYgKHN0ci5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhhc2g7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgIGNociA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgICAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIGNocjtcclxuICAgICAgICAgICAgICBoYXNoIHw9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBoYXNoO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElzIHRoZXJlIGFueSBjaGFuZ2UgaW4gdGhlIGZvcm0gc2luY2Ugc3RhcnQgdHJhY2tpbmc/XHJcbiAgICBvYmouaXNDaGFuZ2VkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGhhc2ggPSBvYmouc2V0SGFzaCgpO1xyXG4gICAgICAgIHJldHVybiAob2JqLm9wdGlvbnMuY3VycmVudEhhc2ggIT0gaGFzaCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVzdGFydCB0cmFja2luZ1xyXG4gICAgb2JqLnJlc2V0VHJhY2tlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG9iai5vcHRpb25zLmN1cnJlbnRIYXNoID0gb2JqLnNldEhhc2goKTtcclxuICAgICAgICBvYmoub3B0aW9ucy5pZ25vcmUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJZ25vcmUgZmxhZ1xyXG4gICAgb2JqLnNldElnbm9yZSA9IGZ1bmN0aW9uKGlnbm9yZUZsYWcpIHtcclxuICAgICAgICBvYmoub3B0aW9ucy5pZ25vcmUgPSBpZ25vcmVGbGFnID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFN0YXJ0IHRyYWNraW5nIGluIG9uZSBzZWNvbmRcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgb2JqLm9wdGlvbnMuY3VycmVudEhhc2ggPSBvYmouc2V0SGFzaCgpO1xyXG4gICAgfSwgMTAwMCk7XHJcblxyXG4gICAgLy8gVmFsaWRhdGlvbnNcclxuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS12YWxpZGF0aW9uJykpIHtcclxuICAgICAgICAgICAgb2JqLnZhbGlkYXRlRWxlbWVudChlLnRhcmdldCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQWxlcnRcclxuICAgIGlmICghIGpTdWl0ZXMuZm9ybS5oYXNFdmVudHMpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJlZm9yZXVubG9hZFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAob2JqLmlzQ2hhbmdlZCgpICYmIG9iai5vcHRpb25zLmlnbm9yZSA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbmZpcm1hdGlvbk1lc3NhZ2UgPSAgb2JqLm9wdGlvbnMubWVzc2FnZT8gb2JqLm9wdGlvbnMubWVzc2FnZSA6IFwiXFxvL1wiO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjb25maXJtYXRpb25NZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnJldHVyblZhbHVlID0gY29uZmlybWF0aW9uTWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25maXJtYXRpb25NZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCgwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBqU3VpdGVzLmZvcm0uaGFzRXZlbnRzID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBlbC5mb3JtID0gb2JqO1xyXG5cclxuICAgIHJldHVybiBvYmo7XHJcbn0pO1xyXG5cclxuLy8gR2V0IHZhbHVlIGZyb20gb25lIGVsZW1lbnRcclxualN1aXRlcy5mb3JtLmdldFZhbHVlID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgdmFyIHZhbHVlID0gbnVsbDtcclxuICAgIGlmIChlbGVtZW50LnR5cGUgPT0gJ2NoZWNrYm94Jykge1xyXG4gICAgICAgIGlmIChlbGVtZW50LmNoZWNrZWQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IGVsZW1lbnQudmFsdWUgfHwgdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGVsZW1lbnQudHlwZSA9PSAncmFkaW8nKSB7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQuY2hlY2tlZCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gZWxlbWVudC52YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGVsZW1lbnQudGFnTmFtZSA9PSAnc2VsZWN0JyAmJiBlbGVtZW50Lm11bHRpcGxlID09IHRydWUpIHtcclxuICAgICAgICB2YWx1ZSA9IFtdO1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwib3B0aW9uc1tzZWxlY3RlZF1cIik7XHJcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvcHRpb25zLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIHZhbHVlLnB1c2gob3B0aW9uc1tqXS52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YoZWxlbWVudC52YWwpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB2YWx1ZSA9IGVsZW1lbnQudmFsKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhbHVlID0gZWxlbWVudC52YWx1ZSB8fCAnJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuXHJcbi8vIEdldCBmb3JtIGVsZW1lbnRzXHJcbmpTdWl0ZXMuZm9ybS5nZXRFbGVtZW50cyA9IGZ1bmN0aW9uKGVsLCBhc0FycmF5KSB7XHJcbiAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgdmFyIG5hbWUgPSBudWxsO1xyXG4gICAgdmFyIGVsZW1lbnRzID0gZWwucXVlcnlTZWxlY3RvckFsbChcImlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBkaXZbbmFtZV1cIik7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChuYW1lID0gZWxlbWVudHNbaV0uZ2V0QXR0cmlidXRlKCduYW1lJykpIHtcclxuICAgICAgICAgICAgZGF0YVtuYW1lXSA9IGpTdWl0ZXMuZm9ybS5nZXRWYWx1ZShlbGVtZW50c1tpXSkgfHwgJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhc0FycmF5ID09IHRydWUgPyBkYXRhIDogSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn1cclxuXHJcbi8vR2V0IGZvcm0gZWxlbWVudHNcclxualN1aXRlcy5mb3JtLnNldEVsZW1lbnRzID0gZnVuY3Rpb24oZWwsIGRhdGEpIHtcclxuICAgIHZhciBuYW1lID0gbnVsbDtcclxuICAgIHZhciB2YWx1ZSA9IG51bGw7XHJcbiAgICB2YXIgZWxlbWVudHMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGRpdltuYW1lXVwiKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyBBdHRyaWJ1dGVzXHJcbiAgICAgICAgdmFyIHR5cGUgPSBlbGVtZW50c1tpXS5nZXRBdHRyaWJ1dGUoJ3R5cGUnKTtcclxuICAgICAgICBpZiAobmFtZSA9IGVsZW1lbnRzW2ldLmdldEF0dHJpYnV0ZSgnbmFtZScpKSB7XHJcbiAgICAgICAgICAgIC8vIFRyYW5zZm9ybSB2YXJpYWJsZSBuYW1lcyBpbiBwYXRobmFtZVxyXG4gICAgICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoL1xcWyguKj8pXFxdL2lnKSwgJy4kMScpO1xyXG4gICAgICAgICAgICB2YWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIC8vIFNlYWNoIGZvciB0aGUgZGF0YSBpbiB0aGUgcGF0aFxyXG4gICAgICAgICAgICBpZiAobmFtZS5tYXRjaCgvXFwuLykpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0bXAgPSBqU3VpdGVzLnBhdGguY2FsbChkYXRhLCBuYW1lKSB8fCAnJztcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YodG1wKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRtcDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoZGF0YVtuYW1lXSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBkYXRhW25hbWVdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFNldCB0aGUgdmFsdWVzXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2NoZWNrYm94JyB8fCB0eXBlID09ICdyYWRpbycpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50c1tpXS5jaGVja2VkID0gdmFsdWUgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKGVsZW1lbnRzW2ldLnZhbCkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50c1tpXS52YWwodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBMZWdhY3lcclxualN1aXRlcy50cmFja2VyID0galN1aXRlcy5mb3JtO1xyXG5cclxualN1aXRlcy5mb2N1cyA9IGZ1bmN0aW9uKGVsKSB7XHJcbiAgICBpZiAoZWwuaW5uZXJUZXh0Lmxlbmd0aCkge1xyXG4gICAgICAgIHZhciByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XHJcbiAgICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICB2YXIgbm9kZSA9IGVsLmNoaWxkTm9kZXNbZWwuY2hpbGROb2Rlcy5sZW5ndGgtMV07XHJcbiAgICAgICAgcmFuZ2Uuc2V0U3RhcnQobm9kZSwgbm9kZS5sZW5ndGgpXHJcbiAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSlcclxuICAgICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKClcclxuICAgICAgICBzZWwuYWRkUmFuZ2UocmFuZ2UpXHJcbiAgICAgICAgZWwuc2Nyb2xsTGVmdCA9IGVsLnNjcm9sbFdpZHRoO1xyXG4gICAgfVxyXG59XHJcblxyXG5qU3VpdGVzLmlzTnVtZXJpYyA9IChmdW5jdGlvbiAobnVtKSB7XHJcbiAgICByZXR1cm4gIWlzTmFOKG51bSkgJiYgbnVtICE9PSBudWxsICYmIG51bSAhPT0gJyc7XHJcbn0pO1xyXG5cclxualN1aXRlcy5ndWlkID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbihjKSB7XHJcbiAgICAgICAgdmFyIHIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwLCB2ID0gYyA9PSAneCcgPyByIDogKHIgJiAweDMgfCAweDgpO1xyXG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5qU3VpdGVzLmdldE5vZGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBub2RlID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCkuYW5jaG9yTm9kZTtcclxuICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIChub2RlLm5vZGVUeXBlID09IDMgPyBub2RlLnBhcmVudE5vZGUgOiBub2RlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEdlbmVyYXRlIGhhc2ggZnJvbSBhIHN0cmluZ1xyXG4gKi9cclxualN1aXRlcy5oYXNoID0gZnVuY3Rpb24oc3RyKSB7XHJcbiAgICB2YXIgaGFzaCA9IDAsIGksIGNocjtcclxuXHJcbiAgICBpZiAoc3RyLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBoYXNoO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNociA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgICAgICBpZiAoY2hyID4gMzIpIHtcclxuICAgICAgICAgICAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIGNocjtcclxuICAgICAgICAgICAgICAgIGhhc2ggfD0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBoYXNoO1xyXG59XHJcblxyXG4vKipcclxuICogR2VuZXJhdGUgYSByYW5kb20gY29sb3JcclxuICovXHJcbmpTdWl0ZXMucmFuZG9tQ29sb3IgPSBmdW5jdGlvbihoKSB7XHJcbiAgICB2YXIgbHVtID0gLTAuMjU7XHJcbiAgICB2YXIgaGV4ID0gU3RyaW5nKCcjJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnNsaWNlKDIsIDgpLnRvVXBwZXJDYXNlKCkpLnJlcGxhY2UoL1teMC05YS1mXS9naSwgJycpO1xyXG4gICAgaWYgKGhleC5sZW5ndGggPCA2KSB7XHJcbiAgICAgICAgaGV4ID0gaGV4WzBdICsgaGV4WzBdICsgaGV4WzFdICsgaGV4WzFdICsgaGV4WzJdICsgaGV4WzJdO1xyXG4gICAgfVxyXG4gICAgdmFyIHJnYiA9IFtdLCBjLCBpO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgICAgIGMgPSBwYXJzZUludChoZXguc3Vic3RyKGkgKiAyLCAyKSwgMTYpO1xyXG4gICAgICAgIGMgPSBNYXRoLnJvdW5kKE1hdGgubWluKE1hdGgubWF4KDAsIGMgKyAoYyAqIGx1bSkpLCAyNTUpKS50b1N0cmluZygxNik7XHJcbiAgICAgICAgcmdiLnB1c2goKFwiMDBcIiArIGMpLnN1YnN0cihjLmxlbmd0aCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiBoZXhcclxuICAgIGlmIChoID09IHRydWUpIHtcclxuICAgICAgICByZXR1cm4gJyMnICsgalN1aXRlcy50d28ocmdiWzBdLnRvU3RyaW5nKDE2KSkgKyBqU3VpdGVzLnR3byhyZ2JbMV0udG9TdHJpbmcoMTYpKSArIGpTdWl0ZXMudHdvKHJnYlsyXS50b1N0cmluZygxNikpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZ2I7XHJcbn1cclxuXHJcbmpTdWl0ZXMuZ2V0V2luZG93V2lkdGggPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciB3ID0gd2luZG93LFxyXG4gICAgZCA9IGRvY3VtZW50LFxyXG4gICAgZSA9IGQuZG9jdW1lbnRFbGVtZW50LFxyXG4gICAgZyA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXSxcclxuICAgIHggPSB3LmlubmVyV2lkdGggfHwgZS5jbGllbnRXaWR0aCB8fCBnLmNsaWVudFdpZHRoO1xyXG4gICAgcmV0dXJuIHg7XHJcbn1cclxuXHJcbmpTdWl0ZXMuZ2V0V2luZG93SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdyA9IHdpbmRvdyxcclxuICAgIGQgPSBkb2N1bWVudCxcclxuICAgIGUgPSBkLmRvY3VtZW50RWxlbWVudCxcclxuICAgIGcgPSBkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF0sXHJcbiAgICB5ID0gdy5pbm5lckhlaWdodHx8IGUuY2xpZW50SGVpZ2h0fHwgZy5jbGllbnRIZWlnaHQ7XHJcbiAgICByZXR1cm4gIHk7XHJcbn1cclxuXHJcbmpTdWl0ZXMuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbihlKSB7XHJcbiAgICBpZiAoZS5jaGFuZ2VkVG91Y2hlcyAmJiBlLmNoYW5nZWRUb3VjaGVzWzBdKSB7XHJcbiAgICAgICAgdmFyIHggPSBlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYO1xyXG4gICAgICAgIHZhciB5ID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIHggPSAod2luZG93LkV2ZW50KSA/IGUucGFnZVggOiBlLmNsaWVudFggKyAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCA6IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCk7XHJcbiAgICAgICAgdmFyIHkgPSAod2luZG93LkV2ZW50KSA/IGUucGFnZVkgOiBlLmNsaWVudFkgKyAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgOiBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFsgeCwgeSBdO1xyXG59XHJcblxyXG5qU3VpdGVzLmNsaWNrID0gZnVuY3Rpb24oZWwpIHtcclxuICAgIGlmIChlbC5jbGljaykge1xyXG4gICAgICAgIGVsLmNsaWNrKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBldnQgPSBuZXcgTW91c2VFdmVudCgnY2xpY2snLCB7XHJcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXHJcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHZpZXc6IHdpbmRvd1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVsLmRpc3BhdGNoRXZlbnQoZXZ0KTtcclxuICAgIH1cclxufVxyXG5cclxualN1aXRlcy5maW5kRWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnQsIGNvbmRpdGlvbikge1xyXG4gICAgdmFyIGZvdW5kRWxlbWVudCA9IGZhbHNlO1xyXG5cclxuICAgIGZ1bmN0aW9uIHBhdGggKGVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoZWxlbWVudCAmJiAhIGZvdW5kRWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKGNvbmRpdGlvbikgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgZm91bmRFbGVtZW50ID0gY29uZGl0aW9uKGVsZW1lbnQpXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mKGNvbmRpdGlvbikgPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCAmJiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjb25kaXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRFbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGVsZW1lbnQucGFyZW50Tm9kZSAmJiAhIGZvdW5kRWxlbWVudCkge1xyXG4gICAgICAgICAgICBwYXRoKGVsZW1lbnQucGFyZW50Tm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBhdGgoZWxlbWVudCk7XHJcblxyXG4gICAgcmV0dXJuIGZvdW5kRWxlbWVudDtcclxufVxyXG5cclxuLy8gVHdvIGRpZ2l0c1xyXG5qU3VpdGVzLnR3byA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICB2YWx1ZSA9ICcnICsgdmFsdWU7XHJcbiAgICBpZiAodmFsdWUubGVuZ3RoID09IDEpIHtcclxuICAgICAgICB2YWx1ZSA9ICcwJyArIHZhbHVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcblxyXG5qU3VpdGVzLnNoYTUxMiA9IChmdW5jdGlvbihzdHIpIHtcclxuICAgIGZ1bmN0aW9uIGludDY0KG1zaW50XzMyLCBsc2ludF8zMikge1xyXG4gICAgICAgIHRoaXMuaGlnaE9yZGVyID0gbXNpbnRfMzI7XHJcbiAgICAgICAgdGhpcy5sb3dPcmRlciA9IGxzaW50XzMyO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBIID0gW25ldyBpbnQ2NCgweDZhMDllNjY3LCAweGYzYmNjOTA4KSwgbmV3IGludDY0KDB4YmI2N2FlODUsIDB4ODRjYWE3M2IpLFxyXG4gICAgICAgIG5ldyBpbnQ2NCgweDNjNmVmMzcyLCAweGZlOTRmODJiKSwgbmV3IGludDY0KDB4YTU0ZmY1M2EsIDB4NWYxZDM2ZjEpLFxyXG4gICAgICAgIG5ldyBpbnQ2NCgweDUxMGU1MjdmLCAweGFkZTY4MmQxKSwgbmV3IGludDY0KDB4OWIwNTY4OGMsIDB4MmIzZTZjMWYpLFxyXG4gICAgICAgIG5ldyBpbnQ2NCgweDFmODNkOWFiLCAweGZiNDFiZDZiKSwgbmV3IGludDY0KDB4NWJlMGNkMTksIDB4MTM3ZTIxNzkpXTtcclxuXHJcbiAgICB2YXIgSyA9IFtuZXcgaW50NjQoMHg0MjhhMmY5OCwgMHhkNzI4YWUyMiksIG5ldyBpbnQ2NCgweDcxMzc0NDkxLCAweDIzZWY2NWNkKSxcclxuICAgICAgICBuZXcgaW50NjQoMHhiNWMwZmJjZiwgMHhlYzRkM2IyZiksIG5ldyBpbnQ2NCgweGU5YjVkYmE1LCAweDgxODlkYmJjKSxcclxuICAgICAgICBuZXcgaW50NjQoMHgzOTU2YzI1YiwgMHhmMzQ4YjUzOCksIG5ldyBpbnQ2NCgweDU5ZjExMWYxLCAweGI2MDVkMDE5KSxcclxuICAgICAgICBuZXcgaW50NjQoMHg5MjNmODJhNCwgMHhhZjE5NGY5YiksIG5ldyBpbnQ2NCgweGFiMWM1ZWQ1LCAweGRhNmQ4MTE4KSxcclxuICAgICAgICBuZXcgaW50NjQoMHhkODA3YWE5OCwgMHhhMzAzMDI0MiksIG5ldyBpbnQ2NCgweDEyODM1YjAxLCAweDQ1NzA2ZmJlKSxcclxuICAgICAgICBuZXcgaW50NjQoMHgyNDMxODViZSwgMHg0ZWU0YjI4YyksIG5ldyBpbnQ2NCgweDU1MGM3ZGMzLCAweGQ1ZmZiNGUyKSxcclxuICAgICAgICBuZXcgaW50NjQoMHg3MmJlNWQ3NCwgMHhmMjdiODk2ZiksIG5ldyBpbnQ2NCgweDgwZGViMWZlLCAweDNiMTY5NmIxKSxcclxuICAgICAgICBuZXcgaW50NjQoMHg5YmRjMDZhNywgMHgyNWM3MTIzNSksIG5ldyBpbnQ2NCgweGMxOWJmMTc0LCAweGNmNjkyNjk0KSxcclxuICAgICAgICBuZXcgaW50NjQoMHhlNDliNjljMSwgMHg5ZWYxNGFkMiksIG5ldyBpbnQ2NCgweGVmYmU0Nzg2LCAweDM4NGYyNWUzKSxcclxuICAgICAgICBuZXcgaW50NjQoMHgwZmMxOWRjNiwgMHg4YjhjZDViNSksIG5ldyBpbnQ2NCgweDI0MGNhMWNjLCAweDc3YWM5YzY1KSxcclxuICAgICAgICBuZXcgaW50NjQoMHgyZGU5MmM2ZiwgMHg1OTJiMDI3NSksIG5ldyBpbnQ2NCgweDRhNzQ4NGFhLCAweDZlYTZlNDgzKSxcclxuICAgICAgICBuZXcgaW50NjQoMHg1Y2IwYTlkYywgMHhiZDQxZmJkNCksIG5ldyBpbnQ2NCgweDc2Zjk4OGRhLCAweDgzMTE1M2I1KSxcclxuICAgICAgICBuZXcgaW50NjQoMHg5ODNlNTE1MiwgMHhlZTY2ZGZhYiksIG5ldyBpbnQ2NCgweGE4MzFjNjZkLCAweDJkYjQzMjEwKSxcclxuICAgICAgICBuZXcgaW50NjQoMHhiMDAzMjdjOCwgMHg5OGZiMjEzZiksIG5ldyBpbnQ2NCgweGJmNTk3ZmM3LCAweGJlZWYwZWU0KSxcclxuICAgICAgICBuZXcgaW50NjQoMHhjNmUwMGJmMywgMHgzZGE4OGZjMiksIG5ldyBpbnQ2NCgweGQ1YTc5MTQ3LCAweDkzMGFhNzI1KSxcclxuICAgICAgICBuZXcgaW50NjQoMHgwNmNhNjM1MSwgMHhlMDAzODI2ZiksIG5ldyBpbnQ2NCgweDE0MjkyOTY3LCAweDBhMGU2ZTcwKSxcclxuICAgICAgICBuZXcgaW50NjQoMHgyN2I3MGE4NSwgMHg0NmQyMmZmYyksIG5ldyBpbnQ2NCgweDJlMWIyMTM4LCAweDVjMjZjOTI2KSxcclxuICAgICAgICBuZXcgaW50NjQoMHg0ZDJjNmRmYywgMHg1YWM0MmFlZCksIG5ldyBpbnQ2NCgweDUzMzgwZDEzLCAweDlkOTViM2RmKSxcclxuICAgICAgICBuZXcgaW50NjQoMHg2NTBhNzM1NCwgMHg4YmFmNjNkZSksIG5ldyBpbnQ2NCgweDc2NmEwYWJiLCAweDNjNzdiMmE4KSxcclxuICAgICAgICBuZXcgaW50NjQoMHg4MWMyYzkyZSwgMHg0N2VkYWVlNiksIG5ldyBpbnQ2NCgweDkyNzIyYzg1LCAweDE0ODIzNTNiKSxcclxuICAgICAgICBuZXcgaW50NjQoMHhhMmJmZThhMSwgMHg0Y2YxMDM2NCksIG5ldyBpbnQ2NCgweGE4MWE2NjRiLCAweGJjNDIzMDAxKSxcclxuICAgICAgICBuZXcgaW50NjQoMHhjMjRiOGI3MCwgMHhkMGY4OTc5MSksIG5ldyBpbnQ2NCgweGM3NmM1MWEzLCAweDA2NTRiZTMwKSxcclxuICAgICAgICBuZXcgaW50NjQoMHhkMTkyZTgxOSwgMHhkNmVmNTIxOCksIG5ldyBpbnQ2NCgweGQ2OTkwNjI0LCAweDU1NjVhOTEwKSxcclxuICAgICAgICBuZXcgaW50NjQoMHhmNDBlMzU4NSwgMHg1NzcxMjAyYSksIG5ldyBpbnQ2NCgweDEwNmFhMDcwLCAweDMyYmJkMWI4KSxcclxuICAgICAgICBuZXcgaW50NjQoMHgxOWE0YzExNiwgMHhiOGQyZDBjOCksIG5ldyBpbnQ2NCgweDFlMzc2YzA4LCAweDUxNDFhYjUzKSxcclxuICAgICAgICBuZXcgaW50NjQoMHgyNzQ4Nzc0YywgMHhkZjhlZWI5OSksIG5ldyBpbnQ2NCgweDM0YjBiY2I1LCAweGUxOWI0OGE4KSxcclxuICAgICAgICBuZXcgaW50NjQoMHgzOTFjMGNiMywgMHhjNWM5NWE2MyksIG5ldyBpbnQ2NCgweDRlZDhhYTRhLCAweGUzNDE4YWNiKSxcclxuICAgICAgICBuZXcgaW50NjQoMHg1YjljY2E0ZiwgMHg3NzYzZTM3MyksIG5ldyBpbnQ2NCgweDY4MmU2ZmYzLCAweGQ2YjJiOGEzKSxcclxuICAgICAgICBuZXcgaW50NjQoMHg3NDhmODJlZSwgMHg1ZGVmYjJmYyksIG5ldyBpbnQ2NCgweDc4YTU2MzZmLCAweDQzMTcyZjYwKSxcclxuICAgICAgICBuZXcgaW50NjQoMHg4NGM4NzgxNCwgMHhhMWYwYWI3MiksIG5ldyBpbnQ2NCgweDhjYzcwMjA4LCAweDFhNjQzOWVjKSxcclxuICAgICAgICBuZXcgaW50NjQoMHg5MGJlZmZmYSwgMHgyMzYzMWUyOCksIG5ldyBpbnQ2NCgweGE0NTA2Y2ViLCAweGRlODJiZGU5KSxcclxuICAgICAgICBuZXcgaW50NjQoMHhiZWY5YTNmNywgMHhiMmM2NzkxNSksIG5ldyBpbnQ2NCgweGM2NzE3OGYyLCAweGUzNzI1MzJiKSxcclxuICAgICAgICBuZXcgaW50NjQoMHhjYTI3M2VjZSwgMHhlYTI2NjE5YyksIG5ldyBpbnQ2NCgweGQxODZiOGM3LCAweDIxYzBjMjA3KSxcclxuICAgICAgICBuZXcgaW50NjQoMHhlYWRhN2RkNiwgMHhjZGUwZWIxZSksIG5ldyBpbnQ2NCgweGY1N2Q0ZjdmLCAweGVlNmVkMTc4KSxcclxuICAgICAgICBuZXcgaW50NjQoMHgwNmYwNjdhYSwgMHg3MjE3NmZiYSksIG5ldyBpbnQ2NCgweDBhNjM3ZGM1LCAweGEyYzg5OGE2KSxcclxuICAgICAgICBuZXcgaW50NjQoMHgxMTNmOTgwNCwgMHhiZWY5MGRhZSksIG5ldyBpbnQ2NCgweDFiNzEwYjM1LCAweDEzMWM0NzFiKSxcclxuICAgICAgICBuZXcgaW50NjQoMHgyOGRiNzdmNSwgMHgyMzA0N2Q4NCksIG5ldyBpbnQ2NCgweDMyY2FhYjdiLCAweDQwYzcyNDkzKSxcclxuICAgICAgICBuZXcgaW50NjQoMHgzYzllYmUwYSwgMHgxNWM5YmViYyksIG5ldyBpbnQ2NCgweDQzMWQ2N2M0LCAweDljMTAwZDRjKSxcclxuICAgICAgICBuZXcgaW50NjQoMHg0Y2M1ZDRiZSwgMHhjYjNlNDJiNiksIG5ldyBpbnQ2NCgweDU5N2YyOTljLCAweGZjNjU3ZTJhKSxcclxuICAgICAgICBuZXcgaW50NjQoMHg1ZmNiNmZhYiwgMHgzYWQ2ZmFlYyksIG5ldyBpbnQ2NCgweDZjNDQxOThjLCAweDRhNDc1ODE3KV07XHJcblxyXG4gICAgdmFyIFcgPSBuZXcgQXJyYXkoNjQpO1xyXG4gICAgdmFyIGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgsIGksIGo7XHJcbiAgICB2YXIgVDEsIFQyO1xyXG4gICAgdmFyIGNoYXJzaXplID0gODtcclxuXHJcbiAgICBmdW5jdGlvbiB1dGY4X2VuY29kZShzdHIpIHtcclxuICAgICAgICByZXR1cm4gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN0cikpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHN0cjJiaW5iKHN0cikge1xyXG4gICAgICAgIHZhciBiaW4gPSBbXTtcclxuICAgICAgICB2YXIgbWFzayA9ICgxIDw8IGNoYXJzaXplKSAtIDE7XHJcbiAgICAgICAgdmFyIGxlbiA9IHN0ci5sZW5ndGggKiBjaGFyc2l6ZTtcclxuICAgIFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IGNoYXJzaXplKSB7XHJcbiAgICAgICAgICAgIGJpbltpID4+IDVdIHw9IChzdHIuY2hhckNvZGVBdChpIC8gY2hhcnNpemUpICYgbWFzaykgPDwgKDMyIC0gY2hhcnNpemUgLSAoaSAlIDMyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIGJpbjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBiaW5iMmhleChiaW5hcnJheSkge1xyXG4gICAgICAgIHZhciBoZXhfdGFiID0gXCIwMTIzNDU2Nzg5YWJjZGVmXCI7XHJcbiAgICAgICAgdmFyIHN0ciA9IFwiXCI7XHJcbiAgICAgICAgdmFyIGxlbmd0aCA9IGJpbmFycmF5Lmxlbmd0aCAqIDQ7XHJcbiAgICAgICAgdmFyIHNyY0J5dGU7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgc3JjQnl0ZSA9IGJpbmFycmF5W2kgPj4gMl0gPj4gKCgzIC0gKGkgJSA0KSkgKiA4KTtcclxuICAgICAgICAgICAgc3RyICs9IGhleF90YWIuY2hhckF0KChzcmNCeXRlID4+IDQpICYgMHhGKSArIGhleF90YWIuY2hhckF0KHNyY0J5dGUgJiAweEYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzYWZlX2FkZF8yKHgsIHkpIHtcclxuICAgICAgICB2YXIgbHN3LCBtc3csIGxvd09yZGVyLCBoaWdoT3JkZXI7XHJcblxyXG4gICAgICAgIGxzdyA9ICh4Lmxvd09yZGVyICYgMHhGRkZGKSArICh5Lmxvd09yZGVyICYgMHhGRkZGKTtcclxuICAgICAgICBtc3cgPSAoeC5sb3dPcmRlciA+Pj4gMTYpICsgKHkubG93T3JkZXIgPj4+IDE2KSArIChsc3cgPj4+IDE2KTtcclxuICAgICAgICBsb3dPcmRlciA9ICgobXN3ICYgMHhGRkZGKSA8PCAxNikgfCAobHN3ICYgMHhGRkZGKTtcclxuXHJcbiAgICAgICAgbHN3ID0gKHguaGlnaE9yZGVyICYgMHhGRkZGKSArICh5LmhpZ2hPcmRlciAmIDB4RkZGRikgKyAobXN3ID4+PiAxNik7XHJcbiAgICAgICAgbXN3ID0gKHguaGlnaE9yZGVyID4+PiAxNikgKyAoeS5oaWdoT3JkZXIgPj4+IDE2KSArIChsc3cgPj4+IDE2KTtcclxuICAgICAgICBoaWdoT3JkZXIgPSAoKG1zdyAmIDB4RkZGRikgPDwgMTYpIHwgKGxzdyAmIDB4RkZGRik7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgaW50NjQoaGlnaE9yZGVyLCBsb3dPcmRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2FmZV9hZGRfNChhLCBiLCBjLCBkKSB7XHJcbiAgICAgICAgdmFyIGxzdywgbXN3LCBsb3dPcmRlciwgaGlnaE9yZGVyO1xyXG5cclxuICAgICAgICBsc3cgPSAoYS5sb3dPcmRlciAmIDB4RkZGRikgKyAoYi5sb3dPcmRlciAmIDB4RkZGRikgKyAoYy5sb3dPcmRlciAmIDB4RkZGRikgKyAoZC5sb3dPcmRlciAmIDB4RkZGRik7XHJcbiAgICAgICAgbXN3ID0gKGEubG93T3JkZXIgPj4+IDE2KSArIChiLmxvd09yZGVyID4+PiAxNikgKyAoYy5sb3dPcmRlciA+Pj4gMTYpICsgKGQubG93T3JkZXIgPj4+IDE2KSArIChsc3cgPj4+IDE2KTtcclxuICAgICAgICBsb3dPcmRlciA9ICgobXN3ICYgMHhGRkZGKSA8PCAxNikgfCAobHN3ICYgMHhGRkZGKTtcclxuXHJcbiAgICAgICAgbHN3ID0gKGEuaGlnaE9yZGVyICYgMHhGRkZGKSArIChiLmhpZ2hPcmRlciAmIDB4RkZGRikgKyAoYy5oaWdoT3JkZXIgJiAweEZGRkYpICsgKGQuaGlnaE9yZGVyICYgMHhGRkZGKSArIChtc3cgPj4+IDE2KTtcclxuICAgICAgICBtc3cgPSAoYS5oaWdoT3JkZXIgPj4+IDE2KSArIChiLmhpZ2hPcmRlciA+Pj4gMTYpICsgKGMuaGlnaE9yZGVyID4+PiAxNikgKyAoZC5oaWdoT3JkZXIgPj4+IDE2KSArIChsc3cgPj4+IDE2KTtcclxuICAgICAgICBoaWdoT3JkZXIgPSAoKG1zdyAmIDB4RkZGRikgPDwgMTYpIHwgKGxzdyAmIDB4RkZGRik7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgaW50NjQoaGlnaE9yZGVyLCBsb3dPcmRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2FmZV9hZGRfNShhLCBiLCBjLCBkLCBlKSB7XHJcbiAgICAgICAgdmFyIGxzdywgbXN3LCBsb3dPcmRlciwgaGlnaE9yZGVyO1xyXG5cclxuICAgICAgICBsc3cgPSAoYS5sb3dPcmRlciAmIDB4RkZGRikgKyAoYi5sb3dPcmRlciAmIDB4RkZGRikgKyAoYy5sb3dPcmRlciAmIDB4RkZGRikgKyAoZC5sb3dPcmRlciAmIDB4RkZGRikgKyAoZS5sb3dPcmRlciAmIDB4RkZGRik7XHJcbiAgICAgICAgbXN3ID0gKGEubG93T3JkZXIgPj4+IDE2KSArIChiLmxvd09yZGVyID4+PiAxNikgKyAoYy5sb3dPcmRlciA+Pj4gMTYpICsgKGQubG93T3JkZXIgPj4+IDE2KSArIChlLmxvd09yZGVyID4+PiAxNikgKyAobHN3ID4+PiAxNik7XHJcbiAgICAgICAgbG93T3JkZXIgPSAoKG1zdyAmIDB4RkZGRikgPDwgMTYpIHwgKGxzdyAmIDB4RkZGRik7XHJcblxyXG4gICAgICAgIGxzdyA9IChhLmhpZ2hPcmRlciAmIDB4RkZGRikgKyAoYi5oaWdoT3JkZXIgJiAweEZGRkYpICsgKGMuaGlnaE9yZGVyICYgMHhGRkZGKSArIChkLmhpZ2hPcmRlciAmIDB4RkZGRikgKyAoZS5oaWdoT3JkZXIgJiAweEZGRkYpICsgKG1zdyA+Pj4gMTYpO1xyXG4gICAgICAgIG1zdyA9IChhLmhpZ2hPcmRlciA+Pj4gMTYpICsgKGIuaGlnaE9yZGVyID4+PiAxNikgKyAoYy5oaWdoT3JkZXIgPj4+IDE2KSArIChkLmhpZ2hPcmRlciA+Pj4gMTYpICsgKGUuaGlnaE9yZGVyID4+PiAxNikgKyAobHN3ID4+PiAxNik7XHJcbiAgICAgICAgaGlnaE9yZGVyID0gKChtc3cgJiAweEZGRkYpIDw8IDE2KSB8IChsc3cgJiAweEZGRkYpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IGludDY0KGhpZ2hPcmRlciwgbG93T3JkZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1haih4LCB5LCB6KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBpbnQ2NChcclxuICAgICAgICAgICAgKHguaGlnaE9yZGVyICYgeS5oaWdoT3JkZXIpIF4gKHguaGlnaE9yZGVyICYgei5oaWdoT3JkZXIpIF4gKHkuaGlnaE9yZGVyICYgei5oaWdoT3JkZXIpLFxyXG4gICAgICAgICAgICAoeC5sb3dPcmRlciAmIHkubG93T3JkZXIpIF4gKHgubG93T3JkZXIgJiB6Lmxvd09yZGVyKSBeICh5Lmxvd09yZGVyICYgei5sb3dPcmRlcilcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNoKHgsIHksIHopIHtcclxuICAgICAgICByZXR1cm4gbmV3IGludDY0KFxyXG4gICAgICAgICAgICAoeC5oaWdoT3JkZXIgJiB5LmhpZ2hPcmRlcikgXiAofnguaGlnaE9yZGVyICYgei5oaWdoT3JkZXIpLFxyXG4gICAgICAgICAgICAoeC5sb3dPcmRlciAmIHkubG93T3JkZXIpIF4gKH54Lmxvd09yZGVyICYgei5sb3dPcmRlcilcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJvdHIoeCwgbikge1xyXG4gICAgICAgIGlmIChuIDw9IDMyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgaW50NjQoXHJcbiAgICAgICAgICAgICAoeC5oaWdoT3JkZXIgPj4+IG4pIHwgKHgubG93T3JkZXIgPDwgKDMyIC0gbikpLFxyXG4gICAgICAgICAgICAgKHgubG93T3JkZXIgPj4+IG4pIHwgKHguaGlnaE9yZGVyIDw8ICgzMiAtIG4pKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgaW50NjQoXHJcbiAgICAgICAgICAgICAoeC5sb3dPcmRlciA+Pj4gbikgfCAoeC5oaWdoT3JkZXIgPDwgKDMyIC0gbikpLFxyXG4gICAgICAgICAgICAgKHguaGlnaE9yZGVyID4+PiBuKSB8ICh4Lmxvd09yZGVyIDw8ICgzMiAtIG4pKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaWdtYTAoeCkge1xyXG4gICAgICAgIHZhciByb3RyMjggPSByb3RyKHgsIDI4KTtcclxuICAgICAgICB2YXIgcm90cjM0ID0gcm90cih4LCAzNCk7XHJcbiAgICAgICAgdmFyIHJvdHIzOSA9IHJvdHIoeCwgMzkpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IGludDY0KFxyXG4gICAgICAgICAgICByb3RyMjguaGlnaE9yZGVyIF4gcm90cjM0LmhpZ2hPcmRlciBeIHJvdHIzOS5oaWdoT3JkZXIsXHJcbiAgICAgICAgICAgIHJvdHIyOC5sb3dPcmRlciBeIHJvdHIzNC5sb3dPcmRlciBeIHJvdHIzOS5sb3dPcmRlclxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2lnbWExKHgpIHtcclxuICAgICAgICB2YXIgcm90cjE0ID0gcm90cih4LCAxNCk7XHJcbiAgICAgICAgdmFyIHJvdHIxOCA9IHJvdHIoeCwgMTgpO1xyXG4gICAgICAgIHZhciByb3RyNDEgPSByb3RyKHgsIDQxKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBpbnQ2NChcclxuICAgICAgICAgICAgcm90cjE0LmhpZ2hPcmRlciBeIHJvdHIxOC5oaWdoT3JkZXIgXiByb3RyNDEuaGlnaE9yZGVyLFxyXG4gICAgICAgICAgICByb3RyMTQubG93T3JkZXIgXiByb3RyMTgubG93T3JkZXIgXiByb3RyNDEubG93T3JkZXJcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdhbW1hMCh4KSB7XHJcbiAgICAgICAgdmFyIHJvdHIxID0gcm90cih4LCAxKSwgcm90cjggPSByb3RyKHgsIDgpLCBzaHI3ID0gc2hyKHgsIDcpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IGludDY0KFxyXG4gICAgICAgICAgICByb3RyMS5oaWdoT3JkZXIgXiByb3RyOC5oaWdoT3JkZXIgXiBzaHI3LmhpZ2hPcmRlcixcclxuICAgICAgICAgICAgcm90cjEubG93T3JkZXIgXiByb3RyOC5sb3dPcmRlciBeIHNocjcubG93T3JkZXJcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdhbW1hMSh4KSB7XHJcbiAgICAgICAgdmFyIHJvdHIxOSA9IHJvdHIoeCwgMTkpO1xyXG4gICAgICAgIHZhciByb3RyNjEgPSByb3RyKHgsIDYxKTtcclxuICAgICAgICB2YXIgc2hyNiA9IHNocih4LCA2KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBpbnQ2NChcclxuICAgICAgICAgICAgcm90cjE5LmhpZ2hPcmRlciBeIHJvdHI2MS5oaWdoT3JkZXIgXiBzaHI2LmhpZ2hPcmRlcixcclxuICAgICAgICAgICAgcm90cjE5Lmxvd09yZGVyIF4gcm90cjYxLmxvd09yZGVyIF4gc2hyNi5sb3dPcmRlclxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hyKHgsIG4pIHtcclxuICAgICAgICBpZiAobiA8PSAzMikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IGludDY0KFxyXG4gICAgICAgICAgICAgICAgeC5oaWdoT3JkZXIgPj4+IG4sXHJcbiAgICAgICAgICAgICAgICB4Lmxvd09yZGVyID4+PiBuIHwgKHguaGlnaE9yZGVyIDw8ICgzMiAtIG4pKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgaW50NjQoXHJcbiAgICAgICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAgICAgeC5oaWdoT3JkZXIgPDwgKDMyIC0gbilcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHN0ciA9IHV0ZjhfZW5jb2RlKHN0cik7XHJcbiAgICB2YXIgc3RybGVuID0gc3RyLmxlbmd0aCpjaGFyc2l6ZTtcclxuICAgIHN0ciA9IHN0cjJiaW5iKHN0cik7XHJcblxyXG4gICAgc3RyW3N0cmxlbiA+PiA1XSB8PSAweDgwIDw8ICgyNCAtIHN0cmxlbiAlIDMyKTtcclxuICAgIHN0clsoKChzdHJsZW4gKyAxMjgpID4+IDEwKSA8PCA1KSArIDMxXSA9IHN0cmxlbjtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkgKz0gMzIpIHtcclxuICAgICAgICBhID0gSFswXTtcclxuICAgICAgICBiID0gSFsxXTtcclxuICAgICAgICBjID0gSFsyXTtcclxuICAgICAgICBkID0gSFszXTtcclxuICAgICAgICBlID0gSFs0XTtcclxuICAgICAgICBmID0gSFs1XTtcclxuICAgICAgICBnID0gSFs2XTtcclxuICAgICAgICBoID0gSFs3XTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4MDsgaisrKSB7XHJcbiAgICAgICAgICAgIGlmIChqIDwgMTYpIHtcclxuICAgICAgICAgICAgICAgIFdbal0gPSBuZXcgaW50NjQoc3RyW2oqMiArIGldLCBzdHJbaioyICsgaSArIDFdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIFdbal0gPSBzYWZlX2FkZF80KGdhbW1hMShXW2ogLSAyXSksIFdbaiAtIDddLCBnYW1tYTAoV1tqIC0gMTVdKSwgV1tqIC0gMTZdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgVDEgPSBzYWZlX2FkZF81KGgsIHNpZ21hMShlKSwgY2goZSwgZiwgZyksIEtbal0sIFdbal0pO1xyXG4gICAgICAgICAgICBUMiA9IHNhZmVfYWRkXzIoc2lnbWEwKGEpLCBtYWooYSwgYiwgYykpO1xyXG4gICAgICAgICAgICBoID0gZztcclxuICAgICAgICAgICAgZyA9IGY7XHJcbiAgICAgICAgICAgIGYgPSBlO1xyXG4gICAgICAgICAgICBlID0gc2FmZV9hZGRfMihkLCBUMSk7XHJcbiAgICAgICAgICAgIGQgPSBjO1xyXG4gICAgICAgICAgICBjID0gYjtcclxuICAgICAgICAgICAgYiA9IGE7XHJcbiAgICAgICAgICAgIGEgPSBzYWZlX2FkZF8yKFQxLCBUMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBIWzBdID0gc2FmZV9hZGRfMihhLCBIWzBdKTtcclxuICAgICAgICBIWzFdID0gc2FmZV9hZGRfMihiLCBIWzFdKTtcclxuICAgICAgICBIWzJdID0gc2FmZV9hZGRfMihjLCBIWzJdKTtcclxuICAgICAgICBIWzNdID0gc2FmZV9hZGRfMihkLCBIWzNdKTtcclxuICAgICAgICBIWzRdID0gc2FmZV9hZGRfMihlLCBIWzRdKTtcclxuICAgICAgICBIWzVdID0gc2FmZV9hZGRfMihmLCBIWzVdKTtcclxuICAgICAgICBIWzZdID0gc2FmZV9hZGRfMihnLCBIWzZdKTtcclxuICAgICAgICBIWzddID0gc2FmZV9hZGRfMihoLCBIWzddKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgYmluYXJyYXkgPSBbXTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgSC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGJpbmFycmF5LnB1c2goSFtpXS5oaWdoT3JkZXIpO1xyXG4gICAgICAgIGJpbmFycmF5LnB1c2goSFtpXS5sb3dPcmRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGJpbmIyaGV4KGJpbmFycmF5KTtcclxufSk7XHJcblxyXG5pZiAoISBqU3VpdGVzLmxvZ2luKSB7XHJcbiAgICBqU3VpdGVzLmxvZ2luID0ge307XHJcbiAgICBqU3VpdGVzLmxvZ2luLnNoYTUxMiA9IGpTdWl0ZXMuc2hhNTEyO1xyXG59XHJcblxyXG5qU3VpdGVzLmltYWdlID0galN1aXRlcy51cGxvYWQgPSAoZnVuY3Rpb24oZWwsIG9wdGlvbnMpIHtcclxuICAgIHZhciBvYmogPSB7fTtcclxuICAgIG9iai5vcHRpb25zID0ge307XHJcblxyXG4gICAgLy8gRGVmYXVsdCBjb25maWd1cmF0aW9uXHJcbiAgICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgdHlwZTogJ2ltYWdlJyxcclxuICAgICAgICBleHRlbnNpb246ICcqJyxcclxuICAgICAgICBpbnB1dDogZmFsc2UsXHJcbiAgICAgICAgbWluV2lkdGg6IGZhbHNlLFxyXG4gICAgICAgIG1heFdpZHRoOiBudWxsLFxyXG4gICAgICAgIG1heEhlaWdodDogbnVsbCxcclxuICAgICAgICBtYXhKcGVnU2l6ZUJ5dGVzOiBudWxsLCAvLyBGb3IgZXhhbXBsZSwgMzUwS2Igd291bGQgYmUgMzUwMDAwXHJcbiAgICAgICAgb25jaGFuZ2U6IG51bGwsXHJcbiAgICAgICAgbXVsdGlwbGU6IGZhbHNlLFxyXG4gICAgICAgIHJlbW90ZVBhcnNlcjogbnVsbCxcclxuICAgICAgICB0ZXh0OntcclxuICAgICAgICAgICAgZXh0ZW5zaW9uTm90QWxsb3dlZDonVGhlIGV4dGVuc2lvbiBpcyBub3QgYWxsb3dlZCcsXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBMb29wIHRocm91Z2ggb3VyIG9iamVjdFxyXG4gICAgZm9yICh2YXIgcHJvcGVydHkgaW4gZGVmYXVsdHMpIHtcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9uc1twcm9wZXJ0eV0gPSBvcHRpb25zW3Byb3BlcnR5XTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9uc1twcm9wZXJ0eV0gPSBkZWZhdWx0c1twcm9wZXJ0eV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE11bHRpcGxlXHJcbiAgICBpZiAob2JqLm9wdGlvbnMubXVsdGlwbGUgPT0gdHJ1ZSkge1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1tdWx0aXBsZScsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbnRhaW5lclxyXG4gICAgZWwuY29udGVudCA9IFtdO1xyXG5cclxuICAgIC8vIFVwbG9hZCBpY29uXHJcbiAgICBlbC5jbGFzc0xpc3QuYWRkKCdqdXBsb2FkJyk7XHJcblxyXG4gICAgaWYgKG9iai5vcHRpb25zLmlucHV0ID09IHRydWUpIHtcclxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdpbnB1dCcpO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5hZGQgPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgLy8gUmVzZXQgY29udGFpbmVyIGZvciBzaW5nbGUgZmlsZXNcclxuICAgICAgICBpZiAob2JqLm9wdGlvbnMubXVsdGlwbGUgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgZWwuY29udGVudCA9IFtdO1xyXG4gICAgICAgICAgICBlbC5pbm5lclRleHQgPSAnJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCB0byB0aGUgZWxlbWVudFxyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy50eXBlID09ICdpbWFnZScpIHtcclxuICAgICAgICAgICAgdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgICAgICBpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBkYXRhLmZpbGUpO1xyXG4gICAgICAgICAgICBpbWcuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIC0xKTtcclxuICAgICAgICAgICAgaWYgKCEgZWwuZ2V0QXR0cmlidXRlKCduYW1lJykpIHtcclxuICAgICAgICAgICAgICAgIGltZy5jbGFzc05hbWUgPSAnamZpbGUnO1xyXG4gICAgICAgICAgICAgICAgaW1nLmNvbnRlbnQgPSBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsLmFwcGVuZENoaWxkKGltZyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGRhdGEuZmlsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGRpdi5pbm5lclRleHQgPSBuYW1lIHx8IG9iai5vcHRpb25zLnR5cGU7XHJcbiAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdqdXBsb2FkLWl0ZW0nKTtcclxuICAgICAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAtMSk7XHJcbiAgICAgICAgICAgIGVsLmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YS5jb250ZW50KSB7XHJcbiAgICAgICAgICAgIGRhdGEuZmlsZSA9IGpTdWl0ZXMuZ3VpZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUHVzaCBjb250ZW50XHJcbiAgICAgICAgZWwuY29udGVudC5wdXNoKGRhdGEpO1xyXG5cclxuICAgICAgICAvLyBPbmNoYW5nZVxyXG4gICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub25jaGFuZ2UpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgb2JqLm9wdGlvbnMub25jaGFuZ2UoZWwsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvYmouYWRkRnJvbUZpbGUgPSBmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAgICAgdmFyIHR5cGUgPSBmaWxlLnR5cGUuc3BsaXQoJy8nKTtcclxuICAgICAgICBpZiAodHlwZVswXSA9PSBvYmoub3B0aW9ucy50eXBlKSB7XHJcbiAgICAgICAgICAgIHZhciByZWFkRmlsZSA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgICAgIHJlYWRGaWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlOiB2LnNyY0VsZW1lbnQucmVzdWx0LFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbjogZmlsZS5uYW1lLnN1YnN0cihmaWxlLm5hbWUubGFzdEluZGV4T2YoJy4nKSArIDEpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBzaXplOiBmaWxlLnNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdG1vZGlmaWVkOiBmaWxlLmxhc3RNb2RpZmllZCxcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB2LnNyY0VsZW1lbnQucmVzdWx0LFxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG9iai5hZGQoZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmVhZEZpbGUucmVhZEFzRGF0YVVSTChmaWxlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhbGVydChvYmoub3B0aW9ucy50ZXh0LmV4dGVuc2lvbk5vdEFsbG93ZWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvYmouYWRkRnJvbVVybCA9IGZ1bmN0aW9uKHNyYykge1xyXG4gICAgICAgIGlmIChzcmMuc3Vic3RyKDAsNCkgIT0gJ2RhdGEnICYmICEgb2JqLm9wdGlvbnMucmVtb3RlUGFyc2VyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3JlbW90ZVBhcnNlciBub3QgZGVmaW5lZCBpbiB5b3VyIGluaXRpYWxpemF0aW9uJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpcyB0byBwcm9jZXNzIGNyb3NzIGRvbWFpbiBpbWFnZXNcclxuICAgICAgICAgICAgaWYgKHNyYy5zdWJzdHIoMCw0KSA9PSAnZGF0YScpIHtcclxuICAgICAgICAgICAgICAgIHZhciBleHRlbnNpb24gPSBzcmMuc3BsaXQoJzsnKVxyXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uID0gZXh0ZW5zaW9uWzBdLnNwbGl0KCcvJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGV4dGVuc2lvblswXS5yZXBsYWNlKCdkYXRhOicsJycpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gb2JqLm9wdGlvbnMudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlOiBzcmMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb246IGV4dGVuc2lvblsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogc3JjLFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBvYmouYWRkKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChvYmoub3B0aW9ucy50ZXh0LmV4dGVuc2lvbk5vdEFsbG93ZWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGV4dGVuc2lvbiA9IHNyYy5zdWJzdHIoc3JjLmxhc3RJbmRleE9mKCcuJykgKyAxKTtcclxuICAgICAgICAgICAgICAgIC8vIFdvcmsgZm9yIGNyb3NzIGJyb3dzZXJzXHJcbiAgICAgICAgICAgICAgICBzcmMgPSBvYmoub3B0aW9ucy5yZW1vdGVQYXJzZXIgKyBzcmM7XHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgcmVtb3ZlIGNvbnRlbnRcclxuICAgICAgICAgICAgICAgIGpTdWl0ZXMuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBzcmMsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdibG9iJyxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkKGV4dGVuc2lvblswXS5yZXBsYWNlKCdkYXRhOicsJycpLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBnZXREYXRhVVJMID0gZnVuY3Rpb24oY2FudmFzLCB0eXBlKSB7XHJcbiAgICAgICAgdmFyIGNvbXByZXNzaW9uID0gMC45MjtcclxuICAgICAgICB2YXIgbGFzdENvbnRlbnRMZW5ndGggPSBudWxsO1xyXG4gICAgICAgIHZhciBjb250ZW50ID0gY2FudmFzLnRvRGF0YVVSTCh0eXBlLCBjb21wcmVzc2lvbik7XHJcbiAgICAgICAgd2hpbGUgKG9iai5vcHRpb25zLm1heEpwZWdTaXplQnl0ZXMgJiYgdHlwZSA9PT0gJ2ltYWdlL2pwZWcnICYmXHJcbiAgICAgICAgICAgICAgIGNvbnRlbnQubGVuZ3RoID4gb2JqLm9wdGlvbnMubWF4SnBlZ1NpemVCeXRlcyAmJiBjb250ZW50Lmxlbmd0aCAhPT0gbGFzdENvbnRlbnRMZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gQXBwbHkgdGhlIGNvbXByZXNzaW9uXHJcbiAgICAgICAgICAgIGNvbXByZXNzaW9uICo9IDAuOTtcclxuICAgICAgICAgICAgbGFzdENvbnRlbnRMZW5ndGggPSBjb250ZW50Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29udGVudCA9IGNhbnZhcy50b0RhdGFVUkwodHlwZSwgY29tcHJlc3Npb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbWltZSA9IG9iai5vcHRpb25zLnR5cGUgKyAnLycgKyBvYmoub3B0aW9ucy5leHRlbnNpb247XHJcbiAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgaW5wdXQudHlwZSA9ICdmaWxlJztcclxuICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnYWNjZXB0JywgbWltZSk7XHJcbiAgICBpbnB1dC5vbmNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5maWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBvYmouYWRkRnJvbUZpbGUodGhpcy5maWxlc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFsbG93IG11bHRpcGxlIGZpbGVzXHJcbiAgICBpZiAob2JqLm9wdGlvbnMubXVsdGlwbGUgPT0gdHJ1ZSkge1xyXG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnbXVsdGlwbGUnLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgY3VycmVudCA9IG51bGw7XHJcblxyXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBjdXJyZW50ID0gbnVsbDtcclxuICAgICAgICBpZiAoISBlbC5jaGlsZHJlbi5sZW5ndGggfHwgZS50YXJnZXQgPT09IGVsKSB7XHJcbiAgICAgICAgICAgIGpTdWl0ZXMuY2xpY2soaW5wdXQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5wYXJlbnROb2RlID09IGVsKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gZS50YXJnZXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGpTdWl0ZXMuY2xpY2soaW5wdXQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGVsLnN0eWxlLmJvcmRlciA9ICcxcHggZGFzaGVkICMwMDAnO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGVsLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgI2VlZSc7XHJcbiAgICB9KTtcclxuXHJcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RvcCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlbC5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkICNlZWUnO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoY3VycmVudCAmJiBlLndoaWNoID09IDQ2KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoZWwuY2hpbGRyZW4sIGN1cnJlbnQpO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgZWwuY29udGVudC5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7ICBcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICB2YXIgaHRtbCA9IChlLm9yaWdpbmFsRXZlbnQgfHwgZSkuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvaHRtbCcpO1xyXG4gICAgICAgIHZhciBmaWxlID0gKGUub3JpZ2luYWxFdmVudCB8fCBlKS5kYXRhVHJhbnNmZXIuZmlsZXM7XHJcblxyXG4gICAgICAgIGlmIChmaWxlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGUuZGF0YVRyYW5zZmVyLmZpbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouYWRkRnJvbUZpbGUoZS5kYXRhVHJhbnNmZXIuZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChodG1sKSB7XHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5tdWx0aXBsZSA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgZWwuaW5uZXJUZXh0ID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0ZW1wIGVsZW1lbnRcclxuICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gaHRtbDtcclxuXHJcbiAgICAgICAgICAgIC8vIEV4dHJhY3QgaW1hZ2VzXHJcbiAgICAgICAgICAgIHZhciBpbWcgPSBkaXYucXVlcnlTZWxlY3RvckFsbCgnaW1nJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaW1nLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbWcubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouYWRkRnJvbVVybChpbWdbaV0uc3JjKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZWwuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCAjZWVlJztcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZWwudmFsID0gZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlbC5jb250ZW50ICYmIGVsLmNvbnRlbnQubGVuZ3RoID8gZWwuY29udGVudCA6IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gUmVzZXRcclxuICAgICAgICAgICAgZWwuaW5uZXJUZXh0ID0gJyc7XHJcbiAgICAgICAgICAgIGVsLmNvbnRlbnQgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHZhbFtpXSkgPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5hZGQoeyBmaWxlOiB2YWxbaV0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouYWRkKHZhbFtpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZih2YWwpID09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmFkZCh7IGZpbGU6IHZhbCB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBlbC51cGxvYWQgPSBlbC5pbWFnZSA9IG9iajtcclxuXHJcbiAgICByZXR1cm4gb2JqO1xyXG59KTtcclxuXHJcbmpTdWl0ZXMuaW1hZ2UuY3JlYXRlID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgaW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgZGF0YS5maWxlKTtcclxuICAgIGltZy5jbGFzc05hbWUgPSAnamZpbGUnO1xyXG4gICAgaW1nLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAtMSk7XHJcbiAgICBpbWcuY29udGVudCA9IGRhdGE7XHJcblxyXG4gICAgcmV0dXJuIGltZztcclxufVxyXG5cclxuXHJcbmpTdWl0ZXMubGF6eUxvYWRpbmcgPSAoZnVuY3Rpb24oZWwsIG9wdGlvbnMpIHtcclxuICAgIHZhciBvYmogPSB7fVxyXG5cclxuICAgIC8vIE1hbmRhdG9yeSBvcHRpb25zXHJcbiAgICBpZiAoISBvcHRpb25zLmxvYWRVcCB8fCB0eXBlb2Yob3B0aW9ucy5sb2FkVXApICE9ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBvcHRpb25zLmxvYWRVcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCEgb3B0aW9ucy5sb2FkRG93biB8fCB0eXBlb2Yob3B0aW9ucy5sb2FkRG93bikgIT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIG9wdGlvbnMubG9hZERvd24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFRpbWVyIG1zXHJcbiAgICBpZiAoISBvcHRpb25zLnRpbWVyKSB7XHJcbiAgICAgICAgb3B0aW9ucy50aW1lciA9IDEwMDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUaW1lclxyXG4gICAgdmFyIHRpbWVDb250cm9sTG9hZGluZyA9IG51bGw7XHJcblxyXG4gICAgLy8gQ29udHJvbHNcclxuICAgIHZhciBzY3JvbGxDb250cm9scyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAodGltZUNvbnRyb2xMb2FkaW5nID09IG51bGwpIHtcclxuICAgICAgICAgICAgdmFyIGV2ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSBlbC5zY3JvbGxUb3A7XHJcbiAgICAgICAgICAgIGlmIChlbC5zY3JvbGxUb3AgKyAoZWwuY2xpZW50SGVpZ2h0ICogMikgPj0gZWwuc2Nyb2xsSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5sb2FkRG93bigpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjcm9sbFRvcCA9PSBlbC5zY3JvbGxUb3ApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWwuc2Nyb2xsVG9wID0gZWwuc2Nyb2xsVG9wIC0gKGVsLmNsaWVudEhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlbC5zY3JvbGxUb3AgPD0gZWwuY2xpZW50SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5sb2FkVXAoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzY3JvbGxUb3AgPT0gZWwuc2Nyb2xsVG9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnNjcm9sbFRvcCA9IGVsLnNjcm9sbFRvcCArIChlbC5jbGllbnRIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBldmVudCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRpbWVDb250cm9sTG9hZGluZyA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB0aW1lQ29udHJvbExvYWRpbmcgPSBudWxsO1xyXG4gICAgICAgICAgICB9LCBvcHRpb25zLnRpbWVyKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihvcHRpb25zLm9udXBkYXRlKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5vbnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE9uc2Nyb2xsXHJcbiAgICBlbC5vbnNjcm9sbCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBzY3JvbGxDb250cm9scyhlKTtcclxuICAgIH1cclxuXHJcbiAgICBlbC5vbndoZWVsID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIHNjcm9sbENvbnRyb2xzKGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBvYmo7XHJcbn0pO1xyXG5cclxualN1aXRlcy5sb2FkaW5nID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIG9iaiA9IHt9O1xyXG5cclxuICAgIHZhciBsb2FkaW5nID0gbnVsbDtcclxuXHJcbiAgICBvYmouc2hvdyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICghIGxvYWRpbmcpIHtcclxuICAgICAgICAgICAgbG9hZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBsb2FkaW5nLmNsYXNzTmFtZSA9ICdqbG9hZGluZyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobG9hZGluZyk7XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLmhpZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAobG9hZGluZyAmJiBsb2FkaW5nLnBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsb2FkaW5nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG9iajtcclxufSkoKTtcclxuXHJcbmpTdWl0ZXMubWFzayA9IChmdW5jdGlvbigpIHtcclxuICAgIC8vIEN1cnJlbmN5IFxyXG4gICAgdmFyIHRva2VucyA9IHtcclxuICAgICAgICAvLyBDdXJyZW5jeSB0b2tlbnNcclxuICAgICAgICBjdXJyZW5jeTogWyAnIyguezF9KSMjMD8oLnsxfTArKT8oID87KC4qKT8pPycsICcjJyBdLFxyXG4gICAgICAgIC8vIFBlcmNlbnRhZ2VcclxuICAgICAgICBwZXJjZW50YWdlOiBbICcwezF9KC57MX0wKyk/JScgXSxcclxuICAgICAgICAvLyBOdW1iZXJcclxuICAgICAgICBudW1lcmljOiBbICcwezF9KC57MX0wKyk/JyBdLFxyXG4gICAgICAgIC8vIERhdGEgdG9rZW5zXHJcbiAgICAgICAgZGF0ZXRpbWU6IFsgJ1lZWVknLCAnWVlZJywgJ1lZJywgJ01NTU1NJywgJ01NTU0nLCAnTU1NJywgJ01NJywgJ0REREREJywgJ0REREQnLCAnREREJywgJ0REJywgJ0RZJywgJ0RBWScsICdXRCcsICdEJywgJ1EnLCAnSEgyNCcsICdISDEyJywgJ0hIJywgJ1xcXFxbSFxcXFxdJywgJ0gnLCAnQU0vUE0nLCAnUE0nLCAnQU0nLCAnTUknLCAnU1MnLCAnTVMnLCAnTU9OVEgnLCAnTU9OJywgJ1knLCAnTScgXSxcclxuICAgICAgICAvLyBPdGhlclxyXG4gICAgICAgIGdlbmVyYWw6IFsgJ0EnLCAnMCcsICdbMC05YS16QS1aXFwkXSsnLCAnLiddXHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGdldERhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5tYXNrLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignW2hdJykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIHZhciBtID0gMDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZVs0XSkge1xyXG4gICAgICAgICAgICAgICAgbSA9IHBhcnNlRmxvYXQodGhpcy5kYXRlWzRdIC8gNjApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB2ID0gcGFyc2VJbnQodGhpcy5kYXRlWzNdKSArIG07XHJcbiAgICAgICAgICAgIHYgLz0gMjQ7XHJcbiAgICAgICAgfSBlbHNlIGlmICghICh0aGlzLmRhdGVbMF0gJiYgdGhpcy5kYXRlWzFdICYmIHRoaXMuZGF0ZVsyXSkgJiYgKHRoaXMuZGF0ZVszXSB8fCB0aGlzLmRhdGVbNF0pKSB7XHJcbiAgICAgICAgICAgIHYgPSBqU3VpdGVzLnR3byh0aGlzLmRhdGVbM10pICsgJzonICsgalN1aXRlcy50d28odGhpcy5kYXRlWzRdKSArICc6JyArIGpTdWl0ZXMudHdvKHRoaXMuZGF0ZVs1XSkgXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZVswXSAmJiB0aGlzLmRhdGVbMV0gJiYgISB0aGlzLmRhdGVbMl0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVsyXSA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdiA9IGpTdWl0ZXMudHdvKHRoaXMuZGF0ZVswXSkgKyAnLScgKyBqU3VpdGVzLnR3byh0aGlzLmRhdGVbMV0pICsgJy0nICsgalN1aXRlcy50d28odGhpcy5kYXRlWzJdKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGVbM10gfHwgdGhpcy5kYXRlWzRdIHx8IHRoaXMuZGF0ZVs1XSkge1xyXG4gICAgICAgICAgICAgICAgdiArPSAnICcgKyBqU3VpdGVzLnR3byh0aGlzLmRhdGVbM10pICsgJzonICsgalN1aXRlcy50d28odGhpcy5kYXRlWzRdKSArICc6JyArIGpTdWl0ZXMudHdvKHRoaXMuZGF0ZVs1XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2O1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBpc0JsYW5rID0gZnVuY3Rpb24odikge1xyXG4gICAgICAgIHJldHVybiB2ID09PSBudWxsIHx8IHYgPT09ICcnIHx8IHYgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaXNGb3JtdWxhID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gKCcnK3ZhbHVlKS5jaGFydEF0KDApID09ICc9JztcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaXNOdW1lcmljID0gZnVuY3Rpb24odCkge1xyXG4gICAgICAgIHJldHVybiB0ID09PSAnY3VycmVuY3knIHx8IHQgPT09ICdwZXJjZW50YWdlJyB8fCB0ID09PSAnbnVtZXJpYycgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgZGVjaW1hbCBkZWZpbmVkIGluIHRoZSBtYXNrIGNvbmZpZ3VyYXRpb25cclxuICAgICAqL1xyXG4gICAgdmFyIGdldERlY2ltYWwgPSBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgaWYgKHYgJiYgTnVtYmVyKHYpID09IHYpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcuJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRlY2ltYWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZGVjaW1hbDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvY2FsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gSW50bC5OdW1iZXJGb3JtYXQodGhpcy5sb2NhbGUpLmZvcm1hdCgxLjEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZGVjaW1hbCA9IHRbMV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIHYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdiAgPSB0aGlzLm1hc2s7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IFJlZ0V4cCgnMHsxfSguezF9KTArJywgJ2lnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmV4ZWModik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgdFsxXSAmJiB0WzFdLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNhdmUgZGVjaW1hbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuZGVjaW1hbCA9IHRbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJldHVybiBkZWNpbWFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0WzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERpZCBub3QgZmluZCBhbnkgZGVjaW1hbCBsYXN0IHJlc29ydCB0aGUgZGVmYXVsdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IG5ldyBSZWdFeHAoJyMsIyMnLCAnaWcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2ICYmIHYubWF0Y2goZSkpIHx8ICcxLjEnLnRvTG9jYWxlU3RyaW5nKCkuc3Vic3RyaW5nKDEsMikgPT0gJy4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuZGVjaW1hbCA9ICcuJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5kZWNpbWFsID0gJywnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRlY2ltYWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kZWNpbWFsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgUGFyc2VWYWx1ZSA9IGZ1bmN0aW9uKHYsIGRlY2ltYWwpIHtcclxuICAgICAgICBpZiAodiA9PSAnJykge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBHZXQgZGVjaW1hbFxyXG4gICAgICAgIGlmICghIGRlY2ltYWwpIHtcclxuICAgICAgICAgICAgZGVjaW1hbCA9IGdldERlY2ltYWwuY2FsbCh0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE5ldyB2YWx1ZVxyXG4gICAgICAgIHYgPSAoJycrdikuc3BsaXQoZGVjaW1hbCk7XHJcbiAgICAgICAgdlswXSA9IHZbMF0ubWF0Y2goL1tcXC0wLTldKy9nLCAnJyk7XHJcbiAgICAgICAgaWYgKHZbMF0pIHtcclxuICAgICAgICAgICAgdlswXSA9IHZbMF0uam9pbignJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2WzBdIHx8IHZbMV0pIHtcclxuICAgICAgICAgICAgaWYgKHZbMV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdlsxXSA9IHZbMV0ubWF0Y2goL1swLTldKy9nLCAnJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodlsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZbMV0gPSB2WzFdLmpvaW4oJycpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2WzFdID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgRm9ybWF0VmFsdWUgPSBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgaWYgKHYgPT0gJycpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBHZXQgZGVjaW1hbFxyXG4gICAgICAgIHZhciBkID0gZ2V0RGVjaW1hbC5jYWxsKHRoaXMpO1xyXG4gICAgICAgIC8vIENvbnZlcnQgdmFsdWVcclxuICAgICAgICB2YXIgbyA9IE9iamVjdC5jcmVhdGUodGhpcy5vcHRpb25zIHx8IHt9KTtcclxuICAgICAgICBpZiAoISBvLm1pbmltdW1GcmFjdGlvbkRpZ2l0cykge1xyXG4gICAgICAgICAgICBvLm1pbmltdW1GcmFjdGlvbkRpZ2l0cyA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFBhcnNlIHZhbHVlXHJcbiAgICAgICAgdiA9IFBhcnNlVmFsdWUuY2FsbCh0aGlzLCB2KTtcclxuICAgICAgICBpZiAodiA9PSAnJykge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRlbXBvcmFyeSB2YWx1ZVxyXG4gICAgICAgIGlmICh2WzBdKSB7XHJcbiAgICAgICAgICAgIHZhciB0ID0gcGFyc2VGbG9hdCh2LmpvaW4oJy4nKSk7XHJcbiAgICAgICAgICAgIGlmIChvLnN0eWxlID09ICdwZXJjZW50Jykge1xyXG4gICAgICAgICAgICAgICAgdCAvPSAxMDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgdCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBuID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KHRoaXMubG9jYWxlLCBvKS5mb3JtYXQodCk7XHJcbiAgICAgICAgbiA9IG4uc3BsaXQoZCk7XHJcbiAgICAgICAgdmFyIHMgPSBuWzFdLnJlcGxhY2UoL1swLTldKi9nLCAnJyk7XHJcbiAgICAgICAgaWYgKHMpIHtcclxuICAgICAgICAgICAgblsyXSA9IHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2WzFdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgblsxXSA9IGQgKyB2WzFdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG5bMV0gPSAnJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuLmpvaW4oJycpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBGb3JtYXQgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgdmFyIHYgPSBWYWx1ZS5jYWxsKGUpO1xyXG4gICAgICAgIGlmICghIHYpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR2V0IGRlY2ltYWxcclxuICAgICAgICB2YXIgZCA9IGdldERlY2ltYWwuY2FsbCh0aGlzKTtcclxuICAgICAgICB2YXIgbiA9IEZvcm1hdFZhbHVlLmNhbGwodGhpcywgdik7XHJcbiAgICAgICAgdmFyIHQgPSAobi5sZW5ndGgpIC0gdi5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gQ2FyZXQuY2FsbChlKSArIHQ7XHJcbiAgICAgICAgLy8gU2V0IHZhbHVlIGFuZCB1cGRhdGUgY2FyZXRcclxuICAgICAgICBWYWx1ZS5jYWxsKGUsIG4sIGluZGV4LCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgRXh0cmFjdCA9IGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICAvLyBLZWVwIHRoZSByYXcgdmFsdWVcclxuICAgICAgICB2YXIgY3VycmVudCA9IFBhcnNlVmFsdWUuY2FsbCh0aGlzLCB2KTtcclxuICAgICAgICBpZiAoY3VycmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChjdXJyZW50LmpvaW4oJy4nKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FyZXQgZ2V0dGVyIGFuZCBzZXR0ZXIgbWV0aG9kc1xyXG4gICAgICovXHJcbiAgICB2YXIgQ2FyZXQgPSBmdW5jdGlvbihpbmRleCwgYWRqdXN0TnVtZXJpYykge1xyXG4gICAgICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRhZ05hbWUgPT0gJ0RJVicpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwb3MgPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHMgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzLnJhbmdlQ291bnQgIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBzLmdldFJhbmdlQXQoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwID0gci5jbG9uZVJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHAuc2VsZWN0Tm9kZUNvbnRlbnRzKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwLnNldEVuZChyLmVuZENvbnRhaW5lciwgci5lbmRPZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSBwLnRvU3RyaW5nKCkubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBwb3M7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25TdGFydDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEdldCB0aGUgY3VycmVudCB2YWx1ZVxyXG4gICAgICAgICAgICB2YXIgbiA9IFZhbHVlLmNhbGwodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZXZpZXcgdGhlIHBvc2l0aW9uXHJcbiAgICAgICAgICAgIGlmIChhZGp1c3ROdW1lcmljKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobltpXS5tYXRjaCgvW1xcLTAtOV0vZykgfHwgbltpXSA9PSAnLicgfHwgbltpXSA9PSAnLCcpIHsgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwID0gaTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHN0cmluZyBoYXMgbm8gbnVtYmVyc1xyXG4gICAgICAgICAgICAgICAgaWYgKHAgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBwID0gbi5pbmRleE9mKCcgJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID49IHApIHtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHAgKyAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBEbyBub3QgdXBkYXRlIGNhcmV0XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+IG4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IG4ubGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNldCBjYXJldFxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGFnTmFtZSA9PSAnRElWJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICByLnNldFN0YXJ0KHRoaXMuY2hpbGROb2Rlc1swXSwgaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHMucmVtb3ZlQWxsUmFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcy5hZGRSYW5nZShyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TdGFydCA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uRW5kID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWYWx1ZSBnZXR0ZXIgYW5kIHNldHRlciBtZXRob2RcclxuICAgICAqL1xyXG4gICAgdmFyIFZhbHVlID0gZnVuY3Rpb24odiwgdXBkYXRlQ2FyZXQsIGFkanVzdE51bWVyaWMpIHtcclxuICAgICAgICBpZiAodGhpcy50YWdOYW1lID09ICdESVYnKSB7XHJcbiAgICAgICAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlubmVyVGV4dDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlubmVyVGV4dCAhPT0gdikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJUZXh0ID0gdjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZUNhcmV0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENhcmV0LmNhbGwodGhpcywgdXBkYXRlQ2FyZXQsIGFkanVzdE51bWVyaWMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT09IHYpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlQ2FyZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ2FyZXQuY2FsbCh0aGlzLCB1cGRhdGVDYXJldCwgYWRqdXN0TnVtZXJpYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIExhYmVsc1xyXG4gICAgdmFyIHdlZWtEYXlzRnVsbCA9IGpTdWl0ZXMuY2FsZW5kYXIud2Vla2RheXM7XHJcbiAgICB2YXIgd2Vla0RheXMgPSBqU3VpdGVzLmNhbGVuZGFyLndlZWtkYXlzU2hvcnQ7XHJcbiAgICB2YXIgbW9udGhzRnVsbCA9IGpTdWl0ZXMuY2FsZW5kYXIubW9udGhzO1xyXG4gICAgdmFyIG1vbnRocyA9IGpTdWl0ZXMuY2FsZW5kYXIubW9udGhzU2hvcnQ7XHJcblxyXG4gICAgdmFyIHBhcnNlciA9IHtcclxuICAgICAgICAnWUVBUic6IGZ1bmN0aW9uKHYsIHMpIHtcclxuICAgICAgICAgICAgdmFyIHkgPSAnJytuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdKSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBhcnNlSW50KHYpID49IDAgJiYgcGFyc2VJbnQodikgPD0gMTApIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlc1t0aGlzLmluZGV4XS5sZW5ndGggPCBzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gKz0gdjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZXNbdGhpcy5pbmRleF0ubGVuZ3RoID09IHMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzID09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHkuc3Vic3RyKDAsMikgKyB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocyA9PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSB5LnN1YnN0cigwLDEpICsgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMgPT0gNCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB5ID0gdGhpcy52YWx1ZXNbdGhpcy5pbmRleF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVbMF0gPSB5O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnWVlZWSc6IGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICAgICAgcGFyc2VyLllFQVIuY2FsbCh0aGlzLCB2LCA0KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgICdZWVknOiBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgIHBhcnNlci5ZRUFSLmNhbGwodGhpcywgdiwgMyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnWVknOiBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgIHBhcnNlci5ZRUFSLmNhbGwodGhpcywgdiwgMik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnRklORCc6IGZ1bmN0aW9uKHYsIGEpIHtcclxuICAgICAgICAgICAgaWYgKGlzQmxhbmsodGhpcy52YWx1ZXNbdGhpcy5pbmRleF0pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSA9ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBwb3MgPSAwO1xyXG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSAodGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gKyB2KS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChhW2ldLnRvTG93ZXJDYXNlKCkuaW5kZXhPZih2YWx1ZSkgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY291bnQgPiAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSArPSB2O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvdW50ID09IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIEp1bXAgbnVtYmVyIG9mIGNoYXJzXHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IChhW3Bvc10ubGVuZ3RoIC0gdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0ubGVuZ3RoKSAtIDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uICs9IHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPSBhW3Bvc107XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcG9zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnTU1NJzogZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICB2YXIgcmV0ID0gcGFyc2VyLkZJTkQuY2FsbCh0aGlzLCB2LCBtb250aHMpO1xyXG4gICAgICAgICAgICBpZiAocmV0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVsxXSA9IHJldCArIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICdNTU1NJzogZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICB2YXIgcmV0ID0gcGFyc2VyLkZJTkQuY2FsbCh0aGlzLCB2LCBtb250aHNGdWxsKTtcclxuICAgICAgICAgICAgaWYgKHJldCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVbMV0gPSByZXQgKyAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnTU1NTU0nOiBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgIGlmIChpc0JsYW5rKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPSAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcG9zID0gMDtcclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdICsgdikudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb250aHNGdWxsLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobW9udGhzRnVsbFtpXVswXS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsdWUpID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSA9IG1vbnRoc0Z1bGxbaV1bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlWzFdID0gaSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnTU0nOiBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgIGlmIChpc0JsYW5rKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHYpID4gMSAmJiBwYXJzZUludCh2KSA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlWzFdID0gdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPSAnMCcgKyB2O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VJbnQodikgPCAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPSB2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID09IDEgJiYgcGFyc2VJbnQodikgPCAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlWzFdID0gdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gKz0gdjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID09IDAgJiYgcGFyc2VJbnQodikgPiAwICYmIHBhcnNlSW50KHYpIDwgMTApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVbMV0gPSB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSArPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ00nOiBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgIHZhciB0ZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChwYXJzZUludCh2KSA+PSAwICYmIHBhcnNlSW50KHYpIDwgMTApIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc0JsYW5rKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID0gdjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodiA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlWzFdID0gdGhpcy52YWx1ZXNbdGhpcy5pbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSA9PSAxICYmIHBhcnNlSW50KHYpIDwgMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVbMV0gPSB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSArPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSA9PSAwICYmIHBhcnNlSW50KHYpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVbMV0gPSB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSArPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ZXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUmUtdGVzdFxyXG4gICAgICAgICAgICBpZiAodGVzdCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IHBhcnNlSW50KHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdKTtcclxuICAgICAgICAgICAgICAgIGlmICh0ID4gMCAmJiB0IDwgMTIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVbMl0gPSB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVwZWF0IHRoZSBjaGFyYWN0ZXJcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uLS07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICdEJzogZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICB2YXIgdGVzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAocGFyc2VJbnQodikgPj0gMCAmJiBwYXJzZUludCh2KSA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNCbGFuayh0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSA9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHYpID4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVbMl0gPSB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID09IDMgJiYgcGFyc2VJbnQodikgPCAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVsyXSA9IHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdICs9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID09IDEgfHwgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVbMl0gPSB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSArPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSA9PSAwICYmIHBhcnNlSW50KHYpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVbMl0gPSB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSArPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ZXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUmUtdGVzdFxyXG4gICAgICAgICAgICBpZiAodGVzdCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IHBhcnNlSW50KHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdKTtcclxuICAgICAgICAgICAgICAgIGlmICh0ID4gMCAmJiB0IDwgMzIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVbMl0gPSB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVwZWF0IHRoZSBjaGFyYWN0ZXJcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uLS07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICdERCc6IGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICAgICAgaWYgKGlzQmxhbmsodGhpcy52YWx1ZXNbdGhpcy5pbmRleF0pKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQodikgPiAzICYmIHBhcnNlSW50KHYpIDwgMTApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVbMl0gPSB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSA9ICcwJyArIHY7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZUludCh2KSA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPSB2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID09IDMgJiYgcGFyc2VJbnQodikgPCAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlWzJdID0gdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gKz0gdjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCh0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSA9PSAxIHx8IHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID09IDIpICYmIHBhcnNlSW50KHYpIDwgMTApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVbMl0gPSB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSArPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPT0gMCAmJiBwYXJzZUludCh2KSA+IDAgJiYgcGFyc2VJbnQodikgPCAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVsyXSA9IHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdICs9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnREREJzogZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICBwYXJzZXIuRklORC5jYWxsKHRoaXMsIHYsIHdlZWtEYXlzKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgICdEREREJzogZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICBwYXJzZXIuRklORC5jYWxsKHRoaXMsIHYsIHdlZWtEYXlzRnVsbCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnSEgxMic6IGZ1bmN0aW9uKHYsIHR3bykge1xyXG4gICAgICAgICAgICBpZiAoaXNCbGFuayh0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJzZUludCh2KSA+IDEgJiYgcGFyc2VJbnQodikgPCAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0d28pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdiA9IDAgKyB2O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVbM10gPSB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSA9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZUludCh2KSA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPSB2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID09IDEgJiYgcGFyc2VJbnQodikgPCAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlWzNdID0gdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gKz0gdjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdIDwgMSAmJiBwYXJzZUludCh2KSA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlWzNdID0gdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gKz0gdjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICdISDI0JzogZnVuY3Rpb24odiwgdHdvKSB7XHJcbiAgICAgICAgICAgIHZhciB0ZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChwYXJzZUludCh2KSA+PSAwICYmIHBhcnNlSW50KHYpIDwgMTApIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSA9PSBudWxsIHx8IHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHYpID4gMiAmJiBwYXJzZUludCh2KSA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0d28pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSAwICsgdjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVbM10gPSB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSA9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnNlSW50KHYpIDwgMTApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID09IDIgJiYgcGFyc2VJbnQodikgPCA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVszXSA9IHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdICs9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdIDwgMiAmJiBwYXJzZUludCh2KSA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVszXSA9IHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdICs9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICdISCc6IGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICAgICAgcGFyc2VyWydISDI0J10uY2FsbCh0aGlzLCB2LCAxKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgICdIJzogZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICBwYXJzZXJbJ0hIMjQnXS5jYWxsKHRoaXMsIHYsIDApO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ1xcXFxbSFxcXFxdJzogZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSA9ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh2Lm1hdGNoKC9bMC05XS9nKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlWzNdID0gdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gKz0gdjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlc1t0aGlzLmluZGV4XS5tYXRjaCgvWzAtOV0vZykpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVbM10gPSB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVwZWF0IHRoZSBjaGFyYWN0ZXJcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uLS07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICdONjAnOiBmdW5jdGlvbih2LCBpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSA9PSBudWxsIHx8IHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQodikgPiA1ICYmIHBhcnNlSW50KHYpIDwgMTApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVbaV0gPSB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSA9ICcwJyArIHY7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZUludCh2KSA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPSB2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHYpIDwgMTApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVbaV0gPSB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSArPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICdNSSc6IGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICAgICAgcGFyc2VyLk42MC5jYWxsKHRoaXMsIHYsIDQpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ1NTJzogZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICBwYXJzZXIuTjYwLmNhbGwodGhpcywgdiwgNSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnQU0vUE0nOiBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID0gJyc7XHJcbiAgICAgICAgICAgIGlmICh2KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRlWzNdID4gMTIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSA9ICdQTSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID0gJ0FNJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnV0QnOiBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YodGhpcy52YWx1ZXNbdGhpcy5pbmRleF0pID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPSAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGFyc2VJbnQodikgPj0gMCAmJiBwYXJzZUludCh2KSA8IDcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID0gdjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZVt0aGlzLmluZGV4XS5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnMHsxfSguezF9MCspPyc6IGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICAgICAgLy8gR2V0IGRlY2ltYWxcclxuICAgICAgICAgICAgdmFyIGRlY2ltYWwgPSBnZXREZWNpbWFsLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICAgIC8vIE5lZ2F0aXZlIG51bWJlclxyXG4gICAgICAgICAgICB2YXIgbmVnID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBpZiBpcyBibGFua1xyXG4gICAgICAgICAgICBpZiAoaXNCbGFuayh0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID0gJyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPT0gJy0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmVnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgY3VycmVudCA9IFBhcnNlVmFsdWUuY2FsbCh0aGlzLCB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSwgZGVjaW1hbCk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSA9IGN1cnJlbnQuam9pbihkZWNpbWFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBOZXcgZW50cnlcclxuICAgICAgICAgICAgaWYgKHBhcnNlSW50KHYpID49IDAgJiYgcGFyc2VJbnQodikgPCAxMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdICE9ICcwJyB8fCB2ID09IGRlY2ltYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSArPSB2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRlY2ltYWwgJiYgdiA9PSBkZWNpbWFsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZXNbdGhpcy5pbmRleF0uaW5kZXhPZihkZWNpbWFsKSA9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID0gJzAnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XSArPSB2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHYgPT0gJy0nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBOZWdhdGl2ZSBzaWduZWRcclxuICAgICAgICAgICAgICAgIG5lZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChuZWcgPT09IHRydWUgJiYgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF1bMF0gIT09ICctJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPSAnLScgKyB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJzB7MX0oLnsxfTArKT8lJzogZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICBwYXJzZXJbJzB7MX0oLnsxfTArKT8nXS5jYWxsKHRoaXMsIHYpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdLm1hdGNoKC9bXFwtMC05XS9nKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdICYmIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdLmluZGV4T2YoJyUnKSA9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdICs9ICclJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICcjKC57MX0pIyMwPyguezF9MCspPyggPzsoLiopPyk/JzogZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICAvLyBQYXJzZSBudW1iZXJcclxuICAgICAgICAgICAgcGFyc2VyWycwezF9KC57MX0wKyk/J10uY2FsbCh0aGlzLCB2KTtcclxuICAgICAgICAgICAgLy8gR2V0IGRlY2ltYWxcclxuICAgICAgICAgICAgdmFyIGRlY2ltYWwgPSBnZXREZWNpbWFsLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICAgIC8vIEdldCBzZXBhcmF0b3JcclxuICAgICAgICAgICAgdmFyIHNlcGFyYXRvciA9IHRoaXMudG9rZW5zW3RoaXMuaW5kZXhdLnN1YnN0cigxLDEpO1xyXG4gICAgICAgICAgICAvLyBOZWdhdGl2ZVxyXG4gICAgICAgICAgICB2YXIgbmVnYXRpdmUgPSB0aGlzLnZhbHVlc1t0aGlzLmluZGV4XVswXSA9PT0gJy0nID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyBDdXJyZW50IHZhbHVlXHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gUGFyc2VWYWx1ZS5jYWxsKHRoaXMsIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdLCBkZWNpbWFsKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEdldCBtYWluIGFuZCBkZWNpbWFsIHBhcnRzXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50ICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgLy8gRm9ybWF0IG51bWJlclxyXG4gICAgICAgICAgICAgICAgdmFyIG4gPSBjdXJyZW50WzBdLm1hdGNoKC9bMC05XS9nKTtcclxuICAgICAgICAgICAgICAgIGlmIChuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRm9ybWF0XHJcbiAgICAgICAgICAgICAgICAgICAgbiA9IG4uam9pbignJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IG4ubGVuZ3RoIC0gMTsgaiA+PSAwIDsgai0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHQucHVzaChuW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISAocyAlIDMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnB1c2goc2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0ID0gdC5yZXZlcnNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFswXSA9IHQuam9pbignJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRbMF0uc3Vic3RyKDAsMSkgPT0gc2VwYXJhdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRbMF0gPSBjdXJyZW50WzBdLnN1YnN0cigxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRbMF0gPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBWYWx1ZVxyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPSBjdXJyZW50LmpvaW4oZGVjaW1hbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTmVnYXRpdmVcclxuICAgICAgICAgICAgICAgIGlmIChuZWdhdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID0gJy0nICsgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICcwJzogZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICBpZiAodi5tYXRjaCgvWzAtOV0vZykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID0gdjtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ1swLTlhLXpBLVokXSsnOiBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgIGlmIChpc0JsYW5rKHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPSAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMudG9rZW5zW3RoaXMuaW5kZXhdO1xyXG4gICAgICAgICAgICB2YXIgcyA9IHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdO1xyXG4gICAgICAgICAgICB2YXIgaSA9IHMubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRbaV0gPT0gdikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gKz0gdjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZXNbdGhpcy5pbmRleF0gPT0gdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID0gdDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodi5tYXRjaCgvW1xcLTAtOV0vZykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZXBlYXQgdGhlIGNoYXJhY3RlclxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24tLTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ0EnOiBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgIGlmICh2Lm1hdGNoKC9bYS16QS1aXS9naSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID0gdjtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJy4nOiBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgIHBhcnNlclsnWzAtOWEtekEtWiRdKyddLmNhbGwodGhpcywgdik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSB0b2tlbnMgaW4gdGhlIG1hc2sgc3RyaW5nXHJcbiAgICAgKi9cclxuICAgIHZhciBnZXRUb2tlbnMgPSBmdW5jdGlvbihzdHIpIHtcclxuICAgICAgICBpZiAodGhpcy50eXBlID09ICdnZW5lcmFsJykge1xyXG4gICAgICAgICAgICB2YXIgdCA9IFtdLmNvbmNhdCh0b2tlbnMuZ2VuZXJhbCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHQgPSBbXS5jb25jYXQodG9rZW5zLmN1cnJlbmN5LCB0b2tlbnMuZGF0ZXRpbWUsIHRva2Vucy5wZXJjZW50YWdlLCB0b2tlbnMubnVtZXJpYywgdG9rZW5zLmdlbmVyYWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBFeHByZXNzaW9uIHRvIGV4dHJhY3QgYWxsIHRva2VucyBmcm9tIHRoZSBzdHJpbmdcclxuICAgICAgICB2YXIgZSA9IG5ldyBSZWdFeHAodC5qb2luKCd8JyksICdnaScpO1xyXG4gICAgICAgIC8vIEV4dHJhY3RcclxuICAgICAgICByZXR1cm4gc3RyLm1hdGNoKGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBtZXRob2Qgb2Ygb25lIGdpdmVuIHRva2VuXHJcbiAgICAgKi9cclxuICAgIHZhciBnZXRNZXRob2QgPSBmdW5jdGlvbihzdHIpIHtcclxuICAgICAgICBpZiAoISB0aGlzLnR5cGUpIHtcclxuICAgICAgICAgICAgdmFyIHR5cGVzID0gT2JqZWN0LmtleXModG9rZW5zKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PSAnZ2VuZXJhbCcpIHtcclxuICAgICAgICAgICAgdmFyIHR5cGVzID0gWyAnZ2VuZXJhbCcgXTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PSAnZGF0ZXRpbWUnKSB7XHJcbiAgICAgICAgICAgIHZhciB0eXBlcyA9IFsgJ251bWVyaWMnLCAnZGF0ZXRpbWUnLCAnZ2VuZXJhbCcgXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgdHlwZXMgPSBbICdjdXJyZW5jeScsICdwZXJjZW50YWdlJywgJ251bWVyaWMnLCAnZ2VuZXJhbCcgXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZvdW5kXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRva2Vuc1t0eXBlXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBuZXcgUmVnRXhwKHRva2Vuc1t0eXBlXVtqXSwgJ2dpJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgciA9IHN0ci5tYXRjaChlKTtcclxuICAgICAgICAgICAgICAgIGlmIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogdHlwZSwgbWV0aG9kOiB0b2tlbnNbdHlwZV1bal0gfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSWRlbnRpZnkgZWFjaCBtZXRob2QgZm9yIGVhY2ggdG9rZW5cclxuICAgICAqL1xyXG4gICAgdmFyIGdldE1ldGhvZHMgPSBmdW5jdGlvbih0KSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgbSA9IGdldE1ldGhvZC5jYWxsKHRoaXMsIHRbaV0pO1xyXG4gICAgICAgICAgICBpZiAobSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobS5tZXRob2QpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENvbXBhdGliaWxpdHkgd2l0aCBleGNlbFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRbaV0gPT0gJ01NJykge1xyXG4gICAgICAgICAgICAgICAgLy8gTm90IGEgbW9udGgsIGNvcnJlY3QgdG8gbWludXRlc1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtpLTFdICYmIHJlc3VsdFtpLTFdLmluZGV4T2YoJ0gnKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2ldID0gJ01JJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0W2ktMl0gJiYgcmVzdWx0W2ktMl0uaW5kZXhPZignSCcpID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRbaV0gPSAnTUknO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHRbaSsxXSAmJiByZXN1bHRbaSsxXS5pbmRleE9mKCdTJykgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9ICdNSSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdFtpKzJdICYmIHJlc3VsdFtpKzJdLmluZGV4T2YoJ1MnKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2ldID0gJ01JJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgdHlwZSBmb3Igb25lIGdpdmVuIHRva2VuXHJcbiAgICAgKi9cclxuICAgIHZhciBnZXRUeXBlID0gZnVuY3Rpb24oc3RyKSB7XHJcbiAgICAgICAgdmFyIG0gPSBnZXRNZXRob2QuY2FsbCh0aGlzLCBzdHIpO1xyXG4gICAgICAgIGlmIChtKSB7XHJcbiAgICAgICAgICAgIHZhciB0eXBlID0gbS50eXBlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGUpIHtcclxuICAgICAgICAgICAgdmFyIG51bWVyaWMgPSAwO1xyXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIGNvcnJlY3QgdHlwZVxyXG4gICAgICAgICAgICB2YXIgdCA9IGdldFRva2Vucy5jYWxsKHRoaXMsIHN0cik7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbSA9IGdldE1ldGhvZC5jYWxsKHRoaXMsIHRbaV0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG0gJiYgaXNOdW1lcmljKG0udHlwZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBudW1lcmljKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG51bWVyaWMgPiAxKSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlID0gJ2dlbmVyYWwnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHlwZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlIGNoYXJhY3RlciBwZXIgY2hhcmFjdGVyIHVzaW5nIHRoZSBkZXRlY3RlZCB0b2tlbnMgaW4gdGhlIG1hc2tcclxuICAgICAqL1xyXG4gICAgdmFyIHBhcnNlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gUGFyc2VyIG1ldGhvZCBmb3IgdGhpcyBwb3NpdGlvblxyXG4gICAgICAgIGlmICh0eXBlb2YocGFyc2VyW3RoaXMubWV0aG9kc1t0aGlzLmluZGV4XV0pID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcGFyc2VyW3RoaXMubWV0aG9kc1t0aGlzLmluZGV4XV0uY2FsbCh0aGlzLCB0aGlzLnZhbHVlW3RoaXMucG9zaXRpb25dKTtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbisrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuaW5kZXhdID0gdGhpcy50b2tlbnNbdGhpcy5pbmRleF07XHJcbiAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGlzRm9ybXVsYSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHYgPSAoJycrdmFsdWUpWzBdO1xyXG4gICAgICAgIHJldHVybiB2ID09ICc9JyA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdG9QbGFpblN0cmluZyA9IGZ1bmN0aW9uKG51bSkge1xyXG4gICAgICAgIHJldHVybiAoJycrICtudW0pLnJlcGxhY2UoLygtPykoXFxkKilcXC4/KFxcZCopZShbKy1dXFxkKykvLFxyXG4gICAgICAgICAgZnVuY3Rpb24oYSxiLGMsZCxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlIDwgMFxyXG4gICAgICAgICAgICAgID8gYiArICcwLicgKyBBcnJheSgxLWUtYy5sZW5ndGgpLmpvaW4oMCkgKyBjICsgZFxyXG4gICAgICAgICAgICAgIDogYiArIGMgKyBkICsgQXJyYXkoZS1kLmxlbmd0aCsxKS5qb2luKDApO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXNrIGZ1bmN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge21peGVkfHN0cmluZ30gSlMgaW5wdXQgb3IgYSBzdHJpbmcgdG8gYmUgcGFyc2VkXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdHxzdHJpbmd9IFdoZW4gdGhlIGZpcnN0IHBhcmFtIGlzIGEgc3RyaW5nLCB0aGUgc2Vjb25kIGlzIHRoZSBtYXNrIG9yIG9iamVjdCB3aXRoIHRoZSBtYXNrIG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgdmFyIG9iaiA9IGZ1bmN0aW9uKGUsIGNvbmZpZywgcmV0dXJuT2JqZWN0KSB7XHJcbiAgICAgICAgLy8gT3B0aW9uc1xyXG4gICAgICAgIHZhciByID0gbnVsbDtcclxuICAgICAgICB2YXIgdCA9IG51bGw7XHJcbiAgICAgICAgdmFyIG8gPSB7XHJcbiAgICAgICAgICAgIC8vIEVsZW1lbnRcclxuICAgICAgICAgICAgaW5wdXQ6IG51bGwsXHJcbiAgICAgICAgICAgIC8vIEN1cnJlbnQgdmFsdWVcclxuICAgICAgICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgICAgICAgIC8vIE1hc2sgb3B0aW9uc1xyXG4gICAgICAgICAgICBvcHRpb25zOiB7fSxcclxuICAgICAgICAgICAgLy8gTmV3IHZhbHVlcyBmb3IgZWFjaCB0b2tlbiBmb3VuZFxyXG4gICAgICAgICAgICB2YWx1ZXM6IFtdLFxyXG4gICAgICAgICAgICAvLyBUb2tlbiBwb3NpdGlvblxyXG4gICAgICAgICAgICBpbmRleDogMCxcclxuICAgICAgICAgICAgLy8gQ2hhcmFjdGVyIHBvc2l0aW9uXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiAwLFxyXG4gICAgICAgICAgICAvLyBEYXRlIHJhdyB2YWx1ZXNcclxuICAgICAgICAgICAgZGF0ZTogWzAsMCwwLDAsMCwwXSxcclxuICAgICAgICAgICAgLy8gUmF3IG51bWJlciBmb3IgdGhlIG51bWVyaWMgdmFsdWVzXHJcbiAgICAgICAgICAgIG51bWJlcjogMCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRoaXMgaXMgYSBKYXZhU2NyaXB0IEV2ZW50XHJcbiAgICAgICAgaWYgKHR5cGVvZihlKSA9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAvLyBFbGVtZW50XHJcbiAgICAgICAgICAgIG8uaW5wdXQgPSBlLnRhcmdldDtcclxuICAgICAgICAgICAgLy8gQ3VycmVudCB2YWx1ZVxyXG4gICAgICAgICAgICBvLnZhbHVlID0gVmFsdWUuY2FsbChlLnRhcmdldCk7XHJcbiAgICAgICAgICAgIC8vIEN1cnJlbnQgY2FyZXQgcG9zaXRpb25cclxuICAgICAgICAgICAgby5jYXJldCA9IENhcmV0LmNhbGwoZS50YXJnZXQpO1xyXG4gICAgICAgICAgICAvLyBNYXNrXHJcbiAgICAgICAgICAgIGlmICh0ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLW1hc2snKSkge1xyXG4gICAgICAgICAgICAgICAgby5tYXNrID0gdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUeXBlXHJcbiAgICAgICAgICAgIGlmICh0ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKSkge1xyXG4gICAgICAgICAgICAgICAgby50eXBlID0gdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBPcHRpb25zXHJcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5tYXNrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQubWFzay5vcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgby5vcHRpb25zID0gZS50YXJnZXQubWFzay5vcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0Lm1hc2subG9jYWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgby5sb2NhbGUgPSBlLnRhcmdldC5tYXNrLmxvY2FsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIExvY2FsZVxyXG4gICAgICAgICAgICAgICAgaWYgKHQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbG9jYWxlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBvLmxvY2FsZSA9IHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG8ubWFzaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvLm9wdGlvbnMuc3R5bGUgPSBvLm1hc2s7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEV4dHJhIGNvbmZpZ3VyYXRpb25cclxuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmF0dHJpYnV0ZXMgJiYgZS50YXJnZXQuYXR0cmlidXRlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZS50YXJnZXQuYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrID0gZS50YXJnZXQuYXR0cmlidXRlc1tpXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gZS50YXJnZXQuYXR0cmlidXRlc1tpXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoay5zdWJzdHIoMCw0KSA9PSAnZGF0YScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgby5vcHRpb25zW2suc3Vic3RyKDUpXSA9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gT3B0aW9uc1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKGNvbmZpZykgPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIC8vIE1hc2tcclxuICAgICAgICAgICAgICAgIG8ubWFzayA9IGNvbmZpZztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIE1hc2tcclxuICAgICAgICAgICAgICAgIHZhciBrID0gT2JqZWN0LmtleXMoY29uZmlnKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgay5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9ba1tpXV0gPSBjb25maWdba1tpXV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YoZSkgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgZGVjaW1hbFxyXG4gICAgICAgICAgICAgICAgZ2V0RGVjaW1hbC5jYWxsKG8sIG8ubWFzayk7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXBsYWNlIHRvIHRoZSBjb3JyZWN0IGRlY2ltYWxcclxuICAgICAgICAgICAgICAgIGUgPSAoJycrZSkucmVwbGFjZSgnLicsIG8ub3B0aW9ucy5kZWNpbWFsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ3VycmVudFxyXG4gICAgICAgICAgICBvLnZhbHVlID0gZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvLmlucHV0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBWYWx1ZVxyXG4gICAgICAgICAgICAgICAgVmFsdWUuY2FsbChvLmlucHV0LCBlKTtcclxuICAgICAgICAgICAgICAgIC8vIEZvY3VzXHJcbiAgICAgICAgICAgICAgICBqU3VpdGVzLmZvY3VzKG8uaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgLy8gQ2FyZXRcclxuICAgICAgICAgICAgICAgIG8uY2FyZXQgPSBDYXJldC5jYWxsKG8uaW5wdXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBNYXNrIGRldGVjdGVkIHN0YXJ0IHRoZSBwcm9jZXNzXHJcbiAgICAgICAgaWYgKCEgaXNGb3JtdWxhKG8udmFsdWUpICYmIChvLm1hc2sgfHwgby5sb2NhbGUpKSB7XHJcbiAgICAgICAgICAgIC8vIENvbXBhdGliaWxpdHkgaXhlc1xyXG4gICAgICAgICAgICBpZiAoby5tYXNrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBMZWdhY3lcclxuICAgICAgICAgICAgICAgIG8ubWFzayA9IG8ubWFzay5yZXBsYWNlKCdbLV0nLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBFeGNlbCBtYXNrIFRPRE86IEltcHJvdmVcclxuICAgICAgICAgICAgICAgIGlmIChvLm1hc2suaW5kZXhPZignIyMnKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IG8ubWFzay5zcGxpdCgnOycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRbMF0gPSBkWzBdLnJlcGxhY2UoJyonLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRbMF0gPSBkWzBdLnJlcGxhY2UoL18vZywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkWzBdID0gZFswXS5yZXBsYWNlKC8tL2csICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZFswXSA9IGRbMF0ucmVwbGFjZSgnKCcsJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkWzBdID0gZFswXS5yZXBsYWNlKCcpJywnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRbMF0gPSBkWzBdLnJlcGxhY2UoJyMjMC4jIyMnLCcjIzAuMDAwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRbMF0gPSBkWzBdLnJlcGxhY2UoJyMjMC4jIycsJyMjMC4wMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkWzBdID0gZFswXS5yZXBsYWNlKCcjIzAuIycsJyMjMC4wJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG8ubWFzayA9IGRbMF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgdHlwZVxyXG4gICAgICAgICAgICAgICAgaWYgKCEgby50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgby50eXBlID0gZ2V0VHlwZS5jYWxsKG8sIG8ubWFzayk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgdG9rZW5zXHJcbiAgICAgICAgICAgICAgICBvLnRva2VucyA9IGdldFRva2Vucy5jYWxsKG8sIG8ubWFzayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gT24gbmV3IGlucHV0XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YoZSkgIT09ICdvYmplY3QnIHx8ICEgZS5pbnB1dFR5cGUgfHwgZS5pbnB1dFR5cGUgPT0gJ2luc2VydFRleHQnIHx8IGUuaW5wdXRUeXBlID09ICdpbnNlcnRGcm9tUGFzdGUnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTdGFydCB0cmFuZm9ybWF0aW9uXHJcbiAgICAgICAgICAgICAgICBpZiAoby5sb2NhbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoby5pbnB1dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBGb3JtYXQuY2FsbChvLCBvLmlucHV0KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBGb3JtYXRWYWx1ZS5jYWxsKG8sIG8udmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRva2Vuc1xyXG4gICAgICAgICAgICAgICAgICAgIG8ubWV0aG9kcyA9IGdldE1ldGhvZHMuY2FsbChvLCBvLnRva2Vucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR28gdGhyb3VnaCBhbGwgdG9rZXNcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoby5wb3NpdGlvbiA8IG8udmFsdWUubGVuZ3RoICYmIHR5cGVvZihvLnRva2Vuc1tvLmluZGV4XSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgYXBwcm9hdGUgcGFyc2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlLmNhbGwobyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOdW1lcmljKG8udHlwZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGxlbWVudCB0aGluZ3MgaW4gdGhlIGVuZCBvZiB0aGUgbWFza1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAodHlwZW9mKG8udG9rZW5zW28uaW5kZXhdKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZ2V0TWV0aG9kLmNhbGwobywgby50b2tlbnNbby5pbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgdC50eXBlID09ICdnZW5lcmFsJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8udmFsdWVzW28uaW5kZXhdID0gby50b2tlbnNbby5pbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZGp1c3ROdW1lcmljID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWRqdXN0TnVtZXJpYyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTmV3IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1ZhbHVlID0gby52YWx1ZXMuam9pbignJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG8uaW5wdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdCA9IG5ld1ZhbHVlLmxlbmd0aCAtIG8udmFsdWUubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYXJldCA9IG8uY2FyZXQgKyB0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhcmV0ID0gby5jYXJldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZS5jYWxsKG8uaW5wdXQsIG5ld1ZhbHVlLCBjYXJldCwgYWRqdXN0TnVtZXJpYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgcmF3IGRhdGFcclxuICAgICAgICAgICAgaWYgKG8uaW5wdXQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNOdW1lcmljKG8udHlwZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBudW1iZXJcclxuICAgICAgICAgICAgICAgICAgICBvLm51bWJlciA9IEV4dHJhY3QuY2FsbChvLCBWYWx1ZS5jYWxsKG8uaW5wdXQpKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIHRoZSByYXcgZGF0YSBhcyBhIHByb3BlcnR5IG9mIHRoZSB0YWdcclxuICAgICAgICAgICAgICAgICAgICBpZiAoby50eXBlID09ICdwZXJjZW50YWdlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbCA9IG8ubnVtYmVyIC8gMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsID0gby5udW1iZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvLnR5cGUgPT0gJ2RhdGV0aW1lJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsID0gZ2V0RGF0ZS5jYWxsKG8pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoby5kYXRlWzBdICYmIG8uZGF0ZVsxXSAmJiBvLmRhdGVbMl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgby5pbnB1dC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29tcGxldGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChsYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG8uaW5wdXQuc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgbGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJldHVybk9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRXh0cmFjdCB0aGUgdG9rZW5zIGZyb20gYSBtYXNrXHJcbiAgICBvYmoucHJlcGFyZSA9IGZ1bmN0aW9uKHN0ciwgbykge1xyXG4gICAgICAgIGlmICghIG8pIHtcclxuICAgICAgICAgICAgbyA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZ2V0VG9rZW5zLmNhbGwobywgc3RyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGx5IHRoZSBtYXNrIHRvIGEgZWxlbWVudCAobGVnYWN5KVxyXG4gICAgICovXHJcbiAgICBvYmouYXBwbHkgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgdmFyIHYgPSBWYWx1ZS5jYWxsKGUudGFyZ2V0KTtcclxuICAgICAgICBpZiAoZS5rZXkubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgdiArPSBlLmtleTtcclxuICAgICAgICB9XHJcbiAgICAgICAgVmFsdWUuY2FsbChlLnRhcmdldCwgb2JqKHYsIGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1tYXNrJykpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExlZ2FjeSBzdXBwb3J0XHJcbiAgICAgKi9cclxuICAgIG9iai5ydW4gPSBmdW5jdGlvbih2YWx1ZSwgbWFzaywgZGVjaW1hbCkge1xyXG4gICAgICAgIHJldHVybiBvYmoodmFsdWUsIHsgbWFzazogbWFzaywgZGVjaW1hbDogZGVjaW1hbCB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4dHJhY3QgbnVtYmVyIGZyb20gbWFza2VkIHN0cmluZ1xyXG4gICAgICovXHJcbiAgICBvYmouZXh0cmFjdCA9IGZ1bmN0aW9uKHYsIG9wdGlvbnMsIHJldHVybk9iamVjdCkge1xyXG4gICAgICAgIGlmIChpc0JsYW5rKHYpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mKG9wdGlvbnMpICE9ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoISBvcHRpb25zLm9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMub3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDb21wYXRpYmlsaXR5XHJcbiAgICAgICAgaWYgKCEgb3B0aW9ucy5tYXNrICYmIG9wdGlvbnMuZm9ybWF0KSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMubWFzayA9IG9wdGlvbnMuZm9ybWF0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR2V0IGRlY2ltYWxcclxuICAgICAgICBnZXREZWNpbWFsLmNhbGwob3B0aW9ucywgb3B0aW9ucy5tYXNrKTtcclxuXHJcbiAgICAgICAgdmFyIHR5cGUgPSBudWxsO1xyXG4gICAgICAgIGlmIChvcHRpb25zLnR5cGUgPT0gJ3BlcmNlbnQnIHx8IG9wdGlvbnMub3B0aW9ucy5zdHlsZSA9PSAncGVyY2VudCcpIHtcclxuICAgICAgICAgICAgdHlwZSA9ICdwZXJjZW50YWdlJztcclxuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMubWFzaykge1xyXG4gICAgICAgICAgICB0eXBlID0gZ2V0VHlwZS5jYWxsKG9wdGlvbnMsIG9wdGlvbnMubWFzayk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdkYXRldGltZScpIHtcclxuICAgICAgICAgICAgaWYgKHYgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IGpTdWl0ZXMuY2FsZW5kYXIuZ2V0RGF0ZVN0cmluZyh2YWx1ZSwgb3B0aW9ucy5tYXNrKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIG8gPSBvYmoodiwgb3B0aW9ucywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGdldERhdGUuY2FsbChvKTtcclxuICAgICAgICAgICAgaWYgKChvLmRhdGVbMF0gJiYgby5kYXRlWzFdICYmIG8uZGF0ZVsyXSkgJiYgISAoby5kYXRlWzNdIHx8IG8uZGF0ZVs0XSB8fCBvLmRhdGVbNV0pKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IGpTdWl0ZXMuY2FsZW5kYXIubm93KG8uZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGpTdWl0ZXMuY2FsZW5kYXIuZGF0ZVRvTnVtKHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gRXh0cmFjdC5jYWxsKG9wdGlvbnMsIHYpO1xyXG4gICAgICAgICAgICAvLyBQZXJjZW50YWdlXHJcbiAgICAgICAgICAgIGlmICh0eXBlID09ICdwZXJjZW50YWdlJykge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgLz0gMTAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBvID0gb3B0aW9ucztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG8udmFsdWUgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgaWYgKHJldHVybk9iamVjdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVyXHJcbiAgICAgKi9cclxuICAgIG9iai5yZW5kZXIgPSBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucywgZnVsbE1hc2spIHtcclxuICAgICAgICBpZiAoaXNCbGFuayh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZihvcHRpb25zKSAhPSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCEgb3B0aW9ucy5vcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLm9wdGlvbnMgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ29tcGF0aWJpbGl0eVxyXG4gICAgICAgIGlmICghIG9wdGlvbnMubWFzayAmJiBvcHRpb25zLmZvcm1hdCkge1xyXG4gICAgICAgICAgICBvcHRpb25zLm1hc2sgPSBvcHRpb25zLmZvcm1hdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB0eXBlID0gbnVsbDtcclxuICAgICAgICBpZiAob3B0aW9ucy50eXBlID09ICdwZXJjZW50JyB8fCBvcHRpb25zLm9wdGlvbnMuc3R5bGUgPT0gJ3BlcmNlbnQnKSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSAncGVyY2VudGFnZSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLm1hc2spIHtcclxuICAgICAgICAgICAgdHlwZSA9IGdldFR5cGUuY2FsbChvcHRpb25zLCBvcHRpb25zLm1hc2spO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSAnZGF0ZXRpbWUnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRmlsbCB3aXRoIGJsYW5rc1xyXG4gICAgICAgIHZhciBmaWxsV2l0aEJsYW5rcyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodHlwZSA9PSdkYXRldGltZScgfHwgb3B0aW9ucy50eXBlID09ICdjYWxlbmRhcicpIHtcclxuICAgICAgICAgICAgdmFyIHQgPSBqU3VpdGVzLmNhbGVuZGFyLmdldERhdGVTdHJpbmcodmFsdWUsIG9wdGlvbnMubWFzayk7XHJcbiAgICAgICAgICAgIGlmICh0KSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm1hc2sgJiYgZnVsbE1hc2spIHtcclxuICAgICAgICAgICAgICAgIGZpbGxXaXRoQmxhbmtzID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFBlcmNlbnRhZ2VcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ3BlcmNlbnRhZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSAqPSAxMDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gTnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YodmFsdWUpID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubWFzayAmJiBmdWxsTWFzaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IFJlZ0V4cCgnMHsxfSguezF9KTArJywgJ2lnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBvcHRpb25zLm1hc2subWF0Y2goZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQgJiYgZFswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkID0gZFswXS5sZW5ndGggLSAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ID0gdmFsdWUudG9GaXhlZChkKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ID0gKCcnK3ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMubG9jYWxlICYmIGZ1bGxNYXNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAoJycrdmFsdWUpLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgZFsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkWzFdID0gJzAwJztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZFsxXS5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZFsxXSArPSAnMCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdCA9IGQuam9pbignLicpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0ID0gdG9QbGFpblN0cmluZyh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IGRlY2ltYWxcclxuICAgICAgICAgICAgICAgICAgICBnZXREZWNpbWFsLmNhbGwob3B0aW9ucywgb3B0aW9ucy5tYXNrKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZXBsYWNlIHRvIHRoZSBjb3JyZWN0IGRlY2ltYWxcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vcHRpb25zLmRlY2ltYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCcuJywgb3B0aW9ucy5vcHRpb25zLmRlY2ltYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm1hc2sgJiYgZnVsbE1hc2spIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxsV2l0aEJsYW5rcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChmaWxsV2l0aEJsYW5rcykge1xyXG4gICAgICAgICAgICB2YXIgcyA9IG9wdGlvbnMubWFzay5sZW5ndGggLSB2YWx1ZS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGlmIChzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhbHVlID0gb2JqKHZhbHVlLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5zZXQgPSBmdW5jdGlvbihlLCBtKSB7XHJcbiAgICAgICAgaWYgKG0pIHtcclxuICAgICAgICAgICAgZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWFzaycsIG0pO1xyXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgdmFsdWVcclxuICAgICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHtcclxuICAgICAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1tYXNrJykgfHwgZS50YXJnZXQubWFzaykge1xyXG4gICAgICAgICAgICAgICAgb2JqKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG9iajtcclxufSkoKTtcclxuXHJcbmpTdWl0ZXMubW9kYWwgPSAoZnVuY3Rpb24oZWwsIG9wdGlvbnMpIHtcclxuICAgIHZhciBvYmogPSB7fTtcclxuICAgIG9iai5vcHRpb25zID0ge307XHJcblxyXG4gICAgLy8gRGVmYXVsdCBjb25maWd1cmF0aW9uXHJcbiAgICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgdXJsOiBudWxsLFxyXG4gICAgICAgIG9ub3BlbjogbnVsbCxcclxuICAgICAgICBvbmNsb3NlOiBudWxsLFxyXG4gICAgICAgIGNsb3NlZDogZmFsc2UsXHJcbiAgICAgICAgd2lkdGg6IG51bGwsXHJcbiAgICAgICAgaGVpZ2h0OiBudWxsLFxyXG4gICAgICAgIHRpdGxlOiBudWxsLFxyXG4gICAgICAgIHBhZGRpbmc6IG51bGwsXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIExvb3AgdGhyb3VnaCBvdXIgb2JqZWN0XHJcbiAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBkZWZhdWx0cykge1xyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zW3Byb3BlcnR5XSA9IG9wdGlvbnNbcHJvcGVydHldO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zW3Byb3BlcnR5XSA9IGRlZmF1bHRzW3Byb3BlcnR5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVGl0bGVcclxuICAgIGlmICghIG9iai5vcHRpb25zLnRpdGxlICYmIGVsLmdldEF0dHJpYnV0ZSgndGl0bGUnKSkge1xyXG4gICAgICAgIG9iai5vcHRpb25zLnRpdGxlID0gZWwuZ2V0QXR0cmlidXRlKCd0aXRsZScpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB3aGlsZSAoZWwuY2hpbGRyZW5bMF0pIHtcclxuICAgICAgICB0ZW1wLmFwcGVuZENoaWxkKGVsLmNoaWxkcmVuWzBdKTtcclxuICAgIH1cclxuXHJcbiAgICBvYmouY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgb2JqLmNvbnRlbnQuY2xhc3NOYW1lID0gJ2ptb2RhbF9jb250ZW50JztcclxuICAgIG9iai5jb250ZW50LmlubmVySFRNTCA9IGVsLmlubmVySFRNTDtcclxuXHJcbiAgICB3aGlsZSAodGVtcC5jaGlsZHJlblswXSkge1xyXG4gICAgICAgIG9iai5jb250ZW50LmFwcGVuZENoaWxkKHRlbXAuY2hpbGRyZW5bMF0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG9iai5jb250YWluZXIuY2xhc3NOYW1lID0gJ2ptb2RhbCc7XHJcbiAgICBvYmouY29udGFpbmVyLmFwcGVuZENoaWxkKG9iai5jb250ZW50KTtcclxuXHJcbiAgICBpZiAob2JqLm9wdGlvbnMucGFkZGluZykge1xyXG4gICAgICAgIG9iai5jb250ZW50LnN0eWxlLnBhZGRpbmcgPSBvYmoub3B0aW9ucy5wYWRkaW5nO1xyXG4gICAgfVxyXG4gICAgaWYgKG9iai5vcHRpb25zLndpZHRoKSB7XHJcbiAgICAgICAgb2JqLmNvbnRhaW5lci5zdHlsZS53aWR0aCA9IG9iai5vcHRpb25zLndpZHRoO1xyXG4gICAgfVxyXG4gICAgaWYgKG9iai5vcHRpb25zLmhlaWdodCkge1xyXG4gICAgICAgIG9iai5jb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gb2JqLm9wdGlvbnMuaGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgaWYgKG9iai5vcHRpb25zLnRpdGxlKSB7XHJcbiAgICAgICAgb2JqLmNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgb2JqLm9wdGlvbnMudGl0bGUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBvYmouY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ25vLXRpdGxlJyk7XHJcbiAgICB9XHJcbiAgICBlbC5pbm5lckhUTUwgPSAnJztcclxuICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICBlbC5hcHBlbmRDaGlsZChvYmouY29udGFpbmVyKTtcclxuXHJcbiAgICAvLyBCYWNrZHJvcFxyXG4gICAgdmFyIGJhY2tkcm9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBiYWNrZHJvcC5jbGFzc05hbWUgPSAnam1vZGFsX2JhY2tkcm9wJztcclxuICAgIGJhY2tkcm9wLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBvYmouY2xvc2UoKTtcclxuICAgIH1cclxuICAgIGVsLmFwcGVuZENoaWxkKGJhY2tkcm9wKTtcclxuXHJcbiAgICBvYmoub3BlbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIC8vIEZ1bGxzY3JlZW5cclxuICAgICAgICB2YXIgcmVjdCA9IG9iai5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgaWYgKGpTdWl0ZXMuZ2V0V2luZG93V2lkdGgoKSA8IHJlY3Qud2lkdGgpIHtcclxuICAgICAgICAgICAgb2JqLmNvbnRhaW5lci5zdHlsZS50b3AgPSAnJztcclxuICAgICAgICAgICAgb2JqLmNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gJyc7XHJcbiAgICAgICAgICAgIG9iai5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgnam1vZGFsX2Z1bGxzY3JlZW4nKTtcclxuICAgICAgICAgICAgalN1aXRlcy5hbmltYXRpb24uc2xpZGVCb3R0b20ob2JqLmNvbnRhaW5lciwgMSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYmFja2Ryb3Auc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEN1cnJlbnRcclxuICAgICAgICBqU3VpdGVzLm1vZGFsLmN1cnJlbnQgPSBvYmo7XHJcbiAgICAgICAgLy8gRXZlbnRcclxuICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9ub3BlbikgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy5vbm9wZW4oZWwsIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9iai5yZXNldFBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgb2JqLmNvbnRhaW5lci5zdHlsZS50b3AgPSAnJztcclxuICAgICAgICBvYmouY29udGFpbmVyLnN0eWxlLmxlZnQgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICBvYmouaXNPcGVuID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGVsLnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5jbG9zZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgLy8gQmFja2Ryb3BcclxuICAgICAgICBiYWNrZHJvcC5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgLy8gQ3VycmVudFxyXG4gICAgICAgIGpTdWl0ZXMubW9kYWwuY3VycmVudCA9IG51bGw7XHJcbiAgICAgICAgLy8gUmVtb3ZlIGZ1bGxzY3JlZW4gY2xhc3NcclxuICAgICAgICBvYmouY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2ptb2RhbF9mdWxsc2NyZWVuJyk7XHJcbiAgICAgICAgLy8gRXZlbnRcclxuICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9uY2xvc2UpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgb2JqLm9wdGlvbnMub25jbG9zZShlbCwgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCEgalN1aXRlcy5tb2RhbC5oYXNFdmVudHMpIHtcclxuICAgICAgICBqU3VpdGVzLm1vZGFsLmN1cnJlbnQgPSBvYmo7XHJcblxyXG4gICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgalN1aXRlcy5tb2RhbC5tb3VzZURvd25Db250cm9scyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgalN1aXRlcy5tb2RhbC5tb3VzZURvd25Db250cm9scyk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGpTdWl0ZXMubW9kYWwubW91c2VNb3ZlQ29udHJvbHMpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgalN1aXRlcy5tb2RhbC5tb3VzZVVwQ29udHJvbHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGpTdWl0ZXMubW9kYWwua2V5RG93bkNvbnRyb2xzKTtcclxuXHJcbiAgICAgICAgalN1aXRlcy5tb2RhbC5oYXNFdmVudHMgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvYmoub3B0aW9ucy51cmwpIHtcclxuICAgICAgICBqU3VpdGVzLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IG9iai5vcHRpb25zLnVybCxcclxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICd0ZXh0L2h0bWwnLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouY29udGVudC5pbm5lckhUTUwgPSBkYXRhO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghIG9iai5vcHRpb25zLmNsb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5vcGVuKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMuY2xvc2VkKSB7XHJcbiAgICAgICAgICAgIG9iai5vcGVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEtlZXAgb2JqZWN0IGF2YWlsYWJsZSBmcm9tIHRoZSBub2RlXHJcbiAgICBlbC5tb2RhbCA9IG9iajtcclxuXHJcbiAgICByZXR1cm4gb2JqO1xyXG59KTtcclxuXHJcbmpTdWl0ZXMubW9kYWwuY3VycmVudCA9IG51bGw7XHJcbmpTdWl0ZXMubW9kYWwucG9zaXRpb24gPSBudWxsO1xyXG5cclxualN1aXRlcy5tb2RhbC5rZXlEb3duQ29udHJvbHMgPSBmdW5jdGlvbihlKSB7XHJcbiAgICBpZiAoZS53aGljaCA9PSAyNykge1xyXG4gICAgICAgIGlmIChqU3VpdGVzLm1vZGFsLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgalN1aXRlcy5tb2RhbC5jdXJyZW50LmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5qU3VpdGVzLm1vZGFsLm1vdXNlVXBDb250cm9scyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgIGlmIChqU3VpdGVzLm1vZGFsLmN1cnJlbnQpIHtcclxuICAgICAgICBqU3VpdGVzLm1vZGFsLmN1cnJlbnQuY29udGFpbmVyLnN0eWxlLmN1cnNvciA9ICdhdXRvJztcclxuICAgIH1cclxuICAgIGpTdWl0ZXMubW9kYWwucG9zaXRpb24gPSBudWxsO1xyXG59XHJcblxyXG5qU3VpdGVzLm1vZGFsLm1vdXNlTW92ZUNvbnRyb2xzID0gZnVuY3Rpb24oZSkge1xyXG4gICAgaWYgKGpTdWl0ZXMubW9kYWwuY3VycmVudCAmJiBqU3VpdGVzLm1vZGFsLnBvc2l0aW9uKSB7XHJcbiAgICAgICAgaWYgKGUud2hpY2ggPT0gMSB8fCBlLndoaWNoID09IDMpIHtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0galN1aXRlcy5tb2RhbC5wb3NpdGlvbjtcclxuICAgICAgICAgICAgalN1aXRlcy5tb2RhbC5jdXJyZW50LmNvbnRhaW5lci5zdHlsZS50b3AgPSAocG9zaXRpb25bMV0gKyAoZS5jbGllbnRZIC0gcG9zaXRpb25bM10pICsgKHBvc2l0aW9uWzVdIC8gMikpICsgJ3B4JztcclxuICAgICAgICAgICAgalN1aXRlcy5tb2RhbC5jdXJyZW50LmNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gKHBvc2l0aW9uWzBdICsgKGUuY2xpZW50WCAtIHBvc2l0aW9uWzJdKSArIChwb3NpdGlvbls0XSAvIDIpKSArICdweCc7XHJcbiAgICAgICAgICAgIGpTdWl0ZXMubW9kYWwuY3VycmVudC5jb250YWluZXIuc3R5bGUuY3Vyc29yID0gJ21vdmUnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGpTdWl0ZXMubW9kYWwuY3VycmVudC5jb250YWluZXIuc3R5bGUuY3Vyc29yID0gJ2F1dG8nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxualN1aXRlcy5tb2RhbC5tb3VzZURvd25Db250cm9scyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgIGpTdWl0ZXMubW9kYWwucG9zaXRpb24gPSBbXTtcclxuXHJcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqbW9kYWwnKSkge1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIEdldCB0YXJnZXQgaW5mb1xyXG4gICAgICAgICAgICB2YXIgcmVjdCA9IGUudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGUuY2hhbmdlZFRvdWNoZXMgJiYgZS5jaGFuZ2VkVG91Y2hlc1swXSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gZS5jbGllbnRYO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSBlLmNsaWVudFk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyZWN0LndpZHRoIC0gKHggLSByZWN0LmxlZnQpIDwgNTAgJiYgKHkgLSByZWN0LnRvcCkgPCA1MCkge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBqU3VpdGVzLm1vZGFsLmN1cnJlbnQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCd0aXRsZScpICYmICh5IC0gcmVjdC50b3ApIDwgNTApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnNlbGVjdGlvbi5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHdpbmRvdy5nZXRTZWxlY3Rpb24gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGpTdWl0ZXMubW9kYWwucG9zaXRpb24gPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3QubGVmdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdC50b3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuY2xpZW50WCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5jbGllbnRZLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWN0LndpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWN0LmhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmpTdWl0ZXMubm90aWZpY2F0aW9uID0gKGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgIHZhciBvYmogPSB7fTtcclxuICAgIG9iai5vcHRpb25zID0ge307XHJcblxyXG4gICAgLy8gRGVmYXVsdCBjb25maWd1cmF0aW9uXHJcbiAgICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgaWNvbjogbnVsbCxcclxuICAgICAgICBuYW1lOiAnTm90aWZpY2F0aW9uJyxcclxuICAgICAgICBkYXRlOiBudWxsLFxyXG4gICAgICAgIGVycm9yOiBudWxsLFxyXG4gICAgICAgIHRpdGxlOiBudWxsLFxyXG4gICAgICAgIG1lc3NhZ2U6IG51bGwsXHJcbiAgICAgICAgdGltZW91dDogNDAwMCxcclxuICAgICAgICBhdXRvSGlkZTogdHJ1ZSxcclxuICAgICAgICBjbG9zZWFibGU6IHRydWUsXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIExvb3AgdGhyb3VnaCBvdXIgb2JqZWN0XHJcbiAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBkZWZhdWx0cykge1xyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zW3Byb3BlcnR5XSA9IG9wdGlvbnNbcHJvcGVydHldO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zW3Byb3BlcnR5XSA9IGRlZmF1bHRzW3Byb3BlcnR5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG5vdGlmaWNhdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgbm90aWZpY2F0aW9uLmNsYXNzTmFtZSA9ICdqbm90aWZpY2F0aW9uJztcclxuXHJcbiAgICBpZiAob2JqLm9wdGlvbnMuZXJyb3IpIHtcclxuICAgICAgICBub3RpZmljYXRpb24uY2xhc3NMaXN0LmFkZCgnam5vdGlmaWNhdGlvbi1lcnJvcicpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBub3RpZmljYXRpb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG5vdGlmaWNhdGlvbkNvbnRhaW5lci5jbGFzc05hbWUgPSAnam5vdGlmaWNhdGlvbi1jb250YWluZXInO1xyXG4gICAgbm90aWZpY2F0aW9uLmFwcGVuZENoaWxkKG5vdGlmaWNhdGlvbkNvbnRhaW5lcik7XHJcblxyXG4gICAgdmFyIG5vdGlmaWNhdGlvbkhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgbm90aWZpY2F0aW9uSGVhZGVyLmNsYXNzTmFtZSA9ICdqbm90aWZpY2F0aW9uLWhlYWRlcic7XHJcbiAgICBub3RpZmljYXRpb25Db250YWluZXIuYXBwZW5kQ2hpbGQobm90aWZpY2F0aW9uSGVhZGVyKTtcclxuXHJcbiAgICB2YXIgbm90aWZpY2F0aW9uSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG5vdGlmaWNhdGlvbkltYWdlLmNsYXNzTmFtZSA9ICdqbm90aWZpY2F0aW9uLWltYWdlJztcclxuICAgIG5vdGlmaWNhdGlvbkhlYWRlci5hcHBlbmRDaGlsZChub3RpZmljYXRpb25JbWFnZSk7XHJcblxyXG4gICAgaWYgKG9iai5vcHRpb25zLmljb24pIHtcclxuICAgICAgICB2YXIgbm90aWZpY2F0aW9uSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgIG5vdGlmaWNhdGlvbkljb24uc3JjID0gb2JqLm9wdGlvbnMuaWNvbjtcclxuICAgICAgICBub3RpZmljYXRpb25JbWFnZS5hcHBlbmRDaGlsZChub3RpZmljYXRpb25JY29uKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbm90aWZpY2F0aW9uTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgbm90aWZpY2F0aW9uTmFtZS5jbGFzc05hbWUgPSAnam5vdGlmaWNhdGlvbi1uYW1lJztcclxuICAgIG5vdGlmaWNhdGlvbk5hbWUuaW5uZXJIVE1MID0gb2JqLm9wdGlvbnMubmFtZTtcclxuICAgIG5vdGlmaWNhdGlvbkhlYWRlci5hcHBlbmRDaGlsZChub3RpZmljYXRpb25OYW1lKTtcclxuXHJcbiAgICBpZiAob2JqLm9wdGlvbnMuY2xvc2VhYmxlID09IHRydWUpIHtcclxuICAgICAgICB2YXIgbm90aWZpY2F0aW9uQ2xvc2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBub3RpZmljYXRpb25DbG9zZS5jbGFzc05hbWUgPSAnam5vdGlmaWNhdGlvbi1jbG9zZSc7XHJcbiAgICAgICAgbm90aWZpY2F0aW9uQ2xvc2Uub25jbGljayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBvYmouaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBub3RpZmljYXRpb25IZWFkZXIuYXBwZW5kQ2hpbGQobm90aWZpY2F0aW9uQ2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBub3RpZmljYXRpb25EYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBub3RpZmljYXRpb25EYXRlLmNsYXNzTmFtZSA9ICdqbm90aWZpY2F0aW9uLWRhdGUnO1xyXG4gICAgbm90aWZpY2F0aW9uSGVhZGVyLmFwcGVuZENoaWxkKG5vdGlmaWNhdGlvbkRhdGUpO1xyXG5cclxuICAgIHZhciBub3RpZmljYXRpb25Db250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBub3RpZmljYXRpb25Db250ZW50LmNsYXNzTmFtZSA9ICdqbm90aWZpY2F0aW9uLWNvbnRlbnQnO1xyXG4gICAgbm90aWZpY2F0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKG5vdGlmaWNhdGlvbkNvbnRlbnQpO1xyXG5cclxuICAgIGlmIChvYmoub3B0aW9ucy50aXRsZSkge1xyXG4gICAgICAgIHZhciBub3RpZmljYXRpb25UaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIG5vdGlmaWNhdGlvblRpdGxlLmNsYXNzTmFtZSA9ICdqbm90aWZpY2F0aW9uLXRpdGxlJztcclxuICAgICAgICBub3RpZmljYXRpb25UaXRsZS5pbm5lckhUTUwgPSBvYmoub3B0aW9ucy50aXRsZTtcclxuICAgICAgICBub3RpZmljYXRpb25Db250ZW50LmFwcGVuZENoaWxkKG5vdGlmaWNhdGlvblRpdGxlKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbm90aWZpY2F0aW9uTWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgbm90aWZpY2F0aW9uTWVzc2FnZS5jbGFzc05hbWUgPSAnam5vdGlmaWNhdGlvbi1tZXNzYWdlJztcclxuICAgIG5vdGlmaWNhdGlvbk1lc3NhZ2UuaW5uZXJIVE1MID0gb2JqLm9wdGlvbnMubWVzc2FnZTtcclxuICAgIG5vdGlmaWNhdGlvbkNvbnRlbnQuYXBwZW5kQ2hpbGQobm90aWZpY2F0aW9uTWVzc2FnZSk7XHJcblxyXG4gICAgb2JqLnNob3cgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5vdGlmaWNhdGlvbik7XHJcbiAgICAgICAgaWYgKGpTdWl0ZXMuZ2V0V2luZG93V2lkdGgoKSA+IDgwMCkgeyBcclxuICAgICAgICAgICAgalN1aXRlcy5hbmltYXRpb24uZmFkZUluKG5vdGlmaWNhdGlvbik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgalN1aXRlcy5hbmltYXRpb24uc2xpZGVUb3Aobm90aWZpY2F0aW9uLCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLmhpZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoalN1aXRlcy5nZXRXaW5kb3dXaWR0aCgpID4gODAwKSB7IFxyXG4gICAgICAgICAgICBqU3VpdGVzLmFuaW1hdGlvbi5mYWRlT3V0KG5vdGlmaWNhdGlvbiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobm90aWZpY2F0aW9uLnBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub3RpZmljYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChub3RpZmljYXRpb25UaW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChub3RpZmljYXRpb25UaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGpTdWl0ZXMuYW5pbWF0aW9uLnNsaWRlVG9wKG5vdGlmaWNhdGlvbiwgMCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobm90aWZpY2F0aW9uLnBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub3RpZmljYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChub3RpZmljYXRpb25UaW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChub3RpZmljYXRpb25UaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgb2JqLnNob3coKTtcclxuXHJcbiAgICBpZiAob2JqLm9wdGlvbnMuYXV0b0hpZGUgPT0gdHJ1ZSkge1xyXG4gICAgICAgIHZhciBub3RpZmljYXRpb25UaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgb2JqLmhpZGUoKTtcclxuICAgICAgICB9LCBvYmoub3B0aW9ucy50aW1lb3V0KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoalN1aXRlcy5nZXRXaW5kb3dXaWR0aCgpIDwgODAwKSB7XHJcbiAgICAgICAgbm90aWZpY2F0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJzd2lwZXVwXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgb2JqLmhpZGUoKTtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBvYmo7XHJcbn0pO1xyXG5cclxualN1aXRlcy5ub3RpZmljYXRpb24uaXNWaXNpYmxlID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qbm90aWZpY2F0aW9uJyk7XHJcbiAgICByZXR1cm4gaiAmJiBqLnBhcmVudE5vZGUgPyB0cnVlIDogZmFsc2U7XHJcbn1cclxuXHJcbi8vIE1vcmUgcGFsZXR0ZXMgaHR0cHM6Ly9jb29sb3JzLmNvLyBvciBodHRwczovL2drYS5naXRodWIuaW8vcGFsZXR0ZXMvIy8xMHxzfDAwMzc5MCwwMDU2NDcsZmZmZmUwfGZmZmZlMCxmZjAwNWUsOTMwMDNhfDF8MVxyXG5cclxualN1aXRlcy5wYWxldHRlID0gZnVuY3Rpb24obykge1xyXG4gICAgLy8gTWF0ZXJpYWxcclxuICAgIHZhciBwYWxldHRlID0ge307XHJcblxyXG4gICAgcGFsZXR0ZS5tYXRlcmlhbCA9IFtcclxuICAgICAgICBbIFwiI2ZmZWJlZVwiLCBcIiNmY2U0ZWNcIiwgXCIjZjNlNWY1XCIsIFwiI2U4ZWFmNlwiLCBcIiNlM2YyZmRcIiwgXCIjZTBmN2ZhXCIsIFwiI2UwZjJmMVwiLCBcIiNlOGY1ZTlcIiwgXCIjZjFmOGU5XCIsIFwiI2Y5ZmJlN1wiLCBcIiNmZmZkZTdcIiwgXCIjZmZmOGUxXCIsIFwiI2ZmZjNlMFwiLCBcIiNmYmU5ZTdcIiwgXCIjZWZlYmU5XCIsIFwiI2ZhZmFmYVwiLCBcIiNlY2VmZjFcIiBdLFxyXG4gICAgICAgIFsgXCIjZmZjZGQyXCIsIFwiI2Y4YmJkMFwiLCBcIiNlMWJlZTdcIiwgXCIjYzVjYWU5XCIsIFwiI2JiZGVmYlwiLCBcIiNiMmViZjJcIiwgXCIjYjJkZmRiXCIsIFwiI2M4ZTZjOVwiLCBcIiNkY2VkYzhcIiwgXCIjZjBmNGMzXCIsIFwiI2ZmZjljNFwiLCBcIiNmZmVjYjNcIiwgXCIjZmZlMGIyXCIsIFwiI2ZmY2NiY1wiLCBcIiNkN2NjYzhcIiwgXCIjZjVmNWY1XCIsIFwiI2NmZDhkY1wiIF0sXHJcbiAgICAgICAgWyBcIiNlZjlhOWFcIiwgXCIjZjQ4ZmIxXCIsIFwiI2NlOTNkOFwiLCBcIiM5ZmE4ZGFcIiwgXCIjOTBjYWY5XCIsIFwiIzgwZGVlYVwiLCBcIiM4MGNiYzRcIiwgXCIjYTVkNmE3XCIsIFwiI2M1ZTFhNVwiLCBcIiNlNmVlOWNcIiwgXCIjZmZmNTlkXCIsIFwiI2ZmZTA4MlwiLCBcIiNmZmNjODBcIiwgXCIjZmZhYjkxXCIsIFwiI2JjYWFhNFwiLCBcIiNlZWVlZWVcIiwgXCIjYjBiZWM1XCIgXSxcclxuICAgICAgICBbIFwiI2U1NzM3M1wiLCBcIiNmMDYyOTJcIiwgXCIjYmE2OGM4XCIsIFwiIzc5ODZjYlwiLCBcIiM2NGI1ZjZcIiwgXCIjNGRkMGUxXCIsIFwiIzRkYjZhY1wiLCBcIiM4MWM3ODRcIiwgXCIjYWVkNTgxXCIsIFwiI2RjZTc3NVwiLCBcIiNmZmYxNzZcIiwgXCIjZmZkNTRmXCIsIFwiI2ZmYjc0ZFwiLCBcIiNmZjhhNjVcIiwgXCIjYTE4ODdmXCIsIFwiI2UwZTBlMFwiLCBcIiM5MGE0YWVcIiBdLFxyXG4gICAgICAgIFsgXCIjZWY1MzUwXCIsIFwiI2VjNDA3YVwiLCBcIiNhYjQ3YmNcIiwgXCIjNWM2YmMwXCIsIFwiIzQyYTVmNVwiLCBcIiMyNmM2ZGFcIiwgXCIjMjZhNjlhXCIsIFwiIzY2YmI2YVwiLCBcIiM5Y2NjNjVcIiwgXCIjZDRlMTU3XCIsIFwiI2ZmZWU1OFwiLCBcIiNmZmNhMjhcIiwgXCIjZmZhNzI2XCIsIFwiI2ZmNzA0M1wiLCBcIiM4ZDZlNjNcIiwgXCIjYmRiZGJkXCIsIFwiIzc4OTA5Y1wiIF0sXHJcbiAgICAgICAgWyBcIiNmNDQzMzZcIiwgXCIjZTkxZTYzXCIsIFwiIzljMjdiMFwiLCBcIiMzZjUxYjVcIiwgXCIjMjE5NmYzXCIsIFwiIzAwYmNkNFwiLCBcIiMwMDk2ODhcIiwgXCIjNGNhZjUwXCIsIFwiIzhiYzM0YVwiLCBcIiNjZGRjMzlcIiwgXCIjZmZlYjNiXCIsIFwiI2ZmYzEwN1wiLCBcIiNmZjk4MDBcIiwgXCIjZmY1NzIyXCIsIFwiIzc5NTU0OFwiLCBcIiM5ZTllOWVcIiwgXCIjNjA3ZDhiXCIgXSxcclxuICAgICAgICBbIFwiI2U1MzkzNVwiLCBcIiNkODFiNjBcIiwgXCIjOGUyNGFhXCIsIFwiIzM5NDlhYlwiLCBcIiMxZTg4ZTVcIiwgXCIjMDBhY2MxXCIsIFwiIzAwODk3YlwiLCBcIiM0M2EwNDdcIiwgXCIjN2NiMzQyXCIsIFwiI2MwY2EzM1wiLCBcIiNmZGQ4MzVcIiwgXCIjZmZiMzAwXCIsIFwiI2ZiOGMwMFwiLCBcIiNmNDUxMWVcIiwgXCIjNmQ0YzQxXCIsIFwiIzc1NzU3NVwiLCBcIiM1NDZlN2FcIiBdLFxyXG4gICAgICAgIFsgXCIjZDMyZjJmXCIsIFwiI2MyMTg1YlwiLCBcIiM3YjFmYTJcIiwgXCIjMzAzZjlmXCIsIFwiIzE5NzZkMlwiLCBcIiMwMDk3YTdcIiwgXCIjMDA3OTZiXCIsIFwiIzM4OGUzY1wiLCBcIiM2ODlmMzhcIiwgXCIjYWZiNDJiXCIsIFwiI2ZiYzAyZFwiLCBcIiNmZmEwMDBcIiwgXCIjZjU3YzAwXCIsIFwiI2U2NGExOVwiLCBcIiM1ZDQwMzdcIiwgXCIjNjE2MTYxXCIsIFwiIzQ1NWE2NFwiIF0sXHJcbiAgICAgICAgWyBcIiNjNjI4MjhcIiwgXCIjYWQxNDU3XCIsIFwiIzZhMWI5YVwiLCBcIiMyODM1OTNcIiwgXCIjMTU2NWMwXCIsIFwiIzAwODM4ZlwiLCBcIiMwMDY5NWNcIiwgXCIjMmU3ZDMyXCIsIFwiIzU1OGIyZlwiLCBcIiM5ZTlkMjRcIiwgXCIjZjlhODI1XCIsIFwiI2ZmOGYwMFwiLCBcIiNlZjZjMDBcIiwgXCIjZDg0MzE1XCIsIFwiIzRlMzQyZVwiLCBcIiM0MjQyNDJcIiwgXCIjMzc0NzRmXCIgXSxcclxuICAgICAgICBbIFwiI2I3MWMxY1wiLCBcIiM4ODBlNGZcIiwgXCIjNGExNDhjXCIsIFwiIzFhMjM3ZVwiLCBcIiMwZDQ3YTFcIiwgXCIjMDA2MDY0XCIsIFwiIzAwNGQ0MFwiLCBcIiMxYjVlMjBcIiwgXCIjMzM2OTFlXCIsIFwiIzgyNzcxN1wiLCBcIiNmNTdmMTdcIiwgXCIjZmY2ZjAwXCIsIFwiI2U2NTEwMFwiLCBcIiNiZjM2MGNcIiwgXCIjM2UyNzIzXCIsIFwiIzIxMjEyMVwiLCBcIiMyNjMyMzhcIiBdLFxyXG4gICAgXTtcclxuXHJcbiAgICBwYWxldHRlLmZpcmUgPSBbXHJcbiAgICAgICAgW1wiMGIxYTZkXCIsXCI4NDBmMzhcIixcImI2MDcxOFwiLFwiZGUwMzBiXCIsXCJmZjBjMGNcIixcImZkNDkxY1wiLFwiZmM3NTIxXCIsXCJmYWEzMzFcIixcImZiYjUzNVwiLFwiZmZjNzNhXCJdLFxyXG4gICAgICAgIFtcIjA3MTE0N1wiLFwiNWYwYjI4XCIsXCI5MzA1MTNcIixcImJlMDMwOVwiLFwiZWYwMDAwXCIsXCJmYTM0MDNcIixcImZiNjcwYlwiLFwiZjk5OTFiXCIsXCJmYWFkMWVcIixcImZmYzEyM1wiXSxcclxuICAgICAgICBbXCIwMzA3MWVcIixcIjM3MDYxN1wiLFwiNmEwNDBmXCIsXCI5ZDAyMDhcIixcImQwMDAwMFwiLFwiZGMyZjAyXCIsXCJlODVkMDRcIixcImY0OGMwNlwiLFwiZmFhMzA3XCIsXCJmZmJhMDhcIl0sXHJcbiAgICAgICAgW1wiMDIwNjE5XCIsXCIzMjA2MTVcIixcIjYxMDQwZFwiLFwiOGMwMjA3XCIsXCJiYzAwMDBcIixcImM4MmEwMlwiLFwiZDA1MjAzXCIsXCJkYjdmMDZcIixcImUxOTQwNVwiLFwiZWZhYjAwXCJdLFxyXG4gICAgICAgIFtcIjAyMDUxNVwiLFwiMmQwNTEzXCIsXCI1ODA0MGNcIixcIjdmMDIwNlwiLFwiYWEwMDAwXCIsXCJiNjI2MDJcIixcImI5NDkwM1wiLFwiYzU3MjA1XCIsXCJjYTg1MDRcIixcImQ4OWIwMFwiXSxcclxuICAgIF1cclxuXHJcbiAgICBwYWxldHRlLmJhYnkgPSBbXHJcbiAgICAgICAgW1wiZWRkY2QyXCIsXCJmZmYxZTZcIixcImZkZTJlNFwiLFwiZmFkMmUxXCIsXCJjNWRlZGRcIixcImRiZTdlNFwiLFwiZjBlZmViXCIsXCJkNmUyZTlcIixcImJjZDRlNlwiLFwiOTljMWRlXCJdLFxyXG4gICAgICAgIFtcImUxYzRiM1wiLFwiZmZkNWI1XCIsXCJmYWI2YmFcIixcImY1YThjNFwiLFwiYWFjZWNkXCIsXCJiZmQ1Y2ZcIixcImRiZDlkMFwiLFwiYmFjZWRhXCIsXCI5ZGMwZGJcIixcIjdlYjFkNVwiXSxcclxuICAgICAgICBbXCJkYWE5OTBcIixcImZmYjc4N1wiLFwiZjg4ZTk1XCIsXCJmMjgyYTlcIixcIjhmYzRjM1wiLFwiYTNjOGJlXCIsXCJjZWM5YjNcIixcIjlkYmNjZVwiLFwiODJhY2QyXCIsXCI2NDlkY2JcIl0sXHJcbiAgICAgICAgW1wiZDY5MDcwXCIsXCJmZjljNWVcIixcImY2Njc3MFwiLFwiZjA1ZjhmXCIsXCI3NGJiYjlcIixcIjg3YmZhZVwiLFwiYzViOTkzXCIsXCI4M2FhYzNcIixcIjY5OWJjYVwiLFwiNGQ4OWMyXCJdLFxyXG4gICAgICAgIFtcImM5N2Q1ZFwiLFwiZjU4NDQzXCIsXCJlYjRkNTdcIixcImU1NGE3YlwiLFwiNjZhOWE3XCIsXCI3OGFlOWNcIixcImI1YTY3ZVwiLFwiNzU5OWIxXCIsXCI1Yzg4YjdcIixcIjQ5NzhhYVwiXSxcclxuICAgIF1cclxuXHJcbiAgICBpZiAocGFsZXR0ZVtvXSkge1xyXG4gICAgICAgIHJldHVybiBwYWxldHRlW29dO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gcGFsZXR0ZS5tYXRlcmlhbDtcclxuICAgIH1cclxufVxyXG5cclxualN1aXRlcy5waWNrZXIgPSAoZnVuY3Rpb24oZWwsIG9wdGlvbnMpIHtcclxuICAgIC8vIEFscmVhZHkgY3JlYXRlZCwgdXBkYXRlIG9wdGlvbnNcclxuICAgIGlmIChlbC5waWNrZXIpIHtcclxuICAgICAgICByZXR1cm4gZWwucGlja2VyLnNldE9wdGlvbnMob3B0aW9ucywgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTmV3IGluc3RhbmNlXHJcbiAgICB2YXIgb2JqID0geyB0eXBlOiAncGlja2VyJyB9O1xyXG4gICAgb2JqLm9wdGlvbnMgPSB7fTtcclxuXHJcbiAgICB2YXIgZHJvcGRvd25IZWFkZXIgPSBudWxsO1xyXG4gICAgdmFyIGRyb3Bkb3duQ29udGVudCA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgdGhlIGNvbnRlbnQgb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICB2YXIgY3JlYXRlQ29udGVudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGRyb3Bkb3duQ29udGVudC5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGl0ZW1zXHJcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmoub3B0aW9ucy5kYXRhKTtcclxuXHJcbiAgICAgICAgLy8gR28gdGhvdWdoIGFsbCBvcHRpb25zXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIEl0ZW1cclxuICAgICAgICAgICAgdmFyIGRyb3Bkb3duSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBkcm9wZG93bkl0ZW0uY2xhc3NMaXN0LmFkZCgnanBpY2tlci1pdGVtJyk7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duSXRlbS5rID0ga2V5c1tpXTtcclxuICAgICAgICAgICAgZHJvcGRvd25JdGVtLnYgPSBvYmoub3B0aW9ucy5kYXRhW2tleXNbaV1dO1xyXG4gICAgICAgICAgICAvLyBMYWJlbFxyXG4gICAgICAgICAgICBkcm9wZG93bkl0ZW0uaW5uZXJIVE1MID0gb2JqLmdldExhYmVsKGtleXNbaV0pO1xyXG4gICAgICAgICAgICAvLyBBcHBlbmRcclxuICAgICAgICAgICAgZHJvcGRvd25Db250ZW50LmFwcGVuZENoaWxkKGRyb3Bkb3duSXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IG9yIHJlc2V0IHRoZSBvcHRpb25zIGZvciB0aGUgcGlja2VyXHJcbiAgICAgKi9cclxuICAgIG9iai5zZXRPcHRpb25zID0gZnVuY3Rpb24ob3B0aW9ucywgcmVzZXQpIHtcclxuICAgICAgICAvLyBEZWZhdWx0IGNvbmZpZ3VyYXRpb25cclxuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIHZhbHVlOiAwLFxyXG4gICAgICAgICAgICBkYXRhOiBudWxsLFxyXG4gICAgICAgICAgICByZW5kZXI6IG51bGwsXHJcbiAgICAgICAgICAgIG9uY2hhbmdlOiBudWxsLFxyXG4gICAgICAgICAgICBvbnNlbGVjdDogbnVsbCxcclxuICAgICAgICAgICAgb25vcGVuOiBudWxsLFxyXG4gICAgICAgICAgICBvbmNsb3NlOiBudWxsLFxyXG4gICAgICAgICAgICBvbmxvYWQ6IG51bGwsXHJcbiAgICAgICAgICAgIHdpZHRoOiBudWxsLFxyXG4gICAgICAgICAgICBoZWFkZXI6IHRydWUsXHJcbiAgICAgICAgICAgIHJpZ2h0OiBmYWxzZSxcclxuICAgICAgICAgICAgY29udGVudDogZmFsc2UsXHJcbiAgICAgICAgICAgIGNvbHVtbnM6IG51bGwsXHJcbiAgICAgICAgICAgIGhlaWdodDogbnVsbCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIExlZ2FjeSBwdXJwb3NlIG9ubHlcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLm9wdGlvbnMpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gb3B0aW9ucy5vcHRpb25zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHRoZSBpbml0aWFsIGNvbmZpZ3VyYXRpb25cclxuICAgICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBkZWZhdWx0cykge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgb2JqLm9wdGlvbnNbcHJvcGVydHldID0gb3B0aW9uc1twcm9wZXJ0eV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zW3Byb3BlcnR5XSkgPT0gJ3VuZGVmaW5lZCcgfHwgcmVzZXQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9uc1twcm9wZXJ0eV0gPSBkZWZhdWx0c1twcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFN0YXJ0IHVzaW5nIHRoZSBvcHRpb25zXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLmhlYWRlciA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgZHJvcGRvd25IZWFkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkcm9wZG93bkhlYWRlci5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBXaWR0aFxyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy53aWR0aCkge1xyXG4gICAgICAgICAgICBkcm9wZG93bkhlYWRlci5zdHlsZS53aWR0aCA9IHBhcnNlSW50KG9iai5vcHRpb25zLndpZHRoKSArICdweCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZHJvcGRvd25IZWFkZXIuc3R5bGUud2lkdGggPSAnJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEhlaWdodFxyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5oZWlnaHQpIHtcclxuICAgICAgICAgICAgZHJvcGRvd25Db250ZW50LnN0eWxlLm1heEhlaWdodCA9IG9iai5vcHRpb25zLmhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duQ29udGVudC5zdHlsZS5vdmVyZmxvdyA9ICdzY3JvbGwnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duQ29udGVudC5zdHlsZS5vdmVyZmxvdyA9ICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLmNvbHVtbnMgPiAwKSB7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duQ29udGVudC5jbGFzc0xpc3QuYWRkKCdqcGlja2VyLWNvbHVtbnMnKTtcclxuICAgICAgICAgICAgZHJvcGRvd25Db250ZW50LnN0eWxlLndpZHRoID0gIG9iai5vcHRpb25zLndpZHRoID8gb2JqLm9wdGlvbnMud2lkdGggOiAzNiAqIG9iai5vcHRpb25zLmNvbHVtbnMgKyAncHgnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGlzTmFOKG9iai5vcHRpb25zLnZhbHVlKSkge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy52YWx1ZSA9ICcwJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBsaXN0IGZyb20gZGF0YVxyXG4gICAgICAgIGNyZWF0ZUNvbnRlbnQoKTtcclxuXHJcbiAgICAgICAgLy8gU2V0IHZhbHVlXHJcbiAgICAgICAgb2JqLnNldFZhbHVlKG9iai5vcHRpb25zLnZhbHVlKTtcclxuXHJcbiAgICAgICAgLy8gU2V0IG9wdGlvbnMgYWxsIHJldHVybnMgdGhlIG93biBpbnN0YW5jZVxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLmdldFZhbHVlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iai5vcHRpb25zLnZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5zZXRWYWx1ZSA9IGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICAvLyBTZXQgbGFiZWxcclxuICAgICAgICBvYmouc2V0TGFiZWwodik7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSB2YWx1ZVxyXG4gICAgICAgIG9iai5vcHRpb25zLnZhbHVlID0gU3RyaW5nKHYpO1xyXG5cclxuICAgICAgICAvLyBMZW1vbmFkZSBKU1xyXG4gICAgICAgIGlmIChlbC52YWx1ZSAhPSBvYmoub3B0aW9ucy52YWx1ZSkge1xyXG4gICAgICAgICAgICBlbC52YWx1ZSA9IG9iai5vcHRpb25zLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKGVsLm9uY2hhbmdlKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBlbC5vbmNoYW5nZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoYW5nZScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBlbCxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZWwudmFsdWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZHJvcGRvd25Db250ZW50LmNoaWxkcmVuW3ZdLmdldEF0dHJpYnV0ZSgndHlwZScpICE9PSAnZ2VuZXJpYycpIHtcclxuICAgICAgICAgICAgb2JqLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9iai5nZXRMYWJlbCA9IGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICB2YXIgbGFiZWwgPSBvYmoub3B0aW9ucy5kYXRhW3ZdIHx8IG51bGw7XHJcbiAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5yZW5kZXIpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgbGFiZWwgPSBvYmoub3B0aW9ucy5yZW5kZXIobGFiZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbGFiZWw7XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLnNldExhYmVsID0gZnVuY3Rpb24odikge1xyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5jb250ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBsYWJlbCA9ICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zXCI+JyArIG9iai5vcHRpb25zLmNvbnRlbnQgKyAnPC9pPic7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGxhYmVsID0gb2JqLmdldExhYmVsKHYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZHJvcGRvd25IZWFkZXIuaW5uZXJIVE1MID0gbGFiZWw7XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLm9wZW4gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoISBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2pwaWNrZXItZm9jdXMnKSkge1xyXG4gICAgICAgICAgICAvLyBTdGFydCB0cmFja2luZyB0aGUgZWxlbWVudFxyXG4gICAgICAgICAgICBqU3VpdGVzLnRyYWNraW5nKG9iaiwgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBPcGVuIHBpY2tlclxyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdqcGlja2VyLWZvY3VzJyk7XHJcbiAgICAgICAgICAgIGVsLmZvY3VzKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVjdEhlYWRlciA9IGRyb3Bkb3duSGVhZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICB2YXIgcmVjdENvbnRlbnQgPSBkcm9wZG93bkNvbnRlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCByZWN0SGVhZGVyLmJvdHRvbSArIHJlY3RDb250ZW50LmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25Db250ZW50LnN0eWxlLm1hcmdpblRvcCA9IC0xICogKHJlY3RDb250ZW50LmhlaWdodCArIDQpICsgJ3B4JztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duQ29udGVudC5zdHlsZS5tYXJnaW5Ub3AgPSByZWN0SGVhZGVyLmhlaWdodCArIDIgKyAncHgnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMucmlnaHQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duQ29udGVudC5zdHlsZS5tYXJnaW5MZWZ0ID0gLTEgKiByZWN0Q29udGVudC53aWR0aCArIDI0ICsgJ3B4JztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmoub3B0aW9ucy5vbm9wZW4gPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMub25vcGVuKGVsLCBvYmopO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9iai5jbG9zZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2pwaWNrZXItZm9jdXMnKSkge1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdqcGlja2VyLWZvY3VzJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBTdGFydCB0cmFja2luZyB0aGUgZWxlbWVudFxyXG4gICAgICAgICAgICBqU3VpdGVzLnRyYWNraW5nKG9iaiwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmoub3B0aW9ucy5vbmNsb3NlID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm9uY2xvc2UoZWwsIG9iaik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgZmxvYXRpbmcgcGlja2VyXHJcbiAgICAgKi9cclxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gQ2xhc3NcclxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdqcGlja2VyJyk7XHJcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICc5MDAnKTtcclxuICAgICAgICBlbC5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgaWYgKCEgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcGlja2VyLWZvY3VzJykpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcGVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIERyb3Bkb3duIEhlYWRlclxyXG4gICAgICAgIGRyb3Bkb3duSGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgZHJvcGRvd25IZWFkZXIuY2xhc3NMaXN0LmFkZCgnanBpY2tlci1oZWFkZXInKTtcclxuXHJcbiAgICAgICAgLy8gRHJvcGRvd24gY29udGVudFxyXG4gICAgICAgIGRyb3Bkb3duQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGRyb3Bkb3duQ29udGVudC5jbGFzc0xpc3QuYWRkKCdqcGlja2VyLWNvbnRlbnQnKTtcclxuICAgICAgICBkcm9wZG93bkNvbnRlbnQub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBqU3VpdGVzLmZpbmRFbGVtZW50KGUudGFyZ2V0LCAnanBpY2tlci1pdGVtJyk7XHJcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5wYXJlbnROb2RlID09PSBkcm9wZG93bkNvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgbGFiZWxcclxuICAgICAgICAgICAgICAgICAgICBvYmouc2V0VmFsdWUoaXRlbS5rKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDYWxsIG1ldGhvZFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub25jaGFuZ2UpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMub25jaGFuZ2UuY2FsbChvYmosIGVsLCBvYmosIGl0ZW0udiwgaXRlbS52LCBpdGVtLmspO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIGNvbnRlbnQgYW5kIGhlYWRlclxyXG4gICAgICAgIGVsLmFwcGVuZENoaWxkKGRyb3Bkb3duSGVhZGVyKTtcclxuICAgICAgICBlbC5hcHBlbmRDaGlsZChkcm9wZG93bkNvbnRlbnQpO1xyXG5cclxuICAgICAgICAvLyBEZWZhdWx0IHZhbHVlXHJcbiAgICAgICAgZWwudmFsdWUgPSBvcHRpb25zLnZhbHVlIHx8IDA7XHJcblxyXG4gICAgICAgIC8vIFNldCBvcHRpb25zXHJcbiAgICAgICAgb2JqLnNldE9wdGlvbnMob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub25sb2FkKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zLm9ubG9hZChlbCwgb2JqKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoYW5nZVxyXG4gICAgICAgIGVsLmNoYW5nZSA9IG9iai5zZXRWYWx1ZTtcclxuXHJcbiAgICAgICAgLy8gR2xvYmFsIGdlbmVyaWMgdmFsdWUgaGFuZGxlclxyXG4gICAgICAgIGVsLnZhbCA9IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmouZ2V0VmFsdWUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9iai5zZXRWYWx1ZSh2YWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZWZlcmVuY2VcclxuICAgICAgICBlbC5waWNrZXIgPSBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpO1xyXG5cclxuICAgIHJldHVybiBvYmo7XHJcbn0pO1xyXG5cclxualN1aXRlcy5wcm9ncmVzc2JhciA9IChmdW5jdGlvbihlbCwgb3B0aW9ucykge1xyXG4gICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgb2JqLm9wdGlvbnMgPSB7fTtcclxuXHJcbiAgICAvLyBEZWZhdWx0IGNvbmZpZ3VyYXRpb25cclxuICAgIHZhciBkZWZhdWx0cyA9IHtcclxuICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICBvbmNoYW5nZTogbnVsbCxcclxuICAgICAgICB3aWR0aDogbnVsbCxcclxuICAgIH07XHJcblxyXG4gICAgLy8gTG9vcCB0aHJvdWdoIHRoZSBpbml0aWFsIGNvbmZpZ3VyYXRpb25cclxuICAgIGZvciAodmFyIHByb3BlcnR5IGluIGRlZmF1bHRzKSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgb2JqLm9wdGlvbnNbcHJvcGVydHldID0gb3B0aW9uc1twcm9wZXJ0eV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb2JqLm9wdGlvbnNbcHJvcGVydHldID0gZGVmYXVsdHNbcHJvcGVydHldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBDbGFzc1xyXG4gICAgZWwuY2xhc3NMaXN0LmFkZCgnanByb2dyZXNzYmFyJyk7XHJcbiAgICBlbC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgMSk7XHJcbiAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnLCBvYmoub3B0aW9ucy52YWx1ZSk7XHJcblxyXG4gICAgdmFyIGJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgYmFyLnN0eWxlLndpZHRoID0gb2JqLm9wdGlvbnMudmFsdWUgKyAnJSc7XHJcbiAgICBiYXIuc3R5bGUuY29sb3IgPSAnI2ZmZic7XHJcbiAgICBlbC5hcHBlbmRDaGlsZChiYXIpO1xyXG5cclxuICAgIGlmIChvYmoub3B0aW9ucy53aWR0aCkge1xyXG4gICAgICAgIGVsLnN0eWxlLndpZHRoID0gb2JqLm9wdGlvbnMud2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2V0IHZhbHVlXHJcbiAgICBvYmouc2V0VmFsdWUgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHZhbHVlID0gcGFyc2VJbnQodmFsdWUpO1xyXG4gICAgICAgIG9iai5vcHRpb25zLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgYmFyLnN0eWxlLndpZHRoID0gdmFsdWUgKyAnJSc7XHJcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgdmFsdWUgKyAnJScpO1xyXG5cclxuICAgICAgICBpZiAodmFsdWUgPCA2KSB7XHJcbiAgICAgICAgICAgIGVsLnN0eWxlLmNvbG9yID0gJyMwMDAnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVsLnN0eWxlLmNvbG9yID0gJyNmZmYnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHZhbHVlXHJcbiAgICAgICAgb2JqLm9wdGlvbnMudmFsdWUgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbmNoYW5nZSkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy5vbmNoYW5nZShlbCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTGVtb25hZGUgSlNcclxuICAgICAgICBpZiAoZWwudmFsdWUgIT0gb2JqLm9wdGlvbnMudmFsdWUpIHtcclxuICAgICAgICAgICAgZWwudmFsdWUgPSBvYmoub3B0aW9ucy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZihlbC5vbmNoYW5nZSkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgZWwub25jaGFuZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGFuZ2UnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVsLnZhbHVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvYmouZ2V0VmFsdWUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gb2JqLm9wdGlvbnMudmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGFjdGlvbiA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoZS53aGljaCkge1xyXG4gICAgICAgICAgICAvLyBHZXQgdGFyZ2V0IGluZm9cclxuICAgICAgICAgICAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlLmNoYW5nZWRUb3VjaGVzICYmIGUuY2hhbmdlZFRvdWNoZXNbMF0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IGUuY2xpZW50WDtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gZS5jbGllbnRZO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvYmouc2V0VmFsdWUoTWF0aC5yb3VuZCgoeCAtIHJlY3QubGVmdCkgLyByZWN0LndpZHRoICogMTAwKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEV2ZW50c1xyXG4gICAgaWYgKCd0b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgPT09IHRydWUpIHtcclxuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgYWN0aW9uKTtcclxuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGFjdGlvbik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGFjdGlvbik7XHJcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBhY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoYW5nZVxyXG4gICAgZWwuY2hhbmdlID0gb2JqLnNldFZhbHVlO1xyXG5cclxuICAgIC8vIEdsb2JhbCBnZW5lcmljIHZhbHVlIGhhbmRsZXJcclxuICAgIGVsLnZhbCA9IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqLmdldFZhbHVlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb2JqLnNldFZhbHVlKHZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlZmVyZW5jZVxyXG4gICAgZWwucHJvZ3Jlc3NiYXIgPSBvYmo7XHJcblxyXG4gICAgcmV0dXJuIG9iajtcclxufSk7XHJcblxyXG5qU3VpdGVzLnJhdGluZyA9IChmdW5jdGlvbihlbCwgb3B0aW9ucykge1xyXG4gICAgLy8gQWxyZWFkeSBjcmVhdGVkLCB1cGRhdGUgb3B0aW9uc1xyXG4gICAgaWYgKGVsLnJhdGluZykge1xyXG4gICAgICAgIHJldHVybiBlbC5yYXRpbmcuc2V0T3B0aW9ucyhvcHRpb25zLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBOZXcgaW5zdGFuY2VcclxuICAgIHZhciBvYmogPSB7fTtcclxuICAgIG9iai5vcHRpb25zID0ge307XHJcblxyXG4gICAgb2JqLnNldE9wdGlvbnMgPSBmdW5jdGlvbihvcHRpb25zLCByZXNldCkge1xyXG4gICAgICAgIC8vIERlZmF1bHQgY29uZmlndXJhdGlvblxyXG4gICAgICAgIHZhciBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgbnVtYmVyOiA1LFxyXG4gICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgdG9vbHRpcDogWyAnVmVyeSBiYWQnLCAnQmFkJywgJ0F2ZXJhZ2UnLCAnR29vZCcsICdWZXJ5IGdvb2QnIF0sXHJcbiAgICAgICAgICAgIG9uY2hhbmdlOiBudWxsLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgaW5pdGlhbCBjb25maWd1cmF0aW9uXHJcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gZGVmYXVsdHMpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zW3Byb3BlcnR5XSA9IG9wdGlvbnNbcHJvcGVydHldO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9uc1twcm9wZXJ0eV0pID09ICd1bmRlZmluZWQnIHx8IHJlc2V0ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnNbcHJvcGVydHldID0gZGVmYXVsdHNbcHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIGNvbnRhaW5lciBpcyBlbXB0eVxyXG4gICAgICAgIGVsLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgICAvLyBBZGQgZWxlbWVudHNcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5vcHRpb25zLm51bWJlcjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSgnZGF0YS1pbmRleCcsIChpICsgMSkpXHJcbiAgICAgICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgb2JqLm9wdGlvbnMudG9vbHRpcFtpXSlcclxuICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNlbGVjdGVkIG9wdGlvblxyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy52YWx1ZSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5vcHRpb25zLm51bWJlcjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IG9iai5vcHRpb25zLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuY2hpbGRyZW5baV0uY2xhc3NMaXN0LmFkZCgnanJhdGluZy1zZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNldCB2YWx1ZVxyXG4gICAgb2JqLnNldFZhbHVlID0gZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5vcHRpb25zLm51bWJlcjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpIDwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGVsLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5hZGQoJ2pyYXRpbmctc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2pyYXRpbmctb3ZlcicpO1xyXG4gICAgICAgICAgICAgICAgZWwuY2hpbGRyZW5baV0uY2xhc3NMaXN0LnJlbW92ZSgnanJhdGluZy1zZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvYmoub3B0aW9ucy52YWx1ZSA9IGluZGV4O1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9uY2hhbmdlKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zLm9uY2hhbmdlKGVsLCBpbmRleCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBMZW1vbmFkZSBKU1xyXG4gICAgICAgIGlmIChlbC52YWx1ZSAhPSBvYmoub3B0aW9ucy52YWx1ZSkge1xyXG4gICAgICAgICAgICBlbC52YWx1ZSA9IG9iai5vcHRpb25zLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKGVsLm9uY2hhbmdlKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBlbC5vbmNoYW5nZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoYW5nZScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBlbCxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZWwudmFsdWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9iai5nZXRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBvYmoub3B0aW9ucy52YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIFN0YXJ0IHBsdWdpblxyXG4gICAgICAgIG9iai5zZXRPcHRpb25zKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAvLyBDbGFzc1xyXG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2pyYXRpbmcnKTtcclxuXHJcbiAgICAgICAgLy8gRXZlbnRzXHJcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWluZGV4Jyk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSBvYmoub3B0aW9ucy52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5zZXRWYWx1ZSgwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnNldFZhbHVlKGluZGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWluZGV4Jyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLm9wdGlvbnMubnVtYmVyOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbC5jaGlsZHJlbltpXS5jbGFzc0xpc3QuYWRkKCdqcmF0aW5nLW92ZXInKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuY2hpbGRyZW5baV0uY2xhc3NMaXN0LnJlbW92ZSgnanJhdGluZy1vdmVyJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmoub3B0aW9ucy5udW1iZXI7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZWwuY2hpbGRyZW5baV0uY2xhc3NMaXN0LnJlbW92ZSgnanJhdGluZy1vdmVyJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQ2hhbmdlXHJcbiAgICAgICAgZWwuY2hhbmdlID0gb2JqLnNldFZhbHVlO1xyXG5cclxuICAgICAgICAvLyBHbG9iYWwgZ2VuZXJpYyB2YWx1ZSBoYW5kbGVyXHJcbiAgICAgICAgZWwudmFsID0gZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iai5nZXRWYWx1ZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb2JqLnNldFZhbHVlKHZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZmVyZW5jZVxyXG4gICAgICAgIGVsLnJhdGluZyA9IG9iajtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCk7XHJcblxyXG4gICAgcmV0dXJuIG9iajtcclxufSk7XHJcblxyXG5cclxualN1aXRlcy5zZWFyY2ggPSAoZnVuY3Rpb24oZWwsIG9wdGlvbnMpIHtcclxuICAgIGlmIChlbC5zZWFyY2gpIHtcclxuICAgICAgICByZXR1cm4gZWwuc2VhcmNoO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBpbmRleCA9ICBudWxsO1xyXG5cclxuICAgIHZhciBzZWxlY3QgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnanNlYXJjaF9pdGVtJykpIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0LnBhcmVudE5vZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvYmouc2VsZWN0SW5kZXgoZWxlbWVudCk7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBjcmVhdGVMaXN0ID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIC8vIFJlc2V0IGNvbnRhaW5lclxyXG4gICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAvLyBQcmludCByZXN1bHRzXHJcbiAgICAgICAgaWYgKCEgZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gU2hvdyBjb250YWluZXJcclxuICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFNob3cgY29udGFpbmVyXHJcbiAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG5cclxuICAgICAgICAgICAgLy8gU2hvdyBpdGVtcyAob25seSAxMClcclxuICAgICAgICAgICAgdmFyIGxlbiA9IGRhdGEubGVuZ3RoIDwgMTEgPyBkYXRhLmxlbmd0aCA6IDEwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKGRhdGFbaV0pID09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRleHQgPSBkYXRhW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGRhdGFbaV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIExlZ2FjeVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0ID0gZGF0YVtpXS50ZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIHRleHQgJiYgZGF0YVtpXS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBkYXRhW2ldLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGRhdGFbaV0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgdmFsdWUgJiYgZGF0YVtpXS5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGRhdGFbaV0uaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCdkYXRhLXRleHQnLCB0ZXh0KTtcclxuICAgICAgICAgICAgICAgIGRpdi5jbGFzc05hbWUgPSAnanNlYXJjaF9pdGVtJztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVtpXS5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ2lkJywgZGF0YVtpXS5pZClcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuZm9yY2VTZWxlY3QgJiYgaSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVtpXS5pbWFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSBkYXRhW2ldLmltYWdlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpbWcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChpbWcpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmlubmVySFRNTCA9IHRleHQ7XHJcbiAgICAgICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoaXRlbSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQXBwZW5kIGl0ZW0gdG8gdGhlIGNvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGV4ZWN1dGUgPSBmdW5jdGlvbihzdHIpIHtcclxuICAgICAgICBpZiAoc3RyICE9IG9iai50ZXJtcykge1xyXG4gICAgICAgICAgICAvLyBOZXcgdGVybXNcclxuICAgICAgICAgICAgb2JqLnRlcm1zID0gc3RyO1xyXG4gICAgICAgICAgICAvLyBOZXcgaW5kZXhcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmZvcmNlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQXJyYXkgb3IgcmVtb3RlIHNlYXJjaFxyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmoub3B0aW9ucy5kYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRlc3QgPSBmdW5jdGlvbihvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZihvKSA9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKCcnK28pLnRvTG93ZXJDYXNlKCkuc2VhcmNoKHN0ci50b0xvd2VyQ2FzZSgpKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBvW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKCcnK3ZhbHVlKS50b0xvd2VyQ2FzZSgpLnNlYXJjaChzdHIudG9Mb3dlckNhc2UoKSkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IG9iai5vcHRpb25zLmRhdGEuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVzdChpdGVtKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFNob3cgaXRlbXNcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUxpc3QocmVzdWx0cyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgcmVtb3ZlIHJlc3VsdHNcclxuICAgICAgICAgICAgICAgIGpTdWl0ZXMuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBvYmoub3B0aW9ucy5kYXRhICsgc3RyLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNob3cgaXRlbXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlTGlzdChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBTZWFyY2ggdGltZXJcclxuICAgIHZhciB0aW1lciA9IG51bGw7XHJcblxyXG4gICAgLy8gU2VhcmNoIG1ldGhvZHNcclxuICAgIHZhciBvYmogPSBmdW5jdGlvbihzdHIpIHtcclxuICAgICAgICBpZiAodGltZXIpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBleGVjdXRlKHN0cik7XHJcbiAgICAgICAgfSwgNTAwKTtcclxuICAgIH1cclxuICAgIGlmKG9wdGlvbnMuZm9yY2VTZWxlY3QgPT09IG51bGwpIHtcclxuICAgICAgICBvcHRpb25zLmZvcmNlU2VsZWN0ID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIG9iai5vcHRpb25zID0ge1xyXG4gICAgICAgIGRhdGE6IG9wdGlvbnMuZGF0YSB8fCBudWxsLFxyXG4gICAgICAgIGlucHV0OiBvcHRpb25zLmlucHV0IHx8IG51bGwsXHJcbiAgICAgICAgb25zZWxlY3Q6IG9wdGlvbnMub25zZWxlY3QgfHwgbnVsbCxcclxuICAgICAgICBmb3JjZVNlbGVjdDogb3B0aW9ucy5mb3JjZVNlbGVjdCxcclxuICAgIH07XHJcblxyXG4gICAgb2JqLnNlbGVjdEluZGV4ID0gZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgIHZhciBpZCA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdpZCcpO1xyXG4gICAgICAgIHZhciB0ZXh0ID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGV4dCcpO1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJyk7XHJcbiAgICAgICAgLy8gT25zZWxlY3RcclxuICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9uc2VsZWN0KSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zLm9uc2VsZWN0KG9iaiwgdGV4dCwgdmFsdWUsIGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ2xvc2UgY29udGFpbmVyXHJcbiAgICAgICAgb2JqLmNsb3NlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLm9wZW4gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgIH1cclxuXHJcbiAgICBvYmouY2xvc2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAodGltZXIpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ3VycmVudCB0ZXJtc1xyXG4gICAgICAgIG9iai50ZXJtcyA9ICcnO1xyXG4gICAgICAgIC8vIFJlbW92ZSByZXN1bHRzXHJcbiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIC8vIEhpZGVcclxuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLmlzT3BlbmVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGVsLnN0eWxlLmRpc3BsYXkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLmtleWRvd24gPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKG9iai5pc09wZW5lZCgpKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleSA9PSAnRW50ZXInKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBFbnRlclxyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4IT09bnVsbCAmJiBjb250YWluZXIuY2hpbGRyZW5baW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnNlbGVjdEluZGV4KGNvbnRhaW5lci5jaGlsZHJlbltpbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1VwJykge1xyXG4gICAgICAgICAgICAgICAgLy8gVXBcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCE9PW51bGwgJiYgY29udGFpbmVyLmNoaWxkcmVuWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNoaWxkcmVuW2luZGV4XS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFvYmoub3B0aW9ucy5mb3JjZVNlbGVjdCAmJiBpbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBNYXRoLm1heCgwLCBpbmRleC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNoaWxkcmVuW2luZGV4XS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0Fycm93RG93bicpIHtcclxuICAgICAgICAgICAgICAgIC8vIERvd25cclxuICAgICAgICAgICAgICAgIGlmKGluZGV4ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IC0xO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuY2hpbGRyZW5baW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCA5ICYmIGNvbnRhaW5lci5jaGlsZHJlbltpbmRleCsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuY2hpbGRyZW5baW5kZXhdLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLmtleXVwID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5pbnB1dCkge1xyXG4gICAgICAgICAgICBvYmoob2JqLm9wdGlvbnMuaW5wdXQudmFsdWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEN1cnJlbnQgbm9kZVxyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IGpTdWl0ZXMuZ2V0Tm9kZSgpO1xyXG4gICAgICAgICAgICBpZiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgb2JqKG5vZGUuaW5uZXJUZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQWRkIGV2ZW50c1xyXG4gICAgaWYgKG9iai5vcHRpb25zLmlucHV0KSB7XHJcbiAgICAgICAgb2JqLm9wdGlvbnMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIG9iai5rZXl1cCk7XHJcbiAgICAgICAgb2JqLm9wdGlvbnMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgb2JqLmtleWRvd24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFwcGVuZCBlbGVtZW50XHJcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnanNlYXJjaF9jb250YWluZXInKTtcclxuICAgIGNvbnRhaW5lci5vbm1vdXNlZG93biA9IHNlbGVjdDtcclxuICAgIGVsLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XHJcblxyXG4gICAgZWwuY2xhc3NMaXN0LmFkZCgnanNlYXJjaCcpO1xyXG4gICAgZWwuc2VhcmNoID0gb2JqO1xyXG5cclxuICAgIHJldHVybiBvYmo7XHJcbn0pO1xyXG5cclxuXHJcbmpTdWl0ZXMuc2xpZGVyID0gKGZ1bmN0aW9uKGVsLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgb2JqID0ge307XHJcbiAgICBvYmoub3B0aW9ucyA9IHt9O1xyXG4gICAgb2JqLmN1cnJlbnRJbWFnZSA9IG51bGw7XHJcblxyXG4gICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgICBvYmoub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRm9jdXNcclxuICAgIGVsLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnOTAwJylcclxuXHJcbiAgICAvLyBJdGVtc1xyXG4gICAgb2JqLm9wdGlvbnMuaXRlbXMgPSBbXTtcclxuXHJcbiAgICBpZiAoISBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzbGlkZXInKSkge1xyXG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2pzbGlkZXInKTtcclxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCd1bnNlbGVjdGFibGUnKTtcclxuXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLmhlaWdodCkge1xyXG4gICAgICAgICAgICBlbC5zdHlsZS5taW5IZWlnaHQgPSBvYmoub3B0aW9ucy5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy53aWR0aCkge1xyXG4gICAgICAgICAgICBlbC5zdHlsZS53aWR0aCA9IG9iai5vcHRpb25zLndpZHRoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JqLm9wdGlvbnMuZ3JpZCkge1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdqc2xpZGVyLWdyaWQnKTtcclxuICAgICAgICAgICAgdmFyIG51bWJlciA9IGVsLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICAgICAgaWYgKG51bWJlciA+IDQpIHtcclxuICAgICAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS10b3RhbCcsIG51bWJlciAtIDQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1udW1iZXInLCAobnVtYmVyID4gNCA/IDQgOiBudW1iZXIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFkZCBzbGlkZXIgY291bnRlclxyXG4gICAgICAgIHZhciBjb3VudGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgY291bnRlci5jbGFzc0xpc3QuYWRkKCdqc2xpZGVyLWNvdW50ZXInKTtcclxuXHJcbiAgICAgICAgLy8gTW92ZSBjaGlsZHJlbiBpbnNpZGVcclxuICAgICAgICBpZiAoZWwuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBLZWVwIGNoaWxkcmVuIGl0ZW1zXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWwuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLml0ZW1zLnB1c2goZWwuY2hpbGRyZW5baV0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBjb3VudGVyIGNsaWNrIGV2ZW50XHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoY291bnRlci5jaGlsZHJlbikuaW5kZXhPZih0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBvYmouc2hvdyhvYmouY3VycmVudEltYWdlID0gb2JqLm9wdGlvbnMuaXRlbXNbaW5kZXhdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvdW50ZXIuYXBwZW5kQ2hpbGQoaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkIGNhcHRpb25cclxuICAgICAgICB2YXIgY2FwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGNhcHRpb24uY2xhc3NOYW1lID0gJ2pzbGlkZXItY2FwdGlvbic7XHJcblxyXG4gICAgICAgIC8vIEFkZCBjbG9zZSBidXR0b21cclxuICAgICAgICB2YXIgY29udHJvbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB2YXIgY2xvc2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjbG9zZS5jbGFzc05hbWUgPSAnanNsaWRlci1jbG9zZSc7XHJcbiAgICAgICAgY2xvc2UuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY2xvc2Uub25jbGljayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBvYmouY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29udHJvbHMuYXBwZW5kQ2hpbGQoY2FwdGlvbik7XHJcbiAgICAgICAgY29udHJvbHMuYXBwZW5kQ2hpbGQoY2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai51cGRhdGVDb3VudGVyID0gZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50ZXIuY2hpbGRyZW4ubGVuZ3RoOyBpICsrKSB7XHJcbiAgICAgICAgICAgIGlmIChjb3VudGVyLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5jb250YWlucygnanNsaWRlci1jb3VudGVyLWZvY3VzJykpIHtcclxuICAgICAgICAgICAgICAgIGNvdW50ZXIuY2hpbGRyZW5baV0uY2xhc3NMaXN0LnJlbW92ZSgnanNsaWRlci1jb3VudGVyLWZvY3VzJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb3VudGVyLmNoaWxkcmVuW2luZGV4XS5jbGFzc0xpc3QuYWRkKCdqc2xpZGVyLWNvdW50ZXItZm9jdXMnKTtcclxuICAgIH1cclxuXHJcbiAgICBvYmouc2hvdyA9IGZ1bmN0aW9uKHRhcmdldCkge1xyXG4gICAgICAgIGlmICghIHRhcmdldCkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZWwuY2hpbGRyZW5bMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGb2N1cyBlbGVtZW50XHJcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnanNsaWRlci1mb2N1cycpO1xyXG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2pzbGlkZXItZ3JpZCcpO1xyXG4gICAgICAgIGVsLmFwcGVuZENoaWxkKGNvbnRyb2xzKTtcclxuICAgICAgICBlbC5hcHBlbmRDaGlsZChjb3VudGVyKTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIGNvdW50ZXJcclxuICAgICAgICB2YXIgaW5kZXggPSBvYmoub3B0aW9ucy5pdGVtcy5pbmRleE9mKHRhcmdldCk7XHJcbiAgICAgICAgb2JqLnVwZGF0ZUNvdW50ZXIoaW5kZXgpO1xyXG5cclxuICAgICAgICAvLyBSZW1vdmUgZGlzcGxheVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWwuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZWwuY2hpbGRyZW5baV0uc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcblxyXG4gICAgICAgIC8vIElzIHRoZXJlIGFueSBwcmV2aW91c1xyXG4gICAgICAgIGlmICh0YXJnZXQucHJldmlvdXNFbGVtZW50U2libGluZykge1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdqc2xpZGVyLWxlZnQnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdqc2xpZGVyLWxlZnQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElzIHRoZXJlIGFueSBuZXh0XHJcbiAgICAgICAgaWYgKHRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcgJiYgdGFyZ2V0Lm5leHRFbGVtZW50U2libGluZy50YWdOYW1lID09ICdJTUcnKSB7XHJcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2pzbGlkZXItcmlnaHQnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdqc2xpZGVyLXJpZ2h0Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvYmouY3VycmVudEltYWdlID0gdGFyZ2V0O1xyXG5cclxuICAgICAgICAvLyBWZXJ0aWNhbCBpbWFnZVxyXG4gICAgICAgIGlmIChvYmouY3VycmVudEltYWdlLm9mZnNldEhlaWdodCA+IG9iai5jdXJyZW50SW1hZ2Uub2Zmc2V0V2lkdGgpIHtcclxuICAgICAgICAgICAgb2JqLmN1cnJlbnRJbWFnZS5jbGFzc0xpc3QuYWRkKCdqc2xpZGVyLXZlcnRpY2FsJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb250cm9scy5jaGlsZHJlblswXS5pbm5lclRleHQgPSBvYmouY3VycmVudEltYWdlLmdldEF0dHJpYnV0ZSgndGl0bGUnKTtcclxuICAgIH1cclxuXHJcbiAgICBvYmoub3BlbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG9iai5zaG93KCk7XHJcblxyXG4gICAgICAgIC8vIEV2ZW50XHJcbiAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbm9wZW4pID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgb2JqLm9wdGlvbnMub25vcGVuKGVsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLmNsb3NlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gUmVtb3ZlIGNvbnRyb2wgY2xhc3Nlc1xyXG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2pzbGlkZXItZm9jdXMnKTtcclxuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdqc2xpZGVyLWxlZnQnKTtcclxuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdqc2xpZGVyLXJpZ2h0Jyk7XHJcbiAgICAgICAgLy8gU2hvdyBhcyBhIGdyaWQgZGVwZW5kaW5nIG9uIHRoZSBjb25maWd1cmF0aW9uXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLmdyaWQpIHtcclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnanNsaWRlci1ncmlkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFJlbW92ZSBkaXNwbGF5XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBlbC5jaGlsZHJlbltpXS5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFJlbW92ZSBjb250cm9scyBmcm9tIHRoZSBjb21wb25lbnRcclxuICAgICAgICBjb3VudGVyLnJlbW92ZSgpO1xyXG4gICAgICAgIGNvbnRyb2xzLnJlbW92ZSgpO1xyXG4gICAgICAgIC8vIEN1cnJlbnQgaW1hZ2VcclxuICAgICAgICBvYmouY3VycmVudEltYWdlID0gbnVsbDtcclxuICAgICAgICAvLyBFdmVudFxyXG4gICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub25jbG9zZSkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy5vbmNsb3NlKGVsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLnJlc2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZWwuaW5uZXJIVE1MID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLm5leHQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgbmV4dEltYWdlID0gb2JqLmN1cnJlbnRJbWFnZS5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgaWYgKG5leHRJbWFnZSAmJiBuZXh0SW1hZ2UudGFnTmFtZSA9PT0gJ0lNRycpIHtcclxuICAgICAgICAgICAgb2JqLnNob3cob2JqLmN1cnJlbnRJbWFnZS5uZXh0RWxlbWVudFNpYmxpbmcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgb2JqLnByZXYgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAob2JqLmN1cnJlbnRJbWFnZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKSB7XHJcbiAgICAgICAgICAgIG9iai5zaG93KG9iai5jdXJyZW50SW1hZ2UucHJldmlvdXNFbGVtZW50U2libGluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBtb3VzZVVwID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIC8vIE9wZW4gc2xpZGVyXHJcbiAgICAgICAgaWYgKGUudGFyZ2V0LnRhZ05hbWUgPT0gJ0lNRycpIHtcclxuICAgICAgICAgICAgb2JqLnNob3coZS50YXJnZXQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoISBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzbGlkZXItY2xvc2UnKSAmJiAhIChlLnRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucygnanNsaWRlci1jb3VudGVyJykgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqc2xpZGVyLWNvdW50ZXInKSkpe1xyXG4gICAgICAgICAgICAvLyBBcnJvdyBjb250cm9sc1xyXG4gICAgICAgICAgICB2YXIgb2Zmc2V0WCA9IGUub2Zmc2V0WCB8fCBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7XHJcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbGllbnRXaWR0aCAtIG9mZnNldFggPCA0MCkge1xyXG4gICAgICAgICAgICAgICAgLy8gU2hvdyBuZXh0IGltYWdlXHJcbiAgICAgICAgICAgICAgICBvYmoubmV4dCgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9mZnNldFggPCA0MCkge1xyXG4gICAgICAgICAgICAgICAgLy8gU2hvdyBwcmV2aW91cyBpbWFnZVxyXG4gICAgICAgICAgICAgICAgb2JqLnByZXYoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoJ29udG91Y2hlbmQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgbW91c2VVcCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBtb3VzZVVwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgZ2xvYmFsIGV2ZW50c1xyXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcInN3aXBlbGVmdFwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgb2JqLm5leHQoKTtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzd2lwZXJpZ2h0XCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBvYmoucHJldigpO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoZS53aGljaCA9PSAyNykge1xyXG4gICAgICAgICAgICBvYmouY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBlbC5zbGlkZXIgPSBvYmo7XHJcblxyXG4gICAgcmV0dXJuIG9iajtcclxufSk7XHJcblxyXG5qU3VpdGVzLnNvcnRpbmcgPSAoZnVuY3Rpb24oZWwsIG9wdGlvbnMpIHtcclxuICAgIHZhciBvYmogPSB7fTtcclxuICAgIG9iai5vcHRpb25zID0ge307XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0ge1xyXG4gICAgICAgIHBvaW50ZXI6IG51bGwsXHJcbiAgICAgICAgZGlyZWN0aW9uOiBudWxsLFxyXG4gICAgICAgIG9uZHJhZ3N0YXJ0OiBudWxsLFxyXG4gICAgICAgIG9uZHJhZ2VuZDogbnVsbCxcclxuICAgICAgICBvbmRyb3A6IG51bGwsXHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGRyYWdFbGVtZW50ID0gbnVsbDtcclxuXHJcbiAgICAvLyBMb29wIHRocm91Z2ggdGhlIGluaXRpYWwgY29uZmlndXJhdGlvblxyXG4gICAgZm9yICh2YXIgcHJvcGVydHkgaW4gZGVmYXVsdHMpIHtcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9uc1twcm9wZXJ0eV0gPSBvcHRpb25zW3Byb3BlcnR5XTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9uc1twcm9wZXJ0eV0gPSBkZWZhdWx0c1twcm9wZXJ0eV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2pzb3J0aW5nJyk7XHJcblxyXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIHZhciBwb3NpdGlvbiA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoZS50YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlbiwgZS50YXJnZXQpO1xyXG4gICAgICAgIGRyYWdFbGVtZW50ID0ge1xyXG4gICAgICAgICAgICBlbGVtZW50OiBlLnRhcmdldCxcclxuICAgICAgICAgICAgbzogcG9zaXRpb24sXHJcbiAgICAgICAgICAgIGQ6IHBvc2l0aW9uXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGUudGFyZ2V0LnN0eWxlLm9wYWNpdHkgPSAnMC4yNSc7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub25kcmFnc3RhcnQpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgb2JqLm9wdGlvbnMub25kcmFnc3RhcnQoZWwsIGUudGFyZ2V0LCBlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIGlmIChnZXRFbGVtZW50KGUudGFyZ2V0KSAmJiBkcmFnRWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnKSA9PSAndHJ1ZScgJiYgZHJhZ0VsZW1lbnQuZWxlbWVudCAhPSBlLnRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEgb2JqLm9wdGlvbnMuZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmRpdGlvbiA9IGUudGFyZ2V0LmNsaWVudEhlaWdodCAvIDIgPiBlLm9mZnNldFk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25kaXRpb24gPSBlLnRhcmdldC5jbGllbnRXaWR0aCAvIDIgPiBlLm9mZnNldFg7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRyYWdFbGVtZW50LmVsZW1lbnQsIGUudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZHJhZ0VsZW1lbnQuZWxlbWVudCwgZS50YXJnZXQubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRyYWdFbGVtZW50LmQgPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGUudGFyZ2V0LnBhcmVudE5vZGUuY2hpbGRyZW4sIGRyYWdFbGVtZW50LmVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICBpZiAoZHJhZ0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbmRyYWdlbmQpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm9uZHJhZ2VuZChlbCwgZHJhZ0VsZW1lbnQuZWxlbWVudCwgZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIENhbmNlbGxlZCBwdXQgZWxlbWVudCB0byB0aGUgb3JpZ2luYWwgcG9zaXRpb25cclxuICAgICAgICAgICAgaWYgKGRyYWdFbGVtZW50Lm8gPCBkcmFnRWxlbWVudC5kKSB7XHJcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkcmFnRWxlbWVudC5lbGVtZW50LCBlLnRhcmdldC5wYXJlbnROb2RlLmNoaWxkcmVuW2RyYWdFbGVtZW50Lm9dKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRyYWdFbGVtZW50LmVsZW1lbnQsIGUudGFyZ2V0LnBhcmVudE5vZGUuY2hpbGRyZW5bZHJhZ0VsZW1lbnQub10ubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkcmFnRWxlbWVudC5lbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAnJztcclxuICAgICAgICAgICAgZHJhZ0VsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICBpZiAoZHJhZ0VsZW1lbnQgJiYgKGRyYWdFbGVtZW50Lm8gIT0gZHJhZ0VsZW1lbnQuZCkpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbmRyb3ApID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm9uZHJvcChlbCwgZHJhZ0VsZW1lbnQubywgZHJhZ0VsZW1lbnQuZCwgZHJhZ0VsZW1lbnQuZWxlbWVudCwgZS50YXJnZXQsIGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkcmFnRWxlbWVudC5lbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAnJztcclxuICAgICAgICBkcmFnRWxlbWVudCA9IG51bGw7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgc29ydGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBwYXRoIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqc29ydGluZycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ydGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghIHNvcnRpbmcpIHtcclxuICAgICAgICAgICAgICAgIHBhdGgoZWxlbWVudC5wYXJlbnROb2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcGF0aChlbGVtZW50KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNvcnRpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmICghIGVsLmNoaWxkcmVuW2ldLmhhc0F0dHJpYnV0ZSgnZHJhZ2dhYmxlJykpIHtcclxuICAgICAgICAgICAgZWwuY2hpbGRyZW5baV0uc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCAndHJ1ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBlbC52YWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgaWQgPSBudWxsO1xyXG4gICAgICAgIHZhciBkYXRhID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaWQgPSBlbC5jaGlsZHJlbltpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5wdXNoKGlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZWw7XHJcbn0pO1xyXG5cclxualN1aXRlcy50YWJzID0gKGZ1bmN0aW9uKGVsLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgb2JqID0ge307XHJcbiAgICBvYmoub3B0aW9ucyA9IHt9O1xyXG5cclxuICAgIC8vIERlZmF1bHQgY29uZmlndXJhdGlvblxyXG4gICAgdmFyIGRlZmF1bHRzID0ge1xyXG4gICAgICAgIGRhdGE6IFtdLFxyXG4gICAgICAgIHBvc2l0aW9uOiBudWxsLFxyXG4gICAgICAgIGFsbG93Q3JlYXRlOiBmYWxzZSxcclxuICAgICAgICBhbGxvd0NoYW5nZVBvc2l0aW9uOiBmYWxzZSxcclxuICAgICAgICBvbmNsaWNrOiBudWxsLFxyXG4gICAgICAgIG9ubG9hZDogbnVsbCxcclxuICAgICAgICBvbmNoYW5nZTogbnVsbCxcclxuICAgICAgICBvbmNyZWF0ZTogbnVsbCxcclxuICAgICAgICBvbmRlbGV0ZTogbnVsbCxcclxuICAgICAgICBvbmJlZm9yZWNyZWF0ZTogbnVsbCxcclxuICAgICAgICBvbmNoYW5nZXBvc2l0aW9uOiBudWxsLFxyXG4gICAgICAgIGFuaW1hdGlvbjogZmFsc2UsXHJcbiAgICAgICAgaGlkZUhlYWRlcnM6IGZhbHNlLFxyXG4gICAgICAgIHBhZGRpbmc6IG51bGwsXHJcbiAgICAgICAgcGFsZXR0ZTogbnVsbCxcclxuICAgICAgICBtYXhXaWR0aDogbnVsbCxcclxuICAgIH1cclxuXHJcbiAgICAvLyBMb29wIHRocm91Z2ggdGhlIGluaXRpYWwgY29uZmlndXJhdGlvblxyXG4gICAgZm9yICh2YXIgcHJvcGVydHkgaW4gZGVmYXVsdHMpIHtcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9uc1twcm9wZXJ0eV0gPSBvcHRpb25zW3Byb3BlcnR5XTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9uc1twcm9wZXJ0eV0gPSBkZWZhdWx0c1twcm9wZXJ0eV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENsYXNzXHJcbiAgICBlbC5jbGFzc0xpc3QuYWRkKCdqdGFicycpO1xyXG5cclxuICAgIHZhciBwcmV2ID0gbnVsbDtcclxuICAgIHZhciBuZXh0ID0gbnVsbDtcclxuICAgIHZhciBib3JkZXIgPSBudWxsO1xyXG5cclxuICAgIC8vIEhlbHBlcnNcclxuICAgIHZhciBzZXRCb3JkZXIgPSBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5hbmltYXRpb24pIHtcclxuICAgICAgICAgICAgdmFyIHJlY3QgPSBvYmouaGVhZGVycy5jaGlsZHJlbltpbmRleF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMucGFsZXR0ZSA9PSAnbW9kZXJuJykge1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLnN0eWxlLndpZHRoID0gcmVjdC53aWR0aCAtIDQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLnN0eWxlLmxlZnQgPSBvYmouaGVhZGVycy5jaGlsZHJlbltpbmRleF0ub2Zmc2V0TGVmdCArIDIgKyAncHgnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLnN0eWxlLndpZHRoID0gcmVjdC53aWR0aCArICdweCc7XHJcbiAgICAgICAgICAgICAgICBib3JkZXIuc3R5bGUubGVmdCA9IG9iai5oZWFkZXJzLmNoaWxkcmVuW2luZGV4XS5vZmZzZXRMZWZ0ICsgJ3B4JztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLnBvc2l0aW9uID09ICdib3R0b20nKSB7XHJcbiAgICAgICAgICAgICAgICBib3JkZXIuc3R5bGUudG9wID0gJzBweCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBib3JkZXIuc3R5bGUuYm90dG9tID0gJzBweCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHVwZGF0ZUNvbnRyb2xzID0gZnVuY3Rpb24oeCkge1xyXG4gICAgICAgIGlmICh0eXBlb2Yob2JqLmhlYWRlcnMuc2Nyb2xsVG8pID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgb2JqLmhlYWRlcnMuc2Nyb2xsVG8oe1xyXG4gICAgICAgICAgICAgICAgbGVmdDogeCxcclxuICAgICAgICAgICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb2JqLmhlYWRlcnMuc2Nyb2xsTGVmdCA9IHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoeCA8PSAxKSB7XHJcbiAgICAgICAgICAgIHByZXYuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwcmV2LmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoeCA+PSBvYmouaGVhZGVycy5zY3JvbGxXaWR0aCAtIG9iai5oZWFkZXJzLm9mZnNldFdpZHRoKSB7XHJcbiAgICAgICAgICAgIG5leHQuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAob2JqLmhlYWRlcnMuc2Nyb2xsV2lkdGggPD0gb2JqLmhlYWRlcnMub2Zmc2V0V2lkdGgpIHtcclxuICAgICAgICAgICAgcHJldi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICBuZXh0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcHJldi5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgICAgIG5leHQuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvYmouc2V0Qm9yZGVyID0gc2V0Qm9yZGVyO1xyXG5cclxuICAgIC8vIFNldCB2YWx1ZVxyXG4gICAgb2JqLm9wZW4gPSBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgIHZhciBwcmV2aW91cyA9IG51bGw7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmouaGVhZGVycy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAob2JqLmhlYWRlcnMuY2hpbGRyZW5baV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdqdGFicy1zZWxlY3RlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDdXJyZW50IG9uZVxyXG4gICAgICAgICAgICAgICAgcHJldmlvdXMgPSBpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFJlbW90ZSBzZWxlY3RlZFxyXG4gICAgICAgICAgICBvYmouaGVhZGVycy5jaGlsZHJlbltpXS5jbGFzc0xpc3QucmVtb3ZlKCdqdGFicy1zZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICBpZiAob2JqLmNvbnRlbnQuY2hpbGRyZW5baV0pIHtcclxuICAgICAgICAgICAgICAgIG9iai5jb250ZW50LmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2p0YWJzLXNlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9iai5oZWFkZXJzLmNoaWxkcmVuW2luZGV4XS5jbGFzc0xpc3QuYWRkKCdqdGFicy1zZWxlY3RlZCcpO1xyXG4gICAgICAgIGlmIChvYmouY29udGVudC5jaGlsZHJlbltpbmRleF0pIHtcclxuICAgICAgICAgICAgb2JqLmNvbnRlbnQuY2hpbGRyZW5baW5kZXhdLmNsYXNzTGlzdC5hZGQoJ2p0YWJzLXNlbGVjdGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocHJldmlvdXMgIT0gaW5kZXggJiYgdHlwZW9mKG9iai5vcHRpb25zLm9uY2hhbmdlKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGlmIChvYmouY29udGVudC5jaGlsZHJlbltpbmRleF0pIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm9uY2hhbmdlKGVsLCBvYmosIGluZGV4LCBvYmouaGVhZGVycy5jaGlsZHJlbltpbmRleF0sIG9iai5jb250ZW50LmNoaWxkcmVuW2luZGV4XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEhpZGVcclxuICAgICAgICBpZiAob2JqLm9wdGlvbnMuaGlkZUhlYWRlcnMgPT0gdHJ1ZSAmJiAob2JqLmhlYWRlcnMuY2hpbGRyZW4ubGVuZ3RoIDwgMyAmJiBvYmoub3B0aW9ucy5hbGxvd0NyZWF0ZSA9PSBmYWxzZSkpIHtcclxuICAgICAgICAgICAgb2JqLmhlYWRlcnMucGFyZW50Tm9kZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFNldCBib3JkZXJcclxuICAgICAgICAgICAgc2V0Qm9yZGVyKGluZGV4KTtcclxuXHJcbiAgICAgICAgICAgIG9iai5oZWFkZXJzLnBhcmVudE5vZGUuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG5cclxuICAgICAgICAgICAgdmFyIHgxID0gb2JqLmhlYWRlcnMuY2hpbGRyZW5baW5kZXhdLm9mZnNldExlZnQ7XHJcbiAgICAgICAgICAgIHZhciB4MiA9IHgxICsgb2JqLmhlYWRlcnMuY2hpbGRyZW5baW5kZXhdLm9mZnNldFdpZHRoO1xyXG4gICAgICAgICAgICB2YXIgcjEgPSBvYmouaGVhZGVycy5zY3JvbGxMZWZ0O1xyXG4gICAgICAgICAgICB2YXIgcjIgPSByMSArIG9iai5oZWFkZXJzLm9mZnNldFdpZHRoO1xyXG5cclxuICAgICAgICAgICAgaWYgKCEgKHIxIDw9IHgxICYmIHIyID49IHgyKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gT3V0IG9mIHRoZSB2aWV3cG9ydFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlQ29udHJvbHMoeDEgLSAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvYmouc2VsZWN0SW5kZXggPSBmdW5jdGlvbihhKSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChvYmouaGVhZGVycy5jaGlsZHJlbiwgYSk7XHJcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgb2JqLm9wZW4oaW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5yZW5hbWUgPSBmdW5jdGlvbihpLCB0aXRsZSkge1xyXG4gICAgICAgIGlmICghIHRpdGxlKSB7XHJcbiAgICAgICAgICAgIHRpdGxlID0gcHJvbXB0KCdOZXcgdGl0bGUnLCBvYmouaGVhZGVycy5jaGlsZHJlbltpXS5pbm5lclRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvYmouaGVhZGVycy5jaGlsZHJlbltpXS5pbm5lclRleHQgPSB0aXRsZTtcclxuICAgICAgICBvYmoub3BlbihpKTtcclxuICAgIH1cclxuXHJcbiAgICBvYmouY3JlYXRlID0gZnVuY3Rpb24odGl0bGUsIHVybCkge1xyXG4gICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub25iZWZvcmVjcmVhdGUpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdmFyIHJldCA9IG9iai5vcHRpb25zLm9uYmVmb3JlY3JlYXRlKGVsKTtcclxuICAgICAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlID0gcmV0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZGl2ID0gb2JqLmFwcGVuZEVsZW1lbnQodGl0bGUpO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9uY3JlYXRlKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zLm9uY3JlYXRlKGVsLCBkaXYpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGl2O1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5yZW1vdmUgPSBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgIHJldHVybiBvYmouZGVsZXRlRWxlbWVudChpbmRleCk7XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLm5leHROdW1iZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgbnVtID0gMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5oZWFkZXJzLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB0bXAgPSBvYmouaGVhZGVycy5jaGlsZHJlbltpXS5pbm5lclRleHQubWF0Y2goL1swLTldLiovKTtcclxuICAgICAgICAgICAgaWYgKHRtcCA+IG51bSkge1xyXG4gICAgICAgICAgICAgICAgbnVtID0gcGFyc2VJbnQodG1wKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoISBudW0pIHtcclxuICAgICAgICAgICAgbnVtID0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBudW0rKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBudW07XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLmRlbGV0ZUVsZW1lbnQgPSBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgIGlmICghIG9iai5oZWFkZXJzLmNoaWxkcmVuW2luZGV4XSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb2JqLmhlYWRlcnMucmVtb3ZlQ2hpbGQob2JqLmhlYWRlcnMuY2hpbGRyZW5baW5kZXhdKTtcclxuICAgICAgICAgICAgb2JqLmNvbnRlbnQucmVtb3ZlQ2hpbGQob2JqLmNvbnRlbnQuY2hpbGRyZW5baW5kZXhdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9iai5vcGVuKDApO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9uZGVsZXRlKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zLm9uZGVsZXRlKGVsLCBpbmRleClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLmFwcGVuZEVsZW1lbnQgPSBmdW5jdGlvbih0aXRsZSwgY2IpIHtcclxuICAgICAgICBpZiAoISB0aXRsZSkge1xyXG4gICAgICAgICAgICB2YXIgdGl0bGUgPSBwcm9tcHQoJ1RpdGxlPycsICcnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aXRsZSkge1xyXG4gICAgICAgICAgICAvLyBBZGQgY29udGVudFxyXG4gICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIG9iai5jb250ZW50LmFwcGVuZENoaWxkKGRpdik7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgaGVhZGVyc1xyXG4gICAgICAgICAgICB2YXIgaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBoLmlubmVySFRNTCA9IHRpdGxlO1xyXG4gICAgICAgICAgICBoLmNvbnRlbnQgPSBkaXY7XHJcbiAgICAgICAgICAgIG9iai5oZWFkZXJzLmluc2VydEJlZm9yZShoLCBvYmouaGVhZGVycy5sYXN0Q2hpbGQpO1xyXG5cclxuICAgICAgICAgICAgLy8gU29ydGFibGVcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmFsbG93Q2hhbmdlUG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGguc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIE9wZW4gbmV3IHRhYlxyXG4gICAgICAgICAgICBvYmouc2VsZWN0SW5kZXgoaCk7XHJcblxyXG4gICAgICAgICAgICAvLyBDYWxsYmFja1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKGNiKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBjYihkaXYsIGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZWxlbWVudFxyXG4gICAgICAgICAgICByZXR1cm4gZGl2O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvYmouZ2V0QWN0aXZlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmouaGVhZGVycy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAob2JqLmhlYWRlcnMuY2hpbGRyZW5baV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdqdGFicy1zZWxlY3RlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai51cGRhdGVDb250ZW50ID0gZnVuY3Rpb24ocG9zaXRpb24sIG5ld0NvbnRlbnQpIHtcclxuICAgICAgICBpZiAodHlwZW9mIG5ld0NvbnRlbnQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHZhciBjb250ZW50SXRlbSA9IG5ld0NvbnRlbnQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGNvbnRlbnRJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnRlbnRJdGVtLmlubmVySFRNTCA9IG5ld0NvbnRlbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAob2JqLmNvbnRlbnQuY2hpbGRyZW5bcG9zaXRpb25dLmNsYXNzTGlzdC5jb250YWlucygnanRhYnMtc2VsZWN0ZWQnKSkge1xyXG4gICAgICAgICAgICBuZXdDb250ZW50LmNsYXNzTGlzdC5hZGQoJ2p0YWJzLXNlbGVjdGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvYmouY29udGVudC5yZXBsYWNlQ2hpbGQobmV3Q29udGVudCwgb2JqLmNvbnRlbnQuY2hpbGRyZW5bcG9zaXRpb25dKTtcclxuICAgIH1cclxuXHJcbiAgICBvYmoudXBkYXRlUG9zaXRpb24gPSBmdW5jdGlvbihmLCB0KSB7XHJcbiAgICAgICAgLy8gT25kcm9wIHVwZGF0ZSBwb3NpdGlvbiBvZiBjb250ZW50XHJcbiAgICAgICAgaWYgKGYgPiB0KSB7XHJcbiAgICAgICAgICAgIG9iai5jb250ZW50Lmluc2VydEJlZm9yZShvYmouY29udGVudC5jaGlsZHJlbltmXSwgb2JqLmNvbnRlbnQuY2hpbGRyZW5bdF0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG9iai5jb250ZW50Lmluc2VydEJlZm9yZShvYmouY29udGVudC5jaGlsZHJlbltmXSwgb2JqLmNvbnRlbnQuY2hpbGRyZW5bdF0ubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gT3BlbiBkZXN0aW5hdGlvbiB0YWJcclxuICAgICAgICBvYmoub3Blbih0KTtcclxuXHJcbiAgICAgICAgLy8gQ2FsbCBldmVudFxyXG4gICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub25jaGFuZ2Vwb3NpdGlvbikgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy5vbmNoYW5nZXBvc2l0aW9uKG9iai5oZWFkZXJzLCBmLCB0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLm1vdmUgPSBmdW5jdGlvbihmLCB0KSB7XHJcbiAgICAgICAgaWYgKGYgPiB0KSB7XHJcbiAgICAgICAgICAgIG9iai5oZWFkZXJzLmluc2VydEJlZm9yZShvYmouaGVhZGVycy5jaGlsZHJlbltmXSwgb2JqLmhlYWRlcnMuY2hpbGRyZW5bdF0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG9iai5oZWFkZXJzLmluc2VydEJlZm9yZShvYmouaGVhZGVycy5jaGlsZHJlbltmXSwgb2JqLmhlYWRlcnMuY2hpbGRyZW5bdF0ubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb2JqLnVwZGF0ZVBvc2l0aW9uKGYsIHQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5zZXRCb3JkZXIgPSBzZXRCb3JkZXI7XHJcblxyXG4gICAgb2JqLmluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBlbC5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBjb21wb25lbnQgaXMgYmxhbmtcclxuICAgICAgICBvYmouaGVhZGVycyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIG9iai5jb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgb2JqLmhlYWRlcnMuY2xhc3NMaXN0LmFkZCgnanRhYnMtaGVhZGVycycpO1xyXG4gICAgICAgIG9iai5jb250ZW50LmNsYXNzTGlzdC5hZGQoJ2p0YWJzLWNvbnRlbnQnKTtcclxuXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLnBhbGV0dGUpIHtcclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnanRhYnMtbW9kZXJuJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnanRhYnMtbW9kZXJuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQYWRkaW5nXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLnBhZGRpbmcpIHtcclxuICAgICAgICAgICAgb2JqLmNvbnRlbnQuc3R5bGUucGFkZGluZyA9IHBhcnNlSW50KG9iai5vcHRpb25zLnBhZGRpbmcpICsgJ3B4JztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEhlYWRlclxyXG4gICAgICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBoZWFkZXIuY2xhc3NOYW1lID0gJ2p0YWJzLWhlYWRlcnMtY29udGFpbmVyJztcclxuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQob2JqLmhlYWRlcnMpO1xyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5tYXhXaWR0aCkge1xyXG4gICAgICAgICAgICBoZWFkZXIuc3R5bGUubWF4V2lkdGggPSBwYXJzZUludChvYmoub3B0aW9ucy5tYXhXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ29udHJvbHNcclxuICAgICAgICB2YXIgY29udHJvbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjb250cm9scy5jbGFzc05hbWUgPSAnanRhYnMtY29udHJvbHMnO1xyXG4gICAgICAgIGNvbnRyb2xzLnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgJ2ZhbHNlJyk7XHJcbiAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKGNvbnRyb2xzKTtcclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIERPTSBlbGVtZW50c1xyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5wb3NpdGlvbiA9PSAnYm90dG9tJykge1xyXG4gICAgICAgICAgICBlbC5hcHBlbmRDaGlsZChvYmouY29udGVudCk7XHJcbiAgICAgICAgICAgIGVsLmFwcGVuZENoaWxkKGhlYWRlcik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcclxuICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQob2JqLmNvbnRlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTmV3IGJ1dHRvblxyXG4gICAgICAgIGlmIChvYmoub3B0aW9ucy5hbGxvd0NyZWF0ZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHZhciBhZGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgYWRkLmNsYXNzTmFtZSA9ICdqdGFicy1hZGQnO1xyXG4gICAgICAgICAgICBhZGQub25jbGljayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgb2JqLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnRyb2xzLmFwcGVuZENoaWxkKGFkZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcmV2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgcHJldi5jbGFzc05hbWUgPSAnanRhYnMtcHJldic7XHJcbiAgICAgICAgcHJldi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZUNvbnRyb2xzKG9iai5oZWFkZXJzLnNjcm9sbExlZnQgLSBvYmouaGVhZGVycy5vZmZzZXRXaWR0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnRyb2xzLmFwcGVuZENoaWxkKHByZXYpO1xyXG5cclxuICAgICAgICBuZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbmV4dC5jbGFzc05hbWUgPSAnanRhYnMtbmV4dCc7XHJcbiAgICAgICAgbmV4dC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZUNvbnRyb2xzKG9iai5oZWFkZXJzLnNjcm9sbExlZnQgKyBvYmouaGVhZGVycy5vZmZzZXRXaWR0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnRyb2xzLmFwcGVuZENoaWxkKG5leHQpO1xyXG5cclxuICAgICAgICAvLyBEYXRhXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmoub3B0aW9ucy5kYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIFRpdGxlXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5kYXRhW2ldLnRpdGxlRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlckl0ZW0gPSBvYmoub3B0aW9ucy5kYXRhW2ldLnRpdGxlRWxlbWVudDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSWNvblxyXG4gICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuZGF0YVtpXS5pY29uKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWNvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XHJcbiAgICAgICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ21hdGVyaWFsLWljb25zJyk7XHJcbiAgICAgICAgICAgICAgICBpY29uLmlubmVySFRNTCA9IG9iai5vcHRpb25zLmRhdGFbaV0uaWNvbjtcclxuICAgICAgICAgICAgICAgIGljb25Db250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbik7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJJdGVtLmFwcGVuZENoaWxkKGljb25Db250YWluZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFRpdGxlXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5kYXRhW2ldLnRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShvYmoub3B0aW9ucy5kYXRhW2ldLnRpdGxlKTtcclxuICAgICAgICAgICAgICAgIGhlYWRlckl0ZW0uYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFdpZHRoXHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5kYXRhW2ldLndpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJJdGVtLnN0eWxlLndpZHRoID0gb2JqLm9wdGlvbnMuZGF0YVtpXS53aWR0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDb250ZW50XHJcbiAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy5kYXRhW2ldLmNvbnRlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudEl0ZW0gPSBvYmoub3B0aW9ucy5kYXRhW2ldLmNvbnRlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnRJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50SXRlbS5pbm5lckhUTUwgPSBvYmoub3B0aW9ucy5kYXRhW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb2JqLmhlYWRlcnMuYXBwZW5kQ2hpbGQoaGVhZGVySXRlbSk7XHJcbiAgICAgICAgICAgIG9iai5jb250ZW50LmFwcGVuZENoaWxkKGNvbnRlbnRJdGVtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFuaW1hdGlvblxyXG4gICAgICAgIGJvcmRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGJvcmRlci5jbGFzc05hbWUgPSAnanRhYnMtYm9yZGVyJztcclxuICAgICAgICBvYmouaGVhZGVycy5hcHBlbmRDaGlsZChib3JkZXIpO1xyXG5cclxuICAgICAgICBpZiAob2JqLm9wdGlvbnMuYW5pbWF0aW9uKSB7XHJcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2p0YWJzLWFuaW1hdGlvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXZlbnRzXHJcbiAgICAgICAgb2JqLmhlYWRlcnMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdqdGFicy1oZWFkZXJzJykpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lID09ICdJJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldC5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBvYmouc2VsZWN0SW5kZXgodGFyZ2V0KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub25jbGljaykgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMub25jbGljayhlbCwgb2JqLCBpbmRleCwgb2JqLmhlYWRlcnMuY2hpbGRyZW5baW5kZXhdLCBvYmouY29udGVudC5jaGlsZHJlbltpbmRleF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG9iai5oZWFkZXJzLmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIG9iai5zZWxlY3RJbmRleChlLnRhcmdldCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChvYmouaGVhZGVycy5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gT3BlbiBmaXJzdCB0YWJcclxuICAgICAgICAgICAgb2JqLm9wZW4oMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgY29udHJvbHNcclxuICAgICAgICB1cGRhdGVDb250cm9scygwKTtcclxuXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLmFsbG93Q2hhbmdlUG9zaXRpb24gPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBqU3VpdGVzLnNvcnRpbmcob2JqLmhlYWRlcnMsIHtcclxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogMSxcclxuICAgICAgICAgICAgICAgIG9uZHJvcDogZnVuY3Rpb24oYSxiLGMpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoudXBkYXRlUG9zaXRpb24oYixjKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbmxvYWQpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgb2JqLm9wdGlvbnMub25sb2FkKGVsLCBvYmopO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBMb2FkaW5nIGV4aXN0aW5nIG5vZGVzIGFzIHRoZSBkYXRhXHJcbiAgICBpZiAoZWwuY2hpbGRyZW5bMF0gJiYgZWwuY2hpbGRyZW5bMF0uY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGZyb20gZXhpc3RpbmcgZWxlbWVudHNcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsLmNoaWxkcmVuWzBdLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gb2JqLm9wdGlvbnMuZGF0YSAmJiBvYmoub3B0aW9ucy5kYXRhW2ldID8gb2JqLm9wdGlvbnMuZGF0YVtpXSA6IHt9O1xyXG5cclxuICAgICAgICAgICAgaWYgKGVsLmNoaWxkcmVuWzFdICYmIGVsLmNoaWxkcmVuWzFdLmNoaWxkcmVuW2ldKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLnRpdGxlRWxlbWVudCA9IGVsLmNoaWxkcmVuWzBdLmNoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5jb250ZW50RWxlbWVudCA9IGVsLmNoaWxkcmVuWzFdLmNoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5jb250ZW50RWxlbWVudCA9IGVsLmNoaWxkcmVuWzBdLmNoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhW2ldID0gaXRlbTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVtb3RlIGNvbnRyb2xsZXIgZmxhZ1xyXG4gICAgdmFyIGxvYWRpbmdSZW1vdGVEYXRhID0gZmFsc2U7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGZyb20gZGF0YVxyXG4gICAgaWYgKG9iai5vcHRpb25zLmRhdGEpIHtcclxuICAgICAgICAvLyBBcHBlbmQgY2hpbGRyZW5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5vcHRpb25zLmRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmRhdGFbaV0udXJsKSB7XHJcbiAgICAgICAgICAgICAgICBqU3VpdGVzLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogb2JqLm9wdGlvbnMuZGF0YVtpXS51cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICd0ZXh0L2h0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5kYXRhW3RoaXMuaW5kZXhdLmNvbnRlbnQgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5pbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRmxhZyBsb2FkaW5nXHJcbiAgICAgICAgICAgICAgICBsb2FkaW5nUmVtb3RlRGF0YSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCEgbG9hZGluZ1JlbW90ZURhdGEpIHtcclxuICAgICAgICBvYmouaW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGVsLnRhYnMgPSBvYmo7XHJcblxyXG4gICAgcmV0dXJuIG9iajtcclxufSk7XHJcblxyXG5qU3VpdGVzLnRhZ3MgPSAoZnVuY3Rpb24oZWwsIG9wdGlvbnMpIHtcclxuICAgIC8vIFJlZGVmaW5lIGNvbmZpZ3VyYXRpb25cclxuICAgIGlmIChlbC50YWdzKSB7XHJcbiAgICAgICAgcmV0dXJuIGVsLnRhZ3Muc2V0T3B0aW9ucyhvcHRpb25zLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgb2JqID0geyB0eXBlOid0YWdzJyB9O1xyXG4gICAgb2JqLm9wdGlvbnMgPSB7fTtcclxuXHJcbiAgICAvLyBMaW1pdFxyXG4gICAgdmFyIGxpbWl0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iai5vcHRpb25zLmxpbWl0ICYmIGVsLmNoaWxkcmVuLmxlbmd0aCA+PSBvYmoub3B0aW9ucy5saW1pdCA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTZWFyY2ggaGVscGVyc1xyXG4gICAgdmFyIHNlYXJjaCA9IG51bGw7XHJcbiAgICB2YXIgc2VhcmNoQ29udGFpbmVyID0gbnVsbDtcclxuXHJcbiAgICBvYmouc2V0T3B0aW9ucyA9IGZ1bmN0aW9uKG9wdGlvbnMsIHJlc2V0KSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGVkZWYge09iamVjdH0gZGVmYXVsdHNcclxuICAgICAgICAgKiBAcHJvcGVydHkgeyhzdHJpbmd8QXJyYXkpfSB2YWx1ZSAtIEluaXRpYWwgdmFsdWUgb2YgdGhlIGNvbXBvbnRlbnRcclxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gbGltaXQgLSBNYXggbnVtYmVyIG9mIHRhZ3MgaW5zaWRlIHRoZSBlbGVtZW50XHJcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd9IHNlYXJjaCAtIFRoZSBVUkwgZm9yIHN1Z2dlc3Rpb25zXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd9IHBsYWNlaG9sZGVyIC0gVGhlIGRlZmF1bHQgaW5zdHJ1Y3Rpb24gdGV4dCBvbiB0aGUgZWxlbWVudFxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7dmFsaWRhdGlvbn0gdmFsaWRhdGlvbiAtIE1ldGhvZCB0byB2YWxpZGF0ZSB0aGUgdGFnc1xyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7cmVxdWVzdENhbGxiYWNrfSBvbmJlZm9yZWNoYW5nZSAtIE1ldGhvZCB0byBiZSBleGVjdXRlIGJlZm9yZSBhbnkgY2hhbmdlcyBvbiB0aGUgZWxlbWVudFxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7cmVxdWVzdENhbGxiYWNrfSBvbmNoYW5nZSAtIE1ldGhvZCB0byBiZSBleGVjdXRlIGFmdGVyIGFueSBjaGFuZ2VzIG9uIHRoZSBlbGVtZW50XHJcbiAgICAgICAgICogQHByb3BlcnR5IHtyZXF1ZXN0Q2FsbGJhY2t9IG9uZm9jdXMgLSBNZXRob2QgdG8gYmUgZXhlY3V0ZSB3aGVuIG9uIGZvY3VzXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtyZXF1ZXN0Q2FsbGJhY2t9IG9uYmx1ciAtIE1ldGhvZCB0byBiZSBleGVjdXRlIHdoZW4gb24gYmx1clxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7cmVxdWVzdENhbGxiYWNrfSBvbmxvYWQgLSBNZXRob2QgdG8gYmUgZXhlY3V0ZSB3aGVuIHRoZSBlbGVtZW50IGlzIGxvYWRlZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgdmFsdWU6ICcnLFxyXG4gICAgICAgICAgICBsaW1pdDogbnVsbCxcclxuICAgICAgICAgICAgbGltaXRNZXNzYWdlOiBudWxsLFxyXG4gICAgICAgICAgICBzZWFyY2g6IG51bGwsXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBudWxsLFxyXG4gICAgICAgICAgICB2YWxpZGF0aW9uOiBudWxsLFxyXG4gICAgICAgICAgICBvbmJlZm9yZWNoYW5nZTogbnVsbCxcclxuICAgICAgICAgICAgb25saW1pdDogbnVsbCxcclxuICAgICAgICAgICAgb25jaGFuZ2U6IG51bGwsXHJcbiAgICAgICAgICAgIG9uZm9jdXM6IG51bGwsXHJcbiAgICAgICAgICAgIG9uYmx1cjogbnVsbCxcclxuICAgICAgICAgICAgb25sb2FkOiBudWxsLFxyXG4gICAgICAgICAgICBjb2xvcnM6IG51bGwsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBMb29wIHRocm91Z2ggdGhvdWdoIHRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb25cclxuICAgICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBkZWZhdWx0cykge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgb2JqLm9wdGlvbnNbcHJvcGVydHldID0gb3B0aW9uc1twcm9wZXJ0eV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zW3Byb3BlcnR5XSkgPT0gJ3VuZGVmaW5lZCcgfHwgcmVzZXQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9uc1twcm9wZXJ0eV0gPSBkZWZhdWx0c1twcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFBsYWNlaG9sZGVyXHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLnBsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1wbGFjZWhvbGRlcicsIG9iai5vcHRpb25zLnBsYWNlaG9sZGVyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcGxhY2Vob2xkZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWwucGxhY2Vob2xkZXIgPSBvYmoub3B0aW9ucy5wbGFjZWhvbGRlcjtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHZhbHVlXHJcbiAgICAgICAgb2JqLnNldFZhbHVlKG9iai5vcHRpb25zLnZhbHVlKTtcclxuXHJcbiAgICAgICAgLy8gVmFsaWRhdGUgaXRlbXNcclxuICAgICAgICBmaWx0ZXIoKTtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIHNlYXJjaCBib3hcclxuICAgICAgICBpZiAob2JqLm9wdGlvbnMuc2VhcmNoKSB7XHJcbiAgICAgICAgICAgIGlmICghIHNlYXJjaENvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgc2VhcmNoQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBlbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWFyY2hDb250YWluZXIsIGVsLm5leHRTaWJsaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICBzZWFyY2ggPSBqU3VpdGVzLnNlYXJjaChzZWFyY2hDb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBvYmoub3B0aW9ucy5zZWFyY2gsXHJcbiAgICAgICAgICAgICAgICAgICAgb25zZWxlY3Q6IGZ1bmN0aW9uKGEsYixjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zZWxlY3RJbmRleChiLGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHNlYXJjaENvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgc2VhcmNoID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHNlYXJjaENvbnRhaW5lci5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHNlYXJjaENvbnRhaW5lciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYSBuZXcgdGFnIHRvIHRoZSBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0geyg/c3RyaW5nfEFycmF5KX0gdmFsdWUgLSBUaGUgdmFsdWUgb2YgdGhlIG5ldyBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIG9iai5hZGQgPSBmdW5jdGlvbih2YWx1ZSwgZm9jdXMpIHtcclxuICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9uYmVmb3JlY2hhbmdlKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHZhciByZXQgPSBvYmoub3B0aW9ucy5vbmJlZm9yZWNoYW5nZShlbCwgb2JqLCBvYmoub3B0aW9ucy52YWx1ZSwgdmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAocmV0ID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgeyBcclxuICAgICAgICAgICAgICAgIGlmIChyZXQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcmV0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBNYWtlIHN1cmUgc2VhcmNoIGlzIGNsb3NlZFxyXG4gICAgICAgIGlmIChzZWFyY2gpIHtcclxuICAgICAgICAgICAgc2VhcmNoLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobGltaXQoKSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9ubGltaXQpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm9ubGltaXQob2JqLCBvYmoub3B0aW9ucy5saW1pdCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLm9wdGlvbnMubGltaXRNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChvYmoub3B0aW9ucy5saW1pdE1lc3NhZ2UgKyAnICcgKyBvYmoub3B0aW9ucy5saW1pdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBHZXQgbm9kZVxyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IGpTdWl0ZXMuZ2V0Tm9kZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlICYmIG5vZGUucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2p0YWdzJykgJiZcclxuICAgICAgICAgICAgICAgIG5vZGUubmV4dFNpYmxpbmcgJiYgKCEgKG5vZGUubmV4dFNpYmxpbmcuaW5uZXJUZXh0ICYmIG5vZGUubmV4dFNpYmxpbmcuaW5uZXJUZXh0LnRyaW0oKSkpKSB7XHJcbiAgICAgICAgICAgICAgICBkaXYgPSBub2RlLm5leHRTaWJsaW5nO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIG5vdCB1c2VkIGxhc3QgaXRlbVxyXG4gICAgICAgICAgICAgICAgaWYgKGVsLmxhc3RDaGlsZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGVsLmxhc3RDaGlsZC5pbm5lclRleHQudHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnJlbW92ZUNoaWxkKGVsLmxhc3RDaGlsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1peCBhcmd1bWVudCBzdHJpbmcgb3IgYXJyYXlcclxuICAgICAgICAgICAgICAgIGlmICghIHZhbHVlIHx8IHR5cGVvZih2YWx1ZSkgPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGl2ID0gY3JlYXRlRWxlbWVudCh2YWx1ZSwgdmFsdWUsIG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSB2YWx1ZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBsaW1pdCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISB2YWx1ZVtpXSB8fCB0eXBlb2YodmFsdWVbaV0pID09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB2YWx1ZVtpXSB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdmFsdWVbaV0udGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IHZhbHVlW2ldLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGl2ID0gY3JlYXRlRWxlbWVudCh0LCB2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDaGFuZ2VcclxuICAgICAgICAgICAgICAgIGNoYW5nZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBQbGFjZSBjYXJldFxyXG4gICAgICAgICAgICBpZiAoZm9jdXMpIHtcclxuICAgICAgICAgICAgICAgIHNldEZvY3VzKGRpdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLnNldExpbWl0ID0gZnVuY3Rpb24obGltaXQpIHtcclxuICAgICAgICBvYmoub3B0aW9ucy5saW1pdCA9IGxpbWl0O1xyXG4gICAgICAgIHZhciBuID0gZWwuY2hpbGRyZW4ubGVuZ3RoIC0gbGltaXQ7XHJcbiAgICAgICAgd2hpbGUgKGVsLmNoaWxkcmVuLmxlbmd0aCA+IGxpbWl0KSB7XHJcbiAgICAgICAgICAgIGVsLnJlbW92ZUNoaWxkKGVsLmxhc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlbW92ZSBhIGl0ZW0gbm9kZVxyXG4gICAgb2JqLnJlbW92ZSA9IGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgICAvLyBSZW1vdmUgbm9kZVxyXG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcclxuICAgICAgICAvLyBNYWtlIHN1cmUgZWxlbWVudCBpcyBub3QgYmxhbmtcclxuICAgICAgICBpZiAoISBlbC5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgb2JqLmFkZCgnJywgdHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2hhbmdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGFsbCB0YWdzIGluIHRoZSBlbGVtZW50XHJcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gZGF0YSAtIEFsbCB0YWdzIGFzIGFuIGFycmF5XHJcbiAgICAgKi9cclxuICAgIG9iai5nZXREYXRhID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIEdldCB2YWx1ZVxyXG4gICAgICAgICAgICB2YXIgdGV4dCA9IGVsLmNoaWxkcmVuW2ldLmlubmVyVGV4dC5yZXBsYWNlKFwiXFxuXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICAvLyBHZXQgaWRcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gZWwuY2hpbGRyZW5baV0uZ2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJyk7XHJcbiAgICAgICAgICAgIGlmICghIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSXRlbVxyXG4gICAgICAgICAgICBpZiAodGV4dCB8fCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5wdXNoKHsgdGV4dDogdGV4dCwgdmFsdWU6IHZhbHVlIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSB2YWx1ZSBvZiBvbmUgdGFnLiBOdWxsIGZvciBhbGwgdGFnc1xyXG4gICAgICogQHBhcmFtIHs/bnVtYmVyfSBpbmRleCAtIFRhZyBpbmRleCBudW1iZXIuIE51bGwgZm9yIGFsbCB0YWdzLlxyXG4gICAgICogQHJldHVybiB7c3RyaW5nfSB2YWx1ZSAtIEFsbCB0YWdzIHNlcGFyYXRlZCBieSBjb21tYVxyXG4gICAgICovXHJcbiAgICBvYmouZ2V0VmFsdWUgPSBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChpbmRleCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIEdldCBvbmUgaW5kaXZpZHVhbCB2YWx1ZVxyXG4gICAgICAgICAgICB2YWx1ZSA9IGVsLmNoaWxkcmVuW2luZGV4XS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnKTtcclxuICAgICAgICAgICAgaWYgKCEgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gZWwuY2hpbGRyZW5baW5kZXhdLmlubmVyVGV4dC5yZXBsYWNlKFwiXFxuXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gR2V0IGFsbFxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGVsLmNoaWxkcmVuW2ldLmlubmVyVGV4dC5yZXBsYWNlKFwiXFxuXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKG9iai5nZXRWYWx1ZShpKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFsdWUgPSBkYXRhLmpvaW4oJywnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYmFzZWQgb24gYSBzdHJpbmcgc2VwYXJldGVkIGJ5ICgsfDt8XFxyXFxuKVxyXG4gICAgICogQHBhcmFtIHttaXhlZH0gdmFsdWUgLSBBIHN0cmluZyBvciBhcnJheSBvYmplY3Qgd2l0aCB2YWx1ZXNcclxuICAgICAqL1xyXG4gICAgb2JqLnNldFZhbHVlID0gZnVuY3Rpb24obWl4ZWQpIHtcclxuICAgICAgICBpZiAoISBtaXhlZCkge1xyXG4gICAgICAgICAgICBvYmoucmVzZXQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZWwudmFsdWUgIT0gbWl4ZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG1peGVkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5hZGQobWl4ZWQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgd2hpdGVzcGFjZXNcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dCA9ICgnJyttaXhlZCkudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRhZ3NcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGV4dHJhY3RUYWdzKHRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRhZ3MgdG8gdGhlIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICBvYmouYWRkKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXQgdGhlIGRhdGEgZnJvbSB0aGUgZWxlbWVudFxyXG4gICAgICovXHJcbiAgICBvYmoucmVzZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBFbXB0eSBjbGFzc1xyXG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2p0YWdzLWVtcHR5Jyk7XHJcbiAgICAgICAgLy8gRW1wdHkgZWxlbWVudFxyXG4gICAgICAgIGVsLmlubmVySFRNTCA9ICc8ZGl2PjwvZGl2Pic7XHJcbiAgICAgICAgLy8gRXhlY3V0ZSBjaGFuZ2VzXHJcbiAgICAgICAgY2hhbmdlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWZXJpZnkgaWYgYWxsIHRhZ3MgaW4gdGhlIGVsZW1lbnQgYXJlIHZhbGlkXHJcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBvYmouaXNWYWxpZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB0ZXN0ID0gMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlbC5jaGlsZHJlbltpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2p0YWdzX2Vycm9yJykpIHtcclxuICAgICAgICAgICAgICAgIHRlc3QrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGVzdCA9PSAwID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIG9uZSBlbGVtZW50IGZyb20gdGhlIHN1Z2dlc3Rpb25zIHRvIHRoZSBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbSAtIE5vZGUgZWxlbWVudCBpbiB0aGUgc3VnZ2VzdGlvbnMgY29udGFpbmVyXHJcbiAgICAgKi8gXHJcbiAgICBvYmouc2VsZWN0SW5kZXggPSBmdW5jdGlvbih0ZXh0LCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBub2RlID0galN1aXRlcy5nZXROb2RlKCk7XHJcbiAgICAgICAgaWYgKG5vZGUpIHtcclxuICAgICAgICAgICAgLy8gQXBwZW5kIHRleHQgdG8gdGhlIGNhcmV0XHJcbiAgICAgICAgICAgIG5vZGUuaW5uZXJUZXh0ID0gdGV4dDtcclxuICAgICAgICAgICAgLy8gU2V0IG5vZGUgaWRcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgYW55IGVycm9yXHJcbiAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnanRhZ3NfZXJyb3InKTtcclxuICAgICAgICAgICAgaWYgKCEgbGltaXQoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWRkIG5ldyBpdGVtXHJcbiAgICAgICAgICAgICAgICBvYmouYWRkKCcnLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlYXJjaCBmb3Igc3VnZ2VzdGlvbnNcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBub2RlIC0gVGFyZ2V0IG5vZGUgZm9yIGFueSBzdWdnZXN0aW9uc1xyXG4gICAgICovXHJcbiAgICBvYmouc2VhcmNoID0gZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgIC8vIFNlYXJjaCBmb3JcclxuICAgICAgICB2YXIgdGVybXMgPSBub2RlLmlubmVyVGV4dDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBEZXN0cm95IHRhZ3MgZWxlbWVudFxyXG4gICAgb2JqLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBCaW5kIGV2ZW50c1xyXG4gICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0YWdzTW91c2VVcCk7XHJcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRhZ3NLZXlEb3duKTtcclxuICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRhZ3NLZXlVcCk7XHJcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGFzdGUnLCB0YWdzUGFzdGUpO1xyXG4gICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGFnc0ZvY3VzKTtcclxuICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgdGFnc0JsdXIpO1xyXG5cclxuICAgICAgICAvLyBSZW1vdmUgZWxlbWVudFxyXG4gICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBzZXRGb2N1cyA9IGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgICBpZiAoZWwuY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xyXG4gICAgICAgICAgICB2YXIgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAoISBub2RlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGVsLmNoaWxkTm9kZXNbZWwuY2hpbGROb2Rlcy5sZW5ndGgtMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmFuZ2Uuc2V0U3RhcnQobm9kZSwgbm9kZS5sZW5ndGgpXHJcbiAgICAgICAgICAgIHJhbmdlLmNvbGxhcHNlKHRydWUpXHJcbiAgICAgICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKVxyXG4gICAgICAgICAgICBzZWwuYWRkUmFuZ2UocmFuZ2UpXHJcbiAgICAgICAgICAgIGVsLnNjcm9sbExlZnQgPSBlbC5zY3JvbGxXaWR0aDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbihsYWJlbCwgdmFsdWUsIG5vZGUpIHtcclxuICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IGxhYmVsID8gbGFiZWwgOiAnJztcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIHZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChub2RlICYmIG5vZGUucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2p0YWdzJykpIHtcclxuICAgICAgICAgICAgZWwuaW5zZXJ0QmVmb3JlKGRpdiwgbm9kZS5uZXh0U2libGluZyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkaXY7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIFZhbHVlXHJcbiAgICAgICAgdmFyIHZhbHVlID0gb2JqLmdldFZhbHVlKCk7XHJcblxyXG4gICAgICAgIGlmICh2YWx1ZSAhPSBvYmoub3B0aW9ucy52YWx1ZSkge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9ucy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9uY2hhbmdlKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5vbmNoYW5nZShlbCwgb2JqLCBvYmoub3B0aW9ucy52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIExlbW9uYWRlIEpTXHJcbiAgICAgICAgICAgIGlmIChlbC52YWx1ZSAhPSBvYmoub3B0aW9ucy52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZWwudmFsdWUgPSBvYmoub3B0aW9ucy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoZWwub25jaGFuZ2UpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbC5vbmNoYW5nZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGFuZ2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZWwudmFsdWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZmlsdGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaWx0ZXIgdGFnc1xyXG4gICAgICovXHJcbiAgICB2YXIgZmlsdGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgbGFiZWwgZGVzaWduXHJcbiAgICAgICAgICAgIGlmICghIG9iai5nZXRWYWx1ZShpKSkge1xyXG4gICAgICAgICAgICAgICAgZWwuY2hpbGRyZW5baV0uY2xhc3NMaXN0LnJlbW92ZSgnanRhZ3NfbGFiZWwnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5hZGQoJ2p0YWdzX2xhYmVsJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVmFsaWRhdGlvbiBpbiBwbGFjZVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy52YWxpZGF0aW9uKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5nZXRWYWx1ZShpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBvYmoub3B0aW9ucy52YWxpZGF0aW9uKGVsLmNoaWxkcmVuW2ldLCBlbC5jaGlsZHJlbltpXS5pbm5lclRleHQsIGVsLmNoaWxkcmVuW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuY2hpbGRyZW5baV0uY2xhc3NMaXN0LmFkZCgnanRhZ3NfZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2p0YWdzX2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5jaGlsZHJlbltpXS5jbGFzc0xpc3QucmVtb3ZlKCdqdGFnc19lcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuY2hpbGRyZW5baV0uY2xhc3NMaXN0LnJlbW92ZSgnanRhZ3NfZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaXNFbXB0eSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBpc0VtcHR5ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gQ2FuJ3QgYmUgZW1wdHlcclxuICAgICAgICBpZiAoISBlbC5pbm5lclRleHQudHJpbSgpKSB7XHJcbiAgICAgICAgICAgIGVsLmlubmVySFRNTCA9ICc8ZGl2PjwvZGl2Pic7XHJcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2p0YWdzLWVtcHR5Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnanRhZ3MtZW1wdHknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFeHRyYWN0IHRhZ3MgZnJvbSBhIHN0cmluZ1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBSYXcgc3RyaW5nXHJcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gZGF0YSAtIEFycmF5IHdpdGggZXh0cmFjdGVkIHRhZ3NcclxuICAgICAqL1xyXG4gICAgdmFyIGV4dHJhY3RUYWdzID0gZnVuY3Rpb24odGV4dCkge1xyXG4gICAgICAgIC8qKiBAdHlwZSB7QXJyYXl9ICovXHJcbiAgICAgICAgdmFyIGRhdGEgPSBbXTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovXHJcbiAgICAgICAgdmFyIHdvcmQgPSAnJztcclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIHdoaXRlc3BhY2VzXHJcbiAgICAgICAgdGV4dCA9IHRleHQudHJpbSgpO1xyXG5cclxuICAgICAgICBpZiAodGV4dCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXh0W2ldID09ICcsJyB8fCB0ZXh0W2ldID09ICc7JyB8fCB0ZXh0W2ldID09ICdcXG4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKHdvcmQudHJpbSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29yZCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZCArPSB0ZXh0W2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAod29yZCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5wdXNoKHdvcmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cclxuICAgIHZhciBhbmNob3JPZmZzZXQgPSAwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJvY2Vzc2luZyBldmVudCBrZXlkb3duIG9uIHRoZSBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gZSB7b2JqZWN0fVxyXG4gICAgICovXHJcbiAgICB2YXIgdGFnc0tleURvd24gPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgLy8gQW5jaG9yb2Zmc2V0XHJcbiAgICAgICAgYW5jaG9yT2Zmc2V0ID0gd2luZG93LmdldFNlbGVjdGlvbigpLmFuY2hvck9mZnNldDtcclxuXHJcbiAgICAgICAgLy8gVmVyaWZ5IGlmIGlzIGVtcHR5XHJcbiAgICAgICAgaXNFbXB0eSgpO1xyXG5cclxuICAgICAgICAvLyBDb21tYVxyXG4gICAgICAgIGlmIChlLmtleSA9PT0gJ1RhYicgIHx8IGUua2V5ID09PSAnOycgfHwgZS5rZXkgPT09ICcsJykge1xyXG4gICAgICAgICAgICB2YXIgbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5hbmNob3JPZmZzZXQ7XHJcbiAgICAgICAgICAgIGlmIChuID4gMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpbWl0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mKG9iai5vcHRpb25zLm9ubGltaXQpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm9wdGlvbnMub25saW1pdChvYmosIG9iai5vcHRpb25zLmxpbWl0KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmFkZCgnJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT0gJ0VudGVyJykge1xyXG4gICAgICAgICAgICBpZiAoISBzZWFyY2ggfHwgISBzZWFyY2guaXNPcGVuZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG4gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkuYW5jaG9yT2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgaWYgKG4gPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgbGltaXQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmouYWRkKCcnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09ICdCYWNrc3BhY2UnKSB7XHJcbiAgICAgICAgICAgIC8vIEJhY2sgc3BhY2UgLSBkbyBub3QgbGV0IGxhc3QgaXRlbSB0byBiZSByZW1vdmVkXHJcbiAgICAgICAgICAgIGlmIChlbC5jaGlsZHJlbi5sZW5ndGggPT0gMSAmJiB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkuYW5jaG9yT2Zmc2V0IDwgMSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTZWFyY2ggZXZlbnRzXHJcbiAgICAgICAgaWYgKHNlYXJjaCkge1xyXG4gICAgICAgICAgICBzZWFyY2gua2V5ZG93bihlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9jZXNzaW5nIGV2ZW50IGtleXVwIG9uIHRoZSBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gZSB7b2JqZWN0fVxyXG4gICAgICovXHJcbiAgICB2YXIgdGFnc0tleVVwID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGlmIChlLndoaWNoID09IDM5KSB7XHJcbiAgICAgICAgICAgIC8vIFJpZ2h0IGFycm93XHJcbiAgICAgICAgICAgIHZhciBuID0gd2luZG93LmdldFNlbGVjdGlvbigpLmFuY2hvck9mZnNldDtcclxuICAgICAgICAgICAgaWYgKG4gPiAxICYmIG4gPT0gYW5jaG9yT2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgICBvYmouYWRkKCcnLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoZS53aGljaCA9PSAxMyB8fCBlLndoaWNoID09IDM4IHx8IGUud2hpY2ggPT0gNDApIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChzZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgIHNlYXJjaC5rZXl1cChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZmlsdGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9jZXNzaW5nIGV2ZW50IHBhc3RlIG9uIHRoZSBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gZSB7b2JqZWN0fVxyXG4gICAgICovXHJcbiAgICB2YXIgdGFnc1Bhc3RlID0gIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoZS5jbGlwYm9hcmREYXRhIHx8IGUub3JpZ2luYWxFdmVudC5jbGlwYm9hcmREYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gKGUub3JpZ2luYWxFdmVudCB8fCBlKS5jbGlwYm9hcmREYXRhLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5jbGlwYm9hcmREYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gd2luZG93LmNsaXBib2FyZERhdGEuZ2V0RGF0YSgnVGV4dCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGRhdGEgPSBleHRyYWN0VGFncyh0ZXh0KTtcclxuICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIG9iai5hZGQoZGF0YSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9jZXNzaW5nIGV2ZW50IG1vdXNldXAgb24gdGhlIGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSBlIHtvYmplY3R9XHJcbiAgICAgKi9cclxuICAgIHZhciB0YWdzTW91c2VVcCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoZS50YXJnZXQucGFyZW50Tm9kZSAmJiBlLnRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucygnanRhZ3MnKSkge1xyXG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqdGFnc19sYWJlbCcpIHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnanRhZ3NfZXJyb3InKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlY3QgPSBlLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZWN0LndpZHRoIC0gKGUuY2xpZW50WCAtIHJlY3QubGVmdCkgPCAxNikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5yZW1vdmUoZS50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTZXQgZm9jdXMgaW4gdGhlIGxhc3QgaXRlbVxyXG4gICAgICAgIGlmIChlLnRhcmdldCA9PSBlbCkge1xyXG4gICAgICAgICAgICBzZXRGb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgdGFnc0ZvY3VzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCEgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdqdGFncy1mb2N1cycpKSB7XHJcbiAgICAgICAgICAgIGlmICghIGVsLmNoaWxkcmVuLmxlbmd0aCB8fCBvYmouZ2V0VmFsdWUoZWwuY2hpbGRyZW4ubGVuZ3RoIC0gMSkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghIGxpbWl0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KCcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbmZvY3VzKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5vbmZvY3VzKGVsLCBvYmosIG9iai5nZXRWYWx1ZSgpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnanRhZ3MtZm9jdXMnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHRhZ3NCbHVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnanRhZ3MtZm9jdXMnKSkge1xyXG4gICAgICAgICAgICBpZiAoc2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgICBzZWFyY2guY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbC5jaGlsZHJlbi5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBsYWJlbCBkZXNpZ25cclxuICAgICAgICAgICAgICAgIGlmICghIG9iai5nZXRWYWx1ZShpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLnJlbW92ZUNoaWxkKGVsLmNoaWxkcmVuW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY2hhbmdlKCk7XHJcblxyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdqdGFncy1mb2N1cycpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZihvYmoub3B0aW9ucy5vbmJsdXIpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLm9uYmx1cihlbCwgb2JqLCBvYmouZ2V0VmFsdWUoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBCaW5kIGV2ZW50c1xyXG4gICAgICAgIGlmICgndG91Y2hlbmQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRhZ3NNb3VzZVVwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGFnc01vdXNlVXApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRhZ3NLZXlEb3duKTtcclxuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRhZ3NLZXlVcCk7XHJcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigncGFzdGUnLCB0YWdzUGFzdGUpO1xyXG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGFnc0ZvY3VzKTtcclxuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGFnc0JsdXIpO1xyXG5cclxuICAgICAgICAvLyBFZGl0YWJsZVxyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJywgdHJ1ZSk7XHJcblxyXG4gICAgICAgIC8vIFByZXBhcmUgY29udGFpbmVyXHJcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnanRhZ3MnKTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbCBvcHRpb25zXHJcbiAgICAgICAgb2JqLnNldE9wdGlvbnMob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2Yob2JqLm9wdGlvbnMub25sb2FkKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIG9iai5vcHRpb25zLm9ubG9hZChlbCwgb2JqKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoYW5nZSBtZXRob2RzXHJcbiAgICAgICAgZWwuY2hhbmdlID0gb2JqLnNldFZhbHVlO1xyXG5cclxuICAgICAgICAvLyBHbG9iYWwgZ2VuZXJpYyB2YWx1ZSBoYW5kbGVyXHJcbiAgICAgICAgZWwudmFsID0gZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iai5nZXRWYWx1ZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb2JqLnNldFZhbHVlKHZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsLnRhZ3MgPSBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpO1xyXG5cclxuICAgIHJldHVybiBvYmo7XHJcbn0pO1xyXG5cclxualN1aXRlcy50b29sYmFyID0gKGZ1bmN0aW9uKGVsLCBvcHRpb25zKSB7XHJcbiAgICAvLyBOZXcgaW5zdGFuY2VcclxuICAgIHZhciBvYmogPSB7IHR5cGU6J3Rvb2xiYXInIH07XHJcbiAgICBvYmoub3B0aW9ucyA9IHt9O1xyXG5cclxuICAgIC8vIERlZmF1bHQgY29uZmlndXJhdGlvblxyXG4gICAgdmFyIGRlZmF1bHRzID0ge1xyXG4gICAgICAgIGFwcDogbnVsbCxcclxuICAgICAgICBjb250YWluZXI6IGZhbHNlLFxyXG4gICAgICAgIGJhZGdlOiBmYWxzZSxcclxuICAgICAgICB0aXRsZTogZmFsc2UsXHJcbiAgICAgICAgcmVzcG9uc2l2ZTogZmFsc2UsXHJcbiAgICAgICAgbWF4V2lkdGg6IG51bGwsXHJcbiAgICAgICAgYm90dG9tOiB0cnVlLFxyXG4gICAgICAgIGl0ZW1zOiBbXSxcclxuICAgIH1cclxuXHJcbiAgICAvLyBMb29wIHRocm91Z2ggb3VyIG9iamVjdFxyXG4gICAgZm9yICh2YXIgcHJvcGVydHkgaW4gZGVmYXVsdHMpIHtcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9uc1twcm9wZXJ0eV0gPSBvcHRpb25zW3Byb3BlcnR5XTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBvYmoub3B0aW9uc1twcm9wZXJ0eV0gPSBkZWZhdWx0c1twcm9wZXJ0eV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghIGVsICYmIG9wdGlvbnMuYXBwICYmIG9wdGlvbnMuYXBwLmVsKSB7XHJcbiAgICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBvcHRpb25zLmFwcC5lbC5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQXJyb3dcclxuICAgIHZhciB0b29sYmFyQXJyb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRvb2xiYXJBcnJvdy5jbGFzc0xpc3QuYWRkKCdqdG9vbGJhci1pdGVtJyk7XHJcbiAgICB0b29sYmFyQXJyb3cuY2xhc3NMaXN0LmFkZCgnanRvb2xiYXItYXJyb3cnKTtcclxuXHJcbiAgICB2YXIgdG9vbGJhckZsb2F0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0b29sYmFyRmxvYXRpbmcuY2xhc3NMaXN0LmFkZCgnanRvb2xiYXItZmxvYXRpbmcnKTtcclxuICAgIHRvb2xiYXJBcnJvdy5hcHBlbmRDaGlsZCh0b29sYmFyRmxvYXRpbmcpO1xyXG5cclxuICAgIG9iai5zZWxlY3RJdGVtID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRvb2xiYXJDb250ZW50LmNoaWxkcmVuO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT0gZWxlbWVudHNbaV0pIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2p0b29sYmFyLXNlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdqdG9vbGJhci1zZWxlY3RlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5oaWRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgalN1aXRlcy5hbmltYXRpb24uc2xpZGVCb3R0b20oZWwsIDAsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5zaG93ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgIGpTdWl0ZXMuYW5pbWF0aW9uLnNsaWRlQm90dG9tKGVsLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBvYmouZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGVsO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5zZXRCYWRnZSA9IGZ1bmN0aW9uKGluZGV4LCB2YWx1ZSkge1xyXG4gICAgICAgIHRvb2xiYXJDb250ZW50LmNoaWxkcmVuW2luZGV4XS5jaGlsZHJlblsxXS5maXJzdENoaWxkLmlubmVySFRNTCA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdG9vbGJhci5yZW1vdmUoKTtcclxuICAgICAgICBlbC5pbm5lckhUTUwgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICBvYmoudXBkYXRlID0gZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9vbGJhckNvbnRlbnQuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgLy8gVG9vbGJhciBlbGVtZW50XHJcbiAgICAgICAgICAgIHZhciB0b29sYmFySXRlbSA9IHRvb2xiYXJDb250ZW50LmNoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICAvLyBTdGF0ZSBtYW5hZ2VtZW50XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YodG9vbGJhckl0ZW0udXBkYXRlU3RhdGUpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHRvb2xiYXJJdGVtLnVwZGF0ZVN0YXRlKGVsLCBvYmosIHRvb2xiYXJJdGVtLCBhLCBiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvYmouY3JlYXRlID0gZnVuY3Rpb24oaXRlbXMpIHtcclxuICAgICAgICAvLyBSZXNldCBhbnl0aGluZyBpbiB0aGUgdG9vbGJhclxyXG4gICAgICAgIHRvb2xiYXJDb250ZW50LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIC8vIENyZWF0ZSBlbGVtZW50cyBpbiB0aGUgdG9vbGJhclxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHRvb2xiYXJJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHRvb2xiYXJJdGVtLmNsYXNzTGlzdC5hZGQoJ2p0b29sYmFyLWl0ZW0nKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpdGVtc1tpXS53aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0uc3R5bGUud2lkdGggPSBwYXJzZUludChpdGVtc1tpXS53aWR0aCkgKyAncHgnOyBcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW1zW2ldLmspIHtcclxuICAgICAgICAgICAgICAgIHRvb2xiYXJJdGVtLmsgPSBpdGVtc1tpXS5rO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaXRlbXNbaV0udG9vbHRpcCkge1xyXG4gICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0uc2V0QXR0cmlidXRlKCd0aXRsZScsIGl0ZW1zW2ldLnRvb2x0aXApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJZFxyXG4gICAgICAgICAgICBpZiAoaXRlbXNbaV0uaWQpIHtcclxuICAgICAgICAgICAgICAgIHRvb2xiYXJJdGVtLnNldEF0dHJpYnV0ZSgnaWQnLCBpdGVtc1tpXS5pZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFNlbGVjdGVkXHJcbiAgICAgICAgICAgIGlmIChpdGVtc1tpXS51cGRhdGVTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0udXBkYXRlU3RhdGUgPSBpdGVtc1tpXS51cGRhdGVTdGF0ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW1zW2ldLmFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0uY2xhc3NMaXN0LmFkZCgnanRvb2xiYXItYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpdGVtc1tpXS50eXBlID09ICdzZWxlY3QnIHx8IGl0ZW1zW2ldLnR5cGUgPT0gJ2Ryb3Bkb3duJykge1xyXG4gICAgICAgICAgICAgICAgalN1aXRlcy5waWNrZXIodG9vbGJhckl0ZW0sIGl0ZW1zW2ldKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtc1tpXS50eXBlID09ICdkaXZpc29yJykge1xyXG4gICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0uY2xhc3NMaXN0LmFkZCgnanRvb2xiYXItZGl2aXNvcicpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW1zW2ldLnR5cGUgPT0gJ2xhYmVsJykge1xyXG4gICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0uY2xhc3NMaXN0LmFkZCgnanRvb2xiYXItbGFiZWwnKTtcclxuICAgICAgICAgICAgICAgIHRvb2xiYXJJdGVtLmlubmVySFRNTCA9IGl0ZW1zW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBNYXRlcmlhbCBpY29uc1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvb2xiYXJJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihpdGVtc1tpXS5jbGFzcykgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbGJhckljb24uY2xhc3NMaXN0LmFkZCgnbWF0ZXJpYWwtaWNvbnMnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBpdGVtc1tpXS5jbGFzcy5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFySWNvbi5jbGFzc0xpc3QuYWRkKGNbal0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRvb2xiYXJJY29uLmlubmVySFRNTCA9IGl0ZW1zW2ldLmNvbnRlbnQgPyBpdGVtc1tpXS5jb250ZW50IDogJyc7XHJcbiAgICAgICAgICAgICAgICB0b29sYmFySXRlbS5hcHBlbmRDaGlsZCh0b29sYmFySWNvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQmFkZ2Ugb3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vcHRpb25zLmJhZGdlID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9vbGJhckJhZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbGJhckJhZGdlLmNsYXNzTGlzdC5hZGQoJ2piYWRnZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b29sYmFyQmFkZ2VDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbGJhckJhZGdlQ29udGVudC5pbm5lckhUTUwgPSBpdGVtc1tpXS5iYWRnZSA/IGl0ZW1zW2ldLmJhZGdlIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbGJhckJhZGdlLmFwcGVuZENoaWxkKHRvb2xiYXJCYWRnZUNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJdGVtLmFwcGVuZENoaWxkKHRvb2xiYXJCYWRnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVGl0bGVcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtc1tpXS50aXRsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmoub3B0aW9ucy50aXRsZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b29sYmFyVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJUaXRsZS5pbm5lckhUTUwgPSBpdGVtc1tpXS50aXRsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0uYXBwZW5kQ2hpbGQodG9vbGJhclRpdGxlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFySXRlbS5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgaXRlbXNbaV0udGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLm9wdGlvbnMuYXBwICYmIGl0ZW1zW2ldLnJvdXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUm91dGVcclxuICAgICAgICAgICAgICAgICAgICB0b29sYmFySXRlbS5yb3V0ZSA9IGl0ZW1zW2ldLnJvdXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE9uY2xpY2sgZm9yIHJvdXRlXHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0ub25jbGljayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5hcHAucGFnZXModGhpcy5yb3V0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBwYWdlc1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5vcHRpb25zLmFwcC5wYWdlcyhpdGVtc1tpXS5yb3V0ZSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFySXRlbTogdG9vbGJhckl0ZW0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlZDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaXRlbXNbaV0ub25jbGljaykge1xyXG4gICAgICAgICAgICAgICAgdG9vbGJhckl0ZW0ub25jbGljayA9IGl0ZW1zW2ldLm9uY2xpY2suYmluZChpdGVtc1tpXSwgZWwsIG9iaiwgdG9vbGJhckl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0b29sYmFyQ29udGVudC5hcHBlbmRDaGlsZCh0b29sYmFySXRlbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGaXRzIHRvIHRoZSBwYWdlXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgb2JqLnJlZnJlc2goKTtcclxuICAgICAgICB9LCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBvYmoub3BlbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHRvb2xiYXJBcnJvdy5jbGFzc0xpc3QuYWRkKCdqdG9vbGJhci1hcnJvdy1zZWxlY3RlZCcpO1xyXG5cclxuICAgICAgICB2YXIgcmVjdEVsZW1lbnQgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICB2YXIgcmVjdCA9IHRvb2xiYXJGbG9hdGluZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICBpZiAocmVjdC5ib3R0b20gPiB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgb2JqLm9wdGlvbnMuYm90dG9tKSB7XHJcbiAgICAgICAgICAgIHRvb2xiYXJGbG9hdGluZy5zdHlsZS5ib3R0b20gPSAnMCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdG9vbGJhckZsb2F0aW5nLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdib3R0b20nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRvb2xiYXJGbG9hdGluZy5zdHlsZS5yaWdodCA9ICcwJztcclxuXHJcbiAgICAgICAgdG9vbGJhckFycm93LmNoaWxkcmVuWzBdLmZvY3VzKCk7XHJcbiAgICAgICAgLy8gU3RhcnQgdHJhY2tpbmdcclxuICAgICAgICBqU3VpdGVzLnRyYWNraW5nKG9iaiwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb2JqLmNsb3NlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdG9vbGJhckFycm93LmNsYXNzTGlzdC5yZW1vdmUoJ2p0b29sYmFyLWFycm93LXNlbGVjdGVkJylcclxuICAgICAgICAvLyBFbmQgdHJhY2tpbmdcclxuICAgICAgICBqU3VpdGVzLnRyYWNraW5nKG9iaiwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIG9iai5yZWZyZXNoID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKG9iai5vcHRpb25zLnJlc3BvbnNpdmUgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAvLyBXaWR0aCBvZiB0aGUgY1xyXG4gICAgICAgICAgICB2YXIgcmVjdCA9IGVsLnBhcmVudE5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIGlmICghIG9iai5vcHRpb25zLm1heFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoub3B0aW9ucy5tYXhXaWR0aCA9IHJlY3Qud2lkdGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQXZhaWxhYmxlIHBhcmVudCBzcGFjZVxyXG4gICAgICAgICAgICB2YXIgYXZhaWxhYmxlID0gcGFyc2VJbnQob2JqLm9wdGlvbnMubWF4V2lkdGgpO1xyXG4gICAgICAgICAgICAvLyBSZW1vdmUgYXJyb3dcclxuICAgICAgICAgICAgdG9vbGJhckFycm93LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAvLyBNb3ZlIGFsbCBpdGVtcyB0byB0aGUgdG9vbGJhclxyXG4gICAgICAgICAgICB3aGlsZSAodG9vbGJhckZsb2F0aW5nLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgICAgIHRvb2xiYXJDb250ZW50LmFwcGVuZENoaWxkKHRvb2xiYXJGbG9hdGluZy5maXJzdENoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUb29sYmFyIGlzIGxhcmdlciB0aGFuIHRoZSBwYXJlbnQsIG1vdmUgZWxlbWVudHMgdG8gdGhlIGZsb2F0aW5nIGVsZW1lbnRcclxuICAgICAgICAgICAgaWYgKGF2YWlsYWJsZSA8IHRvb2xiYXJDb250ZW50Lm9mZnNldFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBHaXZlIHNwYWNlIHRvIHRoZSBmbG9hdGluZyBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICBhdmFpbGFibGUgLT0gNTA7XHJcbiAgICAgICAgICAgICAgICAvLyBNb3ZlIHRvIHRoZSBmbG9hdGluZyBvcHRpb25cclxuICAgICAgICAgICAgICAgIHdoaWxlICh0b29sYmFyQ29udGVudC5sYXN0Q2hpbGQgJiYgYXZhaWxhYmxlIDwgdG9vbGJhckNvbnRlbnQub2Zmc2V0V2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b29sYmFyRmxvYXRpbmcuaW5zZXJ0QmVmb3JlKHRvb2xiYXJDb250ZW50Lmxhc3RDaGlsZCwgdG9vbGJhckZsb2F0aW5nLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFNob3cgYXJyb3dcclxuICAgICAgICAgICAgaWYgKHRvb2xiYXJGbG9hdGluZy5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0b29sYmFyQ29udGVudC5hcHBlbmRDaGlsZCh0b29sYmFyQXJyb3cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGVsLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBqU3VpdGVzLmZpbmRFbGVtZW50KGUudGFyZ2V0LCAnanRvb2xiYXItaXRlbScpO1xyXG4gICAgICAgIGlmIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIG9iai5zZWxlY3RJdGVtKGVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnanRvb2xiYXItYXJyb3cnKSkge1xyXG4gICAgICAgICAgICBvYmoub3BlbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgb2JqLnJlZnJlc2goKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFRvb2xiYXJcclxuICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2p0b29sYmFyJyk7XHJcbiAgICAvLyBSZXNldCBjb250ZW50XHJcbiAgICBlbC5pbm5lckhUTUwgPSAnJztcclxuICAgIC8vIENvbnRhaW5lclxyXG4gICAgaWYgKG9iai5vcHRpb25zLmNvbnRhaW5lciA9PSB0cnVlKSB7XHJcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnanRvb2xiYXItY29udGFpbmVyJyk7XHJcbiAgICB9XHJcbiAgICAvLyBDb250ZW50XHJcbiAgICB2YXIgdG9vbGJhckNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGVsLmFwcGVuZENoaWxkKHRvb2xiYXJDb250ZW50KTtcclxuICAgIC8vIFNwZWNpYWwgdG9vbGJhciBmb3IgbW9iaWxlIGFwcGxpY2F0aW9uc1xyXG4gICAgaWYgKG9iai5vcHRpb25zLmFwcCkge1xyXG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2p0b29sYmFyLW1vYmlsZScpO1xyXG4gICAgfVxyXG4gICAgLy8gQ3JlYXRlIHRvb2xiYXJcclxuICAgIG9iai5jcmVhdGUob2JqLm9wdGlvbnMuaXRlbXMpO1xyXG4gICAgLy8gU2hvcnRjdXRcclxuICAgIGVsLnRvb2xiYXIgPSBvYmo7XHJcblxyXG4gICAgcmV0dXJuIG9iajtcclxufSk7XHJcblxyXG5qU3VpdGVzLnZhbGlkYXRpb25zID0gZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcclxuICAgIGlmICh0eXBlb2YoalN1aXRlcy52YWxpZGF0aW9uc1tvcHRpb25zLnR5cGVdKSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHJldHVybiBqU3VpdGVzLnZhbGlkYXRpb25zW29wdGlvbnMudHlwZV0odmFsdWUsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XHJcblxyXG4vLyBMZWdhY3lcclxualN1aXRlcy52YWxpZGF0aW9ucy5lbWFpbCA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgIHZhciBwYXR0ZXJuID0gbmV3IFJlZ0V4cCgvXlteXFxzQF0rQFteXFxzQF0rXFwuW15cXHNAXSskLyk7XHJcbiAgICByZXR1cm4gZGF0YSAmJiBwYXR0ZXJuLnRlc3QoZGF0YSkgPyB0cnVlIDogZmFsc2U7IFxyXG59XHJcblxyXG5qU3VpdGVzLnZhbGlkYXRpb25zLnJlcXVpcmVkID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgcmV0dXJuIGRhdGEudHJpbSgpID8gdHJ1ZSA6IGZhbHNlO1xyXG59XHJcblxyXG5qU3VpdGVzLnZhbGlkYXRpb25zLm51bWJlciA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgIHJldHVybiBqU3VpdGVzLmlzTnVtYmVyKGRhdGEpO1xyXG59XHJcblxyXG5qU3VpdGVzLnZhbGlkYXRpb25zLmxvZ2luID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgdmFyIHBhdHRlcm4gPSBuZXcgUmVnRXhwKC9eW2EtekEtWjAtOVxcX1xcLVxcLlxccytdKyQvKTtcclxuICAgIHJldHVybiBkYXRhICYmIHBhdHRlcm4udGVzdChkYXRhKSA/IHRydWUgOiBmYWxzZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIE9wdGlvbnM6IE9iamVjdCxcclxuICogUHJvcGVydGllczogXHJcbiAqIENvbnN0cmFpbnQsXHJcbiAqIFJlZmVyZW5jZSxcclxuICogVmFsdWVcclxuICovXHJcblxyXG52YXIgdmFsdWVDb21wYXJpc29ucyA9IGZ1bmN0aW9uKGRhdGEsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zLmNvbnN0cmFpbnQgPT09ICc9Jykge1xyXG4gICAgICAgIHJldHVybiBkYXRhID09PSBvcHRpb25zLnJlZmVyZW5jZTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmNvbnN0cmFpbnQgPT09ICc8Jykge1xyXG4gICAgICAgIHJldHVybiBkYXRhIDwgb3B0aW9ucy5yZWZlcmVuY2U7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy5jb25zdHJhaW50ID09PSAnPD0nKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEgPD0gb3B0aW9ucy5yZWZlcmVuY2U7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy5jb25zdHJhaW50ID09PSAnPicpIHtcclxuICAgICAgICByZXR1cm4gZGF0YSA+IG9wdGlvbnMucmVmZXJlbmNlO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMuY29uc3RyYWludCA9PT0gJz49Jykge1xyXG4gICAgICAgIHJldHVybiBkYXRhID49IG9wdGlvbnMucmVmZXJlbmNlO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMuY29uc3RyYWludCA9PT0gJ2JldHdlZW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEgPj0gb3B0aW9ucy5yZWZlcmVuY2VbMF0gJiYgZGF0YSA8PSBvcHRpb25zLnJlZmVyZW5jZVsxXTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmNvbnN0cmFpbnQgPT09ICdub3QgYmV0d2VlbicpIHtcclxuICAgICAgICByZXR1cm4gZGF0YSA8IG9wdGlvbnMucmVmZXJlbmNlWzBdIHx8IGRhdGEgPiBvcHRpb25zLnJlZmVyZW5jZVsxXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxualN1aXRlcy52YWxpZGF0aW9ucy5udW1iZXIgPSBmdW5jdGlvbihkYXRhLCBvcHRpb25zKSB7XHJcbiAgICBpZiAoIWpTdWl0ZXMuaXNOdW1lcmljKGRhdGEpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5jb25zdHJhaW50ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsdWVDb21wYXJpc29ucyhkYXRhLCBvcHRpb25zKTtcclxufVxyXG5cclxualN1aXRlcy52YWxpZGF0aW9ucy5kYXRlID0gZnVuY3Rpb24oZGF0YSwgb3B0aW9ucykge1xyXG4gICAgaWYgKG5ldyBEYXRlKGRhdGEpID09ICdJbnZhbGlkIERhdGUnKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5jb25zdHJhaW50ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mKG9wdGlvbnMpID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGRhdGEgPSBuZXcgRGF0ZShkYXRhKS5nZXRUaW1lKCk7XHJcblxyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMucmVmZXJlbmNlKSkge1xyXG4gICAgICAgICAgICBvcHRpb25zLnJlZmVyZW5jZSA9IG9wdGlvbnMucmVmZXJlbmNlLm1hcChmdW5jdGlvbihyZWZlcmVuY2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShyZWZlcmVuY2UpLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5yZWZlcmVuY2UgPSBuZXcgRGF0ZShvcHRpb25zLnJlZmVyZW5jZSkuZ2V0VGltZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlQ29tcGFyaXNvbnMoZGF0YSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxualN1aXRlcy52YWxpZGF0aW9ucy5pdGVtTGlzdCA9IGZ1bmN0aW9uKGRhdGEsIG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBvcHRpb25zLnJlZmVyZW5jZS5zb21lKGZ1bmN0aW9uKHJlZmVyZW5jZSkge1xyXG4gICAgICAgIHJldHVybiByZWZlcmVuY2UgPT0gZGF0YTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5qU3VpdGVzLnZhbGlkYXRpb25zLnRleHQgPSBmdW5jdGlvbihkYXRhLCBvcHRpb25zKSB7XHJcbiAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5jb25zdHJhaW50ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmNvbnN0cmFpbnQgPT09ICc9Jykge1xyXG4gICAgICAgIHJldHVybiBkYXRhID09PSBvcHRpb25zLnJlZmVyZW5jZTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmNvbnN0cmFpbnQgPT09ICdjb250YWlucycpIHtcclxuICAgICAgICByZXR1cm4gZGF0YS5pbmNsdWRlcyhvcHRpb25zLnJlZmVyZW5jZSk7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy5jb25zdHJhaW50ID09PSAnbm90IGNvbnRhaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuICFkYXRhLmluY2x1ZGVzKG9wdGlvbnMucmVmZXJlbmNlKTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmNvbnN0cmFpbnQgPT09ICdlbWFpbCcpIHtcclxuICAgICAgICByZXR1cm4galN1aXRlcy52YWxpZGF0aW9ucy5lbWFpbChkYXRhKTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmNvbnN0cmFpbnQgPT09ICd1cmwnKSB7XHJcbiAgICAgICAgdmFyIHBhdHRlcm4gPSBuZXcgUmVnRXhwKC8oKChodHRwcz86XFwvXFwvKXwod3d3XFwuKSlbLUEtWjAtOSsmQCNcXC8lPz1+X3whOiwuO10qWy1BLVowLTkrJkAjXFwvJT1+X3xdKykvaWcpO1xyXG4gICAgICAgIHJldHVybiBwYXR0ZXJuLnRlc3QoZGF0YSkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxualN1aXRlcy52YWxpZGF0aW9ucy5jb25zdHJhaW50cyA9IGZ1bmN0aW9uKCkge1xyXG59XHJcblxyXG5cclxuXHJcbiAgICByZXR1cm4galN1aXRlcztcclxuXHJcbn0pKSk7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///856\n")},857:function(module,exports,__webpack_require__){eval("// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(858);\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = __webpack_require__(27).default\nvar update = add(\"57792a00\", content, true, {\"sourceMap\":false});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvanN1aXRlcy9kaXN0L2pzdWl0ZXMuY3NzPzkwMjQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQSxjQUFjLG1CQUFPLENBQUMsR0FBb0g7QUFDMUk7QUFDQSw0Q0FBNEMsUUFBUztBQUNyRDtBQUNBO0FBQ0EsVUFBVSxtQkFBTyxDQUFDLEVBQWdEO0FBQ2xFLDZDQUE2QyxrQkFBa0IiLCJmaWxlIjoiODU3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL2Nzcy1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tMy1vbmVPZi0xLTEhLi4vLi4vcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9yZWYtLTMtb25lT2YtMS0yIS4vanN1aXRlcy5jc3NcIik7XG5pZihjb250ZW50Ll9fZXNNb2R1bGUpIGNvbnRlbnQgPSBjb250ZW50LmRlZmF1bHQ7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIGFkZCA9IHJlcXVpcmUoXCIhLi4vLi4vdnVlLXN0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzQ2xpZW50LmpzXCIpLmRlZmF1bHRcbnZhciB1cGRhdGUgPSBhZGQoXCI1Nzc5MmEwMFwiLCBjb250ZW50LCB0cnVlLCB7XCJzb3VyY2VNYXBcIjpmYWxzZX0pOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///857\n")},858:function(module,exports,__webpack_require__){eval("// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(26);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \":root{--button-color:#298ba8;--active-color:#007aff}div[data-before]:before{content:attr(data-before)}.unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jreadonly{pointer-events:none}.jdragging{opacity:.2;filter:alpha(opacity=20)}.jupload.input{position:relative;box-sizing:border-box;background-size:auto auto;background-size:initial;height:33px;min-height:0;padding:6px 30px 6px 6px}.jupload.input:before{content:\\\"save\\\";font-size:18px;font-family:\\\"Material Icons\\\";color:#000;position:absolute;right:5px}.jupload img{width:100%}.jupload.input img{width:auto;max-width:100%;height:100%}.jupload[data-multiple]{padding:10px}.jupload[data-multiple] img{height:70px;width:100px;-o-object-fit:cover;object-fit:cover;margin-right:5px;margin-bottom:5px}.jupload{position:relative;border:1px dotted #eee;cursor:pointer;box-sizing:border-box;width:100%;max-height:100%;min-height:180px}.jupload:not(.input):before{content:\\\"\\\\e2c3\\\";font-family:\\\"Material Icons\\\";font-size:90px;color:#eee;width:100%;height:100%;display:flex;align-items:center;justify-content:center;position:absolute;z-index:-1}.jupload-item{padding-right:22px;border-radius:1px;display:inline-block;position:relative}.jremove{opacity:.2;filter:alpha(opacity=20)}.round img{border-radius:1000px}.fade-in{-webkit-animation:fade-in 2s forwards;animation:fade-in 2s forwards}.fade-out{-webkit-animation:fade-out 1s forwards;animation:fade-out 1s forwards}.slide-left-in{position:relative;-webkit-animation:slide-left-in .4s forwards;animation:slide-left-in .4s forwards}.slide-left-out{position:relative;-webkit-animation:slide-left-out .4s forwards;animation:slide-left-out .4s forwards}.slide-right-in{position:relative;-webkit-animation:slide-right-in .4s forwards;animation:slide-right-in .4s forwards}.slide-right-out{position:relative;-webkit-animation:slide-right-out .4s forwards;animation:slide-right-out .4s forwards}.slide-top-in{position:relative;-webkit-animation:slide-top-in .4s forwards;animation:slide-top-in .4s forwards}.slide-top-out{position:relative;-webkit-animation:slide-top-out .2s forwards;animation:slide-top-out .2s forwards}.slide-bottom-in{position:relative;-webkit-animation:slide-bottom-in .4s forwards;animation:slide-bottom-in .4s forwards}.slide-bottom-out{position:relative;-webkit-animation:slide-bottom-out .1s forwards;animation:slide-bottom-out .1s forwards}.spin{-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}@keyframes fade-in{0%{opacity:0}to{opacity:1}}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-out{0%{opacity:1}to{opacity:0}}@-webkit-keyframes fade-out{0%{opacity:1}to{opacity:0}}@keyframes slide-left-in{0%{left:-100%}to{left:0}}@-webkit-keyframes slide-left-in{0%{left:-100%}to{left:0}}@keyframes slide-left-out{0%{left:0}to{left:-100%}}@-webkit-keyframes slide-left-out{0%{left:0}to{left:-100%}}@keyframes slide-right-in{0%{left:100%}to{left:0}}@-webkit-keyframes slide-right-in{0%{left:100%}to{left:0}}@keyframes slide-right-out{0%{left:0}to{left:100%}}@-webkit-keyframes slide-right-out{0%{left:0}to{left:100%}}@keyframes slide-top-in{0%{transform:translateY(-100%)}to{transform:translateY(0)}}@-webkit-keyframes slide-top-in{0%{transform:translateY(-100%)}to{-webkit-transform:translateY(0)}}@keyframes slide-top-out{0%{transform:translateY(0)}to{transform:translateY(-100%)}}@-webkit-keyframes slide-top-out{0%{-webkit-transform:translateY(0)}to{-webkit-transform:translateY(-100%)}}@keyframes slide-bottom-in{0%{transform:translateY(100%)}to{transform:translateY(0)}}@-webkit-keyframes slide-bottom-in{0%{transform:translateY(100%)}to{-webkit-transform:translateY(0)}}@keyframes slide-bottom-out{0%{transform:translateY(0)}to{transform:translateY(100%)}}@-webkit-keyframes slide-bottom-out{0%{-webkit-transform:translateY(0)}to{-webkit-transform:translateY(100%)}}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(359deg)}}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}.jcalendar{position:absolute;z-index:9000;display:none;box-sizing:border-box;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;min-width:280px}.jcalendar.jcalendar-focus{display:block}.jcalendar .jcalendar-backdrop{position:fixed;top:0;left:0;z-index:9000;min-width:100%;min-height:100%;background-color:rgba(0,0,0,.5);border:0;padding:0;display:none}.jcalendar .jcalendar-container{position:relative;box-sizing:border-box}.jcalendar .jcalendar-content{position:absolute;z-index:9001;box-shadow:1px 1px 5px 0 rgba(0,0,0,.39);background-color:#fff}.jcalendar-header{text-align:center}.jcalendar-header span{margin-right:4px;font-size:1.1em;font-weight:700}.jcalendar-prev{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath d='M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z'/%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3C/svg%3E\\\")}.jcalendar-next,.jcalendar-prev{cursor:pointer;background-position:50%;background-repeat:no-repeat}.jcalendar-next{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath d='M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z'/%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3C/svg%3E\\\")}.jcalendar-weekday{font-weight:600;background-color:#fcfcfc;padding:14px}.jcalendar-table>table{width:100%;background-color:#fff}.jcalendar-table>table>thead{cursor:pointer}.jcalendar-table thead td{padding:10px;height:40px}.jcalendar-table>table>tbody td{box-sizing:border-box;cursor:pointer;padding:9px;font-size:.9em}.jcalendar-table tfoot td{padding:10px}.jcalendar-months td,.jcalendar-years td{height:24px}.jcalendar-input{padding-right:18px;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='gray'%3E%3Cpath d='M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z'/%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3C/svg%3E\\\");background-position:top 50% right 5px;background-repeat:no-repeat;box-sizing:border-box}.jcalendar-done{box-shadow:1px 1px 5px 0 rgba(0,0,0,.39);background-color:#fff}.jcalendar-update{border:1px solid #ccc;background-color:#fff;border-radius:4px;padding:5px;width:100%}.jcalendar-container select{width:55px;display:inline-block;border:0;padding:4px;text-align:center;font-size:1.1em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-right:10px}.jcalendar-container select:first-child{margin-right:2px}.jcalendar-selected{background-color:#eee}.jcalendar-confirm,.jcalendar-reset{text-transform:uppercase;cursor:pointer;color:#007aff;color:var(--active-color)}.jcalendar-controls{padding:15px;box-sizing:border-box;vertical-align:middle;display:flex;justify-content:space-between;align-items:center}.jcalendar-controls div{font-weight:700}.jcalendar-fullsize{position:fixed;width:100%;top:0;left:0}.jcalendar-fullsize .jcalendar-content{position:fixed;width:100%;left:0;bottom:0}.jcalendar-focus.jcalendar-fullsize .jcalendar-backdrop{display:block}.jcalendar-sunday{color:red}.jcalendar-disabled{color:#ccc}.jcalendar-time{display:flex}.jcolor{position:absolute;display:none;outline:none}.jcolor-input{padding-right:18px;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='18' height='18'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M12 3a9 9 0 000 18c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z'/%3E%3C/svg%3E\\\");background-position:top 50% right 5px;background-repeat:no-repeat;box-sizing:border-box}.jcolor-content{position:absolute;left:0;z-index:9000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-smoothing:antialiased;font-size:.875rem;letter-spacing:.2px;border-radius:4px;box-shadow:0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12),0 5px 5px -3px rgba(0,0,0,.2);background-color:#fff;box-sizing:border-box;min-width:260px}.jcolor-controls{display:flex;padding:10px;border-bottom:1px solid #eee;margin-bottom:5px}.jcolor-controls div{flex:1;font-size:1em;color:#007aff;color:var(--active-color);text-transform:uppercase;font-weight:700;box-sizing:border-box}.jcolor-content table{border-collapse:collapse;box-sizing:border-box}.jcolor-focus{display:block}.jcolor table{width:100%;height:100%;min-height:160px}.jcolor td{padding:7px}.jcolor-selected{background-repeat:no-repeat;background-size:16px;background-position:50%;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z' fill='%23fff'/%3E%3C/svg%3E\\\")}.jcolor-fullscreen{position:fixed;bottom:0;width:100%;max-height:290px;border-radius:0;box-sizing:border-box}.jcolor-fullscreen .jcolor-controls{padding:15px;box-shadow:1px 0 1px 0 rgba(0,0,0,.39)}.jcolor-reset{text-align:left}.jcolor-close{text-align:right}.jcolor-backdrop{position:fixed;top:0;left:0;min-width:100%;min-height:100%;background-color:rgba(0,0,0,.5);border:0;padding:0;z-index:8000;display:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jcolor-content .jtabs-content{padding:7px}.jcolor-grid tr:first-child>td:first-child{border-top-left-radius:3px}.jcolor-grid tr:first-child>td:last-child{border-top-right-radius:3px}.jcolor-grid tr:last-child>td:first-child{border-bottom-left-radius:3px}.jcolor-grid tr:last-child>td:last-child{border-bottom-right-radius:3px}.jcolor-hsl{box-sizing:border-box}.jcolor-hsl>div{height:100%;position:relative}.jcolor-hsl canvas{display:block;border-radius:4px;-webkit-user-drag:none}.jcolor-point{height:5px;width:5px;background-color:#000;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:50%}.jcolor-sliders{padding:10px 20px 10px 10px}.jcolor-sliders input{-webkit-appearance:none;height:12px;width:80%;background:#d3d3d3;opacity:1;border-radius:30px;outline:none}.jcolor-sliders-input-subcontainer{display:flex;justify-content:space-between;align-items:center}.jcolor-sliders-input-container{margin-top:4px;line-height:.8em;text-align:left}.jcolor-sliders-input-container>label{font-size:10px;text-transform:uppercase;color:#bbbbbd}.jcolor-sliders-input-subcontainer>input{border:0;padding:1px}.jcolor-sliders-input-container input::-webkit-slider-thumb{-webkit-appearance:none;height:12px;width:12px;border-radius:50%;background:#000;border:2px solid #fff;cursor:pointer}.jcolor-sliders-input-container input::-moz-range-thumb{-webkit-appearance:none;height:12px;width:12px;border-radius:50%;background:#000;border:2px solid #fff;cursor:pointer}.jcolor-sliders-final-color{padding:6px;-webkit-user-select:all;-moz-user-select:all;-ms-user-select:all;user-select:all;margin-top:10px;text-align:center}.jcolor-sliders-final-color>div:nth-child(2){width:71px;text-transform:uppercase}.jcolor .jtabs .jtabs-headers-container .jtabs-controls{display:none!important}.jcolor .jtabs .jtabs-headers-container{display:flex!important;justify-content:center;padding:4px}.jcolor .jtabs-headers>div:not(.jtabs-border){padding:2px 15px!important;font-size:.8em}.jcontextmenu{position:fixed;z-index:10000;background:#fff;color:#555;font-size:11px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:2px 2px 2px 0 #8f9091;border:1px solid #c6c6c6;padding:4px 0;margin:0;outline:none;display:none}.jcontextmenu.jcontextmenu-focus{display:inline-block}.jcontextmenu>div{box-sizing:border-box;display:flex;padding:8px 8px 8px 32px;width:250px;position:relative;cursor:default;font-size:11px;font-family:sans-serif}.jcontextmenu>div:before{content:attr(data-icon);font-family:\\\"Material Icons\\\"!important;font-weight:400;font-style:normal;font-size:16px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:\\\"liga\\\";-webkit-font-smoothing:antialiased;position:absolute;left:9px}.jcontextmenu>div.header{display:none}.jcontextmenu>div a{color:#555;text-decoration:none;flex:1}.jcontextmenu>div span{margin-right:10px}.jcontextmenu .jcontextmenu-disabled a{color:#ccc}.jcontextmenu>div:hover{background:#ebebeb}.jcontextmenu hr{border:1px solid #e9e9e9;border-bottom:0;margin-top:5px;margin-bottom:5px}.jcontextmenu>hr:hover{background:transparent}.jcontextmenu .jcontextmenu{top:4px;left:99%;opacity:0;position:absolute}.jcontextmenu>div:hover>.jcontextmenu{display:block;opacity:1;transform:translate(0) scale(1);pointer-events:auto}@media only screen and (max-width:420px){.jcontextmenu{top:auto!important;left:0!important;bottom:0!important;width:100vw;height:260px;overflow:scroll;-webkit-animation:slide-bottom-in .4s forwards;animation:slide-bottom-in .4s forwards;padding-top:0}.jcontextmenu div{width:100%;text-align:center;border-bottom:1px solid #ccc;padding:15px}.jcontextmenu>div.header{background-color:#d3d3d3;padding:5px;top:0;position:-webkit-sticky;position:sticky;z-index:2}.jcontextmenu>div.header>a.title{text-align:left}.jcontextmenu>div.header>a.close{text-align:right}.jcontextmenu>div:before{content:attr(data-icon);font-family:\\\"Material Icons\\\"!important;font-weight:400;font-style:normal;font-size:16px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:\\\"liga\\\";-webkit-font-smoothing:antialiased;position:absolute;left:9px}.jcontextmenu a{font-size:1.4em;text-transform:uppercase}.jcontextmenu hr,.jcontextmenu span{display:none}}.jdropdown{cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box;background:#fff;-webkit-tap-highlight-color:transparent;display:inline-block}.jdropdown-header::-moz-placeholder{color:#000}.jdropdown-header:-ms-input-placeholder{color:#000}.jdropdown-header::placeholder{color:#000}.jdropdown-backdrop{position:fixed;top:0;left:0;min-width:100%;min-height:100%;background-color:rgba(0,0,0,.5);border:0;padding:0;z-index:8000;display:none}.jdropdown[disabled]{opacity:.5;pointer-events:none}.jdropdown-focus{position:relative}.jdropdown-focus .jdropdown-container{transform:translateZ(0)}.jdropdown-default.jdropdown-focus .jdropdown-header{outline:5px auto -webkit-focus-ring-color}.jdropdown-default.jdropdown-focus .jdropdown-header.jdropdown-add{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='gray' width='24' height='24'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z'/%3E%3C/svg%3E\\\")}.jdropdown-container-header{padding:0;margin:0;position:relative}.jdropdown-header{width:100%;appearance:none;background-repeat:no-repeat;background-position:top 50% right 5px;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath d='M7 10l5 5 5-5H7z' fill='gray'/%3E%3C/svg%3E\\\");text-overflow:ellipsis;cursor:pointer;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;padding-right:30px!important}.jdropdown-insert-button{font-size:1.4em;text-transform:uppercase;position:absolute;right:30px;top:4px;display:none}.jdropdown-container{min-width:inherit;transform:translate3d(-10000px,0,0);position:absolute;z-index:9001}.jdropdown-close{display:none;font-size:1em;color:#007aff;color:var(--active-color);text-transform:uppercase;text-align:right;padding:15px;font-weight:700}.jdropdown-content{min-width:inherit;margin:0;box-sizing:border-box}.jdropdown-item{white-space:nowrap;text-align:left;text-overflow:ellipsis;overflow-x:hidden;color:#000;display:flex;align-items:center}.jdropdown-description{text-overflow:ellipsis;overflow:hidden;line-height:1.5em}.jdropdown-image{margin-right:10px;width:32px;height:32px;border-radius:20px}.jdropdown-image-small{width:24px;height:24px}.jdropdown-icon{margin-right:10px;font-size:30px;margin-left:-5px}.jdropdown-icon-small{font-size:24px;margin-left:0}.jdropdown-title{font-size:.7em;text-overflow:ellipsis;overflow-x:hidden;display:block}.jdropdown-default .jdropdown-header{border:1px solid #ccc;padding:5px 16px 5px 10px}.jdropdown-default .jdropdown-container{background-color:#fff}.jdropdown-default.jdropdown-focus.jdropdown-insert .jdropdown-header{padding-right:50px}.jdropdown-default.jdropdown-focus.jdropdown-insert .jdropdown-insert-button{display:block}.jdropdown-default .jdropdown-content{min-width:inherit;border:1px solid #8fb1e3;margin:0;background-color:#fff;box-sizing:border-box;min-height:10px;max-height:215px;overflow-y:auto}.jdropdown-default .jdropdown-item{padding:4px 40px 4px 8px}.jdropdown-default .jdropdown-item:hover{background-color:#1f93ff;color:#fff}.jdropdown-default .jdropdown-cursor{background-color:#eee}.jdropdown-default .jdropdown-selected{background-image:url(\\\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik05IDE2LjE3TDQuODMgMTJsLTEuNDIgMS40MUw5IDE5IDIxIDdsLTEuNDEtMS40MXoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=\\\");background-repeat:no-repeat;background-position:top 50% right 5px;background-color:#1f93ff;color:#fff}.jdropdown-default .jdropdown-group{margin-top:5px}.jdropdown-default .jdropdown-group .jdropdown-item{padding-left:16px}.jdropdown-default .jdropdown-group-name{padding-left:8px;font-weight:700;text-align:left}.jdropdown-default .jdropdown-reset_{content:\\\"x\\\";position:absolute;top:0;right:0;margin:5px 10px 5px 5px;font-size:12px;width:12px;cursor:pointer;text-shadow:0 0 5px #fff;display:none;line-height:1.8em}.jdropdown-default.jdropdown-focus .jdropdown-reset_,.jdropdown-picker.jdropdown-focus .jdropdown-backdrop{display:block}.jdropdown-picker .jdropdown-header{outline:none}.jdropdown-picker .jdropdown-container{position:fixed;bottom:0;left:0;border-bottom:1px solid #e6e6e8;width:100%;background-color:#fff;box-sizing:border-box}.jdropdown-picker .jdropdown-close{box-shadow:0 -1px 5px 0 rgba(0,0,0,.39);background-color:#fff;display:block}.jdropdown-picker .jdropdown-content{overflow-y:scroll;height:280px;background-color:#fafafa;border-top:1px solid #e6e6e8}.jdropdown-picker .jdropdown-group-name{display:block;text-align:center;font-weight:700}.jdropdown-picker .jdropdown-group-name,.jdropdown-picker .jdropdown-item{font-size:1em;text-transform:uppercase;border-bottom:1px solid #e6e6e8;padding:10px 20px}.jdropdown-picker .jdropdown-selected{background-image:url(\\\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik05IDE2LjE3TDQuODMgMTJsLTEuNDIgMS40MUw5IDE5IDIxIDdsLTEuNDEtMS40MXoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=\\\");background-repeat:no-repeat;background-position:top 50% right 15px;background-color:#1f93ff;color:#fff}.jdropdown-picker .jdropdown-cursor{background-color:#1f93ff;color:#fff}.jdropdown-searchbar.jdropdown-focus{position:fixed;top:0!important;left:0!important;width:100%!important;height:100%!important;background-color:#fafafa;padding:0;z-index:9001;overflow-y:scroll;will-change:scroll-position;-webkit-overflow-scrolling:touch}.jdropdown-searchbar.jdropdown-focus .jdropdown-container-header{position:fixed;top:0;left:0;z-index:9002;padding:10px;background-color:#fff;box-shadow:0 1px 2px rgba(0,0,0,.1);max-height:24px;width:100%}.jdropdown-searchbar.jdropdown-focus .jdropdown-header{border:0;background-repeat:no-repeat;background-position-x:0;background-position-y:40%;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZD0iTTE1LjUgMTRoLS43OWwtLjI4LS4yN0E2LjQ3MSA2LjQ3MSAwIDAwMTYgOS41IDYuNSA2LjUgMCAxMDkuNSAxNmMxLjYxIDAgMy4wOS0uNTkgNC4yMy0xLjU3bC4yNy4yOHYuNzlsNSA0Ljk5TDIwLjQ5IDE5bC00Ljk5LTV6bS02IDBDNy4wMSAxNCA1IDExLjk5IDUgOS41UzcuMDEgNSA5LjUgNSAxNCA3LjAxIDE0IDkuNSAxMS45OSAxNCA5LjUgMTR6IiBmaWxsPSIjZTZlNmU4Ii8+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==);padding-left:30px!important;padding-right:60px!important}.jdropdown-searchbar.jdropdown-focus .jdropdown-close{display:block}.jdropdown-searchbar .jdropdown-header{outline:none}.jdropdown-searchbar .jdropdown-container{margin-top:40px;width:100%}.jdropdown-searchbar .jdropdown-close{position:fixed;top:0;right:0}.jdropdown-searchbar .jdropdown-content{margin-top:10px}.jdropdown-searchbar .jdropdown-group{margin-top:10px;margin-bottom:15px;background-color:#fff}.jdropdown-searchbar .jdropdown-group-name{border-top:1px solid #e6e6e8;border-bottom:1px solid #e6e6e8;padding:10px 10px 10px 12px;font-weight:700}.jdropdown-searchbar .jdropdown-group-arrow{float:right;width:24px;height:24px;background-repeat:no-repeat}.jdropdown-searchbar .jdropdown-group-arrow-down{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZD0iTTcuNDEgOC41OUwxMiAxMy4xN2w0LjU5LTQuNThMMTggMTBsLTYgNi02LTYgMS40MS0xLjQxeiIvPjxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMjR2MjRIMFYweiIvPjwvc3ZnPg==)}.jdropdown-searchbar .jdropdown-group-arrow-up{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZD0iTTcuNDEgMTUuNDFMMTIgMTAuODNsNC41OSA0LjU4TDE4IDE0bC02LTYtNiA2eiIvPjxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz48L3N2Zz4=)}.jdropdown-searchbar .jdropdown-item{border-bottom:1px solid #e6e6e8;padding:10px 40px 10px 15px;background-color:#fff;font-size:.9em}.jdropdown-searchbar .jdropdown-description{text-overflow:ellipsis;overflow:hidden;max-width:calc(100% - 20px)}.jdropdown-searchbar .jdropdown-content>.jdropdown-item:first-child{border-top:1px solid #e6e6e8}.jdropdown-searchbar .jdropdown-selected{background-image:url(\\\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik05IDE2LjE3TDQuODMgMTJsLTEuNDIgMS40MUw5IDE5IDIxIDdsLTEuNDEtMS40MXoiIGZpbGw9IiMwMDdhZmYiLz48L3N2Zz4=\\\");background-repeat:no-repeat;background-position:top 50% right 15px}.jdropdown-list .jdropdown-container{display:block}.jdropdown-list .jdropdown-header{display:none}.jdropdown-list .jdropdown-group{background-color:#fff}.jdropdown-list .jdropdown-group-name{border-bottom:1px solid #e6e6e8;padding-top:10px;padding-bottom:10px;font-weight:700}.jdropdown-list .jdropdown-item{border-bottom:1px solid #e6e6e8;padding:10px 40px 10px 10px;background-color:#fff}.jdropdown-list .jdropdown-selected{background-image:url(\\\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik05IDE2LjE3TDQuODMgMTJsLTEuNDIgMS40MUw5IDE5IDIxIDdsLTEuNDEtMS40MXoiIGZpbGw9IiMwMDdhZmYiLz48L3N2Zz4=\\\");background-repeat:no-repeat;background-position:top 50% right 10px}@media only screen and (max-width:800px){.jdropdown-list{width:100%!important;border:0;padding:0}.jdropdown-list .jdropdown-container{min-width:100%}.jdropdown-searchbar.jdropdown-focus .jdropdown-description{text-transform:uppercase}}.app .jdropdown-item{text-transform:uppercase}.jdropdown-create-container{margin:10px;border:1px solid #ccc;border-radius:2px;padding:6px}.jdropdown-color{background-color:#fff;border:1px solid transparent;border-radius:12px;width:12px;height:12px;margin-right:6px}.jdropdown-item[data-disabled]{opacity:.5;pointer-events:none}.jeditor-container{border:1px solid #ccc;box-sizing:border-box}.jeditor-dragging{border:1px dashed #000}.jeditor-container.jeditor-padding{padding:10px}.jeditor{outline:none;word-break:break-word}.jeditor[data-placeholder]:empty:before{content:attr(data-placeholder);color:#d3d3d3}.jeditor-container.jeditor-padding .jeditor{min-height:100px;margin-bottom:10px;padding:10px}.jsnippet{margin-top:15px;cursor:pointer;border:1px solid #ccc;position:relative}.jsnippet:focus{outline:none}.jsnippet img{width:100%}.jsnippet .jsnippet-title{padding:15px;font-size:1.4em}.jsnippet .jsnippet-description{padding-left:15px;padding-right:15px;font-size:1em}.jsnippet .jsnippet-host{padding:15px;text-transform:uppercase;font-size:.8em;color:#777;text-align:right}.jsnippet .jsnippet-url{display:none}.jeditor .jsnippet:after{content:\\\"close\\\";font-family:\\\"Material icons\\\";font-size:24px;width:24px;height:24px;line-height:24px;cursor:pointer;text-shadow:0 0 2px #fff;position:absolute;top:12px;right:12px}.jsnippet *{-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none}.jeditor img{border:2px solid transparent;box-sizing:border-box}.jeditor img.resizing{-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none}.jeditor img:focus{border:2px solid #0096fd;outline:#0096fd}.jeditor .pdf{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath d='M511.344 274.266c.426-6.035.656-12.123.656-18.266C512 114.615 397.385 0 256 0S0 114.615 0 256c0 117.769 79.53 216.949 187.809 246.801l323.535-228.535z' fill='%23c30b15'/%3E%3Cpath d='M511.344 274.266L314.991 77.913 119.096 434.087l68.714 68.714C209.522 508.787 232.385 512 256 512c135.243 0 245.976-104.875 255.344-237.734z' fill='%2385080e'/%3E%3Cpath fill='%23fff' d='M278.328 333.913l-22.617-256H119.096v233.739z'/%3E%3Cpath fill='%23e8e6e6' d='M392.904 311.652V155.826l-55.652-22.261-22.261-55.652h-59.28l.356 256z'/%3E%3Cpath fill='%23fff' d='M314.991 155.826V77.913l77.913 77.913z'/%3E%3Cpath fill='%23fc0f1a' d='M119.096 311.652h273.809v122.435H119.096z'/%3E%3Cg fill='%23fff'%3E%3Cpath d='M204.871 346.387c13.547 0 21.341 6.659 21.341 18.465 0 12.412-7.795 19.601-21.341 19.601h-9.611v14.909h-13.471v-52.975h23.082zm-9.611 27.471h8.93c5.904 0 9.308-2.952 9.308-8.552 0-5.525-3.406-8.324-9.308-8.324h-8.93v16.876zM257.928 346.387c16.649 0 28.152 10.746 28.152 26.487 0 15.666-11.655 26.488-28.683 26.488h-22.25v-52.975h22.781zm-9.309 42.228h9.611c8.249 0 14.151-6.357 14.151-15.665 0-9.384-6.205-15.817-14.757-15.817h-9.006v31.482zM308.563 356.982v12.26h23.763v10.596h-23.763v19.525h-13.471v-52.975h39.277v10.595h-25.806v-.001z'/%3E%3C/g%3E%3C/svg%3E\\\");background-repeat:no-repeat;background-size:cover;width:60px;height:60px}.jeditor-toolbar{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:100%;box-sizing:border-box}.jloading{position:fixed;z-index:10001;width:100%;left:0;right:0;top:0;bottom:0;background-color:rgba(0,0,0,.7)}.jloading:after{content:\\\"\\\";display:block;margin:50vh auto 0;width:40px;height:40px;border:4px solid #fff;border-top-color:transparent;border-radius:50%;-webkit-animation:spin .8s linear infinite;animation:spin .8s linear infinite}.jloading.spin{background-color:transparent}.jloading.spin:after{margin:80px auto 0;border-color:transparent #aaa #aaa}.jmodal{position:fixed;top:50%;left:50%;width:60%;height:60%;-webkit-box-shadow:0 2px 10px rgba(0,0,0,.2);-moz-box-shadow:0 2px 10px rgba(0,0,0,.2);border:1px solid #ccc;transform:translate(-50%,-50%);padding-top:50px!important;z-index:9002;border-radius:8px}.jmodal,.jmodal:before{background-color:#fff;box-sizing:border-box}.jmodal:before{position:absolute;top:0;left:0;width:100%;content:attr(title);padding:15px;font-size:1.2em;box-shadow:1px 1px 3px rgba(0,0,0,.2);border-radius:8px 8px 0 0}.jmodal_content{padding:20px;overflow-y:auto;max-height:100%;box-sizing:border-box;height:-webkit-fill-available}.jmodal.no-title{padding-top:0!important}.jmodal.no-title:before{display:none}.jmodal:after{content:\\\"\\\";background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\");position:absolute;top:0;right:0;margin:14px;font-size:24px;width:24px;height:24px;cursor:pointer;text-shadow:0 0 5px #fff}.jmodal_fullscreen{width:100%!important;height:100%!important;top:0;left:0;transform:none;border:0;border-radius:0}.jmodal_backdrop{position:fixed;top:0;left:0;min-width:100%;min-height:100%;background-color:rgba(0,0,0,.5);border:0;padding:0;z-index:8000;display:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jnotification{position:fixed;z-index:10000;box-sizing:border-box;padding:10px;bottom:0}.jnotification-container{box-shadow:0 2px 15px -5px rgba(0,0,0,.7);border-radius:8px;background-color:#000;background:#5c5c5c;background:linear-gradient(0deg,#5c5c5c,#4d4d4d);color:#fff;width:320px;margin:30px;padding:20px}.jnotification-close{content:\\\"\\\";background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='%23fff'%3E%3Cpath d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\");font-size:20px;width:20px;height:20px;cursor:pointer}.jnotification-title{font-weight:700}.jnotification-header{padding-bottom:5px}.jnotification-header:empty{display:none}.jnotification-image{margin-right:5px}.jnotification-image:empty{display:none}.jnotification-image img{width:24px}.jnotification-name{text-transform:uppercase;font-size:.9em;flex:1;letter-spacing:.1em}.jnotification-error .jnotification-container{background:#b62606;background:linear-gradient(0deg,#aa290d,#950b0b)}@media (max-width:800px){.jnotification{top:0;width:100%}.jnotification-container{background:hsla(0,0%,100%,.95);border:1px solid #eee;color:#444;margin:0;width:auto}.jnotification-error .jnotification-container{background:hsla(0,0%,100%,.95);color:#790909}.jnotification-close{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24'%3E%3Cpath d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\")}}.jnotification-header{display:flex;justify-content:flex-start;align-items:center}.jpicker{white-space:nowrap;display:inline-flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative}.jpicker,.jpicker-header{cursor:pointer;outline:none}.jpicker-header{background-repeat:no-repeat;background-position:top 50% right 5px;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath d='M7 10l5 5 5-5H7z' fill='gray'/%3E%3C/svg%3E\\\");text-overflow:ellipsis;box-sizing:border-box;text-align:left;line-height:24px;padding:2px 35px 2px 12px;border-radius:4px}.jpicker-header:hover{background-color:#eee}.jpicker-content{position:absolute;top:0;display:none;box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.2);border-radius:4px;background-color:#fff;padding:4px;z-index:50;text-align:left;max-height:200px;scrollbar-width:thin;scrollbar-color:#333 transparent}.jpicker-content::-webkit-scrollbar{width:8px}.jpicker-content::-webkit-scrollbar-track{background:#eee}.jpicker-content::-webkit-scrollbar-thumb{background:#888}.jpicker-content>div{padding:6px 15px}.jpicker-focus>.jpicker-content{display:block}.jpicker-content>div:hover{background-color:#efefef}.jpicker-content>div:empty{opacity:0}.jpicker-header>div,.jpicker-header>i{display:block}.jpicker-focus>.jpicker-content.jpicker-columns{display:flex!important;justify-content:center;flex-wrap:wrap}.jprogressbar{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:#fff;-webkit-tap-highlight-color:transparent;display:inline-block;box-sizing:border-box;cursor:pointer;border:1px solid #ccc;position:relative}.jprogressbar:before{content:attr(data-value);position:absolute;margin:5px 5px 5px 10px}.jprogressbar-header::-moz-placeholder{color:#000}.jprogressbar-header:-ms-input-placeholder{color:#000}.jprogressbar-header::placeholder{color:#000}.jprogressbar::focus{outline:5px auto -webkit-focus-ring-color}.jprogressbar>div{background-color:#eee;background-color:red;box-sizing:border-box;height:31px}.jrating{display:flex}.jrating>div{width:24px;height:24px;line-height:24px;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath d='M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z' fill='gray'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\")}.jrating .jrating-over{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\");opacity:.7}.jrating .jrating-selected{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='red'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\")}.jsearch{position:relative;display:none}.jsearch,.jsearch_container{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jsearch_container{position:absolute;box-shadow:0 1px 2px 0 rgba(60,64,67,.302),0 2px 6px 2px rgba(60,64,67,.149);border:none;border-radius:4px;width:280px;padding:8px 0;box-shadow:0 2px 4px rgba(0,0,0,.2);transition:opacity .218s;background:#fff;border:1px solid rgba(0,0,0,.2);cursor:pointer;margin:0;min-width:300px;outline:none;width:auto}.jsearch_container:empty:after{content:attr(data-placeholder)}.jsearch_container>div{color:#333;cursor:pointer;display:flex;padding:5px 10px;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jsearch_container>div:hover{background-color:#e8eaed}.jsearch_container>div>img{width:32px;height:32px;border-radius:16px;margin-right:2px}.jsearch_container>div>div,.jsearch_container>div>img{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jsearch_container>div>div{overflow:hidden;text-overflow:ellipsis;margin-left:2px;max-width:300px;white-space:nowrap}.jsearch_container .selected{background-color:#e8eaed}.jslider{outline:none}.jslider-focus{width:100%!important;height:100%!important}.jslider img{width:100px}.jslider-left:before{left:15px;content:\\\"arrow_back_ios\\\"}.jslider-left:before,.jslider-right:after{position:fixed;top:50%;color:#fff;width:30px;height:30px;font-family:\\\"Material Icons\\\";font-size:30px;text-shadow:0 0 6px #383838;text-align:center;cursor:pointer}.jslider-right:after{right:15px;content:\\\"arrow_forward_ios\\\"}.jslider-close{width:24px;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff'%3E%3Cpath d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\");top:15px;right:15px;display:block!important}.jslider-close,.jslider-counter{height:24px;position:fixed;cursor:pointer;z-index:3000}.jslider-counter{background-color:transparent;left:50%;transform:translateX(-50%);bottom:15px;display:flex;display:-webkit-flex;-webkit-justify-content:center;-webkit-align-items:center;justify-content:center;align-items:center;flex-direction:row}.jslider-caption{position:fixed;max-width:90vw;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;top:15px;left:15px;z-index:3000;color:#fff;font-size:1rem;display:block!important}.jslider-counter div{width:10px;height:10px;background:#fff;border-radius:50%;margin:0 5px;display:block!important}.jslider-counter .jslider-counter-focus{background-color:#6495ed;pointer-events:none}.jslider-focus{position:fixed;left:0;top:0;width:100%;min-height:100%;max-height:100%;z-index:2000;margin:0;box-sizing:border-box;background-color:rgba(0,0,0,.8);transition-duration:.05s;display:flex;align-items:center}.jslider-focus img{width:50vw;height:auto;box-sizing:border-box;margin:0 auto;vertical-align:middle;display:none}.jslider-focus img.jslider-vertical{width:auto;height:80vh}@media only screen and (max-width:576px){.jslider-focus img.jslider-vertical{width:99vw!important;height:auto!important}.jslider-focus img{width:100vw!important;height:auto!important}}.jslider-grid{display:-ms-grid;display:grid;grid-gap:1px;position:relative}.jslider-grid[data-number=\\\"2\\\"]{-ms-grid-columns:1fr 50%;grid-template-columns:1fr 50%}.jslider-grid[data-number=\\\"3\\\"]{-ms-grid-columns:1fr 33%;grid-template-columns:1fr 33%}.jslider-grid[data-number=\\\"4\\\"]{-ms-grid-columns:1fr 25%;grid-template-columns:1fr 25%}.jslider-grid img{display:none;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.jslider-grid[data-total]:after{content:attr(data-total) \\\"+\\\";font-size:1.5em;position:absolute;color:#fff;right:15px;bottom:6px}.jslider-grid img:first-child{-ms-grid-column:1;-ms-grid-row:1;grid-column:1;grid-row:1;display:block}.jslider-grid[data-number=\\\"2\\\"] img:nth-child(2){-ms-grid-column:2;-ms-grid-row:1;grid-column:2;grid-row:1;display:block}.jslider-grid[data-number=\\\"3\\\"] img:first-child{-ms-grid-column:1/2;-ms-grid-row:1/4;grid-column:1/2;grid-row:1/4}.jslider-grid[data-number=\\\"3\\\"] img:nth-child(2){-ms-grid-column:2;-ms-grid-row:1;grid-column:2;grid-row:1;display:block}.jslider-grid[data-number=\\\"3\\\"] img:nth-child(3){-ms-grid-column:2;-ms-grid-row:2;grid-column:2;grid-row:2;display:block}.jslider-grid[data-number=\\\"4\\\"] img:first-child{-ms-grid-column:1/2;-ms-grid-row:1/4;grid-column:1/2;grid-row:1/4}.jslider-grid[data-number=\\\"4\\\"] img:nth-child(2){-ms-grid-column:2;-ms-grid-row:1;grid-column:2;grid-row:1;display:block}.jslider-grid[data-number=\\\"4\\\"] img:nth-child(3){-ms-grid-column:2;-ms-grid-row:2;grid-column:2;grid-row:2;display:block}.jslider-grid[data-number=\\\"4\\\"] img:nth-child(4){-ms-grid-column:2;-ms-grid-row:3;grid-column:2;grid-row:3;display:block}.jtabs{max-width:100vw;position:relative}.jtabs .jtabs-headers,.jtabs .jtabs-headers-container{display:flex;align-items:center}.jtabs .jtabs-headers{overflow:hidden;position:relative}.jtabs .jtabs-headers>div:not(.jtabs-border){padding:6px 20px;margin-left:1px;margin-right:1px;background-color:#f1f1f1;cursor:pointer;white-space:nowrap;text-align:center}.jtabs .jtabs-headers>div.jtabs-selected{background-color:#e8e8e8;color:#000}.jtabs .jtabs-headers>div>div{color:#555;width:100%;overflow:hidden}.jtabs .jtabs-headers i{display:block;margin:auto}.jtabs .jtabs-content{box-sizing:border-box}.jtabs .jtabs-content>div{display:none;box-sizing:border-box}.jtabs .jtabs-content>div.jtabs-selected{display:block}.jtabs .jtabs-border{position:absolute;height:2px;background-color:#888;transform-origin:left;transition:all .2s cubic-bezier(.4,0,.2,1);transition-property:color,left,transform;display:none}.jtabs-animation .jtabs-border{display:inline;display:initial}.jtabs .jtabs-controls{margin:3px 3px 3px 10px;display:flex;min-width:82px}.jtabs .jtabs-controls>div{cursor:pointer;background-position:50%;background-repeat:no-repeat;width:24px;height:24px;line-height:24px}.jtabs .jtabs-prev{margin-left:10px;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='gray' width='18' height='18'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z'/%3E%3C/svg%3E\\\")}.jtabs .jtabs-prev.disabled{margin-left:10px;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23d3d3d3' width='18' height='18'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z'/%3E%3C/svg%3E\\\")}.jtabs .jtabs-next{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='gray' width='18' height='18'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z'/%3E%3C/svg%3E\\\")}.jtabs .jtabs-next.disabled{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23d3d3d3' width='18' height='18'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z'/%3E%3C/svg%3E\\\")}.jtabs .jtabs-add{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z' fill='%23bbb'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\")}.jtabs.jtabs-modern .jtabs-headers>div:not(.jtabs-border){padding:4px 10px;background-color:#fff}.jtabs.jtabs-modern .jtabs-headers>.jtabs-selected,.jtabs.jtabs-modern .jtabs-headers>.jtabs-selected .material-icons{color:#000}.jtabs.jtabs-modern .jtabs-headers{background:#eeeeef!important;padding:2px;border-radius:4px}.jtabs.jtabs-modern .jtabs-headers .jtabs-border{border-color:#eeeeef!important}.jtabs.jtabs-modern .jtabs-border{background-color:rgba(194,197,188,.884)}.jtags{display:flex;flex-wrap:wrap;flex-direction:row;justify-content:flex-start;padding:2px;border:1px solid #ccc}.jtags.jtags-empty:not(.jtags-focus):before{position:absolute;margin:5px;color:#ccc;content:attr(data-placeholder)}.jtags>div{padding:3px 22px 3px 10px;position:relative;border-radius:1px;margin:2px;display:block;outline:none}.jtags>div:empty:before{content:\\\" \\\";white-space:pre}.jtags>div:after{content:\\\"x\\\";position:absolute;top:4px;right:4px;width:12px;height:12px;cursor:pointer;font-size:11px;display:none}.jtags_label{background-color:#eee!important}.jtags_label:after{display:inline-block!important}.jtags_error:after{color:#fff!important}.jtags_error{background-color:#d93025!important;color:#fff}.jtoolbar-container{border-radius:2px;margin-bottom:5px;box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.2);display:inline-flex!important}.jtoolbar{cursor:pointer;white-space:nowrap;display:flex;padding:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:13px}.jtoolbar-mobile{display:flex;position:fixed;bottom:0;margin:0;left:0;width:100%;background:#f7f7f8;z-index:1;box-sizing:border-box;box-shadow:0 -1px 2px rgba(0,0,0,.1);border-radius:0}.jtoolbar>div{display:inline-flex;align-items:center;box-sizing:border-box;vertical-align:middle;justify-content:space-evenly}.jtoolbar-mobile>div{display:flex;width:100%}.jtoolbar .jtoolbar-item{position:relative;text-align:center;margin:auto;padding:2px 4px}.jtoolbar-mobile .jtoolbar-item{flex:1}.jtoolbar .jtoolbar-divisor{width:2px;height:18px;padding:0;margin-left:4px;margin-right:4px;background-color:#ddd}.jtoolbar .jtoolbar-label{padding-left:8px;padding-right:8px}.jtoolbar-mobile a{text-decoration:none;display:inline-block}.jtoolbar-mobile i{display:inline-flex!important;color:#929292}.jtoolbar-mobile span{font-size:.7em;display:block;color:#929292}.jtoolbar-mobile .jtoolbar-selected a,.jtoolbar-mobile .jtoolbar-selected i,.jtoolbar-mobile .jtoolbar-selected span{color:#007aff!important;color:var(--active-color)!important;background-color:transparent}.jtoolbar-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jtoolbar-item i{display:block;color:#333}.jtoolbar-item:hover{background-color:#f2f2f2}.jtoolbar .jpicker{padding-left:0;padding-right:0}.jtoolbar .jpicker-header{height:24px;line-height:24px;padding:0 20px 0 8px;background-position:top 50% right 0;display:flex;align-items:center}.jtoolbar .jpicker-content>div{padding:6px}.jtoolbar-active{background-color:#eee}.jtoolbar .fa{width:18px;height:18px;display:block;line-height:18px;font-size:14px}.jtoolbar .material-icons{font-size:18px;width:24px;height:24px;display:block;line-height:24px;transform:rotate(.03deg);text-align:center}.jtoolbar .jtoolbar-arrow{background-repeat:no-repeat;background-position:50%;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='18' height='18'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z'/%3E%3C/svg%3E\\\");width:24px;height:16px;margin-left:4px;border-left:1px solid #f2f2f2}.jtoolbar-floating{position:absolute;display:none;box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.2);border-radius:4px;background-color:#fff;padding:4px;z-index:50;text-align:left}.jtoolbar-floating .jtoolbar-divisor{display:none}.jtoolbar-floating>div{display:block}.jtoolbar-arrow-selected .jtoolbar-floating{display:flex;flex-wrap:wrap}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvanN1aXRlcy9kaXN0L2pzdWl0ZXMuY3NzP2ZiZjgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxrQ0FBa0MsbUJBQU8sQ0FBQyxFQUFzQztBQUNoRjtBQUNBO0FBQ0EsOEJBQThCLFFBQVMsU0FBUyx1QkFBdUIsdUJBQXVCLHdCQUF3QiwwQkFBMEIsY0FBYywyQkFBMkIseUJBQXlCLHNCQUFzQixxQkFBcUIsaUJBQWlCLFdBQVcsb0JBQW9CLFdBQVcsV0FBVyx5QkFBeUIsZUFBZSxrQkFBa0Isc0JBQXNCLDBCQUEwQix3QkFBd0IsWUFBWSxhQUFhLHlCQUF5QixzQkFBc0IsaUJBQWlCLGVBQWUsK0JBQStCLFdBQVcsa0JBQWtCLFVBQVUsYUFBYSxXQUFXLG1CQUFtQixXQUFXLGVBQWUsWUFBWSx3QkFBd0IsYUFBYSw0QkFBNEIsWUFBWSxZQUFZLG9CQUFvQixpQkFBaUIsaUJBQWlCLGtCQUFrQixTQUFTLGtCQUFrQix1QkFBdUIsZUFBZSxzQkFBc0IsV0FBVyxnQkFBZ0IsaUJBQWlCLDRCQUE0QixtQkFBbUIsK0JBQStCLGVBQWUsV0FBVyxXQUFXLFlBQVksYUFBYSxtQkFBbUIsdUJBQXVCLGtCQUFrQixXQUFXLGNBQWMsbUJBQW1CLGtCQUFrQixxQkFBcUIsa0JBQWtCLFNBQVMsV0FBVyx5QkFBeUIsV0FBVyxxQkFBcUIsU0FBUyxzQ0FBc0MsOEJBQThCLFVBQVUsdUNBQXVDLCtCQUErQixlQUFlLGtCQUFrQiw2Q0FBNkMscUNBQXFDLGdCQUFnQixrQkFBa0IsOENBQThDLHNDQUFzQyxnQkFBZ0Isa0JBQWtCLDhDQUE4QyxzQ0FBc0MsaUJBQWlCLGtCQUFrQiwrQ0FBK0MsdUNBQXVDLGNBQWMsa0JBQWtCLDRDQUE0QyxvQ0FBb0MsZUFBZSxrQkFBa0IsNkNBQTZDLHFDQUFxQyxpQkFBaUIsa0JBQWtCLCtDQUErQyx1Q0FBdUMsa0JBQWtCLGtCQUFrQixnREFBZ0Qsd0NBQXdDLE1BQU0sMENB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dUJBQXVCLGNBQWMsNENBQTRDLGFBQWEsZUFBZTtBQUNuazdDO0FBQ0EiLCJmaWxlIjoiODU4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xudmFyIF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCIuLi8uLi9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIik7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiOnJvb3R7LS1idXR0b24tY29sb3I6IzI5OGJhODstLWFjdGl2ZS1jb2xvcjojMDA3YWZmfWRpdltkYXRhLWJlZm9yZV06YmVmb3Jle2NvbnRlbnQ6YXR0cihkYXRhLWJlZm9yZSl9LnVuc2VsZWN0YWJsZXstd2Via2l0LXRvdWNoLWNhbGxvdXQ6bm9uZTstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmV9LmpyZWFkb25seXtwb2ludGVyLWV2ZW50czpub25lfS5qZHJhZ2dpbmd7b3BhY2l0eTouMjtmaWx0ZXI6YWxwaGEob3BhY2l0eT0yMCl9Lmp1cGxvYWQuaW5wdXR7cG9zaXRpb246cmVsYXRpdmU7Ym94LXNpemluZzpib3JkZXItYm94O2JhY2tncm91bmQtc2l6ZTphdXRvIGF1dG87YmFja2dyb3VuZC1zaXplOmluaXRpYWw7aGVpZ2h0OjMzcHg7bWluLWhlaWdodDowO3BhZGRpbmc6NnB4IDMwcHggNnB4IDZweH0uanVwbG9hZC5pbnB1dDpiZWZvcmV7Y29udGVudDpcXFwic2F2ZVxcXCI7Zm9udC1zaXplOjE4cHg7Zm9udC1mYW1pbHk6XFxcIk1hdGVyaWFsIEljb25zXFxcIjtjb2xvcjojMDAwO3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjVweH0uanVwbG9hZCBpbWd7d2lkdGg6MTAwJX0uanVwbG9hZC5pbnB1dCBpbWd7d2lkdGg6YXV0bzttYXgtd2lkdGg6MTAwJTtoZWlnaHQ6MTAwJX0uanVwbG9hZFtkYXRhLW11bHRpcGxlXXtwYWRkaW5nOjEwcHh9Lmp1cGxvYWRbZGF0YS1tdWx0aXBsZV0gaW1ne2hlaWdodDo3MHB4O3dpZHRoOjEwMHB4Oy1vLW9iamVjdC1maXQ6Y292ZXI7b2JqZWN0LWZpdDpjb3ZlcjttYXJnaW4tcmlnaHQ6NXB4O21hcmdpbi1ib3R0b206NXB4fS5qdXBsb2Fke3Bvc2l0aW9uOnJlbGF0aXZlO2JvcmRlcjoxcHggZG90dGVkICNlZWU7Y3Vyc29yOnBvaW50ZXI7Ym94LXNpemluZzpib3JkZXItYm94O3dpZHRoOjEwMCU7bWF4LWhlaWdodDoxMDAlO21pbi1oZWlnaHQ6MTgwcHh9Lmp1cGxvYWQ6bm90KC5pbnB1dCk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxlMmMzXFxcIjtmb250LWZhbWlseTpcXFwiTWF0ZXJpYWwgSWNvbnNcXFwiO2ZvbnQtc2l6ZTo5MHB4O2NvbG9yOiNlZWU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDotMX0uanVwbG9hZC1pdGVte3BhZGRpbmctcmlnaHQ6MjJweDtib3JkZXItcmFkaXVzOjFweDtkaXNwbGF5OmlubGluZS1ibG9jaztwb3NpdGlvbjpyZWxhdGl2ZX0uanJlbW92ZXtvcGFjaXR5Oi4yO2ZpbHRlcjphbHBoYShvcGFjaXR5PTIwKX0ucm91bmQgaW1ne2JvcmRlci1yYWRpdXM6MTAwMHB4fS5mYWRlLWluey13ZWJraXQtYW5pbWF0aW9uOmZhZGUtaW4gMnMgZm9yd2FyZHM7YW5pbWF0aW9uOmZhZGUtaW4gMnMgZm9yd2FyZHN9LmZhZGUtb3V0ey13ZWJraXQtYW5pbWF0aW9uOmZhZGUtb3V0IDFzIGZvcndhcmRzO2FuaW1hdGlvbjpmYWRlLW91dCAxcyBmb3J3YXJkc30uc2xpZGUtbGVmdC1pbntwb3NpdGlvbjpyZWxhdGl2ZTstd2Via2l0LWFuaW1hdGlvbjpzbGlkZS1sZWZ0LWluIC40cyBmb3J3YXJkczthbmltYXRpb246c2xpZGUtbGVmdC1pbiAuNHMgZm9yd2FyZHN9LnNsaWRlLWxlZnQtb3V0e3Bvc2l0aW9uOnJlbGF0aXZlOy13ZWJraXQtYW5pbWF0aW9uOnNsaWRlLWxlZnQtb3V0IC40cyBmb3J3YXJkczthbmltYXRpb246c2xpZGUtbGVmdC1vdXQgLjRzIGZvcndhcmRzfS5zbGlkZS1yaWdodC1pbntwb3NpdGlvbjpyZWxhdGl2ZTstd2Via2l0LWFuaW1hdGlvbjpzbGlkZS1yaWdodC1pbiAuNHMgZm9yd2FyZHM7YW5pbWF0aW9uOnNsaWRlLXJpZ2h0LWluIC40cyBmb3J3YXJkc30uc2xpZGUtcmlnaHQtb3V0e3Bvc2l0aW9uOnJlbGF0aXZlOy13ZWJraXQtYW5pbWF0aW9uOnNsaWRlLXJpZ2h0LW91dCAuNHMgZm9yd2FyZHM7YW5pbWF0aW9uOnNsaWRlLXJpZ2h0LW91dCAuNHMgZm9yd2FyZHN9LnNsaWRlLXRvcC1pbntwb3NpdGlvbjpyZWxhdGl2ZTstd2Via2l0LWFuaW1hdGlvbjpzbGlkZS10b3AtaW4gLjRzIGZvcndhcmRzO2FuaW1hdGlvbjpzbGlkZS10b3AtaW4gLjRzIGZvcndhcmRzfS5zbGlkZS10b3Atb3V0e3Bvc2l0aW9uOnJlbGF0aXZlOy13ZWJraXQtYW5pbWF0aW9uOnNsaWRlLXRvcC1vdXQgLjJzIGZvcndhcmRzO2FuaW1hdGlvbjpzbGlkZS10b3Atb3V0IC4ycyBmb3J3YXJkc30uc2xpZGUtYm90dG9tLWlue3Bvc2l0aW9uOnJlbGF0aXZlOy13ZWJraXQtYW5pbWF0aW9uOnNsaWRlLWJvdHRvbS1pbiAuNHMgZm9yd2FyZHM7YW5pbWF0aW9uOnNsaWRlLWJvdHRvbS1pbiAuNHMgZm9yd2FyZHN9LnNsaWRlLWJvdHRvbS1vdXR7cG9zaXRpb246cmVsYXRpdmU7LXdlYmtpdC1hbmltYXRpb246c2xpZGUtYm90dG9tLW91dCAuMXMgZm9yd2FyZHM7YW5pbWF0aW9uOnNsaWRlLWJvdHRvbS1vdXQgLjFzIGZvcndhcmRzfS5zcGluey13ZWJraXQtYW5pbWF0aW9uOnNwaW4gMnMgbGluZWFyIGluZmluaXRlO2FuaW1hdGlvbjpzcGluIDJzIGxpbmVhciBpbmZpbml0ZX1Aa2V5ZnJhbWVzIGZhZGUtaW57MCV7b3BhY2l0eTowfXRve29wYWNpdHk6MX19QC13ZWJraXQta2V5ZnJhbWVzIGZhZGUtaW57MCV7b3BhY2l0eTowfXRve29wYWNpdHk6MX19QGtleWZyYW1lcyBmYWRlLW91dHswJXtvcGFjaXR5OjF9dG97b3BhY2l0eTowfX1ALXdlYmtpdC1rZXlmcmFtZXMgZmFkZS1vdXR7MCV7b3BhY2l0eToxfXRve29wYWNpdHk6MH19QGtleWZyYW1lcyBzbGlkZS1sZWZ0LWluezAle2xlZnQ6LTEwMCV9dG97bGVmdDowfX1ALXdlYmtpdC1rZXlmcmFtZXMgc2xpZGUtbGVmdC1pbnswJXtsZWZ0Oi0xMDAlfXRve2xlZnQ6MH19QGtleWZyYW1lcyBzbGlkZS1sZWZ0LW91dHswJXtsZWZ0OjB9dG97bGVmdDotMTAwJX19QC13ZWJraXQta2V5ZnJhbWVzIHNsaWRlLWxlZnQtb3V0ezAle2xlZnQ6MH10b3tsZWZ0Oi0xMDAlfX1Aa2V5ZnJhbWVzIHNsaWRlLXJpZ2h0LWluezAle2xlZnQ6MTAwJX10b3tsZWZ0OjB9fUAtd2Via2l0LWtleWZyYW1lcyBzbGlkZS1yaWdodC1pbnswJXtsZWZ0OjEwMCV9dG97bGVmdDowfX1Aa2V5ZnJhbWVzIHNsaWRlLXJpZ2h0LW91dHswJXtsZWZ0OjB9dG97bGVmdDoxMDAlfX1ALXdlYmtpdC1rZXlmcmFtZXMgc2xpZGUtcmlnaHQtb3V0ezAle2xlZnQ6MH10b3tsZWZ0OjEwMCV9fUBrZXlmcmFtZXMgc2xpZGUtdG9wLWluezAle3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0xMDAlKX10b3t0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX19QC13ZWJraXQta2V5ZnJhbWVzIHNsaWRlLXRvcC1pbnswJXt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMTAwJSl9dG97LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX19QGtleWZyYW1lcyBzbGlkZS10b3Atb3V0ezAle3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApfXRve3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0xMDAlKX19QC13ZWJraXQta2V5ZnJhbWVzIHNsaWRlLXRvcC1vdXR7MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX10b3std2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKC0xMDAlKX19QGtleWZyYW1lcyBzbGlkZS1ib3R0b20taW57MCV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTAwJSl9dG97dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCl9fUAtd2Via2l0LWtleWZyYW1lcyBzbGlkZS1ib3R0b20taW57MCV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTAwJSl9dG97LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX19QGtleWZyYW1lcyBzbGlkZS1ib3R0b20tb3V0ezAle3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApfXRve3RyYW5zZm9ybTp0cmFuc2xhdGVZKDEwMCUpfX1ALXdlYmtpdC1rZXlmcmFtZXMgc2xpZGUtYm90dG9tLW91dHswJXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDApfXRvey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTAwJSl9fUAtd2Via2l0LWtleWZyYW1lcyBzcGluezAley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgwZGVnKX10b3std2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMzU5ZGVnKX19QGtleWZyYW1lcyBzcGluezAle3RyYW5zZm9ybTpyb3RhdGUoMGRlZyl9dG97dHJhbnNmb3JtOnJvdGF0ZSgzNTlkZWcpfX0uamNhbGVuZGFye3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6OTAwMDtkaXNwbGF5Om5vbmU7Ym94LXNpemluZzpib3JkZXItYm94Oy13ZWJraXQtdG91Y2gtY2FsbG91dDpub25lOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTstd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6cmdiYSgwLDAsMCwwKTstd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6dHJhbnNwYXJlbnQ7bWluLXdpZHRoOjI4MHB4fS5qY2FsZW5kYXIuamNhbGVuZGFyLWZvY3Vze2Rpc3BsYXk6YmxvY2t9LmpjYWxlbmRhciAuamNhbGVuZGFyLWJhY2tkcm9we3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDt6LWluZGV4OjkwMDA7bWluLXdpZHRoOjEwMCU7bWluLWhlaWdodDoxMDAlO2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuNSk7Ym9yZGVyOjA7cGFkZGluZzowO2Rpc3BsYXk6bm9uZX0uamNhbGVuZGFyIC5qY2FsZW5kYXItY29udGFpbmVye3Bvc2l0aW9uOnJlbGF0aXZlO2JveC1zaXppbmc6Ym9yZGVyLWJveH0uamNhbGVuZGFyIC5qY2FsZW5kYXItY29udGVudHtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjkwMDE7Ym94LXNoYWRvdzoxcHggMXB4IDVweCAwIHJnYmEoMCwwLDAsLjM5KTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9LmpjYWxlbmRhci1oZWFkZXJ7dGV4dC1hbGlnbjpjZW50ZXJ9LmpjYWxlbmRhci1oZWFkZXIgc3BhbnttYXJnaW4tcmlnaHQ6NHB4O2ZvbnQtc2l6ZToxLjFlbTtmb250LXdlaWdodDo3MDB9LmpjYWxlbmRhci1wcmV2e2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nMjQnIGhlaWdodD0nMjQnJTNFJTNDcGF0aCBkPSdNMTUuNDEgMTYuNTlMMTAuODMgMTJsNC41OC00LjU5TDE0IDZsLTYgNiA2IDYgMS40MS0xLjQxeicvJTNFJTNDcGF0aCBmaWxsPSdub25lJyBkPSdNMCAwaDI0djI0SDBWMHonLyUzRSUzQy9zdmclM0VcXFwiKX0uamNhbGVuZGFyLW5leHQsLmpjYWxlbmRhci1wcmV2e2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQtcG9zaXRpb246NTAlO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdH0uamNhbGVuZGFyLW5leHR7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScyNCcgaGVpZ2h0PScyNCclM0UlM0NwYXRoIGQ9J004LjU5IDE2LjU5TDEzLjE3IDEyIDguNTkgNy40MSAxMCA2bDYgNi02IDYtMS40MS0xLjQxeicvJTNFJTNDcGF0aCBmaWxsPSdub25lJyBkPSdNMCAwaDI0djI0SDBWMHonLyUzRSUzQy9zdmclM0VcXFwiKX0uamNhbGVuZGFyLXdlZWtkYXl7Zm9udC13ZWlnaHQ6NjAwO2JhY2tncm91bmQtY29sb3I6I2ZjZmNmYztwYWRkaW5nOjE0cHh9LmpjYWxlbmRhci10YWJsZT50YWJsZXt3aWR0aDoxMDAlO2JhY2tncm91bmQtY29sb3I6I2ZmZn0uamNhbGVuZGFyLXRhYmxlPnRhYmxlPnRoZWFke2N1cnNvcjpwb2ludGVyfS5qY2FsZW5kYXItdGFibGUgdGhlYWQgdGR7cGFkZGluZzoxMHB4O2hlaWdodDo0MHB4fS5qY2FsZW5kYXItdGFibGU+dGFibGU+dGJvZHkgdGR7Ym94LXNpemluZzpib3JkZXItYm94O2N1cnNvcjpwb2ludGVyO3BhZGRpbmc6OXB4O2ZvbnQtc2l6ZTouOWVtfS5qY2FsZW5kYXItdGFibGUgdGZvb3QgdGR7cGFkZGluZzoxMHB4fS5qY2FsZW5kYXItbW9udGhzIHRkLC5qY2FsZW5kYXIteWVhcnMgdGR7aGVpZ2h0OjI0cHh9LmpjYWxlbmRhci1pbnB1dHtwYWRkaW5nLXJpZ2h0OjE4cHg7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxNicgaGVpZ2h0PScxNicgdmlld0JveD0nMCAwIDI0IDI0JyBmaWxsPSdncmF5JyUzRSUzQ3BhdGggZD0nTTIwIDNoLTFWMWgtMnYySDdWMUg1djJINGMtMS4xIDAtMiAuOS0yIDJ2MTZjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY1YzAtMS4xLS45LTItMi0yem0wIDE4SDRWOGgxNnYxM3onLyUzRSUzQ3BhdGggZmlsbD0nbm9uZScgZD0nTTAgMGgyNHYyNEgweicvJTNFJTNDL3N2ZyUzRVxcXCIpO2JhY2tncm91bmQtcG9zaXRpb246dG9wIDUwJSByaWdodCA1cHg7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JveC1zaXppbmc6Ym9yZGVyLWJveH0uamNhbGVuZGFyLWRvbmV7Ym94LXNoYWRvdzoxcHggMXB4IDVweCAwIHJnYmEoMCwwLDAsLjM5KTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9LmpjYWxlbmRhci11cGRhdGV7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjVweDt3aWR0aDoxMDAlfS5qY2FsZW5kYXItY29udGFpbmVyIHNlbGVjdHt3aWR0aDo1NXB4O2Rpc3BsYXk6aW5saW5lLWJsb2NrO2JvcmRlcjowO3BhZGRpbmc6NHB4O3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtc2l6ZToxLjFlbTstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7bWFyZ2luLXJpZ2h0OjEwcHh9LmpjYWxlbmRhci1jb250YWluZXIgc2VsZWN0OmZpcnN0LWNoaWxke21hcmdpbi1yaWdodDoycHh9LmpjYWxlbmRhci1zZWxlY3RlZHtiYWNrZ3JvdW5kLWNvbG9yOiNlZWV9LmpjYWxlbmRhci1jb25maXJtLC5qY2FsZW5kYXItcmVzZXR7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2N1cnNvcjpwb2ludGVyO2NvbG9yOiMwMDdhZmY7Y29sb3I6dmFyKC0tYWN0aXZlLWNvbG9yKX0uamNhbGVuZGFyLWNvbnRyb2xze3BhZGRpbmc6MTVweDtib3gtc2l6aW5nOmJvcmRlci1ib3g7dmVydGljYWwtYWxpZ246bWlkZGxlO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXJ9LmpjYWxlbmRhci1jb250cm9scyBkaXZ7Zm9udC13ZWlnaHQ6NzAwfS5qY2FsZW5kYXItZnVsbHNpemV7cG9zaXRpb246Zml4ZWQ7d2lkdGg6MTAwJTt0b3A6MDtsZWZ0OjB9LmpjYWxlbmRhci1mdWxsc2l6ZSAuamNhbGVuZGFyLWNvbnRlbnR7cG9zaXRpb246Zml4ZWQ7d2lkdGg6MTAwJTtsZWZ0OjA7Ym90dG9tOjB9LmpjYWxlbmRhci1mb2N1cy5qY2FsZW5kYXItZnVsbHNpemUgLmpjYWxlbmRhci1iYWNrZHJvcHtkaXNwbGF5OmJsb2NrfS5qY2FsZW5kYXItc3VuZGF5e2NvbG9yOnJlZH0uamNhbGVuZGFyLWRpc2FibGVke2NvbG9yOiNjY2N9LmpjYWxlbmRhci10aW1le2Rpc3BsYXk6ZmxleH0uamNvbG9ye3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6bm9uZTtvdXRsaW5lOm5vbmV9Lmpjb2xvci1pbnB1dHtwYWRkaW5nLXJpZ2h0OjE4cHg7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAyNCAyNCcgd2lkdGg9JzE4JyBoZWlnaHQ9JzE4JyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDcGF0aCBkPSdNMTIgM2E5IDkgMCAwMDAgMThjLjgzIDAgMS41LS42NyAxLjUtMS41IDAtLjM5LS4xNS0uNzQtLjM5LTEuMDEtLjIzLS4yNi0uMzgtLjYxLS4zOC0uOTkgMC0uODMuNjctMS41IDEuNS0xLjVIMTZjMi43NiAwIDUtMi4yNCA1LTUgMC00LjQyLTQuMDMtOC05LTh6bS01LjUgOWMtLjgzIDAtMS41LS42Ny0xLjUtMS41UzUuNjcgOSA2LjUgOSA4IDkuNjcgOCAxMC41IDcuMzMgMTIgNi41IDEyem0zLTRDOC42NyA4IDggNy4zMyA4IDYuNVM4LjY3IDUgOS41IDVzMS41LjY3IDEuNSAxLjVTMTAuMzMgOCA5LjUgOHptNSAwYy0uODMgMC0xLjUtLjY3LTEuNS0xLjVTMTMuNjcgNSAxNC41IDVzMS41LjY3IDEuNSAxLjVTMTUuMzMgOCAxNC41IDh6bTMgNGMtLjgzIDAtMS41LS42Ny0xLjUtMS41UzE2LjY3IDkgMTcuNSA5czEuNS42NyAxLjUgMS41LS42NyAxLjUtMS41IDEuNXonLyUzRSUzQy9zdmclM0VcXFwiKTtiYWNrZ3JvdW5kLXBvc2l0aW9uOnRvcCA1MCUgcmlnaHQgNXB4O2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtib3gtc2l6aW5nOmJvcmRlci1ib3h9Lmpjb2xvci1jb250ZW50e3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt6LWluZGV4OjkwMDA7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lOy13ZWJraXQtZm9udC1zbW9vdGhpbmc6YW50aWFsaWFzZWQ7Zm9udC1zaXplOi44NzVyZW07bGV0dGVyLXNwYWNpbmc6LjJweDtib3JkZXItcmFkaXVzOjRweDtib3gtc2hhZG93OjAgOHB4IDEwcHggMXB4IHJnYmEoMCwwLDAsLjE0KSwwIDNweCAxNHB4IDJweCByZ2JhKDAsMCwwLC4xMiksMCA1cHggNXB4IC0zcHggcmdiYSgwLDAsMCwuMik7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaXppbmc6Ym9yZGVyLWJveDttaW4td2lkdGg6MjYwcHh9Lmpjb2xvci1jb250cm9sc3tkaXNwbGF5OmZsZXg7cGFkZGluZzoxMHB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7bWFyZ2luLWJvdHRvbTo1cHh9Lmpjb2xvci1jb250cm9scyBkaXZ7ZmxleDoxO2ZvbnQtc2l6ZToxZW07Y29sb3I6IzAwN2FmZjtjb2xvcjp2YXIoLS1hY3RpdmUtY29sb3IpO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtmb250LXdlaWdodDo3MDA7Ym94LXNpemluZzpib3JkZXItYm94fS5qY29sb3ItY29udGVudCB0YWJsZXtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7Ym94LXNpemluZzpib3JkZXItYm94fS5qY29sb3ItZm9jdXN7ZGlzcGxheTpibG9ja30uamNvbG9yIHRhYmxle3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7bWluLWhlaWdodDoxNjBweH0uamNvbG9yIHRke3BhZGRpbmc6N3B4fS5qY29sb3Itc2VsZWN0ZWR7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtc2l6ZToxNnB4O2JhY2tncm91bmQtcG9zaXRpb246NTAlO2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nMjQnIGhlaWdodD0nMjQnJTNFJTNDcGF0aCBkPSdNMCAwaDI0djI0SDB6JyBmaWxsPSdub25lJy8lM0UlM0NwYXRoIGQ9J005IDE2LjE3TDQuODMgMTJsLTEuNDIgMS40MUw5IDE5IDIxIDdsLTEuNDEtMS40MXonIGZpbGw9JyUyM2ZmZicvJTNFJTNDL3N2ZyUzRVxcXCIpfS5qY29sb3ItZnVsbHNjcmVlbntwb3NpdGlvbjpmaXhlZDtib3R0b206MDt3aWR0aDoxMDAlO21heC1oZWlnaHQ6MjkwcHg7Ym9yZGVyLXJhZGl1czowO2JveC1zaXppbmc6Ym9yZGVyLWJveH0uamNvbG9yLWZ1bGxzY3JlZW4gLmpjb2xvci1jb250cm9sc3twYWRkaW5nOjE1cHg7Ym94LXNoYWRvdzoxcHggMCAxcHggMCByZ2JhKDAsMCwwLC4zOSl9Lmpjb2xvci1yZXNldHt0ZXh0LWFsaWduOmxlZnR9Lmpjb2xvci1jbG9zZXt0ZXh0LWFsaWduOnJpZ2h0fS5qY29sb3ItYmFja2Ryb3B7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO21pbi13aWR0aDoxMDAlO21pbi1oZWlnaHQ6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjUpO2JvcmRlcjowO3BhZGRpbmc6MDt6LWluZGV4OjgwMDA7ZGlzcGxheTpub25lOy13ZWJraXQtdG91Y2gtY2FsbG91dDpub25lOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZX0uamNvbG9yLWNvbnRlbnQgLmp0YWJzLWNvbnRlbnR7cGFkZGluZzo3cHh9Lmpjb2xvci1ncmlkIHRyOmZpcnN0LWNoaWxkPnRkOmZpcnN0LWNoaWxke2JvcmRlci10b3AtbGVmdC1yYWRpdXM6M3B4fS5qY29sb3ItZ3JpZCB0cjpmaXJzdC1jaGlsZD50ZDpsYXN0LWNoaWxke2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOjNweH0uamNvbG9yLWdyaWQgdHI6bGFzdC1jaGlsZD50ZDpmaXJzdC1jaGlsZHtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOjNweH0uamNvbG9yLWdyaWQgdHI6bGFzdC1jaGlsZD50ZDpsYXN0LWNoaWxke2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjNweH0uamNvbG9yLWhzbHtib3gtc2l6aW5nOmJvcmRlci1ib3h9Lmpjb2xvci1oc2w+ZGl2e2hlaWdodDoxMDAlO3Bvc2l0aW9uOnJlbGF0aXZlfS5qY29sb3ItaHNsIGNhbnZhc3tkaXNwbGF5OmJsb2NrO2JvcmRlci1yYWRpdXM6NHB4Oy13ZWJraXQtdXNlci1kcmFnOm5vbmV9Lmpjb2xvci1wb2ludHtoZWlnaHQ6NXB4O3dpZHRoOjVweDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDA7cG9zaXRpb246YWJzb2x1dGU7dG9wOjUwJTtsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsLTUwJSk7Ym9yZGVyLXJhZGl1czo1MCV9Lmpjb2xvci1zbGlkZXJze3BhZGRpbmc6MTBweCAyMHB4IDEwcHggMTBweH0uamNvbG9yLXNsaWRlcnMgaW5wdXR7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmU7aGVpZ2h0OjEycHg7d2lkdGg6ODAlO2JhY2tncm91bmQ6I2QzZDNkMztvcGFjaXR5OjE7Ym9yZGVyLXJhZGl1czozMHB4O291dGxpbmU6bm9uZX0uamNvbG9yLXNsaWRlcnMtaW5wdXQtc3ViY29udGFpbmVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXJ9Lmpjb2xvci1zbGlkZXJzLWlucHV0LWNvbnRhaW5lcnttYXJnaW4tdG9wOjRweDtsaW5lLWhlaWdodDouOGVtO3RleHQtYWxpZ246bGVmdH0uamNvbG9yLXNsaWRlcnMtaW5wdXQtY29udGFpbmVyPmxhYmVse2ZvbnQtc2l6ZToxMHB4O3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtjb2xvcjojYmJiYmJkfS5qY29sb3Itc2xpZGVycy1pbnB1dC1zdWJjb250YWluZXI+aW5wdXR7Ym9yZGVyOjA7cGFkZGluZzoxcHh9Lmpjb2xvci1zbGlkZXJzLWlucHV0LWNvbnRhaW5lciBpbnB1dDo6LXdlYmtpdC1zbGlkZXItdGh1bWJ7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmU7aGVpZ2h0OjEycHg7d2lkdGg6MTJweDtib3JkZXItcmFkaXVzOjUwJTtiYWNrZ3JvdW5kOiMwMDA7Ym9yZGVyOjJweCBzb2xpZCAjZmZmO2N1cnNvcjpwb2ludGVyfS5qY29sb3Itc2xpZGVycy1pbnB1dC1jb250YWluZXIgaW5wdXQ6Oi1tb3otcmFuZ2UtdGh1bWJ7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmU7aGVpZ2h0OjEycHg7d2lkdGg6MTJweDtib3JkZXItcmFkaXVzOjUwJTtiYWNrZ3JvdW5kOiMwMDA7Ym9yZGVyOjJweCBzb2xpZCAjZmZmO2N1cnNvcjpwb2ludGVyfS5qY29sb3Itc2xpZGVycy1maW5hbC1jb2xvcntwYWRkaW5nOjZweDstd2Via2l0LXVzZXItc2VsZWN0OmFsbDstbW96LXVzZXItc2VsZWN0OmFsbDstbXMtdXNlci1zZWxlY3Q6YWxsO3VzZXItc2VsZWN0OmFsbDttYXJnaW4tdG9wOjEwcHg7dGV4dC1hbGlnbjpjZW50ZXJ9Lmpjb2xvci1zbGlkZXJzLWZpbmFsLWNvbG9yPmRpdjpudGgtY2hpbGQoMil7d2lkdGg6NzFweDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2V9Lmpjb2xvciAuanRhYnMgLmp0YWJzLWhlYWRlcnMtY29udGFpbmVyIC5qdGFicy1jb250cm9sc3tkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS5qY29sb3IgLmp0YWJzIC5qdGFicy1oZWFkZXJzLWNvbnRhaW5lcntkaXNwbGF5OmZsZXghaW1wb3J0YW50O2p1c3RpZnktY29udGVudDpjZW50ZXI7cGFkZGluZzo0cHh9Lmpjb2xvciAuanRhYnMtaGVhZGVycz5kaXY6bm90KC5qdGFicy1ib3JkZXIpe3BhZGRpbmc6MnB4IDE1cHghaW1wb3J0YW50O2ZvbnQtc2l6ZTouOGVtfS5qY29udGV4dG1lbnV7cG9zaXRpb246Zml4ZWQ7ei1pbmRleDoxMDAwMDtiYWNrZ3JvdW5kOiNmZmY7Y29sb3I6IzU1NTtmb250LXNpemU6MTFweDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7Ym94LXNoYWRvdzoycHggMnB4IDJweCAwICM4ZjkwOTE7Ym9yZGVyOjFweCBzb2xpZCAjYzZjNmM2O3BhZGRpbmc6NHB4IDA7bWFyZ2luOjA7b3V0bGluZTpub25lO2Rpc3BsYXk6bm9uZX0uamNvbnRleHRtZW51Lmpjb250ZXh0bWVudS1mb2N1c3tkaXNwbGF5OmlubGluZS1ibG9ja30uamNvbnRleHRtZW51PmRpdntib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTpmbGV4O3BhZGRpbmc6OHB4IDhweCA4cHggMzJweDt3aWR0aDoyNTBweDtwb3NpdGlvbjpyZWxhdGl2ZTtjdXJzb3I6ZGVmYXVsdDtmb250LXNpemU6MTFweDtmb250LWZhbWlseTpzYW5zLXNlcmlmfS5qY29udGV4dG1lbnU+ZGl2OmJlZm9yZXtjb250ZW50OmF0dHIoZGF0YS1pY29uKTtmb250LWZhbWlseTpcXFwiTWF0ZXJpYWwgSWNvbnNcXFwiIWltcG9ydGFudDtmb250LXdlaWdodDo0MDA7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC1zaXplOjE2cHg7bGluZS1oZWlnaHQ6MTtsZXR0ZXItc3BhY2luZzpub3JtYWw7dGV4dC10cmFuc2Zvcm06bm9uZTtkaXNwbGF5OmlubGluZS1ibG9jazt3aGl0ZS1zcGFjZTpub3dyYXA7d29yZC13cmFwOm5vcm1hbDtkaXJlY3Rpb246bHRyOy13ZWJraXQtZm9udC1mZWF0dXJlLXNldHRpbmdzOlxcXCJsaWdhXFxcIjstd2Via2l0LWZvbnQtc21vb3RoaW5nOmFudGlhbGlhc2VkO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6OXB4fS5qY29udGV4dG1lbnU+ZGl2LmhlYWRlcntkaXNwbGF5Om5vbmV9Lmpjb250ZXh0bWVudT5kaXYgYXtjb2xvcjojNTU1O3RleHQtZGVjb3JhdGlvbjpub25lO2ZsZXg6MX0uamNvbnRleHRtZW51PmRpdiBzcGFue21hcmdpbi1yaWdodDoxMHB4fS5qY29udGV4dG1lbnUgLmpjb250ZXh0bWVudS1kaXNhYmxlZCBhe2NvbG9yOiNjY2N9Lmpjb250ZXh0bWVudT5kaXY6aG92ZXJ7YmFja2dyb3VuZDojZWJlYmVifS5qY29udGV4dG1lbnUgaHJ7Ym9yZGVyOjFweCBzb2xpZCAjZTllOWU5O2JvcmRlci1ib3R0b206MDttYXJnaW4tdG9wOjVweDttYXJnaW4tYm90dG9tOjVweH0uamNvbnRleHRtZW51PmhyOmhvdmVye2JhY2tncm91bmQ6dHJhbnNwYXJlbnR9Lmpjb250ZXh0bWVudSAuamNvbnRleHRtZW51e3RvcDo0cHg7bGVmdDo5OSU7b3BhY2l0eTowO3Bvc2l0aW9uOmFic29sdXRlfS5qY29udGV4dG1lbnU+ZGl2OmhvdmVyPi5qY29udGV4dG1lbnV7ZGlzcGxheTpibG9jaztvcGFjaXR5OjE7dHJhbnNmb3JtOnRyYW5zbGF0ZSgwKSBzY2FsZSgxKTtwb2ludGVyLWV2ZW50czphdXRvfUBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDo0MjBweCl7Lmpjb250ZXh0bWVudXt0b3A6YXV0byFpbXBvcnRhbnQ7bGVmdDowIWltcG9ydGFudDtib3R0b206MCFpbXBvcnRhbnQ7d2lkdGg6MTAwdnc7aGVpZ2h0OjI2MHB4O292ZXJmbG93OnNjcm9sbDstd2Via2l0LWFuaW1hdGlvbjpzbGlkZS1ib3R0b20taW4gLjRzIGZvcndhcmRzO2FuaW1hdGlvbjpzbGlkZS1ib3R0b20taW4gLjRzIGZvcndhcmRzO3BhZGRpbmctdG9wOjB9Lmpjb250ZXh0bWVudSBkaXZ7d2lkdGg6MTAwJTt0ZXh0LWFsaWduOmNlbnRlcjtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjY2NjO3BhZGRpbmc6MTVweH0uamNvbnRleHRtZW51PmRpdi5oZWFkZXJ7YmFja2dyb3VuZC1jb2xvcjojZDNkM2QzO3BhZGRpbmc6NXB4O3RvcDowO3Bvc2l0aW9uOi13ZWJraXQtc3RpY2t5O3Bvc2l0aW9uOnN0aWNreTt6LWluZGV4OjJ9Lmpjb250ZXh0bWVudT5kaXYuaGVhZGVyPmEudGl0bGV7dGV4dC1hbGlnbjpsZWZ0fS5qY29udGV4dG1lbnU+ZGl2LmhlYWRlcj5hLmNsb3Nle3RleHQtYWxpZ246cmlnaHR9Lmpjb250ZXh0bWVudT5kaXY6YmVmb3Jle2NvbnRlbnQ6YXR0cihkYXRhLWljb24pO2ZvbnQtZmFtaWx5OlxcXCJNYXRlcmlhbCBJY29uc1xcXCIhaW1wb3J0YW50O2ZvbnQtd2VpZ2h0OjQwMDtmb250LXN0eWxlOm5vcm1hbDtmb250LXNpemU6MTZweDtsaW5lLWhlaWdodDoxO2xldHRlci1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3doaXRlLXNwYWNlOm5vd3JhcDt3b3JkLXdyYXA6bm9ybWFsO2RpcmVjdGlvbjpsdHI7LXdlYmtpdC1mb250LWZlYXR1cmUtc2V0dGluZ3M6XFxcImxpZ2FcXFwiOy13ZWJraXQtZm9udC1zbW9vdGhpbmc6YW50aWFsaWFzZWQ7cG9zaXRpb246YWJzb2x1dGU7bGVmdDo5cHh9Lmpjb250ZXh0bWVudSBhe2ZvbnQtc2l6ZToxLjRlbTt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2V9Lmpjb250ZXh0bWVudSBociwuamNvbnRleHRtZW51IHNwYW57ZGlzcGxheTpub25lfX0uamRyb3Bkb3due2N1cnNvcjpwb2ludGVyOy13ZWJraXQtdG91Y2gtY2FsbG91dDpub25lOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTtib3gtc2l6aW5nOmJvcmRlci1ib3g7YmFja2dyb3VuZDojZmZmOy13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjp0cmFuc3BhcmVudDtkaXNwbGF5OmlubGluZS1ibG9ja30uamRyb3Bkb3duLWhlYWRlcjo6LW1vei1wbGFjZWhvbGRlcntjb2xvcjojMDAwfS5qZHJvcGRvd24taGVhZGVyOi1tcy1pbnB1dC1wbGFjZWhvbGRlcntjb2xvcjojMDAwfS5qZHJvcGRvd24taGVhZGVyOjpwbGFjZWhvbGRlcntjb2xvcjojMDAwfS5qZHJvcGRvd24tYmFja2Ryb3B7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO21pbi13aWR0aDoxMDAlO21pbi1oZWlnaHQ6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjUpO2JvcmRlcjowO3BhZGRpbmc6MDt6LWluZGV4OjgwMDA7ZGlzcGxheTpub25lfS5qZHJvcGRvd25bZGlzYWJsZWRde29wYWNpdHk6LjU7cG9pbnRlci1ldmVudHM6bm9uZX0uamRyb3Bkb3duLWZvY3Vze3Bvc2l0aW9uOnJlbGF0aXZlfS5qZHJvcGRvd24tZm9jdXMgLmpkcm9wZG93bi1jb250YWluZXJ7dHJhbnNmb3JtOnRyYW5zbGF0ZVooMCl9Lmpkcm9wZG93bi1kZWZhdWx0Lmpkcm9wZG93bi1mb2N1cyAuamRyb3Bkb3duLWhlYWRlcntvdXRsaW5lOjVweCBhdXRvIC13ZWJraXQtZm9jdXMtcmluZy1jb2xvcn0uamRyb3Bkb3duLWRlZmF1bHQuamRyb3Bkb3duLWZvY3VzIC5qZHJvcGRvd24taGVhZGVyLmpkcm9wZG93bi1hZGR7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIGZpbGw9J2dyYXknIHdpZHRoPScyNCcgaGVpZ2h0PScyNCclM0UlM0NwYXRoIGQ9J00wIDBoMjR2MjRIMHonIGZpbGw9J25vbmUnLyUzRSUzQ3BhdGggZD0nTTE5IDNINWEyIDIgMCAwMC0yIDJ2MTRhMiAyIDAgMDAyIDJoMTRjMS4xIDAgMi0uOSAyLTJWNWMwLTEuMS0uOS0yLTItMnptLTIgMTBoLTR2NGgtMnYtNEg3di0yaDRWN2gydjRoNHYyeicvJTNFJTNDL3N2ZyUzRVxcXCIpfS5qZHJvcGRvd24tY29udGFpbmVyLWhlYWRlcntwYWRkaW5nOjA7bWFyZ2luOjA7cG9zaXRpb246cmVsYXRpdmV9Lmpkcm9wZG93bi1oZWFkZXJ7d2lkdGg6MTAwJTthcHBlYXJhbmNlOm5vbmU7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246dG9wIDUwJSByaWdodCA1cHg7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScyNCcgaGVpZ2h0PScyNCclM0UlM0NwYXRoIGZpbGw9J25vbmUnIGQ9J00wIDBoMjR2MjRIMFYweicvJTNFJTNDcGF0aCBkPSdNNyAxMGw1IDUgNS01SDd6JyBmaWxsPSdncmF5Jy8lM0UlM0Mvc3ZnJTNFXFxcIik7dGV4dC1vdmVyZmxvdzplbGxpcHNpcztjdXJzb3I6cG9pbnRlcjtib3gtc2l6aW5nOmJvcmRlci1ib3g7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmU7LW1vei1hcHBlYXJhbmNlOm5vbmU7cGFkZGluZy1yaWdodDozMHB4IWltcG9ydGFudH0uamRyb3Bkb3duLWluc2VydC1idXR0b257Zm9udC1zaXplOjEuNGVtO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDozMHB4O3RvcDo0cHg7ZGlzcGxheTpub25lfS5qZHJvcGRvd24tY29udGFpbmVye21pbi13aWR0aDppbmhlcml0O3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMTAwMDBweCwwLDApO3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6OTAwMX0uamRyb3Bkb3duLWNsb3Nle2Rpc3BsYXk6bm9uZTtmb250LXNpemU6MWVtO2NvbG9yOiMwMDdhZmY7Y29sb3I6dmFyKC0tYWN0aXZlLWNvbG9yKTt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7dGV4dC1hbGlnbjpyaWdodDtwYWRkaW5nOjE1cHg7Zm9udC13ZWlnaHQ6NzAwfS5qZHJvcGRvd24tY29udGVudHttaW4td2lkdGg6aW5oZXJpdDttYXJnaW46MDtib3gtc2l6aW5nOmJvcmRlci1ib3h9Lmpkcm9wZG93bi1pdGVte3doaXRlLXNwYWNlOm5vd3JhcDt0ZXh0LWFsaWduOmxlZnQ7dGV4dC1vdmVyZmxvdzplbGxpcHNpcztvdmVyZmxvdy14OmhpZGRlbjtjb2xvcjojMDAwO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXJ9Lmpkcm9wZG93bi1kZXNjcmlwdGlvbnt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO292ZXJmbG93OmhpZGRlbjtsaW5lLWhlaWdodDoxLjVlbX0uamRyb3Bkb3duLWltYWdle21hcmdpbi1yaWdodDoxMHB4O3dpZHRoOjMycHg7aGVpZ2h0OjMycHg7Ym9yZGVyLXJhZGl1czoyMHB4fS5qZHJvcGRvd24taW1hZ2Utc21hbGx7d2lkdGg6MjRweDtoZWlnaHQ6MjRweH0uamRyb3Bkb3duLWljb257bWFyZ2luLXJpZ2h0OjEwcHg7Zm9udC1zaXplOjMwcHg7bWFyZ2luLWxlZnQ6LTVweH0uamRyb3Bkb3duLWljb24tc21hbGx7Zm9udC1zaXplOjI0cHg7bWFyZ2luLWxlZnQ6MH0uamRyb3Bkb3duLXRpdGxle2ZvbnQtc2l6ZTouN2VtO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7b3ZlcmZsb3cteDpoaWRkZW47ZGlzcGxheTpibG9ja30uamRyb3Bkb3duLWRlZmF1bHQgLmpkcm9wZG93bi1oZWFkZXJ7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO3BhZGRpbmc6NXB4IDE2cHggNXB4IDEwcHh9Lmpkcm9wZG93bi1kZWZhdWx0IC5qZHJvcGRvd24tY29udGFpbmVye2JhY2tncm91bmQtY29sb3I6I2ZmZn0uamRyb3Bkb3duLWRlZmF1bHQuamRyb3Bkb3duLWZvY3VzLmpkcm9wZG93bi1pbnNlcnQgLmpkcm9wZG93bi1oZWFkZXJ7cGFkZGluZy1yaWdodDo1MHB4fS5qZHJvcGRvd24tZGVmYXVsdC5qZHJvcGRvd24tZm9jdXMuamRyb3Bkb3duLWluc2VydCAuamRyb3Bkb3duLWluc2VydC1idXR0b257ZGlzcGxheTpibG9ja30uamRyb3Bkb3duLWRlZmF1bHQgLmpkcm9wZG93bi1jb250ZW50e21pbi13aWR0aDppbmhlcml0O2JvcmRlcjoxcHggc29saWQgIzhmYjFlMzttYXJnaW46MDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym94LXNpemluZzpib3JkZXItYm94O21pbi1oZWlnaHQ6MTBweDttYXgtaGVpZ2h0OjIxNXB4O292ZXJmbG93LXk6YXV0b30uamRyb3Bkb3duLWRlZmF1bHQgLmpkcm9wZG93bi1pdGVte3BhZGRpbmc6NHB4IDQwcHggNHB4IDhweH0uamRyb3Bkb3duLWRlZmF1bHQgLmpkcm9wZG93bi1pdGVtOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzFmOTNmZjtjb2xvcjojZmZmfS5qZHJvcGRvd24tZGVmYXVsdCAuamRyb3Bkb3duLWN1cnNvcntiYWNrZ3JvdW5kLWNvbG9yOiNlZWV9Lmpkcm9wZG93bi1kZWZhdWx0IC5qZHJvcGRvd24tc2VsZWN0ZWR7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJeU5DSWdhR1ZwWjJoMFBTSXlOQ0krUEhCaGRHZ2daRDBpVFRBZ01HZ3lOSFl5TkVnd2VpSWdabWxzYkQwaWJtOXVaU0l2UGp4d1lYUm9JR1E5SWswNUlERTJMakUzVERRdU9ETWdNVEpzTFRFdU5ESWdNUzQwTVV3NUlERTVJREl4SURkc0xURXVOREV0TVM0ME1Yb2lJR1pwYkd3OUlpTm1abVlpTHo0OEwzTjJaejQ9XFxcIik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246dG9wIDUwJSByaWdodCA1cHg7YmFja2dyb3VuZC1jb2xvcjojMWY5M2ZmO2NvbG9yOiNmZmZ9Lmpkcm9wZG93bi1kZWZhdWx0IC5qZHJvcGRvd24tZ3JvdXB7bWFyZ2luLXRvcDo1cHh9Lmpkcm9wZG93bi1kZWZhdWx0IC5qZHJvcGRvd24tZ3JvdXAgLmpkcm9wZG93bi1pdGVte3BhZGRpbmctbGVmdDoxNnB4fS5qZHJvcGRvd24tZGVmYXVsdCAuamRyb3Bkb3duLWdyb3VwLW5hbWV7cGFkZGluZy1sZWZ0OjhweDtmb250LXdlaWdodDo3MDA7dGV4dC1hbGlnbjpsZWZ0fS5qZHJvcGRvd24tZGVmYXVsdCAuamRyb3Bkb3duLXJlc2V0X3tjb250ZW50OlxcXCJ4XFxcIjtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDowO21hcmdpbjo1cHggMTBweCA1cHggNXB4O2ZvbnQtc2l6ZToxMnB4O3dpZHRoOjEycHg7Y3Vyc29yOnBvaW50ZXI7dGV4dC1zaGFkb3c6MCAwIDVweCAjZmZmO2Rpc3BsYXk6bm9uZTtsaW5lLWhlaWdodDoxLjhlbX0uamRyb3Bkb3duLWRlZmF1bHQuamRyb3Bkb3duLWZvY3VzIC5qZHJvcGRvd24tcmVzZXRfLC5qZHJvcGRvd24tcGlja2VyLmpkcm9wZG93bi1mb2N1cyAuamRyb3Bkb3duLWJhY2tkcm9we2Rpc3BsYXk6YmxvY2t9Lmpkcm9wZG93bi1waWNrZXIgLmpkcm9wZG93bi1oZWFkZXJ7b3V0bGluZTpub25lfS5qZHJvcGRvd24tcGlja2VyIC5qZHJvcGRvd24tY29udGFpbmVye3Bvc2l0aW9uOmZpeGVkO2JvdHRvbTowO2xlZnQ6MDtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZTZlNmU4O3dpZHRoOjEwMCU7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaXppbmc6Ym9yZGVyLWJveH0uamRyb3Bkb3duLXBpY2tlciAuamRyb3Bkb3duLWNsb3Nle2JveC1zaGFkb3c6MCAtMXB4IDVweCAwIHJnYmEoMCwwLDAsLjM5KTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7ZGlzcGxheTpibG9ja30uamRyb3Bkb3duLXBpY2tlciAuamRyb3Bkb3duLWNvbnRlbnR7b3ZlcmZsb3cteTpzY3JvbGw7aGVpZ2h0OjI4MHB4O2JhY2tncm91bmQtY29sb3I6I2ZhZmFmYTtib3JkZXItdG9wOjFweCBzb2xpZCAjZTZlNmU4fS5qZHJvcGRvd24tcGlja2VyIC5qZHJvcGRvd24tZ3JvdXAtbmFtZXtkaXNwbGF5OmJsb2NrO3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtd2VpZ2h0OjcwMH0uamRyb3Bkb3duLXBpY2tlciAuamRyb3Bkb3duLWdyb3VwLW5hbWUsLmpkcm9wZG93bi1waWNrZXIgLmpkcm9wZG93bi1pdGVte2ZvbnQtc2l6ZToxZW07dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNlNmU2ZTg7cGFkZGluZzoxMHB4IDIwcHh9Lmpkcm9wZG93bi1waWNrZXIgLmpkcm9wZG93bi1zZWxlY3RlZHtiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0l5TkNJZ2FHVnBaMmgwUFNJeU5DSStQSEJoZEdnZ1pEMGlUVEFnTUdneU5IWXlORWd3ZWlJZ1ptbHNiRDBpYm05dVpTSXZQanh3WVhSb0lHUTlJazA1SURFMkxqRTNURFF1T0RNZ01USnNMVEV1TkRJZ01TNDBNVXc1SURFNUlESXhJRGRzTFRFdU5ERXRNUzQwTVhvaUlHWnBiR3c5SWlObVptWWlMejQ4TDNOMlp6ND1cXFwiKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjp0b3AgNTAlIHJpZ2h0IDE1cHg7YmFja2dyb3VuZC1jb2xvcjojMWY5M2ZmO2NvbG9yOiNmZmZ9Lmpkcm9wZG93bi1waWNrZXIgLmpkcm9wZG93bi1jdXJzb3J7YmFja2dyb3VuZC1jb2xvcjojMWY5M2ZmO2NvbG9yOiNmZmZ9Lmpkcm9wZG93bi1zZWFyY2hiYXIuamRyb3Bkb3duLWZvY3Vze3Bvc2l0aW9uOmZpeGVkO3RvcDowIWltcG9ydGFudDtsZWZ0OjAhaW1wb3J0YW50O3dpZHRoOjEwMCUhaW1wb3J0YW50O2hlaWdodDoxMDAlIWltcG9ydGFudDtiYWNrZ3JvdW5kLWNvbG9yOiNmYWZhZmE7cGFkZGluZzowO3otaW5kZXg6OTAwMTtvdmVyZmxvdy15OnNjcm9sbDt3aWxsLWNoYW5nZTpzY3JvbGwtcG9zaXRpb247LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2h9Lmpkcm9wZG93bi1zZWFyY2hiYXIuamRyb3Bkb3duLWZvY3VzIC5qZHJvcGRvd24tY29udGFpbmVyLWhlYWRlcntwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7ei1pbmRleDo5MDAyO3BhZGRpbmc6MTBweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym94LXNoYWRvdzowIDFweCAycHggcmdiYSgwLDAsMCwuMSk7bWF4LWhlaWdodDoyNHB4O3dpZHRoOjEwMCV9Lmpkcm9wZG93bi1zZWFyY2hiYXIuamRyb3Bkb3duLWZvY3VzIC5qZHJvcGRvd24taGVhZGVye2JvcmRlcjowO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uLXg6MDtiYWNrZ3JvdW5kLXBvc2l0aW9uLXk6NDAlO2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJeU5DSWdhR1ZwWjJoMFBTSXlOQ0krUEhCaGRHZ2daRDBpVFRFMUxqVWdNVFJvTFM0M09Xd3RMakk0TFM0eU4wRTJMalEzTVNBMkxqUTNNU0F3SURBd01UWWdPUzQxSURZdU5TQTJMalVnTUNBeE1Ea3VOU0F4Tm1NeExqWXhJREFnTXk0d09TMHVOVGtnTkM0eU15MHhMalUzYkM0eU55NHlPSFl1Tnpsc05TQTBMams1VERJd0xqUTVJREU1YkMwMExqazVMVFY2YlMwMklEQkROeTR3TVNBeE5DQTFJREV4TGprNUlEVWdPUzQxVXpjdU1ERWdOU0E1TGpVZ05TQXhOQ0EzTGpBeElERTBJRGt1TlNBeE1TNDVPU0F4TkNBNUxqVWdNVFI2SWlCbWFXeHNQU0lqWlRabE5tVTRJaTgrUEhCaGRHZ2daRDBpVFRBZ01HZ3lOSFl5TkVnd2VpSWdabWxzYkQwaWJtOXVaU0l2UGp3dmMzWm5QZz09KTtwYWRkaW5nLWxlZnQ6MzBweCFpbXBvcnRhbnQ7cGFkZGluZy1yaWdodDo2MHB4IWltcG9ydGFudH0uamRyb3Bkb3duLXNlYXJjaGJhci5qZHJvcGRvd24tZm9jdXMgLmpkcm9wZG93bi1jbG9zZXtkaXNwbGF5OmJsb2NrfS5qZHJvcGRvd24tc2VhcmNoYmFyIC5qZHJvcGRvd24taGVhZGVye291dGxpbmU6bm9uZX0uamRyb3Bkb3duLXNlYXJjaGJhciAuamRyb3Bkb3duLWNvbnRhaW5lcnttYXJnaW4tdG9wOjQwcHg7d2lkdGg6MTAwJX0uamRyb3Bkb3duLXNlYXJjaGJhciAuamRyb3Bkb3duLWNsb3Nle3Bvc2l0aW9uOmZpeGVkO3RvcDowO3JpZ2h0OjB9Lmpkcm9wZG93bi1zZWFyY2hiYXIgLmpkcm9wZG93bi1jb250ZW50e21hcmdpbi10b3A6MTBweH0uamRyb3Bkb3duLXNlYXJjaGJhciAuamRyb3Bkb3duLWdyb3Vwe21hcmdpbi10b3A6MTBweDttYXJnaW4tYm90dG9tOjE1cHg7YmFja2dyb3VuZC1jb2xvcjojZmZmfS5qZHJvcGRvd24tc2VhcmNoYmFyIC5qZHJvcGRvd24tZ3JvdXAtbmFtZXtib3JkZXItdG9wOjFweCBzb2xpZCAjZTZlNmU4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNlNmU2ZTg7cGFkZGluZzoxMHB4IDEwcHggMTBweCAxMnB4O2ZvbnQtd2VpZ2h0OjcwMH0uamRyb3Bkb3duLXNlYXJjaGJhciAuamRyb3Bkb3duLWdyb3VwLWFycm93e2Zsb2F0OnJpZ2h0O3dpZHRoOjI0cHg7aGVpZ2h0OjI0cHg7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0fS5qZHJvcGRvd24tc2VhcmNoYmFyIC5qZHJvcGRvd24tZ3JvdXAtYXJyb3ctZG93bntiYWNrZ3JvdW5kLWltYWdlOnVybChkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXlOQ0lnYUdWcFoyaDBQU0l5TkNJK1BIQmhkR2dnWkQwaVRUY3VOREVnT0M0MU9Vd3hNaUF4TXk0eE4ydzBMalU1TFRRdU5UaE1NVGdnTVRCc0xUWWdOaTAyTFRZZ01TNDBNUzB4TGpReGVpSXZQanh3WVhSb0lHWnBiR3c5SW01dmJtVWlJR1E5SWswd0lEQm9NalIyTWpSSU1GWXdlaUl2UGp3dmMzWm5QZz09KX0uamRyb3Bkb3duLXNlYXJjaGJhciAuamRyb3Bkb3duLWdyb3VwLWFycm93LXVwe2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJeU5DSWdhR1ZwWjJoMFBTSXlOQ0krUEhCaGRHZ2daRDBpVFRjdU5ERWdNVFV1TkRGTU1USWdNVEF1T0ROc05DNDFPU0EwTGpVNFRERTRJREUwYkMwMkxUWXROaUEyZWlJdlBqeHdZWFJvSUdROUlrMHdJREJvTWpSMk1qUklNSG9pSUdacGJHdzlJbTV2Ym1VaUx6NDhMM04yWno0PSl9Lmpkcm9wZG93bi1zZWFyY2hiYXIgLmpkcm9wZG93bi1pdGVte2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNlNmU2ZTg7cGFkZGluZzoxMHB4IDQwcHggMTBweCAxNXB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtmb250LXNpemU6LjllbX0uamRyb3Bkb3duLXNlYXJjaGJhciAuamRyb3Bkb3duLWRlc2NyaXB0aW9ue3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7b3ZlcmZsb3c6aGlkZGVuO21heC13aWR0aDpjYWxjKDEwMCUgLSAyMHB4KX0uamRyb3Bkb3duLXNlYXJjaGJhciAuamRyb3Bkb3duLWNvbnRlbnQ+Lmpkcm9wZG93bi1pdGVtOmZpcnN0LWNoaWxke2JvcmRlci10b3A6MXB4IHNvbGlkICNlNmU2ZTh9Lmpkcm9wZG93bi1zZWFyY2hiYXIgLmpkcm9wZG93bi1zZWxlY3RlZHtiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0l5TkNJZ2FHVnBaMmgwUFNJeU5DSStQSEJoZEdnZ1pEMGlUVEFnTUdneU5IWXlORWd3ZWlJZ1ptbHNiRDBpYm05dVpTSXZQanh3WVhSb0lHUTlJazA1SURFMkxqRTNURFF1T0RNZ01USnNMVEV1TkRJZ01TNDBNVXc1SURFNUlESXhJRGRzTFRFdU5ERXRNUzQwTVhvaUlHWnBiR3c5SWlNd01EZGhabVlpTHo0OEwzTjJaejQ9XFxcIik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246dG9wIDUwJSByaWdodCAxNXB4fS5qZHJvcGRvd24tbGlzdCAuamRyb3Bkb3duLWNvbnRhaW5lcntkaXNwbGF5OmJsb2NrfS5qZHJvcGRvd24tbGlzdCAuamRyb3Bkb3duLWhlYWRlcntkaXNwbGF5Om5vbmV9Lmpkcm9wZG93bi1saXN0IC5qZHJvcGRvd24tZ3JvdXB7YmFja2dyb3VuZC1jb2xvcjojZmZmfS5qZHJvcGRvd24tbGlzdCAuamRyb3Bkb3duLWdyb3VwLW5hbWV7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2U2ZTZlODtwYWRkaW5nLXRvcDoxMHB4O3BhZGRpbmctYm90dG9tOjEwcHg7Zm9udC13ZWlnaHQ6NzAwfS5qZHJvcGRvd24tbGlzdCAuamRyb3Bkb3duLWl0ZW17Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2U2ZTZlODtwYWRkaW5nOjEwcHggNDBweCAxMHB4IDEwcHg7YmFja2dyb3VuZC1jb2xvcjojZmZmfS5qZHJvcGRvd24tbGlzdCAuamRyb3Bkb3duLXNlbGVjdGVke2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXlOQ0lnYUdWcFoyaDBQU0l5TkNJK1BIQmhkR2dnWkQwaVRUQWdNR2d5TkhZeU5FZ3dlaUlnWm1sc2JEMGlibTl1WlNJdlBqeHdZWFJvSUdROUlrMDVJREUyTGpFM1REUXVPRE1nTVRKc0xURXVORElnTVM0ME1VdzVJREU1SURJeElEZHNMVEV1TkRFdE1TNDBNWG9pSUdacGJHdzlJaU13TURkaFptWWlMejQ4TDNOMlp6ND1cXFwiKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjp0b3AgNTAlIHJpZ2h0IDEwcHh9QG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjgwMHB4KXsuamRyb3Bkb3duLWxpc3R7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7Ym9yZGVyOjA7cGFkZGluZzowfS5qZHJvcGRvd24tbGlzdCAuamRyb3Bkb3duLWNvbnRhaW5lcnttaW4td2lkdGg6MTAwJX0uamRyb3Bkb3duLXNlYXJjaGJhci5qZHJvcGRvd24tZm9jdXMgLmpkcm9wZG93bi1kZXNjcmlwdGlvbnt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2V9fS5hcHAgLmpkcm9wZG93bi1pdGVte3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZX0uamRyb3Bkb3duLWNyZWF0ZS1jb250YWluZXJ7bWFyZ2luOjEwcHg7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO2JvcmRlci1yYWRpdXM6MnB4O3BhZGRpbmc6NnB4fS5qZHJvcGRvd24tY29sb3J7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJhZGl1czoxMnB4O3dpZHRoOjEycHg7aGVpZ2h0OjEycHg7bWFyZ2luLXJpZ2h0OjZweH0uamRyb3Bkb3duLWl0ZW1bZGF0YS1kaXNhYmxlZF17b3BhY2l0eTouNTtwb2ludGVyLWV2ZW50czpub25lfS5qZWRpdG9yLWNvbnRhaW5lcntib3JkZXI6MXB4IHNvbGlkICNjY2M7Ym94LXNpemluZzpib3JkZXItYm94fS5qZWRpdG9yLWRyYWdnaW5ne2JvcmRlcjoxcHggZGFzaGVkICMwMDB9LmplZGl0b3ItY29udGFpbmVyLmplZGl0b3ItcGFkZGluZ3twYWRkaW5nOjEwcHh9LmplZGl0b3J7b3V0bGluZTpub25lO3dvcmQtYnJlYWs6YnJlYWstd29yZH0uamVkaXRvcltkYXRhLXBsYWNlaG9sZGVyXTplbXB0eTpiZWZvcmV7Y29udGVudDphdHRyKGRhdGEtcGxhY2Vob2xkZXIpO2NvbG9yOiNkM2QzZDN9LmplZGl0b3ItY29udGFpbmVyLmplZGl0b3ItcGFkZGluZyAuamVkaXRvcnttaW4taGVpZ2h0OjEwMHB4O21hcmdpbi1ib3R0b206MTBweDtwYWRkaW5nOjEwcHh9LmpzbmlwcGV0e21hcmdpbi10b3A6MTVweDtjdXJzb3I6cG9pbnRlcjtib3JkZXI6MXB4IHNvbGlkICNjY2M7cG9zaXRpb246cmVsYXRpdmV9LmpzbmlwcGV0OmZvY3Vze291dGxpbmU6bm9uZX0uanNuaXBwZXQgaW1ne3dpZHRoOjEwMCV9LmpzbmlwcGV0IC5qc25pcHBldC10aXRsZXtwYWRkaW5nOjE1cHg7Zm9udC1zaXplOjEuNGVtfS5qc25pcHBldCAuanNuaXBwZXQtZGVzY3JpcHRpb257cGFkZGluZy1sZWZ0OjE1cHg7cGFkZGluZy1yaWdodDoxNXB4O2ZvbnQtc2l6ZToxZW19LmpzbmlwcGV0IC5qc25pcHBldC1ob3N0e3BhZGRpbmc6MTVweDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7Zm9udC1zaXplOi44ZW07Y29sb3I6Izc3Nzt0ZXh0LWFsaWduOnJpZ2h0fS5qc25pcHBldCAuanNuaXBwZXQtdXJse2Rpc3BsYXk6bm9uZX0uamVkaXRvciAuanNuaXBwZXQ6YWZ0ZXJ7Y29udGVudDpcXFwiY2xvc2VcXFwiO2ZvbnQtZmFtaWx5OlxcXCJNYXRlcmlhbCBpY29uc1xcXCI7Zm9udC1zaXplOjI0cHg7d2lkdGg6MjRweDtoZWlnaHQ6MjRweDtsaW5lLWhlaWdodDoyNHB4O2N1cnNvcjpwb2ludGVyO3RleHQtc2hhZG93OjAgMCAycHggI2ZmZjtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MTJweDtyaWdodDoxMnB4fS5qc25pcHBldCAqey13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW8tdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lOy13ZWJraXQtdXNlci1kcmFnOm5vbmU7LWtodG1sLXVzZXItZHJhZzpub25lOy1tb3otdXNlci1kcmFnOm5vbmU7LW8tdXNlci1kcmFnOm5vbmV9LmplZGl0b3IgaW1ne2JvcmRlcjoycHggc29saWQgdHJhbnNwYXJlbnQ7Ym94LXNpemluZzpib3JkZXItYm94fS5qZWRpdG9yIGltZy5yZXNpemluZ3std2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1vLXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTstd2Via2l0LXVzZXItZHJhZzpub25lOy1raHRtbC11c2VyLWRyYWc6bm9uZTstbW96LXVzZXItZHJhZzpub25lOy1vLXVzZXItZHJhZzpub25lfS5qZWRpdG9yIGltZzpmb2N1c3tib3JkZXI6MnB4IHNvbGlkICMwMDk2ZmQ7b3V0bGluZTojMDA5NmZkfS5qZWRpdG9yIC5wZGZ7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1MTIgNTEyJyUzRSUzQ3BhdGggZD0nTTUxMS4zNDQgMjc0LjI2NmMuNDI2LTYuMDM1LjY1Ni0xMi4xMjMuNjU2LTE4LjI2NkM1MTIgMTE0LjYxNSAzOTcuMzg1IDAgMjU2IDBTMCAxMTQuNjE1IDAgMjU2YzAgMTE3Ljc2OSA3OS41MyAyMTYuOTQ5IDE4Ny44MDkgMjQ2LjgwMWwzMjMuNTM1LTIyOC41MzV6JyBmaWxsPSclMjNjMzBiMTUnLyUzRSUzQ3BhdGggZD0nTTUxMS4zNDQgMjc0LjI2NkwzMTQuOTkxIDc3LjkxMyAxMTkuMDk2IDQzNC4wODdsNjguNzE0IDY4LjcxNEMyMDkuNTIyIDUwOC43ODcgMjMyLjM4NSA1MTIgMjU2IDUxMmMxMzUuMjQzIDAgMjQ1Ljk3Ni0xMDQuODc1IDI1NS4zNDQtMjM3LjczNHonIGZpbGw9JyUyMzg1MDgwZScvJTNFJTNDcGF0aCBmaWxsPSclMjNmZmYnIGQ9J00yNzguMzI4IDMzMy45MTNsLTIyLjYxNy0yNTZIMTE5LjA5NnYyMzMuNzM5eicvJTNFJTNDcGF0aCBmaWxsPSclMjNlOGU2ZTYnIGQ9J00zOTIuOTA0IDMxMS42NTJWMTU1LjgyNmwtNTUuNjUyLTIyLjI2MS0yMi4yNjEtNTUuNjUyaC01OS4yOGwuMzU2IDI1NnonLyUzRSUzQ3BhdGggZmlsbD0nJTIzZmZmJyBkPSdNMzE0Ljk5MSAxNTUuODI2Vjc3LjkxM2w3Ny45MTMgNzcuOTEzeicvJTNFJTNDcGF0aCBmaWxsPSclMjNmYzBmMWEnIGQ9J00xMTkuMDk2IDMxMS42NTJoMjczLjgwOXYxMjIuNDM1SDExOS4wOTZ6Jy8lM0UlM0NnIGZpbGw9JyUyM2ZmZiclM0UlM0NwYXRoIGQ9J00yMDQuODcxIDM0Ni4zODdjMTMuNTQ3IDAgMjEuMzQxIDYuNjU5IDIxLjM0MSAxOC40NjUgMCAxMi40MTItNy43OTUgMTkuNjAxLTIxLjM0MSAxOS42MDFoLTkuNjExdjE0LjkwOWgtMTMuNDcxdi01Mi45NzVoMjMuMDgyem0tOS42MTEgMjcuNDcxaDguOTNjNS45MDQgMCA5LjMwOC0yLjk1MiA5LjMwOC04LjU1MiAwLTUuNTI1LTMuNDA2LTguMzI0LTkuMzA4LTguMzI0aC04LjkzdjE2Ljg3NnpNMjU3LjkyOCAzNDYuMzg3YzE2LjY0OSAwIDI4LjE1MiAxMC43NDYgMjguMTUyIDI2LjQ4NyAwIDE1LjY2Ni0xMS42NTUgMjYuNDg4LTI4LjY4MyAyNi40ODhoLTIyLjI1di01Mi45NzVoMjIuNzgxem0tOS4zMDkgNDIuMjI4aDkuNjExYzguMjQ5IDAgMTQuMTUxLTYuMzU3IDE0LjE1MS0xNS42NjUgMC05LjM4NC02LjIwNS0xNS44MTctMTQuNzU3LTE1LjgxN2gtOS4wMDZ2MzEuNDgyek0zMDguNTYzIDM1Ni45ODJ2MTIuMjZoMjMuNzYzdjEwLjU5NmgtMjMuNzYzdjE5LjUyNWgtMTMuNDcxdi01Mi45NzVoMzkuMjc3djEwLjU5NWgtMjUuODA2di0uMDAxeicvJTNFJTNDL2clM0UlM0Mvc3ZnJTNFXFxcIik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtc2l6ZTpjb3Zlcjt3aWR0aDo2MHB4O2hlaWdodDo2MHB4fS5qZWRpdG9yLXRvb2xiYXJ7d2lkdGg6LXdlYmtpdC1maXQtY29udGVudDt3aWR0aDotbW96LWZpdC1jb250ZW50O3dpZHRoOmZpdC1jb250ZW50O21heC13aWR0aDoxMDAlO2JveC1zaXppbmc6Ym9yZGVyLWJveH0uamxvYWRpbmd7cG9zaXRpb246Zml4ZWQ7ei1pbmRleDoxMDAwMTt3aWR0aDoxMDAlO2xlZnQ6MDtyaWdodDowO3RvcDowO2JvdHRvbTowO2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuNyl9Lmpsb2FkaW5nOmFmdGVye2NvbnRlbnQ6XFxcIlxcXCI7ZGlzcGxheTpibG9jazttYXJnaW46NTB2aCBhdXRvIDA7d2lkdGg6NDBweDtoZWlnaHQ6NDBweDtib3JkZXI6NHB4IHNvbGlkICNmZmY7Ym9yZGVyLXRvcC1jb2xvcjp0cmFuc3BhcmVudDtib3JkZXItcmFkaXVzOjUwJTstd2Via2l0LWFuaW1hdGlvbjpzcGluIC44cyBsaW5lYXIgaW5maW5pdGU7YW5pbWF0aW9uOnNwaW4gLjhzIGxpbmVhciBpbmZpbml0ZX0uamxvYWRpbmcuc3BpbntiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50fS5qbG9hZGluZy5zcGluOmFmdGVye21hcmdpbjo4MHB4IGF1dG8gMDtib3JkZXItY29sb3I6dHJhbnNwYXJlbnQgI2FhYSAjYWFhfS5qbW9kYWx7cG9zaXRpb246Zml4ZWQ7dG9wOjUwJTtsZWZ0OjUwJTt3aWR0aDo2MCU7aGVpZ2h0OjYwJTstd2Via2l0LWJveC1zaGFkb3c6MCAycHggMTBweCByZ2JhKDAsMCwwLC4yKTstbW96LWJveC1zaGFkb3c6MCAycHggMTBweCByZ2JhKDAsMCwwLC4yKTtib3JkZXI6MXB4IHNvbGlkICNjY2M7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLC01MCUpO3BhZGRpbmctdG9wOjUwcHghaW1wb3J0YW50O3otaW5kZXg6OTAwMjtib3JkZXItcmFkaXVzOjhweH0uam1vZGFsLC5qbW9kYWw6YmVmb3Jle2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3gtc2l6aW5nOmJvcmRlci1ib3h9Lmptb2RhbDpiZWZvcmV7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3dpZHRoOjEwMCU7Y29udGVudDphdHRyKHRpdGxlKTtwYWRkaW5nOjE1cHg7Zm9udC1zaXplOjEuMmVtO2JveC1zaGFkb3c6MXB4IDFweCAzcHggcmdiYSgwLDAsMCwuMik7Ym9yZGVyLXJhZGl1czo4cHggOHB4IDAgMH0uam1vZGFsX2NvbnRlbnR7cGFkZGluZzoyMHB4O292ZXJmbG93LXk6YXV0bzttYXgtaGVpZ2h0OjEwMCU7Ym94LXNpemluZzpib3JkZXItYm94O2hlaWdodDotd2Via2l0LWZpbGwtYXZhaWxhYmxlfS5qbW9kYWwubm8tdGl0bGV7cGFkZGluZy10b3A6MCFpbXBvcnRhbnR9Lmptb2RhbC5uby10aXRsZTpiZWZvcmV7ZGlzcGxheTpub25lfS5qbW9kYWw6YWZ0ZXJ7Y29udGVudDpcXFwiXFxcIjtiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzI0JyBoZWlnaHQ9JzI0JyUzRSUzQ3BhdGggZD0nTTE5IDYuNDFMMTcuNTkgNSAxMiAxMC41OSA2LjQxIDUgNSA2LjQxIDEwLjU5IDEyIDUgMTcuNTkgNi40MSAxOSAxMiAxMy40MSAxNy41OSAxOSAxOSAxNy41OSAxMy40MSAxMnonLyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDL3N2ZyUzRVxcXCIpO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7bWFyZ2luOjE0cHg7Zm9udC1zaXplOjI0cHg7d2lkdGg6MjRweDtoZWlnaHQ6MjRweDtjdXJzb3I6cG9pbnRlcjt0ZXh0LXNoYWRvdzowIDAgNXB4ICNmZmZ9Lmptb2RhbF9mdWxsc2NyZWVue3dpZHRoOjEwMCUhaW1wb3J0YW50O2hlaWdodDoxMDAlIWltcG9ydGFudDt0b3A6MDtsZWZ0OjA7dHJhbnNmb3JtOm5vbmU7Ym9yZGVyOjA7Ym9yZGVyLXJhZGl1czowfS5qbW9kYWxfYmFja2Ryb3B7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO21pbi13aWR0aDoxMDAlO21pbi1oZWlnaHQ6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjUpO2JvcmRlcjowO3BhZGRpbmc6MDt6LWluZGV4OjgwMDA7ZGlzcGxheTpub25lOy13ZWJraXQtdG91Y2gtY2FsbG91dDpub25lOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZX0uam5vdGlmaWNhdGlvbntwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjEwMDAwO2JveC1zaXppbmc6Ym9yZGVyLWJveDtwYWRkaW5nOjEwcHg7Ym90dG9tOjB9Lmpub3RpZmljYXRpb24tY29udGFpbmVye2JveC1zaGFkb3c6MCAycHggMTVweCAtNXB4IHJnYmEoMCwwLDAsLjcpO2JvcmRlci1yYWRpdXM6OHB4O2JhY2tncm91bmQtY29sb3I6IzAwMDtiYWNrZ3JvdW5kOiM1YzVjNWM7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMGRlZywjNWM1YzVjLCM0ZDRkNGQpO2NvbG9yOiNmZmY7d2lkdGg6MzIwcHg7bWFyZ2luOjMwcHg7cGFkZGluZzoyMHB4fS5qbm90aWZpY2F0aW9uLWNsb3Nle2NvbnRlbnQ6XFxcIlxcXCI7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScyMCcgaGVpZ2h0PScyMCcgdmlld0JveD0nMCAwIDI0IDI0JyBmaWxsPSclMjNmZmYnJTNFJTNDcGF0aCBkPSdNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeicvJTNFJTNDcGF0aCBkPSdNMCAwaDI0djI0SDB6JyBmaWxsPSdub25lJy8lM0UlM0Mvc3ZnJTNFXFxcIik7Zm9udC1zaXplOjIwcHg7d2lkdGg6MjBweDtoZWlnaHQ6MjBweDtjdXJzb3I6cG9pbnRlcn0uam5vdGlmaWNhdGlvbi10aXRsZXtmb250LXdlaWdodDo3MDB9Lmpub3RpZmljYXRpb24taGVhZGVye3BhZGRpbmctYm90dG9tOjVweH0uam5vdGlmaWNhdGlvbi1oZWFkZXI6ZW1wdHl7ZGlzcGxheTpub25lfS5qbm90aWZpY2F0aW9uLWltYWdle21hcmdpbi1yaWdodDo1cHh9Lmpub3RpZmljYXRpb24taW1hZ2U6ZW1wdHl7ZGlzcGxheTpub25lfS5qbm90aWZpY2F0aW9uLWltYWdlIGltZ3t3aWR0aDoyNHB4fS5qbm90aWZpY2F0aW9uLW5hbWV7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2ZvbnQtc2l6ZTouOWVtO2ZsZXg6MTtsZXR0ZXItc3BhY2luZzouMWVtfS5qbm90aWZpY2F0aW9uLWVycm9yIC5qbm90aWZpY2F0aW9uLWNvbnRhaW5lcntiYWNrZ3JvdW5kOiNiNjI2MDY7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMGRlZywjYWEyOTBkLCM5NTBiMGIpfUBtZWRpYSAobWF4LXdpZHRoOjgwMHB4KXsuam5vdGlmaWNhdGlvbnt0b3A6MDt3aWR0aDoxMDAlfS5qbm90aWZpY2F0aW9uLWNvbnRhaW5lcntiYWNrZ3JvdW5kOmhzbGEoMCwwJSwxMDAlLC45NSk7Ym9yZGVyOjFweCBzb2xpZCAjZWVlO2NvbG9yOiM0NDQ7bWFyZ2luOjA7d2lkdGg6YXV0b30uam5vdGlmaWNhdGlvbi1lcnJvciAuam5vdGlmaWNhdGlvbi1jb250YWluZXJ7YmFja2dyb3VuZDpoc2xhKDAsMCUsMTAwJSwuOTUpO2NvbG9yOiM3OTA5MDl9Lmpub3RpZmljYXRpb24tY2xvc2V7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScyMCcgaGVpZ2h0PScyMCcgdmlld0JveD0nMCAwIDI0IDI0JyUzRSUzQ3BhdGggZD0nTTE5IDYuNDFMMTcuNTkgNSAxMiAxMC41OSA2LjQxIDUgNSA2LjQxIDEwLjU5IDEyIDUgMTcuNTkgNi40MSAxOSAxMiAxMy40MSAxNy41OSAxOSAxOSAxNy41OSAxMy40MSAxMnonLyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDL3N2ZyUzRVxcXCIpfX0uam5vdGlmaWNhdGlvbi1oZWFkZXJ7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0O2FsaWduLWl0ZW1zOmNlbnRlcn0uanBpY2tlcnt3aGl0ZS1zcGFjZTpub3dyYXA7ZGlzcGxheTppbmxpbmUtZmxleDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7cG9zaXRpb246cmVsYXRpdmV9LmpwaWNrZXIsLmpwaWNrZXItaGVhZGVye2N1cnNvcjpwb2ludGVyO291dGxpbmU6bm9uZX0uanBpY2tlci1oZWFkZXJ7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246dG9wIDUwJSByaWdodCA1cHg7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScyNCcgaGVpZ2h0PScyNCclM0UlM0NwYXRoIGZpbGw9J25vbmUnIGQ9J00wIDBoMjR2MjRIMFYweicvJTNFJTNDcGF0aCBkPSdNNyAxMGw1IDUgNS01SDd6JyBmaWxsPSdncmF5Jy8lM0UlM0Mvc3ZnJTNFXFxcIik7dGV4dC1vdmVyZmxvdzplbGxpcHNpcztib3gtc2l6aW5nOmJvcmRlci1ib3g7dGV4dC1hbGlnbjpsZWZ0O2xpbmUtaGVpZ2h0OjI0cHg7cGFkZGluZzoycHggMzVweCAycHggMTJweDtib3JkZXItcmFkaXVzOjRweH0uanBpY2tlci1oZWFkZXI6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZWVlfS5qcGlja2VyLWNvbnRlbnR7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7ZGlzcGxheTpub25lO2JveC1zaGFkb3c6MCA0cHggNXB4IDAgcmdiYSgwLDAsMCwuMTQpLDAgMXB4IDEwcHggMCByZ2JhKDAsMCwwLC4xMiksMCAycHggNHB4IC0xcHggcmdiYSgwLDAsMCwuMik7Ym9yZGVyLXJhZGl1czo0cHg7YmFja2dyb3VuZC1jb2xvcjojZmZmO3BhZGRpbmc6NHB4O3otaW5kZXg6NTA7dGV4dC1hbGlnbjpsZWZ0O21heC1oZWlnaHQ6MjAwcHg7c2Nyb2xsYmFyLXdpZHRoOnRoaW47c2Nyb2xsYmFyLWNvbG9yOiMzMzMgdHJhbnNwYXJlbnR9LmpwaWNrZXItY29udGVudDo6LXdlYmtpdC1zY3JvbGxiYXJ7d2lkdGg6OHB4fS5qcGlja2VyLWNvbnRlbnQ6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNre2JhY2tncm91bmQ6I2VlZX0uanBpY2tlci1jb250ZW50Ojotd2Via2l0LXNjcm9sbGJhci10aHVtYntiYWNrZ3JvdW5kOiM4ODh9LmpwaWNrZXItY29udGVudD5kaXZ7cGFkZGluZzo2cHggMTVweH0uanBpY2tlci1mb2N1cz4uanBpY2tlci1jb250ZW50e2Rpc3BsYXk6YmxvY2t9LmpwaWNrZXItY29udGVudD5kaXY6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZWZlZmVmfS5qcGlja2VyLWNvbnRlbnQ+ZGl2OmVtcHR5e29wYWNpdHk6MH0uanBpY2tlci1oZWFkZXI+ZGl2LC5qcGlja2VyLWhlYWRlcj5pe2Rpc3BsYXk6YmxvY2t9LmpwaWNrZXItZm9jdXM+LmpwaWNrZXItY29udGVudC5qcGlja2VyLWNvbHVtbnN7ZGlzcGxheTpmbGV4IWltcG9ydGFudDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2ZsZXgtd3JhcDp3cmFwfS5qcHJvZ3Jlc3NiYXJ7LXdlYmtpdC10b3VjaC1jYWxsb3V0Om5vbmU7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO2JhY2tncm91bmQ6I2ZmZjstd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6dHJhbnNwYXJlbnQ7ZGlzcGxheTppbmxpbmUtYmxvY2s7Ym94LXNpemluZzpib3JkZXItYm94O2N1cnNvcjpwb2ludGVyO2JvcmRlcjoxcHggc29saWQgI2NjYztwb3NpdGlvbjpyZWxhdGl2ZX0uanByb2dyZXNzYmFyOmJlZm9yZXtjb250ZW50OmF0dHIoZGF0YS12YWx1ZSk7cG9zaXRpb246YWJzb2x1dGU7bWFyZ2luOjVweCA1cHggNXB4IDEwcHh9Lmpwcm9ncmVzc2Jhci1oZWFkZXI6Oi1tb3otcGxhY2Vob2xkZXJ7Y29sb3I6IzAwMH0uanByb2dyZXNzYmFyLWhlYWRlcjotbXMtaW5wdXQtcGxhY2Vob2xkZXJ7Y29sb3I6IzAwMH0uanByb2dyZXNzYmFyLWhlYWRlcjo6cGxhY2Vob2xkZXJ7Y29sb3I6IzAwMH0uanByb2dyZXNzYmFyOjpmb2N1c3tvdXRsaW5lOjVweCBhdXRvIC13ZWJraXQtZm9jdXMtcmluZy1jb2xvcn0uanByb2dyZXNzYmFyPmRpdntiYWNrZ3JvdW5kLWNvbG9yOiNlZWU7YmFja2dyb3VuZC1jb2xvcjpyZWQ7Ym94LXNpemluZzpib3JkZXItYm94O2hlaWdodDozMXB4fS5qcmF0aW5ne2Rpc3BsYXk6ZmxleH0uanJhdGluZz5kaXZ7d2lkdGg6MjRweDtoZWlnaHQ6MjRweDtsaW5lLWhlaWdodDoyNHB4O2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nMjQnIGhlaWdodD0nMjQnJTNFJTNDcGF0aCBkPSdNMjIgOS4yNGwtNy4xOS0uNjJMMTIgMiA5LjE5IDguNjMgMiA5LjI0bDUuNDYgNC43M0w1LjgyIDIxIDEyIDE3LjI3IDE4LjE4IDIxbC0xLjYzLTcuMDNMMjIgOS4yNHpNMTIgMTUuNGwtMy43NiAyLjI3IDEtNC4yOC0zLjMyLTIuODggNC4zOC0uMzhMMTIgNi4xbDEuNzEgNC4wNCA0LjM4LjM4LTMuMzIgMi44OCAxIDQuMjhMMTIgMTUuNHonIGZpbGw9J2dyYXknLyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDL3N2ZyUzRVxcXCIpfS5qcmF0aW5nIC5qcmF0aW5nLW92ZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScyNCcgaGVpZ2h0PScyNCclM0UlM0NwYXRoIGQ9J00wIDBoMjR2MjRIMHonIGZpbGw9J25vbmUnLyUzRSUzQ3BhdGggZD0nTTEyIDE3LjI3TDE4LjE4IDIxbC0xLjY0LTcuMDNMMjIgOS4yNGwtNy4xOS0uNjFMMTIgMiA5LjE5IDguNjMgMiA5LjI0bDUuNDYgNC43M0w1LjgyIDIxeicvJTNFJTNDcGF0aCBkPSdNMCAwaDI0djI0SDB6JyBmaWxsPSdub25lJy8lM0UlM0Mvc3ZnJTNFXFxcIik7b3BhY2l0eTouN30uanJhdGluZyAuanJhdGluZy1zZWxlY3RlZHtiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzI0JyBoZWlnaHQ9JzI0JyBmaWxsPSdyZWQnJTNFJTNDcGF0aCBkPSdNMCAwaDI0djI0SDB6JyBmaWxsPSdub25lJy8lM0UlM0NwYXRoIGQ9J00xMiAxNy4yN0wxOC4xOCAyMWwtMS42NC03LjAzTDIyIDkuMjRsLTcuMTktLjYxTDEyIDIgOS4xOSA4LjYzIDIgOS4yNGw1LjQ2IDQuNzNMNS44MiAyMXonLyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDL3N2ZyUzRVxcXCIpfS5qc2VhcmNoe3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6bm9uZX0uanNlYXJjaCwuanNlYXJjaF9jb250YWluZXJ7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lfS5qc2VhcmNoX2NvbnRhaW5lcntwb3NpdGlvbjphYnNvbHV0ZTtib3gtc2hhZG93OjAgMXB4IDJweCAwIHJnYmEoNjAsNjQsNjcsLjMwMiksMCAycHggNnB4IDJweCByZ2JhKDYwLDY0LDY3LC4xNDkpO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NHB4O3dpZHRoOjI4MHB4O3BhZGRpbmc6OHB4IDA7Ym94LXNoYWRvdzowIDJweCA0cHggcmdiYSgwLDAsMCwuMik7dHJhbnNpdGlvbjpvcGFjaXR5IC4yMThzO2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkIHJnYmEoMCwwLDAsLjIpO2N1cnNvcjpwb2ludGVyO21hcmdpbjowO21pbi13aWR0aDozMDBweDtvdXRsaW5lOm5vbmU7d2lkdGg6YXV0b30uanNlYXJjaF9jb250YWluZXI6ZW1wdHk6YWZ0ZXJ7Y29udGVudDphdHRyKGRhdGEtcGxhY2Vob2xkZXIpfS5qc2VhcmNoX2NvbnRhaW5lcj5kaXZ7Y29sb3I6IzMzMztjdXJzb3I6cG9pbnRlcjtkaXNwbGF5OmZsZXg7cGFkZGluZzo1cHggMTBweDthbGlnbi1pdGVtczpjZW50ZXI7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lfS5qc2VhcmNoX2NvbnRhaW5lcj5kaXY6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZThlYWVkfS5qc2VhcmNoX2NvbnRhaW5lcj5kaXY+aW1ne3dpZHRoOjMycHg7aGVpZ2h0OjMycHg7Ym9yZGVyLXJhZGl1czoxNnB4O21hcmdpbi1yaWdodDoycHh9LmpzZWFyY2hfY29udGFpbmVyPmRpdj5kaXYsLmpzZWFyY2hfY29udGFpbmVyPmRpdj5pbWd7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lfS5qc2VhcmNoX2NvbnRhaW5lcj5kaXY+ZGl2e292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO21hcmdpbi1sZWZ0OjJweDttYXgtd2lkdGg6MzAwcHg7d2hpdGUtc3BhY2U6bm93cmFwfS5qc2VhcmNoX2NvbnRhaW5lciAuc2VsZWN0ZWR7YmFja2dyb3VuZC1jb2xvcjojZThlYWVkfS5qc2xpZGVye291dGxpbmU6bm9uZX0uanNsaWRlci1mb2N1c3t3aWR0aDoxMDAlIWltcG9ydGFudDtoZWlnaHQ6MTAwJSFpbXBvcnRhbnR9LmpzbGlkZXIgaW1ne3dpZHRoOjEwMHB4fS5qc2xpZGVyLWxlZnQ6YmVmb3Jle2xlZnQ6MTVweDtjb250ZW50OlxcXCJhcnJvd19iYWNrX2lvc1xcXCJ9LmpzbGlkZXItbGVmdDpiZWZvcmUsLmpzbGlkZXItcmlnaHQ6YWZ0ZXJ7cG9zaXRpb246Zml4ZWQ7dG9wOjUwJTtjb2xvcjojZmZmO3dpZHRoOjMwcHg7aGVpZ2h0OjMwcHg7Zm9udC1mYW1pbHk6XFxcIk1hdGVyaWFsIEljb25zXFxcIjtmb250LXNpemU6MzBweDt0ZXh0LXNoYWRvdzowIDAgNnB4ICMzODM4Mzg7dGV4dC1hbGlnbjpjZW50ZXI7Y3Vyc29yOnBvaW50ZXJ9LmpzbGlkZXItcmlnaHQ6YWZ0ZXJ7cmlnaHQ6MTVweDtjb250ZW50OlxcXCJhcnJvd19mb3J3YXJkX2lvc1xcXCJ9LmpzbGlkZXItY2xvc2V7d2lkdGg6MjRweDtiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzI0JyBoZWlnaHQ9JzI0JyBmaWxsPSclMjNmZmYnJTNFJTNDcGF0aCBkPSdNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeicvJTNFJTNDcGF0aCBkPSdNMCAwaDI0djI0SDB6JyBmaWxsPSdub25lJy8lM0UlM0Mvc3ZnJTNFXFxcIik7dG9wOjE1cHg7cmlnaHQ6MTVweDtkaXNwbGF5OmJsb2NrIWltcG9ydGFudH0uanNsaWRlci1jbG9zZSwuanNsaWRlci1jb3VudGVye2hlaWdodDoyNHB4O3Bvc2l0aW9uOmZpeGVkO2N1cnNvcjpwb2ludGVyO3otaW5kZXg6MzAwMH0uanNsaWRlci1jb3VudGVye2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7Ym90dG9tOjE1cHg7ZGlzcGxheTpmbGV4O2Rpc3BsYXk6LXdlYmtpdC1mbGV4Oy13ZWJraXQtanVzdGlmeS1jb250ZW50OmNlbnRlcjstd2Via2l0LWFsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtmbGV4LWRpcmVjdGlvbjpyb3d9LmpzbGlkZXItY2FwdGlvbntwb3NpdGlvbjpmaXhlZDttYXgtd2lkdGg6OTB2dzt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dG9wOjE1cHg7bGVmdDoxNXB4O3otaW5kZXg6MzAwMDtjb2xvcjojZmZmO2ZvbnQtc2l6ZToxcmVtO2Rpc3BsYXk6YmxvY2shaW1wb3J0YW50fS5qc2xpZGVyLWNvdW50ZXIgZGl2e3dpZHRoOjEwcHg7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZDojZmZmO2JvcmRlci1yYWRpdXM6NTAlO21hcmdpbjowIDVweDtkaXNwbGF5OmJsb2NrIWltcG9ydGFudH0uanNsaWRlci1jb3VudGVyIC5qc2xpZGVyLWNvdW50ZXItZm9jdXN7YmFja2dyb3VuZC1jb2xvcjojNjQ5NWVkO3BvaW50ZXItZXZlbnRzOm5vbmV9LmpzbGlkZXItZm9jdXN7cG9zaXRpb246Zml4ZWQ7bGVmdDowO3RvcDowO3dpZHRoOjEwMCU7bWluLWhlaWdodDoxMDAlO21heC1oZWlnaHQ6MTAwJTt6LWluZGV4OjIwMDA7bWFyZ2luOjA7Ym94LXNpemluZzpib3JkZXItYm94O2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuOCk7dHJhbnNpdGlvbi1kdXJhdGlvbjouMDVzO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXJ9LmpzbGlkZXItZm9jdXMgaW1ne3dpZHRoOjUwdnc7aGVpZ2h0OmF1dG87Ym94LXNpemluZzpib3JkZXItYm94O21hcmdpbjowIGF1dG87dmVydGljYWwtYWxpZ246bWlkZGxlO2Rpc3BsYXk6bm9uZX0uanNsaWRlci1mb2N1cyBpbWcuanNsaWRlci12ZXJ0aWNhbHt3aWR0aDphdXRvO2hlaWdodDo4MHZofUBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDo1NzZweCl7LmpzbGlkZXItZm9jdXMgaW1nLmpzbGlkZXItdmVydGljYWx7d2lkdGg6OTl2dyFpbXBvcnRhbnQ7aGVpZ2h0OmF1dG8haW1wb3J0YW50fS5qc2xpZGVyLWZvY3VzIGltZ3t3aWR0aDoxMDB2dyFpbXBvcnRhbnQ7aGVpZ2h0OmF1dG8haW1wb3J0YW50fX0uanNsaWRlci1ncmlke2Rpc3BsYXk6LW1zLWdyaWQ7ZGlzcGxheTpncmlkO2dyaWQtZ2FwOjFweDtwb3NpdGlvbjpyZWxhdGl2ZX0uanNsaWRlci1ncmlkW2RhdGEtbnVtYmVyPVxcXCIyXFxcIl17LW1zLWdyaWQtY29sdW1uczoxZnIgNTAlO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgNTAlfS5qc2xpZGVyLWdyaWRbZGF0YS1udW1iZXI9XFxcIjNcXFwiXXstbXMtZ3JpZC1jb2x1bW5zOjFmciAzMyU7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAzMyV9LmpzbGlkZXItZ3JpZFtkYXRhLW51bWJlcj1cXFwiNFxcXCJdey1tcy1ncmlkLWNvbHVtbnM6MWZyIDI1JTtncmlkLXRlbXBsYXRlLWNvbHVtbnM6MWZyIDI1JX0uanNsaWRlci1ncmlkIGltZ3tkaXNwbGF5Om5vbmU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTstby1vYmplY3QtZml0OmNvdmVyO29iamVjdC1maXQ6Y292ZXJ9LmpzbGlkZXItZ3JpZFtkYXRhLXRvdGFsXTphZnRlcntjb250ZW50OmF0dHIoZGF0YS10b3RhbCkgXFxcIitcXFwiO2ZvbnQtc2l6ZToxLjVlbTtwb3NpdGlvbjphYnNvbHV0ZTtjb2xvcjojZmZmO3JpZ2h0OjE1cHg7Ym90dG9tOjZweH0uanNsaWRlci1ncmlkIGltZzpmaXJzdC1jaGlsZHstbXMtZ3JpZC1jb2x1bW46MTstbXMtZ3JpZC1yb3c6MTtncmlkLWNvbHVtbjoxO2dyaWQtcm93OjE7ZGlzcGxheTpibG9ja30uanNsaWRlci1ncmlkW2RhdGEtbnVtYmVyPVxcXCIyXFxcIl0gaW1nOm50aC1jaGlsZCgyKXstbXMtZ3JpZC1jb2x1bW46MjstbXMtZ3JpZC1yb3c6MTtncmlkLWNvbHVtbjoyO2dyaWQtcm93OjE7ZGlzcGxheTpibG9ja30uanNsaWRlci1ncmlkW2RhdGEtbnVtYmVyPVxcXCIzXFxcIl0gaW1nOmZpcnN0LWNoaWxkey1tcy1ncmlkLWNvbHVtbjoxLzI7LW1zLWdyaWQtcm93OjEvNDtncmlkLWNvbHVtbjoxLzI7Z3JpZC1yb3c6MS80fS5qc2xpZGVyLWdyaWRbZGF0YS1udW1iZXI9XFxcIjNcXFwiXSBpbWc6bnRoLWNoaWxkKDIpey1tcy1ncmlkLWNvbHVtbjoyOy1tcy1ncmlkLXJvdzoxO2dyaWQtY29sdW1uOjI7Z3JpZC1yb3c6MTtkaXNwbGF5OmJsb2NrfS5qc2xpZGVyLWdyaWRbZGF0YS1udW1iZXI9XFxcIjNcXFwiXSBpbWc6bnRoLWNoaWxkKDMpey1tcy1ncmlkLWNvbHVtbjoyOy1tcy1ncmlkLXJvdzoyO2dyaWQtY29sdW1uOjI7Z3JpZC1yb3c6MjtkaXNwbGF5OmJsb2NrfS5qc2xpZGVyLWdyaWRbZGF0YS1udW1iZXI9XFxcIjRcXFwiXSBpbWc6Zmlyc3QtY2hpbGR7LW1zLWdyaWQtY29sdW1uOjEvMjstbXMtZ3JpZC1yb3c6MS80O2dyaWQtY29sdW1uOjEvMjtncmlkLXJvdzoxLzR9LmpzbGlkZXItZ3JpZFtkYXRhLW51bWJlcj1cXFwiNFxcXCJdIGltZzpudGgtY2hpbGQoMil7LW1zLWdyaWQtY29sdW1uOjI7LW1zLWdyaWQtcm93OjE7Z3JpZC1jb2x1bW46MjtncmlkLXJvdzoxO2Rpc3BsYXk6YmxvY2t9LmpzbGlkZXItZ3JpZFtkYXRhLW51bWJlcj1cXFwiNFxcXCJdIGltZzpudGgtY2hpbGQoMyl7LW1zLWdyaWQtY29sdW1uOjI7LW1zLWdyaWQtcm93OjI7Z3JpZC1jb2x1bW46MjtncmlkLXJvdzoyO2Rpc3BsYXk6YmxvY2t9LmpzbGlkZXItZ3JpZFtkYXRhLW51bWJlcj1cXFwiNFxcXCJdIGltZzpudGgtY2hpbGQoNCl7LW1zLWdyaWQtY29sdW1uOjI7LW1zLWdyaWQtcm93OjM7Z3JpZC1jb2x1bW46MjtncmlkLXJvdzozO2Rpc3BsYXk6YmxvY2t9Lmp0YWJze21heC13aWR0aDoxMDB2dztwb3NpdGlvbjpyZWxhdGl2ZX0uanRhYnMgLmp0YWJzLWhlYWRlcnMsLmp0YWJzIC5qdGFicy1oZWFkZXJzLWNvbnRhaW5lcntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyfS5qdGFicyAuanRhYnMtaGVhZGVyc3tvdmVyZmxvdzpoaWRkZW47cG9zaXRpb246cmVsYXRpdmV9Lmp0YWJzIC5qdGFicy1oZWFkZXJzPmRpdjpub3QoLmp0YWJzLWJvcmRlcil7cGFkZGluZzo2cHggMjBweDttYXJnaW4tbGVmdDoxcHg7bWFyZ2luLXJpZ2h0OjFweDtiYWNrZ3JvdW5kLWNvbG9yOiNmMWYxZjE7Y3Vyc29yOnBvaW50ZXI7d2hpdGUtc3BhY2U6bm93cmFwO3RleHQtYWxpZ246Y2VudGVyfS5qdGFicyAuanRhYnMtaGVhZGVycz5kaXYuanRhYnMtc2VsZWN0ZWR7YmFja2dyb3VuZC1jb2xvcjojZThlOGU4O2NvbG9yOiMwMDB9Lmp0YWJzIC5qdGFicy1oZWFkZXJzPmRpdj5kaXZ7Y29sb3I6IzU1NTt3aWR0aDoxMDAlO292ZXJmbG93OmhpZGRlbn0uanRhYnMgLmp0YWJzLWhlYWRlcnMgaXtkaXNwbGF5OmJsb2NrO21hcmdpbjphdXRvfS5qdGFicyAuanRhYnMtY29udGVudHtib3gtc2l6aW5nOmJvcmRlci1ib3h9Lmp0YWJzIC5qdGFicy1jb250ZW50PmRpdntkaXNwbGF5Om5vbmU7Ym94LXNpemluZzpib3JkZXItYm94fS5qdGFicyAuanRhYnMtY29udGVudD5kaXYuanRhYnMtc2VsZWN0ZWR7ZGlzcGxheTpibG9ja30uanRhYnMgLmp0YWJzLWJvcmRlcntwb3NpdGlvbjphYnNvbHV0ZTtoZWlnaHQ6MnB4O2JhY2tncm91bmQtY29sb3I6Izg4ODt0cmFuc2Zvcm0tb3JpZ2luOmxlZnQ7dHJhbnNpdGlvbjphbGwgLjJzIGN1YmljLWJlemllciguNCwwLC4yLDEpO3RyYW5zaXRpb24tcHJvcGVydHk6Y29sb3IsbGVmdCx0cmFuc2Zvcm07ZGlzcGxheTpub25lfS5qdGFicy1hbmltYXRpb24gLmp0YWJzLWJvcmRlcntkaXNwbGF5OmlubGluZTtkaXNwbGF5OmluaXRpYWx9Lmp0YWJzIC5qdGFicy1jb250cm9sc3ttYXJnaW46M3B4IDNweCAzcHggMTBweDtkaXNwbGF5OmZsZXg7bWluLXdpZHRoOjgycHh9Lmp0YWJzIC5qdGFicy1jb250cm9scz5kaXZ7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZC1wb3NpdGlvbjo1MCU7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O3dpZHRoOjI0cHg7aGVpZ2h0OjI0cHg7bGluZS1oZWlnaHQ6MjRweH0uanRhYnMgLmp0YWJzLXByZXZ7bWFyZ2luLWxlZnQ6MTBweDtiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDI0IDI0JyBmaWxsPSdncmF5JyB3aWR0aD0nMTgnIGhlaWdodD0nMTgnJTNFJTNDcGF0aCBkPSdNMCAwaDI0djI0SDB6JyBmaWxsPSdub25lJy8lM0UlM0NwYXRoIGQ9J00xNS40MSA3LjQxTDE0IDZsLTYgNiA2IDYgMS40MS0xLjQxTDEwLjgzIDEyeicvJTNFJTNDL3N2ZyUzRVxcXCIpfS5qdGFicyAuanRhYnMtcHJldi5kaXNhYmxlZHttYXJnaW4tbGVmdDoxMHB4O2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9JyUyM2QzZDNkMycgd2lkdGg9JzE4JyBoZWlnaHQ9JzE4JyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDcGF0aCBkPSdNMTUuNDEgNy40MUwxNCA2bC02IDYgNiA2IDEuNDEtMS40MUwxMC44MyAxMnonLyUzRSUzQy9zdmclM0VcXFwiKX0uanRhYnMgLmp0YWJzLW5leHR7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAyNCAyNCcgZmlsbD0nZ3JheScgd2lkdGg9JzE4JyBoZWlnaHQ9JzE4JyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDcGF0aCBkPSdNMTAgNkw4LjU5IDcuNDEgMTMuMTcgMTJsLTQuNTggNC41OUwxMCAxOGw2LTZ6Jy8lM0UlM0Mvc3ZnJTNFXFxcIil9Lmp0YWJzIC5qdGFicy1uZXh0LmRpc2FibGVke2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9JyUyM2QzZDNkMycgd2lkdGg9JzE4JyBoZWlnaHQ9JzE4JyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDcGF0aCBkPSdNMTAgNkw4LjU5IDcuNDEgMTMuMTcgMTJsLTQuNTggNC41OUwxMCAxOGw2LTZ6Jy8lM0UlM0Mvc3ZnJTNFXFxcIil9Lmp0YWJzIC5qdGFicy1hZGR7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIGhlaWdodD0nMjQnIHdpZHRoPScyNCclM0UlM0NwYXRoIGQ9J00xOSAzSDVhMiAyIDAgMDAtMiAydjE0YTIgMiAwIDAwMiAyaDE0YzEuMSAwIDItLjkgMi0yVjVjMC0xLjEtLjktMi0yLTJ6bS0yIDEwaC00djRoLTJ2LTRIN3YtMmg0VjdoMnY0aDR2MnonIGZpbGw9JyUyM2JiYicvJTNFJTNDcGF0aCBkPSdNMCAwaDI0djI0SDB6JyBmaWxsPSdub25lJy8lM0UlM0Mvc3ZnJTNFXFxcIil9Lmp0YWJzLmp0YWJzLW1vZGVybiAuanRhYnMtaGVhZGVycz5kaXY6bm90KC5qdGFicy1ib3JkZXIpe3BhZGRpbmc6NHB4IDEwcHg7YmFja2dyb3VuZC1jb2xvcjojZmZmfS5qdGFicy5qdGFicy1tb2Rlcm4gLmp0YWJzLWhlYWRlcnM+Lmp0YWJzLXNlbGVjdGVkLC5qdGFicy5qdGFicy1tb2Rlcm4gLmp0YWJzLWhlYWRlcnM+Lmp0YWJzLXNlbGVjdGVkIC5tYXRlcmlhbC1pY29uc3tjb2xvcjojMDAwfS5qdGFicy5qdGFicy1tb2Rlcm4gLmp0YWJzLWhlYWRlcnN7YmFja2dyb3VuZDojZWVlZWVmIWltcG9ydGFudDtwYWRkaW5nOjJweDtib3JkZXItcmFkaXVzOjRweH0uanRhYnMuanRhYnMtbW9kZXJuIC5qdGFicy1oZWFkZXJzIC5qdGFicy1ib3JkZXJ7Ym9yZGVyLWNvbG9yOiNlZWVlZWYhaW1wb3J0YW50fS5qdGFicy5qdGFicy1tb2Rlcm4gLmp0YWJzLWJvcmRlcntiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMTk0LDE5NywxODgsLjg4NCl9Lmp0YWdze2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtmbGV4LWRpcmVjdGlvbjpyb3c7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnQ7cGFkZGluZzoycHg7Ym9yZGVyOjFweCBzb2xpZCAjY2NjfS5qdGFncy5qdGFncy1lbXB0eTpub3QoLmp0YWdzLWZvY3VzKTpiZWZvcmV7cG9zaXRpb246YWJzb2x1dGU7bWFyZ2luOjVweDtjb2xvcjojY2NjO2NvbnRlbnQ6YXR0cihkYXRhLXBsYWNlaG9sZGVyKX0uanRhZ3M+ZGl2e3BhZGRpbmc6M3B4IDIycHggM3B4IDEwcHg7cG9zaXRpb246cmVsYXRpdmU7Ym9yZGVyLXJhZGl1czoxcHg7bWFyZ2luOjJweDtkaXNwbGF5OmJsb2NrO291dGxpbmU6bm9uZX0uanRhZ3M+ZGl2OmVtcHR5OmJlZm9yZXtjb250ZW50OlxcXCIgXFxcIjt3aGl0ZS1zcGFjZTpwcmV9Lmp0YWdzPmRpdjphZnRlcntjb250ZW50OlxcXCJ4XFxcIjtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6NHB4O3JpZ2h0OjRweDt3aWR0aDoxMnB4O2hlaWdodDoxMnB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxMXB4O2Rpc3BsYXk6bm9uZX0uanRhZ3NfbGFiZWx7YmFja2dyb3VuZC1jb2xvcjojZWVlIWltcG9ydGFudH0uanRhZ3NfbGFiZWw6YWZ0ZXJ7ZGlzcGxheTppbmxpbmUtYmxvY2shaW1wb3J0YW50fS5qdGFnc19lcnJvcjphZnRlcntjb2xvcjojZmZmIWltcG9ydGFudH0uanRhZ3NfZXJyb3J7YmFja2dyb3VuZC1jb2xvcjojZDkzMDI1IWltcG9ydGFudDtjb2xvcjojZmZmfS5qdG9vbGJhci1jb250YWluZXJ7Ym9yZGVyLXJhZGl1czoycHg7bWFyZ2luLWJvdHRvbTo1cHg7Ym94LXNoYWRvdzowIDRweCA1cHggMCByZ2JhKDAsMCwwLC4xNCksMCAxcHggMTBweCAwIHJnYmEoMCwwLDAsLjEyKSwwIDJweCA0cHggLTFweCByZ2JhKDAsMCwwLC4yKTtkaXNwbGF5OmlubGluZS1mbGV4IWltcG9ydGFudH0uanRvb2xiYXJ7Y3Vyc29yOnBvaW50ZXI7d2hpdGUtc3BhY2U6bm93cmFwO2Rpc3BsYXk6ZmxleDtwYWRkaW5nOjRweDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7Zm9udC1zaXplOjEzcHh9Lmp0b29sYmFyLW1vYmlsZXtkaXNwbGF5OmZsZXg7cG9zaXRpb246Zml4ZWQ7Ym90dG9tOjA7bWFyZ2luOjA7bGVmdDowO3dpZHRoOjEwMCU7YmFja2dyb3VuZDojZjdmN2Y4O3otaW5kZXg6MTtib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNoYWRvdzowIC0xcHggMnB4IHJnYmEoMCwwLDAsLjEpO2JvcmRlci1yYWRpdXM6MH0uanRvb2xiYXI+ZGl2e2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2JveC1zaXppbmc6Ym9yZGVyLWJveDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7anVzdGlmeS1jb250ZW50OnNwYWNlLWV2ZW5seX0uanRvb2xiYXItbW9iaWxlPmRpdntkaXNwbGF5OmZsZXg7d2lkdGg6MTAwJX0uanRvb2xiYXIgLmp0b29sYmFyLWl0ZW17cG9zaXRpb246cmVsYXRpdmU7dGV4dC1hbGlnbjpjZW50ZXI7bWFyZ2luOmF1dG87cGFkZGluZzoycHggNHB4fS5qdG9vbGJhci1tb2JpbGUgLmp0b29sYmFyLWl0ZW17ZmxleDoxfS5qdG9vbGJhciAuanRvb2xiYXItZGl2aXNvcnt3aWR0aDoycHg7aGVpZ2h0OjE4cHg7cGFkZGluZzowO21hcmdpbi1sZWZ0OjRweDttYXJnaW4tcmlnaHQ6NHB4O2JhY2tncm91bmQtY29sb3I6I2RkZH0uanRvb2xiYXIgLmp0b29sYmFyLWxhYmVse3BhZGRpbmctbGVmdDo4cHg7cGFkZGluZy1yaWdodDo4cHh9Lmp0b29sYmFyLW1vYmlsZSBhe3RleHQtZGVjb3JhdGlvbjpub25lO2Rpc3BsYXk6aW5saW5lLWJsb2NrfS5qdG9vbGJhci1tb2JpbGUgaXtkaXNwbGF5OmlubGluZS1mbGV4IWltcG9ydGFudDtjb2xvcjojOTI5MjkyfS5qdG9vbGJhci1tb2JpbGUgc3Bhbntmb250LXNpemU6LjdlbTtkaXNwbGF5OmJsb2NrO2NvbG9yOiM5MjkyOTJ9Lmp0b29sYmFyLW1vYmlsZSAuanRvb2xiYXItc2VsZWN0ZWQgYSwuanRvb2xiYXItbW9iaWxlIC5qdG9vbGJhci1zZWxlY3RlZCBpLC5qdG9vbGJhci1tb2JpbGUgLmp0b29sYmFyLXNlbGVjdGVkIHNwYW57Y29sb3I6IzAwN2FmZiFpbXBvcnRhbnQ7Y29sb3I6dmFyKC0tYWN0aXZlLWNvbG9yKSFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH0uanRvb2xiYXItaXRlbXstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmV9Lmp0b29sYmFyLWl0ZW0gaXtkaXNwbGF5OmJsb2NrO2NvbG9yOiMzMzN9Lmp0b29sYmFyLWl0ZW06aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZjJmMmYyfS5qdG9vbGJhciAuanBpY2tlcntwYWRkaW5nLWxlZnQ6MDtwYWRkaW5nLXJpZ2h0OjB9Lmp0b29sYmFyIC5qcGlja2VyLWhlYWRlcntoZWlnaHQ6MjRweDtsaW5lLWhlaWdodDoyNHB4O3BhZGRpbmc6MCAyMHB4IDAgOHB4O2JhY2tncm91bmQtcG9zaXRpb246dG9wIDUwJSByaWdodCAwO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXJ9Lmp0b29sYmFyIC5qcGlja2VyLWNvbnRlbnQ+ZGl2e3BhZGRpbmc6NnB4fS5qdG9vbGJhci1hY3RpdmV7YmFja2dyb3VuZC1jb2xvcjojZWVlfS5qdG9vbGJhciAuZmF7d2lkdGg6MThweDtoZWlnaHQ6MThweDtkaXNwbGF5OmJsb2NrO2xpbmUtaGVpZ2h0OjE4cHg7Zm9udC1zaXplOjE0cHh9Lmp0b29sYmFyIC5tYXRlcmlhbC1pY29uc3tmb250LXNpemU6MThweDt3aWR0aDoyNHB4O2hlaWdodDoyNHB4O2Rpc3BsYXk6YmxvY2s7bGluZS1oZWlnaHQ6MjRweDt0cmFuc2Zvcm06cm90YXRlKC4wM2RlZyk7dGV4dC1hbGlnbjpjZW50ZXJ9Lmp0b29sYmFyIC5qdG9vbGJhci1hcnJvd3tiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjo1MCU7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAyNCAyNCcgd2lkdGg9JzE4JyBoZWlnaHQ9JzE4JyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDcGF0aCBkPSdNMTIgOGMxLjEgMCAyLS45IDItMnMtLjktMi0yLTItMiAuOS0yIDIgLjkgMiAyIDJ6bTAgMmMtMS4xIDAtMiAuOS0yIDJzLjkgMiAyIDIgMi0uOSAyLTItLjktMi0yLTJ6bTAgNmMtMS4xIDAtMiAuOS0yIDJzLjkgMiAyIDIgMi0uOSAyLTItLjktMi0yLTJ6Jy8lM0UlM0Mvc3ZnJTNFXFxcIik7d2lkdGg6MjRweDtoZWlnaHQ6MTZweDttYXJnaW4tbGVmdDo0cHg7Ym9yZGVyLWxlZnQ6MXB4IHNvbGlkICNmMmYyZjJ9Lmp0b29sYmFyLWZsb2F0aW5ne3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6bm9uZTtib3gtc2hhZG93OjAgNHB4IDVweCAwIHJnYmEoMCwwLDAsLjE0KSwwIDFweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpLDAgMnB4IDRweCAtMXB4IHJnYmEoMCwwLDAsLjIpO2JvcmRlci1yYWRpdXM6NHB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtwYWRkaW5nOjRweDt6LWluZGV4OjUwO3RleHQtYWxpZ246bGVmdH0uanRvb2xiYXItZmxvYXRpbmcgLmp0b29sYmFyLWRpdmlzb3J7ZGlzcGxheTpub25lfS5qdG9vbGJhci1mbG9hdGluZz5kaXZ7ZGlzcGxheTpibG9ja30uanRvb2xiYXItYXJyb3ctc2VsZWN0ZWQgLmp0b29sYmFyLWZsb2F0aW5ne2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcH1cIiwgXCJcIl0pO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///858\n")},859:function(module,exports,__webpack_require__){eval("// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(26);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \":root{--jexcel-border-color:#000}.jexcel_container{display:inline-block;padding-right:2px;box-sizing:border-box;-ms-scroll-chaining:none;overscroll-behavior:contain;outline:none}.jexcel_container.fullscreen{position:fixed;top:0;left:0;width:100%;height:100%;z-index:21}.jexcel_container.fullscreen .jexcel_content{overflow:auto;width:100%;height:100%;background-color:#fff}.jexcel_container.with-toolbar .jexcel>thead>tr>td{top:0}.jexcel_container.fullscreen.with-toolbar{height:calc(100% - 46px)}.jexcel_content{display:inline-block;box-sizing:border-box;padding-right:3px;padding-bottom:3px;position:relative;scrollbar-width:thin;scrollbar-color:#666 transparent}@supports (-moz-appearance:none){.jexcel_content{padding-right:10px}}.jexcel_content::-webkit-scrollbar{width:8px;height:8px}.jexcel_content::-webkit-scrollbar-track{background:#eee}.jexcel_content::-webkit-scrollbar-thumb{background:#666}.jexcel{border-collapse:separate;table-layout:fixed;white-space:nowrap;empty-cells:show;border:0;background-color:#fff;width:0;border-color:transparent #ccc #ccc transparent;border-style:solid;border-width:1px}.jexcel>thead>tr>td{border-color:#ccc transparent transparent #ccc;border-style:solid;border-width:1px;background-color:#f3f3f3;padding:2px;cursor:pointer;box-sizing:border-box;overflow:hidden;position:-webkit-sticky;position:sticky;top:0;z-index:2}.jexcel_container.with-toolbar .jexcel>thead>tr>td{top:42px}.jexcel>thead>tr>td.dragging{background-color:#fff;opacity:.5}.jexcel>thead>tr>td.selected{background-color:#dcdcdc}.jexcel>thead>tr>td.arrow-up{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath d='M7 14l5-5 5 5H7z' fill='gray'/%3E%3C/svg%3E\\\")}.jexcel>thead>tr>td.arrow-down,.jexcel>thead>tr>td.arrow-up{background-repeat:no-repeat;background-position:center right 5px;text-decoration:underline}.jexcel>thead>tr>td.arrow-down{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath d='M7 10l5 5 5-5H7z' fill='gray'/%3E%3C/svg%3E\\\")}.jexcel>tbody>tr>td:first-child{position:relative;background-color:#f3f3f3;text-align:center}.jexcel>tbody.resizable>tr>td:first-child:before{content:\\\"\\\\00a0\\\";width:100%;height:3px;position:absolute;bottom:0;left:0;cursor:row-resize}.jexcel>tbody.draggable>tr>td:first-child:after{content:\\\"\\\\00a0\\\";width:3px;height:100%;position:absolute;top:0;right:0;cursor:move}.jexcel>tbody>tr.dragging>td{background-color:#eee;opacity:.5}.jexcel>tbody>tr>td{border-color:#ccc transparent transparent #ccc;border-style:solid;border-width:1px;padding:4px;white-space:nowrap;box-sizing:border-box;line-height:1em}.jexcel>tbody>tr>td:last-child,.jexcel_overflow>tbody>tr>td{overflow:hidden}.jexcel>tbody>tr>td>img{display:inline-block;max-width:100px}.jexcel>tbody>tr>td.readonly{color:rgba(0,0,0,.3)}.jexcel>tbody>tr.selected>td:first-child{background-color:#dcdcdc}.jexcel>tbody>tr>td>input,.jexcel>tbody>tr>td>select,.jexcel>tbody>tr>td>textarea{border:0;border-radius:0;outline:0;width:100%;margin:0;padding:0 2px 0 0;background-color:transparent;box-sizing:border-box}.jexcel>tbody>tr>td>textarea{resize:none;padding-top:6px!important}.jexcel>tbody>tr>td>input[type=checkbox],.jexcel>tbody>tr>td>input[type=radio]{width:12px;margin-top:2px}.jexcel>tbody>tr>td>select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-repeat:no-repeat;background-position-x:100%;background-position-y:40%;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB3aWR0aD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTcgMTBsNSA1IDUtNXoiLz48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PC9zdmc+)}.jexcel>tbody>tr>td.jexcel_dropdown{background-repeat:no-repeat;background-position:top 50% right 5px;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath d='M7 10l5 5 5-5H7z' fill='%23d3d3d3'/%3E%3C/svg%3E\\\");text-overflow:ellipsis;overflow-x:hidden}.jexcel>tbody>tr>td.jexcel_dropdown.jexcel_comments{background:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath d='M7 10l5 5 5-5H7z' fill='%23d3d3d3'/%3E%3C/svg%3E\\\") top 50% right 5px no-repeat,url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFuGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTAxLTMxVDE4OjU1OjA4WiIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wMS0zMVQxODo1NTowOFoiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTAxLTMxVDE4OjU1OjA4WiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDphMTlhZDJmOC1kMDI2LTI1NDItODhjOS1iZTRkYjkyMmQ0MmQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpkOGI5NDUyMS00ZjEwLWQ5NDktYjUwNC0wZmU1N2I3Nzk1MDEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDplMzdjYmE1ZS1hYTMwLWNkNDUtYTAyNS1lOWYxZjk2MzUzOGUiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDplMzdjYmE1ZS1hYTMwLWNkNDUtYTAyNS1lOWYxZjk2MzUzOGUiIHN0RXZ0OndoZW49IjIwMTktMDEtMzFUMTg6NTU6MDhaIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmExOWFkMmY4LWQwMjYtMjU0Mi04OGM5LWJlNGRiOTIyZDQyZCIgc3RFdnQ6d2hlbj0iMjAxOS0wMS0zMVQxODo1NTowOFoiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4En6MDAAAAX0lEQVQYlX3KOw6AIBBAwS32RpJADXfx0pTET+ERZJ8F8RODFtONsG0QAoh0CSDM82dqodaBdQXnfoLZQM7gPai+wjNNE8R4pTuAYNZSKZASqL7CMy0LxNgJp30fKYUDi3+vIqb/+rUAAAAASUVORK5CYII=\\\") 100% 0 no-repeat}.jexcel>tbody>tr>td>.color{width:90%;height:10px;margin:auto}.jexcel>tbody>tr>td>a{text-decoration:underline}.jexcel>tbody>tr>td.highlight>a{color:#00f;cursor:pointer}.jexcel>tfoot>tr>td{border-color:#ccc transparent transparent #ccc;border-style:solid;border-width:1px;background-color:#f3f3f3;padding:2px;cursor:pointer;box-sizing:border-box;overflow:hidden}.jexcel .highlight{background-color:rgba(0,0,0,.05)}.jexcel .highlight-top{border-top:1px solid #000;box-shadow:0 -1px #ccc}.jexcel .highlight-left{border-left:1px solid #000;box-shadow:-1px 0 #ccc}.jexcel .highlight-right{border-right:1px solid #000}.jexcel .highlight-bottom{border-bottom:1px solid #000}.jexcel .highlight-top.highlight-left{box-shadow:-1px -1px #ccc;-webkit-box-shadow:-1px -1px #ccc;-moz-box-shadow:-1px -1px #ccc}.jexcel .highlight-selected{background-color:transparent}.jexcel .selection{background-color:rgba(0,0,0,.05)}.jexcel .selection-left{border-left:1px dotted #000}.jexcel .selection-right{border-right:1px dotted #000}.jexcel .selection-top{border-top:1px dotted #000}.jexcel .selection-bottom{border-bottom:1px dotted #000}.jexcel_corner{position:absolute;background-color:#000;height:1px;width:1px;border:1px solid #fff;top:-2000px;left:-2000px;cursor:crosshair;box-sizing:content-box;box-sizing:initial;z-index:30;padding:2px}.jexcel .editor{outline:0 solid transparent;overflow:visible;white-space:nowrap;text-align:left;padding:0;box-sizing:border-box;overflow:visible!important}.jexcel .editor>input{padding-left:4px}.jexcel .editor .jupload{position:fixed;top:100%;z-index:40;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-smoothing:antialiased;font-size:.875rem;letter-spacing:.2px;border-radius:4px;box-shadow:0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12),0 5px 5px -3px rgba(0,0,0,.2);padding:10px;background-color:#fff;width:300px;min-height:225px;margin-top:2px}.jexcel .editor .jupload img{width:100%;height:auto}.jexcel .editor .jexcel_richtext{position:fixed;top:100%;z-index:40;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-smoothing:antialiased;font-size:.875rem;letter-spacing:.2px;box-shadow:0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12),0 5px 5px -3px rgba(0,0,0,.2);padding:10px;background-color:#fff;min-width:280px;max-width:310px;margin-top:2px;text-align:left}.jexcel .editor .jclose:after{position:absolute;top:0;right:0;margin:10px;content:\\\"close\\\";font-family:\\\"Material icons\\\";font-size:24px;width:24px;height:24px;line-height:24px;cursor:pointer;text-shadow:0 0 5px #fff}.jexcel,.jexcel_corner,.jexcel td{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none}.jexcel_textarea{top:-999px;left:-999px;width:1px;height:1px}.jexcel .dragline,.jexcel_textarea{position:absolute}.jexcel .dragline div{position:relative;top:-6px;height:5px;width:22px}.jexcel .dragline div:hover{cursor:move}.jexcel .onDrag{background-color:rgba(0,0,0,.6)}.jexcel .error{border:1px solid red}.jexcel thead td.resizing{border-right-style:dotted!important;border-right-color:red!important}.jexcel tbody tr.resizing>td{border-bottom-style:dotted!important;border-bottom-color:red!important}.jexcel tbody td.resizing{border-right-style:dotted!important;border-right-color:red!important}.jexcel .jdropdown-header{border:0!important;outline:none!important;width:100%!important;height:100%!important;padding:0 0 0 8px!important}.jexcel .jdropdown-container{margin-top:1px}.jexcel .jdropdown-container-header{padding:0;margin:0;height:inherit}.jexcel .jdropdown-picker{border:0!important;padding:0!important;width:inherit;height:inherit}.jexcel .jexcel_comments{background:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFuGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTAxLTMxVDE4OjU1OjA4WiIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wMS0zMVQxODo1NTowOFoiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTAxLTMxVDE4OjU1OjA4WiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDphMTlhZDJmOC1kMDI2LTI1NDItODhjOS1iZTRkYjkyMmQ0MmQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpkOGI5NDUyMS00ZjEwLWQ5NDktYjUwNC0wZmU1N2I3Nzk1MDEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDplMzdjYmE1ZS1hYTMwLWNkNDUtYTAyNS1lOWYxZjk2MzUzOGUiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDplMzdjYmE1ZS1hYTMwLWNkNDUtYTAyNS1lOWYxZjk2MzUzOGUiIHN0RXZ0OndoZW49IjIwMTktMDEtMzFUMTg6NTU6MDhaIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmExOWFkMmY4LWQwMjYtMjU0Mi04OGM5LWJlNGRiOTIyZDQyZCIgc3RFdnQ6d2hlbj0iMjAxOS0wMS0zMVQxODo1NTowOFoiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4En6MDAAAAX0lEQVQYlX3KOw6AIBBAwS32RpJADXfx0pTET+ERZJ8F8RODFtONsG0QAoh0CSDM82dqodaBdQXnfoLZQM7gPai+wjNNE8R4pTuAYNZSKZASqL7CMy0LxNgJp30fKYUDi3+vIqb/+rUAAAAASUVORK5CYII=\\\");background-repeat:no-repeat;background-position:100% 0}.jexcel .sp-replacer{margin:2px;border:0}.jexcel>thead>tr.jexcel_filter>td>input{border:0;width:100%;outline:none}.jexcel_about{float:right;font-size:.7em;padding:2px;text-transform:uppercase;letter-spacing:1px;display:none}.jexcel_about a{color:#ccc;text-decoration:none}.jexcel_about img{display:none}.jexcel_filter{display:flex;justify-content:space-between;margin-bottom:4px}.jexcel_filter>div{padding:8px;align-items:center}.jexcel_pagination{display:flex;justify-content:space-between;align-items:center}.jexcel_pagination>div{display:flex;padding:10px}.jexcel_pagination>div:last-child{padding-right:10px;padding-top:10px}.jexcel_pagination>div>div{text-align:center;width:36px;height:36px;line-height:34px;border:1px solid #ccc;box-sizing:border-box;margin-left:2px;cursor:pointer}.jexcel_page{font-size:.8em}.jexcel_page_selected{font-weight:700;background-color:#f3f3f3}.jexcel_toolbar{display:flex;background-color:#f3f3f3;border:1px solid #ccc;padding:4px;margin:0 2px 4px 1px;position:-webkit-sticky;position:sticky;top:0;z-index:21}.jexcel_toolbar:empty{display:none}.jexcel_toolbar i.jexcel_toolbar_item{width:24px;height:24px;padding:4px;cursor:pointer;display:inline-block}.jexcel_toolbar i.jexcel_toolbar_item:hover{background-color:#ddd}.jexcel_toolbar select.jexcel_toolbar_item{margin-left:2px;margin-right:2px;display:inline-block;border:0;background-color:transparent;padding-right:10px}.jexcel .dragging-left{background-repeat:no-repeat;background-position:top 50% left 0;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath d='M14 7l-5 5 5 5V7z'/%3E%3Cpath fill='none' d='M24 0v24H0V0h24z'/%3E%3C/svg%3E\\\")}.jexcel .dragging-right{background-repeat:no-repeat;background-position:top 50% right 0;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath d='M10 17l5-5-5-5v10z'/%3E%3Cpath fill='none' d='M0 24V0h24v24H0z'/%3E%3C/svg%3E\\\")}.jexcel_tabs .jexcel_tab{display:none}.jexcel_tabs .jexcel_tab_link{display:inline-block;padding:10px 20px;margin-right:5px;margin-bottom:5px;background-color:#f3f3f3;cursor:pointer}.jexcel_tabs .jexcel_tab_link.selected{background-color:#ddd}.jexcel_hidden_index>colgroup>col:first-child,.jexcel_hidden_index>tbody>tr>td:first-child,.jexcel_hidden_index>tfoot>tr>td:first-child,.jexcel_hidden_index>thead>tr>td:first-child{display:none}.jexcel .jrating{display:inline-flex}.jexcel .jrating>div{zoom:.55}.jexcel .copying-top{border-top:1px dashed #000}.jexcel .copying-left{border-left:1px dashed #000}.jexcel .copying-right{border-right:1px dashed #000}.jexcel .copying-bottom{border-bottom:1px dashed #000}.jexcel .jexcel_column_filter{background-repeat:no-repeat;background-position:top 50% right 5px;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='gray' width='18' height='18'%3E%3Cpath d='M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\");text-overflow:ellipsis;overflow:hidden;padding:0 20px 0 6px}.jexcel tfoot .jexcel_freezed,.jexcel thead .jexcel_freezed{left:0;z-index:3!important;box-shadow:2px 0 2px .2px #ccc!important;-webkit-box-shadow:2px 0 2px .2px #ccc!important;-moz-box-shadow:2px 0 2px .2px #ccc!important}.jexcel tbody .jexcel_freezed{position:relative;background-color:#fff;box-shadow:1px 1px 1px 1px #ccc!important;-webkit-box-shadow:2px 4px 4px .1px #ccc!important;-moz-box-shadow:2px 4px 4px .1px #ccc!important}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvamV4Y2VsL2Rpc3QvamV4Y2VsLmNzcz81ZjZhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0Esa0NBQWtDLG1CQUFPLENBQUMsRUFBc0M7QUFDaEY7QUFDQTtBQUNBLDhCQUE4QixRQUFTLFNBQVMsMkJBQTJCLGtCQUFrQixxQkFBcUIsa0JBQWtCLHNCQUFzQix5QkFBeUIsNEJBQTRCLGFBQWEsNkJBQTZCLGVBQWUsTUFBTSxPQUFPLFdBQVcsWUFBWSxXQUFXLDZDQUE2QyxjQUFjLFdBQVcsWUFBWSxzQkFBc0IsbURBQW1ELE1BQU0sMENBQTBDLHlCQUF5QixnQkFBZ0IscUJBQXFCLHNCQUFzQixrQkFBa0IsbUJBQW1CLGtCQUFrQixxQkFBcUIsaUNBQWlDLGlDQUFpQyxnQkFBZ0Isb0JBQW9CLG1DQUFtQyxVQUFVLFdBQVcseUNBQXlDLGdCQUFnQix5Q0FBeUMsZ0JBQWdCLFFBQVEseUJBQXlCLG1CQUFtQixtQkFBbUIsaUJBQWlCLFNBQVMsc0JBQXNCLFFBQVEsK0NBQStDLG1CQUFtQixpQkFBaUIsb0JBQW9CLCtDQUErQyxtQkFBbUIsaUJBQWlCLHlCQUF5QixZQUFZLGVBQWUsc0JBQXNCLGdCQUFnQix3QkFBd0IsZ0JBQWdCLE1BQU0sVUFBVSxtREFBbUQsU0FBUyw2QkFBNkIsc0JBQXNCLFdBQVcsNkJBQTZCLHlCQUF5Qiw2QkFBNkIsMENBQTBDLHNMQUFzTCw0REFBNEQsNEJBQTRCLHFDQUFxQywwQkFBMEIsK0JBQStCLDBDQUEwQyxzTEFBc0wsZ0NBQWdDLGtCQUFrQix5QkFBeUIsa0JBQWtCLGlEQUFpRCxtQkFBbUIsV0FBVyxXQUFXLGtCQUFrQixTQUFTLE9BQU8sa0JBQWtCLGdEQUFnRCxtQkFBbUIsVUFBVSxZQUFZLGtCQUFrQixNQUFNLFFBQVEsWUFBWSw2QkFBNkIsc0JBQXNCLFdBQVcsb0JBQW9CLCtDQUErQyxtQkFBbUIsaUJBQWlCLFlBQVksbUJBQW1CLHNCQUFzQixnQkFBZ0IsNERBQTRELGdCQUFnQix3QkFBd0IscUJBQXFCLGdCQUFnQiw2QkFBNkIscUJBQXFCLHlDQUF5Qyx5QkFBeUIsa0ZBQWtGLFNBQVMsZ0JBQWdCLFVBQVUsV0FBVyxTQUFTLGtCQUFrQiw2QkFBNkIsc0JBQXNCLDZCQUE2QixZQUFZLDBCQUEwQiwrRUFBK0UsV0FBVyxlQUFlLDJCQUEyQix3QkFBd0IscUJBQXFCLGdCQUFnQiw0QkFBNEIsMkJBQTJCLDBCQUEwQix3Q0FBd0MseUxBQXlMLG9DQUFvQyw0QkFBNEIsc0NBQXNDLDBDQUEwQywyTEFBMkwsdUJBQXVCLGtCQUFrQixvREFBb0Qsb0NBQW9DLDRPQUE0TyxvckVBQW9yRSwyQkFBMkIsVUFBVSxZQUFZLFlBQVksc0JBQXNCLDBCQUEwQixnQ0FBZ0MsV0FBVyxlQUFlLG9CQUFvQiwrQ0FBK0MsbUJBQW1CLGlCQUFpQix5QkFBeUIsWUFBWSxlQUFlLHNCQUFzQixnQkFBZ0IsbUJBQW1CLGlDQUFpQyx1QkFBdUIsMEJBQTBCLHVCQUF1Qix3QkFBd0IsMkJBQTJCLHVCQUF1Qix5QkFBeUIsNEJBQTRCLDBCQUEwQiw2QkFBNkIsc0NBQXNDLDBCQUEwQixrQ0FBa0MsK0JBQStCLDRCQUE0Qiw2QkFBNkIsbUJBQW1CLGlDQUFpQyx3QkFBd0IsNEJBQTRCLHlCQUF5Qiw2QkFBNkIsdUJBQXVCLDJCQUEyQiwwQkFBMEIsOEJBQThCLGVBQWUsa0JBQWtCLHNCQUFzQixXQUFXLFVBQVUsc0JBQXNCLFlBQVksYUFBYSxpQkFBaUIsdUJBQXVCLG1CQUFtQixXQUFXLFlBQVksZ0JBQWdCLDRCQUE0QixpQkFBaUIsbUJBQW1CLGdCQUFnQixVQUFVLHNCQUFzQiwyQkFBMkIsc0JBQXNCLGlCQUFpQix5QkFBeUIsZUFBZSxTQUFTLFdBQVcseUJBQXlCLHNCQUFzQixxQkFBcUIsaUJBQWlCLG1DQUFtQyxrQkFBa0Isb0JBQW9CLGtCQUFrQix1R0FBdUcsYUFBYSxzQkFBc0IsWUFBWSxpQkFBaUIsZUFBZSw2QkFBNkIsV0FBVyxZQUFZLGlDQUFpQyxlQUFlLFNBQVMsV0FBVyx5QkFBeUIsc0JBQXNCLHFCQUFxQixpQkFBaUIsbUNBQW1DLGtCQUFrQixvQkFBb0IsdUdBQXVHLGFBQWEsc0JBQXNCLGdCQUFnQixnQkFBZ0IsZUFBZSxnQkFBZ0IsOEJBQThCLGtCQUFrQixNQUFNLFFBQVEsWUFBWSxrQkFBa0IsK0JBQStCLGVBQWUsV0FBVyxZQUFZLGlCQUFpQixlQUFlLHlCQUF5QixrQ0FBa0MsMkJBQTJCLHlCQUF5QixzQkFBc0IscUJBQXFCLGlCQUFpQix1QkFBdUIsc0JBQXNCLG9CQUFvQixrQkFBa0IsZUFBZSxpQkFBaUIsV0FBVyxZQUFZLFVBQVUsV0FBVyxtQ0FBbUMsa0JBQWtCLHNCQUFzQixrQkFBa0IsU0FBUyxXQUFXLFdBQVcsNEJBQTRCLFlBQVksZ0JBQWdCLGdDQUFnQyxlQUFlLHFCQUFxQiwwQkFBMEIsb0NBQW9DLGlDQUFpQyw2QkFBNkIscUNBQXFDLGtDQUFrQywwQkFBMEIsb0NBQW9DLGlDQUFpQywwQkFBMEIsbUJBQW1CLHVCQUF1QixxQkFBcUIsc0JBQXNCLDRCQUE0Qiw2QkFBNkIsZUFBZSxvQ0FBb0MsVUFBVSxTQUFTLGVBQWUsMEJBQTBCLG1CQUFtQixvQkFBb0IsY0FBYyxlQUFlLHlCQUF5QixnQ0FBZ0MsbXFFQUFtcUUsNEJBQTRCLDJCQUEyQixxQkFBcUIsV0FBVyxTQUFTLHdDQUF3QyxTQUFTLFdBQVcsYUFBYSxjQUFjLFlBQVksZUFBZSxZQUFZLHlCQUF5QixtQkFBbUIsYUFBYSxnQkFBZ0IsV0FBVyxxQkFBcUIsa0JBQWtCLGFBQWEsZUFBZSxhQUFhLDhCQUE4QixrQkFBa0IsbUJBQW1CLFlBQVksbUJBQW1CLG1CQUFtQixhQUFhLDhCQUE4QixtQkFBbUIsdUJBQXVCLGFBQWEsYUFBYSxrQ0FBa0MsbUJBQW1CLGlCQUFpQiwyQkFBMkIsa0JBQWtCLFdBQVcsWUFBWSxpQkFBaUIsc0JBQXNCLHNCQUFzQixnQkFBZ0IsZUFBZSxhQUFhLGVBQWUsc0JBQXNCLGdCQUFnQix5QkFBeUIsZ0JBQWdCLGFBQWEseUJBQXlCLHNCQUFzQixZQUFZLHFCQUFxQix3QkFBd0IsZ0JBQWdCLE1BQU0sV0FBVyxzQkFBc0IsYUFBYSxzQ0FBc0MsV0FBVyxZQUFZLFlBQVksZUFBZSxxQkFBcUIsNENBQTRDLHNCQUFzQiwyQ0FBMkMsZ0JBQWdCLGlCQUFpQixxQkFBcUIsU0FBUyw2QkFBNkIsbUJBQW1CLHVCQUF1Qiw0QkFBNEIsbUNBQW1DLDBDQUEwQyw0S0FBNEssd0JBQXdCLDRCQUE0QixvQ0FBb0MsMENBQTBDLDZLQUE2Syx5QkFBeUIsYUFBYSw4QkFBOEIscUJBQXFCLGtCQUFrQixpQkFBaUIsa0JBQWtCLHlCQUF5QixlQUFlLHVDQUF1QyxzQkFBc0IscUxBQXFMLGFBQWEsaUJBQWlCLG9CQUFvQixxQkFBcUIsU0FBUyxxQkFBcUIsMkJBQTJCLHNCQUFzQiw0QkFBNEIsdUJBQXVCLDZCQUE2Qix3QkFBd0IsOEJBQThCLDhCQUE4Qiw0QkFBNEIsc0NBQXNDLDBDQUEwQyxzT0FBc08sdUJBQXVCLGdCQUFnQixxQkFBcUIsNERBQTRELE9BQU8sb0JBQW9CLHlDQUF5QyxpREFBaUQsOENBQThDLDhCQUE4QixrQkFBa0Isc0JBQXNCLDBDQUEwQyxtREFBbUQsZ0RBQWdEO0FBQ3JvZ0I7QUFDQSIsImZpbGUiOiI4NTkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uLy4uL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhmYWxzZSk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgXCI6cm9vdHstLWpleGNlbC1ib3JkZXItY29sb3I6IzAwMH0uamV4Y2VsX2NvbnRhaW5lcntkaXNwbGF5OmlubGluZS1ibG9jaztwYWRkaW5nLXJpZ2h0OjJweDtib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1zLXNjcm9sbC1jaGFpbmluZzpub25lO292ZXJzY3JvbGwtYmVoYXZpb3I6Y29udGFpbjtvdXRsaW5lOm5vbmV9LmpleGNlbF9jb250YWluZXIuZnVsbHNjcmVlbntwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt6LWluZGV4OjIxfS5qZXhjZWxfY29udGFpbmVyLmZ1bGxzY3JlZW4gLmpleGNlbF9jb250ZW50e292ZXJmbG93OmF1dG87d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9LmpleGNlbF9jb250YWluZXIud2l0aC10b29sYmFyIC5qZXhjZWw+dGhlYWQ+dHI+dGR7dG9wOjB9LmpleGNlbF9jb250YWluZXIuZnVsbHNjcmVlbi53aXRoLXRvb2xiYXJ7aGVpZ2h0OmNhbGMoMTAwJSAtIDQ2cHgpfS5qZXhjZWxfY29udGVudHtkaXNwbGF5OmlubGluZS1ibG9jaztib3gtc2l6aW5nOmJvcmRlci1ib3g7cGFkZGluZy1yaWdodDozcHg7cGFkZGluZy1ib3R0b206M3B4O3Bvc2l0aW9uOnJlbGF0aXZlO3Njcm9sbGJhci13aWR0aDp0aGluO3Njcm9sbGJhci1jb2xvcjojNjY2IHRyYW5zcGFyZW50fUBzdXBwb3J0cyAoLW1vei1hcHBlYXJhbmNlOm5vbmUpey5qZXhjZWxfY29udGVudHtwYWRkaW5nLXJpZ2h0OjEwcHh9fS5qZXhjZWxfY29udGVudDo6LXdlYmtpdC1zY3JvbGxiYXJ7d2lkdGg6OHB4O2hlaWdodDo4cHh9LmpleGNlbF9jb250ZW50Ojotd2Via2l0LXNjcm9sbGJhci10cmFja3tiYWNrZ3JvdW5kOiNlZWV9LmpleGNlbF9jb250ZW50Ojotd2Via2l0LXNjcm9sbGJhci10aHVtYntiYWNrZ3JvdW5kOiM2NjZ9LmpleGNlbHtib3JkZXItY29sbGFwc2U6c2VwYXJhdGU7dGFibGUtbGF5b3V0OmZpeGVkO3doaXRlLXNwYWNlOm5vd3JhcDtlbXB0eS1jZWxsczpzaG93O2JvcmRlcjowO2JhY2tncm91bmQtY29sb3I6I2ZmZjt3aWR0aDowO2JvcmRlci1jb2xvcjp0cmFuc3BhcmVudCAjY2NjICNjY2MgdHJhbnNwYXJlbnQ7Ym9yZGVyLXN0eWxlOnNvbGlkO2JvcmRlci13aWR0aDoxcHh9LmpleGNlbD50aGVhZD50cj50ZHtib3JkZXItY29sb3I6I2NjYyB0cmFuc3BhcmVudCB0cmFuc3BhcmVudCAjY2NjO2JvcmRlci1zdHlsZTpzb2xpZDtib3JkZXItd2lkdGg6MXB4O2JhY2tncm91bmQtY29sb3I6I2YzZjNmMztwYWRkaW5nOjJweDtjdXJzb3I6cG9pbnRlcjtib3gtc2l6aW5nOmJvcmRlci1ib3g7b3ZlcmZsb3c6aGlkZGVuO3Bvc2l0aW9uOi13ZWJraXQtc3RpY2t5O3Bvc2l0aW9uOnN0aWNreTt0b3A6MDt6LWluZGV4OjJ9LmpleGNlbF9jb250YWluZXIud2l0aC10b29sYmFyIC5qZXhjZWw+dGhlYWQ+dHI+dGR7dG9wOjQycHh9LmpleGNlbD50aGVhZD50cj50ZC5kcmFnZ2luZ3tiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7b3BhY2l0eTouNX0uamV4Y2VsPnRoZWFkPnRyPnRkLnNlbGVjdGVke2JhY2tncm91bmQtY29sb3I6I2RjZGNkY30uamV4Y2VsPnRoZWFkPnRyPnRkLmFycm93LXVwe2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nMjQnIGhlaWdodD0nMjQnJTNFJTNDcGF0aCBmaWxsPSdub25lJyBkPSdNMCAwaDI0djI0SDBWMHonLyUzRSUzQ3BhdGggZD0nTTcgMTRsNS01IDUgNUg3eicgZmlsbD0nZ3JheScvJTNFJTNDL3N2ZyUzRVxcXCIpfS5qZXhjZWw+dGhlYWQ+dHI+dGQuYXJyb3ctZG93biwuamV4Y2VsPnRoZWFkPnRyPnRkLmFycm93LXVwe2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlciByaWdodCA1cHg7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX0uamV4Y2VsPnRoZWFkPnRyPnRkLmFycm93LWRvd257YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScyNCcgaGVpZ2h0PScyNCclM0UlM0NwYXRoIGZpbGw9J25vbmUnIGQ9J00wIDBoMjR2MjRIMFYweicvJTNFJTNDcGF0aCBkPSdNNyAxMGw1IDUgNS01SDd6JyBmaWxsPSdncmF5Jy8lM0UlM0Mvc3ZnJTNFXFxcIil9LmpleGNlbD50Ym9keT50cj50ZDpmaXJzdC1jaGlsZHtwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiNmM2YzZjM7dGV4dC1hbGlnbjpjZW50ZXJ9LmpleGNlbD50Ym9keS5yZXNpemFibGU+dHI+dGQ6Zmlyc3QtY2hpbGQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFwwMGEwXFxcIjt3aWR0aDoxMDAlO2hlaWdodDozcHg7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjA7bGVmdDowO2N1cnNvcjpyb3ctcmVzaXplfS5qZXhjZWw+dGJvZHkuZHJhZ2dhYmxlPnRyPnRkOmZpcnN0LWNoaWxkOmFmdGVye2NvbnRlbnQ6XFxcIlxcXFwwMGEwXFxcIjt3aWR0aDozcHg7aGVpZ2h0OjEwMCU7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MDtjdXJzb3I6bW92ZX0uamV4Y2VsPnRib2R5PnRyLmRyYWdnaW5nPnRke2JhY2tncm91bmQtY29sb3I6I2VlZTtvcGFjaXR5Oi41fS5qZXhjZWw+dGJvZHk+dHI+dGR7Ym9yZGVyLWNvbG9yOiNjY2MgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgI2NjYztib3JkZXItc3R5bGU6c29saWQ7Ym9yZGVyLXdpZHRoOjFweDtwYWRkaW5nOjRweDt3aGl0ZS1zcGFjZTpub3dyYXA7Ym94LXNpemluZzpib3JkZXItYm94O2xpbmUtaGVpZ2h0OjFlbX0uamV4Y2VsPnRib2R5PnRyPnRkOmxhc3QtY2hpbGQsLmpleGNlbF9vdmVyZmxvdz50Ym9keT50cj50ZHtvdmVyZmxvdzpoaWRkZW59LmpleGNlbD50Ym9keT50cj50ZD5pbWd7ZGlzcGxheTppbmxpbmUtYmxvY2s7bWF4LXdpZHRoOjEwMHB4fS5qZXhjZWw+dGJvZHk+dHI+dGQucmVhZG9ubHl7Y29sb3I6cmdiYSgwLDAsMCwuMyl9LmpleGNlbD50Ym9keT50ci5zZWxlY3RlZD50ZDpmaXJzdC1jaGlsZHtiYWNrZ3JvdW5kLWNvbG9yOiNkY2RjZGN9LmpleGNlbD50Ym9keT50cj50ZD5pbnB1dCwuamV4Y2VsPnRib2R5PnRyPnRkPnNlbGVjdCwuamV4Y2VsPnRib2R5PnRyPnRkPnRleHRhcmVhe2JvcmRlcjowO2JvcmRlci1yYWRpdXM6MDtvdXRsaW5lOjA7d2lkdGg6MTAwJTttYXJnaW46MDtwYWRkaW5nOjAgMnB4IDAgMDtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O2JveC1zaXppbmc6Ym9yZGVyLWJveH0uamV4Y2VsPnRib2R5PnRyPnRkPnRleHRhcmVhe3Jlc2l6ZTpub25lO3BhZGRpbmctdG9wOjZweCFpbXBvcnRhbnR9LmpleGNlbD50Ym9keT50cj50ZD5pbnB1dFt0eXBlPWNoZWNrYm94XSwuamV4Y2VsPnRib2R5PnRyPnRkPmlucHV0W3R5cGU9cmFkaW9de3dpZHRoOjEycHg7bWFyZ2luLXRvcDoycHh9LmpleGNlbD50Ym9keT50cj50ZD5zZWxlY3R7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmU7LW1vei1hcHBlYXJhbmNlOm5vbmU7YXBwZWFyYW5jZTpub25lO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uLXg6MTAwJTtiYWNrZ3JvdW5kLXBvc2l0aW9uLXk6NDAlO2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5Qm9aV2xuYUhROUlqSTBJaUIzYVdSMGFEMGlNalFpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUkrUEhCaGRHZ2daRDBpVFRjZ01UQnNOU0ExSURVdE5Yb2lMejQ4Y0dGMGFDQmtQU0pOTUNBd2FESTBkakkwU0RCNklpQm1hV3hzUFNKdWIyNWxJaTgrUEM5emRtYyspfS5qZXhjZWw+dGJvZHk+dHI+dGQuamV4Y2VsX2Ryb3Bkb3due2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOnRvcCA1MCUgcmlnaHQgNXB4O2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nMjQnIGhlaWdodD0nMjQnJTNFJTNDcGF0aCBmaWxsPSdub25lJyBkPSdNMCAwaDI0djI0SDBWMHonLyUzRSUzQ3BhdGggZD0nTTcgMTBsNSA1IDUtNUg3eicgZmlsbD0nJTIzZDNkM2QzJy8lM0UlM0Mvc3ZnJTNFXFxcIik7dGV4dC1vdmVyZmxvdzplbGxpcHNpcztvdmVyZmxvdy14OmhpZGRlbn0uamV4Y2VsPnRib2R5PnRyPnRkLmpleGNlbF9kcm9wZG93bi5qZXhjZWxfY29tbWVudHN7YmFja2dyb3VuZDp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScyNCcgaGVpZ2h0PScyNCclM0UlM0NwYXRoIGZpbGw9J25vbmUnIGQ9J00wIDBoMjR2MjRIMFYweicvJTNFJTNDcGF0aCBkPSdNNyAxMGw1IDUgNS01SDd6JyBmaWxsPSclMjNkM2QzZDMnLyUzRSUzQy9zdmclM0VcXFwiKSB0b3AgNTAlIHJpZ2h0IDVweCBuby1yZXBlYXQsdXJsKFxcXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFnQUFBQUlDQVlBQUFERUQ3NkxBQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBRnVHbFVXSFJZVFV3NlkyOXRMbUZrYjJKbExuaHRjQUFBQUFBQVBEOTRjR0ZqYTJWMElHSmxaMmx1UFNMdnU3OGlJR2xrUFNKWE5VMHdUWEJEWldocFNIcHlaVk42VGxSamVtdGpPV1FpUHo0Z1BIZzZlRzF3YldWMFlTQjRiV3h1Y3pwNFBTSmhaRzlpWlRwdWN6cHRaWFJoTHlJZ2VEcDRiWEIwYXowaVFXUnZZbVVnV0UxUUlFTnZjbVVnTlM0MkxXTXhORFVnTnprdU1UWXpORGs1TENBeU1ERTRMekE0THpFekxURTJPalF3T2pJeUlDQWdJQ0FnSUNBaVBpQThjbVJtT2xKRVJpQjRiV3h1Y3pweVpHWTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1Rrdk1ESXZNakl0Y21SbUxYTjViblJoZUMxdWN5TWlQaUE4Y21SbU9rUmxjMk55YVhCMGFXOXVJSEprWmpwaFltOTFkRDBpSWlCNGJXeHVjenA0YlhBOUltaDBkSEE2THk5dWN5NWhaRzlpWlM1amIyMHZlR0Z3THpFdU1DOGlJSGh0Ykc1ek9uaHRjRTFOUFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdmJXMHZJaUI0Yld4dWN6cHpkRVYyZEQwaWFIUjBjRG92TDI1ekxtRmtiMkpsTG1OdmJTOTRZWEF2TVM0d0wzTlVlWEJsTDFKbGMyOTFjbU5sUlhabGJuUWpJaUI0Yld4dWN6cGtZejBpYUhSMGNEb3ZMM0IxY213dWIzSm5MMlJqTDJWc1pXMWxiblJ6THpFdU1TOGlJSGh0Ykc1ek9uQm9iM1J2YzJodmNEMGlhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzl3YUc5MGIzTm9iM0F2TVM0d0x5SWdlRzF3T2tOeVpXRjBiM0pVYjI5c1BTSkJaRzlpWlNCUWFHOTBiM05vYjNBZ1EwTWdNakF4T1NBb1YybHVaRzkzY3lraUlIaHRjRHBEY21WaGRHVkVZWFJsUFNJeU1ERTVMVEF4TFRNeFZERTRPalUxT2pBNFdpSWdlRzF3T2sxbGRHRmtZWFJoUkdGMFpUMGlNakF4T1Mwd01TMHpNVlF4T0RvMU5Ub3dPRm9pSUhodGNEcE5iMlJwWm5sRVlYUmxQU0l5TURFNUxUQXhMVE14VkRFNE9qVTFPakE0V2lJZ2VHMXdUVTA2U1c1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRwaE1UbGhaREptT0Mxa01ESTJMVEkxTkRJdE9EaGpPUzFpWlRSa1lqa3lNbVEwTW1RaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUltRmtiMkpsT21SdlkybGtPbkJvYjNSdmMyaHZjRHBrT0dJNU5EVXlNUzAwWmpFd0xXUTVORGt0WWpVd05DMHdabVUxTjJJM056azFNREVpSUhodGNFMU5Pazl5YVdkcGJtRnNSRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRHBsTXpkalltRTFaUzFoWVRNd0xXTmtORFV0WVRBeU5TMWxPV1l4WmprMk16VXpPR1VpSUdSak9tWnZjbTFoZEQwaWFXMWhaMlV2Y0c1bklpQndhRzkwYjNOb2IzQTZRMjlzYjNKTmIyUmxQU0l6SWo0Z1BIaHRjRTFOT2tocGMzUnZjbmsrSUR4eVpHWTZVMlZ4UGlBOGNtUm1PbXhwSUhOMFJYWjBPbUZqZEdsdmJqMGlZM0psWVhSbFpDSWdjM1JGZG5RNmFXNXpkR0Z1WTJWSlJEMGllRzF3TG1scFpEcGxNemRqWW1FMVpTMWhZVE13TFdOa05EVXRZVEF5TlMxbE9XWXhaamsyTXpVek9HVWlJSE4wUlhaME9uZG9aVzQ5SWpJd01Ua3RNREV0TXpGVU1UZzZOVFU2TURoYUlpQnpkRVYyZERwemIyWjBkMkZ5WlVGblpXNTBQU0pCWkc5aVpTQlFhRzkwYjNOb2IzQWdRME1nTWpBeE9TQW9WMmx1Wkc5M2N5a2lMejRnUEhKa1pqcHNhU0J6ZEVWMmREcGhZM1JwYjI0OUluTmhkbVZrSWlCemRFVjJkRHBwYm5OMFlXNWpaVWxFUFNKNGJYQXVhV2xrT21FeE9XRmtNbVk0TFdRd01qWXRNalUwTWkwNE9HTTVMV0psTkdSaU9USXlaRFF5WkNJZ2MzUkZkblE2ZDJobGJqMGlNakF4T1Mwd01TMHpNVlF4T0RvMU5Ub3dPRm9pSUhOMFJYWjBPbk52Wm5SM1lYSmxRV2RsYm5ROUlrRmtiMkpsSUZCb2IzUnZjMmh2Y0NCRFF5QXlNREU1SUNoWGFXNWtiM2R6S1NJZ2MzUkZkblE2WTJoaGJtZGxaRDBpTHlJdlBpQThMM0prWmpwVFpYRStJRHd2ZUcxd1RVMDZTR2x6ZEc5eWVUNGdQQzl5WkdZNlJHVnpZM0pwY0hScGIyNCtJRHd2Y21SbU9sSkVSajRnUEM5NE9uaHRjRzFsZEdFK0lEdy9lSEJoWTJ0bGRDQmxibVE5SW5JaVB6NEVuNk1EQUFBQVgwbEVRVlFZbFgzS093NkFJQkJBd1MzMlJwSkFEWGZ4MHBURVQrRVJaSjhGOFJPREZ0T05zRzBRQW9oMENTRE04MmRxb2RhQmRRWG5mb0xaUU03Z1BhaSt3ak5ORThSNHBUdUFZTlpTS1pBU3FMN0NNeTBMeE5nSnAzMGZLWVVEaTMrdklxYi8rclVBQUFBQVNVVk9SSzVDWUlJPVxcXCIpIDEwMCUgMCBuby1yZXBlYXR9LmpleGNlbD50Ym9keT50cj50ZD4uY29sb3J7d2lkdGg6OTAlO2hlaWdodDoxMHB4O21hcmdpbjphdXRvfS5qZXhjZWw+dGJvZHk+dHI+dGQ+YXt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lfS5qZXhjZWw+dGJvZHk+dHI+dGQuaGlnaGxpZ2h0PmF7Y29sb3I6IzAwZjtjdXJzb3I6cG9pbnRlcn0uamV4Y2VsPnRmb290PnRyPnRke2JvcmRlci1jb2xvcjojY2NjIHRyYW5zcGFyZW50IHRyYW5zcGFyZW50ICNjY2M7Ym9yZGVyLXN0eWxlOnNvbGlkO2JvcmRlci13aWR0aDoxcHg7YmFja2dyb3VuZC1jb2xvcjojZjNmM2YzO3BhZGRpbmc6MnB4O2N1cnNvcjpwb2ludGVyO2JveC1zaXppbmc6Ym9yZGVyLWJveDtvdmVyZmxvdzpoaWRkZW59LmpleGNlbCAuaGlnaGxpZ2h0e2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuMDUpfS5qZXhjZWwgLmhpZ2hsaWdodC10b3B7Ym9yZGVyLXRvcDoxcHggc29saWQgIzAwMDtib3gtc2hhZG93OjAgLTFweCAjY2NjfS5qZXhjZWwgLmhpZ2hsaWdodC1sZWZ0e2JvcmRlci1sZWZ0OjFweCBzb2xpZCAjMDAwO2JveC1zaGFkb3c6LTFweCAwICNjY2N9LmpleGNlbCAuaGlnaGxpZ2h0LXJpZ2h0e2JvcmRlci1yaWdodDoxcHggc29saWQgIzAwMH0uamV4Y2VsIC5oaWdobGlnaHQtYm90dG9te2JvcmRlci1ib3R0b206MXB4IHNvbGlkICMwMDB9LmpleGNlbCAuaGlnaGxpZ2h0LXRvcC5oaWdobGlnaHQtbGVmdHtib3gtc2hhZG93Oi0xcHggLTFweCAjY2NjOy13ZWJraXQtYm94LXNoYWRvdzotMXB4IC0xcHggI2NjYzstbW96LWJveC1zaGFkb3c6LTFweCAtMXB4ICNjY2N9LmpleGNlbCAuaGlnaGxpZ2h0LXNlbGVjdGVke2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnR9LmpleGNlbCAuc2VsZWN0aW9ue2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuMDUpfS5qZXhjZWwgLnNlbGVjdGlvbi1sZWZ0e2JvcmRlci1sZWZ0OjFweCBkb3R0ZWQgIzAwMH0uamV4Y2VsIC5zZWxlY3Rpb24tcmlnaHR7Ym9yZGVyLXJpZ2h0OjFweCBkb3R0ZWQgIzAwMH0uamV4Y2VsIC5zZWxlY3Rpb24tdG9we2JvcmRlci10b3A6MXB4IGRvdHRlZCAjMDAwfS5qZXhjZWwgLnNlbGVjdGlvbi1ib3R0b217Ym9yZGVyLWJvdHRvbToxcHggZG90dGVkICMwMDB9LmpleGNlbF9jb3JuZXJ7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZC1jb2xvcjojMDAwO2hlaWdodDoxcHg7d2lkdGg6MXB4O2JvcmRlcjoxcHggc29saWQgI2ZmZjt0b3A6LTIwMDBweDtsZWZ0Oi0yMDAwcHg7Y3Vyc29yOmNyb3NzaGFpcjtib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6aW5pdGlhbDt6LWluZGV4OjMwO3BhZGRpbmc6MnB4fS5qZXhjZWwgLmVkaXRvcntvdXRsaW5lOjAgc29saWQgdHJhbnNwYXJlbnQ7b3ZlcmZsb3c6dmlzaWJsZTt3aGl0ZS1zcGFjZTpub3dyYXA7dGV4dC1hbGlnbjpsZWZ0O3BhZGRpbmc6MDtib3gtc2l6aW5nOmJvcmRlci1ib3g7b3ZlcmZsb3c6dmlzaWJsZSFpbXBvcnRhbnR9LmpleGNlbCAuZWRpdG9yPmlucHV0e3BhZGRpbmctbGVmdDo0cHh9LmpleGNlbCAuZWRpdG9yIC5qdXBsb2Fke3Bvc2l0aW9uOmZpeGVkO3RvcDoxMDAlO3otaW5kZXg6NDA7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lOy13ZWJraXQtZm9udC1zbW9vdGhpbmc6YW50aWFsaWFzZWQ7Zm9udC1zaXplOi44NzVyZW07bGV0dGVyLXNwYWNpbmc6LjJweDtib3JkZXItcmFkaXVzOjRweDtib3gtc2hhZG93OjAgOHB4IDEwcHggMXB4IHJnYmEoMCwwLDAsLjE0KSwwIDNweCAxNHB4IDJweCByZ2JhKDAsMCwwLC4xMiksMCA1cHggNXB4IC0zcHggcmdiYSgwLDAsMCwuMik7cGFkZGluZzoxMHB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjt3aWR0aDozMDBweDttaW4taGVpZ2h0OjIyNXB4O21hcmdpbi10b3A6MnB4fS5qZXhjZWwgLmVkaXRvciAuanVwbG9hZCBpbWd7d2lkdGg6MTAwJTtoZWlnaHQ6YXV0b30uamV4Y2VsIC5lZGl0b3IgLmpleGNlbF9yaWNodGV4dHtwb3NpdGlvbjpmaXhlZDt0b3A6MTAwJTt6LWluZGV4OjQwOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTstd2Via2l0LWZvbnQtc21vb3RoaW5nOmFudGlhbGlhc2VkO2ZvbnQtc2l6ZTouODc1cmVtO2xldHRlci1zcGFjaW5nOi4ycHg7Ym94LXNoYWRvdzowIDhweCAxMHB4IDFweCByZ2JhKDAsMCwwLC4xNCksMCAzcHggMTRweCAycHggcmdiYSgwLDAsMCwuMTIpLDAgNXB4IDVweCAtM3B4IHJnYmEoMCwwLDAsLjIpO3BhZGRpbmc6MTBweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7bWluLXdpZHRoOjI4MHB4O21heC13aWR0aDozMTBweDttYXJnaW4tdG9wOjJweDt0ZXh0LWFsaWduOmxlZnR9LmpleGNlbCAuZWRpdG9yIC5qY2xvc2U6YWZ0ZXJ7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MDttYXJnaW46MTBweDtjb250ZW50OlxcXCJjbG9zZVxcXCI7Zm9udC1mYW1pbHk6XFxcIk1hdGVyaWFsIGljb25zXFxcIjtmb250LXNpemU6MjRweDt3aWR0aDoyNHB4O2hlaWdodDoyNHB4O2xpbmUtaGVpZ2h0OjI0cHg7Y3Vyc29yOnBvaW50ZXI7dGV4dC1zaGFkb3c6MCAwIDVweCAjZmZmfS5qZXhjZWwsLmpleGNlbF9jb3JuZXIsLmpleGNlbCB0ZHstd2Via2l0LXRvdWNoLWNhbGxvdXQ6bm9uZTstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7LXdlYmtpdC11c2VyLWRyYWc6bm9uZTsta2h0bWwtdXNlci1kcmFnOm5vbmU7LW1vei11c2VyLWRyYWc6bm9uZTstby11c2VyLWRyYWc6bm9uZTt1c2VyLWRyYWc6bm9uZX0uamV4Y2VsX3RleHRhcmVhe3RvcDotOTk5cHg7bGVmdDotOTk5cHg7d2lkdGg6MXB4O2hlaWdodDoxcHh9LmpleGNlbCAuZHJhZ2xpbmUsLmpleGNlbF90ZXh0YXJlYXtwb3NpdGlvbjphYnNvbHV0ZX0uamV4Y2VsIC5kcmFnbGluZSBkaXZ7cG9zaXRpb246cmVsYXRpdmU7dG9wOi02cHg7aGVpZ2h0OjVweDt3aWR0aDoyMnB4fS5qZXhjZWwgLmRyYWdsaW5lIGRpdjpob3ZlcntjdXJzb3I6bW92ZX0uamV4Y2VsIC5vbkRyYWd7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC42KX0uamV4Y2VsIC5lcnJvcntib3JkZXI6MXB4IHNvbGlkIHJlZH0uamV4Y2VsIHRoZWFkIHRkLnJlc2l6aW5ne2JvcmRlci1yaWdodC1zdHlsZTpkb3R0ZWQhaW1wb3J0YW50O2JvcmRlci1yaWdodC1jb2xvcjpyZWQhaW1wb3J0YW50fS5qZXhjZWwgdGJvZHkgdHIucmVzaXppbmc+dGR7Ym9yZGVyLWJvdHRvbS1zdHlsZTpkb3R0ZWQhaW1wb3J0YW50O2JvcmRlci1ib3R0b20tY29sb3I6cmVkIWltcG9ydGFudH0uamV4Y2VsIHRib2R5IHRkLnJlc2l6aW5ne2JvcmRlci1yaWdodC1zdHlsZTpkb3R0ZWQhaW1wb3J0YW50O2JvcmRlci1yaWdodC1jb2xvcjpyZWQhaW1wb3J0YW50fS5qZXhjZWwgLmpkcm9wZG93bi1oZWFkZXJ7Ym9yZGVyOjAhaW1wb3J0YW50O291dGxpbmU6bm9uZSFpbXBvcnRhbnQ7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7aGVpZ2h0OjEwMCUhaW1wb3J0YW50O3BhZGRpbmc6MCAwIDAgOHB4IWltcG9ydGFudH0uamV4Y2VsIC5qZHJvcGRvd24tY29udGFpbmVye21hcmdpbi10b3A6MXB4fS5qZXhjZWwgLmpkcm9wZG93bi1jb250YWluZXItaGVhZGVye3BhZGRpbmc6MDttYXJnaW46MDtoZWlnaHQ6aW5oZXJpdH0uamV4Y2VsIC5qZHJvcGRvd24tcGlja2Vye2JvcmRlcjowIWltcG9ydGFudDtwYWRkaW5nOjAhaW1wb3J0YW50O3dpZHRoOmluaGVyaXQ7aGVpZ2h0OmluaGVyaXR9LmpleGNlbCAuamV4Y2VsX2NvbW1lbnRze2JhY2tncm91bmQ6dXJsKFxcXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFnQUFBQUlDQVlBQUFERUQ3NkxBQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBRnVHbFVXSFJZVFV3NlkyOXRMbUZrYjJKbExuaHRjQUFBQUFBQVBEOTRjR0ZqYTJWMElHSmxaMmx1UFNMdnU3OGlJR2xrUFNKWE5VMHdUWEJEWldocFNIcHlaVk42VGxSamVtdGpPV1FpUHo0Z1BIZzZlRzF3YldWMFlTQjRiV3h1Y3pwNFBTSmhaRzlpWlRwdWN6cHRaWFJoTHlJZ2VEcDRiWEIwYXowaVFXUnZZbVVnV0UxUUlFTnZjbVVnTlM0MkxXTXhORFVnTnprdU1UWXpORGs1TENBeU1ERTRMekE0THpFekxURTJPalF3T2pJeUlDQWdJQ0FnSUNBaVBpQThjbVJtT2xKRVJpQjRiV3h1Y3pweVpHWTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1Rrdk1ESXZNakl0Y21SbUxYTjViblJoZUMxdWN5TWlQaUE4Y21SbU9rUmxjMk55YVhCMGFXOXVJSEprWmpwaFltOTFkRDBpSWlCNGJXeHVjenA0YlhBOUltaDBkSEE2THk5dWN5NWhaRzlpWlM1amIyMHZlR0Z3THpFdU1DOGlJSGh0Ykc1ek9uaHRjRTFOUFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdmJXMHZJaUI0Yld4dWN6cHpkRVYyZEQwaWFIUjBjRG92TDI1ekxtRmtiMkpsTG1OdmJTOTRZWEF2TVM0d0wzTlVlWEJsTDFKbGMyOTFjbU5sUlhabGJuUWpJaUI0Yld4dWN6cGtZejBpYUhSMGNEb3ZMM0IxY213dWIzSm5MMlJqTDJWc1pXMWxiblJ6THpFdU1TOGlJSGh0Ykc1ek9uQm9iM1J2YzJodmNEMGlhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzl3YUc5MGIzTm9iM0F2TVM0d0x5SWdlRzF3T2tOeVpXRjBiM0pVYjI5c1BTSkJaRzlpWlNCUWFHOTBiM05vYjNBZ1EwTWdNakF4T1NBb1YybHVaRzkzY3lraUlIaHRjRHBEY21WaGRHVkVZWFJsUFNJeU1ERTVMVEF4TFRNeFZERTRPalUxT2pBNFdpSWdlRzF3T2sxbGRHRmtZWFJoUkdGMFpUMGlNakF4T1Mwd01TMHpNVlF4T0RvMU5Ub3dPRm9pSUhodGNEcE5iMlJwWm5sRVlYUmxQU0l5TURFNUxUQXhMVE14VkRFNE9qVTFPakE0V2lJZ2VHMXdUVTA2U1c1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRwaE1UbGhaREptT0Mxa01ESTJMVEkxTkRJdE9EaGpPUzFpWlRSa1lqa3lNbVEwTW1RaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUltRmtiMkpsT21SdlkybGtPbkJvYjNSdmMyaHZjRHBrT0dJNU5EVXlNUzAwWmpFd0xXUTVORGt0WWpVd05DMHdabVUxTjJJM056azFNREVpSUhodGNFMU5Pazl5YVdkcGJtRnNSRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRHBsTXpkalltRTFaUzFoWVRNd0xXTmtORFV0WVRBeU5TMWxPV1l4WmprMk16VXpPR1VpSUdSak9tWnZjbTFoZEQwaWFXMWhaMlV2Y0c1bklpQndhRzkwYjNOb2IzQTZRMjlzYjNKTmIyUmxQU0l6SWo0Z1BIaHRjRTFOT2tocGMzUnZjbmsrSUR4eVpHWTZVMlZ4UGlBOGNtUm1PbXhwSUhOMFJYWjBPbUZqZEdsdmJqMGlZM0psWVhSbFpDSWdjM1JGZG5RNmFXNXpkR0Z1WTJWSlJEMGllRzF3TG1scFpEcGxNemRqWW1FMVpTMWhZVE13TFdOa05EVXRZVEF5TlMxbE9XWXhaamsyTXpVek9HVWlJSE4wUlhaME9uZG9aVzQ5SWpJd01Ua3RNREV0TXpGVU1UZzZOVFU2TURoYUlpQnpkRVYyZERwemIyWjBkMkZ5WlVGblpXNTBQU0pCWkc5aVpTQlFhRzkwYjNOb2IzQWdRME1nTWpBeE9TQW9WMmx1Wkc5M2N5a2lMejRnUEhKa1pqcHNhU0J6ZEVWMmREcGhZM1JwYjI0OUluTmhkbVZrSWlCemRFVjJkRHBwYm5OMFlXNWpaVWxFUFNKNGJYQXVhV2xrT21FeE9XRmtNbVk0TFdRd01qWXRNalUwTWkwNE9HTTVMV0psTkdSaU9USXlaRFF5WkNJZ2MzUkZkblE2ZDJobGJqMGlNakF4T1Mwd01TMHpNVlF4T0RvMU5Ub3dPRm9pSUhOMFJYWjBPbk52Wm5SM1lYSmxRV2RsYm5ROUlrRmtiMkpsSUZCb2IzUnZjMmh2Y0NCRFF5QXlNREU1SUNoWGFXNWtiM2R6S1NJZ2MzUkZkblE2WTJoaGJtZGxaRDBpTHlJdlBpQThMM0prWmpwVFpYRStJRHd2ZUcxd1RVMDZTR2x6ZEc5eWVUNGdQQzl5WkdZNlJHVnpZM0pwY0hScGIyNCtJRHd2Y21SbU9sSkVSajRnUEM5NE9uaHRjRzFsZEdFK0lEdy9lSEJoWTJ0bGRDQmxibVE5SW5JaVB6NEVuNk1EQUFBQVgwbEVRVlFZbFgzS093NkFJQkJBd1MzMlJwSkFEWGZ4MHBURVQrRVJaSjhGOFJPREZ0T05zRzBRQW9oMENTRE04MmRxb2RhQmRRWG5mb0xaUU03Z1BhaSt3ak5ORThSNHBUdUFZTlpTS1pBU3FMN0NNeTBMeE5nSnAzMGZLWVVEaTMrdklxYi8rclVBQUFBQVNVVk9SSzVDWUlJPVxcXCIpO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjEwMCUgMH0uamV4Y2VsIC5zcC1yZXBsYWNlcnttYXJnaW46MnB4O2JvcmRlcjowfS5qZXhjZWw+dGhlYWQ+dHIuamV4Y2VsX2ZpbHRlcj50ZD5pbnB1dHtib3JkZXI6MDt3aWR0aDoxMDAlO291dGxpbmU6bm9uZX0uamV4Y2VsX2Fib3V0e2Zsb2F0OnJpZ2h0O2ZvbnQtc2l6ZTouN2VtO3BhZGRpbmc6MnB4O3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzoxcHg7ZGlzcGxheTpub25lfS5qZXhjZWxfYWJvdXQgYXtjb2xvcjojY2NjO3RleHQtZGVjb3JhdGlvbjpub25lfS5qZXhjZWxfYWJvdXQgaW1ne2Rpc3BsYXk6bm9uZX0uamV4Y2VsX2ZpbHRlcntkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47bWFyZ2luLWJvdHRvbTo0cHh9LmpleGNlbF9maWx0ZXI+ZGl2e3BhZGRpbmc6OHB4O2FsaWduLWl0ZW1zOmNlbnRlcn0uamV4Y2VsX3BhZ2luYXRpb257ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcn0uamV4Y2VsX3BhZ2luYXRpb24+ZGl2e2Rpc3BsYXk6ZmxleDtwYWRkaW5nOjEwcHh9LmpleGNlbF9wYWdpbmF0aW9uPmRpdjpsYXN0LWNoaWxke3BhZGRpbmctcmlnaHQ6MTBweDtwYWRkaW5nLXRvcDoxMHB4fS5qZXhjZWxfcGFnaW5hdGlvbj5kaXY+ZGl2e3RleHQtYWxpZ246Y2VudGVyO3dpZHRoOjM2cHg7aGVpZ2h0OjM2cHg7bGluZS1oZWlnaHQ6MzRweDtib3JkZXI6MXB4IHNvbGlkICNjY2M7Ym94LXNpemluZzpib3JkZXItYm94O21hcmdpbi1sZWZ0OjJweDtjdXJzb3I6cG9pbnRlcn0uamV4Y2VsX3BhZ2V7Zm9udC1zaXplOi44ZW19LmpleGNlbF9wYWdlX3NlbGVjdGVke2ZvbnQtd2VpZ2h0OjcwMDtiYWNrZ3JvdW5kLWNvbG9yOiNmM2YzZjN9LmpleGNlbF90b29sYmFye2Rpc3BsYXk6ZmxleDtiYWNrZ3JvdW5kLWNvbG9yOiNmM2YzZjM7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO3BhZGRpbmc6NHB4O21hcmdpbjowIDJweCA0cHggMXB4O3Bvc2l0aW9uOi13ZWJraXQtc3RpY2t5O3Bvc2l0aW9uOnN0aWNreTt0b3A6MDt6LWluZGV4OjIxfS5qZXhjZWxfdG9vbGJhcjplbXB0eXtkaXNwbGF5Om5vbmV9LmpleGNlbF90b29sYmFyIGkuamV4Y2VsX3Rvb2xiYXJfaXRlbXt3aWR0aDoyNHB4O2hlaWdodDoyNHB4O3BhZGRpbmc6NHB4O2N1cnNvcjpwb2ludGVyO2Rpc3BsYXk6aW5saW5lLWJsb2NrfS5qZXhjZWxfdG9vbGJhciBpLmpleGNlbF90b29sYmFyX2l0ZW06aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZGRkfS5qZXhjZWxfdG9vbGJhciBzZWxlY3QuamV4Y2VsX3Rvb2xiYXJfaXRlbXttYXJnaW4tbGVmdDoycHg7bWFyZ2luLXJpZ2h0OjJweDtkaXNwbGF5OmlubGluZS1ibG9jaztib3JkZXI6MDtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O3BhZGRpbmctcmlnaHQ6MTBweH0uamV4Y2VsIC5kcmFnZ2luZy1sZWZ0e2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOnRvcCA1MCUgbGVmdCAwO2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nMjQnIGhlaWdodD0nMjQnJTNFJTNDcGF0aCBkPSdNMTQgN2wtNSA1IDUgNVY3eicvJTNFJTNDcGF0aCBmaWxsPSdub25lJyBkPSdNMjQgMHYyNEgwVjBoMjR6Jy8lM0UlM0Mvc3ZnJTNFXFxcIil9LmpleGNlbCAuZHJhZ2dpbmctcmlnaHR7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246dG9wIDUwJSByaWdodCAwO2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nMjQnIGhlaWdodD0nMjQnJTNFJTNDcGF0aCBkPSdNMTAgMTdsNS01LTUtNXYxMHonLyUzRSUzQ3BhdGggZmlsbD0nbm9uZScgZD0nTTAgMjRWMGgyNHYyNEgweicvJTNFJTNDL3N2ZyUzRVxcXCIpfS5qZXhjZWxfdGFicyAuamV4Y2VsX3RhYntkaXNwbGF5Om5vbmV9LmpleGNlbF90YWJzIC5qZXhjZWxfdGFiX2xpbmt7ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzoxMHB4IDIwcHg7bWFyZ2luLXJpZ2h0OjVweDttYXJnaW4tYm90dG9tOjVweDtiYWNrZ3JvdW5kLWNvbG9yOiNmM2YzZjM7Y3Vyc29yOnBvaW50ZXJ9LmpleGNlbF90YWJzIC5qZXhjZWxfdGFiX2xpbmsuc2VsZWN0ZWR7YmFja2dyb3VuZC1jb2xvcjojZGRkfS5qZXhjZWxfaGlkZGVuX2luZGV4PmNvbGdyb3VwPmNvbDpmaXJzdC1jaGlsZCwuamV4Y2VsX2hpZGRlbl9pbmRleD50Ym9keT50cj50ZDpmaXJzdC1jaGlsZCwuamV4Y2VsX2hpZGRlbl9pbmRleD50Zm9vdD50cj50ZDpmaXJzdC1jaGlsZCwuamV4Y2VsX2hpZGRlbl9pbmRleD50aGVhZD50cj50ZDpmaXJzdC1jaGlsZHtkaXNwbGF5Om5vbmV9LmpleGNlbCAuanJhdGluZ3tkaXNwbGF5OmlubGluZS1mbGV4fS5qZXhjZWwgLmpyYXRpbmc+ZGl2e3pvb206LjU1fS5qZXhjZWwgLmNvcHlpbmctdG9we2JvcmRlci10b3A6MXB4IGRhc2hlZCAjMDAwfS5qZXhjZWwgLmNvcHlpbmctbGVmdHtib3JkZXItbGVmdDoxcHggZGFzaGVkICMwMDB9LmpleGNlbCAuY29weWluZy1yaWdodHtib3JkZXItcmlnaHQ6MXB4IGRhc2hlZCAjMDAwfS5qZXhjZWwgLmNvcHlpbmctYm90dG9te2JvcmRlci1ib3R0b206MXB4IGRhc2hlZCAjMDAwfS5qZXhjZWwgLmpleGNlbF9jb2x1bW5fZmlsdGVye2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOnRvcCA1MCUgcmlnaHQgNXB4O2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9J2dyYXknIHdpZHRoPScxOCcgaGVpZ2h0PScxOCclM0UlM0NwYXRoIGQ9J00xMCAxOGg0di0yaC00djJ6TTMgNnYyaDE4VjZIM3ptMyA3aDEydi0ySDZ2MnonLyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDL3N2ZyUzRVxcXCIpO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7b3ZlcmZsb3c6aGlkZGVuO3BhZGRpbmc6MCAyMHB4IDAgNnB4fS5qZXhjZWwgdGZvb3QgLmpleGNlbF9mcmVlemVkLC5qZXhjZWwgdGhlYWQgLmpleGNlbF9mcmVlemVke2xlZnQ6MDt6LWluZGV4OjMhaW1wb3J0YW50O2JveC1zaGFkb3c6MnB4IDAgMnB4IC4ycHggI2NjYyFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtc2hhZG93OjJweCAwIDJweCAuMnB4ICNjY2MhaW1wb3J0YW50Oy1tb3otYm94LXNoYWRvdzoycHggMCAycHggLjJweCAjY2NjIWltcG9ydGFudH0uamV4Y2VsIHRib2R5IC5qZXhjZWxfZnJlZXplZHtwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym94LXNoYWRvdzoxcHggMXB4IDFweCAxcHggI2NjYyFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtc2hhZG93OjJweCA0cHggNHB4IC4xcHggI2NjYyFpbXBvcnRhbnQ7LW1vei1ib3gtc2hhZG93OjJweCA0cHggNHB4IC4xcHggI2NjYyFpbXBvcnRhbnR9XCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///859\n")}}]);